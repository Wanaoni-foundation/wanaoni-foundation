/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/var Wg=function(e,t){return Wg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},Wg(e,t)};export function __extends(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Wg(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}export var __assign=function(){return __assign=Object.assign||function(t){for(var r,i=1,s=arguments.length;i<s;i++){r=arguments[i];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},__assign.apply(this,arguments)};export function __rest(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r}export function __decorate(e,t,r,i){var s=arguments.length,n=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(n=(s<3?o(n):s>3?o(t,r,n):o(t,r))||n);return s>3&&n&&Object.defineProperty(t,r,n),n}export function __param(e,t){return function(r,i){t(r,i,e)}}export function __esDecorate(e,t,r,i,s,n){function o($){if($!==void 0&&typeof $!="function")throw new TypeError("Function expected");return $}for(var a=i.kind,c=a==="getter"?"get":a==="setter"?"set":"value",l=!t&&e?i.static?e:e.prototype:null,u=t||(l?Object.getOwnPropertyDescriptor(l,i.name):{}),h,d=!1,f=r.length-1;f>=0;f--){var g={};for(var v in i)g[v]=v==="access"?{}:i[v];for(var v in i.access)g.access[v]=i.access[v];g.addInitializer=function($){if(d)throw new TypeError("Cannot add initializers after decoration has completed");n.push(o($||null))};var x=(0,r[f])(a==="accessor"?{get:u.get,set:u.set}:u[c],g);if(a==="accessor"){if(x===void 0)continue;if(x===null||typeof x!="object")throw new TypeError("Object expected");(h=o(x.get))&&(u.get=h),(h=o(x.set))&&(u.set=h),(h=o(x.init))&&s.unshift(h)}else(h=o(x))&&(a==="field"?s.unshift(h):u[c]=h)}l&&Object.defineProperty(l,i.name,u),d=!0}export function __runInitializers(e,t,r){for(var i=arguments.length>2,s=0;s<t.length;s++)r=i?t[s].call(e,r):t[s].call(e);return i?r:void 0}export function __propKey(e){return typeof e=="symbol"?e:"".concat(e)}export function __setFunctionName(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}export function __metadata(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}export function __awaiter(e,t,r,i){function s(n){return n instanceof r?n:new r(function(o){o(n)})}return new(r||(r=Promise))(function(n,o){function a(u){try{l(i.next(u))}catch(h){o(h)}}function c(u){try{l(i.throw(u))}catch(h){o(h)}}function l(u){u.done?n(u.value):s(u.value).then(a,c)}l((i=i.apply(e,t||[])).next())})}export function __generator(e,t){var r={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},i,s,n,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(i)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(r=0)),r;)try{if(i=1,s&&(n=l[0]&2?s.return:l[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,l[1])).done)return n;switch(s=0,n&&(l=[l[0]&2,n.value]),l[0]){case 0:case 1:n=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,s=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(n=r.trys,!(n=n.length>0&&n[n.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!n||l[1]>n[0]&&l[1]<n[3])){r.label=l[1];break}if(l[0]===6&&r.label<n[1]){r.label=n[1],n=l;break}if(n&&r.label<n[2]){r.label=n[2],r.ops.push(l);break}n[2]&&r.ops.pop(),r.trys.pop();continue}l=t.call(e,r)}catch(u){l=[6,u],s=0}finally{i=n=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}export var __createBinding=Object.create?function(e,t,r,i){i===void 0&&(i=r);var s=Object.getOwnPropertyDescriptor(t,r);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,s)}:function(e,t,r,i){i===void 0&&(i=r),e[i]=t[r]};export function __exportStar(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&__createBinding(t,e,r)}export function __values(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}export function __read(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var i=r.call(e),s,n=[],o;try{for(;(t===void 0||t-- >0)&&!(s=i.next()).done;)n.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return n}export function __spread(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read(arguments[t]));return e}export function __spreadArrays(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var i=Array(e),s=0,t=0;t<r;t++)for(var n=arguments[t],o=0,a=n.length;o<a;o++,s++)i[s]=n[o];return i}export function __spreadArray(e,t,r){if(r||arguments.length===2)for(var i=0,s=t.length,n;i<s;i++)(n||!(i in t))&&(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}export function __await(e){return this instanceof __await?(this.v=e,this):new __await(e)}export function __asyncGenerator(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r.apply(e,t||[]),s,n=[];return s={},a("next"),a("throw"),a("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(f){return function(g){return Promise.resolve(g).then(f,h)}}function a(f,g){i[f]&&(s[f]=function(v){return new Promise(function(x,$){n.push([f,v,x,$])>1||c(f,v)})},g&&(s[f]=g(s[f])))}function c(f,g){try{l(i[f](g))}catch(v){d(n[0][3],v)}}function l(f){f.value instanceof __await?Promise.resolve(f.value.v).then(u,h):d(n[0][2],f)}function u(f){c("next",f)}function h(f){c("throw",f)}function d(f,g){f(g),n.shift(),n.length&&c(n[0][0],n[0][1])}}export function __asyncDelegator(e){var t,r;return t={},i("next"),i("throw",function(s){throw s}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(s,n){t[s]=e[s]?function(o){return(r=!r)?{value:__await(e[s](o)),done:!1}:n?n(o):o}:n}}export function __asyncValues(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof __values=="function"?__values(e):e[Symbol.iterator](),r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r);function i(n){r[n]=e[n]&&function(o){return new Promise(function(a,c){o=e[n](o),s(a,c,o.done,o.value)})}}function s(n,o,a,c){Promise.resolve(c).then(function(l){n({value:l,done:a})},o)}}export function __makeTemplateObject(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var mC=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};export function __importStar(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&__createBinding(t,e,r);return mC(t,e),t}export function __importDefault(e){return e&&e.__esModule?e:{default:e}}export function __classPrivateFieldGet(e,t,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(e):i?i.value:t.get(e)}export function __classPrivateFieldSet(e,t,r,i,s){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?s.call(e,r):s?s.value=r:t.set(e,r),r}export function __classPrivateFieldIn(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}export function __addDisposableResource(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var i,s;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");i=t[Symbol.asyncDispose]}if(i===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=t[Symbol.dispose],r&&(s=i)}if(typeof i!="function")throw new TypeError("Object not disposable.");s&&(i=function(){try{s.call(this)}catch(n){return Promise.reject(n)}}),e.stack.push({value:t,dispose:i,async:r})}else r&&e.stack.push({async:!0});return t}var vC=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var i=new Error(r);return i.name="SuppressedError",i.error=e,i.suppressed=t,i};export function __disposeResources(e){function t(i){e.error=e.hasError?new vC(i,e.error,"An error was suppressed during disposal."):i,e.hasError=!0}function r(){for(;e.stack.length;){var i=e.stack.pop();try{var s=i.dispose&&i.dispose.call(i.value);if(i.async)return Promise.resolve(s).then(r,function(n){return t(n),r()})}catch(n){t(n)}}if(e.hasError)throw e.error}return r()}export default{__extends,__assign,__rest,__decorate,__param,__metadata,__awaiter,__generator,__createBinding,__exportStar,__values,__read,__spread,__spreadArrays,__spreadArray,__await,__asyncGenerator,__asyncDelegator,__asyncValues,__makeTemplateObject,__importStar,__importDefault,__classPrivateFieldGet,__classPrivateFieldSet,__classPrivateFieldIn,__addDisposableResource,__disposeResources};var wC=Object.defineProperty,bC=(e,t)=>{for(var r in t)wC(e,r,{get:t[r],enumerable:!0})};import yC from"minimist";import*as kC from"net";var wy;function Vg(e,t){const r=Object.create(null);for(const i of e){const s=t(i);let n=r[s];n||(n=r[s]=[]),n.push(i)}return r}function xC(e,t){const r=[],i=[];for(const s of e)t.has(s)||r.push(s);for(const s of t)e.has(s)||i.push(s);return{removed:r,added:i}}var wz=class{static{wy=Symbol.toStringTag}constructor(e,t){this.b=t,this.a=new Map,this[wy]="SetWithKey";for(const r of e)this.add(r)}get size(){return this.a.size}add(e){const t=this.b(e);return this.a.set(t,e),this}delete(e){return this.a.delete(this.b(e))}has(e){return this.a.has(this.b(e))}*entries(){for(const e of this.a.values())yield[e,e]}keys(){return this.values()}*values(){for(const e of this.a.values())yield e}clear(){this.a.clear()}forEach(e,t){this.a.forEach(r=>e.call(t,r,r,this))}[Symbol.iterator](){return this.values()}},EC=class{constructor(){this.b=[],this.a=function(e){setTimeout(()=>{throw e.stack?xi.isErrorNoTelemetry(e)?new xi(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.b.push(e),()=>{this.d(e)}}c(e){this.b.forEach(t=>{t(e)})}d(e){this.b.splice(this.b.indexOf(e),1)}setUnexpectedErrorHandler(e){this.a=e}getUnexpectedErrorHandler(){return this.a}onUnexpectedError(e){this.a(e),this.c(e)}onUnexpectedExternalError(e){this.a(e)}},uh=new EC;function qg(e){uh.setUnexpectedErrorHandler(e)}function SC(e){if(!e||typeof e!="object")return!1;const t=e;return t.code==="EPIPE"&&t.syscall?.toUpperCase()==="WRITE"}function hh(e){uh.onUnexpectedError(e)}function It(e){ys(e)||uh.onUnexpectedError(e)}function Gg(e){ys(e)||uh.onUnexpectedExternalError(e)}function Dc(e){if(e instanceof Error){const{name:t,message:r}=e,i=e.stacktrace||e.stack;return{$isError:!0,name:t,message:r,stack:i,noTelemetry:xi.isErrorNoTelemetry(e)}}return e}function $C(e){let t;return e.noTelemetry?t=new xi:(t=new Error,t.name=e.name),t.message=e.message,t.stack=e.stack,t}var dh="Canceled";function ys(e){return e instanceof Er?!0:e instanceof Error&&e.name===dh&&e.message===dh}var Er=class extends Error{constructor(){super(dh),this.name=this.message}};function Ac(){const e=new Error(dh);return e.name=e.message,e}function Le(e){return e?new Error(`Illegal argument: ${e}`):new Error("Illegal argument")}function Jg(e){return e?new Error(`Illegal state: ${e}`):new Error("Illegal state")}var Jn=class extends TypeError{constructor(e){super(e?`${e} is read-only and cannot be changed`:"Cannot change read-only property")}},CC=class extends Error{constructor(e){super("NotImplemented"),e&&(this.message=e)}},Qg=class extends Error{constructor(e){super("NotSupported"),e&&(this.message=e)}},xi=class Yb extends Error{constructor(t){super(t),this.name="CodeExpectedError"}static fromError(t){if(t instanceof Yb)return t;const r=new Yb;return r.message=t.message,r.stack=t.stack,r}static isErrorNoTelemetry(t){return t.name==="CodeExpectedError"}},by=class K$ extends Error{constructor(t){super(t||"An unexpected bug occurred."),Object.setPrototypeOf(this,K$.prototype)}};function Yg(e,t){const r=this;let i=!1,s;return function(){if(i)return s;if(i=!0,t)try{s=e.apply(r,arguments)}finally{t()}else s=e.apply(r,arguments);return s}}function PC(e,t){const r=IC(e,t);if(r!==-1)return e[r]}function IC(e,t,r=e.length-1){for(let i=r;i>=0;i--){const s=e[i];if(t(s))return i}return-1}function DC(e,t,r=0,i=e.length){let s=r,n=i;for(;s<n;){const o=Math.floor((s+n)/2);t(e[o])?s=o+1:n=o}return s-1}function AC(e,t,r=0,i=e.length){let s=r,n=i;for(;s<n;){const o=Math.floor((s+n)/2);t(e[o])?n=o:s=o+1}return s}var bz=class e3{static{this.assertInvariants=!1}constructor(t){this.e=t,this.c=0}findLastMonotonous(t){if(e3.assertInvariants){if(this.d){for(const i of this.e)if(this.d(i)&&!t(i))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}this.d=t}const r=DC(this.e,t,this.c);return this.c=r+1,r===-1?void 0:this.e[r]}};function Xi(e,t,r=(i,s)=>i===s){if(e===t)return!0;if(!e||!t||e.length!==t.length)return!1;for(let i=0,s=e.length;i<s;i++)if(!r(e[i],t[i]))return!1;return!0}function TC(e,t){const r=[];let i;for(const s of e.slice(0).sort(t))!i||t(i[0],s)!==0?(i=[s],r.push(i)):i.push(s);return r}function yy(e,t,r){const i=[];function s(a,c,l){if(c===0&&l.length===0)return;const u=i[i.length-1];u&&u.start+u.deleteCount===a?(u.deleteCount+=c,u.toInsert.push(...l)):i.push({start:a,deleteCount:c,toInsert:l})}let n=0,o=0;for(;;){if(n===e.length){s(n,0,t.slice(o));break}if(o===t.length){s(n,e.length-n,[]);break}const a=e[n],c=t[o],l=r(a,c);l===0?(n+=1,o+=1):l<0?(s(n,1,[]),n+=1):l>0&&(s(n,0,[c]),o+=1)}return i}function RC(e,t,r){const i=yy(e,t,r),s=[],n=[];for(const o of i)s.push(...e.slice(o.start,o.start+o.deleteCount)),n.push(...o.toInsert);return{removed:s,added:n}}function LC(e,t,r,i,s){return r===0?Promise.resolve([]):new Promise((n,o)=>{(async()=>{const a=e.length,c=e.slice(0,r).sort(t);for(let l=r,u=Math.min(r+i,a);l<a;l=u,u=Math.min(u+i,a)){if(l>r&&await new Promise(h=>setTimeout(h)),s&&s.isCancellationRequested)throw new Er;NC(e,t,c,l,u)}return c})().then(n,o)})}function NC(e,t,r,i,s){for(const n=r.length;i<s;i++){const o=e[i];if(t(o,r[n-1])<0){r.pop();const a=AC(r,c=>t(o,c)<0);r.splice(a,0,o)}}}function Rt(e){return e.filter(t=>!!t)}function FC(e){let t=0;for(let r=0;r<e.length;r++)e[r]&&(e[t]=e[r],t+=1);e.length=t}function Xg(e){return!Array.isArray(e)||e.length===0}function Tc(e){return Array.isArray(e)&&e.length>0}function Qo(e,t=r=>r){const r=new Set;return e.filter(i=>{const s=t(i);return r.has(s)?!1:(r.add(s),!0)})}function ky(e,t){return e.push(t),()=>OC(e,t)}function OC(e,t){const r=e.indexOf(t);if(r>-1)return e.splice(r,1),t}function xy(e,t){let r;if(typeof t=="number"){let i=t;r=()=>{const s=Math.sin(i++)*179426549;return s-Math.floor(s)}}else r=Math.random;for(let i=e.length-1;i>0;i-=1){const s=Math.floor(r()*(i+1)),n=e[i];e[i]=e[s],e[s]=n}}function fh(e,t){return Array.isArray(e)?e.map(t):t(e)}function Ei(e){return Array.isArray(e)?e:[e]}var Zg;(function(e){function t(n){return n<0}e.isLessThan=t;function r(n){return n<=0}e.isLessThanOrEqual=r;function i(n){return n>0}e.isGreaterThan=i;function s(n){return n===0}e.isNeitherLessOrGreaterThan=s,e.greaterThan=1,e.lessThan=-1,e.neitherLessOrGreaterThan=0})(Zg||(Zg={}));function MC(e,t){return(r,i)=>t(e(r),e(i))}var jC=(e,t)=>e-t,yz=class $g{static{this.empty=new $g(t=>{})}constructor(t){this.iterate=t}forEach(t){this.iterate(r=>(t(r),!0))}toArray(){const t=[];return this.iterate(r=>(t.push(r),!0)),t}filter(t){return new $g(r=>this.iterate(i=>t(i)?r(i):!0))}map(t){return new $g(r=>this.iterate(i=>r(t(i))))}some(t){let r=!1;return this.iterate(i=>(r=t(i),!r)),r}findFirst(t){let r;return this.iterate(i=>t(i)?(r=i,!1):!0),r}findLast(t){let r;return this.iterate(i=>(t(i)&&(r=i),!0)),r}findLastMaxBy(t){let r,i=!0;return this.iterate(s=>((i||Zg.isGreaterThan(t(s,r)))&&(i=!1,r=s),!0)),r}},Ey,Sy,$y;function UC(e,t,r){let i=e.get(t);return i===void 0&&(i=r,e.set(t,i)),i}var HC=class{constructor(e,t){this.uri=e,this.value=t}};function BC(e){return Array.isArray(e)}var rr=class Zu{static{this.c=t=>t.toString()}constructor(t,r){if(this[Ey]="ResourceMap",t instanceof Zu)this.d=new Map(t.d),this.e=r??Zu.c;else if(BC(t)){this.d=new Map,this.e=r??Zu.c;for(const[i,s]of t)this.set(i,s)}else this.d=new Map,this.e=t??Zu.c}set(t,r){return this.d.set(this.e(t),new HC(t,r)),this}get(t){return this.d.get(this.e(t))?.value}has(t){return this.d.has(this.e(t))}get size(){return this.d.size}clear(){this.d.clear()}delete(t){return this.d.delete(this.e(t))}forEach(t,r){typeof r<"u"&&(t=t.bind(r));for(const[i,s]of this.d)t(s.value,s.uri,this)}*values(){for(const t of this.d.values())yield t.value}*keys(){for(const t of this.d.values())yield t.uri}*entries(){for(const t of this.d.values())yield[t.uri,t.value]}*[(Ey=Symbol.toStringTag,Symbol.iterator)](){for(const[,t]of this.d)yield[t.uri,t.value]}},Cy=class{constructor(e,t){this[Sy]="ResourceSet",!e||typeof e=="function"?this.c=new rr(e):(this.c=new rr(t),e.forEach(this.add,this))}get size(){return this.c.size}add(e){return this.c.set(e,e),this}clear(){this.c.clear()}delete(e){return this.c.delete(e)}forEach(e,t){this.c.forEach((r,i)=>e.call(t,i,i,this))}has(e){return this.c.has(e)}entries(){return this.c.entries()}keys(){return this.c.keys()}values(){return this.c.keys()}[(Sy=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}},Py;(function(e){e[e.None=0]="None",e[e.AsOld=1]="AsOld",e[e.AsNew=2]="AsNew"})(Py||(Py={}));var zC=class{constructor(){this[$y]="LinkedMap",this.c=new Map,this.d=void 0,this.e=void 0,this.f=0,this.g=0}clear(){this.c.clear(),this.d=void 0,this.e=void 0,this.f=0,this.g++}isEmpty(){return!this.d&&!this.e}get size(){return this.f}get first(){return this.d?.value}get last(){return this.e?.value}has(e){return this.c.has(e)}get(e,t=0){const r=this.c.get(e);if(r)return t!==0&&this.m(r,t),r.value}set(e,t,r=0){let i=this.c.get(e);if(i)i.value=t,r!==0&&this.m(i,r);else{switch(i={key:e,value:t,next:void 0,previous:void 0},r){case 0:this.k(i);break;case 1:this.j(i);break;case 2:this.k(i);break;default:this.k(i);break}this.c.set(e,i),this.f++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this.c.get(e);if(t)return this.c.delete(e),this.l(t),this.f--,t.value}shift(){if(!this.d&&!this.e)return;if(!this.d||!this.e)throw new Error("Invalid list");const e=this.d;return this.c.delete(e.key),this.l(e),this.f--,e.value}forEach(e,t){const r=this.g;let i=this.d;for(;i;){if(t?e.bind(t)(i.value,i.key,this):e(i.value,i.key,this),this.g!==r)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){const e=this,t=this.g;let r=this.d;const i={[Symbol.iterator](){return i},next(){if(e.g!==t)throw new Error("LinkedMap got modified during iteration.");if(r){const s={value:r.key,done:!1};return r=r.next,s}else return{value:void 0,done:!0}}};return i}values(){const e=this,t=this.g;let r=this.d;const i={[Symbol.iterator](){return i},next(){if(e.g!==t)throw new Error("LinkedMap got modified during iteration.");if(r){const s={value:r.value,done:!1};return r=r.next,s}else return{value:void 0,done:!0}}};return i}entries(){const e=this,t=this.g;let r=this.d;const i={[Symbol.iterator](){return i},next(){if(e.g!==t)throw new Error("LinkedMap got modified during iteration.");if(r){const s={value:[r.key,r.value],done:!1};return r=r.next,s}else return{value:void 0,done:!0}}};return i}[($y=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}h(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this.d,r=this.size;for(;t&&r>e;)this.c.delete(t.key),t=t.next,r--;this.d=t,this.f=r,t&&(t.previous=void 0),this.g++}i(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this.e,r=this.size;for(;t&&r>e;)this.c.delete(t.key),t=t.previous,r--;this.e=t,this.f=r,t&&(t.next=void 0),this.g++}j(e){if(!this.d&&!this.e)this.e=e;else if(this.d)e.next=this.d,this.d.previous=e;else throw new Error("Invalid list");this.d=e,this.g++}k(e){if(!this.d&&!this.e)this.d=e;else if(this.e)e.previous=this.e,this.e.next=e;else throw new Error("Invalid list");this.e=e,this.g++}l(e){if(e===this.d&&e===this.e)this.d=void 0,this.e=void 0;else if(e===this.d){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this.d=e.next}else if(e===this.e){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this.e=e.previous}else{const t=e.next,r=e.previous;if(!t||!r)throw new Error("Invalid list");t.previous=r,r.next=t}e.next=void 0,e.previous=void 0,this.g++}m(e,t){if(!this.d||!this.e)throw new Error("Invalid list");if(!(t!==1&&t!==2)){if(t===1){if(e===this.d)return;const r=e.next,i=e.previous;e===this.e?(i.next=void 0,this.e=i):(r.previous=i,i.next=r),e.previous=void 0,e.next=this.d,this.d.previous=e,this.d=e,this.g++}else if(t===2){if(e===this.e)return;const r=e.next,i=e.previous;e===this.d?(r.previous=void 0,this.d=r):(r.previous=i,i.next=r),e.next=void 0,e.previous=this.e,this.e.next=e,this.e=e,this.g++}}}toJSON(){const e=[];return this.forEach((t,r)=>{e.push([r,t])}),e}fromJSON(e){this.clear();for(const[t,r]of e)this.set(t,r)}},_C=class extends zC{constructor(e,t=1){super(),this.n=e,this.o=Math.min(Math.max(0,t),1)}get limit(){return this.n}set limit(e){this.n=e,this.p()}get ratio(){return this.o}set ratio(e){this.o=Math.min(Math.max(0,e),1),this.p()}get(e,t=2){return super.get(e,t)}peek(e){return super.get(e,0)}set(e,t){return super.set(e,t,2),this}p(){this.size>this.n&&this.q(Math.round(this.n*this.o))}},Rc=class extends _C{constructor(e,t=1){super(e,t)}q(e){this.h(e)}set(e,t){return super.set(e,t),this.p(),this}},Iy=class{constructor(){this.c=new Map}add(e,t){let r=this.c.get(e);r||(r=new Set,this.c.set(e,r)),r.add(t)}delete(e,t){const r=this.c.get(e);r&&(r.delete(t),r.size===0&&this.c.delete(e))}forEach(e,t){const r=this.c.get(e);r&&r.forEach(t)}get(e){const t=this.c.get(e);return t||new Set}},ci;(function(e){function t(F){return F&&typeof F=="object"&&typeof F[Symbol.iterator]=="function"}e.is=t;const r=Object.freeze([]);function i(){return r}e.empty=i;function*s(F){yield F}e.single=s;function n(F){return t(F)?F:s(F)}e.wrap=n;function o(F){return F||r}e.from=o;function*a(F){for(let z=F.length-1;z>=0;z--)yield F[z]}e.reverse=a;function c(F){return!F||F[Symbol.iterator]().next().done===!0}e.isEmpty=c;function l(F){return F[Symbol.iterator]().next().value}e.first=l;function u(F,z){let Y=0;for(const oe of F)if(z(oe,Y++))return!0;return!1}e.some=u;function h(F,z){for(const Y of F)if(z(Y))return Y}e.find=h;function*d(F,z){for(const Y of F)z(Y)&&(yield Y)}e.filter=d;function*f(F,z){let Y=0;for(const oe of F)yield z(oe,Y++)}e.map=f;function*g(F,z){let Y=0;for(const oe of F)yield*z(oe,Y++)}e.flatMap=g;function*v(...F){for(const z of F)yield*z}e.concat=v;function x(F,z,Y){let oe=Y;for(const Z of F)oe=z(oe,Z);return oe}e.reduce=x;function*$(F,z,Y=F.length){for(z<0&&(z+=F.length),Y<0?Y+=F.length:Y>F.length&&(Y=F.length);z<Y;z++)yield F[z]}e.slice=$;function C(F,z=Number.POSITIVE_INFINITY){const Y=[];if(z===0)return[Y,F];const oe=F[Symbol.iterator]();for(let Z=0;Z<z;Z++){const se=oe.next();if(se.done)return[Y,e.empty()];Y.push(se.value)}return[Y,{[Symbol.iterator](){return oe}}]}e.consume=C;async function L(F){const z=[];for await(const Y of F)z.push(Y);return Promise.resolve(z)}e.asyncToArray=L})(ci||(ci={}));var WC=!1,Yo=null,kz=class t3{constructor(){this.b=new Map}static{this.a=0}c(t){let r=this.b.get(t);return r||(r={parent:null,source:null,isSingleton:!1,value:t,idx:t3.a++},this.b.set(t,r)),r}trackDisposable(t){const r=this.c(t);r.source||(r.source=new Error().stack)}setParent(t,r){const i=this.c(t);i.parent=r}markAsDisposed(t){this.b.delete(t)}markAsSingleton(t){this.c(t).isSingleton=!0}f(t,r){const i=r.get(t);if(i)return i;const s=t.parent?this.f(this.c(t.parent),r):t;return r.set(t,s),s}getTrackedDisposables(){const t=new Map;return[...this.b.entries()].filter(([,i])=>i.source!==null&&!this.f(i,t).isSingleton).flatMap(([i])=>i)}computeLeakingDisposables(t=10,r){let i;if(r)i=r;else{const c=new Map,l=[...this.b.values()].filter(h=>h.source!==null&&!this.f(h,c).isSingleton);if(l.length===0)return;const u=new Set(l.map(h=>h.value));if(i=l.filter(h=>!(h.parent&&u.has(h.parent))),i.length===0)throw new Error("There are cyclic diposable chains!")}if(!i)return;function s(c){function l(h,d){for(;h.length>0&&d.some(f=>typeof f=="string"?f===h[0]:h[0].match(f));)h.shift()}const u=c.source.split(`
`).map(h=>h.trim().replace("at ","")).filter(h=>h!=="");return l(u,["Error",/^trackDisposable \(.*\)$/,/^DisposableTracker.trackDisposable \(.*\)$/]),u.reverse()}const n=new Iy;for(const c of i){const l=s(c);for(let u=0;u<=l.length;u++)n.add(l.slice(0,u).join(`
`),c)}i.sort(MC(c=>c.idx,jC));let o="",a=0;for(const c of i.slice(0,t)){a++;const l=s(c),u=[];for(let h=0;h<l.length;h++){let d=l[h];d=`(shared with ${n.get(l.slice(0,h+1).join(`
`)).size}/${i.length} leaks) at ${d}`;const g=n.get(l.slice(0,h).join(`
`)),v=Vg([...g].map(x=>s(x)[h]),x=>x);delete v[l[h]];for(const[x,$]of Object.entries(v))u.unshift(`    - stacktraces of ${$.length} other leaks continue with ${x}`);u.unshift(d)}o+=`


==================== Leaking disposable ${a}/${i.length}: ${c.value.constructor.name} ====================
${u.join(`
`)}
============================================================

`}return i.length>t&&(o+=`


... and ${i.length-t} more leaking disposables

`),{leaks:i,details:o}}};function VC(e){Yo=e}if(WC){const e="__is_disposable_tracked__";VC(new class{trackDisposable(t){const r=new Error("Potentially leaked disposable").stack;setTimeout(()=>{t[e]||console.log(r)},3e3)}setParent(t,r){if(t&&t!==ae.None)try{t[e]=!0}catch{}}markAsDisposed(t){if(t&&t!==ae.None)try{t[e]=!0}catch{}}markAsSingleton(t){}})}function Xo(e){return Yo?.trackDisposable(e),e}function Zo(e){Yo?.markAsDisposed(e)}function Lc(e,t){Yo?.setParent(e,t)}function qC(e,t){if(Yo)for(const r of e)Yo.setParent(r,t)}function GC(e){return typeof e=="object"&&e!==null&&typeof e.dispose=="function"&&e.dispose.length===0}function Si(e){if(ci.is(e)){const t=[];for(const r of e)if(r)try{r.dispose()}catch(i){t.push(i)}if(t.length===1)throw t[0];if(t.length>1)throw new AggregateError(t,"Encountered errors while disposing of store");return Array.isArray(e)?[]:e}else if(e)return e.dispose(),e}function Kg(...e){const t=me(()=>Si(e));return qC(e,t),t}function me(e){const t=Xo({dispose:Yg(()=>{Zo(t),e()})});return t}var be=class r3{static{this.DISABLE_DISPOSED_WARNING=!1}constructor(){this.f=new Set,this.g=!1,Xo(this)}dispose(){this.g||(Zo(this),this.g=!0,this.clear())}get isDisposed(){return this.g}clear(){if(this.f.size!==0)try{Si(this.f)}finally{this.f.clear()}}add(t){if(!t)return t;if(t===this)throw new Error("Cannot register a disposable on itself!");return Lc(t,this),this.g?r3.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this.f.add(t),t}delete(t){if(t){if(t===this)throw new Error("Cannot dispose a disposable on itself!");this.f.delete(t),t.dispose()}}deleteAndLeak(t){t&&this.f.has(t)&&(this.f.delete(t),Lc(t,null))}},ae=class{static{this.None=Object.freeze({dispose(){}})}constructor(){this.q=new be,Xo(this),Lc(this.q,this)}dispose(){Zo(this),this.q.dispose()}B(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this.q.add(e)}},ks=class{constructor(){this.b=!1,Xo(this)}get value(){return this.b?void 0:this.a}set value(e){this.b||e===this.a||(this.a?.dispose(),e&&Lc(e,this),this.a=e)}clear(){this.value=void 0}dispose(){this.b=!0,Zo(this),this.a?.dispose(),this.a=void 0}clearAndLeak(){const e=this.a;return this.a=void 0,e&&Lc(e,null),e}},ph=class{constructor(){this.a=new Map,this.b=!1,Xo(this)}dispose(){Zo(this),this.b=!0,this.clearAndDisposeAll()}clearAndDisposeAll(){if(this.a.size)try{Si(this.a.values())}finally{this.a.clear()}}has(e){return this.a.has(e)}get size(){return this.a.size}get(e){return this.a.get(e)}set(e,t,r=!1){this.b&&console.warn(new Error("Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!").stack),r||this.a.get(e)?.dispose(),this.a.set(e,t)}deleteAndDispose(e){this.a.get(e)?.dispose(),this.a.delete(e)}deleteAndLeak(e){const t=this.a.get(e);return this.a.delete(e),t}keys(){return this.a.keys()}values(){return this.a.values()}[Symbol.iterator](){return this.a[Symbol.iterator]()}},Ft=class Cg{static{this.Undefined=new Cg(void 0)}constructor(t){this.element=t,this.next=Cg.Undefined,this.prev=Cg.Undefined}},Nc=class{constructor(){this.a=Ft.Undefined,this.b=Ft.Undefined,this.c=0}get size(){return this.c}isEmpty(){return this.a===Ft.Undefined}clear(){let e=this.a;for(;e!==Ft.Undefined;){const t=e.next;e.prev=Ft.Undefined,e.next=Ft.Undefined,e=t}this.a=Ft.Undefined,this.b=Ft.Undefined,this.c=0}unshift(e){return this.d(e,!1)}push(e){return this.d(e,!0)}d(e,t){const r=new Ft(e);if(this.a===Ft.Undefined)this.a=r,this.b=r;else if(t){const s=this.b;this.b=r,r.prev=s,s.next=r}else{const s=this.a;this.a=r,r.next=s,s.prev=r}this.c+=1;let i=!1;return()=>{i||(i=!0,this.e(r))}}shift(){if(this.a!==Ft.Undefined){const e=this.a.element;return this.e(this.a),e}}pop(){if(this.b!==Ft.Undefined){const e=this.b.element;return this.e(this.b),e}}e(e){if(e.prev!==Ft.Undefined&&e.next!==Ft.Undefined){const t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===Ft.Undefined&&e.next===Ft.Undefined?(this.a=Ft.Undefined,this.b=Ft.Undefined):e.next===Ft.Undefined?(this.b=this.b.prev,this.b.next=Ft.Undefined):e.prev===Ft.Undefined&&(this.a=this.a.next,this.a.prev=Ft.Undefined);this.c-=1}*[Symbol.iterator](){let e=this.a;for(;e!==Ft.Undefined;)yield e.element,e=e.next}},JC=globalThis.performance&&typeof globalThis.performance.now=="function",Hr=class i3{static create(t){return new i3(t)}constructor(t){this.c=JC&&t===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this.a=this.c(),this.b=-1}stop(){this.b=this.c()}reset(){this.a=this.c(),this.b=-1}elapsed(){return this.b!==-1?this.b-this.a:this.c()-this.a}},QC=!1,Dy=!1,YC=!1,Qe;(function(e){e.None=()=>ae.None;function t(ee){if(YC){const{onDidAddListener:q}=ee,ne=em.create();let G=0;ee.onDidAddListener=()=>{++G===2&&(console.warn("snapshotted emitter LIKELY used public and SHOULD HAVE BEEN created with DisposableStore. snapshotted here"),ne.print()),q?.()}}}function r(ee,q){return f(ee,()=>{},0,void 0,!0,void 0,q)}e.defer=r;function i(ee){return(q,ne=null,G)=>{let le=!1,Pe;return Pe=ee(we=>{if(!le)return Pe?Pe.dispose():le=!0,q.call(ne,we)},null,G),le&&Pe.dispose(),Pe}}e.once=i;function s(ee,q){return e.once(e.filter(ee,q))}e.onceIf=s;function n(ee,q,ne){return h((G,le=null,Pe)=>ee(we=>G.call(le,q(we)),null,Pe),ne)}e.map=n;function o(ee,q,ne){return h((G,le=null,Pe)=>ee(we=>{q(we),G.call(le,we)},null,Pe),ne)}e.forEach=o;function a(ee,q,ne){return h((G,le=null,Pe)=>ee(we=>q(we)&&G.call(le,we),null,Pe),ne)}e.filter=a;function c(ee){return ee}e.signal=c;function l(...ee){return(q,ne=null,G)=>{const le=Kg(...ee.map(Pe=>Pe(we=>q.call(ne,we))));return d(le,G)}}e.any=l;function u(ee,q,ne,G){let le=ne;return n(ee,Pe=>(le=q(le,Pe),le),G)}e.reduce=u;function h(ee,q){let ne;const G={onWillAddFirstListener(){ne=ee(le.fire,le)},onDidRemoveLastListener(){ne?.dispose()}};q||t(G);const le=new T(G);return q?.add(le),le.event}function d(ee,q){return q instanceof Array?q.push(ee):q&&q.add(ee),ee}function f(ee,q,ne=100,G=!1,le=!1,Pe,we){let it,Ge,At,Tt=0,Yt;const ot={leakWarningThreshold:Pe,onWillAddFirstListener(){it=ee(bi=>{Tt++,Ge=q(Ge,bi),G&&!At&&(cr.fire(Ge),Ge=void 0),Yt=()=>{const yi=Ge;Ge=void 0,At=void 0,(!G||Tt>1)&&cr.fire(yi),Tt=0},typeof ne=="number"?(clearTimeout(At),At=setTimeout(Yt,ne)):At===void 0&&(At=0,queueMicrotask(Yt))})},onWillRemoveListener(){le&&Tt>0&&Yt?.()},onDidRemoveLastListener(){Yt=void 0,it.dispose()}};we||t(ot);const cr=new T(ot);return we?.add(cr),cr.event}e.debounce=f;function g(ee,q=0,ne){return e.debounce(ee,(G,le)=>G?(G.push(le),G):[le],q,void 0,!0,void 0,ne)}e.accumulate=g;function v(ee,q=(G,le)=>G===le,ne){let G=!0,le;return a(ee,Pe=>{const we=G||!q(Pe,le);return G=!1,le=Pe,we},ne)}e.latch=v;function x(ee,q,ne){return[e.filter(ee,q,ne),e.filter(ee,G=>!q(G),ne)]}e.split=x;function $(ee,q=!1,ne=[],G){let le=ne.slice(),Pe=ee(Ge=>{le?le.push(Ge):it.fire(Ge)});G&&G.add(Pe);const we=()=>{le?.forEach(Ge=>it.fire(Ge)),le=null},it=new T({onWillAddFirstListener(){Pe||(Pe=ee(Ge=>it.fire(Ge)),G&&G.add(Pe))},onDidAddFirstListener(){le&&(q?setTimeout(we):we())},onDidRemoveLastListener(){Pe&&Pe.dispose(),Pe=null}});return G&&G.add(it),it.event}e.buffer=$;function C(ee,q){return(G,le,Pe)=>{const we=q(new F);return ee(function(it){const Ge=we.evaluate(it);Ge!==L&&G.call(le,Ge)},void 0,Pe)}}e.chain=C;const L=Symbol("HaltChainable");class F{constructor(){this.f=[]}map(q){return this.f.push(q),this}forEach(q){return this.f.push(ne=>(q(ne),ne)),this}filter(q){return this.f.push(ne=>q(ne)?ne:L),this}reduce(q,ne){let G=ne;return this.f.push(le=>(G=q(G,le),G)),this}latch(q=(ne,G)=>ne===G){let ne=!0,G;return this.f.push(le=>{const Pe=ne||!q(le,G);return ne=!1,G=le,Pe?le:L}),this}evaluate(q){for(const ne of this.f)if(q=ne(q),q===L)break;return q}}function z(ee,q,ne=G=>G){const G=(...it)=>we.fire(ne(...it)),le=()=>ee.on(q,G),Pe=()=>ee.removeListener(q,G),we=new T({onWillAddFirstListener:le,onDidRemoveLastListener:Pe});return we.event}e.fromNodeEventEmitter=z;function Y(ee,q,ne=G=>G){const G=(...it)=>we.fire(ne(...it)),le=()=>ee.addEventListener(q,G),Pe=()=>ee.removeEventListener(q,G),we=new T({onWillAddFirstListener:le,onDidRemoveLastListener:Pe});return we.event}e.fromDOMEventEmitter=Y;function oe(ee){return new Promise(q=>i(ee)(q))}e.toPromise=oe;function Z(ee){const q=new T;return ee.then(ne=>{q.fire(ne)},()=>{q.fire(void 0)}).finally(()=>{q.dispose()}),q.event}e.fromPromise=Z;function se(ee,q){return ee(ne=>q.fire(ne))}e.forward=se;function Ae(ee,q,ne){return q(ne),ee(G=>q(G))}e.runAndSubscribe=Ae;class xe{constructor(q,ne){this._observable=q,this.f=0,this.g=!1;const G={onWillAddFirstListener:()=>{q.addObserver(this),this._observable.reportChanges()},onDidRemoveLastListener:()=>{q.removeObserver(this)}};ne||t(G),this.emitter=new T(G),ne&&ne.add(this.emitter)}beginUpdate(q){this.f++}handlePossibleChange(q){}handleChange(q,ne){this.g=!0}endUpdate(q){this.f--,this.f===0&&(this._observable.reportChanges(),this.g&&(this.g=!1,this.emitter.fire(this._observable.get())))}}function tt(ee,q){return new xe(ee,q).emitter.event}e.fromObservable=tt;function dt(ee){return(q,ne,G)=>{let le=0,Pe=!1;const we={beginUpdate(){le++},endUpdate(){le--,le===0&&(ee.reportChanges(),Pe&&(Pe=!1,q.call(ne)))},handlePossibleChange(){},handleChange(){Pe=!0}};ee.addObserver(we),ee.reportChanges();const it={dispose(){ee.removeObserver(we)}};return G instanceof be?G.add(it):Array.isArray(G)&&G.push(it),it}}e.fromObservableLight=dt})(Qe||(Qe={}));var XC=class Xb{static{this.all=new Set}static{this.f=0}constructor(t){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${t}_${Xb.f++}`,Xb.all.add(this)}start(t){this.g=new Hr,this.listenerCount=t}stop(){if(this.g){const t=this.g.elapsed();this.durations.push(t),this.elapsedOverall+=t,this.invocationCount+=1,this.g=void 0}}},Ay=-1,ZC=class s3{static{this.f=1}constructor(t,r,i=(s3.f++).toString(16).padStart(3,"0")){this.j=t,this.threshold=r,this.name=i,this.h=0}dispose(){this.g?.clear()}check(t,r){const i=this.threshold;if(i<=0||r<i)return;this.g||(this.g=new Map);const s=this.g.get(t.value)||0;if(this.g.set(t.value,s+1),this.h-=1,this.h<=0){this.h=i*.5;const[n,o]=this.getMostFrequentStack(),a=`[${this.name}] potential listener LEAK detected, having ${r} listeners already. MOST frequent listener (${o}):`;console.warn(a),console.warn(n);const c=new KC(a,n);this.j(c)}return()=>{const n=this.g.get(t.value)||0;this.g.set(t.value,n-1)}}getMostFrequentStack(){if(!this.g)return;let t,r=0;for(const[i,s]of this.g)(!t||r<s)&&(t=[i,s],r=s);return t}},em=class n3{static create(){const t=new Error;return new n3(t.stack??"")}constructor(t){this.value=t}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},KC=class extends Error{constructor(e,t){super(e),this.name="ListenerLeakError",this.stack=t}},eP=class extends Error{constructor(e,t){super(e),this.name="ListenerRefusalError",this.stack=t}},tP=0,gh=class{constructor(e){this.value=e,this.id=tP++}},rP=2,Ty=(e,t)=>{if(e instanceof gh)t(e);else for(let r=0;r<e.length;r++){const i=e[r];i&&t(i)}},mh;if(QC){const e=[];setInterval(()=>{e.length!==0&&(console.warn("[LEAKING LISTENERS] GC'ed these listeners that were NOT yet disposed:"),console.warn(e.join(`
`)),e.length=0)},3e3),mh=new FinalizationRegistry(t=>{typeof t=="string"&&e.push(t)})}var T=class{constructor(e){this.z=0,this.f=e,this.g=Ay>0||this.f?.leakWarningThreshold?new ZC(e?.onListenerError??It,this.f?.leakWarningThreshold??Ay):void 0,this.j=this.f?._profName?new XC(this.f._profName):void 0,this.w=this.f?.deliveryQueue}dispose(){if(!this.m){if(this.m=!0,this.w?.current===this&&this.w.reset(),this.u){if(Dy){const e=this.u;queueMicrotask(()=>{Ty(e,t=>t.stack?.print())})}this.u=void 0,this.z=0}this.f?.onDidRemoveLastListener?.(),this.g?.dispose()}}get event(){return this.q??=(e,t,r)=>{if(this.g&&this.z>this.g.threshold**2){const a=`[${this.g.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this.z} vs ${this.g.threshold})`;console.warn(a);const c=this.g.getMostFrequentStack()??["UNKNOWN stack",-1],l=new eP(`${a}. HINT: Stack shows most frequent listener (${c[1]}-times)`,c[0]);return(this.f?.onListenerError||It)(l),ae.None}if(this.m)return ae.None;t&&(e=e.bind(t));const i=new gh(e);let s,n;this.g&&this.z>=Math.ceil(this.g.threshold*.2)&&(i.stack=em.create(),s=this.g.check(i.stack,this.z+1)),Dy&&(i.stack=n??em.create()),this.u?this.u instanceof gh?(this.w??=new iP,this.u=[this.u,i]):this.u.push(i):(this.f?.onWillAddFirstListener?.(this),this.u=i,this.f?.onDidAddFirstListener?.(this)),this.z++;const o=me(()=>{mh?.unregister(o),s?.(),this.A(i)});if(r instanceof be?r.add(o):Array.isArray(r)&&r.push(o),mh){const a=new Error().stack.split(`
`).slice(2,3).join(`
`).trim(),c=/(file:|vscode-file:\/\/vscode-app)?(\/[^:]*:\d+:\d+)/.exec(a);mh.register(o,c?.[2]??a,o)}return o},this.q}A(e){if(this.f?.onWillRemoveListener?.(this),!this.u)return;if(this.z===1){this.u=void 0,this.f?.onDidRemoveLastListener?.(this),this.z=0;return}const t=this.u,r=t.indexOf(e);if(r===-1)throw console.log("disposed?",this.m),console.log("size?",this.z),console.log("arr?",JSON.stringify(this.u)),new Error("Attempted to dispose unknown listener");this.z--,t[r]=void 0;const i=this.w.current===this;if(this.z*rP<=t.length){let s=0;for(let n=0;n<t.length;n++)t[n]?t[s++]=t[n]:i&&(this.w.end--,s<this.w.i&&this.w.i--);t.length=s}}B(e,t){if(!e)return;const r=this.f?.onListenerError||It;if(!r){e.value(t);return}try{e.value(t)}catch(i){r(i)}}C(e){const t=e.current.u;for(;e.i<e.end;)this.B(t[e.i++],e.value);e.reset()}fire(e){if(this.w?.current&&(this.C(this.w),this.j?.stop()),this.j?.start(this.z),this.u)if(this.u instanceof gh)this.B(this.u,e);else{const t=this.w;t.enqueue(this,e,this.u.length),this.C(t)}this.j?.stop()}hasListeners(){return this.z>0}},iP=class{constructor(){this.i=-1,this.end=0}enqueue(e,t,r){this.i=0,this.end=r,this.current=e,this.value=t}reset(){this.i=this.end,this.current=void 0,this.value=void 0}},Fc=class extends T{async fireAsync(e,t,r){if(this.u)for(this.h||(this.h=new Nc),Ty(this.u,i=>this.h.push([i.value,e]));this.h.size>0&&!t.isCancellationRequested;){const[i,s]=this.h.shift(),n=[],o={...s,token:t,waitUntil:a=>{if(Object.isFrozen(n))throw new Error("waitUntil can NOT be called asynchronous");r&&(a=r(a,i)),n.push(a)}};try{i(o)}catch(a){It(a);continue}Object.freeze(n),await Promise.allSettled(n).then(a=>{for(const c of a)c.status==="rejected"&&It(c.reason)})}}},Oc=class extends T{get isPaused(){return this.h!==0}constructor(e){super(e),this.h=0,this.s=new Nc,this.t=e?.merge}pause(){this.h++}resume(){if(this.h!==0&&--this.h===0)if(this.t){if(this.s.size>0){const e=Array.from(this.s);this.s.clear(),super.fire(this.t(e))}}else for(;!this.h&&this.s.size!==0;)super.fire(this.s.shift())}fire(e){this.z&&(this.h!==0?this.s.push(e):super.fire(e))}},sP=class extends Oc{constructor(e){super(e),this.k=e.delay??100}fire(e){this.o||(this.pause(),this.o=setTimeout(()=>{this.o=void 0,this.resume()},this.k)),super.fire(e)}},nP=class{constructor(){this.f=!1,this.g=Qe.None,this.h=ae.None,this.j=new T({onDidAddFirstListener:()=>{this.f=!0,this.h=this.g(this.j.fire,this.j)},onDidRemoveLastListener:()=>{this.f=!1,this.h.dispose()}}),this.event=this.j.event}set input(e){this.g=e,this.f&&(this.h.dispose(),this.h=e(this.j.fire,this.j))}dispose(){this.h.dispose(),this.j.dispose()}},Ry=Object.freeze(function(e,t){const r=setTimeout(e.bind(t),0);return{dispose(){clearTimeout(r)}}}),Ke;(function(e){function t(r){return r===e.None||r===e.Cancelled||r instanceof vh?!0:!r||typeof r!="object"?!1:typeof r.isCancellationRequested=="boolean"&&typeof r.onCancellationRequested=="function"}e.isCancellationToken=t,e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Qe.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Ry})})(Ke||(Ke={}));var vh=class{constructor(){this.a=!1,this.b=null}cancel(){this.a||(this.a=!0,this.b&&(this.b.fire(void 0),this.dispose()))}get isCancellationRequested(){return this.a}get onCancellationRequested(){return this.a?Ry:(this.b||(this.b=new T),this.b.event)}dispose(){this.b&&(this.b.dispose(),this.b=null)}},wt=class{constructor(e){this.f=void 0,this.g=void 0,this.g=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this.f||(this.f=new vh),this.f}cancel(){this.f?this.f instanceof vh&&this.f.cancel():this.f=Ke.Cancelled}dispose(e=!1){e&&this.cancel(),this.g?.dispose(),this.f?this.f instanceof vh&&this.f.dispose():this.f=Ke.None}};function oP(){return globalThis._VSCODE_NLS_MESSAGES}function Ly(){return globalThis._VSCODE_NLS_LANGUAGE}var aP=Ly()==="pseudo"||typeof document<"u"&&document.location&&typeof document.location.hash=="string"&&document.location.hash.indexOf("pseudo=true")>=0;function wh(e,t){let r;return t.length===0?r=e:r=e.replace(/\{(\d+)\}/g,(i,s)=>{const n=s[0],o=t[n];let a=i;return typeof o=="string"?a=o:(typeof o=="number"||typeof o=="boolean"||o===void 0||o===null)&&(a=String(o)),a}),aP&&(r="\uFF3B"+r.replace(/[aouei]/g,"$&$&")+"\uFF3D"),r}function p(e,t,...r){return wh(typeof e=="number"?Ny(e,t):t,r)}function Ny(e,t){const r=oP()?.[e];if(typeof r!="string"){if(typeof t=="string")return t;throw new Error(`!!! NLS MISSING: ${e} !!!`)}return r}function tm(e,t,...r){let i;typeof e=="number"?i=Ny(e,t):i=t;const s=wh(i,r);return{value:s,original:t===i?s:wh(t,r)}}var Qn="en",Mc=!1,jc=!1,Uc=!1,cP=!1,Fy=!1,rm=!1,lP=!1,Oy=!1,My=!1,uP=!1,bh=void 0,yh=Qn,jy=Qn,hP=void 0,xs=void 0,Es=globalThis,Kr=void 0;typeof Es.vscode<"u"&&typeof Es.vscode.process<"u"?Kr=Es.vscode.process:typeof process<"u"&&typeof process?.versions?.node=="string"&&(Kr=process);var Uy=typeof Kr?.versions?.electron=="string",dP=Uy&&Kr?.type==="renderer";if(typeof Kr=="object"){Mc=Kr.platform==="win32",jc=Kr.platform==="darwin",Uc=Kr.platform==="linux",cP=Uc&&!!Kr.env.SNAP&&!!Kr.env.SNAP_REVISION,lP=Uy,My=!!Kr.env.CI||!!Kr.env.BUILD_ARTIFACTSTAGINGDIRECTORY,bh=Qn,yh=Qn;const e=Kr.env.VSCODE_NLS_CONFIG;if(e)try{const t=JSON.parse(e);bh=t.userLocale,jy=t.osLocale,yh=t.resolvedLanguage||Qn,hP=t.languagePack?.translationsConfigFile}catch{}Fy=!0}else typeof navigator=="object"&&!dP?(xs=navigator.userAgent,Mc=xs.indexOf("Windows")>=0,jc=xs.indexOf("Macintosh")>=0,Oy=(xs.indexOf("Macintosh")>=0||xs.indexOf("iPad")>=0||xs.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,Uc=xs.indexOf("Linux")>=0,uP=xs?.indexOf("Mobi")>=0,rm=!0,yh=Ly()||Qn,bh=navigator.language.toLowerCase(),jy=bh):console.error("Unable to resolve platform.");var Hy;(function(e){e[e.Web=0]="Web",e[e.Mac=1]="Mac",e[e.Linux=2]="Linux",e[e.Windows=3]="Windows"})(Hy||(Hy={}));function fP(e){switch(e){case 0:return"Web";case 1:return"Mac";case 2:return"Linux";case 3:return"Windows"}}var kh=0;jc?kh=1:Mc?kh=3:Uc&&(kh=2);var at=Mc,Kt=jc,Ot=Uc,pP=Fy,xh=rm,gP=rm&&typeof Es.importScripts=="function",mP=gP?Es.origin:void 0,Yn=My,vP=kh,Zi=xs,ln=yh,By;(function(e){function t(){return ln}e.value=t;function r(){return ln.length===2?ln==="en":ln.length>=3?ln[0]==="e"&&ln[1]==="n"&&ln[2]==="-":!1}e.isDefaultVariant=r;function i(){return ln==="en"}e.isDefault=i})(By||(By={}));var wP=typeof Es.postMessage=="function"&&!Es.importScripts,zy=(()=>{if(wP){const e=[];Es.addEventListener("message",r=>{if(r.data&&r.data.vscodeScheduleAsyncWork)for(let i=0,s=e.length;i<s;i++){const n=e[i];if(n.id===r.data.vscodeScheduleAsyncWork){e.splice(i,1),n.callback();return}}});let t=0;return r=>{const i=++t;e.push({id:i,callback:r}),Es.postMessage({vscodeScheduleAsyncWork:i},"*")}}return e=>setTimeout(e)})(),_y;(function(e){e[e.Windows=1]="Windows",e[e.Macintosh=2]="Macintosh",e[e.Linux=3]="Linux"})(_y||(_y={}));var Wy=jc||Oy?2:Mc?1:3,Vy=!0,qy=!1;function Gy(){if(!qy){qy=!0;const e=new Uint8Array(2);e[0]=1,e[1]=2,Vy=new Uint16Array(e.buffer)[0]===513}return Vy}var Jy=!!(Zi&&Zi.indexOf("Chrome")>=0),bP=!!(Zi&&Zi.indexOf("Firefox")>=0),yP=!!(!Jy&&Zi&&Zi.indexOf("Safari")>=0),kP=!!(Zi&&Zi.indexOf("Edg/")>=0),xz=!!(Zi&&Zi.indexOf("Android")>=0),Xn,im=globalThis.vscode;if(typeof im<"u"&&typeof im.process<"u"){const e=im.process;Xn={get platform(){return e.platform},get arch(){return e.arch},get env(){return e.env},cwd(){return e.cwd()}}}else typeof process<"u"&&typeof process?.versions?.node=="string"?Xn={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:Xn={get platform(){return at?"win32":Kt?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};var Zn=Xn.cwd,Kn=Xn.env,xP=Xn.platform,Ez=Xn.arch,EP=65,SP=97,$P=90,CP=122,un=46,hr=47,Br=92,hn=58,PP=63,Qy=class extends Error{constructor(e,t,r){let i;typeof t=="string"&&t.indexOf("not ")===0?(i="must not be",t=t.replace(/^not /,"")):i="must be";const s=e.indexOf(".")!==-1?"property":"argument";let n=`The "${e}" ${s} ${i} of type ${t}`;n+=`. Received type ${typeof r}`,super(n),this.code="ERR_INVALID_ARG_TYPE"}};function IP(e,t){if(e===null||typeof e!="object")throw new Qy(t,"Object",e)}function Ht(e,t){if(typeof e!="string")throw new Qy(t,"string",e)}var zr=xP==="win32";function je(e){return e===hr||e===Br}function sm(e){return e===hr}function dn(e){return e>=EP&&e<=$P||e>=SP&&e<=CP}function Eh(e,t,r,i){let s="",n=0,o=-1,a=0,c=0;for(let l=0;l<=e.length;++l){if(l<e.length)c=e.charCodeAt(l);else{if(i(c))break;c=hr}if(i(c)){if(!(o===l-1||a===1))if(a===2){if(s.length<2||n!==2||s.charCodeAt(s.length-1)!==un||s.charCodeAt(s.length-2)!==un){if(s.length>2){const u=s.lastIndexOf(r);u===-1?(s="",n=0):(s=s.slice(0,u),n=s.length-1-s.lastIndexOf(r)),o=l,a=0;continue}else if(s.length!==0){s="",n=0,o=l,a=0;continue}}t&&(s+=s.length>0?`${r}..`:"..",n=2)}else s.length>0?s+=`${r}${e.slice(o+1,l)}`:s=e.slice(o+1,l),n=l-o-1;o=l,a=0}else c===un&&a!==-1?++a:a=-1}return s}function DP(e){return e?`${e[0]==="."?"":"."}${e}`:""}function Yy(e,t){IP(t,"pathObject");const r=t.dir||t.root,i=t.base||`${t.name||""}${DP(t.ext)}`;return r?r===t.root?`${r}${i}`:`${r}${e}${i}`:i}var Bt={resolve(...e){let t="",r="",i=!1;for(let s=e.length-1;s>=-1;s--){let n;if(s>=0){if(n=e[s],Ht(n,`paths[${s}]`),n.length===0)continue}else t.length===0?n=Zn():(n=Kn[`=${t}`]||Zn(),(n===void 0||n.slice(0,2).toLowerCase()!==t.toLowerCase()&&n.charCodeAt(2)===Br)&&(n=`${t}\\`));const o=n.length;let a=0,c="",l=!1;const u=n.charCodeAt(0);if(o===1)je(u)&&(a=1,l=!0);else if(je(u))if(l=!0,je(n.charCodeAt(1))){let h=2,d=h;for(;h<o&&!je(n.charCodeAt(h));)h++;if(h<o&&h!==d){const f=n.slice(d,h);for(d=h;h<o&&je(n.charCodeAt(h));)h++;if(h<o&&h!==d){for(d=h;h<o&&!je(n.charCodeAt(h));)h++;(h===o||h!==d)&&(c=`\\\\${f}\\${n.slice(d,h)}`,a=h)}}}else a=1;else dn(u)&&n.charCodeAt(1)===hn&&(c=n.slice(0,2),a=2,o>2&&je(n.charCodeAt(2))&&(l=!0,a=3));if(c.length>0)if(t.length>0){if(c.toLowerCase()!==t.toLowerCase())continue}else t=c;if(i){if(t.length>0)break}else if(r=`${n.slice(a)}\\${r}`,i=l,l&&t.length>0)break}return r=Eh(r,!i,"\\",je),i?`${t}\\${r}`:`${t}${r}`||"."},normalize(e){Ht(e,"path");const t=e.length;if(t===0)return".";let r=0,i,s=!1;const n=e.charCodeAt(0);if(t===1)return sm(n)?"\\":e;if(je(n))if(s=!0,je(e.charCodeAt(1))){let a=2,c=a;for(;a<t&&!je(e.charCodeAt(a));)a++;if(a<t&&a!==c){const l=e.slice(c,a);for(c=a;a<t&&je(e.charCodeAt(a));)a++;if(a<t&&a!==c){for(c=a;a<t&&!je(e.charCodeAt(a));)a++;if(a===t)return`\\\\${l}\\${e.slice(c)}\\`;a!==c&&(i=`\\\\${l}\\${e.slice(c,a)}`,r=a)}}}else r=1;else dn(n)&&e.charCodeAt(1)===hn&&(i=e.slice(0,2),r=2,t>2&&je(e.charCodeAt(2))&&(s=!0,r=3));let o=r<t?Eh(e.slice(r),!s,"\\",je):"";return o.length===0&&!s&&(o="."),o.length>0&&je(e.charCodeAt(t-1))&&(o+="\\"),i===void 0?s?`\\${o}`:o:s?`${i}\\${o}`:`${i}${o}`},isAbsolute(e){Ht(e,"path");const t=e.length;if(t===0)return!1;const r=e.charCodeAt(0);return je(r)||t>2&&dn(r)&&e.charCodeAt(1)===hn&&je(e.charCodeAt(2))},join(...e){if(e.length===0)return".";let t,r;for(let n=0;n<e.length;++n){const o=e[n];Ht(o,"path"),o.length>0&&(t===void 0?t=r=o:t+=`\\${o}`)}if(t===void 0)return".";let i=!0,s=0;if(typeof r=="string"&&je(r.charCodeAt(0))){++s;const n=r.length;n>1&&je(r.charCodeAt(1))&&(++s,n>2&&(je(r.charCodeAt(2))?++s:i=!1))}if(i){for(;s<t.length&&je(t.charCodeAt(s));)s++;s>=2&&(t=`\\${t.slice(s)}`)}return Bt.normalize(t)},relative(e,t){if(Ht(e,"from"),Ht(t,"to"),e===t)return"";const r=Bt.resolve(e),i=Bt.resolve(t);if(r===i||(e=r.toLowerCase(),t=i.toLowerCase(),e===t))return"";let s=0;for(;s<e.length&&e.charCodeAt(s)===Br;)s++;let n=e.length;for(;n-1>s&&e.charCodeAt(n-1)===Br;)n--;const o=n-s;let a=0;for(;a<t.length&&t.charCodeAt(a)===Br;)a++;let c=t.length;for(;c-1>a&&t.charCodeAt(c-1)===Br;)c--;const l=c-a,u=o<l?o:l;let h=-1,d=0;for(;d<u;d++){const g=e.charCodeAt(s+d);if(g!==t.charCodeAt(a+d))break;g===Br&&(h=d)}if(d!==u){if(h===-1)return i}else{if(l>u){if(t.charCodeAt(a+d)===Br)return i.slice(a+d+1);if(d===2)return i.slice(a+d)}o>u&&(e.charCodeAt(s+d)===Br?h=d:d===2&&(h=3)),h===-1&&(h=0)}let f="";for(d=s+h+1;d<=n;++d)(d===n||e.charCodeAt(d)===Br)&&(f+=f.length===0?"..":"\\..");return a+=h,f.length>0?`${f}${i.slice(a,c)}`:(i.charCodeAt(a)===Br&&++a,i.slice(a,c))},toNamespacedPath(e){if(typeof e!="string"||e.length===0)return e;const t=Bt.resolve(e);if(t.length<=2)return e;if(t.charCodeAt(0)===Br){if(t.charCodeAt(1)===Br){const r=t.charCodeAt(2);if(r!==PP&&r!==un)return`\\\\?\\UNC\\${t.slice(2)}`}}else if(dn(t.charCodeAt(0))&&t.charCodeAt(1)===hn&&t.charCodeAt(2)===Br)return`\\\\?\\${t}`;return e},dirname(e){Ht(e,"path");const t=e.length;if(t===0)return".";let r=-1,i=0;const s=e.charCodeAt(0);if(t===1)return je(s)?e:".";if(je(s)){if(r=i=1,je(e.charCodeAt(1))){let a=2,c=a;for(;a<t&&!je(e.charCodeAt(a));)a++;if(a<t&&a!==c){for(c=a;a<t&&je(e.charCodeAt(a));)a++;if(a<t&&a!==c){for(c=a;a<t&&!je(e.charCodeAt(a));)a++;if(a===t)return e;a!==c&&(r=i=a+1)}}}}else dn(s)&&e.charCodeAt(1)===hn&&(r=t>2&&je(e.charCodeAt(2))?3:2,i=r);let n=-1,o=!0;for(let a=t-1;a>=i;--a)if(je(e.charCodeAt(a))){if(!o){n=a;break}}else o=!1;if(n===-1){if(r===-1)return".";n=r}return e.slice(0,n)},basename(e,t){t!==void 0&&Ht(t,"suffix"),Ht(e,"path");let r=0,i=-1,s=!0,n;if(e.length>=2&&dn(e.charCodeAt(0))&&e.charCodeAt(1)===hn&&(r=2),t!==void 0&&t.length>0&&t.length<=e.length){if(t===e)return"";let o=t.length-1,a=-1;for(n=e.length-1;n>=r;--n){const c=e.charCodeAt(n);if(je(c)){if(!s){r=n+1;break}}else a===-1&&(s=!1,a=n+1),o>=0&&(c===t.charCodeAt(o)?--o===-1&&(i=n):(o=-1,i=a))}return r===i?i=a:i===-1&&(i=e.length),e.slice(r,i)}for(n=e.length-1;n>=r;--n)if(je(e.charCodeAt(n))){if(!s){r=n+1;break}}else i===-1&&(s=!1,i=n+1);return i===-1?"":e.slice(r,i)},extname(e){Ht(e,"path");let t=0,r=-1,i=0,s=-1,n=!0,o=0;e.length>=2&&e.charCodeAt(1)===hn&&dn(e.charCodeAt(0))&&(t=i=2);for(let a=e.length-1;a>=t;--a){const c=e.charCodeAt(a);if(je(c)){if(!n){i=a+1;break}continue}s===-1&&(n=!1,s=a+1),c===un?r===-1?r=a:o!==1&&(o=1):r!==-1&&(o=-1)}return r===-1||s===-1||o===0||o===1&&r===s-1&&r===i+1?"":e.slice(r,s)},format:Yy.bind(null,"\\"),parse(e){Ht(e,"path");const t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;const r=e.length;let i=0,s=e.charCodeAt(0);if(r===1)return je(s)?(t.root=t.dir=e,t):(t.base=t.name=e,t);if(je(s)){if(i=1,je(e.charCodeAt(1))){let h=2,d=h;for(;h<r&&!je(e.charCodeAt(h));)h++;if(h<r&&h!==d){for(d=h;h<r&&je(e.charCodeAt(h));)h++;if(h<r&&h!==d){for(d=h;h<r&&!je(e.charCodeAt(h));)h++;h===r?i=h:h!==d&&(i=h+1)}}}}else if(dn(s)&&e.charCodeAt(1)===hn){if(r<=2)return t.root=t.dir=e,t;if(i=2,je(e.charCodeAt(2))){if(r===3)return t.root=t.dir=e,t;i=3}}i>0&&(t.root=e.slice(0,i));let n=-1,o=i,a=-1,c=!0,l=e.length-1,u=0;for(;l>=i;--l){if(s=e.charCodeAt(l),je(s)){if(!c){o=l+1;break}continue}a===-1&&(c=!1,a=l+1),s===un?n===-1?n=l:u!==1&&(u=1):n!==-1&&(u=-1)}return a!==-1&&(n===-1||u===0||u===1&&n===a-1&&n===o+1?t.base=t.name=e.slice(o,a):(t.name=e.slice(o,n),t.base=e.slice(o,a),t.ext=e.slice(n,a))),o>0&&o!==i?t.dir=e.slice(0,o-1):t.dir=t.root,t},sep:"\\",delimiter:";",win32:null,posix:null},AP=(()=>{if(zr){const e=/\\/g;return()=>{const t=Zn().replace(e,"/");return t.slice(t.indexOf("/"))}}return()=>Zn()})(),He={resolve(...e){let t="",r=!1;for(let i=e.length-1;i>=-1&&!r;i--){const s=i>=0?e[i]:AP();Ht(s,`paths[${i}]`),s.length!==0&&(t=`${s}/${t}`,r=s.charCodeAt(0)===hr)}return t=Eh(t,!r,"/",sm),r?`/${t}`:t.length>0?t:"."},normalize(e){if(Ht(e,"path"),e.length===0)return".";const t=e.charCodeAt(0)===hr,r=e.charCodeAt(e.length-1)===hr;return e=Eh(e,!t,"/",sm),e.length===0?t?"/":r?"./":".":(r&&(e+="/"),t?`/${e}`:e)},isAbsolute(e){return Ht(e,"path"),e.length>0&&e.charCodeAt(0)===hr},join(...e){if(e.length===0)return".";let t;for(let r=0;r<e.length;++r){const i=e[r];Ht(i,"path"),i.length>0&&(t===void 0?t=i:t+=`/${i}`)}return t===void 0?".":He.normalize(t)},relative(e,t){if(Ht(e,"from"),Ht(t,"to"),e===t||(e=He.resolve(e),t=He.resolve(t),e===t))return"";const r=1,i=e.length,s=i-r,n=1,o=t.length-n,a=s<o?s:o;let c=-1,l=0;for(;l<a;l++){const h=e.charCodeAt(r+l);if(h!==t.charCodeAt(n+l))break;h===hr&&(c=l)}if(l===a)if(o>a){if(t.charCodeAt(n+l)===hr)return t.slice(n+l+1);if(l===0)return t.slice(n+l)}else s>a&&(e.charCodeAt(r+l)===hr?c=l:l===0&&(c=0));let u="";for(l=r+c+1;l<=i;++l)(l===i||e.charCodeAt(l)===hr)&&(u+=u.length===0?"..":"/..");return`${u}${t.slice(n+c)}`},toNamespacedPath(e){return e},dirname(e){if(Ht(e,"path"),e.length===0)return".";const t=e.charCodeAt(0)===hr;let r=-1,i=!0;for(let s=e.length-1;s>=1;--s)if(e.charCodeAt(s)===hr){if(!i){r=s;break}}else i=!1;return r===-1?t?"/":".":t&&r===1?"//":e.slice(0,r)},basename(e,t){t!==void 0&&Ht(t,"ext"),Ht(e,"path");let r=0,i=-1,s=!0,n;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t===e)return"";let o=t.length-1,a=-1;for(n=e.length-1;n>=0;--n){const c=e.charCodeAt(n);if(c===hr){if(!s){r=n+1;break}}else a===-1&&(s=!1,a=n+1),o>=0&&(c===t.charCodeAt(o)?--o===-1&&(i=n):(o=-1,i=a))}return r===i?i=a:i===-1&&(i=e.length),e.slice(r,i)}for(n=e.length-1;n>=0;--n)if(e.charCodeAt(n)===hr){if(!s){r=n+1;break}}else i===-1&&(s=!1,i=n+1);return i===-1?"":e.slice(r,i)},extname(e){Ht(e,"path");let t=-1,r=0,i=-1,s=!0,n=0;for(let o=e.length-1;o>=0;--o){const a=e.charCodeAt(o);if(a===hr){if(!s){r=o+1;break}continue}i===-1&&(s=!1,i=o+1),a===un?t===-1?t=o:n!==1&&(n=1):t!==-1&&(n=-1)}return t===-1||i===-1||n===0||n===1&&t===i-1&&t===r+1?"":e.slice(t,i)},format:Yy.bind(null,"/"),parse(e){Ht(e,"path");const t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;const r=e.charCodeAt(0)===hr;let i;r?(t.root="/",i=1):i=0;let s=-1,n=0,o=-1,a=!0,c=e.length-1,l=0;for(;c>=i;--c){const u=e.charCodeAt(c);if(u===hr){if(!a){n=c+1;break}continue}o===-1&&(a=!1,o=c+1),u===un?s===-1?s=c:l!==1&&(l=1):s!==-1&&(l=-1)}if(o!==-1){const u=n===0&&r?1:n;s===-1||l===0||l===1&&s===o-1&&s===n+1?t.base=t.name=e.slice(u,o):(t.name=e.slice(u,s),t.base=e.slice(u,o),t.ext=e.slice(s,o))}return n>0?t.dir=e.slice(0,n-1):r&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};He.win32=Bt.win32=Bt,He.posix=Bt.posix=He;var Ss=zr?Bt.normalize:He.normalize,Ki=zr?Bt.isAbsolute:He.isAbsolute,bt=zr?Bt.join:He.join,TP=zr?Bt.resolve:He.resolve,Ko=zr?Bt.relative:He.relative,Sr=zr?Bt.dirname:He.dirname,St=zr?Bt.basename:He.basename,Sh=zr?Bt.extname:He.extname,Sz=zr?Bt.format:He.format,$z=zr?Bt.parse:He.parse,Cz=zr?Bt.toNamespacedPath:He.toNamespacedPath,$t=zr?Bt.sep:He.sep,Xy=zr?Bt.delimiter:He.delimiter;function RP(e){return e}var LP=class{constructor(e,t){this.a=void 0,this.b=void 0,typeof e=="function"?(this.c=e,this.d=RP):(this.c=t,this.d=e.getCacheKey)}get(e){const t=this.d(e);return this.b!==t&&(this.b=t,this.a=this.c(e)),this.a}},_r=class{constructor(e){this.d=e,this.a=!1}get hasValue(){return this.a}get value(){if(!this.a)try{this.b=this.d()}catch(e){this.c=e}finally{this.a=!0}if(this.c)throw this.c;return this.b}get rawValue(){return this.b}};function $h(e){return!e||typeof e!="string"?!0:e.trim().length===0}var NP=/{([^}]+)}/g;function Zy(e,t){return Object.keys(t).length===0?e:e.replace(NP,(r,i)=>t[i]??r)}function fn(e){return e.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function FP(e,t){let r=0,i=e.indexOf(t);for(;i!==-1;)r++,i=e.indexOf(t,i+t.length);return r}function OP(e,t){if(!e||!t)return e;const r=t.length;if(r===0||e.length===0)return e;let i=0;for(;e.indexOf(t,i)===i;)i=i+r;return e.substring(i)}function pn(e,t){if(!e||!t)return e;const r=t.length,i=e.length;if(r===0||i===0)return e;let s=i,n=-1;for(;n=e.lastIndexOf(t,s-1),!(n===-1||n+r!==s);){if(n===0)return"";s=n}return e.substring(0,s)}function MP(e){return e.replace(/\*/g,"")}function Ky(e,t,r={}){if(!e)throw new Error("Cannot create regex from empty string");t||(e=fn(e)),r.wholeWord&&(/\B/.test(e.charAt(0))||(e="\\b"+e),/\B/.test(e.charAt(e.length-1))||(e=e+"\\b"));let i="";return r.global&&(i+="g"),r.matchCase||(i+="i"),r.multiline&&(i+="m"),r.unicode&&(i+="u"),new RegExp(e,i)}function e4(e){return e.source==="^"||e.source==="^$"||e.source==="$"||e.source==="^\\s*$"?!1:!!(e.exec("")&&e.lastIndex===0)}function t4(e){return e.split(/\r\n|\r|\n/)}function nm(e){for(let t=0,r=e.length;t<r;t++){const i=e.charCodeAt(t);if(i!==32&&i!==9)return t}return-1}function jP(e,t=e.length-1){for(let r=t;r>=0;r--){const i=e.charCodeAt(r);if(i!==32&&i!==9)return r}return-1}function UP(e,t,r){const i=[];let s=0;for(const n of e.matchAll(t)){if(i.push(e.slice(s,n.index)),n.index===void 0)throw new Error("match.index should be defined");s=n.index+n[0].length,i.push(r(n[0],...n.slice(1),n.index,e,n.groups))}return i.push(e.slice(s)),Promise.all(i).then(n=>n.join(""))}function eo(e,t){return e<t?-1:e>t?1:0}function om(e,t,r=0,i=e.length,s=0,n=t.length){for(;r<i&&s<n;r++,s++){const c=e.charCodeAt(r),l=t.charCodeAt(s);if(c<l)return-1;if(c>l)return 1}const o=i-r,a=n-s;return o<a?-1:o>a?1:0}function r4(e,t){return Hc(e,t,0,e.length,0,t.length)}function Hc(e,t,r=0,i=e.length,s=0,n=t.length){for(;r<i&&s<n;r++,s++){let c=e.charCodeAt(r),l=t.charCodeAt(s);if(c===l)continue;if(c>=128||l>=128)return om(e.toLowerCase(),t.toLowerCase(),r,i,s,n);i4(c)&&(c-=32),i4(l)&&(l-=32);const u=c-l;if(u!==0)return u}const o=i-r,a=n-s;return o<a?-1:o>a?1:0}function i4(e){return e>=97&&e<=122}function s4(e){return e>=65&&e<=90}function $i(e,t){return e.length===t.length&&Hc(e,t)===0}function Ch(e,t){const r=t.length;return t.length>e.length?!1:Hc(e,t,0,r)===0}function HP(e,t){const r=Math.min(e.length,t.length);let i;for(i=0;i<r;i++)if(e.charCodeAt(i)!==t.charCodeAt(i))return i;return r}function Ph(e){return 55296<=e&&e<=56319}function Ih(e){return 56320<=e&&e<=57343}function am(e,t){return(e-55296<<10)+(t-56320)+65536}function n4(e,t,r){const i=e.charCodeAt(r);if(Ph(i)&&r+1<t){const s=e.charCodeAt(r+1);if(Ih(s))return am(i,s)}return i}function BP(e,t){const r=e.charCodeAt(t-1);if(Ih(r)&&t>1){const i=e.charCodeAt(t-2);if(Ph(i))return am(i,r)}return r}var zP=class{get offset(){return this.e}constructor(e,t=0){this.c=e,this.d=e.length,this.e=t}setOffset(e){this.e=e}prevCodePoint(){const e=BP(this.c,this.e);return this.e-=e>=65536?2:1,e}nextCodePoint(){const e=n4(this.c,this.d,this.e);return this.e+=e>=65536?2:1,e}eol(){return this.e>=this.d}},_P=class{get offset(){return this.c.offset}constructor(e,t=0){this.c=new zP(e,t)}nextGraphemeLength(){const e=d4.getInstance(),t=this.c,r=t.offset;let i=e.getGraphemeBreakType(t.nextCodePoint());for(;!t.eol();){const s=t.offset,n=e.getGraphemeBreakType(t.nextCodePoint());if(u4(i,n)){t.setOffset(s);break}i=n}return t.offset-r}prevGraphemeLength(){const e=d4.getInstance(),t=this.c,r=t.offset;let i=e.getGraphemeBreakType(t.prevCodePoint());for(;t.offset>0;){const s=t.offset,n=e.getGraphemeBreakType(t.prevCodePoint());if(u4(n,i)){t.setOffset(s);break}i=n}return r-t.offset}eol(){return this.c.eol()}};function o4(e,t){return new _P(e,t).nextGraphemeLength()}var cm=void 0;function WP(){return/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/}function a4(e){return cm||(cm=WP()),cm.test(e)}var VP=/^[\t\n\r\x20-\x7E]*$/;function qP(e){return VP.test(e)}var GP=/[\u2028\u2029]/;function c4(e){return GP.test(e)}var JP="\uFEFF";function QP(e){return!!(e&&e.length>0&&e.charCodeAt(0)===65279)}function YP(e,t){if(!e||!t||e.length<t.length)return!1;const r=t.length,i=e.toLowerCase();let s=0,n=-1;for(;s<r;){const o=i.indexOf(t[s],n+1);if(o<0)return!1;n=o,s++}return!0}function l4(e,t=!1){return e?(t&&(e=e.replace(/\\./g,"")),e.toLowerCase()!==e):!1}function XP(e){return e.charAt(0).toUpperCase()+e.slice(1)}function ZP(e,t=1){if(t===0)return"";let r=-1;do r=e.indexOf(`
`,r+1),t--;while(t>0&&r>=0);return r===-1?e:(e[r-1]==="\r"&&r--,e.substr(0,r))}function u4(e,t){return e===0?t!==5&&t!==7:e===2&&t===3?!1:e===4||e===2||e===3||t===4||t===2||t===3?!0:!(e===8&&(t===8||t===9||t===11||t===12)||(e===11||e===9)&&(t===9||t===10)||(e===12||e===10)&&t===10||t===5||t===13||t===7||e===1||e===13&&t===14||e===6&&t===6)}var h4;(function(e){e[e.Other=0]="Other",e[e.Prepend=1]="Prepend",e[e.CR=2]="CR",e[e.LF=3]="LF",e[e.Control=4]="Control",e[e.Extend=5]="Extend",e[e.Regional_Indicator=6]="Regional_Indicator",e[e.SpacingMark=7]="SpacingMark",e[e.L=8]="L",e[e.V=9]="V",e[e.T=10]="T",e[e.LV=11]="LV",e[e.LVT=12]="LVT",e[e.ZWJ=13]="ZWJ",e[e.Extended_Pictographic=14]="Extended_Pictographic"})(h4||(h4={}));var d4=class Ku{static{this.c=null}static getInstance(){return Ku.c||(Ku.c=new Ku),Ku.c}constructor(){this.d=KP()}getGraphemeBreakType(t){if(t<32)return t===10?3:t===13?2:4;if(t<127)return 0;const r=this.d,i=r.length/3;let s=1;for(;s<=i;)if(t<r[3*s])s=2*s;else if(t>r[3*s+1])s=2*s+1;else return r[3*s+2];return 0}};function KP(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}var f4;(function(e){e[e.zwj=8205]="zwj",e[e.emojiVariantSelector=65039]="emojiVariantSelector",e[e.enclosingKeyCap=8419]="enclosingKeyCap"})(f4||(f4={}));var Pz=class eh{static{this.c=new _r(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}'))}static{this.d=new LP({getCacheKey:JSON.stringify},t=>{function r(u){const h=new Map;for(let d=0;d<u.length;d+=2)h.set(u[d],u[d+1]);return h}function i(u,h){const d=new Map(u);for(const[f,g]of h)d.set(f,g);return d}function s(u,h){if(!u)return h;const d=new Map;for(const[f,g]of u)h.has(f)&&d.set(f,g);return d}const n=this.c.value;let o=t.filter(u=>!u.startsWith("_")&&u in n);o.length===0&&(o=["_default"]);let a;for(const u of o){const h=r(n[u]);a=s(a,h)}const c=r(n._common),l=i(c,a);return new eh(l)})}static getInstance(t){return eh.d.get(Array.from(t))}static{this.e=new _r(()=>Object.keys(eh.c.value).filter(t=>!t.startsWith("_")))}static getLocales(){return eh.e.value}constructor(t){this.f=t}isAmbiguous(t){return this.f.has(t)}containsAmbiguousCharacter(t){for(let r=0;r<t.length;r++){const i=t.codePointAt(r);if(typeof i=="number"&&this.isAmbiguous(i))return!0}return!1}getPrimaryConfusable(t){return this.f.get(t)}getConfusableCodePoints(){return new Set(this.f.keys())}},Iz=class th{static c(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static{this.d=void 0}static e(){return this.d||(this.d=new Set(th.c())),this.d}static isInvisibleCharacter(t){return th.e().has(t)}static containsInvisibleCharacter(t){for(let r=0;r<t.length;r++){const i=t.codePointAt(r);if(typeof i=="number"&&th.isInvisibleCharacter(i))return!0}return!1}static get codePoints(){return th.e()}};function Me(e){return typeof e=="string"}function eI(e){return Array.isArray(e)&&e.every(t=>Me(t))}function Dt(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)&&!(e instanceof RegExp)&&!(e instanceof Date)}function tI(e){const t=Object.getPrototypeOf(Uint8Array);return typeof e=="object"&&e instanceof t}function li(e){return typeof e=="number"&&!isNaN(e)}function Bc(e){return typeof e>"u"}function to(e){return!Lt(e)}function Lt(e){return Bc(e)||e===null}function p4(e,t){if(!e)throw new Error(t?`Unexpected type, expected '${t}'`:"Unexpected type")}function ea(e){if(Lt(e))throw new Error("Assertion Failed: argument is undefined or null");return e}var rI=Object.prototype.hasOwnProperty;function g4(e){if(!Dt(e))return!1;for(const t in e)if(rI.call(e,t))return!1;return!0}function iI(e){return typeof e=="function"}function sI(e,t){if(Me(t)){if(typeof e!==t)throw new Error(`argument does not match constraint: typeof ${t}`)}else if(iI(t)){try{if(e instanceof t)return}catch{}if(!Lt(e)&&e.constructor===t||t.length===1&&t.call(void 0,e)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}function gn(e){return e===47||e===92}function m4(e){return e.replace(/[\\/]/g,He.sep)}function nI(e){return e.indexOf("/")===-1&&(e=m4(e)),/^[a-zA-Z]:(\/|$)/.test(e)&&(e="/"+e),e}function lm(e,t=He.sep){if(!e)return"";const r=e.length,i=e.charCodeAt(0);if(gn(i)){if(gn(e.charCodeAt(1))&&!gn(e.charCodeAt(2))){let n=3;const o=n;for(;n<r&&!gn(e.charCodeAt(n));n++);if(o!==n&&!gn(e.charCodeAt(n+1))){for(n+=1;n<r;n++)if(gn(e.charCodeAt(n)))return e.slice(0,n+1).replace(/[\\/]/g,t)}}return t}else if(v4(i)&&e.charCodeAt(1)===58)return gn(e.charCodeAt(2))?e.slice(0,2)+t:e.slice(0,2);let s=e.indexOf("://");if(s!==-1){for(s+=3;s<r;s++)if(gn(e.charCodeAt(s)))return e.slice(0,s+1)}return""}var oI=/[\\/:\*\?"<>\|]/g,aI=/[/]/g,cI=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function lI(e,t=at){const r=t?oI:aI;return!(!e||e.length===0||/^\s+$/.test(e)||(r.lastIndex=0,r.test(e))||t&&cI.test(e)||e==="."||e===".."||t&&e[e.length-1]==="."||t&&e.length!==e.trim().length||e.length>255)}function um(e,t,r){const i=e===t;return!r||i?i:!e||!t?!1:$i(e,t)}function ro(e,t,r,i=$t){if(e===t)return!0;if(!e||!t||t.length>e.length)return!1;if(r){if(!Ch(e,t))return!1;if(t.length===e.length)return!0;let n=t.length;return t.charAt(t.length-1)===i&&n--,e.charAt(n)===i}return t.charAt(t.length-1)!==i&&(t+=i),e.indexOf(t)===0}function v4(e){return e>=65&&e<=90||e>=97&&e<=122}function uI(e){return at?(e=pn(e,$t),e.endsWith(":")&&(e+=$t)):(e=pn(e,$t),e||(e=$t)),e}function w4(e){const t=Ss(e);return at?e.length>3?!1:hm(t)&&(e.length===2||t.charCodeAt(2)===92):t===He.sep}function hm(e,t=at){return t?v4(e.charCodeAt(0))&&e.charCodeAt(1)===58:!1}function b4(e,t=at){return hm(e,t)?e[0]:void 0}var hI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",dI="BDEFGHIJKMOQRSTUVWXYZbdefghijkmoqrstuvwxyz0123456789";function fI(e,t,r=8){let i="";for(let n=0;n<r;n++){let o;n===0&&at&&!t&&(r===3||r===4)?o=dI:o=hI,i+=o.charAt(Math.floor(Math.random()*o.length))}let s;return t?s=`${t}-${i}`:s=i,e?bt(e,s):s}var pI=/^\w[\w\d+.-]*$/,gI=/^\//,mI=/^\/\//;function vI(e,t){if(!e.scheme&&t)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${e.authority}", path: "${e.path}", query: "${e.query}", fragment: "${e.fragment}"}`);if(e.scheme&&!pI.test(e.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(e.path){if(e.authority){if(!gI.test(e.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(mI.test(e.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function wI(e,t){return!e&&!t?"file":e}function bI(e,t){switch(e){case"https":case"http":case"file":t?t[0]!==Ci&&(t=Ci+t):t=Ci;break}return t}var yt="",Ci="/",yI=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,k=class Pg{static isUri(t){return t instanceof Pg?!0:t?typeof t.authority=="string"&&typeof t.fragment=="string"&&typeof t.path=="string"&&typeof t.query=="string"&&typeof t.scheme=="string"&&typeof t.fsPath=="string"&&typeof t.with=="function"&&typeof t.toString=="function":!1}constructor(t,r,i,s,n,o=!1){typeof t=="object"?(this.scheme=t.scheme||yt,this.authority=t.authority||yt,this.path=t.path||yt,this.query=t.query||yt,this.fragment=t.fragment||yt):(this.scheme=wI(t,o),this.authority=r||yt,this.path=bI(this.scheme,i||yt),this.query=s||yt,this.fragment=n||yt,vI(this,o))}get fsPath(){return Dh(this,!1)}with(t){if(!t)return this;let{scheme:r,authority:i,path:s,query:n,fragment:o}=t;return r===void 0?r=this.scheme:r===null&&(r=yt),i===void 0?i=this.authority:i===null&&(i=yt),s===void 0?s=this.path:s===null&&(s=yt),n===void 0?n=this.query:n===null&&(n=yt),o===void 0?o=this.fragment:o===null&&(o=yt),r===this.scheme&&i===this.authority&&s===this.path&&n===this.query&&o===this.fragment?this:new ta(r,i,s,n,o)}static parse(t,r=!1){const i=yI.exec(t);return i?new ta(i[2]||yt,Ah(i[4]||yt),Ah(i[5]||yt),Ah(i[7]||yt),Ah(i[9]||yt),r):new ta(yt,yt,yt,yt,yt)}static file(t){let r=yt;if(at&&(t=t.replace(/\\/g,Ci)),t[0]===Ci&&t[1]===Ci){const i=t.indexOf(Ci,2);i===-1?(r=t.substring(2),t=Ci):(r=t.substring(2,i),t=t.substring(i)||Ci)}return new ta("file",r,t,yt,yt)}static from(t,r){return new ta(t.scheme,t.authority,t.path,t.query,t.fragment,r)}static joinPath(t,...r){if(!t.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let i;return at&&t.scheme==="file"?i=Pg.file(Bt.join(Dh(t,!0),...r)).path:i=He.join(t.path,...r),t.with({path:i})}toString(t=!1){return dm(this,t)}toJSON(){return this}static revive(t){if(t){if(t instanceof Pg)return t;{const r=new ta(t);return r._formatted=t.external??null,r._fsPath=t._sep===k4?t.fsPath??null:null,r}}else return t}[Symbol.for("debug.description")](){return`URI(${this.toString()})`}};function y4(e){return!e||typeof e!="object"?!1:typeof e.scheme=="string"&&(typeof e.authority=="string"||typeof e.authority>"u")&&(typeof e.path=="string"||typeof e.path>"u")&&(typeof e.query=="string"||typeof e.query>"u")&&(typeof e.fragment=="string"||typeof e.fragment>"u")}var k4=at?1:void 0,ta=class extends k{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=Dh(this,!1)),this._fsPath}toString(e=!1){return e?dm(this,!0):(this._formatted||(this._formatted=dm(this,!1)),this._formatted)}toJSON(){const e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=k4),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}},x4={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function E4(e,t,r){let i,s=-1;for(let n=0;n<e.length;n++){const o=e.charCodeAt(n);if(o>=97&&o<=122||o>=65&&o<=90||o>=48&&o<=57||o===45||o===46||o===95||o===126||t&&o===47||r&&o===91||r&&o===93||r&&o===58)s!==-1&&(i+=encodeURIComponent(e.substring(s,n)),s=-1),i!==void 0&&(i+=e.charAt(n));else{i===void 0&&(i=e.substr(0,n));const a=x4[o];a!==void 0?(s!==-1&&(i+=encodeURIComponent(e.substring(s,n)),s=-1),i+=a):s===-1&&(s=n)}}return s!==-1&&(i+=encodeURIComponent(e.substring(s))),i!==void 0?i:e}function kI(e){let t;for(let r=0;r<e.length;r++){const i=e.charCodeAt(r);i===35||i===63?(t===void 0&&(t=e.substr(0,r)),t+=x4[i]):t!==void 0&&(t+=e[r])}return t!==void 0?t:e}function Dh(e,t){let r;return e.authority&&e.path.length>1&&e.scheme==="file"?r=`//${e.authority}${e.path}`:e.path.charCodeAt(0)===47&&(e.path.charCodeAt(1)>=65&&e.path.charCodeAt(1)<=90||e.path.charCodeAt(1)>=97&&e.path.charCodeAt(1)<=122)&&e.path.charCodeAt(2)===58?t?r=e.path.substr(1):r=e.path[1].toLowerCase()+e.path.substr(2):r=e.path,at&&(r=r.replace(/\//g,"\\")),r}function dm(e,t){const r=t?kI:E4;let i="",{scheme:s,authority:n,path:o,query:a,fragment:c}=e;if(s&&(i+=s,i+=":"),(n||s==="file")&&(i+=Ci,i+=Ci),n){let l=n.indexOf("@");if(l!==-1){const u=n.substr(0,l);n=n.substr(l+1),l=u.lastIndexOf(":"),l===-1?i+=r(u,!1,!1):(i+=r(u.substr(0,l),!1,!1),i+=":",i+=r(u.substr(l+1),!1,!0)),i+="@"}n=n.toLowerCase(),l=n.lastIndexOf(":"),l===-1?i+=r(n,!1,!0):(i+=r(n.substr(0,l),!1,!0),i+=n.substr(l))}if(o){if(o.length>=3&&o.charCodeAt(0)===47&&o.charCodeAt(2)===58){const l=o.charCodeAt(1);l>=65&&l<=90&&(o=`/${String.fromCharCode(l+32)}:${o.substr(3)}`)}else if(o.length>=2&&o.charCodeAt(1)===58){const l=o.charCodeAt(0);l>=65&&l<=90&&(o=`${String.fromCharCode(l+32)}:${o.substr(2)}`)}i+=r(o,!0,!1)}return a&&(i+="?",i+=r(a,!1,!1)),c&&(i+="#",i+=t?c:E4(c,!1,!1)),i}function S4(e){try{return decodeURIComponent(e)}catch{return e.length>3?e.substr(0,3)+S4(e.substr(3)):e}}var $4=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function Ah(e){return e.match($4)?e.replace($4,t=>S4(t)):e}var Q;(function(e){e.inMemory="inmemory",e.vscode="vscode",e.internal="private",e.walkThrough="walkThrough",e.walkThroughSnippet="walkThroughSnippet",e.http="http",e.https="https",e.file="file",e.mailto="mailto",e.untitled="untitled",e.data="data",e.command="command",e.vscodeRemote="vscode-remote",e.vscodeRemoteResource="vscode-remote-resource",e.vscodeManagedRemoteResource="vscode-managed-remote-resource",e.vscodeUserData="vscode-userdata",e.vscodeCustomEditor="vscode-custom-editor",e.vscodeNotebookCell="vscode-notebook-cell",e.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",e.vscodeNotebookCellMetadataDiff="vscode-notebook-cell-metadata-diff",e.vscodeNotebookCellOutput="vscode-notebook-cell-output",e.vscodeNotebookCellOutputDiff="vscode-notebook-cell-output-diff",e.vscodeNotebookMetadata="vscode-notebook-metadata",e.vscodeInteractiveInput="vscode-interactive-input",e.vscodeSettings="vscode-settings",e.vscodeWorkspaceTrust="vscode-workspace-trust",e.vscodeTerminal="vscode-terminal",e.vscodeChatCodeBlock="vscode-chat-code-block",e.vscodeChatCodeCompareBlock="vscode-chat-code-compare-block",e.vscodeChatSesssion="vscode-chat-editor",e.webviewPanel="webview-panel",e.vscodeWebview="vscode-webview",e.extension="extension",e.vscodeFileResource="vscode-file",e.tmp="tmp",e.vsls="vsls",e.vscodeSourceControl="vscode-scm",e.commentsInput="comment",e.codeSetting="code-setting",e.outputChannel="output"})(Q||(Q={}));function fm(e,t){return k.isUri(e)?$i(e.scheme,t):Ch(e,t+":")}function xI(e,...t){return t.some(r=>fm(e,r))}var EI="tkn",SI=class{constructor(){this.a=Object.create(null),this.b=Object.create(null),this.c=Object.create(null),this.d="http",this.e=null,this.f="/"}setPreferredWebSchema(e){this.d=e}setDelegate(e){this.e=e}setServerRootPath(e,t){this.f=$I(e,t)}getServerRootPath(){return this.f}get g(){return He.join(this.f,Q.vscodeRemoteResource)}set(e,t,r){this.a[e]=t,this.b[e]=r}setConnectionToken(e,t){this.c[e]=t}getPreferredWebSchema(){return this.d}rewrite(e){if(this.e)try{return this.e(e)}catch(o){return It(o),e}const t=e.authority;let r=this.a[t];r&&r.indexOf(":")!==-1&&r.indexOf("[")===-1&&(r=`[${r}]`);const i=this.b[t],s=this.c[t];let n=`path=${encodeURIComponent(e.path)}`;return typeof s=="string"&&(n+=`&${EI}=${encodeURIComponent(s)}`),k.from({scheme:xh?this.d:Q.vscodeRemoteResource,authority:`${r}:${i}`,path:this.g,query:n})}},C4=new SI;function $I(e,t){return He.join(t??"/",`${e.quality??"oss"}-${e.commit??"dev"}`)}var CI="vs/../../node_modules",PI="vs/../../node_modules.asar",P4="vscode-app",II=class Ig{static{this.a=P4}asBrowserUri(t){const r=this.b(t);return this.uriToBrowserUri(r)}uriToBrowserUri(t){return t.scheme===Q.vscodeRemote?C4.rewrite(t):t.scheme===Q.file&&(pP||mP===`${Q.vscodeFileResource}://${Ig.a}`)?t.with({scheme:Q.vscodeFileResource,authority:t.authority||Ig.a,query:null,fragment:null}):t}asFileUri(t){const r=this.b(t);return this.uriToFileUri(r)}uriToFileUri(t){return t.scheme===Q.vscodeFileResource?t.with({scheme:Q.file,authority:t.authority!==Ig.a?t.authority:null,query:null,fragment:null}):t}b(t,r){if(k.isUri(t))return t;if(globalThis._VSCODE_FILE_ROOT){const i=globalThis._VSCODE_FILE_ROOT;if(/^\w[\w\d+.-]*:\/\//.test(i))return k.joinPath(k.parse(i,!0),t);const s=bt(i,t);return k.file(s)}return k.parse(r.toUrl(t))}},pm=new II,I4;(function(e){const t=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);e.CoopAndCoep=Object.freeze(t.get("3"));const r="vscode-coi";function i(n){let o;typeof n=="string"?o=new URL(n).searchParams:n instanceof URL?o=n.searchParams:k.isUri(n)&&(o=new URL(n.toString(!0)).searchParams);const a=o?.get(r);if(a)return t.get(a)}e.getHeadersFromQuery=i;function s(n,o,a){if(!globalThis.crossOriginIsolated)return;const c=o&&a?"3":a?"2":"1";n instanceof URLSearchParams?n.set(r,c):n[r]=c}e.addSearchParam=s})(I4||(I4={}));function Pi(e){return Dh(e,!0)}var zc=class{constructor(e){this.a=e}compare(e,t,r=!1){return e===t?0:eo(this.getComparisonKey(e,r),this.getComparisonKey(t,r))}isEqual(e,t,r=!1){return e===t?!0:!e||!t?!1:this.getComparisonKey(e,r)===this.getComparisonKey(t,r)}getComparisonKey(e,t=!1){return e.with({path:this.a(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}ignorePathCasing(e){return this.a(e)}isEqualOrParent(e,t,r=!1){if(e.scheme===t.scheme){if(e.scheme===Q.file)return ro(Pi(e),Pi(t),this.a(e))&&e.query===t.query&&(r||e.fragment===t.fragment);if(T4(e.authority,t.authority))return ro(e.path,t.path,this.a(e),"/")&&e.query===t.query&&(r||e.fragment===t.fragment)}return!1}joinPath(e,...t){return k.joinPath(e,...t)}basenameOrAuthority(e){return es(e)||e.authority}basename(e){return He.basename(e.path)}extname(e){return He.extname(e.path)}dirname(e){if(e.path.length===0)return e;let t;return e.scheme===Q.file?t=k.file(Sr(Pi(e))).path:(t=He.dirname(e.path),e.authority&&t.length&&t.charCodeAt(0)!==47&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return e.scheme===Q.file?t=k.file(Ss(Pi(e))).path:t=He.normalize(e.path),e.with({path:t})}relativePath(e,t){if(e.scheme!==t.scheme||!T4(e.authority,t.authority))return;if(e.scheme===Q.file){const s=Ko(Pi(e),Pi(t));return at?m4(s):s}let r=e.path||"/";const i=t.path||"/";if(this.a(e)){let s=0;for(const n=Math.min(r.length,i.length);s<n&&!(r.charCodeAt(s)!==i.charCodeAt(s)&&r.charAt(s).toLowerCase()!==i.charAt(s).toLowerCase());s++);r=i.substr(0,s)+r.substr(s)}return He.relative(r,i)}resolvePath(e,t){if(e.scheme===Q.file){const r=k.file(TP(Pi(e),t));return e.with({authority:r.authority,path:r.path})}return t=nI(t),e.with({path:He.resolve(e.path,t)})}isAbsolutePath(e){return!!e.path&&e.path[0]==="/"}isEqualAuthority(e,t){return e===t||e!==void 0&&t!==void 0&&$i(e,t)}hasTrailingPathSeparator(e,t=$t){if(e.scheme===Q.file){const r=Pi(e);return r.length>lm(r).length&&r[r.length-1]===t}else{const r=e.path;return r.length>1&&r.charCodeAt(r.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e,t=$t){return R4(e,t)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e,t=$t){let r=!1;if(e.scheme===Q.file){const i=Pi(e);r=i!==void 0&&i.length===lm(i).length&&i[i.length-1]===t}else{t="/";const i=e.path;r=i.length===1&&i.charCodeAt(i.length-1)===47}return!r&&!R4(e,t)?e.with({path:e.path+"/"}):e}},Ye=new zc(()=>!1),gm=new zc(e=>e.scheme===Q.file?!Ot:!0),DI=new zc(e=>!0),D4=Ye.isEqual.bind(Ye),Dz=Ye.isEqualOrParent.bind(Ye),Az=Ye.getComparisonKey.bind(Ye),mm=Ye.basenameOrAuthority.bind(Ye),es=Ye.basename.bind(Ye),AI=Ye.extname.bind(Ye),Th=Ye.dirname.bind(Ye),Mt=Ye.joinPath.bind(Ye),Tz=Ye.normalizePath.bind(Ye),A4=Ye.relativePath.bind(Ye),Rz=Ye.resolvePath.bind(Ye),TI=Ye.isAbsolutePath.bind(Ye),T4=Ye.isEqualAuthority.bind(Ye),R4=Ye.hasTrailingPathSeparator.bind(Ye),Lz=Ye.removeTrailingPathSeparator.bind(Ye),Nz=Ye.addTrailingPathSeparator.bind(Ye),L4;(function(e){e.META_DATA_LABEL="label",e.META_DATA_DESCRIPTION="description",e.META_DATA_SIZE="size",e.META_DATA_MIME="mime";function t(r){const i=new Map;r.path.substring(r.path.indexOf(";")+1,r.path.lastIndexOf(";")).split(";").forEach(o=>{const[a,c]=o.split(":");a&&c&&i.set(a,c)});const n=r.path.substring(0,r.path.indexOf(";"));return n&&i.set(e.META_DATA_MIME,n),i}e.parseMetaData=t})(L4||(L4={}));var RI=Symbol("MicrotaskDelay");function mn(e){return!!e&&typeof e.then=="function"}function $s(e){const t=new wt,r=e(t.token),i=new Promise((s,n)=>{const o=t.token.onCancellationRequested(()=>{o.dispose(),n(new Er)});Promise.resolve(r).then(a=>{o.dispose(),t.dispose(),s(a)},a=>{o.dispose(),t.dispose(),n(a)})});return new class{cancel(){t.cancel(),t.dispose()}then(s,n){return i.then(s,n)}catch(s){return this.then(void 0,s)}finally(s){return i.finally(s)}}}function N4(e,t,r){return new Promise((i,s)=>{const n=t.onCancellationRequested(()=>{n.dispose(),i(r)});e.then(i,s).finally(()=>n.dispose())})}function LI(e,t){return new Promise((r,i)=>{const s=t.onCancellationRequested(()=>{s.dispose(),i(new Er)});e.then(r,i).finally(()=>s.dispose())})}function mr(e){return new Promise((t,r)=>{const i=e();mn(i)?i.then(t,r):t(i)})}function F4(){let e,t;return{promise:new Promise((i,s)=>{e=i,t=s}),resolve:e,reject:t}}var NI=class{constructor(){this.f=!1,this.a=null,this.b=null,this.d=null}queue(e){if(this.f)return Promise.reject(new Error("Throttler is disposed"));if(this.a){if(this.d=e,!this.b){const t=()=>{if(this.b=null,this.f)return;const r=this.queue(this.d);return this.d=null,r};this.b=new Promise(r=>{this.a.then(t,t).then(r)})}return new Promise((t,r)=>{this.b.then(t,r)})}return this.a=e(),new Promise((t,r)=>{this.a.then(i=>{this.a=null,t(i)},i=>{this.a=null,r(i)})})}dispose(){this.f=!0}},FI=(e,t)=>{let r=!0;const i=setTimeout(()=>{r=!1,t()},e);return{isTriggered:()=>r,dispose:()=>{clearTimeout(i),r=!1}}},OI=e=>{let t=!0;return queueMicrotask(()=>{t&&(t=!1,e())}),{isTriggered:()=>t,dispose:()=>{t=!1}}},O4=class{constructor(e){this.defaultDelay=e,this.a=null,this.b=null,this.d=null,this.f=null,this.g=null}trigger(e,t=this.defaultDelay){this.g=e,this.h(),this.b||(this.b=new Promise((i,s)=>{this.d=i,this.f=s}).then(()=>{if(this.b=null,this.d=null,this.g){const i=this.g;return this.g=null,i()}}));const r=()=>{this.a=null,this.d?.(null)};return this.a=t===RI?OI(r):FI(t,r),this.b}isTriggered(){return!!this.a?.isTriggered()}cancel(){this.h(),this.b&&(this.f?.(new Er),this.b=null)}h(){this.a?.dispose(),this.a=null}dispose(){this.cancel()}},Rh=class{constructor(e){this.a=new O4(e),this.b=new NI}trigger(e,t){return this.a.trigger(()=>this.b.queue(e),t)}isTriggered(){return this.a.isTriggered()}cancel(){this.a.cancel()}dispose(){this.a.dispose(),this.b.dispose()}},ui=class{constructor(){this.a=!1,this.b=new Promise((e,t)=>{this.d=e})}isOpen(){return this.a}open(){this.a=!0,this.d(!0)}wait(){return this.b}};function br(e,t){return t?new Promise((r,i)=>{const s=setTimeout(()=>{n.dispose(),r()},e),n=t.onCancellationRequested(()=>{clearTimeout(s),n.dispose(),i(new Er)})}):$s(r=>br(e,r))}function M4(e,t=0,r){const i=setTimeout(()=>{e(),r&&s.dispose()},t),s=me(()=>{clearTimeout(i),r?.deleteAndLeak(s)});return r?.add(s),s}function MI(e,t=i=>!!i,r=null){if(e.length===0)return Promise.resolve(r);let i=e.length;const s=()=>{i=-1;for(const n of e)n.cancel?.()};return new Promise((n,o)=>{for(const a of e)a.then(c=>{--i>=0&&t(c)?(s(),n(c)):i===0&&n(r)}).catch(c=>{--i>=0&&(s(),o(c))})})}var jI=class{constructor(e){this.a=0,this.b=!1,this.f=e,this.g=[],this.d=0,this.h=new T}whenIdle(){return this.size>0?Qe.toPromise(this.onDrained):Promise.resolve()}get onDrained(){return this.h.event}get size(){return this.a}queue(e){if(this.b)throw new Error("Object has been disposed");return this.a++,new Promise((t,r)=>{this.g.push({factory:e,c:t,e:r}),this.j()})}j(){for(;this.g.length&&this.d<this.f;){const e=this.g.shift();this.d++;const t=e.factory();t.then(e.c,e.e),t.then(()=>this.k(),()=>this.k())}}k(){this.b||(this.d--,--this.a===0&&this.h.fire(),this.g.length>0&&this.j())}clear(){if(this.b)throw new Error("Object has been disposed");this.g.length=0,this.a=this.d}dispose(){this.b=!0,this.g.length=0,this.a=0,this.h.dispose()}},UI=class extends jI{constructor(){super(1)}},j4=class{constructor(){this.a=new Map,this.b=new Set,this.d=void 0,this.f=0}async whenDrained(){if(this.g())return;const e=new vn;return this.b.add(e),e.p}g(){for(const[,e]of this.a)if(e.size>0)return!1;return!0}queueSize(e,t=Ye){const r=t.getComparisonKey(e);return this.a.get(r)?.size??0}queueFor(e,t,r=Ye){const i=r.getComparisonKey(e);let s=this.a.get(i);if(!s){s=new UI;const n=this.f++,o=Qe.once(s.onDrained)(()=>{s?.dispose(),this.a.delete(i),this.h(),this.d?.deleteAndDispose(n),this.d?.size===0&&(this.d.dispose(),this.d=void 0)});this.d||(this.d=new ph),this.d.set(n,o),this.a.set(i,s)}return s.queue(t)}h(){this.g()&&this.j()}j(){for(const e of this.b)e.complete();this.b.clear()}dispose(){for(const[,e]of this.a)e.dispose();this.a.clear(),this.j(),this.d?.dispose()}},U4=class{constructor(){this.d=void 0,this.f=!1}cancel(){this.d?.dispose(),this.d=void 0}cancelAndSet(e,t,r=globalThis){if(this.f)throw new by("Calling 'cancelAndSet' on a disposed IntervalTimer");this.cancel();const i=r.setInterval(()=>{e()},t);this.d=me(()=>{r.clearInterval(i),this.d=void 0})}dispose(){this.cancel(),this.f=!0}},Cs=class{constructor(e,t){this.b=-1,this.a=e,this.d=t,this.f=this.g.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearTimeout(this.b),this.b=-1)}schedule(e=this.d){this.cancel(),this.b=setTimeout(this.f,e)}get delay(){return this.d}set delay(e){this.d=e}isScheduled(){return this.b!==-1}flush(){this.isScheduled()&&(this.cancel(),this.h())}g(){this.b=-1,this.a&&this.h()}h(){this.a?.()}},H4=class{constructor(e,t){t%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${t}ms is not a multiple of 1000ms.`),this.a=e,this.b=t,this.d=0,this.f=-1,this.g=this.h.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearInterval(this.f),this.f=-1)}schedule(e=this.b){e%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${e}ms is not a multiple of 1000ms.`),this.cancel(),this.d=Math.ceil(e/1e3),this.f=setInterval(this.g,1e3)}isScheduled(){return this.f!==-1}h(){this.d--,!(this.d>0)&&(clearInterval(this.f),this.f=-1,this.a?.())}},HI=class extends Cs{constructor(e,t){super(e,t),this.j=[]}work(e){this.j.push(e),this.isScheduled()||this.schedule()}h(){const e=this.j;this.j=[],this.a?.(e)}dispose(){this.j=[],super.dispose()}},BI=class extends ae{constructor(e,t){super(),this.g=e,this.h=t,this.a=[],this.b=this.B(new ks),this.f=!1}get pending(){return this.a.length}work(e){if(this.f)return!1;if(typeof this.g.maxBufferedWork=="number"){if(this.b.value){if(this.pending+e.length>this.g.maxBufferedWork)return!1}else if(this.pending+e.length-this.g.maxWorkChunkSize>this.g.maxBufferedWork)return!1}for(const t of e)this.a.push(t);return this.b.value||this.j(),!0}j(){this.h(this.a.splice(0,this.g.maxWorkChunkSize)),this.a.length>0&&(this.b.value=new Cs(()=>{this.b.clear(),this.j()},this.g.throttleDelay),this.b.value.schedule())}dispose(){super.dispose(),this.f=!0}},B4,Lh;(function(){typeof globalThis.requestIdleCallback!="function"||typeof globalThis.cancelIdleCallback!="function"?Lh=(e,t)=>{zy(()=>{if(r)return;const i=Date.now()+15;t(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,i-Date.now())}}))});let r=!1;return{dispose(){r||(r=!0)}}}:Lh=(e,t,r)=>{const i=e.requestIdleCallback(t,typeof r=="number"?{timeout:r}:void 0);let s=!1;return{dispose(){s||(s=!0,e.cancelIdleCallback(i))}}},B4=e=>Lh(globalThis,e)})();var zI=class{constructor(e,t){this.g=!1,this.d=()=>{try{this.j=t()}catch(r){this.l=r}finally{this.g=!0}},this.f=Lh(e,()=>this.d())}dispose(){this.f.dispose()}get value(){if(this.g||(this.f.dispose(),this.d()),this.l)throw this.l;return this.j}get isInitialized(){return this.g}},_I=class extends zI{constructor(e){super(globalThis,e)}};async function WI(e,t,r){let i;for(let s=0;s<r;s++)try{return await e()}catch(n){i=n,await br(t)}throw i}var z4;(function(e){e[e.Resolved=0]="Resolved",e[e.Rejected=1]="Rejected"})(z4||(z4={}));var vn=class{get isRejected(){return this.d?.outcome===1}get isResolved(){return this.d?.outcome===0}get isSettled(){return!!this.d}get value(){return this.d?.outcome===0?this.d?.value:void 0}constructor(){this.p=new Promise((e,t)=>{this.a=e,this.b=t})}complete(e){return new Promise(t=>{this.a(e),this.d={outcome:0,value:e},t()})}error(e){return new Promise(t=>{this.b(e),this.d={outcome:1,value:e},t()})}cancel(){return this.error(new Er)}},ra;(function(e){async function t(i){let s;const n=await Promise.all(i.map(o=>o.then(a=>a,a=>{s||(s=a)})));if(typeof s<"u")throw s;return n}e.settled=t;function r(i){return new Promise(async(s,n)=>{try{await i(s,n)}catch(o){n(o)}})}e.withAsyncBody=r})(ra||(ra={}));var _4;(function(e){e[e.Initial=0]="Initial",e[e.DoneOK=1]="DoneOK",e[e.DoneError=2]="DoneError"})(_4||(_4={}));var _c=class si{static fromArray(t){return new si(r=>{r.emitMany(t)})}static fromPromise(t){return new si(async r=>{r.emitMany(await t)})}static fromPromises(t){return new si(async r=>{await Promise.all(t.map(async i=>r.emitOne(await i)))})}static merge(t){return new si(async r=>{await Promise.all(t.map(async i=>{for await(const s of i)r.emitOne(s)}))})}static{this.EMPTY=si.fromArray([])}constructor(t,r){this.a=0,this.b=[],this.d=null,this.f=r,this.g=new T,queueMicrotask(async()=>{const i={emitOne:s=>this.h(s),emitMany:s=>this.j(s),reject:s=>this.l(s)};try{await Promise.resolve(t(i)),this.k()}catch(s){this.l(s)}finally{i.emitOne=void 0,i.emitMany=void 0,i.reject=void 0}})}[Symbol.asyncIterator](){let t=0;return{next:async()=>{do{if(this.a===2)throw this.d;if(t<this.b.length)return{done:!1,value:this.b[t++]};if(this.a===1)return{done:!0,value:void 0};await Qe.toPromise(this.g.event)}while(!0)},return:async()=>(this.f?.(),{done:!0,value:void 0})}}static map(t,r){return new si(async i=>{for await(const s of t)i.emitOne(r(s))})}map(t){return si.map(this,t)}static filter(t,r){return new si(async i=>{for await(const s of t)r(s)&&i.emitOne(s)})}filter(t){return si.filter(this,t)}static coalesce(t){return si.filter(t,r=>!!r)}coalesce(){return si.coalesce(this)}static async toPromise(t){const r=[];for await(const i of t)r.push(i);return r}toPromise(){return si.toPromise(this)}h(t){this.a===0&&(this.b.push(t),this.g.fire())}j(t){this.a===0&&(this.b=this.b.concat(t),this.g.fire())}k(){this.a===0&&(this.a=1,this.g.fire())}l(t){this.a===0&&(this.a=2,this.d=t,this.g.fire())}},vm=class{constructor(e){this.a=new vn,this.b=new _c(i=>{if(t){i.reject(t);return}return r&&i.emitMany(r),this.d=s=>i.reject(s),this.f=s=>i.emitOne(s),this.a.p},e);let t,r;this.f=i=>{r||(r=[]),r.push(i)},this.d=i=>{t||(t=i)}}get asyncIterable(){return this.b}resolve(){this.a.complete()}reject(e){this.d(e),this.a.complete()}emitOne(e){this.f(e)}};function VI(e,t){return new qI(e,t)}var qI=class{constructor(e,t){this.e=e,this.f=t,this.a={flowing:!1,ended:!1,destroyed:!1},this.b={data:[],error:[]},this.c={data:[],error:[],end:[]},this.d=[]}pause(){this.a.destroyed||(this.a.flowing=!1)}resume(){this.a.destroyed||this.a.flowing||(this.a.flowing=!0,this.j(),this.k(),this.l())}write(e){if(!this.a.destroyed){if(this.a.flowing)this.g(e);else if(this.b.data.push(e),typeof this.f?.highWaterMark=="number"&&this.b.data.length>this.f.highWaterMark)return new Promise(t=>this.d.push(t))}}error(e){this.a.destroyed||(this.a.flowing?this.h(e):this.b.error.push(e))}end(e){this.a.destroyed||(typeof e<"u"&&this.write(e),this.a.flowing?(this.i(),this.destroy()):this.a.ended=!0)}g(e){this.c.data.slice(0).forEach(t=>t(e))}h(e){this.c.error.length===0?It(e):this.c.error.slice(0).forEach(t=>t(e))}i(){this.c.end.slice(0).forEach(e=>e())}on(e,t){if(!this.a.destroyed)switch(e){case"data":this.c.data.push(t),this.resume();break;case"end":this.c.end.push(t),this.a.flowing&&this.l()&&this.destroy();break;case"error":this.c.error.push(t),this.a.flowing&&this.k();break}}removeListener(e,t){if(this.a.destroyed)return;let r;switch(e){case"data":r=this.c.data;break;case"end":r=this.c.end;break;case"error":r=this.c.error;break}if(r){const i=r.indexOf(t);i>=0&&r.splice(i,1)}}j(){if(this.b.data.length>0){const e=this.e(this.b.data);this.g(e),this.b.data.length=0;const t=[...this.d];this.d.length=0,t.forEach(r=>r())}}k(){if(this.c.error.length>0){for(const e of this.b.error)this.h(e);this.b.error.length=0}}l(){return this.a.ended?(this.i(),this.c.end.length>0):!1}destroy(){this.a.destroyed||(this.a.destroyed=!0,this.a.ended=!0,this.b.data.length=0,this.b.error.length=0,this.c.data.length=0,this.c.error.length=0,this.c.end.length=0,this.d.length=0)}};function GI(e,t){return new Promise((r,i)=>{const s=[];JI(e,{onData:n=>{t&&s.push(n)},onError:n=>{t?i(n):r(void 0)},onEnd:()=>{r(t?t(s):void 0)}})})}function JI(e,t,r){e.on("error",i=>{r?.isCancellationRequested||t.onError(i)}),e.on("end",()=>{r?.isCancellationRequested||t.onEnd()}),e.on("data",i=>{r?.isCancellationRequested||t.onData(i)})}var Nh=typeof Buffer<"u",QI=new _r(()=>new Uint8Array(256)),wm,bm,re=class mi{static alloc(t){return Nh?new mi(Buffer.allocUnsafe(t)):new mi(new Uint8Array(t))}static wrap(t){return Nh&&!Buffer.isBuffer(t)&&(t=Buffer.from(t.buffer,t.byteOffset,t.byteLength)),new mi(t)}static fromString(t,r){return!(r?.dontUseNodeBuffer||!1)&&Nh?new mi(Buffer.from(t)):(wm||(wm=new TextEncoder),new mi(wm.encode(t)))}static fromByteArray(t){const r=mi.alloc(t.length);for(let i=0,s=t.length;i<s;i++)r.buffer[i]=t[i];return r}static concat(t,r){if(typeof r>"u"){r=0;for(let n=0,o=t.length;n<o;n++)r+=t[n].byteLength}const i=mi.alloc(r);let s=0;for(let n=0,o=t.length;n<o;n++){const a=t[n];i.set(a,s),s+=a.byteLength}return i}constructor(t){this.buffer=t,this.byteLength=this.buffer.byteLength}clone(){const t=mi.alloc(this.byteLength);return t.set(this),t}toString(){return Nh?this.buffer.toString():(bm||(bm=new TextDecoder),bm.decode(this.buffer))}slice(t,r){return new mi(this.buffer.subarray(t,r))}set(t,r){if(t instanceof mi)this.buffer.set(t.buffer,r);else if(t instanceof Uint8Array)this.buffer.set(t,r);else if(t instanceof ArrayBuffer)this.buffer.set(new Uint8Array(t),r);else if(ArrayBuffer.isView(t))this.buffer.set(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),r);else throw new Error("Unknown argument 'array'")}readUInt32BE(t){return Fh(this.buffer,t)}writeUInt32BE(t,r){Oh(this.buffer,t,r)}readUInt32LE(t){return KI(this.buffer,t)}writeUInt32LE(t,r){e2(this.buffer,t,r)}readUInt8(t){return t2(this.buffer,t)}writeUInt8(t,r){r2(this.buffer,t,r)}indexOf(t,r=0){return YI(this.buffer,t instanceof mi?t.buffer:t,r)}};function YI(e,t,r=0){const i=t.byteLength,s=e.byteLength;if(i===0)return 0;if(i===1)return e.indexOf(t[0]);if(i>s-r)return-1;const n=QI.value;n.fill(t.length);for(let l=0;l<t.length;l++)n[t[l]]=t.length-l-1;let o=r+t.length-1,a=o,c=-1;for(;o<s;)if(e[o]===t[a]){if(a===0){c=o;break}o--,a--}else o+=Math.max(t.length-a,n[e[o]]),a=t.length-1;return c}function XI(e,t){return e[t+0]<<0>>>0|e[t+1]<<8>>>0}function ZI(e,t,r){e[r+0]=t&255,t=t>>>8,e[r+1]=t&255}function Fh(e,t){return e[t]*2**24+e[t+1]*2**16+e[t+2]*2**8+e[t+3]}function Oh(e,t,r){e[r+3]=t,t=t>>>8,e[r+2]=t,t=t>>>8,e[r+1]=t,t=t>>>8,e[r]=t}function KI(e,t){return e[t+0]<<0>>>0|e[t+1]<<8>>>0|e[t+2]<<16>>>0|e[t+3]<<24>>>0}function e2(e,t,r){e[r+0]=t&255,t=t>>>8,e[r+1]=t&255,t=t>>>8,e[r+2]=t&255,t=t>>>8,e[r+3]=t&255}function t2(e,t){return e[t]}function r2(e,t,r){e[r]=t}function i2(e){return GI(e,t=>re.concat(t))}function W4(e){let t=0,r=0,i=0;const s=new Uint8Array(Math.floor(e.length/4*3)),n=a=>{switch(r){case 3:s[i++]=t|a,r=0;break;case 2:s[i++]=t|a>>>2,t=a<<6,r=3;break;case 1:s[i++]=t|a>>>4,t=a<<4,r=2;break;default:t=a<<2,r=1}};for(let a=0;a<e.length;a++){const c=e.charCodeAt(a);if(c>=65&&c<=90)n(c-65);else if(c>=97&&c<=122)n(c-97+26);else if(c>=48&&c<=57)n(c-48+52);else if(c===43||c===45)n(62);else if(c===47||c===95)n(63);else{if(c===61)break;throw new SyntaxError(`Unexpected base64 character ${e[a]}`)}}const o=i;for(;r>0;)n(0);return re.wrap(s).slice(0,o)}var s2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";function Mh({buffer:e},t=!0,r=!1){const i=r?n2:s2;let s="";const n=e.byteLength%3;let o=0;for(;o<e.byteLength-n;o+=3){const a=e[o+0],c=e[o+1],l=e[o+2];s+=i[a>>>2],s+=i[(a<<4|c>>>4)&63],s+=i[(c<<2|l>>>6)&63],s+=i[l&63]}if(n===1){const a=e[o+0];s+=i[a>>>2],s+=i[a<<4&63],t&&(s+="==")}else if(n===2){const a=e[o+0],c=e[o+1];s+=i[a>>>2],s+=i[(a<<4|c>>>4)&63],s+=i[c<<2&63],t&&(s+="=")}return s}var Wc={exports:{}};(function(){function t(n){const o=[];typeof n=="number"&&o.push("code/timeOrigin",n);function a(l){o.push(l,Date.now())}function c(){const l=[];for(let u=0;u<o.length;u+=2)l.push({name:o[u],startTime:o[u+1]});return l}return{mark:a,getMarks:c}}function r(){if(typeof performance=="object"&&typeof performance.mark=="function"&&!performance.nodeTiming)return typeof performance.timeOrigin!="number"&&!performance.timing?t():{mark(n){performance.mark(n)},getMarks(){let n=performance.timeOrigin;typeof n!="number"&&(n=performance.timing.navigationStart||performance.timing.redirectStart||performance.timing.fetchStart);const o=[{name:"code/timeOrigin",startTime:Math.round(n)}];for(const a of performance.getEntriesByType("mark"))o.push({name:a.name,startTime:Math.round(n+a.startTime)});return o}};if(typeof process=="object"){const n=performance?.timeOrigin;return t(n)}else return console.trace("perf-util loaded in UNKNOWN environment"),t()}function i(n){return n.MonacoPerformanceMarks||(n.MonacoPerformanceMarks=r()),n.MonacoPerformanceMarks}var s;typeof global=="object"?s=global:typeof self=="object"?s=self:s={},typeof Wc=="object"&&typeof Wc.exports=="object"?Wc.exports=i(s):(console.trace("perf-util defined in UNKNOWN context (neither requirejs or commonjs)"),s.perf=i(s))})();var Nt=Wc.exports.mark,o2=Wc.exports.getMarks;import*as Vc from"fs";var jh={};bC(jh,{Promises:()=>gt,RimRafMode:()=>io,SymlinkSupport:()=>Ii,configureFlushOnWrite:()=>xm,readdirSync:()=>p2,rimrafSync:()=>d2,whenDeleted:()=>m2,writeFileSync:()=>y2});import*as qe from"fs";import{tmpdir as a2}from"os";import{promisify as Uh}from"util";var c2=new Rc(1e4);function Hh(e){return q4(e,"NFC",c2)}var l2=new Rc(1e4);function V4(e){return q4(e,"NFD",l2)}var u2=/[^\u0000-\u0080]/;function q4(e,t,r){if(!e)return e;const i=r.get(e);if(i)return i;let s;return u2.test(e)?s=e.normalize(t):s=e,r.set(e,s),s}var io;(function(e){e[e.UNLINK=0]="UNLINK",e[e.MOVE=1]="MOVE"})(io||(io={}));async function G4(e,t=io.UNLINK,r){if(w4(e))throw new Error("rimraf - will refuse to recursively delete root");return t===io.UNLINK?ym(e):h2(e,r)}async function h2(e,t=fI(a2())){try{try{await qe.promises.rename(e,t)}catch(r){return r.code==="ENOENT"?void 0:ym(e)}ym(t).catch(r=>{})}catch(r){if(r.code!=="ENOENT")throw r}}async function ym(e){return qe.promises.rm(e,{recursive:!0,force:!0,maxRetries:3})}function d2(e){if(w4(e))throw new Error("rimraf - will refuse to recursively delete root");qe.rmSync(e,{recursive:!0,force:!0,maxRetries:3})}async function Bh(e,t){return J4(await(t?f2(e):qe.promises.readdir(e)))}async function f2(e){try{return await qe.promises.readdir(e,{withFileTypes:!0})}catch(i){console.warn("[node.js fs] readdir with filetypes failed with error: ",i)}const t=[],r=await Bh(e);for(const i of r){let s=!1,n=!1,o=!1;try{const a=await qe.promises.lstat(bt(e,i));s=a.isFile(),n=a.isDirectory(),o=a.isSymbolicLink()}catch(a){console.warn("[node.js fs] unexpected error from lstat after readdir: ",a)}t.push({name:i,isFile:()=>s,isDirectory:()=>n,isSymbolicLink:()=>o})}return t}function p2(e){return J4(qe.readdirSync(e))}function J4(e){return e.map(t=>typeof t=="string"?Kt?Hh(t):t:(t.name=Kt?Hh(t.name):t.name,t))}async function g2(e){const t=await Bh(e),r=[];for(const i of t)await Ii.existsDirectory(bt(e,i))&&r.push(i);return r}function m2(e,t=1e3){return new Promise(r=>{let i=!1;const s=setInterval(()=>{i||(i=!0,qe.access(e,n=>{i=!1,n&&(clearInterval(s),r(void 0))}))},t)})}var Ii;(function(e){async function t(s){let n;try{if(n=await qe.promises.lstat(s),!n.isSymbolicLink())return{stat:n}}catch{}try{return{stat:await qe.promises.stat(s),symbolicLink:n?.isSymbolicLink()?{dangling:!1}:void 0}}catch(o){if(o.code==="ENOENT"&&n)return{stat:n,symbolicLink:{dangling:!0}};if(at&&o.code==="EACCES")try{return{stat:await qe.promises.stat(await qe.promises.readlink(s)),symbolicLink:{dangling:!1}}}catch(a){if(a.code==="ENOENT"&&n)return{stat:n,symbolicLink:{dangling:!0}};throw a}throw o}}e.stat=t;async function r(s){try{const{stat:n,symbolicLink:o}=await e.stat(s);return n.isFile()&&o?.dangling!==!0}catch{}return!1}e.existsFile=r;async function i(s){try{const{stat:n,symbolicLink:o}=await e.stat(s);return n.isDirectory()&&o?.dangling!==!0}catch{}return!1}e.existsDirectory=i})(Ii||(Ii={}));var v2=new j4;function w2(e,t,r){return v2.queueFor(k.file(e),()=>{const i=Q4(r);return new Promise((s,n)=>b2(e,t,i,o=>o?n(o):s()))},gm)}var km=!0;function xm(e){km=e}function b2(e,t,r,i){if(!km)return qe.writeFile(e,t,{mode:r.mode,flag:r.flag},i);qe.open(e,r.flag,r.mode,(s,n)=>{if(s)return i(s);qe.writeFile(n,t,o=>{if(o)return qe.close(n,()=>i(o));qe.fdatasync(n,a=>(a&&(console.warn("[node.js fs] fdatasync is now disabled for this session because it failed: ",a),xm(!1)),qe.close(n,c=>i(c))))})})}function y2(e,t,r){const i=Q4(r);if(!km)return qe.writeFileSync(e,t,{mode:i.mode,flag:i.flag});const s=qe.openSync(e,i.flag,i.mode);try{qe.writeFileSync(s,t);try{qe.fdatasyncSync(s)}catch(n){console.warn("[node.js fs] fdatasyncSync is now disabled for this session because it failed: ",n),xm(!1)}}finally{qe.closeSync(s)}}function Q4(e){return e?{mode:typeof e.mode=="number"?e.mode:438,flag:typeof e.flag=="string"?e.flag:"w"}:{mode:438,flag:"w"}}async function k2(e,t,r=6e4){if(e!==t)try{at&&typeof r=="number"?await Y4(e,t,Date.now(),r):await qe.promises.rename(e,t)}catch(i){if(e.toLowerCase()!==t.toLowerCase()&&i.code==="EXDEV"||e.endsWith("."))await X4(e,t,{preserveSymlinks:!1}),await G4(e,io.MOVE);else throw i}}async function Y4(e,t,r,i,s=0){try{return await qe.promises.rename(e,t)}catch(n){if(n.code!=="EACCES"&&n.code!=="EPERM"&&n.code!=="EBUSY")throw n;if(Date.now()-r>=i)throw console.error(`[node.js fs] rename failed after ${s} retries with error: ${n}`),n;if(s===0){let o=!1;try{const{stat:a}=await Ii.stat(t);a.isFile()||(o=!0)}catch{}if(o)throw n}return await br(Math.min(100,s*10)),Y4(e,t,r,i,s+1)}}async function X4(e,t,r){return K4(e,t,{root:{source:e,target:t},options:r,handledSourcePaths:new Set})}var Z4=511;async function K4(e,t,r){if(r.handledSourcePaths.has(e))return;r.handledSourcePaths.add(e);const{stat:i,symbolicLink:s}=await Ii.stat(e);if(s){if(r.options.preserveSymlinks)try{return await S2(e,t,r)}catch{}if(s.dangling)return}return i.isDirectory()?x2(e,t,i.mode&Z4,r):E2(e,t,i.mode&Z4)}async function x2(e,t,r,i){await qe.promises.mkdir(t,{recursive:!0,mode:r});const s=await Bh(e);for(const n of s)await K4(bt(e,n),bt(t,n),i)}async function E2(e,t,r){await qe.promises.copyFile(e,t),await qe.promises.chmod(t,r)}async function S2(e,t,r){let i=await qe.promises.readlink(e);ro(i,r.root.source,!Ot)&&(i=bt(r.root.target,i.substr(r.root.source.length+1))),await qe.promises.symlink(i,t)}var gt=new class{get read(){return(e,t,r,i,s)=>new Promise((n,o)=>{qe.read(e,t,r,i,s,(a,c,l)=>a?o(a):n({bytesRead:c,buffer:l}))})}get write(){return(e,t,r,i,s)=>new Promise((n,o)=>{qe.write(e,t,r,i,s,(a,c,l)=>a?o(a):n({bytesWritten:c,buffer:l}))})}get fdatasync(){return Uh(qe.fdatasync)}get open(){return Uh(qe.open)}get close(){return Uh(qe.close)}get realpath(){return Uh(qe.realpath)}async exists(e){try{return await qe.promises.access(e),!0}catch{return!1}}get readdir(){return Bh}get readDirsInDir(){return g2}get writeFile(){return w2}get rm(){return G4}get rename(){return k2}get copy(){return X4}};async function Em(e,t){if(Ot)return e;const r=Sr(e);if(e===r)return e;const i=(St(e)||e).toLowerCase();try{if(t?.isCancellationRequested)return null;const n=(await gt.readdir(r)).filter(o=>o.toLowerCase()===i);if(n.length===1){const o=await Em(r,t);if(o)return bt(o,n[0])}else if(n.length>1){const o=n.indexOf(i);if(o>=0){const a=await Em(r,t);if(a)return bt(a,n[o])}}}catch{}return null}async function $2(e){try{return await gt.realpath(e)}catch{const r=e5(e);return await Vc.promises.access(r,Vc.constants.R_OK),r}}function C2(e){try{return Vc.realpathSync(e)}catch{const r=e5(e);return Vc.accessSync(r,Vc.constants.R_OK),r}}function e5(e){return pn(Ss(e),$t)}function t5(e){return(t,r,i)=>{let s=null,n=null;if(typeof i.value=="function"?(s="value",n=i.value):typeof i.get=="function"&&(s="get",n=i.get),!n)throw new Error("not supported");i[s]=e(n,r)}}function r5(e,t,r){let i=null,s=null;if(typeof r.value=="function"?(i="value",s=r.value,s.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof r.get=="function"&&(i="get",s=r.get),!s)throw new Error("not supported");const n=`$memoize$${t}`;r[i]=function(...o){return this.hasOwnProperty(n)||Object.defineProperty(this,n,{configurable:!1,enumerable:!1,writable:!1,value:s.apply(this,o)}),this[n]}}function zh(e,t,r){return t5((i,s)=>{const n=`$debounce$${s}`,o=`$debounce$result$${s}`;return function(...a){this[o]||(this[o]=r?r():void 0),clearTimeout(this[n]),t&&(this[o]=t(this[o],...a),a=[this[o]]),this[n]=setTimeout(()=>{i.apply(this,a),this[o]=r?r():void 0},e)}})}function P2(e,t,r){return t5((i,s)=>{const n=`$throttle$timer$${s}`,o=`$throttle$result$${s}`,a=`$throttle$lastRun$${s}`,c=`$throttle$pending$${s}`;return function(...l){if(this[o]||(this[o]=r?r():void 0),(this[a]===null||this[a]===void 0)&&(this[a]=-Number.MAX_VALUE),t&&(this[o]=t(this[o],...l)),this[c])return;const u=this[a]+e;u<=Date.now()?(this[a]=Date.now(),i.apply(this,[this[o]]),this[o]=r?r():void 0):(this[c]=!0,this[n]=setTimeout(()=>{this[c]=!1,this[a]=Date.now(),i.apply(this,[this[o]]),this[o]=r?r():void 0},u-Date.now()))}})}function I2(e){return JSON.stringify(e,D2)}function i5(e){let t=JSON.parse(e);return t=dr(t),t}function D2(e,t){return t instanceof RegExp?{$mid:2,source:t.source,flags:t.flags}:t}function dr(e,t=0){if(!e||t>200)return e;if(typeof e=="object"){switch(e.$mid){case 1:return k.revive(e);case 2:return new RegExp(e.source,e.flags);case 17:return new Date(e.source)}if(e instanceof re||e instanceof Uint8Array)return e;if(Array.isArray(e))for(let r=0;r<e.length;++r)e[r]=dr(e[r],t+1);else for(const r in e)Object.hasOwnProperty.call(e,r)&&(e[r]=dr(e[r],t+1))}return e}var s5;(function(e){e[e.Promise=100]="Promise",e[e.PromiseCancel=101]="PromiseCancel",e[e.EventListen=102]="EventListen",e[e.EventDispose=103]="EventDispose"})(s5||(s5={}));function n5(e){switch(e){case 100:return"req";case 101:return"cancel";case 102:return"subscribe";case 103:return"unsubscribe"}}var o5;(function(e){e[e.Initialize=200]="Initialize",e[e.PromiseSuccess=201]="PromiseSuccess",e[e.PromiseError=202]="PromiseError",e[e.PromiseErrorObj=203]="PromiseErrorObj",e[e.EventFire=204]="EventFire"})(o5||(o5={}));function a5(e){switch(e){case 200:return"init";case 201:return"reply:";case 202:case 203:return"replyErr:";case 204:return"event:"}}var ia;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Idle=1]="Idle"})(ia||(ia={}));function sa(e){let t=0;for(let r=0;;r+=7){const i=e.read(1);if(t|=(i.buffer[0]&127)<<r,!(i.buffer[0]&128))return t}}var A2=wn(0);function na(e,t){if(t===0){e.write(A2);return}let r=0;for(let s=t;s!==0;s=s>>>7)r++;const i=re.alloc(r);for(let s=0;t!==0;s++)i.buffer[s]=t&127,t=t>>>7,t>0&&(i.buffer[s]|=128);e.write(i)}var T2=class{constructor(e){this.b=e,this.a=0}read(e){const t=this.b.slice(this.a,this.a+e);return this.a+=t.byteLength,t}},R2=class{constructor(){this.a=[]}get buffer(){return re.concat(this.a)}write(e){this.a.push(e)}},yr;(function(e){e[e.Undefined=0]="Undefined",e[e.String=1]="String",e[e.Buffer=2]="Buffer",e[e.VSBuffer=3]="VSBuffer",e[e.Array=4]="Array",e[e.Object=5]="Object",e[e.Int=6]="Int"})(yr||(yr={}));function wn(e){const t=re.alloc(1);return t.writeUInt8(e,0),t}var so={Undefined:wn(yr.Undefined),String:wn(yr.String),Buffer:wn(yr.Buffer),VSBuffer:wn(yr.VSBuffer),Array:wn(yr.Array),Object:wn(yr.Object),Uint:wn(yr.Int)},L2=typeof Buffer<"u";function Sm(e,t){if(typeof t>"u")e.write(so.Undefined);else if(typeof t=="string"){const r=re.fromString(t);e.write(so.String),na(e,r.byteLength),e.write(r)}else if(L2&&Buffer.isBuffer(t)){const r=re.wrap(t);e.write(so.Buffer),na(e,r.byteLength),e.write(r)}else if(t instanceof re)e.write(so.VSBuffer),na(e,t.byteLength),e.write(t);else if(Array.isArray(t)){e.write(so.Array),na(e,t.length);for(const r of t)Sm(e,r)}else if(typeof t=="number"&&(t|0)===t)e.write(so.Uint),na(e,t);else{const r=re.fromString(JSON.stringify(t));e.write(so.Object),na(e,r.byteLength),e.write(r)}}function $m(e){switch(e.read(1).readUInt8(0)){case yr.Undefined:return;case yr.String:return e.read(sa(e)).toString();case yr.Buffer:return e.read(sa(e)).buffer;case yr.VSBuffer:return e.read(sa(e));case yr.Array:{const r=sa(e),i=[];for(let s=0;s<r;s++)i.push($m(e));return i}case yr.Object:return JSON.parse(e.read(sa(e)).toString());case yr.Int:return sa(e)}}var c5;(function(e){e[e.LocalSide=0]="LocalSide",e[e.OtherSide=1]="OtherSide"})(c5||(c5={}));var l5=class{constructor(e,t=null){this.l=e,this.a=!1,this.b=ia.Uninitialized,this.d=new Set,this.f=new Map,this.g=0,this.k=new T,this.onDidInitialize=this.k.event,this.h=this.l.onMessage(r=>this.s(r)),this.j=t}getChannel(e){const t=this;return{call(r,i,s){return t.a?Promise.reject(new Er):t.m(e,r,i,s)},listen(r,i){return t.a?Qe.None:t.o(e,r,i)}}}m(e,t,r,i=Ke.None){const s=this.g++,o={id:s,type:100,channelName:e,name:t,arg:r};if(i.isCancellationRequested)return Promise.reject(new Er);let a;return new Promise((l,u)=>{if(i.isCancellationRequested)return u(new Er);const h=()=>{const v=x=>{switch(x.type){case 201:this.f.delete(s),l(x.data);break;case 202:{this.f.delete(s);const $=new Error(x.data.message);$.stack=Array.isArray(x.data.stack)?x.data.stack.join(`
`):x.data.stack,$.name=x.data.name,u($);break}case 203:this.f.delete(s),u(x.data);break}};this.f.set(s,v),this.p(o)};let d=null;this.b===ia.Idle?h():(d=$s(v=>this.u()),d.then(()=>{d=null,h()}));const f=()=>{d?(d.cancel(),d=null):this.p({id:s,type:101}),u(new Er)},g=i.onCancellationRequested(f);a=Kg(me(f),g),this.d.add(a)}).finally(()=>{a.dispose(),this.d.delete(a)})}o(e,t,r){const i=this.g++,n={id:i,type:102,channelName:e,name:t,arg:r};let o=null;const a=new T({onWillAddFirstListener:()=>{o=$s(l=>this.u()),o.then(()=>{o=null,this.d.add(a),this.p(n)})},onDidRemoveLastListener:()=>{o?(o.cancel(),o=null):(this.d.delete(a),this.p({id:i,type:103}))}}),c=l=>a.fire(l.data);return this.f.set(i,c),a.event}p(e){switch(e.type){case 100:case 102:{const t=this.q([e.type,e.id,e.channelName,e.name],e.arg);this.j?.logOutgoing(t,e.id,0,`${n5(e.type)}: ${e.channelName}.${e.name}`,e.arg);return}case 101:case 103:{const t=this.q([e.type,e.id]);this.j?.logOutgoing(t,e.id,0,n5(e.type));return}}}q(e,t=void 0){const r=new R2;return Sm(r,e),Sm(r,t),this.r(r.buffer)}r(e){try{return this.l.send(e),e.byteLength}catch{return 0}}s(e){const t=new T2(e),r=$m(t),i=$m(t),s=r[0];switch(s){case 200:return this.j?.logIncoming(e.byteLength,0,0,a5(s)),this.t({type:r[0]});case 201:case 202:case 204:case 203:return this.j?.logIncoming(e.byteLength,r[1],0,a5(s),i),this.t({type:r[0],id:r[1],data:i})}}t(e){if(e.type===200){this.b=ia.Idle,this.k.fire();return}this.f.get(e.id)?.(e)}get onDidInitializePromise(){return Qe.toPromise(this.onDidInitialize)}u(){return this.b===ia.Idle?Promise.resolve():this.onDidInitializePromise}dispose(){this.a=!0,this.h&&(this.h.dispose(),this.h=null),Si(this.d.values()),this.d.clear()}};__decorate([r5],l5.prototype,"onDidInitializePromise",null);function N2(e){let t=!1;return{call(r,i,s){return t?e.call(r,i,s):br(0).then(()=>t=!0).then(()=>e.call(r,i,s))},listen(r,i){if(t)return e.listen(r,i);const s=new nP;return br(0).then(()=>t=!0).then(()=>s.input=e.listen(r,i)),s.event}}}var Cm;(function(e){function t(n,o,a){const c=n,l=a&&a.disableMarshalling,u=new Map;for(const h in c)i(h)&&u.set(h,Qe.buffer(c[h],!0,void 0,o));return new class{listen(h,d,f){const g=u.get(d);if(g)return g;const v=c[d];if(typeof v=="function"){if(s(d))return v.call(c,f);if(i(d))return u.set(d,Qe.buffer(c[d],!0,void 0,o)),u.get(d)}throw new xi(`Event not found: ${d}`)}call(h,d,f){const g=c[d];if(typeof g=="function"){if(!l&&Array.isArray(f))for(let x=0;x<f.length;x++)f[x]=dr(f[x]);let v=g.apply(c,f);return v instanceof Promise||(v=Promise.resolve(v)),v}throw new xi(`Method not found: ${d}`)}}}e.fromService=t;function r(n,o){const a=o&&o.disableMarshalling;return new Proxy({},{get(c,l){if(typeof l=="string")return o?.properties?.has(l)?o.properties.get(l):s(l)?function(u){return n.listen(l,u)}:i(l)?n.listen(l):async function(...u){let h;o&&!Lt(o.context)?h=[o.context,...u]:h=u;const d=await n.call(l,h);return a?d:dr(d)};throw new xi(`Property not found: ${String(l)}`)}})}e.toService=r;function i(n){return n[0]==="o"&&n[1]==="n"&&s4(n.charCodeAt(2))}function s(n){return/^onDynamic/.test(n)&&s4(n.charCodeAt(9))}})(Cm||(Cm={}));var u5;(function(e){e.Created="created",e.Read="read",e.Write="write",e.Open="open",e.Error="error",e.Close="close",e.BrowserWebSocketBlobReceived="browserWebSocketBlobReceived",e.NodeEndReceived="nodeEndReceived",e.NodeEndSent="nodeEndSent",e.NodeDrainBegin="nodeDrainBegin",e.NodeDrainEnd="nodeDrainEnd",e.zlibInflateError="zlibInflateError",e.zlibInflateData="zlibInflateData",e.zlibInflateInitialWrite="zlibInflateInitialWrite",e.zlibInflateInitialFlushFired="zlibInflateInitialFlushFired",e.zlibInflateWrite="zlibInflateWrite",e.zlibInflateFlushFired="zlibInflateFlushFired",e.zlibDeflateError="zlibDeflateError",e.zlibDeflateData="zlibDeflateData",e.zlibDeflateWrite="zlibDeflateWrite",e.zlibDeflateFlushFired="zlibDeflateFlushFired",e.WebSocketNodeSocketWrite="webSocketNodeSocketWrite",e.WebSocketNodeSocketPeekedHeader="webSocketNodeSocketPeekedHeader",e.WebSocketNodeSocketReadHeader="webSocketNodeSocketReadHeader",e.WebSocketNodeSocketReadData="webSocketNodeSocketReadData",e.WebSocketNodeSocketUnmaskedData="webSocketNodeSocketUnmaskedData",e.WebSocketNodeSocketDrainBegin="webSocketNodeSocketDrainBegin",e.WebSocketNodeSocketDrainEnd="webSocketNodeSocketDrainEnd",e.ProtocolHeaderRead="protocolHeaderRead",e.ProtocolMessageRead="protocolMessageRead",e.ProtocolHeaderWrite="protocolHeaderWrite",e.ProtocolMessageWrite="protocolMessageWrite",e.ProtocolWrite="protocolWrite"})(u5||(u5={}));var _h;(function(e){e.enableDiagnostics=!1,e.records=[];const t=new WeakMap;let r=0;function i(n,o){if(!t.has(n)){const a=String(++r);t.set(n,a)}return t.get(n)}function s(n,o,a,c){if(!e.enableDiagnostics)return;const l=i(n,o);if(c instanceof re||c instanceof Uint8Array||c instanceof ArrayBuffer||ArrayBuffer.isView(c)){const u=re.alloc(c.byteLength);u.set(c),e.records.push({timestamp:Date.now(),id:l,label:o,type:a,buff:u})}else e.records.push({timestamp:Date.now(),id:l,label:o,type:a,data:c})}e.traceSocketEvent=s})(_h||(_h={}));var h5;(function(e){e[e.NodeSocketCloseEvent=0]="NodeSocketCloseEvent",e[e.WebSocketCloseEvent=1]="WebSocketCloseEvent"})(h5||(h5={}));var Pm=null;function bn(){return Pm||(Pm=re.alloc(0)),Pm}var d5=class{get byteLength(){return this.b}constructor(){this.a=[],this.b=0}acceptChunk(e){this.a.push(e),this.b+=e.byteLength}read(e){return this.c(e,!0)}peek(e){return this.c(e,!1)}c(e,t){if(e===0)return bn();if(e>this.b)throw new Error("Cannot read so many bytes!");if(this.a[0].byteLength===e){const n=this.a[0];return t&&(this.a.shift(),this.b-=e),n}if(this.a[0].byteLength>e){const n=this.a[0].slice(0,e);return t&&(this.a[0]=this.a[0].slice(e),this.b-=e),n}const r=re.alloc(e);let i=0,s=0;for(;e>0;){const n=this.a[s];if(n.byteLength>e){const o=n.slice(0,e);r.set(o,i),i+=e,t&&(this.a[s]=n.slice(e),this.b-=e),e-=e}else r.set(n,i),i+=n.byteLength,t?(this.a.shift(),this.b-=n.byteLength):s++,e-=n.byteLength}return r}},f5;(function(e){e[e.None=0]="None",e[e.Regular=1]="Regular",e[e.Control=2]="Control",e[e.Ack=3]="Ack",e[e.Disconnect=5]="Disconnect",e[e.ReplayRequest=6]="ReplayRequest",e[e.Pause=7]="Pause",e[e.Resume=8]="Resume",e[e.KeepAlive=9]="KeepAlive"})(f5||(f5={}));function p5(e){switch(e){case 0:return"None";case 1:return"Regular";case 2:return"Control";case 3:return"Ack";case 5:return"Disconnect";case 6:return"ReplayRequest";case 7:return"PauseWriting";case 8:return"ResumeWriting";case 9:return"KeepAlive"}}var g5;(function(e){e[e.HeaderLength=13]="HeaderLength",e[e.AcknowledgeTime=2e3]="AcknowledgeTime",e[e.TimeoutTime=2e4]="TimeoutTime",e[e.ReconnectionGraceTime=108e5]="ReconnectionGraceTime",e[e.ReconnectionShortGraceTime=3e5]="ReconnectionShortGraceTime",e[e.KeepAliveSendTime=5e3]="KeepAliveSendTime"})(g5||(g5={}));var ts=class{constructor(e,t,r,i){this.type=e,this.id=t,this.ack=r,this.data=i,this.writtenTime=0}get size(){return this.data.byteLength}},m5=class extends ae{constructor(e){super(),this.f=this.B(new T),this.onMessage=this.f.event,this.g={readHead:!0,readLen:13,messageType:0,id:0,ack:0},this.a=e,this.b=!1,this.c=new d5,this.B(this.a.onData(t=>this.acceptChunk(t))),this.lastReadTime=Date.now()}acceptChunk(e){if(!(!e||e.byteLength===0))for(this.lastReadTime=Date.now(),this.c.acceptChunk(e);this.c.byteLength>=this.g.readLen;){const t=this.c.read(this.g.readLen);if(this.g.readHead)this.g.readHead=!1,this.g.readLen=t.readUInt32BE(9),this.g.messageType=t.readUInt8(0),this.g.id=t.readUInt32BE(1),this.g.ack=t.readUInt32BE(5),this.a.traceSocketEvent("protocolHeaderRead",{messageType:p5(this.g.messageType),id:this.g.id,ack:this.g.ack,messageSize:this.g.readLen});else{const r=this.g.messageType,i=this.g.id,s=this.g.ack;if(this.g.readHead=!0,this.g.readLen=13,this.g.messageType=0,this.g.id=0,this.g.ack=0,this.a.traceSocketEvent("protocolMessageRead",t),this.f.fire(new ts(r,i,s,t)),this.b)break}}}readEntireBuffer(){return this.c.read(this.c.byteLength)}dispose(){this.b=!0,super.dispose()}},v5=class{constructor(e){this.k=null,this.a=!1,this.b=!1,this.c=e,this.d=[],this.f=0,this.lastWriteTime=0}dispose(){try{this.flush()}catch{}this.a=!0}drain(){return this.flush(),this.c.drain()}flush(){this.m()}pause(){this.b=!0}resume(){this.b=!1,this.l()}write(e){if(this.a)return;e.writtenTime=Date.now(),this.lastWriteTime=Date.now();const t=re.alloc(13);t.writeUInt8(e.type,0),t.writeUInt32BE(e.id,1),t.writeUInt32BE(e.ack,5),t.writeUInt32BE(e.data.byteLength,9),this.c.traceSocketEvent("protocolHeaderWrite",{messageType:p5(e.type),id:e.id,ack:e.ack,messageSize:e.data.byteLength}),this.c.traceSocketEvent("protocolMessageWrite",e.data),this.j(t,e.data)}g(e,t){const r=this.f===0;return this.d.push(e,t),this.f+=e.byteLength+t.byteLength,r}h(){const e=re.concat(this.d,this.f);return this.d.length=0,this.f=0,e}j(e,t){this.g(e,t)&&this.l()}l(){this.k||(this.k=setTimeout(()=>{this.k=null,this.m()}))}m(){if(this.f===0||this.b)return;const e=this.h();this.c.traceSocketEvent("protocolWrite",{byteLength:e.byteLength}),this.c.write(e)}},no=class{constructor(){this.b=!1,this.c=!1,this.d=[],this.a=new T({onWillAddFirstListener:()=>{this.b=!0,queueMicrotask(()=>this.f())},onDidRemoveLastListener:()=>{this.b=!1}}),this.event=this.a.event}f(){if(!this.c){for(this.c=!0;this.b&&this.d.length>0;)this.a.fire(this.d.shift());this.c=!1}}fire(e){this.b?this.d.length>0?this.d.push(e):this.a.fire(e):this.d.push(e)}flushBuffer(){this.d=[]}},F2=class{constructor(e){this.data=e,this.next=null}},O2=class{constructor(){this.a=null,this.b=null}length(){let e=0,t=this.a;for(;t;)t=t.next,e++;return e}peek(){return this.a?this.a.data:null}toArray(){const e=[];let t=0,r=this.a;for(;r;)e[t++]=r.data,r=r.next;return e}pop(){if(this.a){if(this.a===this.b){this.a=null,this.b=null;return}this.a=this.a.next}}push(e){const t=new F2(e);if(!this.a){this.a=t,this.b=t;return}this.b.next=t,this.b=t}},M2=class gs{static{this.a=10}static{this.b=null}static getInstance(){return gs.b||(gs.b=new gs),gs.b}constructor(){this.c=[];const t=Date.now();for(let r=0;r<gs.a;r++)this.c[r]=t-1e3*r;setInterval(()=>{for(let r=gs.a;r>=1;r--)this.c[r]=this.c[r-1];this.c[0]=Date.now()},1e3)}d(){const t=Date.now(),r=(1+gs.a)*1e3;let i=0;for(let s=0;s<gs.a;s++)t-this.c[s]<=r&&i++;return 1-i/gs.a}hasHighLoad(){return this.d()>=.5}},Im=class{get unacknowledgedCount(){return this.d-this.f}constructor(e){this.v=new no,this.onControlMessage=this.v.event,this.w=new no,this.onMessage=this.w.event,this.x=new no,this.onDidDispose=this.x.event,this.y=new no,this.onSocketClose=this.y.event,this.z=new no,this.onSocketTimeout=this.z.event,this.t=e.loadEstimator??M2.getInstance(),this.u=e.sendKeepAlive??!0,this.a=!1,this.c=new O2,this.d=0,this.f=0,this.g=null,this.h=0,this.j=0,this.k=0,this.l=null,this.n=0,this.o=Date.now(),this.s=new be,this.p=e.socket,this.q=this.s.add(new v5(this.p)),this.r=this.s.add(new m5(this.p)),this.s.add(this.r.onMessage(t=>this.A(t))),this.s.add(this.p.onClose(t=>this.y.fire(t))),e.initialChunk&&this.r.acceptChunk(e.initialChunk),this.u?this.m=setInterval(()=>{this.E()},5e3):this.m=null}dispose(){this.g&&(clearTimeout(this.g),this.g=null),this.l&&(clearTimeout(this.l),this.l=null),this.m&&(clearInterval(this.m),this.m=null),this.s.dispose()}drain(){return this.q.drain()}sendDisconnect(){if(!this.b){this.b=!0;const e=new ts(5,0,0,bn());this.q.write(e),this.q.flush()}}sendPause(){const e=new ts(7,0,0,bn());this.q.write(e)}sendResume(){const e=new ts(8,0,0,bn());this.q.write(e)}pauseSocketWriting(){this.q.pause()}getSocket(){return this.p}getMillisSinceLastIncomingData(){return Date.now()-this.r.lastReadTime}beginAcceptReconnection(e,t){this.a=!0,this.s.dispose(),this.s=new be,this.v.flushBuffer(),this.y.flushBuffer(),this.z.flushBuffer(),this.p.dispose(),this.n=0,this.o=Date.now(),this.p=e,this.q=this.s.add(new v5(this.p)),this.r=this.s.add(new m5(this.p)),this.s.add(this.r.onMessage(r=>this.A(r))),this.s.add(this.p.onClose(r=>this.y.fire(r))),this.r.acceptChunk(t)}endAcceptReconnection(){this.a=!1,this.j=this.h;const e=new ts(3,0,this.j,bn());this.q.write(e);const t=this.c.toArray();for(let r=0,i=t.length;r<i;r++)this.q.write(t[r]);this.C()}acceptDisconnect(){this.x.fire()}A(e){if(e.ack>this.f){this.f=e.ack;do{const t=this.c.peek();if(t&&t.id<=e.ack)this.c.pop();else break}while(!0)}switch(e.type){case 0:break;case 1:{if(e.id>this.h)if(e.id!==this.h+1){const t=Date.now();t-this.n>1e4&&(this.n=t,this.q.write(new ts(6,0,0,bn())))}else this.h=e.id,this.k=Date.now(),this.B(),this.w.fire(e.data);break}case 2:{this.v.fire(e.data);break}case 3:break;case 5:{this.x.fire();break}case 6:{const t=this.c.toArray();for(let r=0,i=t.length;r<i;r++)this.q.write(t[r]);this.C();break}case 7:{this.q.pause();break}case 8:{this.q.resume();break}case 9:break}}readEntireBuffer(){return this.r.readEntireBuffer()}flush(){this.q.flush()}send(e){const t=++this.d;this.j=this.h;const r=new ts(1,t,this.j,e);this.c.push(r),this.a||(this.q.write(r),this.C())}sendControl(e){const t=new ts(2,0,0,e);this.q.write(t)}B(){if(this.h<=this.j||this.l)return;const e=Date.now()-this.k;if(e>=2e3){this.D();return}this.l=setTimeout(()=>{this.l=null,this.B()},2e3-e+5)}C(){if(this.d<=this.f||this.g||this.a)return;const e=this.c.peek(),t=Date.now()-e.writtenTime,r=Date.now()-this.r.lastReadTime,i=Date.now()-this.o;if(t>=2e4&&r>=2e4&&i>=2e4&&!this.t.hasHighLoad()){this.o=Date.now(),this.z.fire({unacknowledgedMsgCount:this.c.length(),timeSinceOldestUnacknowledgedMsg:t,timeSinceLastReceivedSomeData:r});return}const s=Math.max(2e4-t,2e4-r,2e4-i,500);this.g=setTimeout(()=>{this.g=null,this.C()},s)}D(){if(this.h<=this.j)return;this.j=this.h;const e=new ts(3,0,this.j,bn());this.q.write(e)}E(){this.j=this.h;const e=new ts(9,0,this.j,bn());this.q.write(e)}};import"crypto";import"net";import{tmpdir as j2}from"os";import{createDeflateRaw as U2,createInflateRaw as H2}from"zlib";var ir=function(){if(typeof crypto=="object"&&typeof crypto.randomUUID=="function")return crypto.randomUUID.bind(crypto);let e;typeof crypto=="object"&&typeof crypto.getRandomValues=="function"?e=crypto.getRandomValues.bind(crypto):e=function(i){for(let s=0;s<i.length;s++)i[s]=Math.floor(Math.random()*256);return i};const t=new Uint8Array(16),r=[];for(let i=0;i<256;i++)r.push(i.toString(16).padStart(2,"0"));return function(){e(t),t[6]=t[6]&15|64,t[8]=t[8]&63|128;let s=0,n="";return n+=r[t[s++]],n+=r[t[s++]],n+=r[t[s++]],n+=r[t[s++]],n+="-",n+=r[t[s++]],n+=r[t[s++]],n+="-",n+=r[t[s++]],n+=r[t[s++]],n+="-",n+=r[t[s++]],n+=r[t[s++]],n+="-",n+=r[t[s++]],n+=r[t[s++]],n+=r[t[s++]],n+=r[t[s++]],n+=r[t[s++]],n+=r[t[s++]],n}}(),B2=3e4,qc=class{traceSocketEvent(e,t){_h.traceSocketEvent(this.socket,this.debugLabel,e,t)}constructor(e,t=""){this.f=!0,this.debugLabel=t,this.socket=e,this.traceSocketEvent("created",{type:"NodeSocket"}),this.a=i=>{if(this.traceSocketEvent("error",{code:i?.code,message:i?.message}),i){if(i.code==="EPIPE")return;It(i)}},this.socket.on("error",this.a);let r;this.b=i=>{this.traceSocketEvent("close",{hadError:i}),this.f=!1,r&&clearTimeout(r)},this.socket.on("close",this.b),this.d=()=>{this.traceSocketEvent("nodeEndReceived"),this.f=!1,r=setTimeout(()=>e.destroy(),B2)},this.socket.on("end",this.d)}dispose(){this.socket.off("error",this.a),this.socket.off("close",this.b),this.socket.off("end",this.d),this.socket.destroy()}onData(e){const t=r=>{this.traceSocketEvent("read",r),e(re.wrap(r))};return this.socket.on("data",t),{dispose:()=>this.socket.off("data",t)}}onClose(e){const t=r=>{e({type:0,hadError:r,error:void 0})};return this.socket.on("close",t),{dispose:()=>this.socket.off("close",t)}}onEnd(e){const t=()=>{e()};return this.socket.on("end",t),{dispose:()=>this.socket.off("end",t)}}write(e){if(!(this.socket.destroyed||!this.f))try{this.traceSocketEvent("write",e),this.socket.write(e.buffer,t=>{if(t){if(t.code==="EPIPE")return;It(t)}})}catch(t){if(t.code==="EPIPE")return;It(t)}}end(){this.traceSocketEvent("nodeEndSent"),this.socket.end()}drain(){return this.traceSocketEvent("nodeDrainBegin"),new Promise((e,t)=>{if(this.socket.bufferSize===0){this.traceSocketEvent("nodeDrainEnd"),e();return}const r=()=>{this.socket.off("close",r),this.socket.off("end",r),this.socket.off("error",r),this.socket.off("timeout",r),this.socket.off("drain",r),this.traceSocketEvent("nodeDrainEnd"),e()};this.socket.on("close",r),this.socket.on("end",r),this.socket.on("error",r),this.socket.on("timeout",r),this.socket.on("drain",r)})}},w5;(function(e){e[e.MinHeaderByteSize=2]="MinHeaderByteSize",e[e.MaxWebSocketMessageLength=262144]="MaxWebSocketMessageLength"})(w5||(w5={}));var b5;(function(e){e[e.PeekHeader=1]="PeekHeader",e[e.ReadHeader=2]="ReadHeader",e[e.ReadBody=3]="ReadBody",e[e.Fin=4]="Fin"})(b5||(b5={}));var z2=class extends ae{get permessageDeflate(){return this.a.permessageDeflate}get recordedInflateBytes(){return this.a.recordedInflateBytes}traceSocketEvent(e,t){this.socket.traceSocketEvent(e,t)}constructor(e,t,r,i){super(),this.f=this.B(new T),this.g=this.B(new T),this.h=!1,this.j={state:1,readLen:2,fin:0,compressed:!1,firstFrameOfMessage:!0,mask:0,opcode:0},this.socket=e,this.traceSocketEvent("created",{type:"WebSocketNodeSocket",permessageDeflate:t,inflateBytesLength:r?.byteLength||0,recordInflateBytes:i}),this.a=this.B(new _2(this,t,r,i,this.f,(s,n)=>this.m(s,n))),this.B(this.a.onError(s=>{console.error(s),It(s),this.g.fire({type:0,hadError:!0,error:s})})),this.b=new d5,this.B(this.socket.onData(s=>this.n(s))),this.B(this.socket.onClose(async s=>{this.a.isProcessingReadQueue()&&await Qe.toPromise(this.a.onDidFinishProcessingReadQueue),this.g.fire(s)}))}dispose(){this.a.isProcessingWriteQueue()?this.B(this.a.onDidFinishProcessingWriteQueue(()=>{this.dispose()})):(this.socket.dispose(),super.dispose())}onData(e){return this.f.event(e)}onClose(e){return this.g.event(e)}onEnd(e){return this.socket.onEnd(e)}write(e){let t=0;for(;t<e.byteLength;)this.a.writeMessage(e.slice(t,Math.min(t+262144,e.byteLength)),{compressed:!0,opcode:2}),t+=262144}m(e,{compressed:t,opcode:r}){if(this.h)return;this.traceSocketEvent("webSocketNodeSocketWrite",e);let i=2;e.byteLength<126?i+=0:e.byteLength<2**16?i+=2:i+=8;const s=re.alloc(i),n=t?64:0,o=r&15;if(s.writeUInt8(128|n|o,0),e.byteLength<126)s.writeUInt8(e.byteLength,1);else if(e.byteLength<2**16){s.writeUInt8(126,1);let a=1;s.writeUInt8(e.byteLength>>>8&255,++a),s.writeUInt8(e.byteLength>>>0&255,++a)}else{s.writeUInt8(127,1);let a=1;s.writeUInt8(0,++a),s.writeUInt8(0,++a),s.writeUInt8(0,++a),s.writeUInt8(0,++a),s.writeUInt8(e.byteLength>>>24&255,++a),s.writeUInt8(e.byteLength>>>16&255,++a),s.writeUInt8(e.byteLength>>>8&255,++a),s.writeUInt8(e.byteLength>>>0&255,++a)}this.socket.write(re.concat([s,e]))}end(){this.h=!0,this.socket.end()}n(e){if(e.byteLength!==0){for(this.b.acceptChunk(e);this.b.byteLength>=this.j.readLen;)if(this.j.state===1){const t=this.b.peek(this.j.readLen),r=t.readUInt8(0),i=(r&128)>>>7,s=(r&64)>>>6,n=r&15,o=t.readUInt8(1),a=(o&128)>>>7,c=o&127;this.j.state=2,this.j.readLen=2+(a?4:0)+(c===126?2:0)+(c===127?8:0),this.j.fin=i,this.j.firstFrameOfMessage&&(this.j.compressed=!!s),this.j.firstFrameOfMessage=!!i,this.j.mask=0,this.j.opcode=n,this.traceSocketEvent("webSocketNodeSocketPeekedHeader",{headerSize:this.j.readLen,compressed:this.j.compressed,fin:this.j.fin,opcode:this.j.opcode})}else if(this.j.state===2){const t=this.b.read(this.j.readLen),r=t.readUInt8(1),i=(r&128)>>>7;let s=r&127,n=1;s===126?s=t.readUInt8(++n)*2**8+t.readUInt8(++n):s===127&&(s=t.readUInt8(++n)*0+t.readUInt8(++n)*0+t.readUInt8(++n)*0+t.readUInt8(++n)*0+t.readUInt8(++n)*2**24+t.readUInt8(++n)*2**16+t.readUInt8(++n)*2**8+t.readUInt8(++n));let o=0;i&&(o=t.readUInt8(++n)*2**24+t.readUInt8(++n)*2**16+t.readUInt8(++n)*2**8+t.readUInt8(++n)),this.j.state=3,this.j.readLen=s,this.j.mask=o,this.traceSocketEvent("webSocketNodeSocketPeekedHeader",{bodySize:this.j.readLen,compressed:this.j.compressed,fin:this.j.fin,mask:this.j.mask,opcode:this.j.opcode})}else if(this.j.state===3){const t=this.b.read(this.j.readLen);this.traceSocketEvent("webSocketNodeSocketReadData",t),q2(t,this.j.mask),this.traceSocketEvent("webSocketNodeSocketUnmaskedData",t),this.j.state=1,this.j.readLen=2,this.j.mask=0,this.j.opcode<=2?this.a.acceptFrame(t,this.j.compressed,!!this.j.fin):this.j.opcode===9&&this.a.writeMessage(t,{compressed:!1,opcode:10})}}}async drain(){this.traceSocketEvent("webSocketNodeSocketDrainBegin"),this.a.isProcessingWriteQueue()&&await Qe.toPromise(this.a.onDidFinishProcessingWriteQueue),await this.socket.drain(),this.traceSocketEvent("webSocketNodeSocketDrainEnd")}},_2=class extends ae{get permessageDeflate(){return!!(this.b&&this.f)}get recordedInflateBytes(){return this.b?this.b.recordedInflateBytes:re.alloc(0)}constructor(e,t,r,i,s,n){super(),this.n=e,this.r=s,this.s=n,this.a=this.B(new T),this.onError=this.a.event,this.g=[],this.h=[],this.j=this.B(new T),this.onDidFinishProcessingReadQueue=this.j.event,this.m=this.B(new T),this.onDidFinishProcessingWriteQueue=this.m.event,this.t=!1,this.y=!1,t?(this.b=this.B(new W2(this.n,i,r,{windowBits:15})),this.f=this.B(new V2(this.n,{windowBits:15})),this.B(this.b.onError(o=>this.a.fire(o))),this.B(this.f.onError(o=>this.a.fire(o)))):(this.b=null,this.f=null)}writeMessage(e,t){this.g.push({data:e,options:t}),this.u()}async u(){if(!this.t){for(this.t=!0;this.g.length>0;){const{data:e,options:t}=this.g.shift();if(this.f&&t.compressed){const r=await this.w(this.f,e);this.s(r,t)}else this.s(e,{...t,compressed:!1})}this.t=!1,this.m.fire()}}isProcessingWriteQueue(){return this.t}w(e,t){return new Promise((r,i)=>{e.write(t),e.flush(s=>r(s))})}acceptFrame(e,t,r){this.h.push({data:e,isCompressed:t,isLastFrameOfMessage:r}),this.z()}async z(){if(!this.y){for(this.y=!0;this.h.length>0;){const e=this.h.shift();if(this.b&&e.isCompressed){const t=await this.C(this.b,e.data,e.isLastFrameOfMessage);this.r.fire(t)}else this.r.fire(e.data)}this.y=!1,this.j.fire()}}isProcessingReadQueue(){return this.y}C(e,t,r){return new Promise((i,s)=>{e.write(t),r&&e.write(re.fromByteArray([0,0,255,255])),e.flush(n=>i(n))})}},W2=class extends ae{get recordedInflateBytes(){return this.j?re.concat(this.f):re.alloc(0)}constructor(e,t,r,i){super(),this.h=e,this.j=t,this.a=this.B(new T),this.onError=this.a.event,this.f=[],this.g=[],this.b=H2(i),this.b.on("error",s=>{this.h.traceSocketEvent("zlibInflateError",{message:s?.message,code:s?.code}),this.a.fire(s)}),this.b.on("data",s=>{this.h.traceSocketEvent("zlibInflateData",s),this.g.push(re.wrap(s))}),r&&(this.h.traceSocketEvent("zlibInflateInitialWrite",r.buffer),this.b.write(r.buffer),this.b.flush(()=>{this.h.traceSocketEvent("zlibInflateInitialFlushFired"),this.g.length=0}))}write(e){this.j&&this.f.push(e.clone()),this.h.traceSocketEvent("zlibInflateWrite",e),this.b.write(e.buffer)}flush(e){this.b.flush(()=>{this.h.traceSocketEvent("zlibInflateFlushFired");const t=re.concat(this.g);this.g.length=0,e(t)})}},V2=class extends ae{constructor(e,t){super(),this.g=e,this.a=this.B(new T),this.onError=this.a.event,this.f=[],this.b=U2({windowBits:15}),this.b.on("error",r=>{this.g.traceSocketEvent("zlibDeflateError",{message:r?.message,code:r?.code}),this.a.fire(r)}),this.b.on("data",r=>{this.g.traceSocketEvent("zlibDeflateData",r),this.f.push(re.wrap(r))})}write(e){this.g.traceSocketEvent("zlibDeflateWrite",e.buffer),this.b.write(e.buffer)}flush(e){this.b.flush(2,()=>{this.g.traceSocketEvent("zlibDeflateFlushFired");let t=re.concat(this.f);this.f.length=0,t=t.slice(0,t.byteLength-4),e(t)})}};function q2(e,t){if(t===0)return;const r=e.byteLength>>>2;for(let c=0;c<r;c++){const l=e.readUInt32BE(c*4);e.writeUInt32BE(l^t,c*4)}const i=r*4,s=e.byteLength-i,n=t>>>24&255,o=t>>>16&255,a=t>>>8&255;s>=1&&e.writeUInt8(e.readUInt8(i)^n,i),s>=2&&e.writeUInt8(e.readUInt8(i+1)^o,i+1),s>=3&&e.writeUInt8(e.readUInt8(i+2)^a,i+2)}var y5=process.env.XDG_RUNTIME_DIR,G2={2:107,1:103};function J2(){const e=ir();if(process.platform==="win32")return`\\\\.\\pipe\\vscode-ipc-${e}-sock`;const t=process.platform!=="darwin"&&y5?y5:j2(),r=bt(t,`vscode-ipc-${e}.sock`);return Q2(r),r}function Q2(e){const t=G2[vP];typeof t=="number"&&e.length>=t&&console.warn(`WARNING: IPC handle "${e}" is longer than ${t} chars, try a shorter --user-data-dir`)}function ut(e){if(!e||typeof e!="object"||e instanceof RegExp)return e;const t=Array.isArray(e)?[]:{};return Object.entries(e).forEach(([r,i])=>{t[r]=i&&typeof i=="object"?ut(i):i}),t}function k5(e){if(!e||typeof e!="object")return e;const t=[e];for(;t.length>0;){const r=t.shift();Object.freeze(r);for(const i in r)if(x5.call(r,i)){const s=r[i];typeof s=="object"&&!Object.isFrozen(s)&&!tI(s)&&t.push(s)}}return e}var x5=Object.prototype.hasOwnProperty;function Wh(e,t){return Dm(e,t,new Set)}function Dm(e,t,r){if(Lt(e))return e;const i=t(e);if(typeof i<"u")return i;if(Array.isArray(e)){const s=[];for(const n of e)s.push(Dm(n,t,r));return s}if(Dt(e)){if(r.has(e))throw new Error("Cannot clone recursive data-structure");r.add(e);const s={};for(const n in e)x5.call(e,n)&&(s[n]=Dm(e[n],t,r));return r.delete(e),s}return e}function Ps(e,t,r=!0){return Dt(e)?(Dt(t)&&Object.keys(t).forEach(i=>{i in e?r&&(Dt(e[i])&&Dt(t[i])?Ps(e[i],t[i],r):e[i]=t[i]):e[i]=t[i]}),e):t}function Di(e,t){if(e===t)return!0;if(e==null||t===null||t===void 0||typeof e!=typeof t||typeof e!="object"||Array.isArray(e)!==Array.isArray(t))return!1;let r,i;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(r=0;r<e.length;r++)if(!Di(e[r],t[r]))return!1}else{const s=[];for(i in e)s.push(i);s.sort();const n=[];for(i in t)n.push(i);if(n.sort(),!Di(s,n))return!1;for(r=0;r<s.length;r++)if(!Di(e[s[r]],t[s[r]]))return!1}return!0}function Y2(e){const t=new Set;return JSON.stringify(e,(r,i)=>{if(Dt(i)||Array.isArray(i)){if(t.has(i))return"[Circular]";t.add(i)}return typeof i=="bigint"?`[BigInt ${i.toString()}]`:i})}function E5(e,t){const r=Object.create(null);for(const[i,s]of Object.entries(e))t(i,s)&&(r[i]=s);return r}var S5={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!0,independentColorPoolPerBracketType:!1}},$5="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function X2(e=""){let t="(-?\\d*\\.\\d\\w*)|([^";for(const r of $5)e.indexOf(r)>=0||(t+="\\"+r);return t+="\\s]+)",new RegExp(t,"g")}var Z2=X2();function C5(e){let t=Z2;if(e&&e instanceof RegExp)if(e.global)t=e;else{let r="g";e.ignoreCase&&(r+="i"),e.multiline&&(r+="m"),e.unicode&&(r+="u"),t=new RegExp(e.source,r)}return t.lastIndex=0,t}var P5=new Nc;P5.unshift({maxLen:1e3,windowSize:15,timeBudget:150});function I5(e,t,r,i,s){if(t=C5(t),s||(s=ci.first(P5)),r.length>s.maxLen){let l=e-s.maxLen/2;return l<0?l=0:i+=l,r=r.substring(l,e+s.maxLen/2),I5(e,t,r,i,s)}const n=Date.now(),o=e-1-i;let a=-1,c=null;for(let l=1;!(Date.now()-n>=s.timeBudget);l++){const u=o-s.windowSize*l;t.lastIndex=Math.max(0,u);const h=K2(t,r,o,a);if(!h&&c||(c=h,u<=0))break;a=u}if(c){const l={word:c[0],startColumn:i+1+c.index,endColumn:i+1+c.index+c[0].length};return t.lastIndex=0,l}return null}function K2(e,t,r,i){let s;for(;s=e.exec(t);){const n=s.index||0;if(n<=r&&e.lastIndex>=r)return s;if(i>0&&n>i)return null}return null}var D5;(function(e){e[e.None=0]="None",e[e.Keep=1]="Keep",e[e.Brackets=2]="Brackets",e[e.Advanced=3]="Advanced",e[e.Full=4]="Full"})(D5||(D5={}));var eD=8,tD=class{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}},et=class{constructor(e,t,r,i){this.id=e,this.name=t,this.defaultValue=r,this.schema=i}applyUpdate(e,t){return qh(e,t)}compute(e,t,r){return r}},Vh=class{constructor(e,t){this.newValue=e,this.didChange=t}};function qh(e,t){if(typeof e!="object"||typeof t!="object"||!e||!t)return new Vh(t,e!==t);if(Array.isArray(e)||Array.isArray(t)){const i=Array.isArray(e)&&Array.isArray(t)&&Xi(e,t);return new Vh(t,!i)}let r=!1;for(const i in t)if(t.hasOwnProperty(i)){const s=qh(e[i],t[i]);s.didChange&&(e[i]=s.newValue,r=!0)}return new Vh(e,r)}var Gc=class{constructor(e){this.schema=void 0,this.id=e,this.name="_never_",this.defaultValue=void 0}applyUpdate(e,t){return qh(e,t)}validate(e){return this.defaultValue}},oa=class{constructor(e,t,r,i){this.id=e,this.name=t,this.defaultValue=r,this.schema=i}applyUpdate(e,t){return qh(e,t)}validate(e){return typeof e>"u"?this.defaultValue:e}compute(e,t,r){return r}};function ie(e,t){return typeof e>"u"?t:e==="false"?!1:!!e}var De=class extends oa{constructor(e,t,r,i=void 0){typeof i<"u"&&(i.type="boolean",i.default=r),super(e,t,r,i)}validate(e){return ie(e,this.defaultValue)}};function rD(e,t,r,i){if(typeof e>"u")return t;let s=parseInt(e,10);return isNaN(s)?t:(s=Math.max(r,s),s=Math.min(i,s),s|0)}var Xe=class o3 extends oa{static clampedInt(t,r,i,s){return rD(t,r,i,s)}constructor(t,r,i,s,n,o=void 0){typeof o<"u"&&(o.type="integer",o.default=i,o.minimum=s,o.maximum=n),super(t,r,i,o),this.minimum=s,this.maximum=n}validate(t){return o3.clampedInt(t,this.defaultValue,this.minimum,this.maximum)}},rs=class a3 extends oa{static clamp(t,r,i){return t<r?r:t>i?i:t}static float(t,r){if(typeof t=="number")return t;if(typeof t>"u")return r;const i=parseFloat(t);return isNaN(i)?r:i}constructor(t,r,i,s,n){typeof n<"u"&&(n.type="number",n.default=i),super(t,r,i,n),this.validationFn=s}validate(t){return this.validationFn(a3.float(t,this.defaultValue))}},kr=class c3 extends oa{static string(t,r){return typeof t!="string"?r:t}constructor(t,r,i,s=void 0){typeof s<"u"&&(s.type="string",s.default=i),super(t,r,i,s)}validate(t){return c3.string(t,this.defaultValue)}};function mt(e,t,r,i){return typeof e!="string"?t:i&&e in i?i[e]:r.indexOf(e)===-1?t:e}var ct=class extends oa{constructor(e,t,r,i,s=void 0){typeof s<"u"&&(s.type="string",s.enum=i,s.default=r),super(e,t,r,s),this.c=i}validate(e){return mt(e,this.defaultValue,this.c)}},Gh=class extends et{constructor(e,t,r,i,s,n,o=void 0){typeof o<"u"&&(o.type="string",o.enum=s,o.default=i),super(e,t,r,o),this.c=s,this.d=n}validate(e){return typeof e!="string"?this.defaultValue:this.c.indexOf(e)===-1?this.defaultValue:this.d(e)}};function iD(e){switch(e){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}var sD=class extends et{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[p(307,null),p(308,null),p(309,null)],default:"auto",tags:["accessibility"],description:p(310,null)})}validate(e){switch(e){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(e,t,r){return r===0?e.accessibilitySupport:r}},nD=class extends et{constructor(){const e={insertSpace:!0,ignoreEmptyLines:!0};super(23,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:p(311,null)},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:p(312,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertSpace:ie(t.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:ie(t.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}},A5;(function(e){e[e.Hidden=0]="Hidden",e[e.Blink=1]="Blink",e[e.Smooth=2]="Smooth",e[e.Phase=3]="Phase",e[e.Expand=4]="Expand",e[e.Solid=5]="Solid"})(A5||(A5={}));function oD(e){switch(e){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}var is;(function(e){e[e.Line=1]="Line",e[e.Block=2]="Block",e[e.Underline=3]="Underline",e[e.LineThin=4]="LineThin",e[e.BlockOutline=5]="BlockOutline",e[e.UnderlineThin=6]="UnderlineThin"})(is||(is={}));function aD(e){switch(e){case"line":return is.Line;case"block":return is.Block;case"underline":return is.Underline;case"line-thin":return is.LineThin;case"block-outline":return is.BlockOutline;case"underline-thin":return is.UnderlineThin}}var cD=class extends Gc{constructor(){super(145)}compute(e,t,r){const i=["monaco-editor"];return t.get(41)&&i.push(t.get(41)),e.extraEditorClassName&&i.push(e.extraEditorClassName),t.get(76)==="default"?i.push("mouse-default"):t.get(76)==="copy"&&i.push("mouse-copy"),t.get(114)&&i.push("showUnused"),t.get(143)&&i.push("showDeprecated"),i.join(" ")}},lD=class extends De{constructor(){super(38,"emptySelectionClipboard",!0,{description:p(313,null)})}compute(e,t,r){return r&&e.emptySelectionClipboard}},uD=class extends et{constructor(){const e={cursorMoveOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0};super(43,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:p(314,null)},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:e.seedSearchStringFromSelection,enumDescriptions:[p(315,null),p(316,null),p(317,null)],description:p(318,null)},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[p(319,null),p(320,null),p(321,null)],description:p(322,null)},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:p(323,null),included:Kt},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:p(324,null)},"editor.find.loop":{type:"boolean",default:e.loop,description:p(325,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{cursorMoveOnType:ie(t.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:typeof e.seedSearchStringFromSelection=="boolean"?e.seedSearchStringFromSelection?"always":"never":mt(t.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:typeof e.autoFindInSelection=="boolean"?e.autoFindInSelection?"always":"never":mt(t.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:ie(t.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:ie(t.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:ie(t.loop,this.defaultValue.loop)}}},hD=class kc extends et{static{this.OFF='"liga" off, "calt" off'}static{this.ON='"liga" on, "calt" on'}constructor(){super(53,"fontLigatures",kc.OFF,{anyOf:[{type:"boolean",description:p(326,null)},{type:"string",description:p(327,null)}],description:p(328,null),default:!1})}validate(t){return typeof t>"u"?this.defaultValue:typeof t=="string"?t==="false"||t.length===0?kc.OFF:t==="true"?kc.ON:t:t?kc.ON:kc.OFF}},dD=class xc extends et{static{this.OFF="normal"}static{this.TRANSLATE="translate"}constructor(){super(56,"fontVariations",xc.OFF,{anyOf:[{type:"boolean",description:p(329,null)},{type:"string",description:p(330,null)}],description:p(331,null),default:!1})}validate(t){return typeof t>"u"?this.defaultValue:typeof t=="string"?t==="false"?xc.OFF:t==="true"?xc.TRANSLATE:t:t?xc.TRANSLATE:xc.OFF}compute(t,r,i){return t.fontInfo.fontVariationSettings}},fD=class extends Gc{constructor(){super(52)}compute(e,t,r){return e.fontInfo}},pD=class extends oa{constructor(){super(54,"fontSize",Ds.fontSize,{type:"number",minimum:6,maximum:100,default:Ds.fontSize,description:p(332,null)})}validate(e){const t=rs.float(e,this.defaultValue);return t===0?Ds.fontSize:rs.clamp(t,6,100)}compute(e,t,r){return e.fontInfo.fontSize}},gD=class Ec extends et{static{this.c=["normal","bold","100","200","300","400","500","600","700","800","900"]}static{this.d=1}static{this.e=1e3}constructor(){super(55,"fontWeight",Ds.fontWeight,{anyOf:[{type:"number",minimum:Ec.d,maximum:Ec.e,errorMessage:p(333,null)},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:Ec.c}],default:Ds.fontWeight,description:p(334,null)})}validate(t){return t==="normal"||t==="bold"?t:String(Xe.clampedInt(t,Ds.fontWeight,Ec.d,Ec.e))}},mD=class extends et{constructor(){const e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",multipleTests:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:"",alternativeTestsCommand:""},t={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[p(335,null),p(336,null),p(337,null)]},r=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(60,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:p(338,null)},"editor.gotoLocation.multipleDefinitions":{description:p(339,null),...t},"editor.gotoLocation.multipleTypeDefinitions":{description:p(340,null),...t},"editor.gotoLocation.multipleDeclarations":{description:p(341,null),...t},"editor.gotoLocation.multipleImplementations":{description:p(342,null),...t},"editor.gotoLocation.multipleReferences":{description:p(343,null),...t},"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:r,description:p(344,null)},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:r,description:p(345,null)},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:r,description:p(346,null)},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:r,description:p(347,null)},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:r,description:p(348,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{multiple:mt(t.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:t.multipleDefinitions??mt(t.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:t.multipleTypeDefinitions??mt(t.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:t.multipleDeclarations??mt(t.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:t.multipleImplementations??mt(t.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:t.multipleReferences??mt(t.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),multipleTests:t.multipleTests??mt(t.multipleTests,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:kr.string(t.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:kr.string(t.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:kr.string(t.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:kr.string(t.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:kr.string(t.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand),alternativeTestsCommand:kr.string(t.alternativeTestsCommand,this.defaultValue.alternativeTestsCommand)}}},vD=class extends et{constructor(){const e={enabled:!0,delay:300,hidingDelay:300,sticky:!0,above:!0};super(62,"hover",e,{"editor.hover.enabled":{type:"boolean",default:e.enabled,description:p(349,null)},"editor.hover.delay":{type:"number",default:e.delay,minimum:0,maximum:1e4,description:p(350,null)},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:p(351,null)},"editor.hover.hidingDelay":{type:"integer",minimum:0,default:e.hidingDelay,description:p(352,null)},"editor.hover.above":{type:"boolean",default:e.above,description:p(353,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:ie(t.enabled,this.defaultValue.enabled),delay:Xe.clampedInt(t.delay,this.defaultValue.delay,0,1e4),sticky:ie(t.sticky,this.defaultValue.sticky),hidingDelay:Xe.clampedInt(t.hidingDelay,this.defaultValue.hidingDelay,0,6e5),above:ie(t.above,this.defaultValue.above)}}},T5;(function(e){e[e.None=0]="None",e[e.Text=1]="Text",e[e.Blocks=2]="Blocks"})(T5||(T5={}));var wD=class Dg extends Gc{constructor(){super(148)}compute(t,r,i){return Dg.computeLayout(r,{memory:t.memory,outerWidth:t.outerWidth,outerHeight:t.outerHeight,isDominatedByLongLines:t.isDominatedByLongLines,lineHeight:t.fontInfo.lineHeight,viewLineCount:t.viewLineCount,lineNumbersDigitCount:t.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:t.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:t.fontInfo.maxDigitWidth,pixelRatio:t.pixelRatio,glyphMarginDecorationLaneCount:t.glyphMarginDecorationLaneCount})}static computeContainedMinimapLineCount(t){const r=t.height/t.lineHeight,i=Math.floor(t.paddingTop/t.lineHeight);let s=Math.floor(t.paddingBottom/t.lineHeight);t.scrollBeyondLastLine&&(s=Math.max(s,r-1));const n=(i+t.viewLineCount+s)/(t.pixelRatio*t.height),o=Math.floor(t.viewLineCount/n);return{typicalViewportLineCount:r,extraLinesBeforeFirstLine:i,extraLinesBeyondLastLine:s,desiredRatio:n,minimapLineCount:o}}static c(t,r){const i=t.outerWidth,s=t.outerHeight,n=t.pixelRatio;if(!t.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(n*s),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:s};const o=r.stableMinimapLayoutInput,a=o&&t.outerHeight===o.outerHeight&&t.lineHeight===o.lineHeight&&t.typicalHalfwidthCharacterWidth===o.typicalHalfwidthCharacterWidth&&t.pixelRatio===o.pixelRatio&&t.scrollBeyondLastLine===o.scrollBeyondLastLine&&t.paddingTop===o.paddingTop&&t.paddingBottom===o.paddingBottom&&t.minimap.enabled===o.minimap.enabled&&t.minimap.side===o.minimap.side&&t.minimap.size===o.minimap.size&&t.minimap.showSlider===o.minimap.showSlider&&t.minimap.renderCharacters===o.minimap.renderCharacters&&t.minimap.maxColumn===o.minimap.maxColumn&&t.minimap.scale===o.minimap.scale&&t.verticalScrollbarWidth===o.verticalScrollbarWidth&&t.isViewportWrapping===o.isViewportWrapping,c=t.lineHeight,l=t.typicalHalfwidthCharacterWidth,u=t.scrollBeyondLastLine,h=t.minimap.renderCharacters;let d=n>=2?Math.round(t.minimap.scale*2):t.minimap.scale;const f=t.minimap.maxColumn,g=t.minimap.size,v=t.minimap.side,x=t.verticalScrollbarWidth,$=t.viewLineCount,C=t.remainingWidth,L=t.isViewportWrapping,F=h?2:3;let z=Math.floor(n*s);const Y=z/n;let oe=!1,Z=!1,se=F*d,Ae=d/n,xe=1;if(g==="fill"||g==="fit"){const{typicalViewportLineCount:le,extraLinesBeforeFirstLine:Pe,extraLinesBeyondLastLine:we,desiredRatio:it,minimapLineCount:Ge}=Dg.computeContainedMinimapLineCount({viewLineCount:$,scrollBeyondLastLine:u,paddingTop:t.paddingTop,paddingBottom:t.paddingBottom,height:s,lineHeight:c,pixelRatio:n});if($/Ge>1)oe=!0,Z=!0,d=1,se=1,Ae=d/n;else{let Tt=!1,Yt=d+1;if(g==="fit"){const ot=Math.ceil((Pe+$+we)*se);L&&a&&C<=r.stableFitRemainingWidth?(Tt=!0,Yt=r.stableFitMaxMinimapScale):Tt=ot>z}if(g==="fill"||Tt){oe=!0;const ot=d;se=Math.min(c*n,Math.max(1,Math.floor(1/it))),L&&a&&C<=r.stableFitRemainingWidth&&(Yt=r.stableFitMaxMinimapScale),d=Math.min(Yt,Math.max(1,Math.floor(se/F))),d>ot&&(xe=Math.min(2,d/ot)),Ae=d/n/xe,z=Math.ceil(Math.max(le,Pe+$+we)*se),L?(r.stableMinimapLayoutInput=t,r.stableFitRemainingWidth=C,r.stableFitMaxMinimapScale=d):(r.stableMinimapLayoutInput=null,r.stableFitRemainingWidth=0)}}}const tt=Math.floor(f*Ae),dt=Math.min(tt,Math.max(0,Math.floor((C-x-2)*Ae/(l+Ae)))+eD);let ee=Math.floor(n*dt);const q=ee/n;ee=Math.floor(ee*xe);const ne=h?1:2,G=v==="left"?0:i-dt-x;return{renderMinimap:ne,minimapLeft:G,minimapWidth:dt,minimapHeightIsEditorHeight:oe,minimapIsSampling:Z,minimapScale:d,minimapLineHeight:se,minimapCanvasInnerWidth:ee,minimapCanvasInnerHeight:z,minimapCanvasOuterWidth:q,minimapCanvasOuterHeight:Y}}static computeLayout(t,r){const i=r.outerWidth|0,s=r.outerHeight|0,n=r.lineHeight|0,o=r.lineNumbersDigitCount|0,a=r.typicalHalfwidthCharacterWidth,c=r.maxDigitWidth,l=r.pixelRatio,u=r.viewLineCount,h=t.get(140),d=h==="inherit"?t.get(139):h,f=d==="inherit"?t.get(135):d,g=t.get(138),v=r.isDominatedByLongLines,x=t.get(59),$=t.get(70).renderType!==0,C=t.get(71),L=t.get(108),F=t.get(86),z=t.get(75),Y=t.get(106),oe=Y.verticalScrollbarSize,Z=Y.verticalHasArrows,se=Y.arrowSize,Ae=Y.horizontalScrollbarSize,xe=t.get(45),tt=t.get(113)!=="never";let dt=t.get(68);xe&&tt&&(dt+=16);let ee=0;if($){const bi=Math.max(o,C);ee=Math.round(bi*c)}let q=0;x&&(q=n*r.glyphMarginDecorationLaneCount);let ne=0,G=ne+q,le=G+ee,Pe=le+dt;const we=i-q-ee-dt;let it=!1,Ge=!1,At=-1;d==="inherit"&&v?(it=!0,Ge=!0):f==="on"||f==="bounded"?Ge=!0:f==="wordWrapColumn"&&(At=g);const Tt=Dg.c({outerWidth:i,outerHeight:s,lineHeight:n,typicalHalfwidthCharacterWidth:a,pixelRatio:l,scrollBeyondLastLine:L,paddingTop:F.top,paddingBottom:F.bottom,minimap:z,verticalScrollbarWidth:oe,viewLineCount:u,remainingWidth:we,isViewportWrapping:Ge},r.memory||new tD);Tt.renderMinimap!==0&&Tt.minimapLeft===0&&(ne+=Tt.minimapWidth,G+=Tt.minimapWidth,le+=Tt.minimapWidth,Pe+=Tt.minimapWidth);const Yt=we-Tt.minimapWidth,ot=Math.max(1,Math.floor((Yt-oe-2)/a)),cr=Z?se:0;return Ge&&(At=Math.max(1,ot),f==="bounded"&&(At=Math.min(At,g))),{width:i,height:s,glyphMarginLeft:ne,glyphMarginWidth:q,glyphMarginDecorationLaneCount:r.glyphMarginDecorationLaneCount,lineNumbersLeft:G,lineNumbersWidth:ee,decorationsLeft:le,decorationsWidth:dt,contentLeft:Pe,contentWidth:Yt,minimap:Tt,viewportColumn:ot,isWordWrapMinified:it,isViewportWrapping:Ge,wrappingColumn:At,verticalScrollbarWidth:oe,horizontalScrollbarHeight:Ae,overviewRuler:{top:cr,width:oe,height:s-2*cr,right:0}}}},bD=class extends et{constructor(){super(142,"wrappingStrategy","simple",{"editor.wrappingStrategy":{enumDescriptions:[p(354,null),p(355,null)],type:"string",enum:["simple","advanced"],default:"simple",description:p(356,null)}})}validate(e){return mt(e,"simple",["simple","advanced"])}compute(e,t,r){return t.get(2)===2?"advanced":r}},Is;(function(e){e.Off="off",e.OnCode="onCode",e.On="on"})(Is||(Is={}));var yD=class extends et{constructor(){const e={enabled:Is.OnCode};super(67,"lightbulb",e,{"editor.lightbulb.enabled":{type:"string",tags:["experimental"],enum:[Is.Off,Is.OnCode,Is.On],default:e.enabled,enumDescriptions:[p(357,null),p(358,null),p(359,null)],description:p(360,null)}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:mt(e.enabled,this.defaultValue.enabled,[Is.Off,Is.OnCode,Is.On])}}},kD=class extends et{constructor(){const e={enabled:!0,maxLineCount:5,defaultModel:"outlineModel",scrollWithEditor:!0};super(118,"stickyScroll",e,{"editor.stickyScroll.enabled":{type:"boolean",default:e.enabled,description:p(361,null),tags:["experimental"]},"editor.stickyScroll.maxLineCount":{type:"number",default:e.maxLineCount,minimum:1,maximum:20,description:p(362,null)},"editor.stickyScroll.defaultModel":{type:"string",enum:["outlineModel","foldingProviderModel","indentationModel"],default:e.defaultModel,description:p(363,null)},"editor.stickyScroll.scrollWithEditor":{type:"boolean",default:e.scrollWithEditor,description:p(364,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:ie(t.enabled,this.defaultValue.enabled),maxLineCount:Xe.clampedInt(t.maxLineCount,this.defaultValue.maxLineCount,1,20),defaultModel:mt(t.defaultModel,this.defaultValue.defaultModel,["outlineModel","foldingProviderModel","indentationModel"]),scrollWithEditor:ie(t.scrollWithEditor,this.defaultValue.scrollWithEditor)}}},xD=class extends et{constructor(){const e={enabled:"on",fontSize:0,fontFamily:"",padding:!1,maximumLength:43};super(144,"inlayHints",e,{"editor.inlayHints.enabled":{type:"string",default:e.enabled,description:p(365,null),enum:["on","onUnlessPressed","offUnlessPressed","off"],markdownEnumDescriptions:[p(366,null),p(367,null,Kt?"Ctrl+Option":"Ctrl+Alt"),p(368,null,Kt?"Ctrl+Option":"Ctrl+Alt"),p(369,null)]},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,markdownDescription:p(370,null,"`#editor.fontSize#`","`5`")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,markdownDescription:p(371,null,"`#editor.fontFamily#`")},"editor.inlayHints.padding":{type:"boolean",default:e.padding,description:p(372,null)},"editor.inlayHints.maximumLength":{type:"number",default:e.maximumLength,markdownDescription:p(373,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return typeof t.enabled=="boolean"&&(t.enabled=t.enabled?"on":"off"),{enabled:mt(t.enabled,this.defaultValue.enabled,["on","off","offUnlessPressed","onUnlessPressed"]),fontSize:Xe.clampedInt(t.fontSize,this.defaultValue.fontSize,0,100),fontFamily:kr.string(t.fontFamily,this.defaultValue.fontFamily),padding:ie(t.padding,this.defaultValue.padding),maximumLength:Xe.clampedInt(t.maximumLength,this.defaultValue.maximumLength,0,Number.MAX_SAFE_INTEGER)}}},ED=class extends et{constructor(){super(68,"lineDecorationsWidth",10)}validate(e){return typeof e=="string"&&/^\d+(\.\d+)?ch$/.test(e)?-parseFloat(e.substring(0,e.length-2)):Xe.clampedInt(e,this.defaultValue,0,1e3)}compute(e,t,r){return r<0?Xe.clampedInt(-r*e.fontInfo.typicalHalfwidthCharacterWidth,this.defaultValue,0,1e3):r}},SD=class extends rs{constructor(){super(69,"lineHeight",Ds.lineHeight,e=>rs.clamp(e,0,150),{markdownDescription:p(374,null)})}compute(e,t,r){return e.fontInfo.lineHeight}},$D=class extends et{constructor(){const e={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",autohide:!1,renderCharacters:!0,maxColumn:120,scale:1,showRegionSectionHeaders:!0,showMarkSectionHeaders:!0,sectionHeaderFontSize:9,sectionHeaderLetterSpacing:1};super(75,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:p(375,null)},"editor.minimap.autohide":{type:"boolean",default:e.autohide,description:p(376,null)},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[p(377,null),p(378,null),p(379,null)],default:e.size,description:p(380,null)},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:p(381,null)},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:p(382,null)},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:p(383,null)},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:p(384,null)},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:p(385,null)},"editor.minimap.showRegionSectionHeaders":{type:"boolean",default:e.showRegionSectionHeaders,description:p(386,null)},"editor.minimap.showMarkSectionHeaders":{type:"boolean",default:e.showMarkSectionHeaders,description:p(387,null)},"editor.minimap.sectionHeaderFontSize":{type:"number",default:e.sectionHeaderFontSize,description:p(388,null)},"editor.minimap.sectionHeaderLetterSpacing":{type:"number",default:e.sectionHeaderLetterSpacing,description:p(389,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:ie(t.enabled,this.defaultValue.enabled),autohide:ie(t.autohide,this.defaultValue.autohide),size:mt(t.size,this.defaultValue.size,["proportional","fill","fit"]),side:mt(t.side,this.defaultValue.side,["right","left"]),showSlider:mt(t.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:ie(t.renderCharacters,this.defaultValue.renderCharacters),scale:Xe.clampedInt(t.scale,1,1,3),maxColumn:Xe.clampedInt(t.maxColumn,this.defaultValue.maxColumn,1,1e4),showRegionSectionHeaders:ie(t.showRegionSectionHeaders,this.defaultValue.showRegionSectionHeaders),showMarkSectionHeaders:ie(t.showMarkSectionHeaders,this.defaultValue.showMarkSectionHeaders),sectionHeaderFontSize:rs.clamp(t.sectionHeaderFontSize??this.defaultValue.sectionHeaderFontSize,4,32),sectionHeaderLetterSpacing:rs.clamp(t.sectionHeaderLetterSpacing??this.defaultValue.sectionHeaderLetterSpacing,0,5)}}};function CD(e){return e==="ctrlCmd"?Kt?"metaKey":"ctrlKey":"altKey"}var PD=class extends et{constructor(){super(86,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:p(390,null)},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:p(391,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{top:Xe.clampedInt(t.top,0,0,1e3),bottom:Xe.clampedInt(t.bottom,0,0,1e3)}}},ID=class extends et{constructor(){const e={enabled:!0,cycle:!0};super(88,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:p(392,null)},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:p(393,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:ie(t.enabled,this.defaultValue.enabled),cycle:ie(t.cycle,this.defaultValue.cycle)}}},DD=class extends Gc{constructor(){super(146)}compute(e,t,r){return e.pixelRatio}},AD=class extends et{constructor(){super(90,"placeholder",void 0)}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e:this.defaultValue}},TD=class extends et{constructor(){const e={other:"on",comments:"off",strings:"off"},t=[{type:"boolean"},{type:"string",enum:["on","inline","off"],enumDescriptions:[p(394,null),p(395,null),p(396,null)]}];super(92,"quickSuggestions",e,{type:"object",additionalProperties:!1,properties:{strings:{anyOf:t,default:e.strings,description:p(397,null)},comments:{anyOf:t,default:e.comments,description:p(398,null)},other:{anyOf:t,default:e.other,description:p(399,null)}},default:e,markdownDescription:p(400,null,"`#editor.suggestOnTriggerCharacters#`")}),this.defaultValue=e}validate(e){if(typeof e=="boolean"){const c=e?"on":"off";return{comments:c,strings:c,other:c}}if(!e||typeof e!="object")return this.defaultValue;const{other:t,comments:r,strings:i}=e,s=["on","inline","off"];let n,o,a;return typeof t=="boolean"?n=t?"on":"off":n=mt(t,this.defaultValue.other,s),typeof r=="boolean"?o=r?"on":"off":o=mt(r,this.defaultValue.comments,s),typeof i=="boolean"?a=i?"on":"off":a=mt(i,this.defaultValue.strings,s),{other:n,comments:o,strings:a}}},R5;(function(e){e[e.Off=0]="Off",e[e.On=1]="On",e[e.Relative=2]="Relative",e[e.Interval=3]="Interval",e[e.Custom=4]="Custom"})(R5||(R5={}));var RD=class extends et{constructor(){super(70,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[p(401,null),p(402,null),p(403,null),p(404,null)],default:"on",description:p(405,null)})}validate(e){let t=this.defaultValue.renderType,r=this.defaultValue.renderFn;return typeof e<"u"&&(typeof e=="function"?(t=4,r=e):e==="interval"?t=3:e==="relative"?t=2:e==="on"?t=1:t=0),{renderType:t,renderFn:r}}},LD=class extends et{constructor(){const e=[],t={type:"number",description:p(406,null)};super(105,"rulers",e,{type:"array",items:{anyOf:[t,{type:["object"],properties:{column:t,color:{type:"string",description:p(407,null),format:"color-hex"}}}]},default:e,description:p(408,null)})}validate(e){if(Array.isArray(e)){const t=[];for(const r of e)if(typeof r=="number")t.push({column:Xe.clampedInt(r,0,0,1e4),color:null});else if(r&&typeof r=="object"){const i=r;t.push({column:Xe.clampedInt(i.column,0,0,1e4),color:i.color})}return t.sort((r,i)=>r.column-i.column),t}return this.defaultValue}},ND=class extends et{constructor(){super(95,"readOnlyMessage",void 0)}validate(e){return!e||typeof e!="object"?this.defaultValue:e}};function L5(e,t){if(typeof e!="string")return t;switch(e){case"hidden":return 2;case"visible":return 3;default:return 1}}var FD=class extends et{constructor(){const e={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1,ignoreHorizontalScrollbarInContentHeight:!1};super(106,"scrollbar",e,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[p(409,null),p(410,null),p(411,null)],default:"auto",description:p(412,null)},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[p(413,null),p(414,null),p(415,null)],default:"auto",description:p(416,null)},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:e.verticalScrollbarSize,description:p(417,null)},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:e.horizontalScrollbarSize,description:p(418,null)},"editor.scrollbar.scrollByPage":{type:"boolean",default:e.scrollByPage,description:p(419,null)},"editor.scrollbar.ignoreHorizontalScrollbarInContentHeight":{type:"boolean",default:e.ignoreHorizontalScrollbarInContentHeight,description:p(420,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e,r=Xe.clampedInt(t.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),i=Xe.clampedInt(t.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:Xe.clampedInt(t.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:L5(t.vertical,this.defaultValue.vertical),horizontal:L5(t.horizontal,this.defaultValue.horizontal),useShadows:ie(t.useShadows,this.defaultValue.useShadows),verticalHasArrows:ie(t.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:ie(t.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:ie(t.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:ie(t.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:r,horizontalSliderSize:Xe.clampedInt(t.horizontalSliderSize,r,0,1e3),verticalScrollbarSize:i,verticalSliderSize:Xe.clampedInt(t.verticalSliderSize,i,0,1e3),scrollByPage:ie(t.scrollByPage,this.defaultValue.scrollByPage),ignoreHorizontalScrollbarInContentHeight:ie(t.ignoreHorizontalScrollbarInContentHeight,this.defaultValue.ignoreHorizontalScrollbarInContentHeight)}}},Ai="inUntrustedWorkspace",oo={allowedCharacters:"editor.unicodeHighlight.allowedCharacters",invisibleCharacters:"editor.unicodeHighlight.invisibleCharacters",nonBasicASCII:"editor.unicodeHighlight.nonBasicASCII",ambiguousCharacters:"editor.unicodeHighlight.ambiguousCharacters",includeComments:"editor.unicodeHighlight.includeComments",includeStrings:"editor.unicodeHighlight.includeStrings",allowedLocales:"editor.unicodeHighlight.allowedLocales"},OD=class extends et{constructor(){const e={nonBasicASCII:Ai,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:Ai,includeStrings:!0,allowedCharacters:{},allowedLocales:{_os:!0,_vscode:!0}};super(128,"unicodeHighlight",e,{[oo.nonBasicASCII]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Ai],default:e.nonBasicASCII,description:p(421,null)},[oo.invisibleCharacters]:{restricted:!0,type:"boolean",default:e.invisibleCharacters,description:p(422,null)},[oo.ambiguousCharacters]:{restricted:!0,type:"boolean",default:e.ambiguousCharacters,description:p(423,null)},[oo.includeComments]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Ai],default:e.includeComments,description:p(424,null)},[oo.includeStrings]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Ai],default:e.includeStrings,description:p(425,null)},[oo.allowedCharacters]:{restricted:!0,type:"object",default:e.allowedCharacters,description:p(426,null),additionalProperties:{type:"boolean"}},[oo.allowedLocales]:{restricted:!0,type:"object",additionalProperties:{type:"boolean"},default:e.allowedLocales,description:p(427,null)}})}applyUpdate(e,t){let r=!1;t.allowedCharacters&&e&&(Di(e.allowedCharacters,t.allowedCharacters)||(e={...e,allowedCharacters:t.allowedCharacters},r=!0)),t.allowedLocales&&e&&(Di(e.allowedLocales,t.allowedLocales)||(e={...e,allowedLocales:t.allowedLocales},r=!0));const i=super.applyUpdate(e,t);return r?new Vh(i.newValue,!0):i}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{nonBasicASCII:aa(t.nonBasicASCII,Ai,[!0,!1,Ai]),invisibleCharacters:ie(t.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:ie(t.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:aa(t.includeComments,Ai,[!0,!1,Ai]),includeStrings:aa(t.includeStrings,Ai,[!0,!1,Ai]),allowedCharacters:this.c(e.allowedCharacters,this.defaultValue.allowedCharacters),allowedLocales:this.c(e.allowedLocales,this.defaultValue.allowedLocales)}}c(e,t){if(typeof e!="object"||!e)return t;const r={};for(const[i,s]of Object.entries(e))s===!0&&(r[i]=!0);return r}},MD=class extends et{constructor(){const e={enabled:!0,mode:"subwordSmart",showToolbar:"onHover",suppressSuggestions:!1,keepOnBlur:!1,fontFamily:"default",syntaxHighlightingEnabled:!1};super(64,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:p(428,null)},"editor.inlineSuggest.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[p(429,null),p(430,null),p(431,null)],description:p(432,null)},"editor.inlineSuggest.syntaxHighlightingEnabled":{type:"boolean",default:e.syntaxHighlightingEnabled,description:p(433,null)},"editor.inlineSuggest.suppressSuggestions":{type:"boolean",default:e.suppressSuggestions,description:p(434,null)},"editor.inlineSuggest.fontFamily":{type:"string",default:e.fontFamily,description:p(435,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:ie(t.enabled,this.defaultValue.enabled),mode:mt(t.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"]),showToolbar:mt(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),suppressSuggestions:ie(t.suppressSuggestions,this.defaultValue.suppressSuggestions),keepOnBlur:ie(t.keepOnBlur,this.defaultValue.keepOnBlur),fontFamily:kr.string(t.fontFamily,this.defaultValue.fontFamily),syntaxHighlightingEnabled:ie(t.syntaxHighlightingEnabled,this.defaultValue.syntaxHighlightingEnabled)}}},jD=class extends et{constructor(){const e={enabled:!1,showToolbar:"onHover",fontFamily:"default",keepOnBlur:!1};super(65,"experimentalInlineEdit",e,{"editor.experimentalInlineEdit.enabled":{type:"boolean",default:e.enabled,description:p(436,null)},"editor.experimentalInlineEdit.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[p(437,null),p(438,null),p(439,null)],description:p(440,null)},"editor.experimentalInlineEdit.fontFamily":{type:"string",default:e.fontFamily,description:p(441,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:ie(t.enabled,this.defaultValue.enabled),showToolbar:mt(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),fontFamily:kr.string(t.fontFamily,this.defaultValue.fontFamily),keepOnBlur:ie(t.keepOnBlur,this.defaultValue.keepOnBlur)}}},UD=class extends et{constructor(){const e={enabled:S5.bracketPairColorizationOptions.enabled,independentColorPoolPerBracketType:S5.bracketPairColorizationOptions.independentColorPoolPerBracketType};super(15,"bracketPairColorization",e,{"editor.bracketPairColorization.enabled":{type:"boolean",default:e.enabled,markdownDescription:p(442,null,"`#workbench.colorCustomizations#`")},"editor.bracketPairColorization.independentColorPoolPerBracketType":{type:"boolean",default:e.independentColorPoolPerBracketType,description:p(443,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:ie(t.enabled,this.defaultValue.enabled),independentColorPoolPerBracketType:ie(t.independentColorPoolPerBracketType,this.defaultValue.independentColorPoolPerBracketType)}}},HD=class extends et{constructor(){const e={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(16,"guides",e,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[p(444,null),p(445,null),p(446,null)],default:e.bracketPairs,description:p(447,null)},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[p(448,null),p(449,null),p(450,null)],default:e.bracketPairsHorizontal,description:p(451,null)},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:e.highlightActiveBracketPair,description:p(452,null)},"editor.guides.indentation":{type:"boolean",default:e.indentation,description:p(453,null)},"editor.guides.highlightActiveIndentation":{type:["boolean","string"],enum:[!0,"always",!1],enumDescriptions:[p(454,null),p(455,null),p(456,null)],default:e.highlightActiveIndentation,description:p(457,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{bracketPairs:aa(t.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:aa(t.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:ie(t.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:ie(t.indentation,this.defaultValue.indentation),highlightActiveIndentation:aa(t.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation,[!0,!1,"always"])}}};function aa(e,t,r){const i=r.indexOf(e);return i===-1?t:r[i]}var BD=class extends et{constructor(){const e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!1,localityBonus:!1,shareSuggestSelections:!1,selectionMode:"always",showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,matchOnWordStartOnly:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(121,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[p(458,null),p(459,null)],default:e.insertMode,description:p(460,null)},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:p(461,null)},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:p(462,null)},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:p(463,null)},"editor.suggest.selectionMode":{type:"string",enum:["always","never","whenTriggerCharacter","whenQuickSuggestion"],enumDescriptions:[p(464,null),p(465,null),p(466,null),p(467,null)],default:e.selectionMode,markdownDescription:p(468,null,"`#editor.quickSuggestions#`","`#editor.suggestOnTriggerCharacters#`")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:p(469,null)},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:p(470,null)},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:p(471,null)},"editor.suggest.preview":{type:"boolean",default:e.preview,description:p(472,null)},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:p(473,null)},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:p(474,null)},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:p(475,null)},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:p(476,null)},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:p(477,null)},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:p(478,null)},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:p(479,null)},"editor.suggest.matchOnWordStartOnly":{type:"boolean",default:!0,markdownDescription:p(480,null)},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:p(481,null)},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:p(482,null)},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:p(483,null)},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:p(484,null)},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:p(485,null)},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:p(486,null)},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:p(487,null)},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:p(488,null)},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:p(489,null)},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:p(490,null)},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:p(491,null)},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:p(492,null)},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:p(493,null)},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:p(494,null)},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:p(495,null)},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:p(496,null)},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:p(497,null)},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:p(498,null)},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:p(499,null)},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:p(500,null)},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:p(501,null)},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:p(502,null)},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:p(503,null)},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:p(504,null)},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:p(505,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertMode:mt(t.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:ie(t.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:ie(t.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:ie(t.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:ie(t.shareSuggestSelections,this.defaultValue.shareSuggestSelections),selectionMode:mt(t.selectionMode,this.defaultValue.selectionMode,["always","never","whenQuickSuggestion","whenTriggerCharacter"]),showIcons:ie(t.showIcons,this.defaultValue.showIcons),showStatusBar:ie(t.showStatusBar,this.defaultValue.showStatusBar),preview:ie(t.preview,this.defaultValue.preview),previewMode:mt(t.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:ie(t.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:ie(t.showMethods,this.defaultValue.showMethods),showFunctions:ie(t.showFunctions,this.defaultValue.showFunctions),showConstructors:ie(t.showConstructors,this.defaultValue.showConstructors),showDeprecated:ie(t.showDeprecated,this.defaultValue.showDeprecated),matchOnWordStartOnly:ie(t.matchOnWordStartOnly,this.defaultValue.matchOnWordStartOnly),showFields:ie(t.showFields,this.defaultValue.showFields),showVariables:ie(t.showVariables,this.defaultValue.showVariables),showClasses:ie(t.showClasses,this.defaultValue.showClasses),showStructs:ie(t.showStructs,this.defaultValue.showStructs),showInterfaces:ie(t.showInterfaces,this.defaultValue.showInterfaces),showModules:ie(t.showModules,this.defaultValue.showModules),showProperties:ie(t.showProperties,this.defaultValue.showProperties),showEvents:ie(t.showEvents,this.defaultValue.showEvents),showOperators:ie(t.showOperators,this.defaultValue.showOperators),showUnits:ie(t.showUnits,this.defaultValue.showUnits),showValues:ie(t.showValues,this.defaultValue.showValues),showConstants:ie(t.showConstants,this.defaultValue.showConstants),showEnums:ie(t.showEnums,this.defaultValue.showEnums),showEnumMembers:ie(t.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:ie(t.showKeywords,this.defaultValue.showKeywords),showWords:ie(t.showWords,this.defaultValue.showWords),showColors:ie(t.showColors,this.defaultValue.showColors),showFiles:ie(t.showFiles,this.defaultValue.showFiles),showReferences:ie(t.showReferences,this.defaultValue.showReferences),showFolders:ie(t.showFolders,this.defaultValue.showFolders),showTypeParameters:ie(t.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:ie(t.showSnippets,this.defaultValue.showSnippets),showUsers:ie(t.showUsers,this.defaultValue.showUsers),showIssues:ie(t.showIssues,this.defaultValue.showIssues)}}},zD=class extends et{constructor(){super(116,"smartSelect",{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:p(506,null),default:!0,type:"boolean"},"editor.smartSelect.selectSubwords":{description:p(507,null),default:!0,type:"boolean"}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{selectLeadingAndTrailingWhitespace:ie(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace),selectSubwords:ie(e.selectSubwords,this.defaultValue.selectSubwords)}}},_D=class extends et{constructor(){const e=[];super(133,"wordSegmenterLocales",e,{anyOf:[{description:p(508,null),type:"string"},{description:p(509,null),type:"array",items:{type:"string"}}]})}validate(e){if(typeof e=="string"&&(e=[e]),Array.isArray(e)){const t=[];for(const r of e)if(typeof r=="string")try{Intl.Segmenter.supportedLocalesOf(r).length>0&&t.push(r)}catch{}return t}return this.defaultValue}},N5;(function(e){e[e.None=0]="None",e[e.Same=1]="Same",e[e.Indent=2]="Indent",e[e.DeepIndent=3]="DeepIndent"})(N5||(N5={}));var WD=class extends et{constructor(){super(141,"wrappingIndent",1,{"editor.wrappingIndent":{type:"string",enum:["none","same","indent","deepIndent"],enumDescriptions:[p(510,null),p(511,null),p(512,null),p(513,null)],description:p(514,null),default:"same"}})}validate(e){switch(e){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}return 1}compute(e,t,r){return t.get(2)===2?0:r}},VD=class extends Gc{constructor(){super(149)}compute(e,t,r){const i=t.get(148);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:i.isWordWrapMinified,isViewportWrapping:i.isViewportWrapping,wrappingColumn:i.wrappingColumn}}},qD=class extends et{constructor(){const e={enabled:!0,showDropSelector:"afterDrop"};super(36,"dropIntoEditor",e,{"editor.dropIntoEditor.enabled":{type:"boolean",default:e.enabled,markdownDescription:p(515,null)},"editor.dropIntoEditor.showDropSelector":{type:"string",markdownDescription:p(516,null),enum:["afterDrop","never"],enumDescriptions:[p(517,null),p(518,null)],default:"afterDrop"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:ie(t.enabled,this.defaultValue.enabled),showDropSelector:mt(t.showDropSelector,this.defaultValue.showDropSelector,["afterDrop","never"])}}},GD=class extends et{constructor(){const e={enabled:!0,showPasteSelector:"afterPaste"};super(87,"pasteAs",e,{"editor.pasteAs.enabled":{type:"boolean",default:e.enabled,markdownDescription:p(519,null)},"editor.pasteAs.showPasteSelector":{type:"string",markdownDescription:p(520,null),enum:["afterPaste","never"],enumDescriptions:[p(521,null),p(522,null)],default:"afterPaste"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:ie(t.enabled,this.defaultValue.enabled),showPasteSelector:mt(t.showPasteSelector,this.defaultValue.showPasteSelector,["afterPaste","never"])}}},JD="Consolas, 'Courier New', monospace",QD="Menlo, Monaco, 'Courier New', monospace",YD="'Droid Sans Mono', 'monospace', monospace",Ds={fontFamily:Kt?QD:Ot?YD:JD,fontWeight:"normal",fontSize:Kt?12:14,lineHeight:0,letterSpacing:0},XD=[];function j(e){return XD[e.id]=e,e}var F5;(function(e){e[e.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",e[e.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",e[e.accessibilitySupport=2]="accessibilitySupport",e[e.accessibilityPageSize=3]="accessibilityPageSize",e[e.ariaLabel=4]="ariaLabel",e[e.ariaRequired=5]="ariaRequired",e[e.autoClosingBrackets=6]="autoClosingBrackets",e[e.autoClosingComments=7]="autoClosingComments",e[e.screenReaderAnnounceInlineSuggestion=8]="screenReaderAnnounceInlineSuggestion",e[e.autoClosingDelete=9]="autoClosingDelete",e[e.autoClosingOvertype=10]="autoClosingOvertype",e[e.autoClosingQuotes=11]="autoClosingQuotes",e[e.autoIndent=12]="autoIndent",e[e.automaticLayout=13]="automaticLayout",e[e.autoSurround=14]="autoSurround",e[e.bracketPairColorization=15]="bracketPairColorization",e[e.guides=16]="guides",e[e.codeLens=17]="codeLens",e[e.codeLensFontFamily=18]="codeLensFontFamily",e[e.codeLensFontSize=19]="codeLensFontSize",e[e.colorDecorators=20]="colorDecorators",e[e.colorDecoratorsLimit=21]="colorDecoratorsLimit",e[e.columnSelection=22]="columnSelection",e[e.comments=23]="comments",e[e.contextmenu=24]="contextmenu",e[e.copyWithSyntaxHighlighting=25]="copyWithSyntaxHighlighting",e[e.cursorBlinking=26]="cursorBlinking",e[e.cursorSmoothCaretAnimation=27]="cursorSmoothCaretAnimation",e[e.cursorStyle=28]="cursorStyle",e[e.cursorSurroundingLines=29]="cursorSurroundingLines",e[e.cursorSurroundingLinesStyle=30]="cursorSurroundingLinesStyle",e[e.cursorWidth=31]="cursorWidth",e[e.disableLayerHinting=32]="disableLayerHinting",e[e.disableMonospaceOptimizations=33]="disableMonospaceOptimizations",e[e.domReadOnly=34]="domReadOnly",e[e.dragAndDrop=35]="dragAndDrop",e[e.dropIntoEditor=36]="dropIntoEditor",e[e.experimentalEditContextEnabled=37]="experimentalEditContextEnabled",e[e.emptySelectionClipboard=38]="emptySelectionClipboard",e[e.experimentalGpuAcceleration=39]="experimentalGpuAcceleration",e[e.experimentalWhitespaceRendering=40]="experimentalWhitespaceRendering",e[e.extraEditorClassName=41]="extraEditorClassName",e[e.fastScrollSensitivity=42]="fastScrollSensitivity",e[e.find=43]="find",e[e.fixedOverflowWidgets=44]="fixedOverflowWidgets",e[e.folding=45]="folding",e[e.foldingStrategy=46]="foldingStrategy",e[e.foldingHighlight=47]="foldingHighlight",e[e.foldingImportsByDefault=48]="foldingImportsByDefault",e[e.foldingMaximumRegions=49]="foldingMaximumRegions",e[e.unfoldOnClickAfterEndOfLine=50]="unfoldOnClickAfterEndOfLine",e[e.fontFamily=51]="fontFamily",e[e.fontInfo=52]="fontInfo",e[e.fontLigatures=53]="fontLigatures",e[e.fontSize=54]="fontSize",e[e.fontWeight=55]="fontWeight",e[e.fontVariations=56]="fontVariations",e[e.formatOnPaste=57]="formatOnPaste",e[e.formatOnType=58]="formatOnType",e[e.glyphMargin=59]="glyphMargin",e[e.gotoLocation=60]="gotoLocation",e[e.hideCursorInOverviewRuler=61]="hideCursorInOverviewRuler",e[e.hover=62]="hover",e[e.inDiffEditor=63]="inDiffEditor",e[e.inlineSuggest=64]="inlineSuggest",e[e.inlineEdit=65]="inlineEdit",e[e.letterSpacing=66]="letterSpacing",e[e.lightbulb=67]="lightbulb",e[e.lineDecorationsWidth=68]="lineDecorationsWidth",e[e.lineHeight=69]="lineHeight",e[e.lineNumbers=70]="lineNumbers",e[e.lineNumbersMinChars=71]="lineNumbersMinChars",e[e.linkedEditing=72]="linkedEditing",e[e.links=73]="links",e[e.matchBrackets=74]="matchBrackets",e[e.minimap=75]="minimap",e[e.mouseStyle=76]="mouseStyle",e[e.mouseWheelScrollSensitivity=77]="mouseWheelScrollSensitivity",e[e.mouseWheelZoom=78]="mouseWheelZoom",e[e.multiCursorMergeOverlapping=79]="multiCursorMergeOverlapping",e[e.multiCursorModifier=80]="multiCursorModifier",e[e.multiCursorPaste=81]="multiCursorPaste",e[e.multiCursorLimit=82]="multiCursorLimit",e[e.occurrencesHighlight=83]="occurrencesHighlight",e[e.overviewRulerBorder=84]="overviewRulerBorder",e[e.overviewRulerLanes=85]="overviewRulerLanes",e[e.padding=86]="padding",e[e.pasteAs=87]="pasteAs",e[e.parameterHints=88]="parameterHints",e[e.peekWidgetDefaultFocus=89]="peekWidgetDefaultFocus",e[e.placeholder=90]="placeholder",e[e.definitionLinkOpensInPeek=91]="definitionLinkOpensInPeek",e[e.quickSuggestions=92]="quickSuggestions",e[e.quickSuggestionsDelay=93]="quickSuggestionsDelay",e[e.readOnly=94]="readOnly",e[e.readOnlyMessage=95]="readOnlyMessage",e[e.renameOnType=96]="renameOnType",e[e.renderControlCharacters=97]="renderControlCharacters",e[e.renderFinalNewline=98]="renderFinalNewline",e[e.renderLineHighlight=99]="renderLineHighlight",e[e.renderLineHighlightOnlyWhenFocus=100]="renderLineHighlightOnlyWhenFocus",e[e.renderValidationDecorations=101]="renderValidationDecorations",e[e.renderWhitespace=102]="renderWhitespace",e[e.revealHorizontalRightPadding=103]="revealHorizontalRightPadding",e[e.roundedSelection=104]="roundedSelection",e[e.rulers=105]="rulers",e[e.scrollbar=106]="scrollbar",e[e.scrollBeyondLastColumn=107]="scrollBeyondLastColumn",e[e.scrollBeyondLastLine=108]="scrollBeyondLastLine",e[e.scrollPredominantAxis=109]="scrollPredominantAxis",e[e.selectionClipboard=110]="selectionClipboard",e[e.selectionHighlight=111]="selectionHighlight",e[e.selectOnLineNumbers=112]="selectOnLineNumbers",e[e.showFoldingControls=113]="showFoldingControls",e[e.showUnused=114]="showUnused",e[e.snippetSuggestions=115]="snippetSuggestions",e[e.smartSelect=116]="smartSelect",e[e.smoothScrolling=117]="smoothScrolling",e[e.stickyScroll=118]="stickyScroll",e[e.stickyTabStops=119]="stickyTabStops",e[e.stopRenderingLineAfter=120]="stopRenderingLineAfter",e[e.suggest=121]="suggest",e[e.suggestFontSize=122]="suggestFontSize",e[e.suggestLineHeight=123]="suggestLineHeight",e[e.suggestOnTriggerCharacters=124]="suggestOnTriggerCharacters",e[e.suggestSelection=125]="suggestSelection",e[e.tabCompletion=126]="tabCompletion",e[e.tabIndex=127]="tabIndex",e[e.unicodeHighlighting=128]="unicodeHighlighting",e[e.unusualLineTerminators=129]="unusualLineTerminators",e[e.useShadowDOM=130]="useShadowDOM",e[e.useTabStops=131]="useTabStops",e[e.wordBreak=132]="wordBreak",e[e.wordSegmenterLocales=133]="wordSegmenterLocales",e[e.wordSeparators=134]="wordSeparators",e[e.wordWrap=135]="wordWrap",e[e.wordWrapBreakAfterCharacters=136]="wordWrapBreakAfterCharacters",e[e.wordWrapBreakBeforeCharacters=137]="wordWrapBreakBeforeCharacters",e[e.wordWrapColumn=138]="wordWrapColumn",e[e.wordWrapOverride1=139]="wordWrapOverride1",e[e.wordWrapOverride2=140]="wordWrapOverride2",e[e.wrappingIndent=141]="wrappingIndent",e[e.wrappingStrategy=142]="wrappingStrategy",e[e.showDeprecated=143]="showDeprecated",e[e.inlayHints=144]="inlayHints",e[e.editorClassName=145]="editorClassName",e[e.pixelRatio=146]="pixelRatio",e[e.tabFocusMode=147]="tabFocusMode",e[e.layoutInfo=148]="layoutInfo",e[e.wrappingInfo=149]="wrappingInfo",e[e.defaultColorDecorators=150]="defaultColorDecorators",e[e.colorDecoratorsActivatedOn=151]="colorDecoratorsActivatedOn",e[e.inlineCompletionsAccessibilityVerbose=152]="inlineCompletionsAccessibilityVerbose"})(F5||(F5={}));var Wz={acceptSuggestionOnCommitCharacter:j(new De(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:p(523,null)})),acceptSuggestionOnEnter:j(new ct(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",p(524,null),""],markdownDescription:p(525,null)})),accessibilitySupport:j(new sD),accessibilityPageSize:j(new Xe(3,"accessibilityPageSize",10,1,1073741824,{description:p(526,null),tags:["accessibility"]})),ariaLabel:j(new kr(4,"ariaLabel",p(527,null))),ariaRequired:j(new De(5,"ariaRequired",!1,void 0)),screenReaderAnnounceInlineSuggestion:j(new De(8,"screenReaderAnnounceInlineSuggestion",!0,{description:p(528,null),tags:["accessibility"]})),autoClosingBrackets:j(new ct(6,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",p(529,null),p(530,null),""],description:p(531,null)})),autoClosingComments:j(new ct(7,"autoClosingComments","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",p(532,null),p(533,null),""],description:p(534,null)})),autoClosingDelete:j(new ct(9,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",p(535,null),""],description:p(536,null)})),autoClosingOvertype:j(new ct(10,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",p(537,null),""],description:p(538,null)})),autoClosingQuotes:j(new ct(11,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",p(539,null),p(540,null),""],description:p(541,null)})),autoIndent:j(new Gh(12,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],iD,{enumDescriptions:[p(542,null),p(543,null),p(544,null),p(545,null),p(546,null)],description:p(547,null)})),automaticLayout:j(new De(13,"automaticLayout",!1)),autoSurround:j(new ct(14,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[p(548,null),p(549,null),p(550,null),""],description:p(551,null)})),bracketPairColorization:j(new UD),bracketPairGuides:j(new HD),stickyTabStops:j(new De(119,"stickyTabStops",!1,{description:p(552,null)})),codeLens:j(new De(17,"codeLens",!0,{description:p(553,null)})),codeLensFontFamily:j(new kr(18,"codeLensFontFamily","",{description:p(554,null)})),codeLensFontSize:j(new Xe(19,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:p(555,null)})),colorDecorators:j(new De(20,"colorDecorators",!0,{description:p(556,null)})),colorDecoratorActivatedOn:j(new ct(151,"colorDecoratorsActivatedOn","clickAndHover",["clickAndHover","hover","click"],{enumDescriptions:[p(557,null),p(558,null),p(559,null)],description:p(560,null)})),colorDecoratorsLimit:j(new Xe(21,"colorDecoratorsLimit",500,1,1e6,{markdownDescription:p(561,null)})),columnSelection:j(new De(22,"columnSelection",!1,{description:p(562,null)})),comments:j(new nD),contextmenu:j(new De(24,"contextmenu",!0)),copyWithSyntaxHighlighting:j(new De(25,"copyWithSyntaxHighlighting",!0,{description:p(563,null)})),cursorBlinking:j(new Gh(26,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],oD,{description:p(564,null)})),cursorSmoothCaretAnimation:j(new ct(27,"cursorSmoothCaretAnimation","off",["off","explicit","on"],{enumDescriptions:[p(565,null),p(566,null),p(567,null)],description:p(568,null)})),cursorStyle:j(new Gh(28,"cursorStyle",is.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],aD,{description:p(569,null)})),cursorSurroundingLines:j(new Xe(29,"cursorSurroundingLines",0,0,1073741824,{description:p(570,null)})),cursorSurroundingLinesStyle:j(new ct(30,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[p(571,null),p(572,null)],markdownDescription:p(573,null)})),cursorWidth:j(new Xe(31,"cursorWidth",0,0,1073741824,{markdownDescription:p(574,null)})),disableLayerHinting:j(new De(32,"disableLayerHinting",!1)),disableMonospaceOptimizations:j(new De(33,"disableMonospaceOptimizations",!1)),domReadOnly:j(new De(34,"domReadOnly",!1)),dragAndDrop:j(new De(35,"dragAndDrop",!0,{description:p(575,null)})),emptySelectionClipboard:j(new lD),dropIntoEditor:j(new qD),experimentalEditContextEnabled:j(new De(37,"experimentalEditContextEnabled",!1,{description:p(576,null)})),stickyScroll:j(new kD),experimentalGpuAcceleration:j(new ct(39,"experimentalGpuAcceleration","off",["off","on"],void 0)),experimentalWhitespaceRendering:j(new ct(40,"experimentalWhitespaceRendering","svg",["svg","font","off"],{enumDescriptions:[p(577,null),p(578,null),p(579,null)],description:p(580,null)})),extraEditorClassName:j(new kr(41,"extraEditorClassName","")),fastScrollSensitivity:j(new rs(42,"fastScrollSensitivity",5,e=>e<=0?5:e,{markdownDescription:p(581,null)})),find:j(new uD),fixedOverflowWidgets:j(new De(44,"fixedOverflowWidgets",!1)),folding:j(new De(45,"folding",!0,{description:p(582,null)})),foldingStrategy:j(new ct(46,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[p(583,null),p(584,null)],description:p(585,null)})),foldingHighlight:j(new De(47,"foldingHighlight",!0,{description:p(586,null)})),foldingImportsByDefault:j(new De(48,"foldingImportsByDefault",!1,{description:p(587,null)})),foldingMaximumRegions:j(new Xe(49,"foldingMaximumRegions",5e3,10,65e3,{description:p(588,null)})),unfoldOnClickAfterEndOfLine:j(new De(50,"unfoldOnClickAfterEndOfLine",!1,{description:p(589,null)})),fontFamily:j(new kr(51,"fontFamily",Ds.fontFamily,{description:p(590,null)})),fontInfo:j(new fD),fontLigatures2:j(new hD),fontSize:j(new pD),fontWeight:j(new gD),fontVariations:j(new dD),formatOnPaste:j(new De(57,"formatOnPaste",!1,{description:p(591,null)})),formatOnType:j(new De(58,"formatOnType",!1,{description:p(592,null)})),glyphMargin:j(new De(59,"glyphMargin",!0,{description:p(593,null)})),gotoLocation:j(new mD),hideCursorInOverviewRuler:j(new De(61,"hideCursorInOverviewRuler",!1,{description:p(594,null)})),hover:j(new vD),inDiffEditor:j(new De(63,"inDiffEditor",!1)),letterSpacing:j(new rs(66,"letterSpacing",Ds.letterSpacing,e=>rs.clamp(e,-5,20),{description:p(595,null)})),lightbulb:j(new yD),lineDecorationsWidth:j(new ED),lineHeight:j(new SD),lineNumbers:j(new RD),lineNumbersMinChars:j(new Xe(71,"lineNumbersMinChars",5,1,300)),linkedEditing:j(new De(72,"linkedEditing",!1,{description:p(596,null)})),links:j(new De(73,"links",!0,{description:p(597,null)})),matchBrackets:j(new ct(74,"matchBrackets","always",["always","near","never"],{description:p(598,null)})),minimap:j(new $D),mouseStyle:j(new ct(76,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:j(new rs(77,"mouseWheelScrollSensitivity",1,e=>e===0?1:e,{markdownDescription:p(599,null)})),mouseWheelZoom:j(new De(78,"mouseWheelZoom",!1,{markdownDescription:p(Kt?600:601,null)})),multiCursorMergeOverlapping:j(new De(79,"multiCursorMergeOverlapping",!0,{description:p(602,null)})),multiCursorModifier:j(new Gh(80,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],CD,{markdownEnumDescriptions:[p(603,null),p(604,null)],markdownDescription:p(605,null)})),multiCursorPaste:j(new ct(81,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[p(606,null),p(607,null)],markdownDescription:p(608,null)})),multiCursorLimit:j(new Xe(82,"multiCursorLimit",1e4,1,1e5,{markdownDescription:p(609,null)})),occurrencesHighlight:j(new ct(83,"occurrencesHighlight","singleFile",["off","singleFile","multiFile"],{markdownEnumDescriptions:[p(610,null),p(611,null),p(612,null)],markdownDescription:p(613,null)})),overviewRulerBorder:j(new De(84,"overviewRulerBorder",!0,{description:p(614,null)})),overviewRulerLanes:j(new Xe(85,"overviewRulerLanes",3,0,3)),padding:j(new PD),pasteAs:j(new GD),parameterHints:j(new ID),peekWidgetDefaultFocus:j(new ct(89,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[p(615,null),p(616,null)],description:p(617,null)})),placeholder:j(new AD),definitionLinkOpensInPeek:j(new De(91,"definitionLinkOpensInPeek",!1,{description:p(618,null)})),quickSuggestions:j(new TD),quickSuggestionsDelay:j(new Xe(93,"quickSuggestionsDelay",10,0,1073741824,{description:p(619,null)})),readOnly:j(new De(94,"readOnly",!1)),readOnlyMessage:j(new ND),renameOnType:j(new De(96,"renameOnType",!1,{description:p(620,null),markdownDeprecationMessage:p(621,null)})),renderControlCharacters:j(new De(97,"renderControlCharacters",!0,{description:p(622,null),restricted:!0})),renderFinalNewline:j(new ct(98,"renderFinalNewline",Ot?"dimmed":"on",["off","on","dimmed"],{description:p(623,null)})),renderLineHighlight:j(new ct(99,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",p(624,null)],description:p(625,null)})),renderLineHighlightOnlyWhenFocus:j(new De(100,"renderLineHighlightOnlyWhenFocus",!1,{description:p(626,null)})),renderValidationDecorations:j(new ct(101,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:j(new ct(102,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",p(627,null),p(628,null),p(629,null),""],description:p(630,null)})),revealHorizontalRightPadding:j(new Xe(103,"revealHorizontalRightPadding",15,0,1e3)),roundedSelection:j(new De(104,"roundedSelection",!0,{description:p(631,null)})),rulers:j(new LD),scrollbar:j(new FD),scrollBeyondLastColumn:j(new Xe(107,"scrollBeyondLastColumn",4,0,1073741824,{description:p(632,null)})),scrollBeyondLastLine:j(new De(108,"scrollBeyondLastLine",!0,{description:p(633,null)})),scrollPredominantAxis:j(new De(109,"scrollPredominantAxis",!0,{description:p(634,null)})),selectionClipboard:j(new De(110,"selectionClipboard",!0,{description:p(635,null),included:Ot})),selectionHighlight:j(new De(111,"selectionHighlight",!0,{description:p(636,null)})),selectOnLineNumbers:j(new De(112,"selectOnLineNumbers",!0)),showFoldingControls:j(new ct(113,"showFoldingControls","mouseover",["always","never","mouseover"],{enumDescriptions:[p(637,null),p(638,null),p(639,null)],description:p(640,null)})),showUnused:j(new De(114,"showUnused",!0,{description:p(641,null)})),showDeprecated:j(new De(143,"showDeprecated",!0,{description:p(642,null)})),inlayHints:j(new xD),snippetSuggestions:j(new ct(115,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[p(643,null),p(644,null),p(645,null),p(646,null)],description:p(647,null)})),smartSelect:j(new zD),smoothScrolling:j(new De(117,"smoothScrolling",!1,{description:p(648,null)})),stopRenderingLineAfter:j(new Xe(120,"stopRenderingLineAfter",1e4,-1,1073741824)),suggest:j(new BD),inlineSuggest:j(new MD),inlineEdit:j(new jD),inlineCompletionsAccessibilityVerbose:j(new De(152,"inlineCompletionsAccessibilityVerbose",!1,{description:p(649,null)})),suggestFontSize:j(new Xe(122,"suggestFontSize",0,0,1e3,{markdownDescription:p(650,null,"`0`","`#editor.fontSize#`")})),suggestLineHeight:j(new Xe(123,"suggestLineHeight",0,0,1e3,{markdownDescription:p(651,null,"`0`","`#editor.lineHeight#`")})),suggestOnTriggerCharacters:j(new De(124,"suggestOnTriggerCharacters",!0,{description:p(652,null)})),suggestSelection:j(new ct(125,"suggestSelection","first",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[p(653,null),p(654,null),p(655,null)],description:p(656,null)})),tabCompletion:j(new ct(126,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[p(657,null),p(658,null),p(659,null)],description:p(660,null)})),tabIndex:j(new Xe(127,"tabIndex",0,-1,1073741824)),unicodeHighlight:j(new OD),unusualLineTerminators:j(new ct(129,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[p(661,null),p(662,null),p(663,null)],description:p(664,null)})),useShadowDOM:j(new De(130,"useShadowDOM",!0)),useTabStops:j(new De(131,"useTabStops",!0,{description:p(665,null)})),wordBreak:j(new ct(132,"wordBreak","normal",["normal","keepAll"],{markdownEnumDescriptions:[p(666,null),p(667,null)],description:p(668,null)})),wordSegmenterLocales:j(new _D),wordSeparators:j(new kr(134,"wordSeparators",$5,{description:p(669,null)})),wordWrap:j(new ct(135,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[p(670,null),p(671,null),p(672,null),p(673,null)],description:p(674,null)})),wordWrapBreakAfterCharacters:j(new kr(136,"wordWrapBreakAfterCharacters"," 	})]?|/&.,;\xA2\xB0\u2032\u2033\u2030\u2103\u3001\u3002\uFF61\uFF64\uFFE0\uFF0C\uFF0E\uFF1A\uFF1B\uFF1F\uFF01\uFF05\u30FB\uFF65\u309D\u309E\u30FD\u30FE\u30FC\u30A1\u30A3\u30A5\u30A7\u30A9\u30C3\u30E3\u30E5\u30E7\u30EE\u30F5\u30F6\u3041\u3043\u3045\u3047\u3049\u3063\u3083\u3085\u3087\u308E\u3095\u3096\u31F0\u31F1\u31F2\u31F3\u31F4\u31F5\u31F6\u31F7\u31F8\u31F9\u31FA\u31FB\u31FC\u31FD\u31FE\u31FF\u3005\u303B\uFF67\uFF68\uFF69\uFF6A\uFF6B\uFF6C\uFF6D\uFF6E\uFF6F\uFF70\u201D\u3009\u300B\u300D\u300F\u3011\u3015\uFF09\uFF3D\uFF5D\uFF63")),wordWrapBreakBeforeCharacters:j(new kr(137,"wordWrapBreakBeforeCharacters","([{\u2018\u201C\u3008\u300A\u300C\u300E\u3010\u3014\uFF08\uFF3B\uFF5B\uFF62\xA3\xA5\uFF04\uFFE1\uFFE5+\uFF0B")),wordWrapColumn:j(new Xe(138,"wordWrapColumn",80,1,1073741824,{markdownDescription:p(675,null)})),wordWrapOverride1:j(new ct(139,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:j(new ct(140,"wordWrapOverride2","inherit",["off","on","inherit"])),editorClassName:j(new cD),defaultColorDecorators:j(new De(150,"defaultColorDecorators",!1,{markdownDescription:p(676,null)})),pixelRatio:j(new DD),tabFocusMode:j(new De(147,"tabFocusMode",!1,{markdownDescription:p(677,null)})),layoutInfo:j(new wD),wrappingInfo:j(new VD),wrappingIndent:j(new WD),wrappingStrategy:j(new bD)},Wr,Am=globalThis.vscode;if(typeof Am<"u"&&typeof Am.context<"u"){const e=Am.context.configuration();if(e)Wr=e.product;else throw new Error("Sandbox: unable to resolve product configuration from preload script.")}else if(globalThis._VSCODE_PRODUCT_JSON&&globalThis._VSCODE_PACKAGE_JSON){if(Wr=globalThis._VSCODE_PRODUCT_JSON,Kn.VSCODE_DEV&&Object.assign(Wr,{nameShort:`${Wr.nameShort} Dev`,nameLong:`${Wr.nameLong} Dev`,dataFolderName:`${Wr.dataFolderName}-dev`,serverDataFolderName:Wr.serverDataFolderName?`${Wr.serverDataFolderName}-dev`:void 0}),!Wr.version){const e=globalThis._VSCODE_PACKAGE_JSON;Object.assign(Wr,{version:e.version})}}else Wr={nameShort:"Code",nameLong:"Visual Studio Code",applicationName:"code",win32x64AppId:"{{EA457B21-F73E-494C-ACAB-524FDE069978}",win32arm64AppId:"{{A5270FC5-65AD-483E-AC30-2C276B63D0AC}",win32x64UserAppId:"{{771FD6B0-FA20-440A-A002-3B3BAC16DC50}",win32arm64UserAppId:"{{D9E514E7-1A56-452D-9337-2990C0DC4310}",win32NameVersion:"Microsoft Visual Studio Code",win32DirName:"Microsoft VS Code",win32SetupExeBasename:"VSCodeSetup",win32AppUserModelId:"Microsoft.VisualStudioCode",win32ShellNameShort:"Code",win32MutexName:"vscode",win32RegValueName:"VSCode",darwinCredits:"resources/darwin/Credits.rtf",darwinBundleIdentifier:"com.microsoft.VSCode",darwinExecutable:"VSCode",linuxIconName:"vscode",licenseFileName:"LICENSE.rtf",licenseName:"Multiple, see https://code.visualstudio.com/license",serverGreeting:[],serverLicense:["*","* Visual Studio Code Server","*","* By using the software, you agree to","* the Visual Studio Code Server License Terms (https://aka.ms/vscode-server-license) and","* the Microsoft Privacy Statement (https://privacy.microsoft.com/en-US/privacystatement).","*"],serverLicensePrompt:"Do you accept the terms in the License Agreement (Y/n)?",serverApplicationName:"code-server",urlProtocol:"vscode",dataFolderName:".vscode",serverDataFolderName:".vscode-server",downloadUrl:"https://code.visualstudio.com",updateUrl:"https://update.code.visualstudio.com",webUrl:"https://vscode.dev",webEndpointUrl:"https://main.vscode-cdn.net",webEndpointUrlTemplate:"https://{{uuid}}.vscode-cdn.net/{{quality}}/{{commit}}",nlsCoreBaseUrl:"https://www.vscode-unpkg.net/nls/",webviewContentExternalBaseUrlTemplate:"https://{{uuid}}.vscode-cdn.net/{{quality}}/{{commit}}/out/vs/workbench/contrib/webview/browser/pre/",quality:"stable",extensionsGallery:{nlsBaseUrl:"https://www.vscode-unpkg.net/_lp/",serviceUrl:"https://marketplace.visualstudio.com/_apis/public/gallery",itemUrl:"https://marketplace.visualstudio.com/items",publisherUrl:"https://marketplace.visualstudio.com/publishers",resourceUrlTemplate:"https://{publisher}.vscode-unpkg.net/{publisher}/{name}/{version}/{path}",controlUrl:"https://az764295.vo.msecnd.net/extensions/marketplace.json"},profileTemplatesUrl:"https://az764295.vo.msecnd.net/profile-templates/profile-templates.json",extensionRecommendations:{"ms-dotnettools.csdevkit":{onFileOpen:[{pathGlob:"{**/*.cs,**/global.json,**/*.csproj,**/*.cshtml,**/*.sln}",important:!0},{languages:["csharp"],important:!0},{pathGlob:"{**/project.json,**/appsettings.json}"}]},"ms-python.python":{onFileOpen:[{pathGlob:"{**/*.py}",important:!0},{languages:["python"],important:!0},{pathGlob:"{**/*.ipynb}"}]},"ms-toolsai.jupyter":{onFileOpen:[{pathGlob:"{**/*.py}",contentPattern:"^#\\s*%%$",important:!0,whenInstalled:["ms-python.python"]},{pathGlob:"{**/*.ipynb}"}]},"ms-toolsai.datawrangler":{onFileOpen:[{pathGlob:"{**/*.ipynb}",contentPattern:"import\\s*pandas|from\\s*pandas",whenInstalled:["ms-toolsai.jupyter"]}]},"golang.Go":{onFileOpen:[{pathGlob:"**/*.go",important:!0},{languages:["go"],important:!0}]},"vscjava.vscode-java-pack":{onFileOpen:[{pathGlob:"{**/*.java}",important:!0,whenNotInstalled:["ASF.apache-netbeans-java","Oracle.oracle-java"]},{languages:["java"],important:!0,whenNotInstalled:["ASF.apache-netbeans-java","Oracle.oracle-java"]}]},"ms-vscode.PowerShell":{onFileOpen:[{pathGlob:"{**/*.ps1,**/*.psd1,**/*.psm1}",important:!0},{languages:["powershell"],important:!0},{pathGlob:"{**/*.ps.config,**/*.ps1.config}"}]},"ms-toolsai.prompty":{onFileOpen:[{pathGlob:"{**/*.prompty}",important:!1}]},"ms-vscode.cpptools-extension-pack":{onFileOpen:[{pathGlob:"{**/*.c,**/*.cpp,**/*.cc,**/.cxx,**/*.hh,**/*.hpp,**/*.hxx,**/*.h}",important:!0,whenNotInstalled:["llvm-vs-code-extensions.vscode-clangd"]},{languages:["c","cpp"],important:!0,whenNotInstalled:["llvm-vs-code-extensions.vscode-clangd"]}]},"ms-azuretools.vscode-docker":{onFileOpen:[{pathGlob:"{**/dockerfile,**/Dockerfile,**/docker-compose.yml,**/docker-compose.*.yml}",important:!0},{languages:["dockerfile"],important:!0},{pathGlob:"{**/*.cs,**/project.json,**/global.json,**/*.csproj,**/*.cshtml,**/*.sln,**/appsettings.json,**/*.py,**/*.ipynb,**/*.js,**/*.ts,**/package.json}"}]},"vue.volar":{onFileOpen:[{pathGlob:"{**/*.vue}",important:!0},{languages:["vue"],important:!0}]},"ms-vscode.makefile-tools":{onFileOpen:[{pathGlob:"{**/makefile,**/Makefile}",important:!0},{languages:["makefile"],important:!0}]},"ms-vscode.cmake-tools":{onFileOpen:[{pathGlob:"{**/CMakeLists.txt}",important:!0}]},"ms-azure-devops.azure-pipelines":{onFileOpen:[{pathGlob:"{**/azure-pipelines.yaml}",important:!0}]},"msazurermtools.azurerm-vscode-tools":{onFileOpen:[{pathGlob:"{**/azuredeploy.json}",important:!0}]},"ms-vscode-remote.remote-containers":{onFileOpen:[{pathGlob:"{**/devcontainer.json}",important:!0}]},"ms-azuretools.vscode-bicep":{onFileOpen:[{pathGlob:"{**/*.bicep}",important:!0,whenNotInstalled:["ms-azuretools.rad-vscode-bicep"]}]},"svelte.svelte-vscode":{onFileOpen:[{pathGlob:"{**/*.svelte}",important:!0}]},"ms-vscode.vscode-github-issue-notebooks":{onFileOpen:[{pathGlob:"{**/*.github-issues}",important:!0}]},"ms-playwright.playwright":{onFileOpen:[{pathGlob:"{**/*playwright*.config.ts,**/*playwright*.config.js,**/*playwright*.config.mjs}",important:!0}]},"vscjava.vscode-gradle":{onFileOpen:[{pathGlob:"{**/gradlew,**/gradlew.bat,**/build.gradle,**/build.gradle.kts,**/settings.gradle,**/settings.gradle.kts}",important:!0}]},"REditorSupport.r":{onFileOpen:[{pathGlob:"{**/*.r}",important:!0},{languages:["r"],important:!0}]},"firefox-devtools.vscode-firefox-debug":{onFileOpen:[{pathGlob:"{**/*.ts,**/*.tsx,**/*.js,**/*.jsx,**/*.es6,**/.babelrc}"}]},"ms-edgedevtools.vscode-edge-devtools":{onFileOpen:[{pathGlob:"{**/*.ts,**/*.tsx,**/*.js,**/*.css,**/*.html}"}]},"Ionide.Ionide-fsharp":{onFileOpen:[{pathGlob:"{**/*.fsx,**/*.fsi,**/*.fs,**/*.ml,**/*.mli}"}]},"dbaeumer.vscode-eslint":{onFileOpen:[{pathGlob:"{**/*.js,**/*.jsx,**/*.es6,**/.eslintrc.*,**/.eslintrc,**/.babelrc,**/jsconfig.json}"}]},"bmewburn.vscode-intelephense-client":{onFileOpen:[{pathGlob:"{**/*.php,**/php.ini}"}]},"xdebug.php-debug":{onFileOpen:[{pathGlob:"{**/*.php,**/php.ini}"}]},"rust-lang.rust-analyzer":{onFileOpen:[{pathGlob:"{**/*.rs,**/*.rslib}"}]},"DavidAnson.vscode-markdownlint":{onFileOpen:[{pathGlob:"{**/*.md}"}]},"EditorConfig.EditorConfig":{onFileOpen:[{pathGlob:"{**/.editorconfig}"}]},"HookyQR.beautify":{onFileOpen:[{pathGlob:"{**/.jsbeautifyrc}"}]},"donjayamanne.githistory":{onFileOpen:[{pathGlob:"{**/.gitignore,**/.git}"}]},"eamodio.gitlens":{onFileOpen:[{pathGlob:"{**/.gitignore,**/.git}"}]},"Shopify.ruby-lsp":{onFileOpen:[{pathGlob:"{**/*.rb,**/*.erb,**/*.reek,**/.fasterer.yml,**/ruby-lint.yml,**/.rubocop.yml}"}]},"DotJoshJohnson.xml":{onFileOpen:[{pathGlob:"{**/*.xml}"}]},"stylelint.vscode-stylelint":{onFileOpen:[{pathGlob:"{**/.stylelintrc,**/stylelint.config.js}"}]},"ms-mssql.mssql":{onFileOpen:[{pathGlob:"{**/*.sql}"}]},"mtxr.sqltools":{onFileOpen:[{pathGlob:"{**/*.sql}"}]},"usqlextpublisher.usql-vscode-ext":{onFileOpen:[{pathGlob:"{**/*.usql}"}]},"ms-vscode.sublime-keybindings":{onFileOpen:[{pathGlob:"{**/.sublime-project,**/.sublime-workspace}"}]},"k--kato.intellij-idea-keybindings":{onFileOpen:[{pathGlob:"{**/.idea}"}]},"christian-kohler.npm-intellisense":{onFileOpen:[{pathGlob:"{**/package.json}"}]},"cake-build.cake-vscode":{onFileOpen:[{pathGlob:"{**/build.cake}"}]},"Angular.ng-template":{onFileOpen:[{pathGlob:"{**/.angular-cli.json,**/angular.json,**/*.ng.html,**/*.ng,**/*.ngml}"}]},"vscjava.vscode-maven":{onFileOpen:[{pathGlob:"**/pom.xml"}]},"ms-azuretools.vscode-azureterraform":{onFileOpen:[{pathGlob:"**/*.tf"}]},"HashiCorp.terraform":{onFileOpen:[{pathGlob:"**/*.tf"}]},"vsciot-vscode.vscode-arduino":{onFileOpen:[{pathGlob:"**/*.ino"}]},"ms-kubernetes-tools.vscode-kubernetes-tools":{onFileOpen:[{pathGlob:"{**/Chart.yaml}"}]},"Oracle.oracledevtools":{onFileOpen:[{pathGlob:"{**/*.sql}"}]},"betterthantomorrow.calva":{onFileOpen:[{pathGlob:"{**/*.clj,**/*.cljs}"}]},"vmware.vscode-boot-dev-pack":{onFileOpen:[{pathGlob:"{**/application.properties}"}]},"GitHub.copilot":{onFileOpen:[{pathGlob:"{**/*.ts,**/*.tsx,**/*.js,**/*.jsx,**/*.py,**/*.go,**/*.rb,**/*.html,**/*.css,**/*.php,**/*.cpp,**/*.vue,**/*.c,**/*.sql,**/*.java,**/*.cs,**/*.rs,**/*.dart,**/*.ps,**/*.ps1,**/*.tex}"}],onSettingsEditorOpen:{descriptionOverride:"GitHub Copilot is an AI pair programmer tool that helps you write code faster and smarter."}},"GitHub.vscode-github-actions":{onFileOpen:[{pathGlob:"{**/.github/workflows/*.yml}",important:!0}]},"circleci.circleci":{onFileOpen:[{pathGlob:"{**/.circleci/config.yml}"}]},"mechatroner.rainbow-csv":{onFileOpen:[{pathGlob:"**/*.csv",important:!0}]},"tomoki1207.pdf":{onFileOpen:[{pathGlob:"**/*.pdf",important:!0}]}},keymapExtensionTips:["vscodevim.vim","ms-vscode.sublime-keybindings","ms-vscode.atom-keybindings","ms-vscode.brackets-keybindings","ms-vscode.vs-keybindings","ms-vscode.notepadplusplus-keybindings","k--kato.intellij-idea-keybindings","lfs.vscode-emacs-friendly","alphabotsec.vscode-eclipse-keybindings","alefragnani.delphi-keybindings"],languageExtensionTips:["ms-python.python","ms-vscode.cpptools-extension-pack","ms-dotnettools.csdevkit","ms-toolsai.jupyter","vscjava.vscode-java-pack","ecmel.vscode-html-css","vue.volar","bmewburn.vscode-intelephense-client","dsznajder.es7-react-js-snippets","golang.go","ms-vscode.powershell","dart-code.dart-code","rust-lang.rust-analyzer","Shopify.ruby-lsp","GitHub.copilot"],configBasedExtensionTips:{git:{configPath:".git/config",configName:"Git",recommendations:{"github.vscode-pull-request-github":{name:"GitHub Pull Request",contentPattern:"^\\s*url\\s*=\\s*https:\\/\\/github\\.com.*$"},"eamodio.gitlens":{name:"GitLens"}}},devContainer:{configPath:".devcontainer/devcontainer.json",configName:"Dev Container",recommendations:{"ms-vscode-remote.remote-containers":{name:"Dev Containers",important:!0}}},maven:{configPath:"pom.xml",configName:"Maven",recommendations:{"vscjava.vscode-java-pack":{name:"Java",important:!0,isExtensionPack:!0,whenNotInstalled:["ASF.apache-netbeans-java","Oracle.oracle-java"]},"vmware.vscode-boot-dev-pack":{name:"Spring Boot Extension Pack",isExtensionPack:!0}}},gradle:{configPath:"build.gradle",configName:"Gradle",recommendations:{"vscjava.vscode-java-pack":{name:"Java",important:!0,isExtensionPack:!0,whenNotInstalled:["ASF.apache-netbeans-java","Oracle.oracle-java"]}}},"github-pull-request":{configPath:".vscode/.github-pull-request.rec",configName:"GitHub",configScheme:"vscode-vfs",recommendations:{"github.vscode-pull-request-github":{name:"GitHub Pull Request",important:!0}}},"pyproject-formatter":{configPath:"pyproject.toml",configName:"Python Formatter",recommendations:{"ms-python.black-formatter":{name:"Black Formatter",contentPattern:'(^\\s*\\[\\[?\\s*"?tool"?\\s*\\.\\s*"?black"?\\s*[\\].])|("black\\s*["[(<=>!~;@])'},"ms-python.autopep8":{name:"Autopep8",contentPattern:'(^\\s*\\[\\[?\\s*"?tool"?\\s*\\.\\s*"?autopep8"?\\s*[\\].])|("autopep8\\s*["[(<=>!~;@])'}}},"pep8-formatter":{configPath:".pep8",configName:"Python Formatter",recommendations:{"ms-python.autopep8":{name:"Autopep8"}}},"python-setup-cgf-formatter":{configPath:"setup.cfg",configName:"Python Formatter",recommendations:{"ms-python.autopep8":{name:"Autopep8",contentPattern:"^\\[pep8\\]"}}},"tox-ini-formatter":{configPath:"tox.ini",configName:"Python Formatter",recommendations:{"ms-python.autopep8":{name:"Autopep8",contentPattern:"^\\[pep8\\]"}}},"pyproject-linter":{configPath:"pyproject.toml",configName:"Python Linter",recommendations:{"ms-python.pylint":{name:"Pylint",contentPattern:'(^\\s*\\[\\[?\\s*"?tool"?\\s*\\.\\s*"?pylint"?\\s*[\\].])|("pylint\\s*["[(<=>!~;@])'},"charliermarsh.ruff":{name:"Ruff",contentPattern:'(^\\s*\\[\\[?\\s*"?tool"?\\s*\\.\\s*"?ruff"?\\s*[\\].])|("ruff\\s*["[(<=>!~;@])'},"ms-python.mypy-type-checker":{name:"Mypy Type Checker",contentPattern:'(^\\s*\\[\\[?\\s*"?tool"?\\s*\\.\\s*"?mypy"?\\s*[\\].])|("mypy\\s*["[(<=>!~;@])'},"ms-python.flake8":{name:"Flake8",contentPattern:'(^\\s*\\[\\[?\\s*"?tool"?\\s*\\.\\s*"?flake8"?\\s*[\\].])|("flake8\\s*["[(<=>!~;@])'}}},".pylintrc-linter":{configPath:".pylintrc",configName:"Python Linter",recommendations:{"ms-python.pylint":{name:"Pylint"}}},"pylintrc-linter":{configPath:"pylintrc",configName:"Python Linter",recommendations:{"ms-python.pylint":{name:"Pylint"}}},"mypy-ini-linter":{configPath:".mypy.ini",configName:"Python Linter",recommendations:{"ms-python.mypy-type-checker":{name:"Mypy Type Checker"}}},"tox-ini-linter":{configPath:"tox.ini",configName:"Python Linter",recommendations:{"ms-python.flake8":{name:"Flake8",contentPattern:"^\\[flake8\\]"}}},".flake8-linter":{configPath:".flake8",configName:"Python Linter",recommendations:{"ms-python.flake8":{name:"Flake8"}}},"python-setup-cgf-linter":{configPath:"setup.cfg",configName:"Python Linter",recommendations:{"ms-python.flake8":{name:"Flake8",contentPattern:"^\\[flake8\\]"}}}},exeBasedExtensionTips:{az:{friendlyName:"Azure CLI",windowsPath:"%ProgramFiles(x86)%\\Microsoft SDKs\\Azure\\CLI2\\wbin\\az.cmd",recommendations:{"ms-vscode.azurecli":{name:"Azure CLI Tools"}}},azd:{friendlyName:"Azure Dev CLI",windowsPath:"%USERPROFILE%\\AppData\\Local\\Programs\\Azure Dev CLI\\azd.exe",recommendations:{"ms-azuretools.azure-dev":{name:"Azure Developer CLI"},"ms-azuretools.vscode-azureresourcegroups":{name:"Azure Resources"}}},"azd-user":{friendlyName:"Azure Dev CLI",windowsPath:"%ProgramFiles%\\Azure Dev CLI\\azd.exe",recommendations:{"ms-azuretools.azure-dev":{name:"Azure Developer CLI"},"ms-azuretools.vscode-azureresourcegroups":{name:"Azure Resources"}}},heroku:{friendlyName:"Heroku CLI",windowsPath:"%ProgramFiles%\\Heroku\\bin\\heroku.cmd",recommendations:{"ms-azuretools.vscode-azureappservice":{name:"Azure App Service"},"pkosta2005.heroku-command":{name:"heroku-cli"}}},mongo:{friendlyName:"Mongo",windowsPath:"%ProgramFiles%\\MongoDB\\Server\\3.6\\bin\\mongod.exe",recommendations:{"ms-azuretools.vscode-cosmosdb":{name:"Azure Databases"}}},serverless:{friendlyName:"Serverless framework",windowsPath:"%APPDATA%\\npm\\serverless.cmd",recommendations:{"ms-azuretools.vscode-azurefunctions":{name:"Azure Functions"}}},func:{friendlyName:"Azure Function SDK",windowsPath:"%APPDATA%\\npm\\func.cmd",recommendations:{"ms-azuretools.vscode-azurefunctions":{name:"Azure Functions"}}},mysql:{friendlyName:"MySQL",windowsPath:"%ProgramFiles%\\MySQL\\MySQL Server 8.0\\bin\\mysqld.exe",recommendations:{"mtxr.sqltools":{name:"SQLTools"}}},postgres:{friendlyName:"PostgreSQL",windowsPath:"%ProgramFiles%\\PostgreSQL\\11\\bin\\psql.exe",recommendations:{"ms-ossdata.vscode-postgresql":{name:"PostgreSQL"},"mtxr.sqltools":{name:"SQLTools"}}},sqlcmd:{friendlyName:"SQL CLI",recommendations:{"ms-mssql.mssql":{name:"SQL Server (mssql)"}}},now:{friendlyName:"Now CLI",windowsPath:"%APPDATA%\\npm\\now.cmd",recommendations:{"ms-azuretools.vscode-azureappservice":{name:"Azure App Service"},"ms-azuretools.vscode-docker":{name:"Docker"}}},docker:{friendlyName:"Docker",windowsPath:"%ProgramFiles%\\Docker\\Docker\\Resources\\bin\\docker.exe",recommendations:{"ms-azuretools.vscode-docker":{name:"Docker",important:!0},"ms-vscode-remote.remote-containers":{name:"Dev Containers",important:!0},"ms-kubernetes-tools.vscode-kubernetes-tools":{name:"Kubernetes"}}},kubectl:{friendlyName:"Kubernetes",windowsPath:"%ProgramFiles%\\Docker\\Docker\\Resources\\bin\\kubectl.exe",recommendations:{"ms-azuretools.vscode-docker":{name:"Docker"},"ms-kubernetes-tools.vscode-kubernetes-tools":{name:"Kubernetes"},"ms-vscode-remote.remote-containers":{name:"Dev Containers"}}},ng:{friendlyName:"Angular CLI",windowsPath:"%APPDATA%\\npmexit\\ng.cmd",recommendations:{"johnpapa.Angular2":{name:"Angular Snippets"}}},"create-react-app":{friendlyName:"Create React App",windowsPath:"%APPDATA%\\npm\\create-react-app.cmd",recommendations:{"msjsdiag.vscode-react-native":{name:"React Native Tools"}}},"react-native":{friendlyName:"React Native",windowsPath:"%APPDATA%\\npm\\react-native-cli",recommendations:{"msjsdiag.vscode-react-native":{name:"React Native Tools"}}},p4:{friendlyName:"Perforce",recommendations:{"slevesque.perforce":{name:"Perforce for VS Code"}}},hg:{friendlyName:"Mercurial",recommendations:{"mrcrowl.hg":{name:"Hg"}}},git:{friendlyName:"Git",windowsPath:"%ProgramFiles%\\Git\\git-bash.exe",recommendations:{"eamodio.gitlens":{name:"GitLens"}}},svn:{friendlyName:"Subversion",windowsPath:"%ProgramFiles%\\TortoiseSVN\\bin\\TortoiseProc.exe",recommendations:{"johnstoncode.svn-scm":{name:"SVN"}}},subl:{friendlyName:"Sublime",windowsPath:"%ProgramFiles%\\Sublime Text3\\sublime_text.exe",recommendations:{"ms-vscode.sublime-keybindings":{name:"Sublime Text Keymap and Settings Importer"}}},atom:{friendlyName:"Atom",windowsPath:"%USERPROFILE%\\AppData\\Local\\atom\\bin\\atom.cmd",recommendations:{"ms-vscode.atom-keybindings":{name:"Atom Keymap"}}},brackets:{friendlyName:"Brackets",windowsPath:"%ProgramFiles(x86)%\\Brackets\\Brackets.exe",recommendations:{"ms-vscode.brackets-keybindings":{name:"Brackets Keymap"}}},notepadplusplus:{friendlyName:"Notepad++",windowsPath:"%ProgramFiles%\\Notepad++\\Notepad++.exe",recommendations:{"ms-vscode.notepadplusplus-keybindings":{name:"Notepad++ keymap"}}},vi:{friendlyName:"VIM",windowsPath:"%ProgramFiles(x86)%\\Vim\\vim80\\gvim.exe",recommendations:{"vscodevim.vim":{name:"Vim"}}},mvn:{friendlyName:"Maven",recommendations:{"vscjava.vscode-java-pack":{name:"Java",important:!0,isExtensionPack:!0,whenNotInstalled:["ASF.apache-netbeans-java","Oracle.oracle-java"]}}},gradle:{friendlyName:"Gradle",recommendations:{"vscjava.vscode-java-pack":{name:"Java",important:!0,isExtensionPack:!0,whenNotInstalled:["ASF.apache-netbeans-java","Oracle.oracle-java"]}}},"Microsoft Edge":{friendlyName:"Microsoft Edge",windowsPath:"%USERPROFILE%\\AppData\\Local\\Microsoft\\Edge\\Application\\msedge.exe",recommendations:{"ms-edgedevtools.vscode-edge-devtools":{name:"Microsoft Edge Developer Tools"}}},"Microsoft Edge Dev":{friendlyName:"Microsoft Edge Dev",windowsPath:"%USERPROFILE%\\AppData\\Local\\Microsoft\\Edge Dev\\Application\\msedge.exe",recommendations:{"ms-edgedevtools.vscode-edge-devtools":{name:"Microsoft Edge Developer Tools"}}},"Microsoft Edge Beta":{friendlyName:"Microsoft Edge Beta",windowsPath:"%USERPROFILE%\\AppData\\Local\\Microsoft\\Edge Beta\\Application\\msedge.exe",recommendations:{"ms-edgedevtools.vscode-edge-devtools":{name:"Microsoft Edge Developer Tools"}}},"Microsoft Edge Canary":{friendlyName:"Microsoft Edge Canary",windowsPath:"%USERPROFILE%\\AppData\\Local\\Microsoft\\Edge SxS\\Application\\msedge.exe",recommendations:{"ms-edgedevtools.vscode-edge-devtools":{name:"Microsoft Edge Developer Tools"}}},"Mozilla Firefox (x86)":{friendlyName:"Mozilla Firefox",windowsPath:"%ProgramFiles(x86)%\\Mozilla Firefox\\firefox.exe",recommendations:{"firefox-devtools.vscode-firefox-debug":{name:"Debugger for Firefox"}}},"Mozilla Firefox Developer Edition (x86)":{friendlyName:"Mozilla Firefox Developer Edition",windowsPath:"%ProgramFiles(x86)%\\Firefox Developer Edition\\firefox.exe",recommendations:{"firefox-devtools.vscode-firefox-debug":{name:"Debugger for Firefox"}}},"Mozilla Firefox":{friendlyName:"Mozilla Firefox",windowsPath:"%ProgramFiles%\\Mozilla Firefox\\firefox.exe",recommendations:{"firefox-devtools.vscode-firefox-debug":{name:"Debugger for Firefox"}}},"Mozilla Firefox Developer Edition":{friendlyName:"Mozilla Firefox Developer Edition",windowsPath:"%ProgramFiles%\\Firefox Developer Edition\\firefox.exe",recommendations:{"firefox-devtools.vscode-firefox-debug":{name:"Debugger for Firefox"}}},cordova:{friendlyName:"Cordova",windowsPath:"%APPDATA%\\npm\\cordova",recommendations:{"msjsdiag.cordova-tools":{name:"Cordova Tools"}}},gcloud:{friendlyName:"Google GCloud CLI",windowsPath:"%ProgramFiles(x86)%\\Google\\Cloud SDK\\google-cloud-sdk\\bin\\gcloud.cmd",recommendations:{"GoogleCloudTools.cloudcode":{name:"Cloud Code"}}},skaffold:{friendlyName:"Skaffold Code to Cluster",recommendations:{"ms-azuretools.vscode-docker":{name:"Docker"},"ms-kubernetes-tools.vscode-kubernetes-tools":{name:"Kubernetes"}}},minikube:{friendlyName:"MiniKube Local Kubernetes Cluster",recommendations:{"ms-azuretools.vscode-docker":{name:"Docker"},"ms-kubernetes-tools.vscode-kubernetes-tools":{name:"Kubernetes"},"ms-vscode-remote.remote-containers":{name:"Dev Containers"}}},podman:{friendlyName:"Podman",recommendations:{"ms-vscode-remote.remote-containers":{name:"Dev Containers"}}},wsl:{friendlyName:"Windows Subsystem for Linux (WSL)",windowsPath:"%WINDIR%\\system32\\lxss\\LxssManager.dll",important:!0,recommendations:{"ms-vscode-remote.remote-wsl":{name:"WSL",important:!0}}}},webExtensionTips:["tyriar.luna-paint","codespaces-contrib.codeswing","ms-vscode.vscode-github-issue-notebooks","esbenp.prettier-vscode","hediet.vscode-drawio"],virtualWorkspaceExtensionTips:{"vscode-vfs":{friendlyName:"Remote Repositories",extensionId:"ms-vscode.remote-repositories",startEntry:{helpLink:"https://aka.ms/vscode-remote/remote-repositories",startConnectLabel:"Remote Repository",startCommand:"remoteHub.continueOn.openRepository",priority:5}}},remoteExtensionTips:{wsl:{friendlyName:"WSL",extensionId:"ms-vscode-remote.remote-wsl",supportedPlatforms:["Windows","Web"],startEntry:{helpLink:"https://aka.ms/vscode-remote/wsl",startConnectLabel:"WSL",startCommand:"remote-wsl.connect",priority:3}},"ssh-remote":{friendlyName:"Remote - SSH",extensionId:"ms-vscode-remote.remote-ssh",supportedPlatforms:["Windows","Linux","Mac"],startEntry:{helpLink:"https://aka.ms/vscode-remote/ssh",startConnectLabel:"SSH ",startCommand:"opensshremotes.openEmptyWindowInCurrentWindow",priority:1}},"dev-container":{friendlyName:"Dev Containers",extensionId:"ms-vscode-remote.remote-containers",supportedPlatforms:["Windows","Linux","Mac"],startEntry:{helpLink:"https://aka.ms/vscode-remote/containers",startConnectLabel:"Dev Container",startCommand:"remote-containers.reopenInContainer",priority:2}},"attached-container":{friendlyName:"Dev Containers",extensionId:"ms-vscode-remote.remote-containers"},codespaces:{friendlyName:"GitHub Codespaces",extensionId:"github.codespaces",startEntry:{helpLink:"https://aka.ms/vscode-remote-codespaces",startConnectLabel:"GitHub Codespace ",startCommand:"github.codespaces.connect",priority:4}},tunnel:{friendlyName:"Remote - Tunnels",extensionId:"ms-vscode.remote-server",startEntry:{helpLink:"https://aka.ms/remote-tunnels-doc",startConnectLabel:"Tunnel",startCommand:"remote-tunnels.connectCurrentWindowToTunnel",priority:0}}},commandPaletteSuggestedCommandIds:["workbench.action.files.openFile","workbench.action.files.openFileFolder","workbench.action.files.openFolder","workbench.action.remote.showMenu","editor.action.formatDocument","editor.action.commentLine","workbench.action.tasks.runTask","workbench.action.openSettings2","workbench.action.selectTheme","workbench.action.openWalkthrough","workbench.action.openIssueReporter"],extensionKeywords:{md:["Markdown"],js:["JavaScript"],jsx:["JavaScript"],es6:["JavaScript"],html:["Html"],ts:["TypeScript"],tsx:["TypeScript"],css:["CSS"],scss:["SASS"],txt:["Text"],php:["PHP"],php3:["PHP"],php4:["PHP"],ph3:["PHP"],ph4:["PHP"],xml:["XML"],py:["Python"],pyc:["Python"],pyd:["Python"],pyo:["Python"],pyw:["Python"],pyz:["Python"],java:["Java"],class:["Java"],jar:["Java"],c:["c","objective c","objective-c"],m:["objective c","objective-c"],mm:["objective c","objective-c"],cpp:["cpp","c plus plus","c","c++"],cc:["cpp","c plus plus","c","c++"],cxx:["cpp","c plus plus","c++"],hh:["cpp","c plus plus","c++"],hpp:["cpp","c++"],h:["cpp","c plus plus","c++","c","objective c","objective-c"],sql:["sql"],sh:["bash"],bash:["bash"],zsh:["bash","zshell"],cs:["c#","csharp"],csproj:["c#","csharp"],sln:["c#","csharp"],go:["go"],sty:["latex"],tex:["latex"],ps:["powershell"],ps1:["powershell"],rs:["rust"],rslib:["rust"],hs:["haskell"],lhs:["haskell"],scm:["scheme"],ss:["scheme"],clj:["clojure"],cljs:["clojure"],cljc:["clojure"],edn:["clojure"],erl:["erlang"],hrl:["erlang"],scala:["scala"],sc:["scala"],pl:["perl"],pm:["perl"],t:["perl"],pod:["perl"],groovy:["groovy"],swift:["swift"],rb:["ruby"],rbw:["ruby"],jl:["julia"],f:["fortran"],for:["fortran"],f90:["fortran"],f95:["fortran"],coffee:["CoffeeScript"],litcoffee:["CoffeeScript"],yaml:["yaml"],yml:["yaml"],dart:["dart"],json:["json"]},extensionAllowedBadgeProviders:["api.bintray.com","api.travis-ci.com","api.travis-ci.org","app.fossa.io","badge.buildkite.com","badge.fury.io","badge.waffle.io","badgen.net","badges.frapsoft.com","badges.gitter.im","badges.greenkeeper.io","cdn.travis-ci.com","cdn.travis-ci.org","ci.appveyor.com","circleci.com","cla.opensource.microsoft.com","codacy.com","codeclimate.com","codecov.io","coveralls.io","david-dm.org","deepscan.io","dev.azure.com","docs.rs","flat.badgen.net","gemnasium.com","githost.io","gitlab.com","godoc.org","goreportcard.com","img.shields.io","isitmaintained.com","marketplace.visualstudio.com","nodesecurity.io","opencollective.com","snyk.io","travis-ci.com","travis-ci.org","visualstudio.com","vsmarketplacebadge.apphb.com","www.bithound.io","www.versioneye.com"],extensionAllowedBadgeProvidersRegex:["^https:\\/\\/github\\.com\\/[^/]+\\/[^/]+\\/(actions\\/)?workflows\\/.*badge\\.svg"],crashReporter:{productName:"VSCode",companyName:"Microsoft"},appCenter:{"win32-x64":"appcenter://code?aid=a4e3233c-699c-46ec-b4f4-9c2a77254662","win32-arm64":"appcenter://code?aid=3712d786-7cc8-4f11-8b08-cc12eab6d4f7","linux-x64":"appcenter://code?aid=fba07a4d-84bd-4fc8-a125-9640fc8ce171",darwin:"appcenter://code?aid=860d6632-f65b-490b-85a8-3e72944f7774","darwin-arm64":"appcenter://code?aid=be71415d-3893-4ae5-b453-e537b9668a10","darwin-universal":"appcenter://code?aid=de75e3cc-e22f-4f42-a03f-1409c21d8af8"},enableTelemetry:!0,aiConfig:{ariaKey:"5bbf946d11a54f6783919c455abaddaf-fd62977b-c92d-4714-a45d-649d06980372-7168"},msftInternalDomains:["redmond.corp.microsoft.com","northamerica.corp.microsoft.com","fareast.corp.microsoft.com","ntdev.corp.microsoft.com","wingroup.corp.microsoft.com","southpacific.corp.microsoft.com","wingroup.windeploy.ntdev.microsoft.com","ddnet.microsoft.com","europe.corp.microsoft.com"],documentationUrl:"https://go.microsoft.com/fwlink/?LinkID=533484#vscode",serverDocumentationUrl:"https://aka.ms/vscode-server-doc",releaseNotesUrl:"https://go.microsoft.com/fwlink/?LinkID=533483#vscode",keyboardShortcutsUrlMac:"https://go.microsoft.com/fwlink/?linkid=832143",keyboardShortcutsUrlLinux:"https://go.microsoft.com/fwlink/?linkid=832144",keyboardShortcutsUrlWin:"https://go.microsoft.com/fwlink/?linkid=832145",introductoryVideosUrl:"https://go.microsoft.com/fwlink/?linkid=832146",tipsAndTricksUrl:"https://go.microsoft.com/fwlink/?linkid=852118",newsletterSignupUrl:"https://www.research.net/r/vsc-newsletter",youTubeUrl:"https://aka.ms/vscode-youtube",requestFeatureUrl:"https://go.microsoft.com/fwlink/?LinkID=533482",reportIssueUrl:"https://github.com/Microsoft/vscode/issues/new",reportMarketplaceIssueUrl:"https://github.com/microsoft/vsmarketplace/issues/new",licenseUrl:"https://go.microsoft.com/fwlink/?LinkID=533485",serverLicenseUrl:"https://aka.ms/vscode-server-license",privacyStatementUrl:"https://go.microsoft.com/fwlink/?LinkId=521839",showTelemetryOptOut:!0,npsSurveyUrl:"https://aka.ms/vscode-nps",checksumFailMoreInfoUrl:"https://go.microsoft.com/fwlink/?LinkId=828886",electronRepository:"Microsoft/vscode-electron-prebuilt",nodejsRepository:"Microsoft/vscode-node",settingsSearchUrl:"https://bingsettingssearch.trafficmanager.net/api/Search",surveys:[{surveyId:"cpp.1",surveyUrl:"https://www.research.net/r/VBVV6C6",languageId:"cpp",editCount:10,userProbability:.15},{surveyId:"java.2",surveyUrl:"https://www.research.net/r/vscodejava",languageId:"java",editCount:10,userProbability:.3},{surveyId:"javascript.1",surveyUrl:"https://www.research.net/r/vscode-js",languageId:"javascript",editCount:10,userProbability:.05},{surveyId:"typescript.1",surveyUrl:"https://www.research.net/r/vscode-ts",languageId:"typescript",editCount:10,userProbability:.05},{surveyId:"csharp.1",surveyUrl:"https://www.research.net/r/8KGJ9V8",languageId:"csharp",editCount:10,userProbability:.1}],extensionsEnabledWithApiProposalVersion:["GitHub.copilot-chat"],extensionEnabledApiProposals:{"ms-vscode.vscode-selfhost-test-provider":["testObserver","testRelatedCode","attributableCoverage"],"VisualStudioExptTeam.vscodeintellicode-completions":["inlineCompletionsAdditions"],"ms-vsliveshare.vsliveshare":["contribMenuBarHome","contribShareMenu","contribStatusBarItems","diffCommand","documentFiltersExclusive","fileSearchProvider","findTextInFiles","notebookCellExecutionState","notebookLiveShare","terminalDimensions","terminalDataWriteEvent","textSearchProvider"],"ms-vscode.js-debug":["portsAttributes","findTextInFiles","workspaceTrust","tunnels"],"ms-toolsai.vscode-ai-remote":["resolvers"],"ms-python.python":["codeActionAI","contribEditorContentMenu","quickPickSortByLabel","portsAttributes","testObserver","quickPickItemTooltip","terminalDataWriteEvent","terminalExecuteCommandEvent","contribIssueReporter","notebookReplDocument","notebookVariableProvider"],"ms-dotnettools.dotnet-interactive-vscode":["notebookMessaging"],"GitHub.codespaces":["contribEditSessions","contribMenuBarHome","contribRemoteHelp","contribViewsRemote","resolvers","tunnels","terminalDataWriteEvent","treeViewReveal","notebookKernelSource"],"ms-vscode.azure-repos":["extensionRuntime","fileSearchProvider","textSearchProvider"],"ms-vscode.remote-repositories":["canonicalUriProvider","contribEditSessions","contribRemoteHelp","contribMenuBarHome","contribViewsRemote","contribViewsWelcome","contribShareMenu","documentFiltersExclusive","editSessionIdentityProvider","extensionRuntime","fileSearchProvider","quickPickSortByLabel","workspaceTrust","shareProvider","scmActionButton","scmSelectedProvider","scmValidation","textSearchProvider","timeline"],"ms-vscode-remote.remote-wsl":["resolvers","contribRemoteHelp","contribViewsRemote","telemetry"],"ms-vscode-remote.remote-ssh":["resolvers","tunnels","terminalDataWriteEvent","contribRemoteHelp","contribViewsRemote","telemetry"],"ms-vscode.remote-server":["resolvers","tunnels","contribViewsWelcome"],"ms-vscode.remote-explorer":["contribRemoteHelp","contribViewsRemote","extensionsAny"],"ms-vscode-remote.remote-containers":["contribEditSessions","resolvers","portsAttributes","tunnels","workspaceTrust","terminalDimensions","contribRemoteHelp","contribViewsRemote"],"ms-vscode.js-debug-nightly":["portsAttributes","findTextInFiles","workspaceTrust","tunnels"],"ms-vscode.lsif-browser":["documentFiltersExclusive"],"ms-vscode.vscode-speech":["speech"],"GitHub.vscode-pull-request-github":["activeComment","codiconDecoration","codeActionRanges","commentingRangeHint","commentReactor","commentReveal","commentThreadApplicability","contribAccessibilityHelpContent","contribCommentEditorActionsMenu","contribCommentPeekContext","contribCommentThreadAdditionalMenu","contribCommentsViewThreadMenus","contribEditorContentMenu","contribMultiDiffEditorMenus","contribShareMenu","diffCommand","fileComments","quickDiffProvider","shareProvider","tabInputTextMerge","tokenInformation","treeViewMarkdownMessage"],"GitHub.copilot":["inlineCompletionsAdditions"],"GitHub.copilot-nightly":["inlineCompletionsAdditions"],"GitHub.copilot-chat":["interactive","terminalDataWriteEvent","terminalExecuteCommandEvent","terminalSelection","terminalQuickFixProvider","chatParticipantAdditions","defaultChatParticipant","embeddings","chatVariableResolver","chatProvider","mappedEditsProvider","aiRelatedInformation","codeActionAI","findTextInFiles","textSearchProvider","activeComment","commentReveal","contribSourceControlInputBoxMenu","contribCommentEditorActionsMenu","contribCommentThreadAdditionalMenu","contribCommentsViewThreadMenus","newSymbolNamesProvider","findFiles2","extensionsAny","authLearnMore","testObserver","aiTextSearchProvider","documentFiltersExclusive","chatParticipantPrivate","lmTools","contribDebugCreateConfiguration","inlineEdit"],"GitHub.remotehub":["contribRemoteHelp","contribMenuBarHome","contribViewsRemote","contribViewsWelcome","documentFiltersExclusive","extensionRuntime","fileSearchProvider","quickPickSortByLabel","workspaceTrust","scmSelectedProvider","scmValidation","textSearchProvider","timeline"],"ms-python.gather":["notebookCellExecutionState"],"ms-python.vscode-pylance":["notebookCellExecutionState"],"ms-python.debugpy":["contribIssueReporter","contribViewsWelcome","debugVisualization","portsAttributes"],"ms-toolsai.jupyter-renderers":["contribNotebookStaticPreloads"],"ms-toolsai.jupyter":["notebookDeprecated","notebookMessaging","notebookMime","notebookCellExecutionState","portsAttributes","quickPickSortByLabel","notebookKernelSource","interactiveWindow","notebookControllerAffinityHidden","contribNotebookStaticPreloads","quickPickItemTooltip","notebookExecution","notebookCellExecution","notebookVariableProvider","notebookReplDocument"],"dbaeumer.vscode-eslint":["notebookCellExecutionState"],"ms-vscode.azure-sphere-tools-ui":["tunnels"],"ms-azuretools.vscode-azureappservice":["terminalDataWriteEvent"],"ms-azuretools.vscode-azure-github-copilot":["contribChatParticipantDetection","lmTools"],"ms-vscode.anycode":["extensionsAny"],"ms-vscode.cpptools":["terminalDataWriteEvent","lmTools"],"redhat.java":["documentPaste"],"vscjava.vscode-java-pack":["lmTools"],"ms-dotnettools.csdevkit":["inlineCompletionsAdditions"],"ms-dotnettools.vscodeintellicode-csharp":["inlineCompletionsAdditions"],"microsoft-IsvExpTools.powerplatform-vscode":["fileSearchProvider","textSearchProvider"],"microsoft-IsvExpTools.powerplatform-vscode-preview":["fileSearchProvider","textSearchProvider"],"TeamsDevApp.ms-teams-vscode-extension":["chatParticipantAdditions","languageModelSystem"],"ms-toolsai.datawrangler":["lmTools"]},tasConfig:{endpoint:"https://default.exp-tas.com/vscode/ab",telemetryEventName:"query-expfeature",assignmentContextTelemetryPropertyName:"abexp.assignmentcontext"},extensionKind:{"Shan.code-settings-sync":["ui"],"shalldie.background":["ui"],"techer.open-in-browser":["ui"],"CoenraadS.bracket-pair-colorizer-2":["ui"],"CoenraadS.bracket-pair-colorizer":["ui","workspace"],"hiro-sun.vscode-emacs":["ui","workspace"],"hnw.vscode-auto-open-markdown-preview":["ui","workspace"],"wayou.vscode-todo-highlight":["ui","workspace"],"aaron-bond.better-comments":["ui","workspace"],"vscodevim.vim":["ui"],"ollyhayes.colmak-vim":["ui"]},extensionPointExtensionKind:{typescriptServerPlugins:["workspace"]},extensionSyncedKeys:{"ritwickdey.liveserver":["liveServer.setup.version"]},extensionVirtualWorkspacesSupport:{"esbenp.prettier-vscode":{default:!1},"msjsdiag.debugger-for-chrome":{default:!1},"redhat.java":{default:!1},"HookyQR.beautify":{default:!1},"ritwickdey.LiveServer":{default:!1},"VisualStudioExptTeam.vscodeintellicode":{default:!1},"octref.vetur":{default:!1},"formulahendry.code-runner":{default:!1},"xdebug.php-debug":{default:!1},"ms-mssql.mssql":{default:!1},"christian-kohler.path-intellisense":{default:!1},"eg2.tslint":{default:!1},"eg2.vscode-npm-script":{default:!1},"donjayamanne.githistory":{default:!1},"Zignd.html-css-class-completion":{default:!1},"christian-kohler.npm-intellisense":{default:!1},"EditorConfig.EditorConfig":{default:!1},"austin.code-gnu-global":{default:!1},"johnpapa.Angular2":{default:!1},"ms-vscode.vscode-typescript-tslint-plugin":{default:!1},"DotJoshJohnson.xml":{default:!1},"techer.open-in-browser":{default:!1},"tht13.python":{default:!1},"bmewburn.vscode-intelephense-client":{default:!1},"Angular.ng-template":{default:!1},"xdebug.php-pack":{default:!1},"dbaeumer.jshint":{default:!1},"yzhang.markdown-all-in-one":{default:!1},"Dart-Code.flutter":{default:!1},"streetsidesoftware.code-spell-checker":{default:!1},"rebornix.Ruby":{default:!1},"ms-vscode.sublime-keybindings":{default:!1},"mitaki28.vscode-clang":{default:!1},"steoates.autoimport":{default:!1},"donjayamanne.python-extension-pack":{default:!1},"shd101wyy.markdown-preview-enhanced":{default:!1},"mikestead.dotenv":{default:!1},"pranaygp.vscode-css-peek":{default:!1},"ikappas.phpcs":{default:!1},"platformio.platformio-ide":{default:!1},"jchannon.csharpextensions":{default:!1},"gruntfuggly.todo-tree":{default:!1}},linkProtectionTrustedDomains:["https://*.visualstudio.com","https://*.microsoft.com","https://aka.ms","https://*.gallerycdn.vsassets.io","https://*.github.com","https://login.microsoftonline.com","https://*.vscode.dev","https://*.github.dev","https://gh.io","https://portal.azure.com","https://raw.githubusercontent.com","https://private-user-images.githubusercontent.com","https://avatars.githubusercontent.com"],trustedExtensionAuthAccess:{github:["vscode.github","github.remotehub","ms-vscode.remote-server","github.vscode-pull-request-github","github.codespaces","github.copilot","github.copilot-chat","ms-vsliveshare.vsliveshare"],"github-enterprise":["vscode.github","github.remotehub","ms-vscode.remote-server","github.vscode-pull-request-github","github.codespaces","github.copilot","github.copilot-chat","ms-vsliveshare.vsliveshare"],microsoft:["ms-vscode.azure-repos","ms-vscode.remote-server","ms-vsliveshare.vsliveshare","ms-azuretools.vscode-azureresourcegroups","ms-edu.vscode-learning","ms-toolsai.vscode-ai","ms-toolsai.vscode-ai-remote"],"microsoft-sovereign-cloud":["ms-vscode.azure-repos","ms-vscode.remote-server","ms-vsliveshare.vsliveshare","ms-azuretools.vscode-azureresourcegroups","ms-edu.vscode-learning","ms-toolsai.vscode-ai","ms-toolsai.vscode-ai-remote"]},trustedExtensionProtocolHandlers:["vscode.git","vscode.github-authentication","vscode.microsoft-authentication"],inheritAuthAccountPreference:{"github.copilot":["github.copilot-chat"]},auth:{loginUrl:"https://login.microsoftonline.com/common/oauth2/authorize",tokenUrl:"https://login.microsoftonline.com/common/oauth2/token",redirectUrl:"https://vscode-redirect.azurewebsites.net/",clientId:"aebc6443-996d-45c2-90f0-388ff96faa56"},"configurationSync.store":{url:"https://vscode-sync.trafficmanager.net/",stableUrl:"https://vscode-sync.trafficmanager.net/",insidersUrl:"https://vscode-sync-insiders.trafficmanager.net/",canSwitch:!1,authenticationProviders:{github:{scopes:["user:email"]},microsoft:{scopes:["openid","profile","email","offline_access"]}}},"editSessions.store":{url:"https://vscode-sync.trafficmanager.net/",authenticationProviders:{microsoft:{scopes:["openid","profile","email","offline_access"]},github:{scopes:["user:email"]}}},tunnelServerQualities:{stable:{serverApplicationName:"code-server"},exploration:{serverApplicationName:"code-server-exploration"},insider:{serverApplicationName:"code-server-insiders"}},tunnelApplicationName:"code-tunnel",tunnelApplicationConfig:{editorWebUrl:"https://vscode.dev",extension:{friendlyName:"Remote - Tunnels",extensionId:"ms-vscode.remote-server"},authenticationProviders:{github:{scopes:["user:email","read:org"]},microsoft:{scopes:["46da2f7e-b5ef-422a-88d4-2a7f9de6a0b2/.default","profile","openid"]}}},win32TunnelServiceMutex:"vscode-tunnelservice",win32TunnelMutex:"vscode-tunnel",commonlyUsedSettings:["files.autoSave","editor.fontSize","editor.fontFamily","GitHub.copilot.manageExtension","editor.tabSize","editor.renderWhitespace","editor.cursorStyle","editor.multiCursorModifier","editor.insertSpaces","editor.wordWrap","files.exclude","files.associations","workbench.editor.enablePreview"],aiGeneratedWorkspaceTrust:{title:"This workspace was generated by GitHub Copilot",checkboxText:"Trust the contents of all files in this workspace",trustOption:"Yes, I trust the contents",dontTrustOption:"No, I don't trust the contents",startupTrustRequestLearnMore:"If you don't trust the contents of the files generated by GitHub Copilot, we recommend continuing in restricted mode. See [our docs](https://aka.ms/vscode-workspace-trust) to learn more. "},gitHubEntitlement:{providerId:"github",command:{title:"Install GitHub Copilot (Paid for by {{org}})...",titleWithoutPlaceHolder:"Install GitHub Copilot",action:"workbench.extensions.installExtension",when:"workbench.accounts.experimental.showEntitlements"},entitlementUrl:"https://api.github.com/copilot_internal/user",extensionId:"github.copilot",enablementKey:"chat_enabled",confirmationAction:"Install",confirmationMessage:"Are you sure you want to install GitHub Copilot?"},chatParticipantRegistry:"https://az764295.vo.msecnd.net/extensions/chat.json",builtInExtensions:[{name:"ms-vscode.js-debug-companion",version:"1.1.3",sha256:"7380a890787452f14b2db7835dfa94de538caf358ebc263f9d46dd68ac52de93",repo:"https://github.com/microsoft/vscode-js-debug-companion",metadata:{id:"99cb0b7f-7354-4278-b8da-6cc79972169d",publisherId:{publisherId:"5f5636e7-69ed-4afe-b5d6-8d231fb3d3ee",publisherName:"ms-vscode",displayName:"Microsoft",flags:"verified"},publisherDisplayName:"Microsoft"}},{name:"ms-vscode.js-debug",version:"1.94.0",sha256:"439ee7d384999fb1726296801bfcad9dcc9bad6622ae54317fc51ef99e0b2552",repo:"https://github.com/microsoft/vscode-js-debug",metadata:{id:"25629058-ddac-4e17-abba-74678e126c5d",publisherId:{publisherId:"5f5636e7-69ed-4afe-b5d6-8d231fb3d3ee",publisherName:"ms-vscode",displayName:"Microsoft",flags:"verified"},publisherDisplayName:"Microsoft"}},{name:"ms-vscode.vscode-js-profile-table",version:"1.0.10",sha256:"7361748ddf9fd09d8a2ed1f2a2d7376a2cf9aae708692820b799708385c38e08",repo:"https://github.com/microsoft/vscode-js-profile-visualizer",metadata:{id:"7e52b41b-71ad-457b-ab7e-0620f1fc4feb",publisherId:{publisherId:"5f5636e7-69ed-4afe-b5d6-8d231fb3d3ee",publisherName:"ms-vscode",displayName:"Microsoft",flags:"verified"},publisherDisplayName:"Microsoft"}}],version:"1.94.2",commit:"384ff7382de624fb94dbaf6da11977bba1ecd427",date:"2024-10-09T16:08:44.566Z"},Object.keys(Wr).length===0&&Object.assign(Wr,{version:"1.94.0-dev",nameShort:"Code - OSS Dev",nameLong:"Code - OSS Dev",applicationName:"code-oss",dataFolderName:".vscode-oss",urlProtocol:"code-oss",reportIssueUrl:"https://github.com/microsoft/vscode/issues/new",licenseName:"MIT",licenseUrl:"https://github.com/microsoft/vscode/blob/main/LICENSE.txt",serverLicenseUrl:"https://github.com/microsoft/vscode/blob/main/LICENSE.txt"});var ZD=Wr,O5=class l3{static{this.count=0}constructor(t){this._proxyIdentifierBrand=void 0,this.sid=t,this.nid=++l3.count}},M5=[];function B(e){const t=new O5(e);return M5[t.nid]=t,t}function Jh(e){return M5[e].sid}var ei=class{constructor(e){this.value=e}},j5;(function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"})(j5||(j5={}));var U5;(function(e){e[e.UnknownInput=0]="UnknownInput",e[e.TextInput=1]="TextInput",e[e.TextDiffInput=2]="TextDiffInput",e[e.TextMergeInput=3]="TextMergeInput",e[e.NotebookInput=4]="NotebookInput",e[e.NotebookDiffInput=5]="NotebookDiffInput",e[e.CustomEditorInput=6]="CustomEditorInput",e[e.WebviewEditorInput=7]="WebviewEditorInput",e[e.TerminalEditorInput=8]="TerminalEditorInput",e[e.InteractiveEditorInput=9]="InteractiveEditorInput",e[e.ChatEditorInput=10]="ChatEditorInput",e[e.MultiDiffEditorInput=11]="MultiDiffEditorInput"})(U5||(U5={}));var H5;(function(e){e[e.TAB_OPEN=0]="TAB_OPEN",e[e.TAB_CLOSE=1]="TAB_CLOSE",e[e.TAB_UPDATE=2]="TAB_UPDATE",e[e.TAB_MOVE=3]="TAB_MOVE"})(H5||(H5={}));var B5;(function(e){e[e.Editable=0]="Editable",e[e.SupportsHotExit=1]="SupportsHotExit"})(B5||(B5={}));var z5;(function(e){e[e.Int8Array=1]="Int8Array",e[e.Uint8Array=2]="Uint8Array",e[e.Uint8ClampedArray=3]="Uint8ClampedArray",e[e.Int16Array=4]="Int16Array",e[e.Uint16Array=5]="Uint16Array",e[e.Int32Array=6]="Int32Array",e[e.Uint32Array=7]="Uint32Array",e[e.Float32Array=8]="Float32Array",e[e.Float64Array=9]="Float64Array",e[e.BigInt64Array=10]="BigInt64Array",e[e.BigUint64Array=11]="BigUint64Array"})(z5||(z5={}));var _5;(function(e){e[e.Text=1]="Text",e[e.Error=2]="Error",e[e.Rich=3]="Rich"})(_5||(_5={}));var W5;(function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"})(W5||(W5={}));var Tm;(function(e){e[e.None=0]="None",e[e.Process=1]="Process",e[e.Output=2]="Output",e[e.Hybrid=3]="Hybrid"})(Tm||(Tm={}));var Vz=class u3{static{this.a=0}static mixin(t){return t._id=u3.a++,t}},V5;(function(e){e.label="a",e.kind="b",e.detail="c",e.documentation="d",e.sortText="e",e.filterText="f",e.preselect="g",e.insertText="h",e.insertTextRules="i",e.range="j",e.commitCharacters="k",e.additionalTextEdits="l",e.kindModifier="m",e.commandIdent="n",e.commandId="o",e.commandArguments="p"})(V5||(V5={}));var q5;(function(e){e.defaultRanges="a",e.completions="b",e.isIncomplete="c",e.duration="d"})(q5||(q5={}));var G5;(function(e){e[e.Workspace=0]="Workspace",e[e.TextDocument=1]="TextDocument"})(G5||(G5={}));var K={MainThreadAuthentication:B("MainThreadAuthentication"),MainThreadBulkEdits:B("MainThreadBulkEdits"),MainThreadLanguageModels:B("MainThreadLanguageModels"),MainThreadEmbeddings:B("MainThreadEmbeddings"),MainThreadChatAgents2:B("MainThreadChatAgents2"),MainThreadCodeMapper:B("MainThreadCodeMapper"),MainThreadChatVariables:B("MainThreadChatVariables"),MainThreadLanguageModelTools:B("MainThreadChatSkills"),MainThreadClipboard:B("MainThreadClipboard"),MainThreadCommands:B("MainThreadCommands"),MainThreadComments:B("MainThreadComments"),MainThreadConfiguration:B("MainThreadConfiguration"),MainThreadConsole:B("MainThreadConsole"),MainThreadDebugService:B("MainThreadDebugService"),MainThreadDecorations:B("MainThreadDecorations"),MainThreadDiagnostics:B("MainThreadDiagnostics"),MainThreadDialogs:B("MainThreadDiaglogs"),MainThreadDocuments:B("MainThreadDocuments"),MainThreadDocumentContentProviders:B("MainThreadDocumentContentProviders"),MainThreadTextEditors:B("MainThreadTextEditors"),MainThreadEditorInsets:B("MainThreadEditorInsets"),MainThreadEditorTabs:B("MainThreadEditorTabs"),MainThreadErrors:B("MainThreadErrors"),MainThreadTreeViews:B("MainThreadTreeViews"),MainThreadDownloadService:B("MainThreadDownloadService"),MainThreadLanguageFeatures:B("MainThreadLanguageFeatures"),MainThreadLanguages:B("MainThreadLanguages"),MainThreadLogger:B("MainThreadLogger"),MainThreadMessageService:B("MainThreadMessageService"),MainThreadOutputService:B("MainThreadOutputService"),MainThreadProgress:B("MainThreadProgress"),MainThreadQuickDiff:B("MainThreadQuickDiff"),MainThreadQuickOpen:B("MainThreadQuickOpen"),MainThreadStatusBar:B("MainThreadStatusBar"),MainThreadSecretState:B("MainThreadSecretState"),MainThreadStorage:B("MainThreadStorage"),MainThreadSpeech:B("MainThreadSpeechProvider"),MainThreadTelemetry:B("MainThreadTelemetry"),MainThreadTerminalService:B("MainThreadTerminalService"),MainThreadTerminalShellIntegration:B("MainThreadTerminalShellIntegration"),MainThreadWebviews:B("MainThreadWebviews"),MainThreadWebviewPanels:B("MainThreadWebviewPanels"),MainThreadWebviewViews:B("MainThreadWebviewViews"),MainThreadCustomEditors:B("MainThreadCustomEditors"),MainThreadUrls:B("MainThreadUrls"),MainThreadUriOpeners:B("MainThreadUriOpeners"),MainThreadProfileContentHandlers:B("MainThreadProfileContentHandlers"),MainThreadWorkspace:B("MainThreadWorkspace"),MainThreadFileSystem:B("MainThreadFileSystem"),MainThreadFileSystemEventService:B("MainThreadFileSystemEventService"),MainThreadExtensionService:B("MainThreadExtensionService"),MainThreadSCM:B("MainThreadSCM"),MainThreadSearch:B("MainThreadSearch"),MainThreadShare:B("MainThreadShare"),MainThreadTask:B("MainThreadTask"),MainThreadWindow:B("MainThreadWindow"),MainThreadLabelService:B("MainThreadLabelService"),MainThreadNotebook:B("MainThreadNotebook"),MainThreadNotebookDocuments:B("MainThreadNotebookDocumentsShape"),MainThreadNotebookEditors:B("MainThreadNotebookEditorsShape"),MainThreadNotebookKernels:B("MainThreadNotebookKernels"),MainThreadNotebookRenderers:B("MainThreadNotebookRenderers"),MainThreadInteractive:B("MainThreadInteractive"),MainThreadTheming:B("MainThreadTheming"),MainThreadTunnelService:B("MainThreadTunnelService"),MainThreadManagedSockets:B("MainThreadManagedSockets"),MainThreadTimeline:B("MainThreadTimeline"),MainThreadTesting:B("MainThreadTesting"),MainThreadLocalization:B("MainThreadLocalizationShape"),MainThreadAiRelatedInformation:B("MainThreadAiRelatedInformation"),MainThreadAiEmbeddingVector:B("MainThreadAiEmbeddingVector")},de={ExtHostCodeMapper:B("ExtHostCodeMapper"),ExtHostCommands:B("ExtHostCommands"),ExtHostConfiguration:B("ExtHostConfiguration"),ExtHostDiagnostics:B("ExtHostDiagnostics"),ExtHostDebugService:B("ExtHostDebugService"),ExtHostDecorations:B("ExtHostDecorations"),ExtHostDocumentsAndEditors:B("ExtHostDocumentsAndEditors"),ExtHostDocuments:B("ExtHostDocuments"),ExtHostDocumentContentProviders:B("ExtHostDocumentContentProviders"),ExtHostDocumentSaveParticipant:B("ExtHostDocumentSaveParticipant"),ExtHostEditors:B("ExtHostEditors"),ExtHostTreeViews:B("ExtHostTreeViews"),ExtHostFileSystem:B("ExtHostFileSystem"),ExtHostFileSystemInfo:B("ExtHostFileSystemInfo"),ExtHostFileSystemEventService:B("ExtHostFileSystemEventService"),ExtHostLanguages:B("ExtHostLanguages"),ExtHostLanguageFeatures:B("ExtHostLanguageFeatures"),ExtHostQuickOpen:B("ExtHostQuickOpen"),ExtHostQuickDiff:B("ExtHostQuickDiff"),ExtHostStatusBar:B("ExtHostStatusBar"),ExtHostShare:B("ExtHostShare"),ExtHostExtensionService:B("ExtHostExtensionService"),ExtHostLogLevelServiceShape:B("ExtHostLogLevelServiceShape"),ExtHostTerminalService:B("ExtHostTerminalService"),ExtHostTerminalShellIntegration:B("ExtHostTerminalShellIntegration"),ExtHostSCM:B("ExtHostSCM"),ExtHostSearch:B("ExtHostSearch"),ExtHostTask:B("ExtHostTask"),ExtHostWorkspace:B("ExtHostWorkspace"),ExtHostWindow:B("ExtHostWindow"),ExtHostWebviews:B("ExtHostWebviews"),ExtHostWebviewPanels:B("ExtHostWebviewPanels"),ExtHostCustomEditors:B("ExtHostCustomEditors"),ExtHostWebviewViews:B("ExtHostWebviewViews"),ExtHostEditorInsets:B("ExtHostEditorInsets"),ExtHostEditorTabs:B("ExtHostEditorTabs"),ExtHostProgress:B("ExtHostProgress"),ExtHostComments:B("ExtHostComments"),ExtHostSecretState:B("ExtHostSecretState"),ExtHostStorage:B("ExtHostStorage"),ExtHostUrls:B("ExtHostUrls"),ExtHostUriOpeners:B("ExtHostUriOpeners"),ExtHostProfileContentHandlers:B("ExtHostProfileContentHandlers"),ExtHostOutputService:B("ExtHostOutputService"),ExtHostLabelService:B("ExtHostLabelService"),ExtHostNotebook:B("ExtHostNotebook"),ExtHostNotebookDocuments:B("ExtHostNotebookDocuments"),ExtHostNotebookEditors:B("ExtHostNotebookEditors"),ExtHostNotebookKernels:B("ExtHostNotebookKernels"),ExtHostNotebookRenderers:B("ExtHostNotebookRenderers"),ExtHostNotebookDocumentSaveParticipant:B("ExtHostNotebookDocumentSaveParticipant"),ExtHostInteractive:B("ExtHostInteractive"),ExtHostChatAgents2:B("ExtHostChatAgents"),ExtHostChatVariables:B("ExtHostChatVariables"),ExtHostLanguageModelTools:B("ExtHostChatSkills"),ExtHostChatProvider:B("ExtHostChatProvider"),ExtHostSpeech:B("ExtHostSpeech"),ExtHostEmbeddings:B("ExtHostEmbeddings"),ExtHostAiRelatedInformation:B("ExtHostAiRelatedInformation"),ExtHostAiEmbeddingVector:B("ExtHostAiEmbeddingVector"),ExtHostTheming:B("ExtHostTheming"),ExtHostTunnelService:B("ExtHostTunnelService"),ExtHostManagedSockets:B("ExtHostManagedSockets"),ExtHostAuthentication:B("ExtHostAuthentication"),ExtHostTimeline:B("ExtHostTimeline"),ExtHostTesting:B("ExtHostTesting"),ExtHostTelemetry:B("ExtHostTelemetry"),ExtHostLocalization:B("ExtHostLocalization")};function J5(e){return e.toJSON()}var KD=class{constructor(e){this.a=e}transformIncoming(e){const t=this.a.transformIncoming(e);return t===e?e:J5(k.from(t))}transformOutgoing(e){const t=this.a.transformOutgoing(e);return t===e?e:J5(k.from(t))}transformOutgoingURI(e){const t=this.a.transformOutgoing(e);return t===e?e:k.from(t)}transformOutgoingScheme(e){return this.a.transformOutgoingScheme(e)}},qz=new class{transformIncoming(e){return e}transformOutgoing(e){return e}transformOutgoingURI(e){return e}transformOutgoingScheme(e){return e}};function Q5(e,t,r,i){if(!e||i>200)return null;if(typeof e=="object"){if(e.$mid===1)return r?k.revive(t.transformIncoming(e)):t.transformIncoming(e);if(e instanceof re)return null;for(const s in e)if(Object.hasOwnProperty.call(e,s)){const n=Q5(e[s],t,r,i+1);n!==null&&(e[s]=n)}}return null}function Jc(e,t){const r=Q5(e,t,!1,0);return r===null?e:r}var Y5=class{constructor(){this.a=null,this.b=null,this.d=null,this.f=!1,this.g=null,this.h=!1,this.i=null}get[Symbol.toStringTag](){return this.toString()}j(){return this.a||(this.a=new Promise((e,t)=>{this.b=e,this.d=t,this.f&&this.b(this.g),this.h&&this.d(this.i)})),this.a}resolveOk(e){this.f||this.h||(this.f=!0,this.g=e,this.a&&this.b(e))}resolveErr(e){this.f||this.h||(this.h=!0,this.i=e,this.a?this.d(e):It(e))}then(e,t){return this.j().then(e,t)}catch(e){return this.j().then(void 0,e)}finally(e){return this.j().finally(e)}},eA=class extends Y5{constructor(){super(),this.h=!0,this.i=new Er}},X5;function Rm(e,t){try{return JSON.stringify(e,t)}catch{return"null"}}var Lm="$$ref$$",tA={[Lm]:-1};function Z5(e,t=null,r=!1){const i=[];return{jsonString:(r?Rm:JSON.stringify)(e,(n,o)=>{if(typeof o>"u")return tA;if(typeof o=="object"){if(o instanceof re){const a=i.push(o)-1;return{[Lm]:a}}if(t)return t(n,o)}return o}),referencedBuffers:i}}function K5(e,t,r){return JSON.parse(e,(i,s)=>{if(s){const n=s[Lm];if(typeof n=="number")return t[n];if(r&&s.$mid===1)return r.transformIncoming(s)}return s})}function e6(e,t){return JSON.stringify(e,t)}function rA(e){return e?(t,r)=>r&&r.$mid===1?e.transformOutgoing(r):r:null}var t6;(function(e){e[e.LocalSide=0]="LocalSide",e[e.OtherSide=1]="OtherSide"})(t6||(t6={}));var r6;(function(e){e[e.Responsive=0]="Responsive",e[e.Unresponsive=1]="Unresponsive"})(r6||(r6={}));var iA=()=>{},sA=Symbol.for("rpcProtocol"),nA=Symbol.for("rpcProxy"),oA=class Zb extends ae{static{X5=sA}static{this.a=3*1e3}constructor(t,r=null,i=null){super(),this[X5]=!0,this.b=this.B(new T),this.onDidChangeResponsiveState=this.b.event,this.c=t,this.f=r,this.g=i,this.h=rA(this.g),this.j=!1,this.m=[],this.s=[];for(let s=0,n=O5.count;s<n;s++)this.m[s]=null,this.s[s]=null;this.t=0,this.u=Object.create(null),this.w={},this.y=0,this.z=0,this.C=0,this.D=this.B(new Cs(()=>this.H(),1e3)),this.B(this.c.onMessage(s=>this.L(s)))}dispose(){this.j=!0,Object.keys(this.w).forEach(t=>{const r=this.w[t];delete this.w[t],r.resolveErr(Ac())}),super.dispose()}drain(){return typeof this.c.drain=="function"?this.c.drain():Promise.resolve()}F(t){this.z===0&&(this.C=Date.now()+Zb.a),this.z++,this.D.isScheduled()||this.D.schedule()}G(t){this.C=Date.now()+Zb.a,this.z--,this.z===0&&this.D.cancel(),this.I(0)}H(){this.z!==0&&(Date.now()>this.C?this.I(1):this.D.schedule())}I(t){this.y!==t&&(this.y=t,this.b.fire(this.y))}get responsiveState(){return this.y}transformIncomingURIs(t){return this.g?Jc(t,this.g):t}getProxy(t){const{nid:r,sid:i}=t;return this.s[r]||(this.s[r]=this.J(r,i)),this.s[r]}J(t,r){const i={get:(s,n)=>(typeof n=="string"&&!s[n]&&n.charCodeAt(0)===36&&(s[n]=(...o)=>this.U(t,n,o)),n===nA?r:s[n])};return new Proxy(Object.create(null),i)}set(t,r){return this.m[t.nid]=r,r}assertRegistered(t){for(let r=0,i=t.length;r<i;r++){const s=t[r];if(!this.m[s.nid])throw new Error(`Missing proxy instance ${s.sid}`)}}L(t){if(this.j)return;const r=t.byteLength,i=jt.read(t,0),s=i.readUInt8(),n=i.readUInt32();switch(s){case 1:case 2:{let{rpcId:o,method:a,args:c}=ti.deserializeRequestJSONArgs(i);this.g&&(c=Jc(c,this.g)),this.M(r,n,o,a,c,s===2);break}case 3:case 4:{let{rpcId:o,method:a,args:c}=ti.deserializeRequestMixedArgs(i);this.g&&(c=Jc(c,this.g)),this.M(r,n,o,a,c,s===4);break}case 5:{this.f?.logIncoming(r,n,0,"ack"),this.G(n);break}case 6:{this.N(r,n);break}case 7:{this.O(r,n,void 0);break}case 9:{let o=ti.deserializeReplyOKJSON(i);this.g&&(o=Jc(o,this.g)),this.O(r,n,o);break}case 10:{const o=ti.deserializeReplyOKJSONWithBuffers(i,this.g);this.O(r,n,o);break}case 8:{const o=ti.deserializeReplyOKVSBuffer(i);this.O(r,n,o);break}case 11:{let o=ti.deserializeReplyErrError(i);this.g&&(o=Jc(o,this.g)),this.P(r,n,o);break}case 12:{this.P(r,n,void 0);break}default:console.error("received unexpected message"),console.error(t)}}M(t,r,i,s,n,o){this.f?.logIncoming(t,r,1,`receiveRequest ${Jh(i)}.${s}(`,n);const a=String(r);let c,l;if(o){const h=new wt;n.push(h.token),c=this.Q(i,s,n),l=()=>h.cancel()}else c=this.Q(i,s,n),l=iA;this.u[a]=l;const u=ti.serializeAcknowledged(r);this.f?.logOutgoing(u.byteLength,r,1,"ack"),this.c.send(u),c.then(h=>{delete this.u[a];const d=ti.serializeReplyOK(r,h,this.h);this.f?.logOutgoing(d.byteLength,r,1,"reply:",h),this.c.send(d)},h=>{delete this.u[a];const d=ti.serializeReplyErr(r,h);this.f?.logOutgoing(d.byteLength,r,1,"replyErr:",h),this.c.send(d)})}N(t,r){this.f?.logIncoming(t,r,1,"receiveCancel");const i=String(r);this.u[i]?.()}O(t,r,i){this.f?.logIncoming(t,r,0,"receiveReply:",i);const s=String(r);if(!this.w.hasOwnProperty(s))return;const n=this.w[s];delete this.w[s],n.resolveOk(i)}P(t,r,i){this.f?.logIncoming(t,r,0,"receiveReplyErr:",i);const s=String(r);if(!this.w.hasOwnProperty(s))return;const n=this.w[s];delete this.w[s];let o;i&&(i.$isError?(o=new Error,o.name=i.name,o.message=i.message,o.stack=i.stack):o=i),n.resolveErr(o)}Q(t,r,i){try{return Promise.resolve(this.S(t,r,i))}catch(s){return Promise.reject(s)}}S(t,r,i){const s=this.m[t];if(!s)throw new Error("Unknown actor "+Jh(t));const n=s[r];if(typeof n!="function")throw new Error("Unknown method "+r+" on actor "+Jh(t));return n.apply(s,i)}U(t,r,i){if(this.j)return new eA;let s=null;if(i.length>0&&Ke.isCancellationToken(i[i.length-1])&&(s=i.pop()),s&&s.isCancellationRequested)return Promise.reject(Ac());const n=ti.serializeRequestArguments(i,this.h),o=++this.t,a=String(o),c=new Y5,l=new be;s&&l.add(s.onCancellationRequested(()=>{const h=ti.serializeCancel(o);this.f?.logOutgoing(h.byteLength,o,0,"cancel"),this.c.send(ti.serializeCancel(o))})),this.w[a]=new aA(c,l),this.F(o);const u=ti.serializeRequest(o,t,r,n,!!s);return this.f?.logOutgoing(u.byteLength,o,0,`request: ${Jh(t)}.${r}(`,i),this.c.send(u),c}},aA=class{constructor(e,t){this.a=e,this.b=t}resolveOk(e){this.a.resolveOk(e),this.b.dispose()}resolveErr(e){this.a.resolveErr(e),this.b.dispose()}},jt=class Kb{static alloc(t,r,i){const s=new Kb(re.alloc(i+1+4),0);return s.writeUInt8(t),s.writeUInt32(r),s}static read(t,r){return new Kb(t,r)}get buffer(){return this.a}constructor(t,r){this.a=t,this.b=r}static sizeUInt8(){return 1}static{this.sizeUInt32=4}writeUInt8(t){this.a.writeUInt8(t,this.b),this.b+=1}readUInt8(){const t=this.a.readUInt8(this.b);return this.b+=1,t}writeUInt32(t){this.a.writeUInt32BE(t,this.b),this.b+=4}readUInt32(){const t=this.a.readUInt32BE(this.b);return this.b+=4,t}static sizeShortString(t){return 1+t.byteLength}writeShortString(t){this.a.writeUInt8(t.byteLength,this.b),this.b+=1,this.a.set(t,this.b),this.b+=t.byteLength}readShortString(){const t=this.a.readUInt8(this.b);this.b+=1;const i=this.a.slice(this.b,this.b+t).toString();return this.b+=t,i}static sizeLongString(t){return 4+t.byteLength}writeLongString(t){this.a.writeUInt32BE(t.byteLength,this.b),this.b+=4,this.a.set(t,this.b),this.b+=t.byteLength}readLongString(){const t=this.a.readUInt32BE(this.b);this.b+=4;const i=this.a.slice(this.b,this.b+t).toString();return this.b+=t,i}writeBuffer(t){this.a.writeUInt32BE(t.byteLength,this.b),this.b+=4,this.a.set(t,this.b),this.b+=t.byteLength}static sizeVSBuffer(t){return 4+t.byteLength}writeVSBuffer(t){this.a.writeUInt32BE(t.byteLength,this.b),this.b+=4,this.a.set(t,this.b),this.b+=t.byteLength}readVSBuffer(){const t=this.a.readUInt32BE(this.b);this.b+=4;const r=this.a.slice(this.b,this.b+t);return this.b+=t,r}static sizeMixedArray(t){let r=0;r+=1;for(let i=0,s=t.length;i<s;i++){const n=t[i];switch(r+=1,n.type){case 1:r+=this.sizeLongString(n.value);break;case 2:r+=this.sizeVSBuffer(n.value);break;case 3:r+=this.sizeUInt32,r+=this.sizeLongString(n.value);for(let o=0;o<n.buffers.length;++o)r+=this.sizeVSBuffer(n.buffers[o]);break;case 4:break}}return r}writeMixedArray(t){this.a.writeUInt8(t.length,this.b),this.b+=1;for(let r=0,i=t.length;r<i;r++){const s=t[r];switch(s.type){case 1:this.writeUInt8(1),this.writeLongString(s.value);break;case 2:this.writeUInt8(2),this.writeVSBuffer(s.value);break;case 3:this.writeUInt8(3),this.writeUInt32(s.buffers.length),this.writeLongString(s.value);for(let n=0;n<s.buffers.length;++n)this.writeBuffer(s.buffers[n]);break;case 4:this.writeUInt8(4);break}}}readMixedArray(){const t=this.a.readUInt8(this.b);this.b+=1;const r=new Array(t);for(let i=0;i<t;i++)switch(this.readUInt8()){case 1:r[i]=this.readLongString();break;case 2:r[i]=this.readVSBuffer();break;case 3:{const n=this.readUInt32(),o=this.readLongString(),a=[];for(let c=0;c<n;++c)a.push(this.readVSBuffer());r[i]=new ei(K5(o,a,null));break}case 4:r[i]=void 0;break}return r}},i6;(function(e){e[e.Simple=0]="Simple",e[e.Mixed=1]="Mixed"})(i6||(i6={}));var ti=class{static a(e){for(let t=0,r=e.length;t<r;t++)if(e[t]instanceof re||e[t]instanceof ei||typeof e[t]>"u")return!0;return!1}static serializeRequestArguments(e,t){if(this.a(e)){const r=[];for(let i=0,s=e.length;i<s;i++){const n=e[i];if(n instanceof re)r[i]={type:2,value:n};else if(typeof n>"u")r[i]={type:4};else if(n instanceof ei){const{jsonString:o,referencedBuffers:a}=Z5(n.value,t);r[i]={type:3,value:re.fromString(o),buffers:a}}else r[i]={type:1,value:re.fromString(e6(n,t))}}return{type:1,args:r}}return{type:0,args:e6(e,t)}}static serializeRequest(e,t,r,i,s){switch(i.type){case 0:return this.b(e,t,r,i.args,s);case 1:return this.c(e,t,r,i.args,s)}}static b(e,t,r,i,s){const n=re.fromString(r),o=re.fromString(i);let a=0;a+=jt.sizeUInt8(),a+=jt.sizeShortString(n),a+=jt.sizeLongString(o);const c=jt.alloc(s?2:1,e,a);return c.writeUInt8(t),c.writeShortString(n),c.writeLongString(o),c.buffer}static deserializeRequestJSONArgs(e){const t=e.readUInt8(),r=e.readShortString(),i=e.readLongString();return{rpcId:t,method:r,args:JSON.parse(i)}}static c(e,t,r,i,s){const n=re.fromString(r);let o=0;o+=jt.sizeUInt8(),o+=jt.sizeShortString(n),o+=jt.sizeMixedArray(i);const a=jt.alloc(s?4:3,e,o);return a.writeUInt8(t),a.writeShortString(n),a.writeMixedArray(i),a.buffer}static deserializeRequestMixedArgs(e){const t=e.readUInt8(),r=e.readShortString(),i=e.readMixedArray(),s=new Array(i.length);for(let n=0,o=i.length;n<o;n++){const a=i[n];typeof a=="string"?s[n]=JSON.parse(a):s[n]=a}return{rpcId:t,method:r,args:s}}static serializeAcknowledged(e){return jt.alloc(5,e,0).buffer}static serializeCancel(e){return jt.alloc(6,e,0).buffer}static serializeReplyOK(e,t,r){if(typeof t>"u")return this.d(e);if(t instanceof re)return this.e(e,t);if(t instanceof ei){const{jsonString:i,referencedBuffers:s}=Z5(t.value,r,!0);return this.g(e,i,s)}else return this.f(e,Rm(t,r))}static d(e){return jt.alloc(7,e,0).buffer}static e(e,t){let r=0;r+=jt.sizeVSBuffer(t);const i=jt.alloc(8,e,r);return i.writeVSBuffer(t),i.buffer}static deserializeReplyOKVSBuffer(e){return e.readVSBuffer()}static f(e,t){const r=re.fromString(t);let i=0;i+=jt.sizeLongString(r);const s=jt.alloc(9,e,i);return s.writeLongString(r),s.buffer}static g(e,t,r){const i=re.fromString(t);let s=0;s+=jt.sizeUInt32,s+=jt.sizeLongString(i);for(const o of r)s+=jt.sizeVSBuffer(o);const n=jt.alloc(10,e,s);n.writeUInt32(r.length),n.writeLongString(i);for(const o of r)n.writeBuffer(o);return n.buffer}static deserializeReplyOKJSON(e){const t=e.readLongString();return JSON.parse(t)}static deserializeReplyOKJSONWithBuffers(e,t){const r=e.readUInt32(),i=e.readLongString(),s=[];for(let n=0;n<r;++n)s.push(e.readVSBuffer());return new ei(K5(i,s,t))}static serializeReplyErr(e,t){const r=t?Rm(Dc(t),null):void 0;if(typeof r!="string")return this.h(e);const i=re.fromString(r);let s=0;s+=jt.sizeLongString(i);const n=jt.alloc(11,e,s);return n.writeLongString(i),n.buffer}static deserializeReplyErrError(e){const t=e.readLongString();return JSON.parse(t)}static h(e){return jt.alloc(12,e,0).buffer}},s6;(function(e){e[e.RequestJSONArgs=1]="RequestJSONArgs",e[e.RequestJSONArgsWithCancellation=2]="RequestJSONArgsWithCancellation",e[e.RequestMixedArgs=3]="RequestMixedArgs",e[e.RequestMixedArgsWithCancellation=4]="RequestMixedArgsWithCancellation",e[e.Acknowledged=5]="Acknowledged",e[e.Cancel=6]="Cancel",e[e.ReplyOKEmpty=7]="ReplyOKEmpty",e[e.ReplyOKVSBuffer=8]="ReplyOKVSBuffer",e[e.ReplyOKJSON=9]="ReplyOKJSON",e[e.ReplyOKJSONWithBuffers=10]="ReplyOKJSONWithBuffers",e[e.ReplyErrError=11]="ReplyErrError",e[e.ReplyErrEmpty=12]="ReplyErrEmpty"})(s6||(s6={}));var n6;(function(e){e[e.String=1]="String",e[e.VSBuffer=2]="VSBuffer",e[e.SerializedObjectWithBuffers=3]="SerializedObjectWithBuffers",e[e.Undefined=4]="Undefined"})(n6||(n6={}));function Nm(e,t){return t&&(e.stack||e.stacktrace)?p(108,null,a6(e),o6(e.stack)||o6(e.stacktrace)):a6(e)}function o6(e){return Array.isArray(e)?e.join(`
`):e}function a6(e){return e.code==="ERR_UNC_HOST_NOT_ALLOWED"?`${e.message}. Please update the 'security.allowedUNCHosts' setting if you want to allow this host.`:typeof e.code=="string"&&typeof e.errno=="number"&&typeof e.syscall=="string"?p(109,null,e.message):e.message||p(110,null)}function yn(e=null,t=!1){if(!e)return p(111,null);if(Array.isArray(e)){const r=Rt(e),i=yn(r[0],t);return r.length>1?p(112,null,i,r.length):i}if(Me(e))return e;if(e.detail){const r=e.detail;if(r.error)return Nm(r.error,t);if(r.exception)return Nm(r.exception,t)}return e.stack?Nm(e,t):e.message?e.message:p(113,null)}function As(e){return Fm(e,0)}function Fm(e,t){switch(typeof e){case"object":return e===null?Ts(349,t):Array.isArray(e)?lA(e,t):uA(e,t);case"string":return c6(e,t);case"boolean":return cA(e,t);case"number":return Ts(e,t);case"undefined":return Ts(937,t);default:return Ts(617,t)}}function Ts(e,t){return(t<<5)-t+e|0}function cA(e,t){return Ts(e?433:863,t)}function c6(e,t){t=Ts(149417,t);for(let r=0,i=e.length;r<i;r++)t=Ts(e.charCodeAt(r),t);return t}function lA(e,t){return t=Ts(104579,t),e.reduce((r,i)=>Fm(i,r),t)}function uA(e,t){return t=Ts(181387,t),Object.keys(e).sort().reduce((r,i)=>(r=c6(i,r),Fm(e[i],r)),t)}var l6;(function(e){e[e.BLOCK_SIZE=64]="BLOCK_SIZE",e[e.UNICODE_REPLACEMENT=65533]="UNICODE_REPLACEMENT"})(l6||(l6={}));function Om(e,t,r=32){const i=r-t,s=~((1<<i)-1);return(e<<t|(s&e)>>>i)>>>0}function u6(e,t=0,r=e.byteLength,i=0){for(let s=0;s<r;s++)e[t+s]=i}function hA(e,t,r="0"){for(;e.length<t;)e=r+e;return e}function Qc(e,t=32){return e instanceof ArrayBuffer?Array.from(new Uint8Array(e)).map(r=>r.toString(16).padStart(2,"0")).join(""):hA((e>>>0).toString(16),t/4)}var Gz=class h3{static{this.g=new DataView(new ArrayBuffer(320))}constructor(){this.h=1732584193,this.l=4023233417,this.m=2562383102,this.n=271733878,this.o=3285377520,this.p=new Uint8Array(67),this.q=new DataView(this.p.buffer),this.r=0,this.t=0,this.u=0,this.v=!1}update(t){const r=t.length;if(r===0)return;const i=this.p;let s=this.r,n=this.u,o,a;for(n!==0?(o=n,a=-1,n=0):(o=t.charCodeAt(0),a=0);;){let c=o;if(Ph(o))if(a+1<r){const l=t.charCodeAt(a+1);Ih(l)?(a++,c=am(o,l)):c=65533}else{n=o;break}else Ih(o)&&(c=65533);if(s=this.w(i,s,c),a++,a<r)o=t.charCodeAt(a);else break}this.r=s,this.u=n}w(t,r,i){return i<128?t[r++]=i:i<2048?(t[r++]=192|(i&1984)>>>6,t[r++]=128|(i&63)>>>0):i<65536?(t[r++]=224|(i&61440)>>>12,t[r++]=128|(i&4032)>>>6,t[r++]=128|(i&63)>>>0):(t[r++]=240|(i&1835008)>>>18,t[r++]=128|(i&258048)>>>12,t[r++]=128|(i&4032)>>>6,t[r++]=128|(i&63)>>>0),r>=64&&(this.y(),r-=64,this.t+=64,t[0]=t[64],t[1]=t[65],t[2]=t[66]),r}digest(){return this.v||(this.v=!0,this.u&&(this.u=0,this.r=this.w(this.p,this.r,65533)),this.t+=this.r,this.x()),Qc(this.h)+Qc(this.l)+Qc(this.m)+Qc(this.n)+Qc(this.o)}x(){this.p[this.r++]=128,u6(this.p,this.r),this.r>56&&(this.y(),u6(this.p));const t=8*this.t;this.q.setUint32(56,Math.floor(t/4294967296),!1),this.q.setUint32(60,t%4294967296,!1),this.y()}y(){const t=h3.g,r=this.q;for(let h=0;h<64;h+=4)t.setUint32(h,r.getUint32(h,!1),!1);for(let h=64;h<320;h+=4)t.setUint32(h,Om(t.getUint32(h-12,!1)^t.getUint32(h-32,!1)^t.getUint32(h-56,!1)^t.getUint32(h-64,!1),1),!1);let i=this.h,s=this.l,n=this.m,o=this.n,a=this.o,c,l,u;for(let h=0;h<80;h++)h<20?(c=s&n|~s&o,l=1518500249):h<40?(c=s^n^o,l=1859775393):h<60?(c=s&n|s&o|n&o,l=2400959708):(c=s^n^o,l=3395469782),u=Om(i,5)+c+a+l+t.getUint32(h*4,!1)&4294967295,a=o,o=n,n=Om(s,30),s=i,i=u;this.h=this.h+i&4294967295,this.l=this.l+s&4294967295,this.m=this.m+n&4294967295,this.n=this.n+o&4294967295,this.o=this.o+a&4294967295}},h6;(function(e){e[e.LParen=0]="LParen",e[e.RParen=1]="RParen",e[e.Neg=2]="Neg",e[e.Eq=3]="Eq",e[e.NotEq=4]="NotEq",e[e.Lt=5]="Lt",e[e.LtEq=6]="LtEq",e[e.Gt=7]="Gt",e[e.GtEq=8]="GtEq",e[e.RegexOp=9]="RegexOp",e[e.RegexStr=10]="RegexStr",e[e.True=11]="True",e[e.False=12]="False",e[e.In=13]="In",e[e.Not=14]="Not",e[e.And=15]="And",e[e.Or=16]="Or",e[e.Str=17]="Str",e[e.QuotedStr=18]="QuotedStr",e[e.Error=19]="Error",e[e.EOF=20]="EOF"})(h6||(h6={}));function Mm(...e){switch(e.length){case 1:return p(1704,null,e[0]);case 2:return p(1705,null,e[0],e[1]);case 3:return p(1706,null,e[0],e[1],e[2]);default:return}}var dA=p(1707,null),fA=p(1708,null),Yc=class ey{constructor(){this.c="",this.d=0,this.e=0,this.f=[],this.g=[],this.m=/[a-zA-Z0-9_<>\-\./\\:\*\?\+\[\]\^,#@;"%\$\p{L}-]+/uy}static getLexeme(t){switch(t.type){case 0:return"(";case 1:return")";case 2:return"!";case 3:return t.isTripleEq?"===":"==";case 4:return t.isTripleEq?"!==":"!=";case 5:return"<";case 6:return"<=";case 7:return">=";case 8:return">=";case 9:return"=~";case 10:return t.lexeme;case 11:return"true";case 12:return"false";case 13:return"in";case 14:return"not";case 15:return"&&";case 16:return"||";case 17:return t.lexeme;case 18:return t.lexeme;case 19:return t.lexeme;case 20:return"EOF";default:throw Jg(`unhandled token type: ${JSON.stringify(t)}; have you forgotten to add a case?`)}}static{this.a=new Set(["i","g","s","m","y","u"].map(t=>t.charCodeAt(0)))}static{this.b=new Map([["not",14],["in",13],["false",12],["true",11]])}get errors(){return this.g}reset(t){return this.c=t,this.d=0,this.e=0,this.f=[],this.g=[],this}scan(){for(;!this.r();)switch(this.d=this.e,this.i()){case 40:this.k(0);break;case 41:this.k(1);break;case 33:if(this.h(61)){const r=this.h(61);this.f.push({type:4,offset:this.d,isTripleEq:r})}else this.k(2);break;case 39:this.o();break;case 47:this.q();break;case 61:if(this.h(61)){const r=this.h(61);this.f.push({type:3,offset:this.d,isTripleEq:r})}else this.h(126)?this.k(9):this.l(Mm("==","=~"));break;case 60:this.k(this.h(61)?6:5);break;case 62:this.k(this.h(61)?8:7);break;case 38:this.h(38)?this.k(15):this.l(Mm("&&"));break;case 124:this.h(124)?this.k(16):this.l(Mm("||"));break;case 32:case 13:case 9:case 10:case 160:break;default:this.n()}return this.d=this.e,this.k(20),Array.from(this.f)}h(t){return this.r()||this.c.charCodeAt(this.e)!==t?!1:(this.e++,!0)}i(){return this.c.charCodeAt(this.e++)}j(){return this.r()?0:this.c.charCodeAt(this.e)}k(t){this.f.push({type:t,offset:this.d})}l(t){const r=this.d,i=this.c.substring(this.d,this.e),s={type:19,offset:this.d,lexeme:i};this.g.push({offset:r,lexeme:i,additionalInfo:t}),this.f.push(s)}n(){this.m.lastIndex=this.d;const t=this.m.exec(this.c);if(t){this.e=this.d+t[0].length;const r=this.c.substring(this.d,this.e),i=ey.b.get(r);i?this.k(i):this.f.push({type:17,lexeme:r,offset:this.d})}}o(){for(;this.j()!==39&&!this.r();)this.i();if(this.r()){this.l(dA);return}this.i(),this.f.push({type:18,lexeme:this.c.substring(this.d+1,this.e-1),offset:this.d+1})}q(){let t=this.e,r=!1,i=!1;for(;;){if(t>=this.c.length){this.e=t,this.l(fA);return}const n=this.c.charCodeAt(t);if(r)r=!1;else if(n===47&&!i){t++;break}else n===91?i=!0:n===92?r=!0:n===93&&(i=!1);t++}for(;t<this.c.length&&ey.a.has(this.c.charCodeAt(t));)t++;this.e=t;const s=this.c.substring(this.d,this.e);this.f.push({type:10,lexeme:s,offset:this.d})}r(){return this.e>=this.c.length}},Ti;(function(e){e.serviceIds=new Map,e.DI_TARGET="$di$target",e.DI_DEPENDENCIES="$di$dependencies";function t(r){return r[e.DI_DEPENDENCIES]||[]}e.getServiceDependencies=t})(Ti||(Ti={}));var Qh=X("instantiationService");function pA(e,t,r){t[Ti.DI_TARGET]===t?t[Ti.DI_DEPENDENCIES].push({id:e,index:r}):(t[Ti.DI_DEPENDENCIES]=[{id:e,index:r}],t[Ti.DI_TARGET]=t)}function X(e){if(Ti.serviceIds.has(e))return Ti.serviceIds.get(e);const t=function(r,i,s){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");pA(t,r,s)};return t.toString=()=>e,Ti.serviceIds.set(e,t),t}function Jz(e){return e}var sr=new Map;sr.set("false",!1),sr.set("true",!0),sr.set("isMac",Kt),sr.set("isLinux",Ot),sr.set("isWindows",at),sr.set("isWeb",xh),sr.set("isMacNative",Kt&&!xh),sr.set("isEdge",kP),sr.set("isFirefox",bP),sr.set("isChrome",Jy),sr.set("isSafari",yP);var gA=Object.prototype.hasOwnProperty,d6;(function(e){e[e.False=0]="False",e[e.True=1]="True",e[e.Defined=2]="Defined",e[e.Not=3]="Not",e[e.Equals=4]="Equals",e[e.NotEquals=5]="NotEquals",e[e.And=6]="And",e[e.Regex=7]="Regex",e[e.NotRegex=8]="NotRegex",e[e.Or=9]="Or",e[e.In=10]="In",e[e.NotIn=11]="NotIn",e[e.Greater=12]="Greater",e[e.GreaterEquals=13]="GreaterEquals",e[e.Smaller=14]="Smaller",e[e.SmallerEquals=15]="SmallerEquals"})(d6||(d6={}));var mA={regexParsingWithErrorRecovery:!0},vA=p(1684,null),wA=p(1685,null),bA=p(1686,null),f6=p(1687,null),yA=p(1688,null),kA=p(1689,null),xA=p(1690,null),EA=p(1691,null),p6=class rh{static{this.c=new Error}get lexingErrors(){return this.d.errors}get parsingErrors(){return this.h}constructor(t=mA){this.k=t,this.d=new Yc,this.f=[],this.g=0,this.h=[],this.v=/g|y/g}parse(t){if(t===""){this.h.push({message:vA,offset:0,lexeme:"",additionalInfo:wA});return}this.f=this.d.reset(t).scan(),this.g=0,this.h=[];try{const r=this.l();if(!this.E()){const i=this.D(),s=i.type===17?kA:void 0;throw this.h.push({message:yA,offset:i.offset,lexeme:Yc.getLexeme(i),additionalInfo:s}),rh.c}return r}catch(r){if(r!==rh.c)throw r;return}}l(){return this.m()}m(){const t=[this.o()];for(;this.y(16);){const r=this.o();t.push(r)}return t.length===1?t[0]:nr.or(...t)}o(){const t=[this.s()];for(;this.y(15);){const r=this.s();t.push(r)}return t.length===1?t[0]:nr.and(...t)}s(){if(this.y(2)){const t=this.D();switch(t.type){case 11:return this.z(),$r.INSTANCE;case 12:return this.z(),Vr.INSTANCE;case 0:{this.z();const r=this.l();return this.A(1,f6),r?.negate()}case 17:return this.z(),Kc.create(t.lexeme);default:throw this.B("KEY | true | false | '(' expression ')'",t)}}return this.t()}t(){const t=this.D();switch(t.type){case 11:return this.z(),nr.true();case 12:return this.z(),nr.false();case 0:{this.z();const r=this.l();return this.A(1,f6),r}case 17:{const r=t.lexeme;if(this.z(),this.y(9)){const s=this.D();if(!this.k.regexParsingWithErrorRecovery){if(this.z(),s.type!==10)throw this.B("REGEX",s);const n=s.lexeme,o=n.lastIndexOf("/"),a=o===n.length-1?void 0:this.w(n.substring(o+1));let c;try{c=new RegExp(n.substring(1,o),a)}catch{throw this.B("REGEX",s)}return Wm.create(r,c)}switch(s.type){case 10:case 19:{const n=[s.lexeme];this.z();let o=this.D(),a=0;for(let d=0;d<s.lexeme.length;d++)s.lexeme.charCodeAt(d)===40?a++:s.lexeme.charCodeAt(d)===41&&a--;for(;!this.E()&&o.type!==15&&o.type!==16;){switch(o.type){case 0:a++;break;case 1:a--;break;case 10:case 18:for(let d=0;d<o.lexeme.length;d++)o.lexeme.charCodeAt(d)===40?a++:s.lexeme.charCodeAt(d)===41&&a--}if(a<0)break;n.push(Yc.getLexeme(o)),this.z(),o=this.D()}const c=n.join(""),l=c.lastIndexOf("/"),u=l===c.length-1?void 0:this.w(c.substring(l+1));let h;try{h=new RegExp(c.substring(1,l),u)}catch{throw this.B("REGEX",s)}return nr.regex(r,h)}case 18:{const n=s.lexeme;this.z();let o=null;if(!$h(n)){const a=n.indexOf("/"),c=n.lastIndexOf("/");if(a!==c&&a>=0){const l=n.slice(a+1,c),u=n[c+1]==="i"?"i":"";try{o=new RegExp(l,u)}catch{throw this.B("REGEX",s)}}}if(o===null)throw this.B("REGEX",s);return Wm.create(r,o)}default:throw this.B("REGEX",this.D())}}if(this.y(14)){this.A(13,bA);const s=this.u();return nr.notIn(r,s)}switch(this.D().type){case 3:{this.z();const s=this.u();if(this.x().type===18)return nr.equals(r,s);switch(s){case"true":return nr.has(r);case"false":return nr.not(r);default:return nr.equals(r,s)}}case 4:{this.z();const s=this.u();if(this.x().type===18)return nr.notEquals(r,s);switch(s){case"true":return nr.not(r);case"false":return nr.has(r);default:return nr.notEquals(r,s)}}case 5:return this.z(),zm.create(r,this.u());case 6:return this.z(),_m.create(r,this.u());case 7:return this.z(),Hm.create(r,this.u());case 8:return this.z(),Bm.create(r,this.u());case 13:return this.z(),nr.in(r,this.u());default:return nr.has(r)}}case 20:throw this.h.push({message:xA,offset:t.offset,lexeme:"",additionalInfo:EA}),rh.c;default:throw this.B(`true | false | KEY 
	| KEY '=~' REGEX 
	| KEY ('==' | '!=' | '<' | '<=' | '>' | '>=' | 'in' | 'not' 'in') value`,this.D())}}u(){const t=this.D();switch(t.type){case 17:case 18:return this.z(),t.lexeme;case 11:return this.z(),"true";case 12:return this.z(),"false";case 13:return this.z(),"in";default:return""}}w(t){return t.replaceAll(this.v,"")}x(){return this.f[this.g-1]}y(t){return this.C(t)?(this.z(),!0):!1}z(){return this.E()||this.g++,this.x()}A(t,r){if(this.C(t))return this.z();throw this.B(r,this.D())}B(t,r,i){const s=p(1692,null,t,Yc.getLexeme(r)),n=r.offset,o=Yc.getLexeme(r);return this.h.push({message:s,offset:n,lexeme:o,additionalInfo:i}),rh.c}C(t){return this.D().type===t}D(){return this.f[this.g]}E(){return this.D().type===20}},nr=class{static false(){return $r.INSTANCE}static true(){return Vr.INSTANCE}static has(e){return Zc.create(e)}static equals(e,t){return jm.create(e,t)}static notEquals(e,t){return Um.create(e,t)}static regex(e,t){return Wm.create(e,t)}static in(e,t){return g6.create(e,t)}static notIn(e,t){return m6.create(e,t)}static not(e){return Kc.create(e)}static and(...e){return w6.create(e,null,!0)}static or(...e){return Vm.create(e,null,!0)}static greater(e,t){return Hm.create(e,t)}static greaterEquals(e,t){return Bm.create(e,t)}static smaller(e,t){return zm.create(e,t)}static smallerEquals(e,t){return _m.create(e,t)}static{this.c=new p6({regexParsingWithErrorRecovery:!1})}static deserialize(e){return e==null?void 0:this.c.parse(e)}};function SA(e){const t=new p6({regexParsingWithErrorRecovery:!1});return e.map(r=>(t.parse(r),t.lexingErrors.length>0?t.lexingErrors.map(i=>({errorMessage:i.additionalInfo?p(1693,null,i.additionalInfo):p(1694,null),offset:i.offset,length:i.lexeme.length})):t.parsingErrors.length>0?t.parsingErrors.map(i=>({errorMessage:i.additionalInfo?`${i.message}. ${i.additionalInfo}`:i.message,offset:i.offset,length:i.lexeme.length})):[]))}function Xc(e,t){return e.cmp(t)}var $r=class d3{static{this.INSTANCE=new d3}constructor(){this.type=0}cmp(t){return this.type-t.type}equals(t){return t.type===this.type}substituteConstants(){return this}evaluate(t){return!1}serialize(){return"false"}keys(){return[]}map(t){return this}negate(){return Vr.INSTANCE}},Vr=class f3{static{this.INSTANCE=new f3}constructor(){this.type=1}cmp(t){return this.type-t.type}equals(t){return t.type===this.type}substituteConstants(){return this}evaluate(t){return!0}serialize(){return"true"}keys(){return[]}map(t){return this}negate(){return $r.INSTANCE}},Zc=class p3{static create(t,r=null){const i=sr.get(t);return typeof i=="boolean"?i?Vr.INSTANCE:$r.INSTANCE:new p3(t,r)}constructor(t,r){this.key=t,this.c=r,this.type=2}cmp(t){return t.type!==this.type?this.type-t.type:y6(this.key,t.key)}equals(t){return t.type===this.type?this.key===t.key:!1}substituteConstants(){const t=sr.get(this.key);return typeof t=="boolean"?t?Vr.INSTANCE:$r.INSTANCE:this}evaluate(t){return!!t.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}map(t){return t.mapDefined(this.key)}negate(){return this.c||(this.c=Kc.create(this.key,this)),this.c}},jm=class g3{static create(t,r,i=null){if(typeof r=="boolean")return r?Zc.create(t,i):Kc.create(t,i);const s=sr.get(t);return typeof s=="boolean"?r===(s?"true":"false")?Vr.INSTANCE:$r.INSTANCE:new g3(t,r,i)}constructor(t,r,i){this.c=t,this.d=r,this.f=i,this.type=4}cmp(t){return t.type!==this.type?this.type-t.type:ao(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){const t=sr.get(this.c);if(typeof t=="boolean"){const r=t?"true":"false";return this.d===r?Vr.INSTANCE:$r.INSTANCE}return this}evaluate(t){return t.getValue(this.c)==this.d}serialize(){return`${this.c} == '${this.d}'`}keys(){return[this.c]}map(t){return t.mapEquals(this.c,this.d)}negate(){return this.f||(this.f=Um.create(this.c,this.d,this)),this.f}},g6=class m3{static create(t,r){return new m3(t,r)}constructor(t,r){this.d=t,this.f=r,this.type=10,this.c=null}cmp(t){return t.type!==this.type?this.type-t.type:ao(this.d,this.f,t.d,t.f)}equals(t){return t.type===this.type?this.d===t.d&&this.f===t.f:!1}substituteConstants(){return this}evaluate(t){const r=t.getValue(this.f),i=t.getValue(this.d);return Array.isArray(r)?r.includes(i):typeof i=="string"&&typeof r=="object"&&r!==null?gA.call(r,i):!1}serialize(){return`${this.d} in '${this.f}'`}keys(){return[this.d,this.f]}map(t){return t.mapIn(this.d,this.f)}negate(){return this.c||(this.c=m6.create(this.d,this.f)),this.c}},m6=class v3{static create(t,r){return new v3(t,r)}constructor(t,r){this.d=t,this.f=r,this.type=11,this.c=g6.create(t,r)}cmp(t){return t.type!==this.type?this.type-t.type:this.c.cmp(t.c)}equals(t){return t.type===this.type?this.c.equals(t.c):!1}substituteConstants(){return this}evaluate(t){return!this.c.evaluate(t)}serialize(){return`${this.d} not in '${this.f}'`}keys(){return this.c.keys()}map(t){return t.mapNotIn(this.d,this.f)}negate(){return this.c}},Um=class w3{static create(t,r,i=null){if(typeof r=="boolean")return r?Kc.create(t,i):Zc.create(t,i);const s=sr.get(t);return typeof s=="boolean"?r===(s?"true":"false")?$r.INSTANCE:Vr.INSTANCE:new w3(t,r,i)}constructor(t,r,i){this.c=t,this.d=r,this.f=i,this.type=5}cmp(t){return t.type!==this.type?this.type-t.type:ao(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){const t=sr.get(this.c);if(typeof t=="boolean"){const r=t?"true":"false";return this.d===r?$r.INSTANCE:Vr.INSTANCE}return this}evaluate(t){return t.getValue(this.c)!=this.d}serialize(){return`${this.c} != '${this.d}'`}keys(){return[this.c]}map(t){return t.mapNotEquals(this.c,this.d)}negate(){return this.f||(this.f=jm.create(this.c,this.d,this)),this.f}},Kc=class b3{static create(t,r=null){const i=sr.get(t);return typeof i=="boolean"?i?$r.INSTANCE:Vr.INSTANCE:new b3(t,r)}constructor(t,r){this.c=t,this.d=r,this.type=3}cmp(t){return t.type!==this.type?this.type-t.type:y6(this.c,t.c)}equals(t){return t.type===this.type?this.c===t.c:!1}substituteConstants(){const t=sr.get(this.c);return typeof t=="boolean"?t?$r.INSTANCE:Vr.INSTANCE:this}evaluate(t){return!t.getValue(this.c)}serialize(){return`!${this.c}`}keys(){return[this.c]}map(t){return t.mapNot(this.c)}negate(){return this.d||(this.d=Zc.create(this.c,this)),this.d}};function Yh(e,t){if(typeof e=="string"){const r=parseFloat(e);isNaN(r)||(e=r)}return typeof e=="string"||typeof e=="number"?t(e):$r.INSTANCE}var Hm=class y3{static create(t,r,i=null){return Yh(r,s=>new y3(t,s,i))}constructor(t,r,i){this.c=t,this.d=r,this.f=i,this.type=12}cmp(t){return t.type!==this.type?this.type-t.type:ao(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){return this}evaluate(t){return typeof this.d=="string"?!1:parseFloat(t.getValue(this.c))>this.d}serialize(){return`${this.c} > ${this.d}`}keys(){return[this.c]}map(t){return t.mapGreater(this.c,this.d)}negate(){return this.f||(this.f=_m.create(this.c,this.d,this)),this.f}},Bm=class k3{static create(t,r,i=null){return Yh(r,s=>new k3(t,s,i))}constructor(t,r,i){this.c=t,this.d=r,this.f=i,this.type=13}cmp(t){return t.type!==this.type?this.type-t.type:ao(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){return this}evaluate(t){return typeof this.d=="string"?!1:parseFloat(t.getValue(this.c))>=this.d}serialize(){return`${this.c} >= ${this.d}`}keys(){return[this.c]}map(t){return t.mapGreaterEquals(this.c,this.d)}negate(){return this.f||(this.f=zm.create(this.c,this.d,this)),this.f}},zm=class x3{static create(t,r,i=null){return Yh(r,s=>new x3(t,s,i))}constructor(t,r,i){this.c=t,this.d=r,this.f=i,this.type=14}cmp(t){return t.type!==this.type?this.type-t.type:ao(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){return this}evaluate(t){return typeof this.d=="string"?!1:parseFloat(t.getValue(this.c))<this.d}serialize(){return`${this.c} < ${this.d}`}keys(){return[this.c]}map(t){return t.mapSmaller(this.c,this.d)}negate(){return this.f||(this.f=Bm.create(this.c,this.d,this)),this.f}},_m=class E3{static create(t,r,i=null){return Yh(r,s=>new E3(t,s,i))}constructor(t,r,i){this.c=t,this.d=r,this.f=i,this.type=15}cmp(t){return t.type!==this.type?this.type-t.type:ao(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){return this}evaluate(t){return typeof this.d=="string"?!1:parseFloat(t.getValue(this.c))<=this.d}serialize(){return`${this.c} <= ${this.d}`}keys(){return[this.c]}map(t){return t.mapSmallerEquals(this.c,this.d)}negate(){return this.f||(this.f=Hm.create(this.c,this.d,this)),this.f}},Wm=class S3{static create(t,r){return new S3(t,r)}constructor(t,r){this.d=t,this.f=r,this.type=7,this.c=null}cmp(t){if(t.type!==this.type)return this.type-t.type;if(this.d<t.d)return-1;if(this.d>t.d)return 1;const r=this.f?this.f.source:"",i=t.f?t.f.source:"";return r<i?-1:r>i?1:0}equals(t){if(t.type===this.type){const r=this.f?this.f.source:"",i=t.f?t.f.source:"";return this.d===t.d&&r===i}return!1}substituteConstants(){return this}evaluate(t){const r=t.getValue(this.d);return this.f?this.f.test(r):!1}serialize(){const t=this.f?`/${this.f.source}/${this.f.flags}`:"/invalid/";return`${this.d} =~ ${t}`}keys(){return[this.d]}map(t){return t.mapRegex(this.d,this.f)}negate(){return this.c||(this.c=$A.create(this)),this.c}},$A=class ty{static create(t){return new ty(t)}constructor(t){this.c=t,this.type=8}cmp(t){return t.type!==this.type?this.type-t.type:this.c.cmp(t.c)}equals(t){return t.type===this.type?this.c.equals(t.c):!1}substituteConstants(){return this}evaluate(t){return!this.c.evaluate(t)}serialize(){return`!(${this.c.serialize()})`}keys(){return this.c.keys()}map(t){return new ty(this.c.map(t))}negate(){return this.c}};function v6(e){let t=null;for(let r=0,i=e.length;r<i;r++){const s=e[r].substituteConstants();if(e[r]!==s&&t===null){t=[];for(let n=0;n<r;n++)t[n]=e[n]}t!==null&&(t[r]=s)}return t===null?e:t}var w6=class Sc{static create(t,r,i){return Sc.d(t,r,i)}constructor(t,r){this.expr=t,this.c=r,this.type=6}cmp(t){if(t.type!==this.type)return this.type-t.type;if(this.expr.length<t.expr.length)return-1;if(this.expr.length>t.expr.length)return 1;for(let r=0,i=this.expr.length;r<i;r++){const s=Xc(this.expr[r],t.expr[r]);if(s!==0)return s}return 0}equals(t){if(t.type===this.type){if(this.expr.length!==t.expr.length)return!1;for(let r=0,i=this.expr.length;r<i;r++)if(!this.expr[r].equals(t.expr[r]))return!1;return!0}return!1}substituteConstants(){const t=v6(this.expr);return t===this.expr?this:Sc.create(t,this.c,!1)}evaluate(t){for(let r=0,i=this.expr.length;r<i;r++)if(!this.expr[r].evaluate(t))return!1;return!0}static d(t,r,i){const s=[];let n=!1;for(const o of t)if(o){if(o.type===1){n=!0;continue}if(o.type===0)return $r.INSTANCE;if(o.type===6){s.push(...o.expr);continue}s.push(o)}if(s.length===0&&n)return Vr.INSTANCE;if(s.length!==0){if(s.length===1)return s[0];s.sort(Xc);for(let o=1;o<s.length;o++)s[o-1].equals(s[o])&&(s.splice(o,1),o--);if(s.length===1)return s[0];for(;s.length>1;){const o=s[s.length-1];if(o.type!==9)break;s.pop();const a=s.pop(),c=s.length===0,l=Vm.create(o.expr.map(u=>Sc.create([u,a],null,i)),null,c);l&&(s.push(l),s.sort(Xc))}if(s.length===1)return s[0];if(i){for(let o=0;o<s.length;o++)for(let a=o+1;a<s.length;a++)if(s[o].negate().equals(s[a]))return $r.INSTANCE;if(s.length===1)return s[0]}return new Sc(s,r)}}serialize(){return this.expr.map(t=>t.serialize()).join(" && ")}keys(){const t=[];for(const r of this.expr)t.push(...r.keys());return t}map(t){return new Sc(this.expr.map(r=>r.map(t)),null)}negate(){if(!this.c){const t=[];for(const r of this.expr)t.push(r.negate());this.c=Vm.create(t,this,!0)}return this.c}},Vm=class _o{static create(t,r,i){return _o.d(t,r,i)}constructor(t,r){this.expr=t,this.c=r,this.type=9}cmp(t){if(t.type!==this.type)return this.type-t.type;if(this.expr.length<t.expr.length)return-1;if(this.expr.length>t.expr.length)return 1;for(let r=0,i=this.expr.length;r<i;r++){const s=Xc(this.expr[r],t.expr[r]);if(s!==0)return s}return 0}equals(t){if(t.type===this.type){if(this.expr.length!==t.expr.length)return!1;for(let r=0,i=this.expr.length;r<i;r++)if(!this.expr[r].equals(t.expr[r]))return!1;return!0}return!1}substituteConstants(){const t=v6(this.expr);return t===this.expr?this:_o.create(t,this.c,!1)}evaluate(t){for(let r=0,i=this.expr.length;r<i;r++)if(this.expr[r].evaluate(t))return!0;return!1}static d(t,r,i){let s=[],n=!1;if(t){for(let o=0,a=t.length;o<a;o++){const c=t[o];if(c){if(c.type===0){n=!0;continue}if(c.type===1)return Vr.INSTANCE;if(c.type===9){s=s.concat(c.expr);continue}s.push(c)}}if(s.length===0&&n)return $r.INSTANCE;s.sort(Xc)}if(s.length!==0){if(s.length===1)return s[0];for(let o=1;o<s.length;o++)s[o-1].equals(s[o])&&(s.splice(o,1),o--);if(s.length===1)return s[0];if(i){for(let o=0;o<s.length;o++)for(let a=o+1;a<s.length;a++)if(s[o].negate().equals(s[a]))return Vr.INSTANCE;if(s.length===1)return s[0]}return new _o(s,r)}}serialize(){return this.expr.map(t=>t.serialize()).join(" || ")}keys(){const t=[];for(const r of this.expr)t.push(...r.keys());return t}map(t){return new _o(this.expr.map(r=>r.map(t)),null)}negate(){if(!this.c){const t=[];for(const r of this.expr)t.push(r.negate());for(;t.length>1;){const r=t.shift(),i=t.shift(),s=[];for(const n of k6(r))for(const o of k6(i))s.push(w6.create([n,o],null,!1));t.unshift(_o.create(s,null,!1))}this.c=_o.create(t,this,!0)}return this.c}},J=class Ag extends Zc{static{this.d=[]}static all(){return Ag.d.values()}constructor(t,r,i){super(t,null),this.f=r,typeof i=="object"?Ag.d.push({...i,key:t}):i!==!0&&Ag.d.push({key:t,description:i,type:r!=null?typeof r:void 0})}bindTo(t){return t.createKey(this.key,this.f)}getValue(t){return t.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(t){return jm.create(this.key,t)}notEqualsTo(t){return Um.create(this.key,t)}},b6=X("contextKeyService");function y6(e,t){return e<t?-1:e>t?1:0}function ao(e,t,r,i){return e<r?-1:e>r?1:t<i?-1:t>i?1:0}function k6(e){return e.type===9?e.expr:[e]}var Ne=X("logService"),ca=X("loggerService");function CA(e){return li(e)}var ye;(function(e){e[e.Off=0]="Off",e[e.Trace=1]="Trace",e[e.Debug=2]="Debug",e[e.Info=3]="Info",e[e.Warning=4]="Warning",e[e.Error=5]="Error"})(ye||(ye={}));var PA=ye.Info;function IA(e,t,r){switch(t){case ye.Trace:e.trace(r);break;case ye.Debug:e.debug(r);break;case ye.Info:e.info(r);break;case ye.Warning:e.warn(r);break;case ye.Error:e.error(r);break;case ye.Off:break;default:throw new Error(`Invalid log level ${t}`)}}function la(e,t=!1){let r="";for(let i=0;i<e.length;i++){let s=e[i];if(s instanceof Error&&(s=yn(s,t)),typeof s=="object")try{s=JSON.stringify(s)}catch{}r+=(i>0?" ":"")+s}return r}var x6=class extends ae{constructor(){super(...arguments),this.b=PA,this.c=this.B(new T),this.onDidChangeLogLevel=this.c.event}setLevel(e){this.b!==e&&(this.b=e,this.c.fire(this.b))}getLevel(){return this.b}f(e){return this.b!==ye.Off&&this.b<=e}},qm=class extends x6{constructor(e){super(),this.h=e}f(e){return this.h||super.f(e)}trace(e,...t){this.f(ye.Trace)&&this.g(ye.Trace,la([e,...t],!0))}debug(e,...t){this.f(ye.Debug)&&this.g(ye.Debug,la([e,...t]))}info(e,...t){this.f(ye.Info)&&this.g(ye.Info,la([e,...t]))}warn(e,...t){this.f(ye.Warning)&&this.g(ye.Warning,la([e,...t]))}error(e,...t){if(this.f(ye.Error))if(e instanceof Error){const r=Array.prototype.slice.call(arguments);r[0]=e.stack,this.g(ye.Error,la(r))}else this.g(ye.Error,la([e,...t]))}flush(){}},DA=class extends x6{constructor(e){super(),this.g=e,e.length&&this.setLevel(e[0].getLevel())}setLevel(e){for(const t of this.g)t.setLevel(e);super.setLevel(e)}trace(e,...t){for(const r of this.g)r.trace(e,...t)}debug(e,...t){for(const r of this.g)r.debug(e,...t)}info(e,...t){for(const r of this.g)r.info(e,...t)}warn(e,...t){for(const r of this.g)r.warn(e,...t)}error(e,...t){for(const r of this.g)r.error(e,...t)}flush(){for(const e of this.g)e.flush()}dispose(){for(const e of this.g)e.dispose();super.dispose()}},AA=class extends ae{constructor(e,t,r){if(super(),this.h=e,this.j=t,this.b=new rr,this.c=this.B(new T),this.onDidChangeLoggers=this.c.event,this.f=this.B(new T),this.onDidChangeLogLevel=this.f.event,this.g=this.B(new T),this.onDidChangeVisibility=this.g.event,r)for(const i of r)this.b.set(i.resource,{logger:void 0,info:i})}m(e){return Me(e)?[...this.b.values()].find(t=>t.info.id===e):this.b.get(e)}getLogger(e){return this.m(e)?.logger}createLogger(e,t){const r=this.n(e),i=Me(e)?e:t?.id??As(r.toString()).toString(16);let s=this.b.get(r)?.logger;const n=t?.logLevel==="always"?ye.Trace:t?.logLevel;s||(s=this.s(r,n??this.getLogLevel(r)??this.h,{...t,id:i}));const o={logger:s,info:{resource:r,id:i,logLevel:n,name:t?.name,hidden:t?.hidden,extensionId:t?.extensionId,when:t?.when}};return this.registerLogger(o.info),this.b.set(r,o),s}n(e){return Me(e)?Mt(this.j,`${e}.log`):e}setLogLevel(e,t){if(k.isUri(e)){const r=e,i=t,s=this.b.get(r);s&&i!==s.info.logLevel&&(s.info.logLevel=i===this.h?void 0:i,s.logger?.setLevel(i),this.b.set(s.info.resource,s),this.f.fire([r,i]))}else{this.h=e;for(const[r,i]of this.b.entries())this.b.get(r)?.info.logLevel===void 0&&i.logger?.setLevel(this.h);this.f.fire(this.h)}}setVisibility(e,t){const r=this.m(e);r&&t!==!r.info.hidden&&(r.info.hidden=!t,this.b.set(r.info.resource,r),this.g.fire([r.info.resource,t]))}getLogLevel(e){let t;return e&&(t=this.b.get(e)?.info.logLevel),t??this.h}registerLogger(e){const t=this.b.get(e.resource);t?t.info.hidden!==e.hidden&&this.setVisibility(e.resource,!e.hidden):(this.b.set(e.resource,{info:e,logger:void 0}),this.c.fire({added:[e],removed:[]}))}deregisterLogger(e){const t=this.b.get(e);t&&(t.logger&&t.logger.dispose(),this.b.delete(e),this.c.fire({added:[],removed:[t.info]}))}*getRegisteredLoggers(){for(const e of this.b.values())yield e.info}getRegisteredLogger(e){return this.b.get(e)?.info}dispose(){this.b.forEach(e=>e.logger?.dispose()),this.b.clear(),super.dispose()}};function TA(e){switch(e){case ye.Trace:return"trace";case ye.Debug:return"debug";case ye.Info:return"info";case ye.Warning:return"warn";case ye.Error:return"error";case ye.Off:return"off"}}function RA(e){switch(e){case"trace":return ye.Trace;case"debug":return ye.Debug;case"info":return ye.Info;case"warn":return ye.Warning;case"error":return ye.Error;case"critical":return ye.Error;case"off":return ye.Off}}var Qz=new J("logLevel",TA(ye.Info)),Rs=class{constructor(e,t=[],r=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=r}},E6=[],S6;(function(e){e[e.Eager=0]="Eager",e[e.Delayed=1]="Delayed"})(S6||(S6={}));function Be(e,t,r){t instanceof Rs||(t=new Rs(t,[],!!r)),E6.push([e,t])}function LA(){return E6}var Gm=class{constructor(...e){this.a=new Map;for(const[t,r]of e)this.set(t,r)}set(e,t){const r=this.a.get(e);return this.a.set(e,t),r}has(e){return this.a.has(e)}get(e){return this.a.get(e)}},er=X("IExtHostInitDataService"),NA=class{constructor(e,t){this.key=e,this.data=t,this.incoming=new Map,this.outgoing=new Map}},$6=class{constructor(e){this.b=e,this.a=new Map}roots(){const e=[];for(const t of this.a.values())t.outgoing.size===0&&e.push(t);return e}insertEdge(e,t){const r=this.lookupOrInsertNode(e),i=this.lookupOrInsertNode(t);r.outgoing.set(i.key,i),i.incoming.set(r.key,r)}removeNode(e){const t=this.b(e);this.a.delete(t);for(const r of this.a.values())r.outgoing.delete(t),r.incoming.delete(t)}lookupOrInsertNode(e){const t=this.b(e);let r=this.a.get(t);return r||(r=new NA(t,e),this.a.set(t,r)),r}lookup(e){return this.a.get(this.b(e))}isEmpty(){return this.a.size===0}toString(){const e=[];for(const[t,r]of this.a)e.push(`${t}
	(-> incoming)[${[...r.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...r.outgoing.keys()].join(",")}]
`);return e.join(`
`)}findCycleSlow(){for(const[e,t]of this.a){const r=new Set([e]),i=this.c(t,r);if(i)return i}}c(e,t){for(const[r,i]of e.outgoing){if(t.has(r))return[...t,r].join(" -> ");t.add(r);const s=this.c(i,t);if(s)return s;t.delete(r)}}},FA=!1,C6=class extends Error{constructor(e){super("cyclic dependency between services"),this.message=e.findCycleSlow()??`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}},OA=class ry{constructor(t=new Gm,r=!1,i,s=FA){this.i=t,this.j=r,this.k=i,this.l=s,this.f=!1,this.g=new Set,this.h=new Set,this.t=new Set,this.i.set(Qh,this),this._globalGraph=s?i?._globalGraph??new $6(n=>n):void 0}dispose(){if(!this.f){this.f=!0,Si(this.h),this.h.clear();for(const t of this.g)GC(t)&&t.dispose();this.g.clear()}}m(){if(this.f)throw new Error("InstantiationService has been disposed")}createChild(t,r){this.m();const i=this,s=new class extends ry{dispose(){i.h.delete(s),super.dispose()}}(t,this.j,this,this.l);return this.h.add(s),r?.add(s),s}invokeFunction(t,...r){this.m();const i=Jm.traceInvocation(this.l,t);let s=!1;try{return t({get:o=>{if(s)throw Jg("service accessor is only valid during the invocation of its target method");const a=this.s(o,i);if(!a)throw new Error(`[invokeFunction] unknown service '${o}'`);return a}},...r)}finally{s=!0,i.stop()}}createInstance(t,...r){this.m();let i,s;return t instanceof Rs?(i=Jm.traceCreation(this.l,t.ctor),s=this.o(t.ctor,t.staticArguments.concat(r),i)):(i=Jm.traceCreation(this.l,t),s=this.o(t,r,i)),i.stop(),s}o(t,r=[],i){const s=Ti.getServiceDependencies(t).sort((a,c)=>a.index-c.index),n=[];for(const a of s){const c=this.s(a.id,i);c||this.y(`[createInstance] ${t.name} depends on UNKNOWN service ${a.id}.`,!1),n.push(c)}const o=s.length>0?s[0].index:r.length;if(r.length!==o){console.trace(`[createInstance] First service dependency of ${t.name} at position ${o+1} conflicts with ${r.length} static arguments`);const a=o-r.length;a>0?r=r.concat(new Array(a)):r=r.slice(0,o)}return Reflect.construct(t,r.concat(n))}q(t,r){if(this.i.get(t)instanceof Rs)this.i.set(t,r);else if(this.k)this.k.q(t,r);else throw new Error("illegalState - setting UNKNOWN service instance")}r(t){const r=this.i.get(t);return!r&&this.k?this.k.r(t):r}s(t,r){this._globalGraph&&this.c&&this._globalGraph.insertEdge(this.c,String(t));const i=this.r(t);return i instanceof Rs?this.u(t,i,r.branch(t,!0)):(r.branch(t,!1),i)}u(t,r,i){if(this.t.has(t))throw new Error(`illegal state - RECURSIVELY instantiating service '${t}'`);this.t.add(t);try{return this.v(t,r,i)}finally{this.t.delete(t)}}v(t,r,i){const s=new $6(c=>c.id.toString());let n=0;const o=[{id:t,desc:r,_trace:i}],a=new Set;for(;o.length;){const c=o.pop();if(!a.has(String(c.id))){if(a.add(String(c.id)),s.lookupOrInsertNode(c),n++>1e3)throw new C6(s);for(const l of Ti.getServiceDependencies(c.desc.ctor)){const u=this.r(l.id);if(u||this.y(`[createInstance] ${t} depends on ${l.id} which is NOT registered.`,!0),this._globalGraph?.insertEdge(String(c.id),String(l.id)),u instanceof Rs){const h={id:l.id,desc:u,_trace:c._trace.branch(l.id,!0)};s.insertEdge(c,h),o.push(h)}}}}for(;;){const c=s.roots();if(c.length===0){if(!s.isEmpty())throw new C6(s);break}for(const{data:l}of c){if(this.r(l.id)instanceof Rs){const h=this.w(l.id,l.desc.ctor,l.desc.staticArguments,l.desc.supportsDelayedInstantiation,l._trace);this.q(l.id,h)}s.removeNode(l)}}return this.r(t)}w(t,r,i=[],s,n){if(this.i.get(t)instanceof Rs)return this.x(t,r,i,s,n,this.g);if(this.k)return this.k.w(t,r,i,s,n);throw new Error(`illegalState - creating UNKNOWN service instance ${r.name}`)}x(t,r,i=[],s,n,o){if(s){const a=new ry(void 0,this.j,this,this.l);a.c=String(t);const c=new Map,l=new _I(()=>{const u=a.o(r,i,n);for(const[h,d]of c){const f=u[h];if(typeof f=="function")for(const g of d)g.disposable=f.apply(u,g.listener)}return c.clear(),o.add(u),u});return new Proxy(Object.create(null),{get(u,h){if(!l.isInitialized&&typeof h=="string"&&(h.startsWith("onDid")||h.startsWith("onWill"))){let g=c.get(h);return g||(g=new Nc,c.set(h,g)),(x,$,C)=>{if(l.isInitialized)return l.value[h](x,$,C);{const L={listener:[x,$,C],disposable:void 0},F=g.push(L);return me(()=>{F(),L.disposable?.dispose()})}}}if(h in u)return u[h];const d=l.value;let f=d[h];return typeof f!="function"||(f=f.bind(d),u[h]=f),f},set(u,h,d){return l.value[h]=d,!0},getPrototypeOf(u){return r.prototype}})}else{const a=this.o(r,i,n);return o.add(a),a}}y(t,r){if(r&&console.warn(t),this.j)throw new Error(t)}},P6;(function(e){e[e.None=0]="None",e[e.Creation=1]="Creation",e[e.Invocation=2]="Invocation",e[e.Branch=3]="Branch"})(P6||(P6={}));var Jm=class ms{static{this.all=new Set}static{this.c=new class extends ms{constructor(){super(0,null)}stop(){}branch(){return this}}}static traceInvocation(t,r){return t?new ms(2,r.name||new Error().stack.split(`
`).slice(3,4).join(`
`)):ms.c}static traceCreation(t,r){return t?new ms(1,r.name):ms.c}static{this.f=0}constructor(t,r){this.type=t,this.name=r,this.g=Date.now(),this.h=[]}branch(t,r){const i=new ms(3,t.toString());return this.h.push([t,r,i]),i}stop(){const t=Date.now()-this.g;ms.f+=t;let r=!1;function i(n,o){const a=[],c=new Array(n+1).join("	");for(const[l,u,h]of o.h)if(u&&h){r=!0,a.push(`${c}CREATES -> ${l}`);const d=i(n+1,h);d&&a.push(d)}else a.push(`${c}uses -> ${l}`);return a.join(`
`)}const s=[`${this.type===1?"CREATE":"CALL"} ${this.name}`,`${i(1,this)}`,`DONE, took ${t.toFixed(2)}ms (grand total ${ms.f.toFixed(2)}ms)`];(t>2||r)&&ms.all.add(s.join(`
`))}},Ue=X("IExtHostRpcService"),MA=class{constructor(e){this.getProxy=e.getProxy.bind(e),this.set=e.set.bind(e),this.dispose=e.dispose.bind(e),this.assertRegistered=e.assertRegistered.bind(e),this.drain=e.drain.bind(e)}},el=X("IURITransformerService"),jA=class{constructor(e){e?(this.transformIncoming=e.transformIncoming.bind(e),this.transformOutgoing=e.transformOutgoing.bind(e),this.transformOutgoingURI=e.transformOutgoingURI.bind(e),this.transformOutgoingScheme=e.transformOutgoingScheme.bind(e)):(this.transformIncoming=t=>t,this.transformOutgoing=t=>t,this.transformOutgoingURI=t=>t,this.transformOutgoingScheme=t=>t)}},UA=class{constructor(){this.b="",this.c=0}reset(e){return this.b=e,this.c=0,this}next(){return this.c+=1,this}hasNext(){return this.c<this.b.length-1}cmp(e){const t=e.charCodeAt(0),r=this.b.charCodeAt(this.c);return t-r}value(){return this.b[this.c]}},HA=class{constructor(e=!0){this.e=e}reset(e){return this.b=e,this.c=0,this.d=0,this.next()}hasNext(){return this.d<this.b.length}next(){this.c=this.d;let e=!0;for(;this.d<this.b.length;this.d++)if(this.b.charCodeAt(this.d)===46)if(e)this.c++;else break;else e=!1;return this}cmp(e){return this.e?om(e,this.b,0,e.length,this.c,this.d):Hc(e,this.b,0,e.length,this.c,this.d)}value(){return this.b.substring(this.c,this.d)}},I6=class{constructor(e=!0,t=!0){this.f=e,this.g=t}reset(e){this.d=0,this.e=0,this.b=e,this.c=e.length;for(let t=e.length-1;t>=0;t--,this.c--){const r=this.b.charCodeAt(t);if(!(r===47||this.f&&r===92))break}return this.next()}hasNext(){return this.e<this.c}next(){this.d=this.e;let e=!0;for(;this.e<this.c;this.e++){const t=this.b.charCodeAt(this.e);if(t===47||this.f&&t===92)if(e)this.d++;else break;else e=!1}return this}cmp(e){return this.g?om(e,this.b,0,e.length,this.d,this.e):Hc(e,this.b,0,e.length,this.d,this.e)}value(){return this.b.substring(this.d,this.e)}},D6;(function(e){e[e.Scheme=1]="Scheme",e[e.Authority=2]="Authority",e[e.Path=3]="Path",e[e.Query=4]="Query",e[e.Fragment=5]="Fragment"})(D6||(D6={}));var BA=class{constructor(e,t){this.f=e,this.g=t,this.d=[],this.e=0}reset(e){return this.c=e,this.d=[],this.c.scheme&&this.d.push(1),this.c.authority&&this.d.push(2),this.c.path&&(this.b=new I6(!1,!this.f(e)),this.b.reset(e.path),this.b.value()&&this.d.push(3)),this.g(e)||(this.c.query&&this.d.push(4),this.c.fragment&&this.d.push(5)),this.e=0,this}next(){return this.d[this.e]===3&&this.b.hasNext()?this.b.next():this.e+=1,this}hasNext(){return this.d[this.e]===3&&this.b.hasNext()||this.e<this.d.length-1}cmp(e){if(this.d[this.e]===1)return r4(e,this.c.scheme);if(this.d[this.e]===2)return r4(e,this.c.authority);if(this.d[this.e]===3)return this.b.cmp(e);if(this.d[this.e]===4)return eo(e,this.c.query);if(this.d[this.e]===5)return eo(e,this.c.fragment);throw new Error}value(){if(this.d[this.e]===1)return this.c.scheme;if(this.d[this.e]===2)return this.c.authority;if(this.d[this.e]===3)return this.b.value();if(this.d[this.e]===4)return this.c.query;if(this.d[this.e]===5)return this.c.fragment;throw new Error}},Xh=class{constructor(){this.height=1}isEmpty(){return!this.left&&!this.mid&&!this.right&&!this.value}rotateLeft(){const e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){const e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){return this.left?.height??0}get heightRight(){return this.right?.height??0}},A6;(function(e){e[e.Left=-1]="Left",e[e.Mid=0]="Mid",e[e.Right=1]="Right"})(A6||(A6={}));var Ls=class ih{static forUris(t=()=>!1,r=()=>!1){return new ih(new BA(t,r))}static forPaths(t=!1){return new ih(new I6(void 0,!t))}static forStrings(){return new ih(new UA)}static forConfigKeys(){return new ih(new HA)}constructor(t){this.b=t}clear(){this.c=void 0}fill(t,r){if(r){const i=r.slice(0);xy(i);for(const s of i)this.set(s,t)}else{const i=t.slice(0);xy(i);for(const s of i)this.set(s[0],s[1])}}set(t,r){const i=this.b.reset(t);let s;this.c||(this.c=new Xh,this.c.segment=i.value());const n=[];for(s=this.c;;){const a=i.cmp(s.segment);if(a>0)s.left||(s.left=new Xh,s.left.segment=i.value()),n.push([-1,s]),s=s.left;else if(a<0)s.right||(s.right=new Xh,s.right.segment=i.value()),n.push([1,s]),s=s.right;else if(i.hasNext())i.next(),s.mid||(s.mid=new Xh,s.mid.segment=i.value()),n.push([0,s]),s=s.mid;else break}const o=s.value;s.value=r,s.key=t;for(let a=n.length-1;a>=0;a--){const c=n[a][1];c.updateHeight();const l=c.balanceFactor();if(l<-1||l>1){const u=n[a][0],h=n[a+1][0];if(u===1&&h===1)n[a][1]=c.rotateLeft();else if(u===-1&&h===-1)n[a][1]=c.rotateRight();else if(u===1&&h===-1)c.right=n[a+1][1]=n[a+1][1].rotateRight(),n[a][1]=c.rotateLeft();else if(u===-1&&h===1)c.left=n[a+1][1]=n[a+1][1].rotateLeft(),n[a][1]=c.rotateRight();else throw new Error;if(a>0)switch(n[a-1][0]){case-1:n[a-1][1].left=n[a][1];break;case 1:n[a-1][1].right=n[a][1];break;case 0:n[a-1][1].mid=n[a][1];break}else this.c=n[0][1]}}return o}get(t){return this.d(t)?.value}d(t){const r=this.b.reset(t);let i=this.c;for(;i;){const s=r.cmp(i.segment);if(s>0)i=i.left;else if(s<0)i=i.right;else if(r.hasNext())r.next(),i=i.mid;else break}return i}has(t){const r=this.d(t);return!(r?.value===void 0&&r?.mid===void 0)}delete(t){return this.e(t,!1)}deleteSuperstr(t){return this.e(t,!0)}e(t,r){const i=this.b.reset(t),s=[];let n=this.c;for(;n;){const o=i.cmp(n.segment);if(o>0)s.push([-1,n]),n=n.left;else if(o<0)s.push([1,n]),n=n.right;else if(i.hasNext())i.next(),s.push([0,n]),n=n.mid;else break}if(n){if(r?(n.left=void 0,n.mid=void 0,n.right=void 0,n.height=1):(n.key=void 0,n.value=void 0),!n.mid&&!n.value)if(n.left&&n.right){const o=this.f(n.right);if(o.key){const{key:a,value:c,segment:l}=o;this.e(o.key,!1),n.key=a,n.value=c,n.segment=l}}else{const o=n.left??n.right;if(s.length>0){const[a,c]=s[s.length-1];switch(a){case-1:c.left=o;break;case 0:c.mid=o;break;case 1:c.right=o;break}}else this.c=o}for(let o=s.length-1;o>=0;o--){const a=s[o][1];a.updateHeight();const c=a.balanceFactor();if(c>1?(a.right.balanceFactor()>=0||(a.right=a.right.rotateRight()),s[o][1]=a.rotateLeft()):c<-1&&(a.left.balanceFactor()<=0||(a.left=a.left.rotateLeft()),s[o][1]=a.rotateRight()),o>0)switch(s[o-1][0]){case-1:s[o-1][1].left=s[o][1];break;case 1:s[o-1][1].right=s[o][1];break;case 0:s[o-1][1].mid=s[o][1];break}else this.c=s[0][1]}}}f(t){for(;t.left;)t=t.left;return t}findSubstr(t){const r=this.b.reset(t);let i=this.c,s;for(;i;){const n=r.cmp(i.segment);if(n>0)i=i.left;else if(n<0)i=i.right;else if(r.hasNext())r.next(),s=i.value||s,i=i.mid;else break}return i&&i.value||s}findSuperstr(t){return this.g(t,!1)}g(t,r){const i=this.b.reset(t);let s=this.c;for(;s;){const n=i.cmp(s.segment);if(n>0)s=s.left;else if(n<0)s=s.right;else if(i.hasNext())i.next(),s=s.mid;else return s.mid?this.h(s.mid):r?s.value:void 0}}hasElementOrSubtree(t){return this.g(t,!0)!==void 0}forEach(t){for(const[r,i]of this)t(i,r)}*[Symbol.iterator](){yield*this.h(this.c)}h(t){const r=[];return this.j(t,r),r[Symbol.iterator]()}j(t,r){t&&(t.left&&this.j(t.left,r),t.value&&r.push([t.key,t.value]),t.mid&&this.j(t.mid,r),t.right&&this.j(t.right,r))}_isBalanced(){const t=r=>{if(!r)return!0;const i=r.balanceFactor();return i<-1||i>1?!1:t(r.left)&&t(r.right)};return t(this.c)}},zA=class{constructor(){this.a=0}getNext(){return this.a++}},_A=class{constructor(){this.a=1,this.b=0}update(e){return this.b=this.b+(e-this.b)/this.a,this.a+=1,this.b}get value(){return this.b}},tl;(function(e){e[e.Ignore=0]="Ignore",e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error"})(tl||(tl={})),function(e){const t="error",r="warning",i="warn",s="info",n="ignore";function o(c){return c?$i(t,c)?e.Error:$i(r,c)||$i(i,c)?e.Warning:$i(s,c)?e.Info:e.Ignore:e.Ignore}e.fromValue=o;function a(c){switch(c){case e.Error:return t;case e.Warning:return r;case e.Info:return s;default:return n}}e.toString=a}(tl||(tl={}));var Ut=tl,WA=Ut,Yz=X("notificationService"),T6;(function(e){e[e.DEFAULT=0]="DEFAULT",e[e.SILENT=1]="SILENT",e[e.URGENT=2]="URGENT"})(T6||(T6={}));var R6;(function(e){e[e.WORKSPACE=0]="WORKSPACE",e[e.PROFILE=1]="PROFILE",e[e.APPLICATION=2]="APPLICATION"})(R6||(R6={}));var L6;(function(e){e[e.OFF=0]="OFF",e[e.ERROR=1]="ERROR"})(L6||(L6={}));var Zh=X("contextService");function VA(e){const t=e;return typeof t?.id=="string"&&k.isUri(t.uri)}function qA(e){const t=e;return typeof t?.id=="string"&&k.isUri(t.configPath)}var N6;(function(e){e[e.EMPTY=1]="EMPTY",e[e.FOLDER=2]="FOLDER",e[e.WORKSPACE=3]="WORKSPACE"})(N6||(N6={}));var GA=class{constructor(e,t,r,i,s){this.h=e,this.j=r,this.k=i,this.l=s,this.c=Ls.forUris(this.l,()=>!0),this.folders=t}update(e){this.h=e.id,this.k=e.configuration,this.j=e.transient,this.l=e.l,this.folders=e.folders}get folders(){return this.g}set folders(e){this.g=e,this.n()}get id(){return this.h}get transient(){return this.j}get configuration(){return this.k}set configuration(e){this.k=e}getFolder(e){return e&&this.c.findSubstr(e)||null}n(){this.c=Ls.forUris(this.l,()=>!0);for(const e of this.folders)this.c.set(e.uri,e)}toJSON(){return{id:this.id,folders:this.folders,transient:this.transient,configuration:this.configuration}}},Qm=class{constructor(e,t){this.raw=t,this.uri=e.uri,this.index=e.index,this.name=e.name}toResource(e){return Mt(this.uri,e)}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}};function Ym(e){return new Qm({uri:e,index:0,name:mm(e)},{uri:e.toString()})}var F6="code-workspace",JA=`.${F6}`,Xz=[{name:p(2505,null),extensions:[F6]}];function QA(e){return(typeof e=="string"?Sh(e):AI(e))===JA}var YA=class{constructor(){this.a=new Set(Object.keys(Q)),this.b=new Map,this.extUri=new zc(e=>{const t=this.b.get(e.scheme);return!(t===void 0||t&1024)})}$acceptProviderInfos(e,t){t===null?this.b.delete(e.scheme):this.b.set(e.scheme,t)}isFreeScheme(e){return!this.b.has(e)&&!this.a.has(e)}getCapabilities(e){return this.b.get(e)}},ua=X("IExtHostFileSystemInfo"),Xm=Object.freeze({create:e=>Qo(e.map(t=>t.toString())).join(`\r
`),split:e=>e.split(`\r
`),parse:e=>Xm.split(e).filter(t=>!t.startsWith("#"))}),Zz=new Uint32Array(10),O6;(function(e){e[e.InitialConsonant=4352]="InitialConsonant",e[e.Vowel=4449]="Vowel",e[e.FinalConsonant=4520]="FinalConsonant",e[e.CompatibilityJamo=12593]="CompatibilityJamo"})(O6||(O6={}));var M6;(function(e){e[e.NUL=0]="NUL",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.j=106]="j",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z"})(M6||(M6={}));var j6;(function(e){e[e.fa=24934]="fa",e[e.fg=26470]="fg",e[e.fq=29030]="fq",e[e.fr=29286]="fr",e[e.ft=29798]="ft",e[e.fv=30310]="fv",e[e.fx=30822]="fx",e[e.hk=27496]="hk",e[e.hl=27752]="hl",e[e.ho=28520]="ho",e[e.ml=27757]="ml",e[e.nj=27246]="nj",e[e.nl=27758]="nl",e[e.np=28782]="np",e[e.qt=29809]="qt",e[e.rt=29810]="rt",e[e.sg=26483]="sg",e[e.sw=30579]="sw"})(j6||(j6={}));var Kz=new Uint8Array([114,82,115,101,69,102,97,113,81,116,84,100,119,87,99,122,120,118,103]),e_=new Uint16Array([107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]),t_=new Uint16Array([114,82,29810,115,30579,26483,101,102,29286,24934,29030,29798,30822,30310,26470,97,113,29809,116,84,100,119,99,122,120,118,103]),r_=new Uint16Array([114,82,29810,115,30579,26483,101,69,102,29286,24934,29030,29798,30822,30310,26470,97,113,81,29809,116,84,100,119,87,99,122,120,118,103,107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]);function U6(...e){return function(t,r){for(let i=0,s=e.length;i<s;i++){const n=e[i](t,r);if(n)return n}return null}}var i_=H6.bind(void 0,!1),Zm=H6.bind(void 0,!0);function H6(e,t,r){if(!r||r.length<t.length)return null;let i;return e?i=Ch(r,t):i=r.indexOf(t)===0,i?t.length>0?[{start:0,end:t.length}]:[]:null}function XA(e,t){const r=t.toLowerCase().indexOf(e.toLowerCase());return r===-1?null:[{start:r,end:r+e.length}]}function ZA(e,t){return Km(e.toLowerCase(),t.toLowerCase(),0,0)}function Km(e,t,r,i){if(r===e.length)return[];if(i===t.length)return null;if(e[r]===t[i]){let s=null;return(s=Km(e,t,r+1,i+1))?z6({start:i,end:i+1},s):null}return Km(e,t,r,i+1)}function e1(e){return 97<=e&&e<=122}function rl(e){return 65<=e&&e<=90}function t1(e){return 48<=e&&e<=57}function KA(e){return e===32||e===9||e===10||e===13}var eT=new Set;"()[]{}<>`'\"-/;:,.?!".split("").forEach(e=>eT.add(e.charCodeAt(0)));function B6(e){return e1(e)||rl(e)||t1(e)}function z6(e,t){return t.length===0?t=[e]:e.end===t[0].start?t[0].start=e.start:t.unshift(e),t}function _6(e,t){for(let r=t;r<e.length;r++){const i=e.charCodeAt(r);if(rl(i)||t1(i)||r>0&&!B6(e.charCodeAt(r-1)))return r}return e.length}function r1(e,t,r,i){if(r===e.length)return[];if(i===t.length)return null;if(e[r]!==t[i].toLowerCase())return null;{let s=null,n=i+1;for(s=r1(e,t,r+1,i+1);!s&&(n=_6(t,n))<t.length;)s=r1(e,t,r+1,n),n++;return s===null?null:z6({start:i,end:i+1},s)}}function tT(e){let t=0,r=0,i=0,s=0,n=0;for(let u=0;u<e.length;u++)n=e.charCodeAt(u),rl(n)&&t++,e1(n)&&r++,B6(n)&&i++,t1(n)&&s++;const o=t/e.length,a=r/e.length,c=i/e.length,l=s/e.length;return{upperPercent:o,lowerPercent:a,alphaPercent:c,numericPercent:l}}function rT(e){const{upperPercent:t,lowerPercent:r}=e;return r===0&&t>.6}function iT(e){const{upperPercent:t,lowerPercent:r,alphaPercent:i,numericPercent:s}=e;return r>.2&&t<.8&&i>.6&&s<.2}function sT(e){let t=0,r=0,i=0,s=0;for(let n=0;n<e.length;n++)i=e.charCodeAt(n),rl(i)&&t++,e1(i)&&r++,KA(i)&&s++;return(t===0||r===0)&&s===0?e.length<=30:t<=5}function W6(e,t){if(!t||(t=t.trim(),t.length===0)||!sT(e))return null;t.length>60&&(t=t.substring(0,60));const r=tT(t);if(!iT(r)){if(!rT(r))return null;t=t.toLowerCase()}let i=null,s=0;for(e=e.toLowerCase();s<t.length&&(i=r1(e,t,0,s))===null;)s=_6(t,s+1);return i}var s_=U6(Zm,W6,XA),n_=U6(Zm,W6,ZA),o_=new Rc(1e4),Kh=128;function i1(){const e=[],t=[];for(let r=0;r<=Kh;r++)t[r]=0;for(let r=0;r<=Kh;r++)e.push(t.slice(0));return e}function V6(e){const t=[];for(let r=0;r<=e;r++)t[r]=0;return t}var a_=V6(2*Kh),c_=V6(2*Kh),l_=i1(),u_=i1(),h_=i1(),q6;(function(e){e[e.Diag=1]="Diag",e[e.Left=2]="Left",e[e.LeftLeft=3]="LeftLeft"})(q6||(q6={}));var G6;(function(e){e.Default=[-100,0];function t(r){return!r||r.length===2&&r[0]===-100&&r[1]===0}e.isDefault=t})(G6||(G6={}));var d_=class{static{this.default={boostFullMatch:!0,firstMatchCanBeWeak:!1}}constructor(e,t){this.firstMatchCanBeWeak=e,this.boostFullMatch=t}},s1=Object.create(null);function m(e,t){if(Me(t)){const r=s1[t];if(r===void 0)throw new Error(`${e} references an unknown codicon: ${t}`);t=r}return s1[e]=t,{id:e}}function nT(){return s1}var oT={add:m("add",6e4),plus:m("plus",6e4),gistNew:m("gist-new",6e4),repoCreate:m("repo-create",6e4),lightbulb:m("lightbulb",60001),lightBulb:m("light-bulb",60001),repo:m("repo",60002),repoDelete:m("repo-delete",60002),gistFork:m("gist-fork",60003),repoForked:m("repo-forked",60003),gitPullRequest:m("git-pull-request",60004),gitPullRequestAbandoned:m("git-pull-request-abandoned",60004),recordKeys:m("record-keys",60005),keyboard:m("keyboard",60005),tag:m("tag",60006),gitPullRequestLabel:m("git-pull-request-label",60006),tagAdd:m("tag-add",60006),tagRemove:m("tag-remove",60006),person:m("person",60007),personFollow:m("person-follow",60007),personOutline:m("person-outline",60007),personFilled:m("person-filled",60007),gitBranch:m("git-branch",60008),gitBranchCreate:m("git-branch-create",60008),gitBranchDelete:m("git-branch-delete",60008),sourceControl:m("source-control",60008),mirror:m("mirror",60009),mirrorPublic:m("mirror-public",60009),star:m("star",60010),starAdd:m("star-add",60010),starDelete:m("star-delete",60010),starEmpty:m("star-empty",60010),comment:m("comment",60011),commentAdd:m("comment-add",60011),alert:m("alert",60012),warning:m("warning",60012),search:m("search",60013),searchSave:m("search-save",60013),logOut:m("log-out",60014),signOut:m("sign-out",60014),logIn:m("log-in",60015),signIn:m("sign-in",60015),eye:m("eye",60016),eyeUnwatch:m("eye-unwatch",60016),eyeWatch:m("eye-watch",60016),circleFilled:m("circle-filled",60017),primitiveDot:m("primitive-dot",60017),closeDirty:m("close-dirty",60017),debugBreakpoint:m("debug-breakpoint",60017),debugBreakpointDisabled:m("debug-breakpoint-disabled",60017),debugHint:m("debug-hint",60017),terminalDecorationSuccess:m("terminal-decoration-success",60017),primitiveSquare:m("primitive-square",60018),edit:m("edit",60019),pencil:m("pencil",60019),info:m("info",60020),issueOpened:m("issue-opened",60020),gistPrivate:m("gist-private",60021),gitForkPrivate:m("git-fork-private",60021),lock:m("lock",60021),mirrorPrivate:m("mirror-private",60021),close:m("close",60022),removeClose:m("remove-close",60022),x:m("x",60022),repoSync:m("repo-sync",60023),sync:m("sync",60023),clone:m("clone",60024),desktopDownload:m("desktop-download",60024),beaker:m("beaker",60025),microscope:m("microscope",60025),vm:m("vm",60026),deviceDesktop:m("device-desktop",60026),file:m("file",60027),fileText:m("file-text",60027),more:m("more",60028),ellipsis:m("ellipsis",60028),kebabHorizontal:m("kebab-horizontal",60028),mailReply:m("mail-reply",60029),reply:m("reply",60029),organization:m("organization",60030),organizationFilled:m("organization-filled",60030),organizationOutline:m("organization-outline",60030),newFile:m("new-file",60031),fileAdd:m("file-add",60031),newFolder:m("new-folder",60032),fileDirectoryCreate:m("file-directory-create",60032),trash:m("trash",60033),trashcan:m("trashcan",60033),history:m("history",60034),clock:m("clock",60034),folder:m("folder",60035),fileDirectory:m("file-directory",60035),symbolFolder:m("symbol-folder",60035),logoGithub:m("logo-github",60036),markGithub:m("mark-github",60036),github:m("github",60036),terminal:m("terminal",60037),console:m("console",60037),repl:m("repl",60037),zap:m("zap",60038),symbolEvent:m("symbol-event",60038),error:m("error",60039),stop:m("stop",60039),variable:m("variable",60040),symbolVariable:m("symbol-variable",60040),array:m("array",60042),symbolArray:m("symbol-array",60042),symbolModule:m("symbol-module",60043),symbolPackage:m("symbol-package",60043),symbolNamespace:m("symbol-namespace",60043),symbolObject:m("symbol-object",60043),symbolMethod:m("symbol-method",60044),symbolFunction:m("symbol-function",60044),symbolConstructor:m("symbol-constructor",60044),symbolBoolean:m("symbol-boolean",60047),symbolNull:m("symbol-null",60047),symbolNumeric:m("symbol-numeric",60048),symbolNumber:m("symbol-number",60048),symbolStructure:m("symbol-structure",60049),symbolStruct:m("symbol-struct",60049),symbolParameter:m("symbol-parameter",60050),symbolTypeParameter:m("symbol-type-parameter",60050),symbolKey:m("symbol-key",60051),symbolText:m("symbol-text",60051),symbolReference:m("symbol-reference",60052),goToFile:m("go-to-file",60052),symbolEnum:m("symbol-enum",60053),symbolValue:m("symbol-value",60053),symbolRuler:m("symbol-ruler",60054),symbolUnit:m("symbol-unit",60054),activateBreakpoints:m("activate-breakpoints",60055),archive:m("archive",60056),arrowBoth:m("arrow-both",60057),arrowDown:m("arrow-down",60058),arrowLeft:m("arrow-left",60059),arrowRight:m("arrow-right",60060),arrowSmallDown:m("arrow-small-down",60061),arrowSmallLeft:m("arrow-small-left",60062),arrowSmallRight:m("arrow-small-right",60063),arrowSmallUp:m("arrow-small-up",60064),arrowUp:m("arrow-up",60065),bell:m("bell",60066),bold:m("bold",60067),book:m("book",60068),bookmark:m("bookmark",60069),debugBreakpointConditionalUnverified:m("debug-breakpoint-conditional-unverified",60070),debugBreakpointConditional:m("debug-breakpoint-conditional",60071),debugBreakpointConditionalDisabled:m("debug-breakpoint-conditional-disabled",60071),debugBreakpointDataUnverified:m("debug-breakpoint-data-unverified",60072),debugBreakpointData:m("debug-breakpoint-data",60073),debugBreakpointDataDisabled:m("debug-breakpoint-data-disabled",60073),debugBreakpointLogUnverified:m("debug-breakpoint-log-unverified",60074),debugBreakpointLog:m("debug-breakpoint-log",60075),debugBreakpointLogDisabled:m("debug-breakpoint-log-disabled",60075),briefcase:m("briefcase",60076),broadcast:m("broadcast",60077),browser:m("browser",60078),bug:m("bug",60079),calendar:m("calendar",60080),caseSensitive:m("case-sensitive",60081),check:m("check",60082),checklist:m("checklist",60083),chevronDown:m("chevron-down",60084),chevronLeft:m("chevron-left",60085),chevronRight:m("chevron-right",60086),chevronUp:m("chevron-up",60087),chromeClose:m("chrome-close",60088),chromeMaximize:m("chrome-maximize",60089),chromeMinimize:m("chrome-minimize",60090),chromeRestore:m("chrome-restore",60091),circleOutline:m("circle-outline",60092),circle:m("circle",60092),debugBreakpointUnverified:m("debug-breakpoint-unverified",60092),terminalDecorationIncomplete:m("terminal-decoration-incomplete",60092),circleSlash:m("circle-slash",60093),circuitBoard:m("circuit-board",60094),clearAll:m("clear-all",60095),clippy:m("clippy",60096),closeAll:m("close-all",60097),cloudDownload:m("cloud-download",60098),cloudUpload:m("cloud-upload",60099),code:m("code",60100),collapseAll:m("collapse-all",60101),colorMode:m("color-mode",60102),commentDiscussion:m("comment-discussion",60103),creditCard:m("credit-card",60105),dash:m("dash",60108),dashboard:m("dashboard",60109),database:m("database",60110),debugContinue:m("debug-continue",60111),debugDisconnect:m("debug-disconnect",60112),debugPause:m("debug-pause",60113),debugRestart:m("debug-restart",60114),debugStart:m("debug-start",60115),debugStepInto:m("debug-step-into",60116),debugStepOut:m("debug-step-out",60117),debugStepOver:m("debug-step-over",60118),debugStop:m("debug-stop",60119),debug:m("debug",60120),deviceCameraVideo:m("device-camera-video",60121),deviceCamera:m("device-camera",60122),deviceMobile:m("device-mobile",60123),diffAdded:m("diff-added",60124),diffIgnored:m("diff-ignored",60125),diffModified:m("diff-modified",60126),diffRemoved:m("diff-removed",60127),diffRenamed:m("diff-renamed",60128),diff:m("diff",60129),diffSidebyside:m("diff-sidebyside",60129),discard:m("discard",60130),editorLayout:m("editor-layout",60131),emptyWindow:m("empty-window",60132),exclude:m("exclude",60133),extensions:m("extensions",60134),eyeClosed:m("eye-closed",60135),fileBinary:m("file-binary",60136),fileCode:m("file-code",60137),fileMedia:m("file-media",60138),filePdf:m("file-pdf",60139),fileSubmodule:m("file-submodule",60140),fileSymlinkDirectory:m("file-symlink-directory",60141),fileSymlinkFile:m("file-symlink-file",60142),fileZip:m("file-zip",60143),files:m("files",60144),filter:m("filter",60145),flame:m("flame",60146),foldDown:m("fold-down",60147),foldUp:m("fold-up",60148),fold:m("fold",60149),folderActive:m("folder-active",60150),folderOpened:m("folder-opened",60151),gear:m("gear",60152),gift:m("gift",60153),gistSecret:m("gist-secret",60154),gist:m("gist",60155),gitCommit:m("git-commit",60156),gitCompare:m("git-compare",60157),compareChanges:m("compare-changes",60157),gitMerge:m("git-merge",60158),githubAction:m("github-action",60159),githubAlt:m("github-alt",60160),globe:m("globe",60161),grabber:m("grabber",60162),graph:m("graph",60163),gripper:m("gripper",60164),heart:m("heart",60165),home:m("home",60166),horizontalRule:m("horizontal-rule",60167),hubot:m("hubot",60168),inbox:m("inbox",60169),issueReopened:m("issue-reopened",60171),issues:m("issues",60172),italic:m("italic",60173),jersey:m("jersey",60174),json:m("json",60175),kebabVertical:m("kebab-vertical",60176),key:m("key",60177),law:m("law",60178),lightbulbAutofix:m("lightbulb-autofix",60179),linkExternal:m("link-external",60180),link:m("link",60181),listOrdered:m("list-ordered",60182),listUnordered:m("list-unordered",60183),liveShare:m("live-share",60184),loading:m("loading",60185),location:m("location",60186),mailRead:m("mail-read",60187),mail:m("mail",60188),markdown:m("markdown",60189),megaphone:m("megaphone",60190),mention:m("mention",60191),milestone:m("milestone",60192),gitPullRequestMilestone:m("git-pull-request-milestone",60192),mortarBoard:m("mortar-board",60193),move:m("move",60194),multipleWindows:m("multiple-windows",60195),mute:m("mute",60196),noNewline:m("no-newline",60197),note:m("note",60198),octoface:m("octoface",60199),openPreview:m("open-preview",60200),package:m("package",60201),paintcan:m("paintcan",60202),pin:m("pin",60203),play:m("play",60204),run:m("run",60204),plug:m("plug",60205),preserveCase:m("preserve-case",60206),preview:m("preview",60207),project:m("project",60208),pulse:m("pulse",60209),question:m("question",60210),quote:m("quote",60211),radioTower:m("radio-tower",60212),reactions:m("reactions",60213),references:m("references",60214),refresh:m("refresh",60215),regex:m("regex",60216),remoteExplorer:m("remote-explorer",60217),remote:m("remote",60218),remove:m("remove",60219),replaceAll:m("replace-all",60220),replace:m("replace",60221),repoClone:m("repo-clone",60222),repoForcePush:m("repo-force-push",60223),repoPull:m("repo-pull",60224),repoPush:m("repo-push",60225),report:m("report",60226),requestChanges:m("request-changes",60227),rocket:m("rocket",60228),rootFolderOpened:m("root-folder-opened",60229),rootFolder:m("root-folder",60230),rss:m("rss",60231),ruby:m("ruby",60232),saveAll:m("save-all",60233),saveAs:m("save-as",60234),save:m("save",60235),screenFull:m("screen-full",60236),screenNormal:m("screen-normal",60237),searchStop:m("search-stop",60238),server:m("server",60240),settingsGear:m("settings-gear",60241),settings:m("settings",60242),shield:m("shield",60243),smiley:m("smiley",60244),sortPrecedence:m("sort-precedence",60245),splitHorizontal:m("split-horizontal",60246),splitVertical:m("split-vertical",60247),squirrel:m("squirrel",60248),starFull:m("star-full",60249),starHalf:m("star-half",60250),symbolClass:m("symbol-class",60251),symbolColor:m("symbol-color",60252),symbolConstant:m("symbol-constant",60253),symbolEnumMember:m("symbol-enum-member",60254),symbolField:m("symbol-field",60255),symbolFile:m("symbol-file",60256),symbolInterface:m("symbol-interface",60257),symbolKeyword:m("symbol-keyword",60258),symbolMisc:m("symbol-misc",60259),symbolOperator:m("symbol-operator",60260),symbolProperty:m("symbol-property",60261),wrench:m("wrench",60261),wrenchSubaction:m("wrench-subaction",60261),symbolSnippet:m("symbol-snippet",60262),tasklist:m("tasklist",60263),telescope:m("telescope",60264),textSize:m("text-size",60265),threeBars:m("three-bars",60266),thumbsdown:m("thumbsdown",60267),thumbsup:m("thumbsup",60268),tools:m("tools",60269),triangleDown:m("triangle-down",60270),triangleLeft:m("triangle-left",60271),triangleRight:m("triangle-right",60272),triangleUp:m("triangle-up",60273),twitter:m("twitter",60274),unfold:m("unfold",60275),unlock:m("unlock",60276),unmute:m("unmute",60277),unverified:m("unverified",60278),verified:m("verified",60279),versions:m("versions",60280),vmActive:m("vm-active",60281),vmOutline:m("vm-outline",60282),vmRunning:m("vm-running",60283),watch:m("watch",60284),whitespace:m("whitespace",60285),wholeWord:m("whole-word",60286),window:m("window",60287),wordWrap:m("word-wrap",60288),zoomIn:m("zoom-in",60289),zoomOut:m("zoom-out",60290),listFilter:m("list-filter",60291),listFlat:m("list-flat",60292),listSelection:m("list-selection",60293),selection:m("selection",60293),listTree:m("list-tree",60294),debugBreakpointFunctionUnverified:m("debug-breakpoint-function-unverified",60295),debugBreakpointFunction:m("debug-breakpoint-function",60296),debugBreakpointFunctionDisabled:m("debug-breakpoint-function-disabled",60296),debugStackframeActive:m("debug-stackframe-active",60297),circleSmallFilled:m("circle-small-filled",60298),debugStackframeDot:m("debug-stackframe-dot",60298),terminalDecorationMark:m("terminal-decoration-mark",60298),debugStackframe:m("debug-stackframe",60299),debugStackframeFocused:m("debug-stackframe-focused",60299),debugBreakpointUnsupported:m("debug-breakpoint-unsupported",60300),symbolString:m("symbol-string",60301),debugReverseContinue:m("debug-reverse-continue",60302),debugStepBack:m("debug-step-back",60303),debugRestartFrame:m("debug-restart-frame",60304),debugAlt:m("debug-alt",60305),callIncoming:m("call-incoming",60306),callOutgoing:m("call-outgoing",60307),menu:m("menu",60308),expandAll:m("expand-all",60309),feedback:m("feedback",60310),gitPullRequestReviewer:m("git-pull-request-reviewer",60310),groupByRefType:m("group-by-ref-type",60311),ungroupByRefType:m("ungroup-by-ref-type",60312),account:m("account",60313),gitPullRequestAssignee:m("git-pull-request-assignee",60313),bellDot:m("bell-dot",60314),debugConsole:m("debug-console",60315),library:m("library",60316),output:m("output",60317),runAll:m("run-all",60318),syncIgnored:m("sync-ignored",60319),pinned:m("pinned",60320),githubInverted:m("github-inverted",60321),serverProcess:m("server-process",60322),serverEnvironment:m("server-environment",60323),pass:m("pass",60324),issueClosed:m("issue-closed",60324),stopCircle:m("stop-circle",60325),playCircle:m("play-circle",60326),record:m("record",60327),debugAltSmall:m("debug-alt-small",60328),vmConnect:m("vm-connect",60329),cloud:m("cloud",60330),merge:m("merge",60331),export:m("export",60332),graphLeft:m("graph-left",60333),magnet:m("magnet",60334),notebook:m("notebook",60335),redo:m("redo",60336),checkAll:m("check-all",60337),pinnedDirty:m("pinned-dirty",60338),passFilled:m("pass-filled",60339),circleLargeFilled:m("circle-large-filled",60340),circleLarge:m("circle-large",60341),circleLargeOutline:m("circle-large-outline",60341),combine:m("combine",60342),gather:m("gather",60342),table:m("table",60343),variableGroup:m("variable-group",60344),typeHierarchy:m("type-hierarchy",60345),typeHierarchySub:m("type-hierarchy-sub",60346),typeHierarchySuper:m("type-hierarchy-super",60347),gitPullRequestCreate:m("git-pull-request-create",60348),runAbove:m("run-above",60349),runBelow:m("run-below",60350),notebookTemplate:m("notebook-template",60351),debugRerun:m("debug-rerun",60352),workspaceTrusted:m("workspace-trusted",60353),workspaceUntrusted:m("workspace-untrusted",60354),workspaceUnknown:m("workspace-unknown",60355),terminalCmd:m("terminal-cmd",60356),terminalDebian:m("terminal-debian",60357),terminalLinux:m("terminal-linux",60358),terminalPowershell:m("terminal-powershell",60359),terminalTmux:m("terminal-tmux",60360),terminalUbuntu:m("terminal-ubuntu",60361),terminalBash:m("terminal-bash",60362),arrowSwap:m("arrow-swap",60363),copy:m("copy",60364),personAdd:m("person-add",60365),filterFilled:m("filter-filled",60366),wand:m("wand",60367),debugLineByLine:m("debug-line-by-line",60368),inspect:m("inspect",60369),layers:m("layers",60370),layersDot:m("layers-dot",60371),layersActive:m("layers-active",60372),compass:m("compass",60373),compassDot:m("compass-dot",60374),compassActive:m("compass-active",60375),azure:m("azure",60376),issueDraft:m("issue-draft",60377),gitPullRequestClosed:m("git-pull-request-closed",60378),gitPullRequestDraft:m("git-pull-request-draft",60379),debugAll:m("debug-all",60380),debugCoverage:m("debug-coverage",60381),runErrors:m("run-errors",60382),folderLibrary:m("folder-library",60383),debugContinueSmall:m("debug-continue-small",60384),beakerStop:m("beaker-stop",60385),graphLine:m("graph-line",60386),graphScatter:m("graph-scatter",60387),pieChart:m("pie-chart",60388),bracket:m("bracket",60175),bracketDot:m("bracket-dot",60389),bracketError:m("bracket-error",60390),lockSmall:m("lock-small",60391),azureDevops:m("azure-devops",60392),verifiedFilled:m("verified-filled",60393),newline:m("newline",60394),layout:m("layout",60395),layoutActivitybarLeft:m("layout-activitybar-left",60396),layoutActivitybarRight:m("layout-activitybar-right",60397),layoutPanelLeft:m("layout-panel-left",60398),layoutPanelCenter:m("layout-panel-center",60399),layoutPanelJustify:m("layout-panel-justify",60400),layoutPanelRight:m("layout-panel-right",60401),layoutPanel:m("layout-panel",60402),layoutSidebarLeft:m("layout-sidebar-left",60403),layoutSidebarRight:m("layout-sidebar-right",60404),layoutStatusbar:m("layout-statusbar",60405),layoutMenubar:m("layout-menubar",60406),layoutCentered:m("layout-centered",60407),target:m("target",60408),indent:m("indent",60409),recordSmall:m("record-small",60410),errorSmall:m("error-small",60411),terminalDecorationError:m("terminal-decoration-error",60411),arrowCircleDown:m("arrow-circle-down",60412),arrowCircleLeft:m("arrow-circle-left",60413),arrowCircleRight:m("arrow-circle-right",60414),arrowCircleUp:m("arrow-circle-up",60415),layoutSidebarRightOff:m("layout-sidebar-right-off",60416),layoutPanelOff:m("layout-panel-off",60417),layoutSidebarLeftOff:m("layout-sidebar-left-off",60418),blank:m("blank",60419),heartFilled:m("heart-filled",60420),map:m("map",60421),mapHorizontal:m("map-horizontal",60421),foldHorizontal:m("fold-horizontal",60421),mapFilled:m("map-filled",60422),mapHorizontalFilled:m("map-horizontal-filled",60422),foldHorizontalFilled:m("fold-horizontal-filled",60422),circleSmall:m("circle-small",60423),bellSlash:m("bell-slash",60424),bellSlashDot:m("bell-slash-dot",60425),commentUnresolved:m("comment-unresolved",60426),gitPullRequestGoToChanges:m("git-pull-request-go-to-changes",60427),gitPullRequestNewChanges:m("git-pull-request-new-changes",60428),searchFuzzy:m("search-fuzzy",60429),commentDraft:m("comment-draft",60430),send:m("send",60431),sparkle:m("sparkle",60432),insert:m("insert",60433),mic:m("mic",60434),thumbsdownFilled:m("thumbsdown-filled",60435),thumbsupFilled:m("thumbsup-filled",60436),coffee:m("coffee",60437),snake:m("snake",60438),game:m("game",60439),vr:m("vr",60440),chip:m("chip",60441),piano:m("piano",60442),music:m("music",60443),micFilled:m("mic-filled",60444),repoFetch:m("repo-fetch",60445),copilot:m("copilot",60446),lightbulbSparkle:m("lightbulb-sparkle",60447),robot:m("robot",60448),sparkleFilled:m("sparkle-filled",60449),diffSingle:m("diff-single",60450),diffMultiple:m("diff-multiple",60451),surroundWith:m("surround-with",60452),share:m("share",60453),gitStash:m("git-stash",60454),gitStashApply:m("git-stash-apply",60455),gitStashPop:m("git-stash-pop",60456),vscode:m("vscode",60457),vscodeInsiders:m("vscode-insiders",60458),codeOss:m("code-oss",60459),runCoverage:m("run-coverage",60460),runAllCoverage:m("run-all-coverage",60461),coverage:m("coverage",60462),githubProject:m("github-project",60463),mapVertical:m("map-vertical",60464),foldVertical:m("fold-vertical",60464),mapVerticalFilled:m("map-vertical-filled",60465),foldVerticalFilled:m("fold-vertical-filled",60465),goToSearch:m("go-to-search",60466),percentage:m("percentage",60467),sortPercentage:m("sort-percentage",60467),attach:m("attach",60468)},aT={dialogError:m("dialog-error","error"),dialogWarning:m("dialog-warning","warning"),dialogInfo:m("dialog-info","info"),dialogClose:m("dialog-close","close"),treeItemExpanded:m("tree-item-expanded","chevron-down"),treeFilterOnTypeOn:m("tree-filter-on-type-on","list-filter"),treeFilterOnTypeOff:m("tree-filter-on-type-off","list-selection"),treeFilterClear:m("tree-filter-clear","close"),treeItemLoading:m("tree-item-loading","loading"),menuSelection:m("menu-selection","check"),menuSubmenu:m("menu-submenu","chevron-right"),menuBarMore:m("menubar-more","more"),scrollbarButtonLeft:m("scrollbar-button-left","triangle-left"),scrollbarButtonRight:m("scrollbar-button-right","triangle-right"),scrollbarButtonUp:m("scrollbar-button-up","triangle-up"),scrollbarButtonDown:m("scrollbar-button-down","triangle-down"),toolBarMore:m("toolbar-more","more"),quickInputBack:m("quick-input-back","arrow-left"),dropDownButton:m("drop-down-button",60084),symbolCustomColor:m("symbol-customcolor",60252),exportIcon:m("export",60332),workspaceUnspecified:m("workspace-unspecified",60355),newLine:m("newline",60394),thumbsDownFilled:m("thumbsdown-filled",60435),thumbsUpFilled:m("thumbsup-filled",60436),gitFetch:m("git-fetch",60445),lightbulbSparkleAutofix:m("lightbulb-sparkle-autofix",60447),debugBreakpointPending:m("debug-breakpoint-pending",60377)},ve={...oT,...aT},ha;(function(e){function t(r){return r&&typeof r=="object"&&typeof r.id=="string"}e.isThemeColor=t})(ha||(ha={}));var or;(function(e){e.iconNameSegment="[A-Za-z0-9]+",e.iconNameExpression="[A-Za-z0-9-]+",e.iconModifierExpression="~[A-Za-z]+",e.iconNameCharacter="[A-Za-z0-9~-]";const t=new RegExp(`^(${e.iconNameExpression})(${e.iconModifierExpression})?$`);function r(d){const f=t.exec(d.id);if(!f)return r(ve.error);const[,g,v]=f,x=["codicon","codicon-"+g];return v&&x.push("codicon-modifier-"+v.substring(1)),x}e.asClassNameArray=r;function i(d){return r(d).join(" ")}e.asClassName=i;function s(d){return"."+r(d).join(".")}e.asCSSSelector=s;function n(d){return d&&typeof d=="object"&&typeof d.id=="string"&&(typeof d.color>"u"||ha.isThemeColor(d.color))}e.isThemeIcon=n;const o=new RegExp(`^\\$\\((${e.iconNameExpression}(?:${e.iconModifierExpression})?)\\)$`);function a(d){const f=o.exec(d);if(!f)return;const[,g]=f;return{id:g}}e.fromString=a;function c(d){return{id:d}}e.fromId=c;function l(d,f){let g=d.id;const v=g.lastIndexOf("~");return v!==-1&&(g=g.substring(0,v)),f&&(g=`${g}~${f}`),{id:g}}e.modify=l;function u(d){const f=d.id.lastIndexOf("~");if(f!==-1)return d.id.substring(f+1)}e.getModifier=u;function h(d,f){return d.id===f.id&&d.color?.id===f.color?.id}e.isEqual=h})(or||(or={}));var n1=new RegExp(`\\$\\(${or.iconNameExpression}(?:${or.iconModifierExpression})?\\)`,"g"),cT=new RegExp(`(\\\\)?${n1.source}`,"g");function lT(e){return e.replace(cT,(t,r)=>r?t:`\\${t}`)}var f_=new RegExp(`\\\\${n1.source}`,"g"),p_=new RegExp(`(\\s)?(\\\\)?${n1.source}(\\s)?`,"g"),g_=new RegExp(`\\$\\(${or.iconNameCharacter}+\\)`,"g"),J6;(function(e){e[e.Paragraph=0]="Paragraph",e[e.Break=1]="Break"})(J6||(J6={}));var Q6=class{constructor(e="",t=!1){if(this.value=e,typeof this.value!="string")throw Le("value");typeof t=="boolean"?(this.isTrusted=t,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=t.isTrusted??void 0,this.supportThemeIcons=t.supportThemeIcons??!1,this.supportHtml=t.supportHtml??!1)}appendText(e,t=0){return this.value+=uT(this.supportThemeIcons?lT(e):e).replace(/([ \t]+)/g,(r,i)=>"&nbsp;".repeat(i.length)).replace(/\>/gm,"\\>").replace(/\n/g,t===1?`\\
`:`

`),this}appendMarkdown(e){return this.value+=e,this}appendCodeblock(e,t){return this.value+=`
${hT(t,e)}
`,this}appendLink(e,t,r){return this.value+="[",this.value+=this.c(t,"]"),this.value+="](",this.value+=this.c(String(e),")"),r&&(this.value+=` "${this.c(this.c(r,'"'),")")}"`),this.value+=")",this}c(e,t){const r=new RegExp(fn(t),"g");return e.replace(r,(i,s)=>e.charAt(s-1)!=="\\"?`\\${i}`:i)}};function co(e){return e instanceof Q6?!0:e&&typeof e=="object"?typeof e.value=="string"&&(typeof e.isTrusted=="boolean"||typeof e.isTrusted=="object"||e.isTrusted===void 0)&&(typeof e.supportThemeIcons=="boolean"||e.supportThemeIcons===void 0):!1}function uT(e){return e.replace(/[\\`*_{}[\]()#+\-!~]/g,"\\$&")}function hT(e,t){const r=e.match(/^`+/gm)?.reduce((s,n)=>s.length>n.length?s:n).length??0,i=r>=3?r+1:3;return[`${"`".repeat(i)}${t}`,e,`${"`".repeat(i)}`].join(`
`)}function dT(e){const t=[],r=e.split("|").map(s=>s.trim());e=r[0];const i=r[1];if(i){const s=/height=(\d+)/.exec(i),n=/width=(\d+)/.exec(i),o=s?s[1]:"",a=n?n[1]:"",c=isFinite(parseInt(a)),l=isFinite(parseInt(o));c&&t.push(`width="${a}"`),l&&t.push(`height="${o}"`)}return{href:e,dimensions:t}}var ar={};(function(){function e(t,r){r(ar)}e.amd=!0,function(t,r){typeof e=="function"&&e.amd?e(["exports"],r):typeof exports=="object"&&typeof module<"u"?r(exports):(t=typeof globalThis<"u"?globalThis:t||self,r(t.marked={}))}(this,function(t){"use strict";function r(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}t.defaults=r();function i(N){t.defaults=N}const s=/[&<>"']/,n=new RegExp(s.source,"g"),o=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,a=new RegExp(o.source,"g"),c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},l=N=>c[N];function u(N,y){if(y){if(s.test(N))return N.replace(n,l)}else if(o.test(N))return N.replace(a,l);return N}const h=/(^|[^\[])\^/g;function d(N,y){let E=typeof N=="string"?N:N.source;y=y||"";const S={replace:(I,R)=>{let M=typeof R=="string"?R:R.source;return M=M.replace(h,"$1"),E=E.replace(I,M),S},getRegex:()=>new RegExp(E,y)};return S}function f(N){try{N=encodeURI(N).replace(/%25/g,"%")}catch{return null}return N}const g={exec:()=>null};function v(N,y){const E=N.replace(/\|/g,(R,M,_)=>{let te=!1,ce=M;for(;--ce>=0&&_[ce]==="\\";)te=!te;return te?"|":" |"}),S=E.split(/ \|/);let I=0;if(S[0].trim()||S.shift(),S.length>0&&!S[S.length-1].trim()&&S.pop(),y)if(S.length>y)S.splice(y);else for(;S.length<y;)S.push("");for(;I<S.length;I++)S[I]=S[I].trim().replace(/\\\|/g,"|");return S}function x(N,y,E){const S=N.length;if(S===0)return"";let I=0;for(;I<S;){const R=N.charAt(S-I-1);if(R===y&&!E)I++;else if(R!==y&&E)I++;else break}return N.slice(0,S-I)}function $(N,y){if(N.indexOf(y[1])===-1)return-1;let E=0;for(let S=0;S<N.length;S++)if(N[S]==="\\")S++;else if(N[S]===y[0])E++;else if(N[S]===y[1]&&(E--,E<0))return S;return-1}function C(N,y,E,S){const I=y.href,R=y.title?u(y.title):null,M=N[1].replace(/\\([\[\]])/g,"$1");if(N[0].charAt(0)!=="!"){S.state.inLink=!0;const _={type:"link",raw:E,href:I,title:R,text:M,tokens:S.inlineTokens(M)};return S.state.inLink=!1,_}return{type:"image",raw:E,href:I,title:R,text:u(M)}}function L(N,y){const E=N.match(/^(\s+)(?:```)/);if(E===null)return y;const S=E[1];return y.split(`
`).map(I=>{const R=I.match(/^\s+/);if(R===null)return I;const[M]=R;return M.length>=S.length?I.slice(S.length):I}).join(`
`)}class F{options;rules;lexer;constructor(y){this.options=y||t.defaults}space(y){const E=this.rules.block.newline.exec(y);if(E&&E[0].length>0)return{type:"space",raw:E[0]}}code(y){const E=this.rules.block.code.exec(y);if(E){const S=E[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:E[0],codeBlockStyle:"indented",text:this.options.pedantic?S:x(S,`
`)}}}fences(y){const E=this.rules.block.fences.exec(y);if(E){const S=E[0],I=L(S,E[3]||"");return{type:"code",raw:S,lang:E[2]?E[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):E[2],text:I}}}heading(y){const E=this.rules.block.heading.exec(y);if(E){let S=E[2].trim();if(/#$/.test(S)){const I=x(S,"#");(this.options.pedantic||!I||/ $/.test(I))&&(S=I.trim())}return{type:"heading",raw:E[0],depth:E[1].length,text:S,tokens:this.lexer.inline(S)}}}hr(y){const E=this.rules.block.hr.exec(y);if(E)return{type:"hr",raw:x(E[0],`
`)}}blockquote(y){const E=this.rules.block.blockquote.exec(y);if(E){let S=x(E[0],`
`).split(`
`),I="",R="";const M=[];for(;S.length>0;){let _=!1;const te=[];let ce;for(ce=0;ce<S.length;ce++)if(/^ {0,3}>/.test(S[ce]))te.push(S[ce]),_=!0;else if(!_)te.push(S[ce]);else break;S=S.slice(ce);const Ie=te.join(`
`),Ve=Ie.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`).replace(/^ {0,3}>[ \t]?/gm,"");I=I?`${I}
${Ie}`:Ie,R=R?`${R}
${Ve}`:Ve;const pt=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(Ve,M,!0),this.lexer.state.top=pt,S.length===0)break;const Wt=M[M.length-1];if(Wt?.type==="code")break;if(Wt?.type==="blockquote"){const vt=Wt,Ur=vt.raw+`
`+S.join(`
`),ai=this.blockquote(Ur);M[M.length-1]=ai,I=I.substring(0,I.length-vt.raw.length)+ai.raw,R=R.substring(0,R.length-vt.text.length)+ai.text;break}else if(Wt?.type==="list"){const vt=Wt,Ur=vt.raw+`
`+S.join(`
`),ai=this.list(Ur);M[M.length-1]=ai,I=I.substring(0,I.length-Wt.raw.length)+ai.raw,R=R.substring(0,R.length-vt.raw.length)+ai.raw,S=Ur.substring(M[M.length-1].raw.length).split(`
`);continue}}return{type:"blockquote",raw:I,tokens:M,text:R}}}list(y){let E=this.rules.block.list.exec(y);if(E){let S=E[1].trim();const I=S.length>1,R={type:"list",raw:"",ordered:I,start:I?+S.slice(0,-1):"",loose:!1,items:[]};S=I?`\\d{1,9}\\${S.slice(-1)}`:`\\${S}`,this.options.pedantic&&(S=I?S:"[*+-]");const M=new RegExp(`^( {0,3}${S})((?:[	 ][^\\n]*)?(?:\\n|$))`);let _=!1;for(;y;){let te=!1,ce="",Ie="";if(!(E=M.exec(y))||this.rules.block.hr.test(y))break;ce=E[0],y=y.substring(ce.length);let Ve=E[2].split(`
`,1)[0].replace(/^\t+/,Cc=>" ".repeat(3*Cc.length)),pt=y.split(`
`,1)[0],Wt=!Ve.trim(),vt=0;if(this.options.pedantic?(vt=2,Ie=Ve.trimStart()):Wt?vt=E[1].length+1:(vt=E[2].search(/[^ ]/),vt=vt>4?1:vt,Ie=Ve.slice(vt),vt+=E[1].length),Wt&&/^ *$/.test(pt)&&(ce+=pt+`
`,y=y.substring(pt.length+1),te=!0),!te){const Cc=new RegExp(`^ {0,${Math.min(3,vt-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),ah=new RegExp(`^ {0,${Math.min(3,vt-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),ch=new RegExp(`^ {0,${Math.min(3,vt-1)}}(?:\`\`\`|~~~)`),lh=new RegExp(`^ {0,${Math.min(3,vt-1)}}#`);for(;y;){const Pc=y.split(`
`,1)[0];if(pt=Pc,this.options.pedantic&&(pt=pt.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),ch.test(pt)||lh.test(pt)||Cc.test(pt)||ah.test(y))break;if(pt.search(/[^ ]/)>=vt||!pt.trim())Ie+=`
`+pt.slice(vt);else{if(Wt||Ve.search(/[^ ]/)>=4||ch.test(Ve)||lh.test(Ve)||ah.test(Ve))break;Ie+=`
`+pt}!Wt&&!pt.trim()&&(Wt=!0),ce+=Pc+`
`,y=y.substring(Pc.length+1),Ve=pt.slice(vt)}}R.loose||(_?R.loose=!0:/\n *\n *$/.test(ce)&&(_=!0));let Ur=null,ai;this.options.gfm&&(Ur=/^\[[ xX]\] /.exec(Ie),Ur&&(ai=Ur[0]!=="[ ] ",Ie=Ie.replace(/^\[[ xX]\] +/,""))),R.items.push({type:"list_item",raw:ce,task:!!Ur,checked:ai,loose:!1,text:Ie,tokens:[]}),R.raw+=ce}R.items[R.items.length-1].raw=R.items[R.items.length-1].raw.trimEnd(),R.items[R.items.length-1].text=R.items[R.items.length-1].text.trimEnd(),R.raw=R.raw.trimEnd();for(let te=0;te<R.items.length;te++)if(this.lexer.state.top=!1,R.items[te].tokens=this.lexer.blockTokens(R.items[te].text,[]),!R.loose){const ce=R.items[te].tokens.filter(Ve=>Ve.type==="space"),Ie=ce.length>0&&ce.some(Ve=>/\n.*\n/.test(Ve.raw));R.loose=Ie}if(R.loose)for(let te=0;te<R.items.length;te++)R.items[te].loose=!0;return R}}html(y){const E=this.rules.block.html.exec(y);if(E)return{type:"html",block:!0,raw:E[0],pre:E[1]==="pre"||E[1]==="script"||E[1]==="style",text:E[0]}}def(y){const E=this.rules.block.def.exec(y);if(E){const S=E[1].toLowerCase().replace(/\s+/g," "),I=E[2]?E[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",R=E[3]?E[3].substring(1,E[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):E[3];return{type:"def",tag:S,raw:E[0],href:I,title:R}}}table(y){const E=this.rules.block.table.exec(y);if(!E||!/[:|]/.test(E[2]))return;const S=v(E[1]),I=E[2].replace(/^\||\| *$/g,"").split("|"),R=E[3]&&E[3].trim()?E[3].replace(/\n[ \t]*$/,"").split(`
`):[],M={type:"table",raw:E[0],header:[],align:[],rows:[]};if(S.length===I.length){for(const _ of I)/^ *-+: *$/.test(_)?M.align.push("right"):/^ *:-+: *$/.test(_)?M.align.push("center"):/^ *:-+ *$/.test(_)?M.align.push("left"):M.align.push(null);for(let _=0;_<S.length;_++)M.header.push({text:S[_],tokens:this.lexer.inline(S[_]),header:!0,align:M.align[_]});for(const _ of R)M.rows.push(v(_,M.header.length).map((te,ce)=>({text:te,tokens:this.lexer.inline(te),header:!1,align:M.align[ce]})));return M}}lheading(y){const E=this.rules.block.lheading.exec(y);if(E)return{type:"heading",raw:E[0],depth:E[2].charAt(0)==="="?1:2,text:E[1],tokens:this.lexer.inline(E[1])}}paragraph(y){const E=this.rules.block.paragraph.exec(y);if(E){const S=E[1].charAt(E[1].length-1)===`
`?E[1].slice(0,-1):E[1];return{type:"paragraph",raw:E[0],text:S,tokens:this.lexer.inline(S)}}}text(y){const E=this.rules.block.text.exec(y);if(E)return{type:"text",raw:E[0],text:E[0],tokens:this.lexer.inline(E[0])}}escape(y){const E=this.rules.inline.escape.exec(y);if(E)return{type:"escape",raw:E[0],text:u(E[1])}}tag(y){const E=this.rules.inline.tag.exec(y);if(E)return!this.lexer.state.inLink&&/^<a /i.test(E[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(E[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(E[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(E[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:E[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:E[0]}}link(y){const E=this.rules.inline.link.exec(y);if(E){const S=E[2].trim();if(!this.options.pedantic&&/^</.test(S)){if(!/>$/.test(S))return;const M=x(S.slice(0,-1),"\\");if((S.length-M.length)%2===0)return}else{const M=$(E[2],"()");if(M>-1){const te=(E[0].indexOf("!")===0?5:4)+E[1].length+M;E[2]=E[2].substring(0,M),E[0]=E[0].substring(0,te).trim(),E[3]=""}}let I=E[2],R="";if(this.options.pedantic){const M=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(I);M&&(I=M[1],R=M[3])}else R=E[3]?E[3].slice(1,-1):"";return I=I.trim(),/^</.test(I)&&(this.options.pedantic&&!/>$/.test(S)?I=I.slice(1):I=I.slice(1,-1)),C(E,{href:I&&I.replace(this.rules.inline.anyPunctuation,"$1"),title:R&&R.replace(this.rules.inline.anyPunctuation,"$1")},E[0],this.lexer)}}reflink(y,E){let S;if((S=this.rules.inline.reflink.exec(y))||(S=this.rules.inline.nolink.exec(y))){const I=(S[2]||S[1]).replace(/\s+/g," "),R=E[I.toLowerCase()];if(!R){const M=S[0].charAt(0);return{type:"text",raw:M,text:M}}return C(S,R,S[0],this.lexer)}}emStrong(y,E,S=""){let I=this.rules.inline.emStrongLDelim.exec(y);if(!I||I[3]&&S.match(/[\p{L}\p{N}]/u))return;if(!(I[1]||I[2]||"")||!S||this.rules.inline.punctuation.exec(S)){const M=[...I[0]].length-1;let _,te,ce=M,Ie=0;const Ve=I[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(Ve.lastIndex=0,E=E.slice(-1*y.length+M);(I=Ve.exec(E))!=null;){if(_=I[1]||I[2]||I[3]||I[4]||I[5]||I[6],!_)continue;if(te=[..._].length,I[3]||I[4]){ce+=te;continue}else if((I[5]||I[6])&&M%3&&!((M+te)%3)){Ie+=te;continue}if(ce-=te,ce>0)continue;te=Math.min(te,te+ce+Ie);const pt=[...I[0]][0].length,Wt=y.slice(0,M+I.index+pt+te);if(Math.min(M,te)%2){const Ur=Wt.slice(1,-1);return{type:"em",raw:Wt,text:Ur,tokens:this.lexer.inlineTokens(Ur)}}const vt=Wt.slice(2,-2);return{type:"strong",raw:Wt,text:vt,tokens:this.lexer.inlineTokens(vt)}}}}codespan(y){const E=this.rules.inline.code.exec(y);if(E){let S=E[2].replace(/\n/g," ");const I=/[^ ]/.test(S),R=/^ /.test(S)&&/ $/.test(S);return I&&R&&(S=S.substring(1,S.length-1)),S=u(S,!0),{type:"codespan",raw:E[0],text:S}}}br(y){const E=this.rules.inline.br.exec(y);if(E)return{type:"br",raw:E[0]}}del(y){const E=this.rules.inline.del.exec(y);if(E)return{type:"del",raw:E[0],text:E[2],tokens:this.lexer.inlineTokens(E[2])}}autolink(y){const E=this.rules.inline.autolink.exec(y);if(E){let S,I;return E[2]==="@"?(S=u(E[1]),I="mailto:"+S):(S=u(E[1]),I=S),{type:"link",raw:E[0],text:S,href:I,tokens:[{type:"text",raw:S,text:S}]}}}url(y){let E;if(E=this.rules.inline.url.exec(y)){let S,I;if(E[2]==="@")S=u(E[0]),I="mailto:"+S;else{let R;do R=E[0],E[0]=this.rules.inline._backpedal.exec(E[0])?.[0]??"";while(R!==E[0]);S=u(E[0]),E[1]==="www."?I="http://"+E[0]:I=E[0]}return{type:"link",raw:E[0],text:S,href:I,tokens:[{type:"text",raw:S,text:S}]}}}inlineText(y){const E=this.rules.inline.text.exec(y);if(E){let S;return this.lexer.state.inRawBlock?S=E[0]:S=u(E[0]),{type:"text",raw:E[0],text:S}}}}const z=/^(?: *(?:\n|$))+/,Y=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,oe=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Z=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,se=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Ae=/(?:[*+-]|\d{1,9}[.)])/,xe=d(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,Ae).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),tt=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,dt=/^[^\n]+/,ee=/(?!\s*\])(?:\\.|[^\[\]\\])+/,q=d(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",ee).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),ne=d(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Ae).getRegex(),G="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",le=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Pe=d("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",le).replace("tag",G).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),we=d(tt).replace("hr",Z).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",G).getRegex(),Ge={blockquote:d(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",we).getRegex(),code:Y,def:q,fences:oe,heading:se,hr:Z,html:Pe,lheading:xe,list:ne,newline:z,paragraph:we,table:g,text:dt},At=d("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Z).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",G).getRegex(),Tt={...Ge,table:At,paragraph:d(tt).replace("hr",Z).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",At).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",G).getRegex()},Yt={...Ge,html:d(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",le).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:g,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:d(tt).replace("hr",Z).replace("heading",` *#{1,6} *[^
]`).replace("lheading",xe).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},ot=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,cr=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,bi=/^( {2,}|\\)\n(?!\s*$)/,yi=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Xr="\\p{P}\\p{S}",Te=d(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,Xr).getRegex(),ki=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,Je=d(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,Xr).getRegex(),ni=d("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,Xr).getRegex(),Mr=d("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,Xr).getRegex(),jr=d(/\\([punct])/,"gu").replace(/punct/g,Xr).getRegex(),on=d(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),an=d(le).replace("(?:-->|$)","-->").getRegex(),qn=d("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",an).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Qi=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Gn=d(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Qi).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),ws=d(/^!?\[(label)\]\[(ref)\]/).replace("label",Qi).replace("ref",ee).getRegex(),bs=d(/^!?\[(ref)\](?:\[\])?/).replace("ref",ee).getRegex(),lr=d("reflink|nolink(?!\\()","g").replace("reflink",ws).replace("nolink",bs).getRegex(),Zr={_backpedal:g,anyPunctuation:jr,autolink:on,blockSkip:ki,br:bi,code:cr,del:g,emStrongLDelim:Je,emStrongRDelimAst:ni,emStrongRDelimUnd:Mr,escape:ot,link:Gn,nolink:bs,punctuation:Te,reflink:ws,reflinkSearch:lr,tag:qn,text:yi,url:g},xt={...Zr,link:d(/^!?\[(label)\]\((.*?)\)/).replace("label",Qi).getRegex(),reflink:d(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Qi).getRegex()},_t={...Zr,escape:d(ot).replace("])","~|])").getRegex(),url:d(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Yi={..._t,br:d(bi).replace("{2,}","*").getRegex(),text:d(_t.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},cn={normal:Ge,gfm:Tt,pedantic:Yt},oi={normal:Zr,gfm:_t,breaks:Yi,pedantic:xt};class Xt{tokens;options;state;tokenizer;inlineQueue;constructor(y){this.tokens=[],this.tokens.links=Object.create(null),this.options=y||t.defaults,this.options.tokenizer=this.options.tokenizer||new F,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const E={block:cn.normal,inline:oi.normal};this.options.pedantic?(E.block=cn.pedantic,E.inline=oi.pedantic):this.options.gfm&&(E.block=cn.gfm,this.options.breaks?E.inline=oi.breaks:E.inline=oi.gfm),this.tokenizer.rules=E}static get rules(){return{block:cn,inline:oi}}static lex(y,E){return new Xt(E).lex(y)}static lexInline(y,E){return new Xt(E).inlineTokens(y)}lex(y){y=y.replace(/\r\n|\r/g,`
`),this.blockTokens(y,this.tokens);for(let E=0;E<this.inlineQueue.length;E++){const S=this.inlineQueue[E];this.inlineTokens(S.src,S.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(y,E=[],S=!1){this.options.pedantic?y=y.replace(/\t/g,"    ").replace(/^ +$/gm,""):y=y.replace(/^( *)(\t+)/gm,(_,te,ce)=>te+"    ".repeat(ce.length));let I,R,M;for(;y;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(_=>(I=_.call({lexer:this},y,E))?(y=y.substring(I.raw.length),E.push(I),!0):!1))){if(I=this.tokenizer.space(y)){y=y.substring(I.raw.length),I.raw.length===1&&E.length>0?E[E.length-1].raw+=`
`:E.push(I);continue}if(I=this.tokenizer.code(y)){y=y.substring(I.raw.length),R=E[E.length-1],R&&(R.type==="paragraph"||R.type==="text")?(R.raw+=`
`+I.raw,R.text+=`
`+I.text,this.inlineQueue[this.inlineQueue.length-1].src=R.text):E.push(I);continue}if(I=this.tokenizer.fences(y)){y=y.substring(I.raw.length),E.push(I);continue}if(I=this.tokenizer.heading(y)){y=y.substring(I.raw.length),E.push(I);continue}if(I=this.tokenizer.hr(y)){y=y.substring(I.raw.length),E.push(I);continue}if(I=this.tokenizer.blockquote(y)){y=y.substring(I.raw.length),E.push(I);continue}if(I=this.tokenizer.list(y)){y=y.substring(I.raw.length),E.push(I);continue}if(I=this.tokenizer.html(y)){y=y.substring(I.raw.length),E.push(I);continue}if(I=this.tokenizer.def(y)){y=y.substring(I.raw.length),R=E[E.length-1],R&&(R.type==="paragraph"||R.type==="text")?(R.raw+=`
`+I.raw,R.text+=`
`+I.raw,this.inlineQueue[this.inlineQueue.length-1].src=R.text):this.tokens.links[I.tag]||(this.tokens.links[I.tag]={href:I.href,title:I.title});continue}if(I=this.tokenizer.table(y)){y=y.substring(I.raw.length),E.push(I);continue}if(I=this.tokenizer.lheading(y)){y=y.substring(I.raw.length),E.push(I);continue}if(M=y,this.options.extensions&&this.options.extensions.startBlock){let _=1/0;const te=y.slice(1);let ce;this.options.extensions.startBlock.forEach(Ie=>{ce=Ie.call({lexer:this},te),typeof ce=="number"&&ce>=0&&(_=Math.min(_,ce))}),_<1/0&&_>=0&&(M=y.substring(0,_+1))}if(this.state.top&&(I=this.tokenizer.paragraph(M))){R=E[E.length-1],S&&R?.type==="paragraph"?(R.raw+=`
`+I.raw,R.text+=`
`+I.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=R.text):E.push(I),S=M.length!==y.length,y=y.substring(I.raw.length);continue}if(I=this.tokenizer.text(y)){y=y.substring(I.raw.length),R=E[E.length-1],R&&R.type==="text"?(R.raw+=`
`+I.raw,R.text+=`
`+I.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=R.text):E.push(I);continue}if(y){const _="Infinite loop on byte: "+y.charCodeAt(0);if(this.options.silent){console.error(_);break}else throw new Error(_)}}return this.state.top=!0,E}inline(y,E=[]){return this.inlineQueue.push({src:y,tokens:E}),E}inlineTokens(y,E=[]){let S,I,R,M=y,_,te,ce;if(this.tokens.links){const Ie=Object.keys(this.tokens.links);if(Ie.length>0)for(;(_=this.tokenizer.rules.inline.reflinkSearch.exec(M))!=null;)Ie.includes(_[0].slice(_[0].lastIndexOf("[")+1,-1))&&(M=M.slice(0,_.index)+"["+"a".repeat(_[0].length-2)+"]"+M.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(_=this.tokenizer.rules.inline.blockSkip.exec(M))!=null;)M=M.slice(0,_.index)+"["+"a".repeat(_[0].length-2)+"]"+M.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(_=this.tokenizer.rules.inline.anyPunctuation.exec(M))!=null;)M=M.slice(0,_.index)+"++"+M.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;y;)if(te||(ce=""),te=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(Ie=>(S=Ie.call({lexer:this},y,E))?(y=y.substring(S.raw.length),E.push(S),!0):!1))){if(S=this.tokenizer.escape(y)){y=y.substring(S.raw.length),E.push(S);continue}if(S=this.tokenizer.tag(y)){y=y.substring(S.raw.length),I=E[E.length-1],I&&S.type==="text"&&I.type==="text"?(I.raw+=S.raw,I.text+=S.text):E.push(S);continue}if(S=this.tokenizer.link(y)){y=y.substring(S.raw.length),E.push(S);continue}if(S=this.tokenizer.reflink(y,this.tokens.links)){y=y.substring(S.raw.length),I=E[E.length-1],I&&S.type==="text"&&I.type==="text"?(I.raw+=S.raw,I.text+=S.text):E.push(S);continue}if(S=this.tokenizer.emStrong(y,M,ce)){y=y.substring(S.raw.length),E.push(S);continue}if(S=this.tokenizer.codespan(y)){y=y.substring(S.raw.length),E.push(S);continue}if(S=this.tokenizer.br(y)){y=y.substring(S.raw.length),E.push(S);continue}if(S=this.tokenizer.del(y)){y=y.substring(S.raw.length),E.push(S);continue}if(S=this.tokenizer.autolink(y)){y=y.substring(S.raw.length),E.push(S);continue}if(!this.state.inLink&&(S=this.tokenizer.url(y))){y=y.substring(S.raw.length),E.push(S);continue}if(R=y,this.options.extensions&&this.options.extensions.startInline){let Ie=1/0;const Ve=y.slice(1);let pt;this.options.extensions.startInline.forEach(Wt=>{pt=Wt.call({lexer:this},Ve),typeof pt=="number"&&pt>=0&&(Ie=Math.min(Ie,pt))}),Ie<1/0&&Ie>=0&&(R=y.substring(0,Ie+1))}if(S=this.tokenizer.inlineText(R)){y=y.substring(S.raw.length),S.raw.slice(-1)!=="_"&&(ce=S.raw.slice(-1)),te=!0,I=E[E.length-1],I&&I.type==="text"?(I.raw+=S.raw,I.text+=S.text):E.push(S);continue}if(y){const Ie="Infinite loop on byte: "+y.charCodeAt(0);if(this.options.silent){console.error(Ie);break}else throw new Error(Ie)}}return E}}class A{options;parser;constructor(y){this.options=y||t.defaults}space(y){return""}code({text:y,lang:E,escaped:S}){const I=(E||"").match(/^\S*/)?.[0],R=y.replace(/\n$/,"")+`
`;return I?'<pre><code class="language-'+u(I)+'">'+(S?R:u(R,!0))+`</code></pre>
`:"<pre><code>"+(S?R:u(R,!0))+`</code></pre>
`}blockquote({tokens:y}){return`<blockquote>
${this.parser.parse(y)}</blockquote>
`}html({text:y}){return y}heading({tokens:y,depth:E}){return`<h${E}>${this.parser.parseInline(y)}</h${E}>
`}hr(y){return`<hr>
`}list(y){const E=y.ordered,S=y.start;let I="";for(let _=0;_<y.items.length;_++){const te=y.items[_];I+=this.listitem(te)}const R=E?"ol":"ul",M=E&&S!==1?' start="'+S+'"':"";return"<"+R+M+`>
`+I+"</"+R+`>
`}listitem(y){let E="";if(y.task){const S=this.checkbox({checked:!!y.checked});y.loose?y.tokens.length>0&&y.tokens[0].type==="paragraph"?(y.tokens[0].text=S+" "+y.tokens[0].text,y.tokens[0].tokens&&y.tokens[0].tokens.length>0&&y.tokens[0].tokens[0].type==="text"&&(y.tokens[0].tokens[0].text=S+" "+y.tokens[0].tokens[0].text)):y.tokens.unshift({type:"text",raw:S+" ",text:S+" "}):E+=S+" "}return E+=this.parser.parse(y.tokens,!!y.loose),`<li>${E}</li>
`}checkbox({checked:y}){return"<input "+(y?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:y}){return`<p>${this.parser.parseInline(y)}</p>
`}table(y){let E="",S="";for(let R=0;R<y.header.length;R++)S+=this.tablecell(y.header[R]);E+=this.tablerow({text:S});let I="";for(let R=0;R<y.rows.length;R++){const M=y.rows[R];S="";for(let _=0;_<M.length;_++)S+=this.tablecell(M[_]);I+=this.tablerow({text:S})}return I&&(I=`<tbody>${I}</tbody>`),`<table>
<thead>
`+E+`</thead>
`+I+`</table>
`}tablerow({text:y}){return`<tr>
${y}</tr>
`}tablecell(y){const E=this.parser.parseInline(y.tokens),S=y.header?"th":"td";return(y.align?`<${S} align="${y.align}">`:`<${S}>`)+E+`</${S}>
`}strong({tokens:y}){return`<strong>${this.parser.parseInline(y)}</strong>`}em({tokens:y}){return`<em>${this.parser.parseInline(y)}</em>`}codespan({text:y}){return`<code>${y}</code>`}br(y){return"<br>"}del({tokens:y}){return`<del>${this.parser.parseInline(y)}</del>`}link({href:y,title:E,tokens:S}){const I=this.parser.parseInline(S),R=f(y);if(R===null)return I;y=R;let M='<a href="'+y+'"';return E&&(M+=' title="'+E+'"'),M+=">"+I+"</a>",M}image({href:y,title:E,text:S}){const I=f(y);if(I===null)return S;y=I;let R=`<img src="${y}" alt="${S}"`;return E&&(R+=` title="${E}"`),R+=">",R}text(y){return"tokens"in y&&y.tokens?this.parser.parseInline(y.tokens):y.text}}class O{strong({text:y}){return y}em({text:y}){return y}codespan({text:y}){return y}del({text:y}){return y}html({text:y}){return y}text({text:y}){return y}link({text:y}){return""+y}image({text:y}){return""+y}br(){return""}}class U{options;renderer;textRenderer;constructor(y){this.options=y||t.defaults,this.options.renderer=this.options.renderer||new A,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new O}static parse(y,E){return new U(E).parse(y)}static parseInline(y,E){return new U(E).parseInline(y)}parse(y,E=!0){let S="";for(let I=0;I<y.length;I++){const R=y[I];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[R.type]){const _=R,te=this.options.extensions.renderers[_.type].call({parser:this},_);if(te!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(_.type)){S+=te||"";continue}}const M=R;switch(M.type){case"space":{S+=this.renderer.space(M);continue}case"hr":{S+=this.renderer.hr(M);continue}case"heading":{S+=this.renderer.heading(M);continue}case"code":{S+=this.renderer.code(M);continue}case"table":{S+=this.renderer.table(M);continue}case"blockquote":{S+=this.renderer.blockquote(M);continue}case"list":{S+=this.renderer.list(M);continue}case"html":{S+=this.renderer.html(M);continue}case"paragraph":{S+=this.renderer.paragraph(M);continue}case"text":{let _=M,te=this.renderer.text(_);for(;I+1<y.length&&y[I+1].type==="text";)_=y[++I],te+=`
`+this.renderer.text(_);E?S+=this.renderer.paragraph({type:"paragraph",raw:te,text:te,tokens:[{type:"text",raw:te,text:te}]}):S+=te;continue}default:{const _='Token with "'+M.type+'" type was not found.';if(this.options.silent)return console.error(_),"";throw new Error(_)}}}return S}parseInline(y,E){E=E||this.renderer;let S="";for(let I=0;I<y.length;I++){const R=y[I];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[R.type]){const _=this.options.extensions.renderers[R.type].call({parser:this},R);if(_!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(R.type)){S+=_||"";continue}}const M=R;switch(M.type){case"escape":{S+=E.text(M);break}case"html":{S+=E.html(M);break}case"link":{S+=E.link(M);break}case"image":{S+=E.image(M);break}case"strong":{S+=E.strong(M);break}case"em":{S+=E.em(M);break}case"codespan":{S+=E.codespan(M);break}case"br":{S+=E.br(M);break}case"del":{S+=E.del(M);break}case"text":{S+=E.text(M);break}default:{const _='Token with "'+M.type+'" type was not found.';if(this.options.silent)return console.error(_),"";throw new Error(_)}}}return S}}class ue{options;constructor(y){this.options=y||t.defaults}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(y){return y}postprocess(y){return y}processAllTokens(y){return y}}class $e{defaults=r();options=this.setOptions;parse=this.parseMarkdown(Xt.lex,U.parse);parseInline=this.parseMarkdown(Xt.lexInline,U.parseInline);Parser=U;Renderer=A;TextRenderer=O;Lexer=Xt;Tokenizer=F;Hooks=ue;constructor(...y){this.use(...y)}walkTokens(y,E){let S=[];for(const I of y)switch(S=S.concat(E.call(this,I)),I.type){case"table":{const R=I;for(const M of R.header)S=S.concat(this.walkTokens(M.tokens,E));for(const M of R.rows)for(const _ of M)S=S.concat(this.walkTokens(_.tokens,E));break}case"list":{const R=I;S=S.concat(this.walkTokens(R.items,E));break}default:{const R=I;this.defaults.extensions?.childTokens?.[R.type]?this.defaults.extensions.childTokens[R.type].forEach(M=>{const _=R[M].flat(1/0);S=S.concat(this.walkTokens(_,E))}):R.tokens&&(S=S.concat(this.walkTokens(R.tokens,E)))}}return S}use(...y){const E=this.defaults.extensions||{renderers:{},childTokens:{}};return y.forEach(S=>{const I={...S};if(I.async=this.defaults.async||I.async||!1,S.extensions&&(S.extensions.forEach(R=>{if(!R.name)throw new Error("extension name required");if("renderer"in R){const M=E.renderers[R.name];M?E.renderers[R.name]=function(..._){let te=R.renderer.apply(this,_);return te===!1&&(te=M.apply(this,_)),te}:E.renderers[R.name]=R.renderer}if("tokenizer"in R){if(!R.level||R.level!=="block"&&R.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const M=E[R.level];M?M.unshift(R.tokenizer):E[R.level]=[R.tokenizer],R.start&&(R.level==="block"?E.startBlock?E.startBlock.push(R.start):E.startBlock=[R.start]:R.level==="inline"&&(E.startInline?E.startInline.push(R.start):E.startInline=[R.start]))}"childTokens"in R&&R.childTokens&&(E.childTokens[R.name]=R.childTokens)}),I.extensions=E),S.renderer){const R=this.defaults.renderer||new A(this.defaults);for(const M in S.renderer){if(!(M in R))throw new Error(`renderer '${M}' does not exist`);if(["options","parser"].includes(M))continue;const _=M,te=S.renderer[_],ce=R[_];R[_]=(...Ie)=>{let Ve=te.apply(R,Ie);return Ve===!1&&(Ve=ce.apply(R,Ie)),Ve||""}}I.renderer=R}if(S.tokenizer){const R=this.defaults.tokenizer||new F(this.defaults);for(const M in S.tokenizer){if(!(M in R))throw new Error(`tokenizer '${M}' does not exist`);if(["options","rules","lexer"].includes(M))continue;const _=M,te=S.tokenizer[_],ce=R[_];R[_]=(...Ie)=>{let Ve=te.apply(R,Ie);return Ve===!1&&(Ve=ce.apply(R,Ie)),Ve}}I.tokenizer=R}if(S.hooks){const R=this.defaults.hooks||new ue;for(const M in S.hooks){if(!(M in R))throw new Error(`hook '${M}' does not exist`);if(M==="options")continue;const _=M,te=S.hooks[_],ce=R[_];ue.passThroughHooks.has(M)?R[_]=Ie=>{if(this.defaults.async)return Promise.resolve(te.call(R,Ie)).then(pt=>ce.call(R,pt));const Ve=te.call(R,Ie);return ce.call(R,Ve)}:R[_]=(...Ie)=>{let Ve=te.apply(R,Ie);return Ve===!1&&(Ve=ce.apply(R,Ie)),Ve}}I.hooks=R}if(S.walkTokens){const R=this.defaults.walkTokens,M=S.walkTokens;I.walkTokens=function(_){let te=[];return te.push(M.call(this,_)),R&&(te=te.concat(R.call(this,_))),te}}this.defaults={...this.defaults,...I}}),this}setOptions(y){return this.defaults={...this.defaults,...y},this}lexer(y,E){return Xt.lex(y,E??this.defaults)}parser(y,E){return U.parse(y,E??this.defaults)}parseMarkdown(y,E){return(I,R)=>{const M={...R},_={...this.defaults,...M},te=this.onError(!!_.silent,!!_.async);if(this.defaults.async===!0&&M.async===!1)return te(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof I>"u"||I===null)return te(new Error("marked(): input parameter is undefined or null"));if(typeof I!="string")return te(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(I)+", string expected"));if(_.hooks&&(_.hooks.options=_),_.async)return Promise.resolve(_.hooks?_.hooks.preprocess(I):I).then(ce=>y(ce,_)).then(ce=>_.hooks?_.hooks.processAllTokens(ce):ce).then(ce=>_.walkTokens?Promise.all(this.walkTokens(ce,_.walkTokens)).then(()=>ce):ce).then(ce=>E(ce,_)).then(ce=>_.hooks?_.hooks.postprocess(ce):ce).catch(te);try{_.hooks&&(I=_.hooks.preprocess(I));let ce=y(I,_);_.hooks&&(ce=_.hooks.processAllTokens(ce)),_.walkTokens&&this.walkTokens(ce,_.walkTokens);let Ie=E(ce,_);return _.hooks&&(Ie=_.hooks.postprocess(Ie)),Ie}catch(ce){return te(ce)}}}onError(y,E){return S=>{if(S.message+=`
Please report this to https://github.com/markedjs/marked.`,y){const I="<p>An error occurred:</p><pre>"+u(S.message+"",!0)+"</pre>";return E?Promise.resolve(I):I}if(E)return Promise.reject(S);throw S}}}const ft=new $e;function he(N,y){return ft.parse(N,y)}he.options=he.setOptions=function(N){return ft.setOptions(N),he.defaults=ft.defaults,i(he.defaults),he},he.getDefaults=r,he.defaults=t.defaults,he.use=function(...N){return ft.use(...N),he.defaults=ft.defaults,i(he.defaults),he},he.walkTokens=function(N,y){return ft.walkTokens(N,y)},he.parseInline=ft.parseInline,he.Parser=U,he.parser=U.parse,he.Renderer=A,he.TextRenderer=O,he.Lexer=Xt,he.lexer=Xt.lex,he.Tokenizer=F,he.Hooks=ue,he.parse=he;const ur=he.options,Ct=he.setOptions,Zt=he.use,wr=he.walkTokens,Et=he.parseInline,P=he,Pt=U.parse,gr=Xt.lex;t.Hooks=ue,t.Lexer=Xt,t.Marked=$e,t.Parser=U,t.Renderer=A,t.TextRenderer=O,t.Tokenizer=F,t.getDefaults=r,t.lexer=gr,t.marked=he,t.options=ur,t.parse=P,t.parseInline=Et,t.parser=Pt,t.setOptions=Ct,t.use=Zt,t.walkTokens=wr})})();var m_=ar.Hooks||exports.Hooks,v_=ar.Lexer||exports.Lexer,w_=ar.Marked||exports.Marked,b_=ar.Parser||exports.Parser,y_=ar.Renderer||exports.Renderer,k_=ar.TextRenderer||exports.TextRenderer,x_=ar.Tokenizer||exports.Tokenizer,E_=ar.defaults||exports.defaults,S_=ar.getDefaults||exports.getDefaults,$_=ar.lexer||exports.lexer,Y6=ar.marked||exports.marked,C_=ar.options||exports.options,P_=ar.parse||exports.parse,I_=ar.parseInline||exports.parseInline,D_=ar.parser||exports.parser,A_=ar.setOptions||exports.setOptions,T_=ar.use||exports.use,R_=ar.walkTokens||exports.walkTokens,Ns=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"}),fT=/^(.+)\/(.+?)(;.+)?$/;function X6(e,t){const r=fT.exec(e);return r?`${r[1].toLowerCase()}/${r[2].toLowerCase()}${r[3]??""}`:t?void 0:e}var Cr=Symbol("unset"),pT=class{constructor(){this.a=new o1,this.b=0}get size(){return this.b}get nodes(){return this.a.children?.values()||ci.empty()}get entries(){return this.a.children?.entries()||ci.empty()}insert(e,t,r){this.d(e,i=>i._value=t,r)}mutate(e,t){this.d(e,r=>r._value=t(r._value===Cr?void 0:r._value))}mutatePath(e,t){this.d(e,()=>{},r=>t(r))}delete(e){const t=this.c(e);if(!t)return;let r=t.length-1;const i=t[r].node._value;if(i!==Cr){for(this.b--,t[r].node._value=Cr;r>0;r--){const{node:s,part:n}=t[r];if(s.children?.size||s._value!==Cr)break;t[r-1].node.children.delete(n)}return i}}*deleteRecursive(e){const t=this.c(e);if(!t)return;const r=t[t.length-1].node;for(let i=t.length-1;i>0;i--){const s=t[i-1];if(s.node.children.delete(t[i].part),s.node.children.size>0||s.node._value!==Cr)break}for(const i of Z6(r))i._value!==Cr&&(this.b--,yield i._value)}find(e){let t=this.a;for(const r of e){const i=t.children?.get(r);if(!i)return;t=i}return t._value===Cr?void 0:t._value}hasKeyOrParent(e){let t=this.a;for(const r of e){const i=t.children?.get(r);if(!i)return!1;if(i._value!==Cr)return!0;t=i}return!1}hasKeyOrChildren(e){let t=this.a;for(const r of e){const i=t.children?.get(r);if(!i)return!1;t=i}return!0}hasKey(e){let t=this.a;for(const r of e){const i=t.children?.get(r);if(!i)return!1;t=i}return t._value!==Cr}c(e){const t=[{part:"",node:this.a}];let r=0;for(const i of e){const s=t[r].node.children?.get(i);if(!s)return;t.push({part:i,node:s}),r++}return t}d(e,t,r){let i=this.a;for(const o of e){if(i.children)if(i.children.has(o))i=i.children.get(o);else{const a=new o1;i.children.set(o,a),i=a}else{const a=new o1;i.children=new Map([[o,a]]),i=a}r?.(i)}const s=i._value===Cr?0:1;t(i);const n=i._value===Cr?0:1;this.b+=n-s}*values(){for(const{_value:e}of Z6(this.a))e!==Cr&&(yield e)}};function*Z6(e){const t=[e];for(;t.length>0;){const r=t.pop();if(yield r,r.children)for(const i of r.children.values())t.push(i)}}var o1=class{constructor(){this._value=Cr}get value(){return this._value===Cr?void 0:this._value}set value(e){this._value=e===void 0?Cr:e}},ri=class Wo{constructor(t,r){this.lineNumber=t,this.column=r}with(t=this.lineNumber,r=this.column){return t===this.lineNumber&&r===this.column?this:new Wo(t,r)}delta(t=0,r=0){return this.with(this.lineNumber+t,this.column+r)}equals(t){return Wo.equals(this,t)}static equals(t,r){return!t&&!r?!0:!!t&&!!r&&t.lineNumber===r.lineNumber&&t.column===r.column}isBefore(t){return Wo.isBefore(this,t)}static isBefore(t,r){return t.lineNumber<r.lineNumber?!0:r.lineNumber<t.lineNumber?!1:t.column<r.column}isBeforeOrEqual(t){return Wo.isBeforeOrEqual(this,t)}static isBeforeOrEqual(t,r){return t.lineNumber<r.lineNumber?!0:r.lineNumber<t.lineNumber?!1:t.column<=r.column}static compare(t,r){const i=t.lineNumber|0,s=r.lineNumber|0;if(i===s){const n=t.column|0,o=r.column|0;return n-o}return i-s}clone(){return new Wo(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(t){return new Wo(t.lineNumber,t.column)}static isIPosition(t){return t&&typeof t.lineNumber=="number"&&typeof t.column=="number"}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}},nt=class Qt{constructor(t,r,i,s){t>i||t===i&&r>s?(this.startLineNumber=i,this.startColumn=s,this.endLineNumber=t,this.endColumn=r):(this.startLineNumber=t,this.startColumn=r,this.endLineNumber=i,this.endColumn=s)}isEmpty(){return Qt.isEmpty(this)}static isEmpty(t){return t.startLineNumber===t.endLineNumber&&t.startColumn===t.endColumn}containsPosition(t){return Qt.containsPosition(this,t)}static containsPosition(t,r){return!(r.lineNumber<t.startLineNumber||r.lineNumber>t.endLineNumber||r.lineNumber===t.startLineNumber&&r.column<t.startColumn||r.lineNumber===t.endLineNumber&&r.column>t.endColumn)}static strictContainsPosition(t,r){return!(r.lineNumber<t.startLineNumber||r.lineNumber>t.endLineNumber||r.lineNumber===t.startLineNumber&&r.column<=t.startColumn||r.lineNumber===t.endLineNumber&&r.column>=t.endColumn)}containsRange(t){return Qt.containsRange(this,t)}static containsRange(t,r){return!(r.startLineNumber<t.startLineNumber||r.endLineNumber<t.startLineNumber||r.startLineNumber>t.endLineNumber||r.endLineNumber>t.endLineNumber||r.startLineNumber===t.startLineNumber&&r.startColumn<t.startColumn||r.endLineNumber===t.endLineNumber&&r.endColumn>t.endColumn)}strictContainsRange(t){return Qt.strictContainsRange(this,t)}static strictContainsRange(t,r){return!(r.startLineNumber<t.startLineNumber||r.endLineNumber<t.startLineNumber||r.startLineNumber>t.endLineNumber||r.endLineNumber>t.endLineNumber||r.startLineNumber===t.startLineNumber&&r.startColumn<=t.startColumn||r.endLineNumber===t.endLineNumber&&r.endColumn>=t.endColumn)}plusRange(t){return Qt.plusRange(this,t)}static plusRange(t,r){let i,s,n,o;return r.startLineNumber<t.startLineNumber?(i=r.startLineNumber,s=r.startColumn):r.startLineNumber===t.startLineNumber?(i=r.startLineNumber,s=Math.min(r.startColumn,t.startColumn)):(i=t.startLineNumber,s=t.startColumn),r.endLineNumber>t.endLineNumber?(n=r.endLineNumber,o=r.endColumn):r.endLineNumber===t.endLineNumber?(n=r.endLineNumber,o=Math.max(r.endColumn,t.endColumn)):(n=t.endLineNumber,o=t.endColumn),new Qt(i,s,n,o)}intersectRanges(t){return Qt.intersectRanges(this,t)}static intersectRanges(t,r){let i=t.startLineNumber,s=t.startColumn,n=t.endLineNumber,o=t.endColumn;const a=r.startLineNumber,c=r.startColumn,l=r.endLineNumber,u=r.endColumn;return i<a?(i=a,s=c):i===a&&(s=Math.max(s,c)),n>l?(n=l,o=u):n===l&&(o=Math.min(o,u)),i>n||i===n&&s>o?null:new Qt(i,s,n,o)}equalsRange(t){return Qt.equalsRange(this,t)}static equalsRange(t,r){return!t&&!r?!0:!!t&&!!r&&t.startLineNumber===r.startLineNumber&&t.startColumn===r.startColumn&&t.endLineNumber===r.endLineNumber&&t.endColumn===r.endColumn}getEndPosition(){return Qt.getEndPosition(this)}static getEndPosition(t){return new ri(t.endLineNumber,t.endColumn)}getStartPosition(){return Qt.getStartPosition(this)}static getStartPosition(t){return new ri(t.startLineNumber,t.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(t,r){return new Qt(this.startLineNumber,this.startColumn,t,r)}setStartPosition(t,r){return new Qt(t,r,this.endLineNumber,this.endColumn)}collapseToStart(){return Qt.collapseToStart(this)}static collapseToStart(t){return new Qt(t.startLineNumber,t.startColumn,t.startLineNumber,t.startColumn)}collapseToEnd(){return Qt.collapseToEnd(this)}static collapseToEnd(t){return new Qt(t.endLineNumber,t.endColumn,t.endLineNumber,t.endColumn)}delta(t){return new Qt(this.startLineNumber+t,this.startColumn,this.endLineNumber+t,this.endColumn)}static fromPositions(t,r=t){return new Qt(t.lineNumber,t.column,r.lineNumber,r.column)}static lift(t){return t?new Qt(t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn):null}static isIRange(t){return t&&typeof t.startLineNumber=="number"&&typeof t.startColumn=="number"&&typeof t.endLineNumber=="number"&&typeof t.endColumn=="number"}static areIntersectingOrTouching(t,r){return!(t.endLineNumber<r.startLineNumber||t.endLineNumber===r.startLineNumber&&t.endColumn<r.startColumn||r.endLineNumber<t.startLineNumber||r.endLineNumber===t.startLineNumber&&r.endColumn<t.startColumn)}static areIntersecting(t,r){return!(t.endLineNumber<r.startLineNumber||t.endLineNumber===r.startLineNumber&&t.endColumn<=r.startColumn||r.endLineNumber<t.startLineNumber||r.endLineNumber===t.startLineNumber&&r.endColumn<=t.startColumn)}static compareRangesUsingStarts(t,r){if(t&&r){const n=t.startLineNumber|0,o=r.startLineNumber|0;if(n===o){const a=t.startColumn|0,c=r.startColumn|0;if(a===c){const l=t.endLineNumber|0,u=r.endLineNumber|0;if(l===u){const h=t.endColumn|0,d=r.endColumn|0;return h-d}return l-u}return a-c}return n-o}return(t?1:0)-(r?1:0)}static compareRangesUsingEnds(t,r){return t.endLineNumber===r.endLineNumber?t.endColumn===r.endColumn?t.startLineNumber===r.startLineNumber?t.startColumn-r.startColumn:t.startLineNumber-r.startLineNumber:t.endColumn-r.endColumn:t.endLineNumber-r.endLineNumber}static spansMultipleLines(t){return t.endLineNumber>t.startLineNumber}toJSON(){return this}},K6=class{constructor(){this.a=new Map,this.b=new Map,this.c=new T,this.onDidChange=this.c.event,this.d=null}handleChange(e){this.c.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this.a.set(e,t),this.handleChange([e]),me(()=>{this.a.get(e)===t&&(this.a.delete(e),this.handleChange([e]))})}get(e){return this.a.get(e)||null}registerFactory(e,t){this.b.get(e)?.dispose();const r=new gT(this,e,t);return this.b.set(e,r),me(()=>{const i=this.b.get(e);!i||i!==r||(this.b.delete(e),i.dispose())})}async getOrCreate(e){const t=this.get(e);if(t)return t;const r=this.b.get(e);return!r||r.isResolved?null:(await r.resolve(),this.get(e))}isResolved(e){if(this.get(e))return!0;const r=this.b.get(e);return!!(!r||r.isResolved)}setColorMap(e){this.d=e,this.c.fire({changedLanguages:Array.from(this.a.keys()),changedColorMap:!0})}getColorMap(){return this.d}getDefaultBackground(){return this.d&&this.d.length>2?this.d[2]:null}},gT=class extends ae{get isResolved(){return this.c}constructor(e,t,r){super(),this.f=e,this.g=t,this.h=r,this.a=!1,this.b=null,this.c=!1}dispose(){this.a=!0,super.dispose()}async resolve(){return this.b||(this.b=this.j()),this.b}async j(){const e=await this.h.tokenizationSupport;this.c=!0,e&&!this.a&&this.B(this.f.register(this.g,e))}},ek;(function(e){e[e.Increase=0]="Increase",e[e.Decrease=1]="Decrease"})(ek||(ek={}));var tk;(function(e){e[e.Method=0]="Method",e[e.Function=1]="Function",e[e.Constructor=2]="Constructor",e[e.Field=3]="Field",e[e.Variable=4]="Variable",e[e.Class=5]="Class",e[e.Struct=6]="Struct",e[e.Interface=7]="Interface",e[e.Module=8]="Module",e[e.Property=9]="Property",e[e.Event=10]="Event",e[e.Operator=11]="Operator",e[e.Unit=12]="Unit",e[e.Value=13]="Value",e[e.Constant=14]="Constant",e[e.Enum=15]="Enum",e[e.EnumMember=16]="EnumMember",e[e.Keyword=17]="Keyword",e[e.Text=18]="Text",e[e.Color=19]="Color",e[e.File=20]="File",e[e.Reference=21]="Reference",e[e.Customcolor=22]="Customcolor",e[e.Folder=23]="Folder",e[e.TypeParameter=24]="TypeParameter",e[e.User=25]="User",e[e.Issue=26]="Issue",e[e.Snippet=27]="Snippet"})(tk||(tk={}));var rk;(function(e){const t=new Map;t.set(0,ve.symbolMethod),t.set(1,ve.symbolFunction),t.set(2,ve.symbolConstructor),t.set(3,ve.symbolField),t.set(4,ve.symbolVariable),t.set(5,ve.symbolClass),t.set(6,ve.symbolStruct),t.set(7,ve.symbolInterface),t.set(8,ve.symbolModule),t.set(9,ve.symbolProperty),t.set(10,ve.symbolEvent),t.set(11,ve.symbolOperator),t.set(12,ve.symbolUnit),t.set(13,ve.symbolValue),t.set(15,ve.symbolEnum),t.set(14,ve.symbolConstant),t.set(15,ve.symbolEnum),t.set(16,ve.symbolEnumMember),t.set(17,ve.symbolKeyword),t.set(27,ve.symbolSnippet),t.set(18,ve.symbolText),t.set(19,ve.symbolColor),t.set(20,ve.symbolFile),t.set(21,ve.symbolReference),t.set(22,ve.symbolCustomColor),t.set(23,ve.symbolFolder),t.set(24,ve.symbolTypeParameter),t.set(25,ve.account),t.set(26,ve.issues);function r(n){let o=t.get(n);return o||(console.info("No codicon found for CompletionItemKind "+n),o=ve.symbolProperty),o}e.toIcon=r;const i=new Map;i.set("method",0),i.set("function",1),i.set("constructor",2),i.set("field",3),i.set("variable",4),i.set("class",5),i.set("struct",6),i.set("interface",7),i.set("module",8),i.set("property",9),i.set("event",10),i.set("operator",11),i.set("unit",12),i.set("value",13),i.set("constant",14),i.set("enum",15),i.set("enum-member",16),i.set("enumMember",16),i.set("keyword",17),i.set("snippet",27),i.set("text",18),i.set("color",19),i.set("file",20),i.set("reference",21),i.set("customcolor",22),i.set("folder",23),i.set("type-parameter",24),i.set("typeParameter",24),i.set("account",25),i.set("issue",26);function s(n,o){let a=i.get(n);return typeof a>"u"&&!o&&(a=9),a}e.fromString=s})(rk||(rk={}));var ik;(function(e){e[e.Deprecated=1]="Deprecated"})(ik||(ik={}));var sk;(function(e){e[e.None=0]="None",e[e.KeepWhitespace=1]="KeepWhitespace",e[e.InsertAsSnippet=4]="InsertAsSnippet"})(sk||(sk={}));var nk;(function(e){e[e.Word=0]="Word",e[e.Line=1]="Line",e[e.Suggest=2]="Suggest"})(nk||(nk={}));var ok;(function(e){e[e.Invoke=0]="Invoke",e[e.TriggerCharacter=1]="TriggerCharacter",e[e.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(ok||(ok={}));var ed;(function(e){e[e.Automatic=0]="Automatic",e[e.Explicit=1]="Explicit"})(ed||(ed={}));var ak;(function(e){e[e.Invoke=1]="Invoke",e[e.Auto=2]="Auto"})(ak||(ak={}));var ck;(function(e){e[e.Automatic=0]="Automatic",e[e.PasteAs=1]="PasteAs"})(ck||(ck={}));var lk;(function(e){e[e.Invoke=1]="Invoke",e[e.TriggerCharacter=2]="TriggerCharacter",e[e.ContentChange=3]="ContentChange"})(lk||(lk={}));var uk;(function(e){e[e.Text=0]="Text",e[e.Read=1]="Read",e[e.Write=2]="Write"})(uk||(uk={}));function mT(e){return e&&k.isUri(e.uri)&&nt.isIRange(e.range)&&(nt.isIRange(e.originSelectionRange)||nt.isIRange(e.targetSelectionRange))}var hk;(function(e){e[e.File=0]="File",e[e.Module=1]="Module",e[e.Namespace=2]="Namespace",e[e.Package=3]="Package",e[e.Class=4]="Class",e[e.Method=5]="Method",e[e.Property=6]="Property",e[e.Field=7]="Field",e[e.Constructor=8]="Constructor",e[e.Enum=9]="Enum",e[e.Interface=10]="Interface",e[e.Function=11]="Function",e[e.Variable=12]="Variable",e[e.Constant=13]="Constant",e[e.String=14]="String",e[e.Number=15]="Number",e[e.Boolean=16]="Boolean",e[e.Array=17]="Array",e[e.Object=18]="Object",e[e.Key=19]="Key",e[e.Null=20]="Null",e[e.EnumMember=21]="EnumMember",e[e.Struct=22]="Struct",e[e.Event=23]="Event",e[e.Operator=24]="Operator",e[e.TypeParameter=25]="TypeParameter"})(hk||(hk={}));var L_={17:p(795,null),16:p(796,null),4:p(797,null),13:p(798,null),8:p(799,null),9:p(800,null),21:p(801,null),23:p(802,null),7:p(803,null),0:p(804,null),11:p(805,null),10:p(806,null),19:p(807,null),5:p(808,null),1:p(809,null),2:p(810,null),20:p(811,null),15:p(812,null),18:p(813,null),24:p(814,null),3:p(815,null),6:p(816,null),14:p(817,null),22:p(818,null),25:p(819,null),12:p(820,null)},dk;(function(e){e[e.Deprecated=1]="Deprecated"})(dk||(dk={}));var fk;(function(e){const t=new Map;t.set(0,ve.symbolFile),t.set(1,ve.symbolModule),t.set(2,ve.symbolNamespace),t.set(3,ve.symbolPackage),t.set(4,ve.symbolClass),t.set(5,ve.symbolMethod),t.set(6,ve.symbolProperty),t.set(7,ve.symbolField),t.set(8,ve.symbolConstructor),t.set(9,ve.symbolEnum),t.set(10,ve.symbolInterface),t.set(11,ve.symbolFunction),t.set(12,ve.symbolVariable),t.set(13,ve.symbolConstant),t.set(14,ve.symbolString),t.set(15,ve.symbolNumber),t.set(16,ve.symbolBoolean),t.set(17,ve.symbolArray),t.set(18,ve.symbolObject),t.set(19,ve.symbolKey),t.set(20,ve.symbolNull),t.set(21,ve.symbolEnumMember),t.set(22,ve.symbolStruct),t.set(23,ve.symbolEvent),t.set(24,ve.symbolOperator),t.set(25,ve.symbolTypeParameter);function r(i){let s=t.get(i);return s||(console.info("No codicon found for SymbolKind "+i),s=ve.symbolProperty),s}e.toIcon=r})(fk||(fk={}));var da=class Wn{static{this.Comment=new Wn("comment")}static{this.Imports=new Wn("imports")}static{this.Region=new Wn("region")}static fromValue(t){switch(t){case"comment":return Wn.Comment;case"imports":return Wn.Imports;case"region":return Wn.Region}return new Wn(t)}constructor(t){this.value=t}},pk;(function(e){e[e.AIGenerated=1]="AIGenerated"})(pk||(pk={}));var td;(function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"})(td||(td={}));var a1;(function(e){function t(r){return!r||typeof r!="object"?!1:typeof r.id=="string"&&typeof r.title=="string"}e.is=t})(a1||(a1={}));var fa;(function(e){e[e.Collapsed=0]="Collapsed",e[e.Expanded=1]="Expanded"})(fa||(fa={}));var il;(function(e){e[e.Unresolved=0]="Unresolved",e[e.Resolved=1]="Resolved"})(il||(il={}));var sl;(function(e){e[e.Current=0]="Current",e[e.Outdated=1]="Outdated"})(sl||(sl={}));var gk;(function(e){e[e.Editing=0]="Editing",e[e.Preview=1]="Preview"})(gk||(gk={}));var mk;(function(e){e[e.Published=0]="Published",e[e.Draft=1]="Draft"})(mk||(mk={}));var vk;(function(e){e[e.Type=1]="Type",e[e.Parameter=2]="Parameter"})(vk||(vk={}));var N_=new K6,F_=new K6,wk;(function(e){e[e.None=0]="None",e[e.Option=1]="Option",e[e.Default=2]="Default",e[e.Preferred=3]="Preferred"})(wk||(wk={}));var rd;(function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"})(rd||(rd={}));var bk;(function(e){e[e.Unnecessary=1]="Unnecessary",e[e.Deprecated=2]="Deprecated"})(bk||(bk={}));var Pr;(function(e){e[e.Hint=1]="Hint",e[e.Info=2]="Info",e[e.Warning=4]="Warning",e[e.Error=8]="Error"})(Pr||(Pr={})),function(e){function t(o,a){return a-o}e.compare=t;const r=Object.create(null);r[e.Error]=p(1981,null),r[e.Warning]=p(1982,null),r[e.Info]=p(1983,null);function i(o){return r[o]||""}e.toString=i;function s(o){switch(o){case Ut.Error:return e.Error;case Ut.Warning:return e.Warning;case Ut.Info:return e.Info;case Ut.Ignore:return e.Hint}}e.fromSeverity=s;function n(o){switch(o){case e.Error:return Ut.Error;case e.Warning:return Ut.Warning;case e.Info:return Ut.Info;case e.Hint:return Ut.Ignore}}e.toSeverity=n}(Pr||(Pr={}));var yk;(function(e){const t="";function r(s){return i(s,!0)}e.makeKey=r;function i(s,n){const o=[t];return s.source?o.push(s.source.replace("\xA6","\\\xA6")):o.push(t),s.code?typeof s.code=="string"?o.push(s.code.replace("\xA6","\\\xA6")):o.push(s.code.value.replace("\xA6","\\\xA6")):o.push(t),s.severity!==void 0&&s.severity!==null?o.push(Pr.toString(s.severity)):o.push(t),s.message&&n?o.push(s.message.replace("\xA6","\\\xA6")):o.push(t),s.startLineNumber!==void 0&&s.startLineNumber!==null?o.push(s.startLineNumber.toString()):o.push(t),s.startColumn!==void 0&&s.startColumn!==null?o.push(s.startColumn.toString()):o.push(t),s.endLineNumber!==void 0&&s.endLineNumber!==null?o.push(s.endLineNumber.toString()):o.push(t),s.endColumn!==void 0&&s.endColumn!==null?o.push(s.endColumn.toString()):o.push(t),o.push(t),o.join("\xA6")}e.makeKeyOptionalMessage=i})(yk||(yk={}));var O_=X("markerService");function qr(e,t){if(!e)throw new Error(t?`Assertion failed (${t})`:"Assertion Failed")}function vT(e,t="Unreachable"){throw new Error(t)}function kk(e){if(!e()){debugger;e(),It(new by("Assertion Failed"))}}var wT=class{constructor(){this.a=new Map}add(e,t){qr(Me(e)),qr(Dt(t)),qr(!this.a.has(e),"There is already an extension with this id"),this.a.set(e,t)}knows(e){return this.a.has(e)}as(e){return this.a.get(e)||null}},fr=new wT,bT=X("fileService");function nl(e){return e.create===!0}var Gr;(function(e){e[e.Unknown=0]="Unknown",e[e.File=1]="File",e[e.Directory=2]="Directory",e[e.SymbolicLink=64]="SymbolicLink"})(Gr||(Gr={}));var kn;(function(e){e[e.Readonly=1]="Readonly",e[e.Locked=2]="Locked"})(kn||(kn={}));var xk;(function(e){e[e.UPDATED=2]="UPDATED",e[e.ADDED=4]="ADDED",e[e.DELETED=8]="DELETED"})(xk||(xk={}));var Ek;(function(e){e[e.None=0]="None",e[e.FileReadWrite=2]="FileReadWrite",e[e.FileOpenReadWriteClose=4]="FileOpenReadWriteClose",e[e.FileReadStream=16]="FileReadStream",e[e.FileFolderCopy=8]="FileFolderCopy",e[e.PathCaseSensitive=1024]="PathCaseSensitive",e[e.Readonly=2048]="Readonly",e[e.Trash=4096]="Trash",e[e.FileWriteUnlock=8192]="FileWriteUnlock",e[e.FileAtomicRead=16384]="FileAtomicRead",e[e.FileAtomicWrite=32768]="FileAtomicWrite",e[e.FileAtomicDelete=65536]="FileAtomicDelete",e[e.FileClone=131072]="FileClone"})(Ek||(Ek={}));var ge;(function(e){e.FileExists="EntryExists",e.FileNotFound="EntryNotFound",e.FileNotADirectory="EntryNotADirectory",e.FileIsADirectory="EntryIsADirectory",e.FileExceedsStorageQuota="EntryExceedsStorageQuota",e.FileTooLarge="EntryTooLarge",e.FileWriteLocked="EntryWriteLocked",e.NoPermissions="NoPermissions",e.Unavailable="Unavailable",e.Unknown="Unknown"})(ge||(ge={}));var id=class $3 extends Error{static create(t,r){const i=new $3(t.toString(),r);return Sk(i,r),i}constructor(t,r){super(t),this.code=r}};function Fs(e,t){return id.create(e,t)}function yT(e){return e||Fs(p(1881,null),ge.Unknown)}function Sk(e,t){return e.name=t?`${t} (FileSystemError)`:"FileSystemError",e}function sd(e){if(!e)return ge.Unknown;if(e instanceof id)return e.code;const t=/^(.+) \(FileSystemError\)$/.exec(e.name);if(!t)return ge.Unknown;switch(t[1]){case ge.FileExists:return ge.FileExists;case ge.FileIsADirectory:return ge.FileIsADirectory;case ge.FileNotADirectory:return ge.FileNotADirectory;case ge.FileNotFound:return ge.FileNotFound;case ge.FileTooLarge:return ge.FileTooLarge;case ge.FileWriteLocked:return ge.FileWriteLocked;case ge.NoPermissions:return ge.NoPermissions;case ge.Unavailable:return ge.Unavailable}return ge.Unknown}function kT(e){if(e instanceof c1)return e.fileOperationResult;switch(sd(e)){case ge.FileNotFound:return 1;case ge.FileIsADirectory:return 0;case ge.FileNotADirectory:return 9;case ge.FileWriteLocked:return 5;case ge.NoPermissions:return 6;case ge.FileExists:return 4;case ge.FileTooLarge:return 7;default:return 10}}var $k;(function(e){e[e.CREATE=0]="CREATE",e[e.DELETE=1]="DELETE",e[e.MOVE=2]="MOVE",e[e.COPY=3]="COPY",e[e.WRITE=4]="WRITE"})($k||($k={}));var Ck;(function(e){e[e.UPDATED=0]="UPDATED",e[e.ADDED=1]="ADDED",e[e.DELETED=2]="DELETED"})(Ck||(Ck={}));var M_=class Tg{static{this.a=null}constructor(t,r){this.c=r,this.b=void 0,this.d=new _r(()=>{const i=Ls.forUris(()=>this.c);return i.fill(this.rawAdded.map(s=>[s,!0])),i}),this.f=new _r(()=>{const i=Ls.forUris(()=>this.c);return i.fill(this.rawUpdated.map(s=>[s,!0])),i}),this.g=new _r(()=>{const i=Ls.forUris(()=>this.c);return i.fill(this.rawDeleted.map(s=>[s,!0])),i}),this.rawAdded=[],this.rawUpdated=[],this.rawDeleted=[];for(const i of t){switch(i.type){case 1:this.rawAdded.push(i.resource);break;case 0:this.rawUpdated.push(i.resource);break;case 2:this.rawDeleted.push(i.resource);break}this.b!==Tg.a&&(typeof i.cId=="number"?this.b===void 0?this.b=i.cId:this.b!==i.cId&&(this.b=Tg.a):this.b!==void 0&&(this.b=Tg.a))}}contains(t,...r){return this.h(t,{includeChildren:!1},...r)}affects(t,...r){return this.h(t,{includeChildren:!0},...r)}h(t,r,...i){if(!t)return!1;const s=i.length>0;return!!((!s||i.includes(1))&&(this.d.value.get(t)||r.includeChildren&&this.d.value.findSuperstr(t))||(!s||i.includes(0))&&(this.f.value.get(t)||r.includeChildren&&this.f.value.findSuperstr(t))||(!s||i.includes(2))&&(this.g.value.findSubstr(t)||r.includeChildren&&this.g.value.findSuperstr(t)))}gotAdded(){return this.rawAdded.length>0}gotDeleted(){return this.rawDeleted.length>0}gotUpdated(){return this.rawUpdated.length>0}correlates(t){return this.b===t}hasCorrelation(){return typeof this.b=="number"}};function xT(e,t,r){return!e||!t||e===t||t.length>e.length?!1:(t.charAt(t.length-1)!==$t&&(t+=$t),r?Ch(e,t):e.indexOf(t)===0)}var c1=class extends Error{constructor(e,t,r){super(e),this.fileOperationResult=t,this.options=r}},Pk;(function(e){e[e.FILE_IS_DIRECTORY=0]="FILE_IS_DIRECTORY",e[e.FILE_NOT_FOUND=1]="FILE_NOT_FOUND",e[e.FILE_NOT_MODIFIED_SINCE=2]="FILE_NOT_MODIFIED_SINCE",e[e.FILE_MODIFIED_SINCE=3]="FILE_MODIFIED_SINCE",e[e.FILE_MOVE_CONFLICT=4]="FILE_MOVE_CONFLICT",e[e.FILE_WRITE_LOCKED=5]="FILE_WRITE_LOCKED",e[e.FILE_PERMISSION_DENIED=6]="FILE_PERMISSION_DENIED",e[e.FILE_TOO_LARGE=7]="FILE_TOO_LARGE",e[e.FILE_INVALID_PATH=8]="FILE_INVALID_PATH",e[e.FILE_NOT_DIRECTORY=9]="FILE_NOT_DIRECTORY",e[e.FILE_OTHER_ERROR=10]="FILE_OTHER_ERROR"})(Pk||(Pk={}));var Ik;(function(e){e[e.FILE=0]="FILE",e[e.FOLDER=1]="FOLDER",e[e.ROOT_FOLDER=2]="ROOT_FOLDER"})(Ik||(Ik={}));var ET="";function Dk(e){if(!(typeof e.size!="number"||typeof e.mtime!="number"))return e.mtime.toString(29)+e.size.toString(31)}var Ak=class Fr{static{this.KB=1024}static{this.MB=Fr.KB*Fr.KB}static{this.GB=Fr.MB*Fr.KB}static{this.TB=Fr.GB*Fr.KB}static formatSize(t){return li(t)||(t=0),t<Fr.KB?p(1882,null,t.toFixed(0)):t<Fr.MB?p(1883,null,(t/Fr.KB).toFixed(2)):t<Fr.GB?p(1884,null,(t/Fr.MB).toFixed(2)):t<Fr.TB?p(1885,null,(t/Fr.GB).toFixed(2)):p(1886,null,(t/Fr.TB).toFixed(2))}},ST=class extends ae{constructor(e,t="",r="",i=!0,s){super(),this.j=this.B(new T),this.onDidChange=this.j.event,this.z=!0,this.m=e,this.n=t,this.w=r,this.z=i,this.D=s}get id(){return this.m}get label(){return this.n}set label(e){this.F(e)}F(e){this.n!==e&&(this.n=e,this.j.fire({label:e}))}get tooltip(){return this.u||""}set tooltip(e){this.G(e)}G(e){this.u!==e&&(this.u=e,this.j.fire({tooltip:e}))}get class(){return this.w}set class(e){this.H(e)}H(e){this.w!==e&&(this.w=e,this.j.fire({class:e}))}get enabled(){return this.z}set enabled(e){this.I(e)}I(e){this.z!==e&&(this.z=e,this.j.fire({enabled:e}))}get checked(){return this.C}set checked(e){this.J(e)}J(e){this.C!==e&&(this.C=e,this.j.fire({checked:e}))}async run(e,t){this.D&&await this.D(e)}},j_=class iy{constructor(){this.id=iy.ID,this.label="",this.tooltip="",this.class="separator",this.enabled=!1,this.checked=!1}static join(...t){let r=[];for(const i of t)i.length&&(r.length?r=[...r,new iy,...i]:r=i);return r}static{this.ID="vs.actions.separator"}async run(){}},U_=class C3 extends ST{static{this.ID="vs.actions.empty"}constructor(){super(C3.ID,p(42,null),void 0,!1)}},$T={EditorPane:"workbench.contributions.editors",EditorFactory:"workbench.contributions.editor.inputFactories"},CT={id:"default",displayName:p(4073,null),providerDisplayName:p(4074,null)},Tk;(function(e){e[e.PROGRAMMATIC=1]="PROGRAMMATIC",e[e.USER=2]="USER",e[e.EDIT=3]="EDIT",e[e.NAVIGATION=4]="NAVIGATION",e[e.JUMP=5]="JUMP"})(Tk||(Tk={}));var Rk;(function(e){e[e.IDENTICAL=1]="IDENTICAL",e[e.SIMILAR=2]="SIMILAR",e[e.DIFFERENT=3]="DIFFERENT"})(Rk||(Rk={}));function nd(e){if(xn(e))return!1;const t=e;return t?.original!==void 0&&t.modified!==void 0}function Lk(e){if(xn(e))return!1;const t=e;return!t||t.resources&&!Array.isArray(t.resources)?!1:!!t.resources||!!t.multiDiffSource}function l1(e){if(xn(e)||nd(e))return!1;const t=e;return t?.primary!==void 0&&t.secondary!==void 0}function od(e){if(xn(e))return!1;const t=e;return k.isUri(t?.base?.resource)&&k.isUri(t?.input1?.resource)&&k.isUri(t?.input2?.resource)&&k.isUri(t?.result?.resource)}var Nk;(function(e){e[e.SHORT=0]="SHORT",e[e.MEDIUM=1]="MEDIUM",e[e.LONG=2]="LONG"})(Nk||(Nk={}));var Fk;(function(e){e[e.EXPLICIT=1]="EXPLICIT",e[e.AUTO=2]="AUTO",e[e.FOCUS_CHANGE=3]="FOCUS_CHANGE",e[e.WINDOW_CHANGE=4]="WINDOW_CHANGE"})(Fk||(Fk={}));var PT=class{constructor(){this.a=new Map}registerSource(e,t){let r=this.a.get(e);return r||(r={source:e,label:t},this.a.set(e,r)),r.source}getSourceLabel(e){return this.a.get(e)?.label??e}},H_=new PT,Ok;(function(e){e[e.None=0]="None",e[e.Readonly=2]="Readonly",e[e.Untitled=4]="Untitled",e[e.Singleton=8]="Singleton",e[e.RequiresTrust=16]="RequiresTrust",e[e.CanSplitInGroup=32]="CanSplitInGroup",e[e.ForceDescription=64]="ForceDescription",e[e.CanDropIntoEditor=128]="CanDropIntoEditor",e[e.MultipleEditors=256]="MultipleEditors",e[e.Scratchpad=512]="Scratchpad"})(Ok||(Ok={}));var IT=class extends ae{};function xn(e){return e instanceof IT}function DT(e){const t=e;return k.isUri(t?.preferredResource)}function AT(e){const t=e;return xn(t?.primary)&&xn(t?.secondary)}function TT(e){const t=e;return xn(t?.modified)&&xn(t?.original)}var Mk;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.REPLACE=1]="REPLACE",e[e.MOVE=2]="MOVE",e[e.UNPIN=3]="UNPIN"})(Mk||(Mk={}));var jk;(function(e){e[e.GROUP_ACTIVE=0]="GROUP_ACTIVE",e[e.GROUP_INDEX=1]="GROUP_INDEX",e[e.GROUP_LABEL=2]="GROUP_LABEL",e[e.GROUP_LOCKED=3]="GROUP_LOCKED",e[e.EDITORS_SELECTION=4]="EDITORS_SELECTION",e[e.EDITOR_OPEN=5]="EDITOR_OPEN",e[e.EDITOR_CLOSE=6]="EDITOR_CLOSE",e[e.EDITOR_MOVE=7]="EDITOR_MOVE",e[e.EDITOR_ACTIVE=8]="EDITOR_ACTIVE",e[e.EDITOR_LABEL=9]="EDITOR_LABEL",e[e.EDITOR_CAPABILITIES=10]="EDITOR_CAPABILITIES",e[e.EDITOR_PIN=11]="EDITOR_PIN",e[e.EDITOR_TRANSIENT=12]="EDITOR_TRANSIENT",e[e.EDITOR_STICKY=13]="EDITOR_STICKY",e[e.EDITOR_DIRTY=14]="EDITOR_DIRTY",e[e.EDITOR_WILL_DISPOSE=15]="EDITOR_WILL_DISPOSE"})(jk||(jk={}));var En;(function(e){e[e.PRIMARY=1]="PRIMARY",e[e.SECONDARY=2]="SECONDARY",e[e.BOTH=3]="BOTH",e[e.ANY=4]="ANY"})(En||(En={}));var RT=class{getOriginalUri(e,t){if(!e)return;if(od(e))return Hk.getOriginalUri(e.result,t);if(t?.supportSideBySide){const{primary:i,secondary:s}=this.a(e);if(i&&s){if(t?.supportSideBySide===En.BOTH)return{primary:this.getOriginalUri(i,{filterByScheme:t.filterByScheme}),secondary:this.getOriginalUri(s,{filterByScheme:t.filterByScheme})};if(t?.supportSideBySide===En.ANY)return this.getOriginalUri(i,{filterByScheme:t.filterByScheme})??this.getOriginalUri(s,{filterByScheme:t.filterByScheme});e=t.supportSideBySide===En.PRIMARY?i:s}}if(nd(e)||Lk(e)||l1(e)||od(e))return;const r=DT(e)?e.preferredResource:e.resource;return!r||!t||!t.filterByScheme?r:this.b(r,t.filterByScheme)}a(e){return AT(e)||l1(e)?{primary:e.primary,secondary:e.secondary}:TT(e)||nd(e)?{primary:e.modified,secondary:e.original}:{primary:void 0,secondary:void 0}}getCanonicalUri(e,t){if(!e)return;if(od(e))return Hk.getCanonicalUri(e.result,t);if(t?.supportSideBySide){const{primary:i,secondary:s}=this.a(e);if(i&&s){if(t?.supportSideBySide===En.BOTH)return{primary:this.getCanonicalUri(i,{filterByScheme:t.filterByScheme}),secondary:this.getCanonicalUri(s,{filterByScheme:t.filterByScheme})};if(t?.supportSideBySide===En.ANY)return this.getCanonicalUri(i,{filterByScheme:t.filterByScheme})??this.getCanonicalUri(s,{filterByScheme:t.filterByScheme});e=t.supportSideBySide===En.PRIMARY?i:s}}if(nd(e)||Lk(e)||l1(e)||od(e))return;const r=e.resource;return!r||!t||!t.filterByScheme?r:this.b(r,t.filterByScheme)}b(e,t){if(Array.isArray(t)){if(t.some(r=>e.scheme===r))return e}else if(t===e.scheme)return e}},Uk;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.KEYBOARD=1]="KEYBOARD",e[e.MOUSE=2]="MOUSE"})(Uk||(Uk={}));var Hk=new RT,Bk;(function(e){e[e.LEFT=0]="LEFT",e[e.RIGHT=1]="RIGHT"})(Bk||(Bk={}));var LT=class{constructor(){this.c=new Map,this.d=new Map}start(e){const t=this.a=e.get(Qh);for(const[r,i]of this.c)this.e(r,i,t);this.c.clear()}e(e,t,r){const i=r.createInstance(t);this.d.set(e,i)}registerFileEditorFactory(e){if(this.b)throw new Error("Can only register one file editor factory.");this.b=e}getFileEditorFactory(){return ea(this.b)}registerEditorSerializer(e,t){if(this.c.has(e)||this.d.has(e))throw new Error(`A editor serializer with type ID '${e}' was already registered.`);return this.a?this.e(e,t,this.a):this.c.set(e,t),me(()=>{this.c.delete(e),this.d.delete(e)})}getEditorSerializer(e){return this.d.get(typeof e=="string"?e:e.typeId)}};fr.add($T.EditorFactory,new LT);var zk;(function(e){e[e.MOST_RECENTLY_ACTIVE=0]="MOST_RECENTLY_ACTIVE",e[e.SEQUENTIAL=1]="SEQUENTIAL"})(zk||(zk={}));var ol=class{constructor(e,t,r){this.owner=e,this.debugNameSource=t,this.referenceFn=r}getDebugName(e){return NT(e,this)}},_k=new Map,u1=new WeakMap;function NT(e,t){const r=u1.get(e);if(r)return r;const i=FT(e,t);if(i){let s=_k.get(i)??0;s++,_k.set(i,s);const n=s===1?i:`${i}#${s}`;return u1.set(e,n),n}}function FT(e,t){const r=u1.get(e);if(r)return r;const i=t.owner?MT(t.owner)+".":"";let s;const n=t.debugNameSource;if(n!==void 0)if(typeof n=="function"){if(s=n(),s!==void 0)return i+s}else return i+n;const o=t.referenceFn;if(o!==void 0&&(s=h1(o),s!==void 0))return i+s;if(t.owner!==void 0){const a=OT(t.owner,e);if(a!==void 0)return i+a}}function OT(e,t){for(const r in e)if(e[r]===t)return r}var Wk=new Map,Vk=new WeakMap;function MT(e){const t=Vk.get(e);if(t)return t;const r=jT(e);let i=Wk.get(r)??0;i++,Wk.set(r,i);const s=i===1?r:`${r}#${i}`;return Vk.set(e,s),s}function jT(e){const t=e.constructor;return t?t.name:"Object"}function h1(e){const t=e.toString(),i=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(t);return(i?i[1]:void 0)?.trim()}var d1=(e,t)=>e===t,qk;function UT(e){qk=e}function ss(){return qk}var HT=class{constructor(){this.a=0,this.d=new WeakMap}b(e){return BT([pa(WT("|  ",this.a)),e])}c(e){return e.hadValue?e.didChange?[pa(" "),Ri(cl(e.oldValue,70),{color:"red",strikeThrough:!0}),pa(" "),Ri(cl(e.newValue,60),{color:"green"})]:[pa(" (unchanged)")]:[pa(" "),Ri(cl(e.newValue,60),{color:"green"}),pa(" (initial)")]}handleObservableChanged(e,t){console.log(...this.b([al("observable value changed"),Ri(e.debugName,{color:"BlueViolet"}),...this.c(t)]))}formatChanges(e){if(e.size!==0)return Ri(" (changed deps: "+[...e].map(t=>t.debugName).join(", ")+")",{color:"gray"})}handleDerivedCreated(e){const t=e.handleChange;this.d.set(e,new Set),e.handleChange=(r,i)=>(this.d.get(e).add(r),t.apply(e,[r,i]))}handleDerivedRecomputed(e,t){const r=this.d.get(e);console.log(...this.b([al("derived recomputed"),Ri(e.debugName,{color:"BlueViolet"}),...this.c(t),this.formatChanges(r),{data:[{fn:e._debugNameData.referenceFn??e._computeFn}]}])),r.clear()}handleFromEventObservableTriggered(e,t){console.log(...this.b([al("observable from event triggered"),Ri(e.debugName,{color:"BlueViolet"}),...this.c(t),{data:[{fn:e._getValue}]}]))}handleAutorunCreated(e){const t=e.handleChange;this.d.set(e,new Set),e.handleChange=(r,i)=>(this.d.get(e).add(r),t.apply(e,[r,i]))}handleAutorunTriggered(e){const t=this.d.get(e);console.log(...this.b([al("autorun"),Ri(e.debugName,{color:"BlueViolet"}),this.formatChanges(t),{data:[{fn:e._debugNameData.referenceFn??e._runFn}]}])),t.clear(),this.a++}handleAutorunFinished(e){this.a--}handleBeginTransaction(e){let t=e.getDebugName();t===void 0&&(t=""),console.log(...this.b([al("transaction"),Ri(t,{color:"BlueViolet"}),{data:[{fn:e._fn}]}])),this.a++}handleEndTransaction(){this.a--}};function BT(e){const t=new Array,r=[];let i="";function s(o){if("length"in o)for(const a of o)a&&s(a);else"text"in o?(i+=`%c${o.text}`,t.push(o.style),o.data&&r.push(...o.data)):"data"in o&&r.push(...o.data)}s(e);const n=[i,...t];return n.push(...r),n}function pa(e){return Ri(e,{color:"black"})}function al(e){return Ri(VT(`${e}: `,10),{color:"black",bold:!0})}function Ri(e,t={color:"black"}){function r(s){return Object.entries(s).reduce((n,[o,a])=>`${n}${o}:${a};`,"")}const i={color:t.color};return t.strikeThrough&&(i["text-decoration"]="line-through"),t.bold&&(i["font-weight"]="bold"),{text:e,style:r(i)}}function cl(e,t){switch(typeof e){case"number":return""+e;case"string":return e.length+2<=t?`"${e}"`:`"${e.substr(0,t-7)}"+...`;case"boolean":return e?"true":"false";case"undefined":return"undefined";case"object":return e===null?"null":Array.isArray(e)?zT(e,t):_T(e,t);case"symbol":return e.toString();case"function":return`[[Function${e.name?" "+e.name:""}]]`;default:return""+e}}function zT(e,t){let r="[ ",i=!0;for(const s of e){if(i||(r+=", "),r.length-5>t){r+="...";break}i=!1,r+=`${cl(s,t-r.length)}`}return r+=" ]",r}function _T(e,t){let r="{ ",i=!0;for(const[s,n]of Object.entries(e)){if(i||(r+=", "),r.length-5>t){r+="...";break}i=!1,r+=`${s}: ${cl(n,t-r.length)}`}return r+=" }",r}function WT(e,t){let r="";for(let i=1;i<=t;i++)r+=e;return r}function VT(e,t){for(;e.length<t;)e+=" ";return e}var Gk;function qT(e){Gk=e}var Jk;function GT(e){Jk=e}var f1;function JT(e){f1=e}var QT=class{get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e,t){const r=t===void 0?void 0:e,i=t===void 0?e:t;return f1({owner:r,debugName:()=>{const s=h1(i);if(s!==void 0)return s;const o=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(i.toString());if(o)return`${this.debugName}.${o[2]}`;if(!r)return`${this.debugName} (mapped)`},debugReferenceFn:i},s=>i(this.read(s),s))}flatten(){return f1({owner:void 0,debugName:()=>`${this.debugName} (flattened)`},e=>this.read(e).read(e))}recomputeInitiallyAndOnChange(e,t){return e.add(Gk(this,t)),this}keepObserved(e){return e.add(Jk(this)),this}get a(){return this.get()}},p1=class extends QT{constructor(){super(...arguments),this.b=new Set}addObserver(e){const t=this.b.size;this.b.add(e),t===0&&this.c()}removeObserver(e){this.b.delete(e)&&this.b.size===0&&this.f()}c(){}f(){}};function YT(e,t){const r=new Qk(e,t);try{e(r)}finally{r.finish()}}function XT(e,t,r){e?t(e):YT(t,r)}var Qk=class{constructor(e,t){this._fn=e,this.b=t,this.a=[],ss()?.handleBeginTransaction(this)}getDebugName(){return this.b?this.b():h1(this._fn)}updateObserver(e,t){this.a.push({observer:e,observable:t}),e.beginUpdate(t)}finish(){const e=this.a;for(let t=0;t<e.length;t++){const{observer:r,observable:i}=e[t];r.endUpdate(i)}this.a=null,ss()?.handleEndTransaction()}};function ZT(e,t){let r;return typeof e=="string"?r=new ol(void 0,e,void 0):r=new ol(e,void 0,void 0),new KT(r,t,d1)}var KT=class extends p1{get debugName(){return this.e.getDebugName(this)??"ObservableValue"}constructor(e,t,r){super(),this.e=e,this.g=r,this.d=t}get(){return this.d}set(e,t,r){if(r===void 0&&this.g(this.d,e))return;let i;t||(t=i=new Qk(()=>{},()=>`Setting ${this.debugName}`));try{const s=this.d;this.h(e),ss()?.handleObservableChanged(this,{oldValue:s,newValue:e,change:r,didChange:!0,hadValue:!0});for(const n of this.b)t.updateObserver(n,this),n.handleChange(this,r)}finally{i&&i.finish()}}toString(){return`${this.debugName}: ${this.d}`}h(e){this.d=e}};function Yk(e){return new Zk(new ol(void 0,void 0,e),e,void 0,void 0)}var Xk;(function(e){e[e.dependenciesMightHaveChanged=1]="dependenciesMightHaveChanged",e[e.stale=2]="stale",e[e.upToDate=3]="upToDate"})(Xk||(Xk={}));var Zk=class{get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}constructor(e,t,r,i){this._debugNameData=e,this._runFn=t,this.i=r,this.j=i,this.a=2,this.b=0,this.c=!1,this.f=new Set,this.g=new Set,this.h=this.i?.(),ss()?.handleAutorunCreated(this),this.k(),Xo(this)}dispose(){this.c=!0;for(const e of this.f)e.removeObserver(this);this.f.clear(),Zo(this)}k(){if(this.a===3)return;const e=this.g;this.g=this.f,this.f=e,this.a=3;const t=this.c;try{if(!t){ss()?.handleAutorunTriggered(this);const r=this.h;try{this.h=this.i?.(),this._runFn(this,r)}catch(i){hh(i)}}}finally{t||ss()?.handleAutorunFinished(this);for(const r of this.g)r.removeObserver(this);this.g.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(){this.a===3&&(this.a=1),this.b++}endUpdate(){try{if(this.b===1)do{if(this.a===1){this.a=3;for(const e of this.f)if(e.reportChanges(),this.a===2)break}this.k()}while(this.a!==3)}finally{this.b--}kk(()=>this.b>=0)}handlePossibleChange(e){this.a===3&&this.f.has(e)&&!this.g.has(e)&&(this.a=1)}handleChange(e,t){if(this.f.has(e)&&!this.g.has(e))try{(this.j?this.j({changedObservable:e,change:t,didChange:i=>i===e},this.h):!0)&&(this.a=2)}catch(r){hh(r)}}readObservable(e){if(this.c)return e.get();e.addObserver(this);const t=e.get();return this.f.add(e),this.g.delete(e),t}};(function(e){e.Observer=Zk})(Yk||(Yk={}));function eR(e,t){return new tR(new ol(e.owner,e.debugName,e.debugReferenceFn),t,void 0,void 0,e.onLastObserverRemoved,e.equalsFn??d1)}JT(eR);var Kk;(function(e){e[e.initial=0]="initial",e[e.dependenciesMightHaveChanged=1]="dependenciesMightHaveChanged",e[e.stale=2]="stale",e[e.upToDate=3]="upToDate"})(Kk||(Kk={}));var tR=class extends p1{get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}constructor(e,t,r,i,s=void 0,n){super(),this._debugNameData=e,this._computeFn=t,this.n=r,this.p=i,this.q=s,this.s=n,this.g=0,this.h=void 0,this.j=0,this.k=new Set,this.l=new Set,this.m=void 0,this.m=this.n?.(),ss()?.handleDerivedCreated(this)}f(){this.g=0,this.h=void 0;for(const e of this.k)e.removeObserver(this);this.k.clear(),this.q?.()}get(){if(this.b.size===0){const e=this._computeFn(this,this.n?.());return this.f(),e}else{do{if(this.g===1){for(const e of this.k)if(e.reportChanges(),this.g===2)break}this.g===1&&(this.g=3),this.u()}while(this.g!==3);return this.h}}u(){if(this.g===3)return;const e=this.l;this.l=this.k,this.k=e;const t=this.g!==0,r=this.h;this.g=3;let i=!1;try{const s=this.m;this.m=this.n?.();try{this.h=this._computeFn(this,s)}finally{for(const n of this.l)n.removeObserver(this);this.l.clear()}i=t&&!this.s(r,this.h),ss()?.handleDerivedRecomputed(this,{oldValue:r,newValue:this.h,change:void 0,didChange:i,hadValue:t})}catch(s){hh(s)}if(i)for(const s of this.b)s.handleChange(this,void 0)}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(e){this.j++;const t=this.j===1;if(this.g===3&&(this.g=1,!t))for(const r of this.b)r.handlePossibleChange(this);if(t)for(const r of this.b)r.beginUpdate(this)}endUpdate(e){if(this.j--,this.j===0){const t=[...this.b];for(const r of t)r.endUpdate(this)}kk(()=>this.j>=0)}handlePossibleChange(e){if(this.g===3&&this.k.has(e)&&!this.l.has(e)){this.g=1;for(const t of this.b)t.handlePossibleChange(this)}}handleChange(e,t){if(this.k.has(e)&&!this.l.has(e)){let r=!1;try{r=this.p?this.p({changedObservable:e,change:t,didChange:s=>s===e},this.m):!0}catch(s){hh(s)}const i=this.g===3;if(r&&(this.g===1||i)&&(this.g=2,i))for(const s of this.b)s.handlePossibleChange(this)}}readObservable(e){e.addObserver(this);const t=e.get();return this.k.add(e),this.l.delete(e),t}addObserver(e){const t=!this.b.has(e)&&this.j>0;super.addObserver(e),t&&e.beginUpdate(this)}removeObserver(e){const t=this.b.has(e)&&this.j>0;super.removeObserver(e),t&&e.endUpdate(this)}};function e7(...e){let t,r,i;return e.length===3?[t,r,i]=e:[r,i]=e,new ga(new ol(t,void 0,i),r,i,()=>ga.globalTransaction,d1)}var ga=class extends p1{constructor(e,t,r,i,s){super(),this.k=e,this.l=t,this._getValue=r,this.n=i,this.p=s,this.h=!1,this.s=n=>{const o=this._getValue(n),a=this.g,c=!this.h||!this.p(a,o);let l=!1;c&&(this.g=o,this.h&&(l=!0,XT(this.n(),u=>{ss()?.handleFromEventObservableTriggered(this,{oldValue:a,newValue:o,change:void 0,didChange:c,hadValue:this.h});for(const h of this.b)u.updateObserver(h,this),h.handleChange(this,void 0)},()=>{const u=this.q();return"Event fired"+(u?`: ${u}`:"")})),this.h=!0),l||ss()?.handleFromEventObservableTriggered(this,{oldValue:a,newValue:o,change:void 0,didChange:c,hadValue:this.h})}}q(){return this.k.getDebugName(this)}get debugName(){const e=this.q();return"From Event"+(e?`: ${e}`:"")}c(){this.j=this.l(this.s)}f(){this.j.dispose(),this.j=void 0,this.h=!1,this.g=void 0}get(){return this.j?(this.h||this.s(void 0),this.g):this._getValue(void 0)}};(function(e){e.Observer=ga;function t(r,i){let s=!1;ga.globalTransaction===void 0&&(ga.globalTransaction=r,s=!0);try{i()}finally{s&&(ga.globalTransaction=void 0)}}e.batchEventsGlobally=t})(e7||(e7={}));function rR(e){const t=new t7(!1,void 0);return e.addObserver(t),me(()=>{e.removeObserver(t)})}GT(rR);function iR(e,t){const r=new t7(!0,t);return e.addObserver(r),t?t(e.get()):e.reportChanges(),me(()=>{e.removeObserver(r)})}qT(iR);var t7=class{constructor(e,t){this.b=e,this.c=t,this.a=0}beginUpdate(e){this.a++}endUpdate(e){this.a--,this.a===0&&this.b&&(this.c?this.c(e.get()):e.reportChanges())}handlePossibleChange(e){}handleChange(e,t){}},sR=!1;sR&&UT(new HT);function g1(e){if(!e)return;const t=e.indexOf("+");return t<0?e:e.substr(0,t)}var nR=["AI","Azure","Chat","Data Science","Debuggers","Extension Packs","Education","Formatters","Keymaps","Language Packs","Linters","Machine Learning","Notebooks","Programming Languages","SCM Providers","Snippets","Testing","Themes","Visualization","Other"],r7;(function(e){e[e.System=0]="System",e[e.User=1]="User"})(r7||(r7={}));var i7;(function(e){e.WIN32_X64="win32-x64",e.WIN32_ARM64="win32-arm64",e.LINUX_X64="linux-x64",e.LINUX_ARM64="linux-arm64",e.LINUX_ARMHF="linux-armhf",e.ALPINE_X64="alpine-x64",e.ALPINE_ARM64="alpine-arm64",e.DARWIN_X64="darwin-x64",e.DARWIN_ARM64="darwin-arm64",e.WEB="web",e.UNIVERSAL="universal",e.UNKNOWN="unknown",e.UNDEFINED="undefined"})(i7||(i7={}));var rt=class{constructor(e){this.value=e,this._lower=e.toLowerCase()}static equals(e,t){if(typeof e>"u"||e===null)return typeof t>"u"||t===null;if(typeof t>"u"||t===null)return!1;if(typeof e=="string"||typeof t=="string"){const r=typeof e=="string"?e:e.value,i=typeof t=="string"?t:t.value;return $i(r,i)}return e._lower===t._lower}static toKey(e){return typeof e=="string"?e.toLowerCase():e._lower}},lo=class{get size(){return this.c.size}constructor(e){if(this.c=new Set,e)for(const t of e)this.add(t)}add(e){this.c.add(rt.toKey(e))}delete(e){return this.c.delete(rt.toKey(e))}has(e){return this.c.has(rt.toKey(e))}},Os=class{constructor(){this.c=new Map}clear(){this.c.clear()}delete(e){this.c.delete(rt.toKey(e))}get(e){return this.c.get(rt.toKey(e))}has(e){return this.c.has(rt.toKey(e))}set(e,t){this.c.set(rt.toKey(e),t)}values(){return this.c.values()}forEach(e){this.c.forEach(e)}[Symbol.iterator](){return this.c[Symbol.iterator]()}},B_=X("IBuiltinExtensionsScannerService"),ad=X("productService"),oR="vscode://schemas/vscode-product",Sn=X("configurationService"),s7;(function(e){e[e.APPLICATION=1]="APPLICATION",e[e.USER=2]="USER",e[e.USER_LOCAL=3]="USER_LOCAL",e[e.USER_REMOTE=4]="USER_REMOTE",e[e.WORKSPACE=5]="WORKSPACE",e[e.WORKSPACE_FOLDER=6]="WORKSPACE_FOLDER",e[e.DEFAULT=7]="DEFAULT",e[e.MEMORY=8]="MEMORY"})(s7||(s7={}));function m1(e,t){const r=Object.create(null);for(const i in e)n7(r,i,e[i],t);return r}function n7(e,t,r,i){const s=t.split("."),n=s.pop();let o=e;for(let a=0;a<s.length;a++){const c=s[a];let l=o[c];switch(typeof l){case"undefined":l=o[c]=Object.create(null);break;case"object":if(l===null){i(`Ignoring ${t} as ${s.slice(0,a+1).join(".")} is null`);return}break;default:i(`Ignoring ${t} as ${s.slice(0,a+1).join(".")} is ${JSON.stringify(l)}`);return}o=l}if(typeof o=="object"&&o!==null)try{o[n]=r}catch{i(`Ignoring ${t} as ${s.join(".")} is ${JSON.stringify(o)}`)}else i(`Ignoring ${t} as ${s.join(".")} is ${JSON.stringify(o)}`)}function aR(e,t){const r=t.split(".");o7(e,r)}function o7(e,t){const r=t.shift();if(t.length===0){delete e[r];return}if(Object.keys(e).indexOf(r)!==-1){const i=e[r];typeof i=="object"&&!Array.isArray(i)&&(o7(i,t),Object.keys(i).length===0&&delete e[r])}}function cd(e,t,r){function i(o,a){let c=o;for(const l of a){if(typeof c!="object"||c===null)return;c=c[l]}return c}const s=t.split("."),n=i(e,s);return typeof n>"u"?r:n}function cR(e){return e.replace(/[\[\]]/g,"")}function lR(e){let t=!1;const r=new Map,i=new Map;if(uR(e,u=>{if(e===u)return!0;const h=JSON.stringify(u);if(h.length<30)return!0;const d=r.get(h);if(!d){const f={schemas:[u]};return r.set(h,f),i.set(u,f),!0}return d.schemas.push(u),i.set(u,d),t=!0,!1}),r.clear(),!t)return JSON.stringify(e);let n="$defs";for(;e.hasOwnProperty(n);)n+="_";const o=[];function a(u){return JSON.stringify(u,(h,d)=>{if(d!==u){const f=i.get(d);if(f&&f.schemas.length>1)return f.id||(f.id=`_${o.length}`,o.push(f.schemas[0])),{$ref:`#/${n}/${f.id}`}}return d})}const c=a(e),l=[];for(let u=0;u<o.length;u++)l.push(`"_${u}":${a(o[u])}`);return l.length?`${c.substring(0,c.length-1)},"${n}":{${l.join(",")}}}`:c}function ma(e){return typeof e=="object"&&e!==null}function uR(e,t){if(!e||typeof e!="object")return;const r=(...c)=>{for(const l of c)ma(l)&&o.push(l)},i=(...c)=>{for(const l of c)if(ma(l))for(const u in l){const h=l[u];ma(h)&&o.push(h)}},s=(...c)=>{for(const l of c)if(Array.isArray(l))for(const u of l)ma(u)&&o.push(u)},n=c=>{if(Array.isArray(c))for(const l of c)ma(l)&&o.push(l);else ma(c)&&o.push(c)},o=[e];let a=o.pop();for(;a;)t(a)&&(r(a.additionalItems,a.additionalProperties,a.not,a.contains,a.propertyNames,a.if,a.then,a.else,a.unevaluatedItems,a.unevaluatedProperties),i(a.definitions,a.$defs,a.properties,a.patternProperties,a.dependencies,a.dependentSchemas),s(a.anyOf,a.allOf,a.oneOf,a.prefixItems),n(a.items)),a=o.pop()}var ld={JSONContribution:"base.contributions.json"};function hR(e){return e.length>0&&e.charAt(e.length-1)==="#"?e.substring(0,e.length-1):e}var dR=class{constructor(){this.b=new T,this.onDidChangeSchema=this.b.event,this.a={}}registerSchema(e,t){this.a[hR(e)]=t,this.b.fire(e)}notifySchemaChanged(e){this.b.fire(e)}getSchemaContributions(){return{schemas:this.a}}getSchemaContent(e){const t=this.a[e];return t?lR(t):void 0}hasSchemaContent(e){return!!this.a[e]}},fR=new dR;fr.add(ld.JSONContribution,fR);var a7;(function(e){e.Multiline="multilineText",e.Singleline="singlelineText"})(a7||(a7={}));var va={Configuration:"base.contributions.configuration"},c7;(function(e){e[e.APPLICATION=1]="APPLICATION",e[e.MACHINE=2]="MACHINE",e[e.WINDOW=3]="WINDOW",e[e.RESOURCE=4]="RESOURCE",e[e.LANGUAGE_OVERRIDABLE=5]="LANGUAGE_OVERRIDABLE",e[e.MACHINE_OVERRIDABLE=6]="MACHINE_OVERRIDABLE"})(c7||(c7={}));var ud={properties:{},patternProperties:{}},hd={properties:{},patternProperties:{}},dd={properties:{},patternProperties:{}},fd={properties:{},patternProperties:{}},pd={properties:{},patternProperties:{}},ll={properties:{},patternProperties:{}},uo="vscode://schemas/settings/resourceLanguage",gd=fr.as(ld.JSONContribution),pR=class{constructor(){this.a=[],this.i=new Set,this.j=new T,this.onDidSchemaChange=this.j.event,this.k=new T,this.onDidUpdateConfiguration=this.k.event,this.b=new Map,this.c={id:"defaultOverrides",title:p(1673,null),properties:{}},this.d=[this.c],this.h={properties:{},patternProperties:{},additionalProperties:!0,allowTrailingCommas:!0,allowComments:!0},this.e={},this.f=new Map,this.g={},gd.registerSchema(uo,this.h),this.z()}registerConfiguration(e,t=!0){this.registerConfigurations([e],t)}registerConfigurations(e,t=!0){const r=new Set;this.r(e,t,r),gd.registerSchema(uo,this.h),this.j.fire(),this.k.fire({properties:r})}deregisterConfigurations(e){const t=new Set;this.s(e,t),gd.registerSchema(uo,this.h),this.j.fire(),this.k.fire({properties:t})}updateConfigurations({add:e,remove:t}){const r=new Set;this.s(t,r),this.r(e,!1,r),gd.registerSchema(uo,this.h),this.j.fire(),this.k.fire({properties:r})}registerDefaultConfigurations(e){const t=new Set;this.l(e,t),this.j.fire(),this.k.fire({properties:t,defaultsOverrides:!0})}l(e,t){this.a.push(...e);const r=[];for(const{overrides:i,source:s}of e)for(const n in i){t.add(n);const o=this.b.get(n)??this.b.set(n,{configurationDefaultOverrides:[]}).get(n),a=i[n];if(o.configurationDefaultOverrides.push({value:a,source:s}),ns.test(n)){const c=this.o(n,a,s,o.configurationDefaultOverrideValue);if(!c)continue;o.configurationDefaultOverrideValue=c,this.n(n,c,s),r.push(...ul(n))}else{const c=this.p(n,a,s,o.configurationDefaultOverrideValue);if(!c)continue;o.configurationDefaultOverrideValue=c;const l=this.e[n];l&&(this.A(n,l),this.w(n,l))}}this.q(r)}deregisterDefaultConfigurations(e){const t=new Set;this.m(e,t),this.j.fire(),this.k.fire({properties:t,defaultsOverrides:!0})}m(e,t){for(const r of e){const i=this.a.indexOf(r);i!==-1&&this.a.splice(i,1)}for(const{overrides:r,source:i}of e)for(const s in r){const n=this.b.get(s);if(!n)continue;const o=n.configurationDefaultOverrides.findIndex(a=>i?a.source?.id===i.id:a.value===r[s]);if(o!==-1){if(n.configurationDefaultOverrides.splice(o,1),n.configurationDefaultOverrides.length===0&&this.b.delete(s),ns.test(s)){let a;for(const c of n.configurationDefaultOverrides)a=this.o(s,c.value,c.source,a);a&&!g4(a.value)?(n.configurationDefaultOverrideValue=a,this.n(s,a,i)):(this.b.delete(s),delete this.e[s],delete this.c.properties[s])}else{let a;for(const l of n.configurationDefaultOverrides)a=this.p(s,l.value,l.source,a);n.configurationDefaultOverrideValue=a;const c=this.e[s];c&&(this.A(s,c),this.w(s,c))}t.add(s)}}this.y()}n(e,t,r){const i={type:"object",default:t.value,description:p(1674,null,cR(e)),$ref:uo,defaultDefaultValue:t.value,source:r,defaultValueSource:r};this.e[e]=i,this.c.properties[e]=i}o(e,t,r,i){const s=i?.value||{},n=i?.source??new Map;if(!(n instanceof Map)){console.error("objectConfigurationSources is not a Map");return}for(const o of Object.keys(t)){const a=t[o];if(Dt(a)&&(Bc(s[o])||Dt(s[o]))){if(s[o]={...s[o]??{},...a},r)for(const l in a)n.set(`${o}.${l}`,r)}else s[o]=a,r?n.set(o,r):n.delete(o)}return{value:s,source:n}}p(e,t,r,i){const s=this.e[e],n=i?.value??s?.defaultDefaultValue;let o=r;if(Dt(t)&&(s!==void 0&&s.type==="object"||s===void 0&&(Bc(n)||Dt(n)))){if(o=i?.source??new Map,!(o instanceof Map)){console.error("defaultValueSource is not a Map");return}for(const c in t)r&&o.set(`${e}.${c}`,r);t={...Dt(n)?n:{},...t}}return{value:t,source:o}}deltaConfiguration(e){let t=!1;const r=new Set;e.removedDefaults&&(this.m(e.removedDefaults,r),t=!0),e.addedDefaults&&(this.l(e.addedDefaults,r),t=!0),e.removedConfigurations&&this.s(e.removedConfigurations,r),e.addedConfigurations&&this.r(e.addedConfigurations,!1,r),this.j.fire(),this.k.fire({properties:r,defaultsOverrides:t})}notifyConfigurationSchemaUpdated(...e){this.j.fire()}registerOverrideIdentifiers(e){this.q(e),this.j.fire()}q(e){for(const t of e)this.i.add(t);this.y()}r(e,t,r){e.forEach(i=>{this.u(i,t,i.extensionInfo,i.restrictedProperties,void 0,r),this.d.push(i),this.v(i)})}s(e,t){const r=i=>{if(i.properties)for(const s in i.properties){t.add(s);const n=this.e[s];n?.policy?.name&&this.f.delete(n.policy.name),delete this.e[s],this.x(s,i.properties[s])}i.allOf?.forEach(s=>r(s))};for(const i of e){r(i);const s=this.d.indexOf(i);s!==-1&&this.d.splice(s,1)}}u(e,t=!0,r,i,s=3,n){s=Lt(e.scope)?s:e.scope;const o=e.properties;if(o)for(const c in o){const l=o[c];if(t&&mR(c,l)){delete o[c];continue}if(l.source=r,l.defaultDefaultValue=o[c].default,this.A(c,l),ns.test(c)?l.scope=void 0:(l.scope=Lt(l.scope)?s:l.scope,l.restricted=Lt(l.restricted)?!!i?.includes(c):l.restricted),o[c].hasOwnProperty("included")&&!o[c].included){this.g[c]=o[c],delete o[c];continue}else this.e[c]=o[c],o[c].policy?.name&&this.f.set(o[c].policy.name,c);!o[c].deprecationMessage&&o[c].markdownDeprecationMessage&&(o[c].deprecationMessage=o[c].markdownDeprecationMessage),n.add(c)}const a=e.allOf;if(a)for(const c of a)this.u(c,t,r,i,s,n)}getConfigurations(){return this.d}getConfigurationProperties(){return this.e}getPolicyConfigurations(){return this.f}getExcludedConfigurationProperties(){return this.g}getRegisteredDefaultConfigurations(){return[...this.a]}getConfigurationDefaultsOverrides(){const e=new Map;for(const[t,r]of this.b)r.configurationDefaultOverrideValue&&e.set(t,r.configurationDefaultOverrideValue);return e}v(e){const t=r=>{const i=r.properties;if(i)for(const n in i)this.w(n,i[n]);r.allOf?.forEach(t)};t(e)}w(e,t){switch(ud.properties[e]=t,t.scope){case 1:hd.properties[e]=t;break;case 2:dd.properties[e]=t;break;case 6:fd.properties[e]=t;break;case 3:pd.properties[e]=t;break;case 4:ll.properties[e]=t;break;case 5:ll.properties[e]=t,this.h.properties[e]=t;break}}x(e,t){switch(delete ud.properties[e],t.scope){case 1:delete hd.properties[e];break;case 2:delete dd.properties[e];break;case 6:delete fd.properties[e];break;case 3:delete pd.properties[e];break;case 4:case 5:delete ll.properties[e],delete this.h.properties[e];break}}y(){for(const e of this.i.values()){const t=`[${e}]`,r={type:"object",description:p(1675,null),errorMessage:p(1676,null),$ref:uo};this.A(t,r),ud.properties[t]=r,hd.properties[t]=r,dd.properties[t]=r,fd.properties[t]=r,pd.properties[t]=r,ll.properties[t]=r}}z(){const e={type:"object",description:p(1677,null),errorMessage:p(1678,null),$ref:uo};ud.patternProperties[ho]=e,hd.patternProperties[ho]=e,dd.patternProperties[ho]=e,fd.patternProperties[ho]=e,pd.patternProperties[ho]=e,ll.patternProperties[ho]=e,this.j.fire()}A(e,t){const r=this.b.get(e)?.configurationDefaultOverrideValue;let i,s;r&&(!t.disallowConfigurationDefault||!r.source)&&(i=r.value,s=r.source),Bc(i)&&(i=t.defaultDefaultValue,s=void 0),Bc(i)&&(i=gR(t.type)),t.default=i,t.defaultValueSource=s}},l7="\\[([^\\]]+)\\]",u7=new RegExp(l7,"g"),ho=`^(${l7})+$`,ns=new RegExp(ho);function ul(e){const t=[];if(ns.test(e)){let r=u7.exec(e);for(;r?.length;){const i=r[1].trim();i&&t.push(i),r=u7.exec(e)}}return Qo(t)}function gR(e){switch(Array.isArray(e)?e[0]:e){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}var md=new pR;fr.add(va.Configuration,md);function mR(e,t){return e.trim()?ns.test(e)?p(1680,null,e):md.getConfigurationProperties()[e]!==void 0?p(1681,null,e):t.policy?.name&&md.getPolicyConfigurations().get(t.policy?.name)!==void 0?p(1682,null,e,t.policy?.name,md.getPolicyConfigurations().get(t.policy?.name)):null:p(1679,null)}var vR=X("requestService");function wR(e){return e.res.statusCode&&e.res.statusCode>=200&&e.res.statusCode<300||e.res.statusCode===1223}function bR(e){return e.res.statusCode===204}async function yR(e){if(!wR(e))throw new Error("Server returned "+e.res.statusCode);if(bR(e))return null;const r=(await i2(e.stream)).toString();try{return JSON.parse(r)}catch(i){throw i.message+=`:
`+r,i}}var v1;function kR(e){const t=fr.as(va.Configuration),r=v1;v1={id:"http",order:15,title:p(2066,null),type:"object",scope:e,properties:{"http.proxy":{type:"string",pattern:"^(https?|socks|socks4a?|socks5h?)://([^:]*(:[^@]*)?@)?([^:]+|\\[[:0-9a-fA-F]+\\])(:\\d+)?/?$|^$",markdownDescription:p(2067,null),restricted:!0},"http.proxyStrictSSL":{type:"boolean",default:!0,description:p(2068,null),restricted:!0},"http.proxyKerberosServicePrincipal":{type:"string",markdownDescription:p(2069,null),restricted:!0},"http.noProxy":{type:"array",items:{type:"string"},markdownDescription:p(2070,null),restricted:!0},"http.proxyAuthorization":{type:["null","string"],default:null,markdownDescription:p(2071,null),restricted:!0},"http.proxySupport":{type:"string",enum:["off","on","fallback","override"],enumDescriptions:[p(2072,null),p(2073,null),p(2074,null),p(2075,null)],default:"override",description:p(2076,null),restricted:!0},"http.systemCertificates":{type:"boolean",default:!0,description:p(2077,null),restricted:!0},"http.experimental.systemCertificatesV2":{type:"boolean",tags:["experimental"],default:!1,description:p(2078,null),restricted:!0},"http.electronFetch":{type:"boolean",default:!1,description:p(2079,null),restricted:!0}}},t.updateConfigurations({add:[v1],remove:r?[r]:[]})}kR(1);var hl;(function(e){e[e.STORAGE_DOES_NOT_EXIST=0]="STORAGE_DOES_NOT_EXIST",e[e.STORAGE_IN_MEMORY=1]="STORAGE_IN_MEMORY"})(hl||(hl={}));var Li;(function(e){e[e.None=0]="None",e[e.Initialized=1]="Initialized",e[e.Closed=2]="Closed"})(Li||(Li={}));var z_=class P3 extends ae{static{this.a=100}constructor(t,r=Object.create(null)){super(),this.r=t,this.s=r,this.b=this.B(new Oc),this.onDidChangeStorage=this.b.event,this.c=Li.None,this.f=new Map,this.g=this.B(new Rh(P3.a)),this.h=new Set,this.j=new Map,this.m=void 0,this.n=[],this.t()}t(){this.B(this.r.onDidChangeItemsExternal(t=>this.u(t)))}u(t){this.b.pause();try{t.changed?.forEach((r,i)=>this.w(i,r)),t.deleted?.forEach(r=>this.w(r,void 0))}finally{this.b.resume()}}w(t,r){if(this.c===Li.Closed)return;let i=!1;Lt(r)?i=this.f.delete(t):this.f.get(t)!==r&&(this.f.set(t,r),i=!0),i&&this.b.fire({key:t,external:!0})}get items(){return this.f}get size(){return this.f.size}async init(){this.c===Li.None&&(this.c=Li.Initialized,this.s.hint!==hl.STORAGE_DOES_NOT_EXIST&&(this.f=await this.r.getItems()))}get(t,r){const i=this.f.get(t);return Lt(i)?r:i}getBoolean(t,r){const i=this.get(t);return Lt(i)?r:i==="true"}getNumber(t,r){const i=this.get(t);return Lt(i)?r:parseInt(i,10)}getObject(t,r){const i=this.get(t);return Lt(i)?r:i5(i)}async set(t,r,i=!1){if(this.c===Li.Closed)return;if(Lt(r))return this.delete(t,i);const s=Dt(r)||Array.isArray(r)?I2(r):String(r);if(this.f.get(t)!==s)return this.f.set(t,s),this.j.set(t,s),this.h.delete(t),this.b.fire({key:t,external:i}),this.D()}async delete(t,r=!1){if(!(this.c===Li.Closed||!this.f.delete(t)))return this.h.has(t)||this.h.add(t),this.j.delete(t),this.b.fire({key:t,external:r}),this.D()}async optimize(){if(this.c!==Li.Closed)return await this.flush(0),this.r.optimize()}async close(){return this.m||(this.m=this.y()),this.m}async y(){this.c=Li.Closed;try{await this.D(0)}catch{}await this.r.close(()=>this.f)}get z(){return this.j.size>0||this.h.size>0}async C(){if(!this.z)return;const t={insert:this.j,delete:this.h};return this.h=new Set,this.j=new Map,this.r.updateItems(t).finally(()=>{if(!this.z)for(;this.n.length;)this.n.pop()?.()})}async flush(t){if(!(this.c===Li.Closed||this.m))return this.D(t)}async D(t){return this.s.hint===hl.STORAGE_IN_MEMORY?this.C():this.g.trigger(()=>this.C(),t)}async whenFlushed(){if(this.z)return new Promise(t=>this.n.push(t))}isInMemory(){return this.s.hint===hl.STORAGE_IN_MEMORY}},w1=X("environmentService"),__=w1,h7=X("IUriIdentityService"),d7;(function(e){e.Settings="settings",e.Keybindings="keybindings",e.Snippets="snippets",e.Tasks="tasks",e.Extensions="extensions",e.GlobalState="globalState"})(d7||(d7={}));function xR(e){const t=e;return!!(t&&typeof t=="object"&&typeof t.id=="string"&&typeof t.isDefault=="boolean"&&typeof t.name=="string"&&k.isUri(t.location)&&k.isUri(t.globalStorageHome)&&k.isUri(t.settingsResource)&&k.isUri(t.keybindingsResource)&&k.isUri(t.tasksResource)&&k.isUri(t.snippetsHome)&&k.isUri(t.extensionsResource))}var ER=X("IUserDataProfilesService");function vd(e,t,r,i,s,n){return{id:e,name:t,location:r,isDefault:!1,shortName:s?.shortName,icon:s?.icon,globalStorageHome:n&&s?.useDefaultFlags?.globalState?n.globalStorageHome:Mt(r,"globalStorage"),settingsResource:n&&s?.useDefaultFlags?.settings?n.settingsResource:Mt(r,"settings.json"),keybindingsResource:n&&s?.useDefaultFlags?.keybindings?n.keybindingsResource:Mt(r,"keybindings.json"),tasksResource:n&&s?.useDefaultFlags?.tasks?n.tasksResource:Mt(r,"tasks.json"),snippetsHome:n&&s?.useDefaultFlags?.snippets?n.snippetsHome:Mt(r,"snippets"),extensionsResource:n&&s?.useDefaultFlags?.extensions?n.extensionsResource:Mt(r,"extensions.json"),cacheHome:Mt(i,e),useDefaultFlags:s?.useDefaultFlags,isTransient:s?.transient,workspaces:s?.workspaces}}var f7=class extends ae{static{this.b="userDataProfiles"}static{this.c="profileAssociations"}get defaultProfile(){return this.profiles[0]}get profiles(){return[...this.D.profiles,...this.s.profiles]}constructor(t,r,i,s){super(),this.t=t,this.u=r,this.y=i,this.z=s,this.f=!0,this.h=this.B(new T),this.onDidChangeProfiles=this.h.event,this.j=this.B(new T),this.onWillCreateProfile=this.j.event,this.m=this.B(new T),this.onWillRemoveProfile=this.m.event,this.n=this.B(new T),this.onDidResetWorkspaces=this.n.event,this.r=new Map,this.s={profiles:[],emptyWindows:new Map},this.profilesHome=Mt(this.t.userRoamingDataHome,"profiles"),this.g=Mt(this.t.cacheHome,"CachedProfilesData")}init(){this.C=void 0}setEnablement(t){this.f!==t&&(this.C=void 0,this.f=t)}isEnabled(){return this.f}get D(){if(!this.C){const t=this.F(),r=[t];if(this.f)try{for(const s of this.P()){if(!s.name||!Me(s.name)||!s.location){this.z.warn("Skipping the invalid stored profile",s.location||s.name);continue}r.push(vd(es(s.location),s.name,s.location,this.g,{shortName:s.shortName,icon:s.icon,useDefaultFlags:s.useDefaultFlags},t))}}catch(s){this.z.error(s)}const i=new Map;if(r.length)try{const s=this.R();if(s.workspaces)for(const[n,o]of Object.entries(s.workspaces)){const a=k.parse(n),c=r.find(l=>l.id===o);if(c){const l=c.workspaces?c.workspaces.slice(0):[];l.push(a),c.workspaces=l}}if(s.emptyWindows)for(const[n,o]of Object.entries(s.emptyWindows)){const a=r.find(c=>c.id===o);a&&i.set(n,a)}}catch(s){this.z.error(s)}this.C={profiles:r,emptyWindows:i}}return this.C}F(){const t=vd("__default__profile__",p(2458,null),this.t.userRoamingDataHome,this.g);return{...t,extensionsResource:this.U()??t.extensionsResource,isDefault:!0}}async createTransientProfile(t){const r="Temp",i=new RegExp(`${fn(r)}\\s(\\d+)`);let s=0;for(const o of this.profiles){const a=i.exec(o.name),c=a?parseInt(a[1]):0;s=c>s?c:s}const n=`${r} ${s+1}`;return this.createProfile(As(ir()).toString(16),n,{transient:!0},t)}async createNamedProfile(t,r,i){return this.createProfile(As(ir()).toString(16),t,r,i)}async createProfile(t,r,i,s){if(!this.f)throw new Error("Profiles are disabled in the current environment.");return await this.G(t,r,i,s)}async G(t,r,i,s){if(!Me(r)||!r)throw new Error("Name of the profile is mandatory and must be of type `string`");let n=this.r.get(r);return n||(n=(async()=>{try{if(this.profiles.find(u=>u.id===t||!u.isTransient&&!i?.transient&&u.name===r))throw new Error(`Profile with ${r} name already exists`);const a=s?this.H(s):void 0;k.isUri(a)&&(i={...i,workspaces:[a]});const c=vd(t,r,Mt(this.profilesHome,t),this.g,i,this.defaultProfile);await this.u.createFolder(c.location);const l=[];return this.j.fire({profile:c,join(u){l.push(u)}}),await ra.settled(l),a&&!k.isUri(a)&&this.M(a,c,!!c.isTransient),this.J([c],[],[]),c}finally{this.r.delete(r)}})(),this.r.set(r,n)),n}async updateProfile(t,r){if(!this.f)throw new Error("Profiles are disabled in the current environment.");const i=[];for(const n of this.profiles){let o;if(t.id===n.id)n.isDefault?r.workspaces&&(o=n,o.workspaces=r.workspaces):o=vd(n.id,r.name??n.name,n.location,this.g,{shortName:r.shortName??n.shortName,icon:r.icon===null?void 0:r.icon??n.icon,transient:r.transient??n.isTransient,useDefaultFlags:r.useDefaultFlags??n.useDefaultFlags,workspaces:r.workspaces??n.workspaces},this.defaultProfile);else if(r.workspaces){const a=n.workspaces?.filter(c=>!r.workspaces?.some(l=>this.y.extUri.isEqual(c,l)));n.workspaces?.length!==a?.length&&(o=n,o.workspaces=a)}o&&i.push(o)}if(!i.length)throw t.isDefault?new Error("Cannot update default profile"):new Error(`Profile '${t.name}' does not exist`);this.J([],[],i);const s=this.profiles.find(n=>n.id===t.id);if(!s)throw new Error(`Profile '${t.name}' was not updated`);return s}async removeProfile(t){if(!this.f)throw new Error("Profiles are disabled in the current environment.");if(t.isDefault)throw new Error("Cannot remove default profile");const r=this.profiles.find(s=>s.id===t.id);if(!r)throw new Error(`Profile '${t.name}' does not exist`);const i=[];this.m.fire({profile:r,join(s){i.push(s)}});try{await Promise.allSettled(i)}catch(s){this.z.error(s)}this.J([],[r],[]);try{await this.u.del(r.cacheHome,{recursive:!0})}catch(s){kT(s)!==1&&this.z.error(s)}}async setProfileForWorkspace(t,r){if(!this.f)throw new Error("Profiles are disabled in the current environment.");const i=this.profiles.find(n=>n.id===r.id);if(!i)throw new Error(`Profile '${r.name}' does not exist`);const s=this.H(t);if(k.isUri(s)){const n=i.workspaces?[...i.workspaces]:[];n.some(o=>this.y.extUri.isEqual(o,s))||(n.push(s),await this.updateProfile(i,{workspaces:n}))}else this.M(s,i,!1),this.N(this.profiles)}unsetWorkspace(t,r=!1){if(!this.f)throw new Error("Profiles are disabled in the current environment.");const i=this.H(t);if(k.isUri(i)){const s=this.getProfileForWorkspace(t);s&&this.updateProfile(s,{workspaces:s.workspaces?.filter(n=>!this.y.extUri.isEqual(n,i))})}else this.M(i,void 0,r),this.N(this.profiles)}async resetWorkspaces(){this.s.emptyWindows.clear(),this.D.emptyWindows.clear();for(const t of this.profiles)t.workspaces=void 0;this.J([],[],this.profiles),this.n.fire()}async cleanUp(){if(this.f&&await this.u.exists(this.profilesHome)){const t=await this.u.resolve(this.profilesHome);await Promise.all((t.children||[]).filter(r=>r.isDirectory&&this.profiles.every(i=>!this.y.extUri.isEqual(i.location,r.resource))).map(r=>this.u.del(r.resource,{recursive:!0})))}}async cleanUpTransientProfiles(){if(!this.f)return;const t=this.s.profiles.filter(r=>!this.I(r));await Promise.allSettled(t.map(r=>this.removeProfile(r)))}getProfileForWorkspace(t){const r=this.H(t);return k.isUri(r)?this.profiles.find(i=>i.workspaces?.some(s=>this.y.extUri.isEqual(s,r))):this.D.emptyWindows.get(r)??this.s.emptyWindows.get(r)}H(t){return VA(t)?t.uri:qA(t)?t.configPath:t.id}I(t){return!!(t.workspaces?.length||[...this.D.emptyWindows.values()].some(r=>this.y.extUri.isEqual(r.location,t.location))||[...this.s.emptyWindows.values()].some(r=>this.y.extUri.isEqual(r.location,t.location)))}J(t,r,i){const s=[...this.profiles,...t],n=this.s.profiles;this.s.profiles=[];const o=[];for(let a of s){if(r.some(c=>a.id===c.id)){for(const c of[...this.D.emptyWindows.keys()])a.id===this.D.emptyWindows.get(c)?.id&&this.D.emptyWindows.delete(c);continue}if(!a.isDefault){a=i.find(l=>a.id===l.id)??a;const c=n.find(l=>a.id===l.id);if(a.isTransient)this.s.profiles.push(a);else if(c){for(const[l,u]of this.s.emptyWindows.entries())if(a.id===u.id){this.s.emptyWindows.delete(l),this.D.emptyWindows.set(l,a);break}}}a.workspaces?.length===0&&(a.workspaces=void 0),o.push(a)}this.N(o),this.L(t,r,i)}L(t,r,i){this.h.fire({added:t,removed:r,updated:i,all:this.profiles})}M(t,r,i){i=r?.isTransient?!0:i,i?r?this.s.emptyWindows.set(t,r):this.s.emptyWindows.delete(t):(this.s.emptyWindows.delete(t),r?this.D.emptyWindows.set(t,r):this.D.emptyWindows.delete(t))}N(t){const r=[],i={},s={};for(const n of t)if(!n.isTransient&&(n.isDefault||r.push({location:n.location,name:n.name,shortName:n.shortName,icon:n.icon,useDefaultFlags:n.useDefaultFlags}),n.workspaces))for(const o of n.workspaces)i[o.toString()]=n.id;for(const[n,o]of this.D.emptyWindows.entries())s[n.toString()]=o.id;this.S({workspaces:i,emptyWindows:s}),this.Q(r),this.C=void 0}O(t){const r={},i=this.F();if(t.workspaces)for(const[n,o]of Object.entries(t.workspaces)){const a=k.parse(o);r[n]=this.y.extUri.isEqual(a,i.location)?i.id:this.y.extUri.basename(a)}const s={};if(t.emptyWindows)for(const[n,o]of Object.entries(t.emptyWindows)){const a=k.parse(o);s[n]=this.y.extUri.isEqual(a,i.location)?i.id:this.y.extUri.basename(a)}return{workspaces:r,emptyWindows:s}}P(){return[]}Q(t){throw new Error("not implemented")}R(){return{}}S(t){throw new Error("not implemented")}U(){}};f7=__decorate([__param(0,w1),__param(1,bT),__param(2,h7),__param(3,Ne)],f7);var SR="__$__isNewStorageMarker",wd="__$__targetStorageMarker",p7=X("storageService"),wa;(function(e){e[e.NONE=0]="NONE",e[e.SHUTDOWN=1]="SHUTDOWN"})(wa||(wa={}));var g7;(function(e){e[e.APPLICATION=-1]="APPLICATION",e[e.PROFILE=0]="PROFILE",e[e.WORKSPACE=1]="WORKSPACE"})(g7||(g7={}));var m7;(function(e){e[e.USER=0]="USER",e[e.MACHINE=1]="MACHINE"})(m7||(m7={}));function $R(e){const t=e.get(wd);if(t)try{return JSON.parse(t)}catch{}return Object.create(null)}var V_=class I3 extends ae{static{this.a=60*1e3}constructor(t={flushInterval:I3.a}){super(),this.m=t,this.b=this.B(new Oc),this.c=this.B(new Oc),this.onDidChangeTarget=this.c.event,this.f=this.B(new T),this.onWillSaveState=this.f.event,this.h=this.B(new Cs(()=>this.n(),this.m.flushInterval)),this.j=this.B(new ks),this.C=void 0,this.F=void 0,this.H=void 0}onDidChangeValue(t,r,i){return Qe.filter(this.b.event,s=>s.scope===t&&(r===void 0||s.key===r),i)}n(){this.j.value=B4(()=>{this.r()&&this.flush(),this.h.schedule()})}r(){return!0}t(){Si([this.j,this.h])}initialize(){return this.g||(this.g=(async()=>{Nt("code/willInitStorage");try{await this.O()}finally{Nt("code/didInitStorage")}this.h.schedule()})()),this.g}u(t,r){const{key:i,external:s}=r;if(i===wd){switch(t){case-1:this.H=void 0;break;case 0:this.F=void 0;break;case 1:this.C=void 0;break}this.c.fire({scope:t})}else this.b.fire({scope:t,key:i,target:this.J(t)[i],external:s})}w(t){this.f.fire({reason:t})}get(t,r,i){return this.P(r)?.get(t,i)}getBoolean(t,r,i){return this.P(r)?.getBoolean(t,i)}getNumber(t,r,i){return this.P(r)?.getNumber(t,i)}getObject(t,r,i){return this.P(r)?.getObject(t,i)}storeAll(t,r){this.y(()=>{for(const i of t)this.store(i.key,i.value,i.scope,i.target,r)})}store(t,r,i,s,n=!1){if(Lt(r)){this.remove(t,i,n);return}this.y(()=>{this.z(t,i,s),this.P(i)?.set(t,r,n)})}remove(t,r,i=!1){this.y(()=>{this.z(t,r,void 0),this.P(r)?.delete(t,i)})}y(t){this.b.pause(),this.c.pause();try{t()}finally{this.b.resume(),this.c.resume()}}keys(t,r){const i=[],s=this.J(t);for(const n of Object.keys(s))s[n]===r&&i.push(n);return i}z(t,r,i,s=!1){const n=this.J(r);typeof i=="number"?n[t]!==i&&(n[t]=i,this.P(r)?.set(wd,JSON.stringify(n),s)):typeof n[t]=="number"&&(delete n[t],this.P(r)?.set(wd,JSON.stringify(n),s))}get D(){return this.C||(this.C=this.L(1)),this.C}get G(){return this.F||(this.F=this.L(0)),this.F}get I(){return this.H||(this.H=this.L(-1)),this.H}J(t){switch(t){case-1:return this.I;case 0:return this.G;default:return this.D}}L(t){const r=this.P(t);return r?$R(r):Object.create(null)}isNew(t){return this.getBoolean(SR,t)===!0}async flush(t=wa.NONE){this.f.fire({reason:t});const r=this.P(-1),i=this.P(0),s=this.P(1);switch(t){case wa.NONE:await ra.settled([r?.whenFlushed()??Promise.resolve(),i?.whenFlushed()??Promise.resolve(),s?.whenFlushed()??Promise.resolve()]);break;case wa.SHUTDOWN:await ra.settled([r?.flush(0)??Promise.resolve(),i?.flush(0)??Promise.resolve(),s?.flush(0)??Promise.resolve()]);break}}async log(){const t=this.P(-1)?.items??new Map,r=this.P(0)?.items??new Map,i=this.P(1)?.items??new Map;return CR(t,r,i,this.Q(-1)??"",this.Q(0)??"",this.Q(1)??"")}async optimize(t){return await this.flush(),this.P(t)?.optimize()}async switch(t,r){return this.w(wa.NONE),xR(t)?this.R(t,r):this.S(t,r)}M(t,r){return!(t.id===r.id||v7(r)&&v7(t))}N(t,r,i){this.y(()=>{const s=new Set;for(const[n,o]of t)s.add(n),r.get(n)!==o&&this.u(i,{key:n,external:!0});for(const[n]of r.items)s.has(n)||this.u(i,{key:n,external:!0})})}};function v7(e){return e.isDefault||!!e.useDefaultFlags?.globalState}async function CR(e,t,r,i,s,n){const o=v=>{try{return JSON.parse(v)}catch{return v}},a=new Map,c=new Map;e.forEach((v,x)=>{a.set(x,v),c.set(x,o(v))});const l=new Map,u=new Map;t.forEach((v,x)=>{l.set(x,v),u.set(x,o(v))});const h=new Map,d=new Map;r.forEach((v,x)=>{h.set(x,v),d.set(x,o(v))}),console.group(i!==s?`Storage: Application (path: ${i})`:`Storage: Application & Profile (path: ${i}, default profile)`);const f=[];if(a.forEach((v,x)=>{f.push({key:x,value:v})}),console.table(f),console.groupEnd(),console.log(c),i!==s){console.group(`Storage: Profile (path: ${s}, profile specific)`);const v=[];l.forEach((x,$)=>{v.push({key:$,value:x})}),console.table(v),console.groupEnd(),console.log(u)}console.group(`Storage: Workspace (path: ${n})`);const g=[];h.forEach((v,x)=>{g.push({key:x,value:v})}),console.table(g),console.groupEnd(),console.log(d)}var q_=new J("chatSessionResponseVote","",{type:"string",description:p(4796,null)}),G_=new J("chatSessionResponseDetectedAgentOrCommand",!1,{type:"boolean",description:p(4797,null)}),J_=new J("chatResponseSupportsIssueReporting",!1,{type:"boolean",description:p(4798,null)}),Q_=new J("chatSessionResponseFiltered",!1,{type:"boolean",description:p(4799,null)}),Y_=new J("chatSessionResponseError",!1,{type:"boolean",description:p(4800,null)}),X_=new J("chatSessionRequestInProgress",!1,{type:"boolean",description:p(4801,null)}),Z_=new J("chatResponse",!1,{type:"boolean",description:p(4802,null)}),K_=new J("chatRequest",!1,{type:"boolean",description:p(4803,null)}),eW=new J("chatItemId","",{type:"string",description:p(4804,null)}),tW=new J("chatLastItemId",[],{type:"string",description:p(4805,null)}),rW=new J("chatEditApplied",!1,{type:"boolean",description:p(4806,null)}),iW=new J("chatInputHasText",!1,{type:"boolean",description:p(4807,null)}),sW=new J("chatInputHasFocus",!1,{type:"boolean",description:p(4808,null)}),nW=new J("inChatInput",!1,{type:"boolean",description:p(4809,null)}),oW=new J("inChat",!1,{type:"boolean",description:p(4810,null)}),PR=new J("chatIsEnabled",!1,{type:"boolean",description:p(4811,null)}),IR=new J("chatPanelParticipantRegistered",!1,{type:"boolean",description:p(4812,null)}),aW=new J("chatExtensionInvalid",!1,{type:"boolean",description:p(4813,null)}),cW=new J("chatCursorAtTop",!1),lW=new J("chatInputHasAgent",!1),uW=new J("chatLocation",void 0),hW=new J("quickChatHasFocus",!1,{type:"boolean",description:p(4814,null)}),dW=new J("chatModelsAreUserSelectable",!1,{type:"boolean",description:p(4815,null)}),fW=new J("chatParticipantSupportsModelPicker",!0,{type:"boolean",description:p(4816,null)}),pW=new J("chatEditingEnabled",!1),dl,Ir;(function(e){e.Panel="panel",e.Terminal="terminal",e.Notebook="notebook",e.Editor="editor"})(Ir||(Ir={})),function(e){function t(r){switch(r){case"panel":return e.Panel;case"terminal":return e.Terminal;case"notebook":return e.Notebook;case"editor":return e.Editor}return e.Panel}e.fromRaw=t}(Ir||(Ir={}));var gW=X("chatAgentService"),w7=class{static{this.AGENT_LEADER="@"}constructor(t){this.g=t,this.b=new Map,this.d=new T,this.onDidChangeAgents=this.d.event,this.h=new Map,this.j=new Map,this.e=PR.bindTo(this.g),this.f=IR.bindTo(this.g)}registerAgent(t,r){if(this.getAgent(t))throw new Error(`Agent already registered: ${JSON.stringify(t)}`);r.isDefault&&this.f.set(!0);const s=this,n=r.slashCommands;r={...r,get slashCommands(){return n.filter(a=>!a.when||s.g.contextMatchesRules(nr.deserialize(a.when)))}};const o={data:r};return this.b.set(t,o),this.d.fire(void 0),me(()=>{this.b.delete(t),r.isDefault&&this.f.set(!1),this.d.fire(void 0)})}registerAgentImplementation(t,r){const i=this.b.get(t);if(!i)throw new Error(`Unknown agent: ${JSON.stringify(t)}`);if(i.impl)throw new Error(`Agent already has implementation: ${JSON.stringify(t)}`);return i.data.isDefault&&this.e.set(!0),i.impl=r,this.d.fire(new bd(i.data,r)),me(()=>{i.impl=void 0,this.d.fire(void 0),i.data.isDefault&&this.e.set(!1)})}registerDynamicAgent(t,r){t.isDynamic=!0;const i={data:t,impl:r};return this.b.set(t.id,i),this.d.fire(new bd(t,r)),me(()=>{this.b.delete(t.id),this.d.fire(void 0)})}registerAgentCompletionProvider(t,r){return this.h.set(t,r),{dispose:()=>{this.h.delete(t)}}}async getAgentCompletionItems(t,r,i){return await this.h.get(t)?.(r,i)??[]}updateAgent(t,r){const i=this.b.get(t);if(!i?.impl)throw new Error(`No activated agent with id ${JSON.stringify(t)} registered`);i.data.metadata={...i.data.metadata,...r},this.d.fire(new bd(i.data,i.impl))}getDefaultAgent(t){return PC(this.getActivatedAgents(),r=>!!r.isDefault&&r.locations.includes(t))}getContributedDefaultAgent(t){return this.getAgents().find(r=>!!r.isDefault&&r.locations.includes(t))}getSecondaryAgent(){return ci.find(this.b.values(),t=>!!t.data.metadata.isSecondary)?.data}getAgent(t){if(this.i(t))return this.b.get(t)?.data}i(t){const r=this.b.get(t);return!r?.data.when||this.g.contextMatchesRules(nr.deserialize(r.data.when))}getAgentByFullyQualifiedId(t){const r=ci.find(this.b.values(),i=>DR(i.data)===t)?.data;if(!(r&&!this.i(r.id)))return r}getAgents(){return Array.from(this.b.values()).map(t=>t.data).filter(t=>this.i(t.id))}getActivatedAgents(){return Array.from(this.b.values()).filter(t=>!!t.impl).filter(t=>this.i(t.data.id)).map(t=>new bd(t.data,t.impl))}getAgentsByName(t){return this.getAgents().filter(r=>r.name===t)}agentHasDupeName(t){const r=this.getAgent(t);return r?this.getAgentsByName(r.name).filter(i=>i.extensionId.value!==r.extensionId.value).length>0:!1}async invokeAgent(t,r,i,s,n){const o=this.b.get(t);if(!o?.impl)throw new Error(`No activated agent with id "${t}"`);return await o.impl.invoke(r,i,s,n)}async getFollowups(t,r,i,s,n){const o=this.b.get(t);if(!o?.impl)throw new Error(`No activated agent with id "${t}"`);return o.impl?.provideFollowups?o.impl.provideFollowups(r,i,s,n):[]}async getChatTitle(t,r,i){const s=this.b.get(t);if(!s?.impl)throw new Error(`No activated agent with id "${t}"`);if(s.impl?.provideChatTitle)return s.impl.provideChatTitle(r,i)}registerChatParticipantDetectionProvider(t,r){return this.j.set(t,r),me(()=>{this.j.delete(t)})}hasChatParticipantDetectionProviders(){return this.j.size>0}async detectAgentOrCommand(t,r,i,s){const n=ci.first(this.j.values());if(!n)return;const o=this.getAgents().reduce((u,h)=>{u.push({participant:h.id,disambiguation:h.disambiguation??[]});for(const d of h.slashCommands)u.push({participant:h.id,command:d.name,disambiguation:d.disambiguation??[]});return u},[]),a=await n.provideParticipantDetection(t,r,{...i,participants:o},s);if(!a)return;const c=this.getAgent(a.participant);if(!c)return;if(!a.command)return{agent:c};const l=c?.slashCommands.find(u=>u.name===a.command);if(l)return{agent:c,command:l}}};w7=__decorate([__param(0,b6)],w7);var bd=class{constructor(e,t){this.b=e,this.d=t}get id(){return this.b.id}get name(){return this.b.name??""}get fullName(){return this.b.fullName??""}get description(){return this.b.description??""}get extensionId(){return this.b.extensionId}get extensionPublisherId(){return this.b.extensionPublisherId}get extensionPublisherDisplayName(){return this.b.publisherDisplayName}get extensionDisplayName(){return this.b.extensionDisplayName}get isDefault(){return this.b.isDefault}get metadata(){return this.b.metadata}get slashCommands(){return this.b.slashCommands}get locations(){return this.b.locations}get disambiguation(){return this.b.disambiguation}async invoke(e,t,r,i){return this.d.invoke(e,t,r,i)}async provideFollowups(e,t,r,i){return this.d.provideFollowups?this.d.provideFollowups(e,t,r,i):[]}provideWelcomeMessage(e){if(this.d.provideWelcomeMessage)return this.d.provideWelcomeMessage(e)}provideSampleQuestions(e,t){if(this.d.provideSampleQuestions)return this.d.provideSampleQuestions(e,t)}toJSON(){return this.b}},vW=X("chatAgentNameService"),b7=class{static{dl=this}static{this.b="chat.participantNameRegistry"}constructor(t,r,i,s){if(this.g=r,this.h=i,this.i=s,this.e=ZT(this,Object.create(null)),this.f=!1,!t.chatParticipantRegistry)return;this.d=t.chatParticipantRegistry;const n=s.get(dl.b,-1);try{this.e.set(JSON.parse(n??"{}"),void 0)}catch{s.remove(dl.b,-1)}this.j()}j(){this.f||this.k().catch(t=>this.h.warn("Failed to fetch chat participant registry",t)).then(()=>br(5*60*1e3)).then(()=>this.j())}async k(){const t=await this.g.request({type:"GET",url:this.d},Ke.None);if(t.res.statusCode!==200)throw new Error("Could not get extensions report.");const r=await yR(t);if(!r||r.version!==1)throw new Error("Unexpected chat participant registry response.");const i=r.restrictedChatParticipants;this.e.set(i,void 0),this.i.store(dl.b,JSON.stringify(i),-1,1)}getAgentNameRestriction(t){const r=this.l(t.name,t).get(),i=!t.fullName||this.l(t.fullName.replace(/\s/g,""),t).get();return r&&i}l(t,r){return this.e.map(s=>s[t.toLowerCase()]).map(s=>s?s.some(n=>$i(n,n.includes(".")?r.extensionId.value:r.extensionPublisherId)):!0)}dispose(){this.f=!0}};b7=dl=__decorate([__param(0,ad),__param(1,vR),__param(2,Ne),__param(3,p7)],b7);function DR(e){return`${e.extensionId.value}.${e.id}`}function y7(){return Object.create(null)}var fo="**",b1="/",yd="[/\\\\]",kd="[^/\\\\]",AR=/\//g;function k7(e,t){switch(e){case 0:return"";case 1:return`${kd}*?`;default:return`(?:${yd}|${kd}+${yd}${t?`|${yd}${kd}+`:""})*?`}}function fl(e,t){if(!e)return[];const r=[];let i=!1,s=!1,n="";for(const o of e){switch(o){case t:if(!i&&!s){r.push(n),n="";continue}break;case"{":i=!0;break;case"}":i=!1;break;case"[":s=!0;break;case"]":s=!1;break}n+=o}return n&&r.push(n),r}function x7(e){if(!e)return"";let t="";const r=fl(e,b1);if(r.every(i=>i===fo))t=".*";else{let i=!1;r.forEach((s,n)=>{if(s===fo){if(i)return;t+=k7(2,n===r.length-1)}else{let o=!1,a="",c=!1,l="";for(const u of s){if(u!=="}"&&o){a+=u;continue}if(c&&(u!=="]"||!l)){let h;u==="-"?h=u:(u==="^"||u==="!")&&!l?h="^":u===b1?h="":h=fn(u),l+=h;continue}switch(u){case"{":o=!0;continue;case"[":c=!0;continue;case"}":{const d=`(?:${fl(a,",").map(f=>x7(f)).join("|")})`;t+=d,o=!1,a="";break}case"]":{t+="["+l+"]",c=!1,l="";break}case"?":t+=kd;continue;case"*":t+=k7(1);continue;default:t+=fn(u)}}n<r.length-1&&(r[n+1]!==fo||n+2<r.length)&&(t+=yd)}i=s===fo})}return t}var TR=/^\*\*\/\*\.[\w\.-]+$/,RR=/^\*\*\/([\w\.-]+)\/?$/,LR=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,NR=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,FR=/^\*\*((\/[\w\.-]+)+)\/?$/,OR=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,E7=new Rc(1e4),S7=function(){return!1},os=function(){return null};function y1(e,t){if(!e)return os;let r;typeof e!="string"?r=e.pattern:r=e,r=r.trim();const i=`${r}_${!!t.trimForExclusions}`;let s=E7.get(i);if(s)return $7(s,e);let n;return TR.test(r)?s=MR(r.substr(4),r):(n=RR.exec(k1(r,t)))?s=jR(n[1],r):(t.trimForExclusions?NR:LR).test(r)?s=UR(r,t):(n=FR.exec(k1(r,t)))?s=C7(n[1].substr(1),r,!0):(n=OR.exec(k1(r,t)))?s=C7(n[1],r,!1):s=HR(r),E7.set(i,s),$7(s,e)}function $7(e,t){if(typeof t=="string")return e;const r=function(i,s){return ro(i,t.base,!Ot)?e(OP(i.substr(t.base.length),$t),s):null};return r.allBasenames=e.allBasenames,r.allPaths=e.allPaths,r.basenames=e.basenames,r.patterns=e.patterns,r}function k1(e,t){return t.trimForExclusions&&e.endsWith("/**")?e.substr(0,e.length-2):e}function MR(e,t){return function(r,i){return typeof r=="string"&&r.endsWith(e)?t:null}}function jR(e,t){const r=`/${e}`,i=`\\${e}`,s=function(o,a){return typeof o!="string"?null:a?a===e?t:null:o===e||o.endsWith(r)||o.endsWith(i)?t:null},n=[e];return s.basenames=n,s.patterns=[t],s.allBasenames=n,s}function UR(e,t){const r=D7(e.slice(1,-1).split(",").map(a=>y1(a,t)).filter(a=>a!==os),e),i=r.length;if(!i)return os;if(i===1)return r[0];const s=function(a,c){for(let l=0,u=r.length;l<u;l++)if(r[l](a,c))return e;return null},n=r.find(a=>!!a.allBasenames);n&&(s.allBasenames=n.allBasenames);const o=r.reduce((a,c)=>c.allPaths?a.concat(c.allPaths):a,[]);return o.length&&(s.allPaths=o),s}function C7(e,t,r){const i=$t===He.sep,s=i?e:e.replace(AR,$t),n=$t+s,o=He.sep+e;let a;return r?a=function(c,l){return typeof c=="string"&&(c===s||c.endsWith(n)||!i&&(c===e||c.endsWith(o)))?t:null}:a=function(c,l){return typeof c=="string"&&(c===s||!i&&c===e)?t:null},a.allPaths=[(r?"*/":"./")+e],a}function HR(e){try{const t=new RegExp(`^${x7(e)}$`);return function(r){return t.lastIndex=0,typeof r=="string"&&t.test(r)?e:null}}catch{return os}}function ba(e,t,r){return!e||typeof t!="string"?!1:Ni(e)(t,void 0,r)}function Ni(e,t={}){if(!e)return S7;if(typeof e=="string"||BR(e)){const r=y1(e,t);if(r===os)return S7;const i=function(s,n){return!!r(s,n)};return r.allBasenames&&(i.allBasenames=r.allBasenames),r.allPaths&&(i.allPaths=r.allPaths),i}return zR(e,t)}function BR(e){const t=e;return t?typeof t.base=="string"&&typeof t.pattern=="string":!1}function P7(e){return e.allBasenames||[]}function I7(e){return e.allPaths||[]}function zR(e,t){const r=D7(Object.getOwnPropertyNames(e).map(a=>_R(a,e[a],t)).filter(a=>a!==os)),i=r.length;if(!i)return os;if(!r.some(a=>!!a.requiresSiblings)){if(i===1)return r[0];const a=function(u,h){let d;for(let f=0,g=r.length;f<g;f++){const v=r[f](u,h);if(typeof v=="string")return v;mn(v)&&(d||(d=[]),d.push(v))}return d?(async()=>{for(const f of d){const g=await f;if(typeof g=="string")return g}return null})():null},c=r.find(u=>!!u.allBasenames);c&&(a.allBasenames=c.allBasenames);const l=r.reduce((u,h)=>h.allPaths?u.concat(h.allPaths):u,[]);return l.length&&(a.allPaths=l),a}const s=function(a,c,l){let u,h;for(let d=0,f=r.length;d<f;d++){const g=r[d];g.requiresSiblings&&l&&(c||(c=St(a)),u||(u=c.substr(0,c.length-Sh(a).length)));const v=g(a,c,u,l);if(typeof v=="string")return v;mn(v)&&(h||(h=[]),h.push(v))}return h?(async()=>{for(const d of h){const f=await d;if(typeof f=="string")return f}return null})():null},n=r.find(a=>!!a.allBasenames);n&&(s.allBasenames=n.allBasenames);const o=r.reduce((a,c)=>c.allPaths?a.concat(c.allPaths):a,[]);return o.length&&(s.allPaths=o),s}function _R(e,t,r){if(t===!1)return os;const i=y1(e,r);if(i===os)return os;if(typeof t=="boolean")return i;if(t){const s=t.when;if(typeof s=="string"){const n=(o,a,c,l)=>{if(!l||!i(o,a))return null;const u=s.replace("$(basename)",()=>c),h=l(u);return mn(h)?h.then(d=>d?e:null):h?e:null};return n.requiresSiblings=!0,n}}return i}function D7(e,t){const r=e.filter(a=>!!a.basenames);if(r.length<2)return e;const i=r.reduce((a,c)=>{const l=c.basenames;return l?a.concat(l):a},[]);let s;if(t){s=[];for(let a=0,c=i.length;a<c;a++)s.push(t)}else s=r.reduce((a,c)=>{const l=c.patterns;return l?a.concat(l):a},[]);const n=function(a,c){if(typeof a!="string")return null;if(!c){let u;for(u=a.length;u>0;u--){const h=a.charCodeAt(u-1);if(h===47||h===92)break}c=a.substr(u)}const l=i.indexOf(c);return l!==-1?s[l]:null};n.basenames=i,n.patterns=s,n.allBasenames=i;const o=e.filter(a=>!a.basenames);return o.push(n),o}function A7(e,t){return Xi(e,t,(r,i)=>typeof r=="string"&&typeof i=="string"?r===i:typeof r!="string"&&typeof i!="string"?r.base===i.base&&r.pattern===i.pattern:!1)}var WR=X("notebookDocumentService"),x1=["W","X","Y","Z","a","b","c","d","e","f"],VR=new RegExp(`^[${x1.join("")}]+`),T7=7;function R7(e){if(e.scheme!==Q.vscodeNotebookCell)return;const t=e.fragment.indexOf("s");if(t<0)return;const r=parseInt(e.fragment.substring(0,t).replace(VR,""),T7),i=W4(e.fragment.substring(t+1)).toString();if(!isNaN(r))return{handle:r,notebook:e.with({scheme:i,fragment:null})}}function qR(e,t){const r=t.toString(T7),s=`${r.length<x1.length?x1[r.length-1]:"z"}${r}s${Mh(re.fromString(e.scheme),!0,!0)}`;return e.with({scheme:Q.vscodeNotebookCell,fragment:s})}function GR(e){if(e.scheme!==Q.vscodeNotebookMetadata)return;const t=W4(e.fragment).toString();return e.with({scheme:t,fragment:null})}function JR(e){const t=`${Mh(re.fromString(e.scheme),!0,!0)}`;return e.with({scheme:Q.vscodeNotebookMetadata,fragment:t})}var QR=class{constructor(){this.a=new rr}getNotebook(e){if(e.scheme===Q.vscodeNotebookCell){const t=R7(e);if(t){const r=this.a.get(t.notebook);if(r)return r}}return this.a.get(e)}addNotebookDocument(e){this.a.set(e.uri,e)}removeNotebookDocument(e){this.a.delete(e.uri)}};Be(WR,QR,1);var ya;(function(e){e[e.Markup=1]="Markup",e[e.Code=2]="Code"})(ya||(ya={}));var bW=["application/json","application/javascript","text/html","image/svg+xml",Ns.latex,Ns.markdown,"image/png","image/jpeg",Ns.text],yW=[Ns.latex,Ns.markdown,"application/json","text/html","image/svg+xml","image/png","image/jpeg",Ns.text],L7;(function(e){e[e.Running=1]="Running",e[e.Idle=2]="Idle"})(L7||(L7={}));var pl;(function(e){e[e.Unconfirmed=1]="Unconfirmed",e[e.Pending=2]="Pending",e[e.Executing=3]="Executing"})(pl||(pl={}));var N7;(function(e){e[e.Unconfirmed=1]="Unconfirmed",e[e.Pending=2]="Pending",e[e.Executing=3]="Executing"})(N7||(N7={}));var F7;(function(e){e[e.WithHardKernelDependency=0]="WithHardKernelDependency",e[e.WithOptionalKernelDependency=1]="WithOptionalKernelDependency",e[e.Pure=2]="Pure",e[e.Never=3]="Never"})(F7||(F7={}));var O7;(function(e){e.Always="always",e.Never="never",e.Optional="optional"})(O7||(O7={}));var Fi;(function(e){e[e.ModelChange=1]="ModelChange",e[e.Move=2]="Move",e[e.ChangeCellLanguage=5]="ChangeCellLanguage",e[e.Initialize=6]="Initialize",e[e.ChangeCellMetadata=7]="ChangeCellMetadata",e[e.Output=8]="Output",e[e.OutputItem=9]="OutputItem",e[e.ChangeCellContent=10]="ChangeCellContent",e[e.ChangeDocumentMetadata=11]="ChangeDocumentMetadata",e[e.ChangeCellInternalMetadata=12]="ChangeCellInternalMetadata",e[e.ChangeCellMime=13]="ChangeCellMime",e[e.Unknown=100]="Unknown"})(Fi||(Fi={}));var M7;(function(e){e[e.Handle=0]="Handle",e[e.Index=1]="Index"})(M7||(M7={}));var j7;(function(e){e[e.Replace=1]="Replace",e[e.Output=2]="Output",e[e.Metadata=3]="Metadata",e[e.CellLanguage=4]="CellLanguage",e[e.DocumentMetadata=5]="DocumentMetadata",e[e.Move=6]="Move",e[e.OutputItems=7]="OutputItems",e[e.PartialMetadata=8]="PartialMetadata",e[e.PartialInternalMetadata=9]="PartialInternalMetadata"})(j7||(j7={}));var U7;(function(e){e.scheme=Q.vscodeNotebookMetadata;function t(i){return JR(i)}e.generate=t;function r(i){return GR(i)}e.parse=r})(U7||(U7={}));var H7;(function(e){e.scheme=Q.vscodeNotebookCell;function t(a,c){return qR(a,c)}e.generate=t;function r(a){return R7(a)}e.parse=r;function i(a,c){return a.with({scheme:Q.vscodeNotebookCellOutput,fragment:`op${c??""},${a.scheme!==Q.file?a.scheme:""}`})}e.generateCellOutputUri=i;function s(a){if(a.scheme!==Q.vscodeNotebookCellOutput)return;const c=/^op([0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12})?\,(.*)$/i.exec(a.fragment);if(!c)return;const l=c[1]&&c[1]!==""?c[1]:void 0,u=c[2];return{outputId:l,notebook:a.with({scheme:u||Q.file,fragment:null})}}e.parseCellOutputUri=s;function n(a,c,l){return e.generate(a,c).with({scheme:l})}e.generateCellPropertyUri=n;function o(a,c){if(a.scheme===c)return e.parse(a.with({scheme:e.scheme}))}e.parseCellPropertyUri=o})(H7||(H7={}));var kW=new J("notebookEditorCursorAtBoundary","none"),xW=new J("notebookEditorCursorAtLineBoundary","none"),B7;(function(e){e.default="default",e.option="option"})(B7||(B7={}));var z7;(function(e){e.Cells="cells",e.Text="text",e.None="none"})(z7||(z7={}));var _7;(function(e){e[e.Left=1]="Left",e[e.Right=2]="Right"})(_7||(_7={}));var EW=class Rg{static{this.d="notebook/"}static create(t,r){return`${Rg.d}${t}/${r??t}`}static parse(t){if(t.startsWith(Rg.d)){const r=t.substring(Rg.d.length).split("/");if(r.length===2)return{notebookType:r[0],viewType:r[1]}}}};function W7(e){return["application/vnd.code.notebook.stdout","application/vnd.code.notebook.stderr"].includes(e)}var YR=new TextDecoder;function XR(e){const t=[];let r=!1;for(const o of e)(t.length===0||r)&&(t.push(o),r=!0);let i=KR(t);const s=re.concat(t.map(o=>re.wrap(o))),n=sL(s);return i=i||n.byteLength!==s.byteLength,{data:n,didCompression:i}}var xd="\x1B[A",E1=xd.split("").map(e=>e.charCodeAt(0)),ZR=10;function KR(e){let t=!1;return e.forEach((r,i)=>{if(i===0||r.length<xd.length)return;const s=e[i-1],n=r.subarray(0,xd.length);if(n[0]===E1[0]&&n[1]===E1[1]&&n[2]===E1[2]){const o=s.lastIndexOf(ZR);if(o===-1)return;t=!0,e[i-1]=s.subarray(0,o),e[i]=r.subarray(xd.length)}}),t}function eL(e){let t=e;do e=t,t=e.replace(/[^\n]\x08/gm,"");while(t.length<e.length);return e}function tL(e){for(e=e.replace(/\r+\n/gm,`
`);e.search(/\r[^$]/g)>-1;){const t=e.match(/^(.*)\r+/m)[1];let r=e.match(/\r+(.*)$/m)[1];r=r+t.slice(r.length,t.length),e=e.replace(/\r+.*$/m,"\r").replace(/^.*\r/m,r)}return e}var rL=8,iL=13;function sL(e){return!e.buffer.includes(rL)&&!e.buffer.includes(iL)?e:re.fromString(tL(eL(YR.decode(e.buffer))))}var V7;(function(e){e.Delimiter="\0"})(V7||(V7={}));var q7;(function(e){e[e.IsSame=0]="IsSame",e[e.Disconnected=1]="Disconnected",e[e.IsChild=2]="IsChild",e[e.IsParent=3]="IsParent"})(q7||(q7={}));var ze=class vi{static fromExtHostTestItem(t,r,i=t.parent){if(t._isRoot)return new vi([r]);const s=[t.id];for(let n=i;n&&n.id!==r;n=n.parent)s.push(n.id);return s.push(r),new vi(s.reverse())}static isRoot(t){return!t.includes("\0")}static root(t){const r=t.indexOf("\0");return r===-1?t:t.slice(0,r)}static fromString(t){return new vi(t.split("\0"))}static join(t,r){return new vi([...t.path,r])}static joinToString(t,r){return t.toString()+"\0"+r}static parentId(t){const r=t.lastIndexOf("\0");return r===-1?void 0:t.slice(0,r)}static localId(t){const r=t.lastIndexOf("\0");return r===-1?t:t.slice(r+1)}static isChild(t,r){return r[t.length]==="\0"&&r.startsWith(t)}static compare(t,r){return t===r?0:vi.isChild(t,r)?2:vi.isChild(r,t)?3:1}static getLengthOfCommonPrefix(t,r){if(t===0)return 0;let i=0;for(;i<t-1;){for(let s=1;s<t;s++){const n=r(s-1),o=r(s);if(n.path[i]!==o.path[i])return i}i++}return i}constructor(t,r=t.length){if(this.path=t,this.d=r,t.length===0||r<1)throw new Error("cannot create test with empty path")}get rootId(){return new vi(this.path,1)}get parentId(){return this.d>1?new vi(this.path,this.d-1):void 0}get localId(){return this.path[this.d-1]}get controllerId(){return this.path[0]}get isRoot(){return this.d===1}*idsFromRoot(){for(let t=1;t<=this.d;t++)yield new vi(this.path,t)}*idsToRoot(){for(let t=this.d;t>0;t--)yield new vi(this.path,t)}compare(t){if(typeof t=="string")return vi.compare(this.toString(),t);for(let r=0;r<t.d&&r<this.d;r++)if(t.path[r]!==this.path[r])return 1;return t.d>this.d?2:t.d<this.d?3:0}toJSON(){return this.toString()}toString(){if(!this.c){this.c=this.path[0];for(let t=1;t<this.d;t++)this.c+="\0",this.c+=this.path[t]}return this.c}},G7;(function(e){e[e.Unset=0]="Unset",e[e.Queued=1]="Queued",e[e.Running=2]="Running",e[e.Passed=3]="Passed",e[e.Failed=4]="Failed",e[e.Skipped=5]="Skipped",e[e.Errored=6]="Errored"})(G7||(G7={}));var J7;(function(e){e[e.Run=1]="Run",e[e.Debug=2]="Debug",e[e.Coverage=3]="Coverage"})(J7||(J7={}));var Q7;(function(e){e[e.Refresh=2]="Refresh",e[e.CodeRelatedToTest=4]="CodeRelatedToTest",e[e.TestRelatedToCode=8]="TestRelatedToCode"})(Q7||(Q7={}));var Y7;(function(e){e[e.Run=2]="Run",e[e.Debug=4]="Debug",e[e.Coverage=8]="Coverage",e[e.HasNonDefaultProfile=16]="HasNonDefaultProfile",e[e.HasConfigurable=32]="HasConfigurable",e[e.SupportsContinuousRun=64]="SupportsContinuousRun"})(Y7||(Y7={}));var nL=e=>"runId"in e,ka;(function(e){e.serialize=t=>({range:t.range.toJSON(),uri:t.uri.toJSON()}),e.deserialize=(t,r)=>({range:nt.lift(r.range),uri:t.asCanonicalUri(k.revive(r.uri))})})(ka||(ka={}));var X7;(function(e){e[e.Error=0]="Error",e[e.Output=1]="Output"})(X7||(X7={}));var Ed;(function(e){e.serialize=t=>({label:t.label,uri:t.uri?.toJSON(),position:t.position?.toJSON()}),e.deserialize=(t,r)=>({label:r.label,uri:r.uri?t.asCanonicalUri(k.revive(r.uri)):void 0,position:r.position?ri.lift(r.position):void 0})})(Ed||(Ed={}));var Sd;(function(e){e.serialize=t=>({message:t.message,type:0,expected:t.expected,actual:t.actual,contextValue:t.contextValue,location:t.location&&ka.serialize(t.location),stackTrace:t.stackTrace?.map(Ed.serialize)}),e.deserialize=(t,r)=>({message:r.message,type:0,expected:r.expected,actual:r.actual,contextValue:r.contextValue,location:r.location&&ka.deserialize(t,r.location),stackTrace:r.stackTrace&&r.stackTrace.map(i=>Ed.deserialize(t,i))})})(Sd||(Sd={}));var $d;(function(e){e.serialize=t=>({message:t.message,type:1,offset:t.offset,length:t.length,location:t.location&&ka.serialize(t.location)}),e.deserialize=(t,r)=>({message:r.message,type:1,offset:r.offset,length:r.length,location:r.location&&ka.deserialize(t,r.location)})})($d||($d={}));var Cd;(function(e){e.serialize=t=>t.type===0?Sd.serialize(t):$d.serialize(t),e.deserialize=(t,r)=>r.type===0?Sd.deserialize(t,r):$d.deserialize(t,r),e.isDiffable=t=>t.type===0&&t.actual!==void 0&&t.expected!==void 0})(Cd||(Cd={}));var gl;(function(e){e.serializeWithoutMessages=t=>({state:t.state,duration:t.duration,messages:[]}),e.serialize=t=>({state:t.state,duration:t.duration,messages:t.messages.map(Cd.serialize)}),e.deserialize=(t,r)=>({state:r.state,duration:r.duration,messages:r.messages.map(i=>Cd.deserialize(t,i))})})(gl||(gl={}));var Z7="\0",Pd=(e,t)=>e+Z7+t,K7=e=>{const t=e.indexOf(Z7);return{ctrlId:e.slice(0,t),tagId:e.slice(t+1)}},Id;(function(e){e.serialize=t=>({extId:t.extId,label:t.label,tags:t.tags,busy:t.busy,children:void 0,uri:t.uri?.toJSON(),range:t.range?.toJSON()||null,description:t.description,error:t.error,sortText:t.sortText}),e.deserialize=(t,r)=>({extId:r.extId,label:r.label,tags:r.tags,busy:r.busy,children:void 0,uri:r.uri?t.asCanonicalUri(k.revive(r.uri)):void 0,range:r.range?nt.lift(r.range):null,description:r.description,error:r.error,sortText:r.sortText})})(Id||(Id={}));var e9;(function(e){e[e.NotExpandable=0]="NotExpandable",e[e.Expandable=1]="Expandable",e[e.BusyExpanding=2]="BusyExpanding",e[e.Expanded=3]="Expanded"})(e9||(e9={}));var $n;(function(e){e.serialize=t=>({expand:t.expand,item:Id.serialize(t.item)}),e.deserialize=(t,r)=>({controllerId:ze.root(r.item.extId),expand:r.expand,item:Id.deserialize(t,r.item)})})($n||($n={}));var ml;(function(e){e.serialize=t=>{let r;return t.item&&(r={},t.item.label!==void 0&&(r.label=t.item.label),t.item.tags!==void 0&&(r.tags=t.item.tags),t.item.busy!==void 0&&(r.busy=t.item.busy),t.item.uri!==void 0&&(r.uri=t.item.uri?.toJSON()),t.item.range!==void 0&&(r.range=t.item.range?.toJSON()),t.item.description!==void 0&&(r.description=t.item.description),t.item.error!==void 0&&(r.error=t.item.error),t.item.sortText!==void 0&&(r.sortText=t.item.sortText)),{extId:t.extId,expand:t.expand,item:r}},e.deserialize=t=>{let r;return t.item&&(r={},t.item.label!==void 0&&(r.label=t.item.label),t.item.tags!==void 0&&(r.tags=t.item.tags),t.item.busy!==void 0&&(r.busy=t.item.busy),t.item.range!==void 0&&(r.range=t.item.range?nt.lift(t.item.range):null),t.item.description!==void 0&&(r.description=t.item.description),t.item.error!==void 0&&(r.error=t.item.error),t.item.sortText!==void 0&&(r.sortText=t.item.sortText)),{extId:t.extId,expand:t.expand,item:r}}})(ml||(ml={}));var S1=(e,t)=>{t.expand!==void 0&&(e.expand=t.expand),t.item!==void 0&&(e.item=e.item?Object.assign(e.item,t.item):t.item)},t9;(function(e){e.serializeWithoutMessages=t=>({...$n.serialize(t),ownComputedState:t.ownComputedState,computedState:t.computedState,tasks:t.tasks.map(gl.serializeWithoutMessages)}),e.serialize=t=>({...$n.serialize(t),ownComputedState:t.ownComputedState,computedState:t.computedState,tasks:t.tasks.map(gl.serialize)}),e.deserialize=(t,r)=>({...$n.deserialize(t,r),ownComputedState:r.ownComputedState,computedState:r.computedState,tasks:r.tasks.map(i=>gl.deserialize(t,i)),retired:!0})})(t9||(t9={}));var $1;(function(e){e.empty=()=>({covered:0,total:0}),e.sum=(t,r)=>{t.covered+=r.covered,t.total+=r.total}})($1||($1={}));var r9;(function(e){e.serialize=t=>({id:t.id,statement:t.statement,branch:t.branch,declaration:t.declaration,testIds:t.testIds,uri:t.uri.toJSON()}),e.deserialize=(t,r)=>({id:r.id,statement:r.statement,branch:r.branch,declaration:r.declaration,testIds:r.testIds,uri:t.asCanonicalUri(k.revive(r.uri))}),e.empty=(t,r)=>({id:t,uri:r,statement:$1.empty()})})(r9||(r9={}));function C1(e){return{...e,location:e.location?.toJSON()}}function P1(e){return e.location=e.location?ri.isIPosition(e.location)?ri.lift(e.location):nt.lift(e.location):void 0,e}var i9;(function(e){e[e.Declaration=0]="Declaration",e[e.Statement=1]="Statement",e[e.Branch=2]="Branch"})(i9||(i9={}));var s9;(function(e){e.serialize=t=>t.type===0?Ad.serialize(t):Td.serialize(t),e.deserialize=t=>t.type===0?Ad.deserialize(t):Td.deserialize(t)})(s9||(s9={}));var Dd;(function(e){e.serialize=C1,e.deserialize=P1})(Dd||(Dd={}));var Ad;(function(e){e.serialize=C1,e.deserialize=P1})(Ad||(Ad={}));var Td;(function(e){e.serialize=t=>({...C1(t),branches:t.branches?.map(Dd.serialize)}),e.deserialize=t=>({...P1(t),branches:t.branches?.map(Dd.deserialize)})})(Td||(Td={}));var n9;(function(e){e[e.Add=0]="Add",e[e.Update=1]="Update",e[e.DocumentSynced=2]="DocumentSynced",e[e.Remove=3]="Remove",e[e.IncrementPendingExtHosts=4]="IncrementPendingExtHosts",e[e.Retire=5]="Retire",e[e.AddTag=6]="AddTag",e[e.RemoveTag=7]="RemoveTag"})(n9||(n9={}));var Rd;(function(e){e.deserialize=(t,r)=>r.op===0?{op:r.op,item:$n.deserialize(t,r.item)}:r.op===1?{op:r.op,item:ml.deserialize(r.item)}:r.op===2?{op:r.op,uri:t.asCanonicalUri(k.revive(r.uri)),docv:r.docv}:r,e.serialize=t=>t.op===0?{op:t.op,item:$n.serialize(t.item)}:t.op===1?{op:t.op,item:ml.serialize(t.item)}:t})(Rd||(Rd={}));var oL=class{constructor(e){this.l=e,this.f=new Map,this.g=new Map,this.h=new Set,this.j=0,this.k=0,this.tags=this.f}apply(e){const t=this.x();for(const r of e)switch(r.op){case 0:this.p($n.deserialize(this.l,r.item),t);break;case 1:this.q(ml.deserialize(r.item),t);break;case 3:this.v(r.itemId,t);break;case 5:this.w(r.itemId);break;case 4:this.updatePendingRoots(r.amount);break;case 6:this.f.set(r.tag.id,r.tag);break;case 7:this.f.delete(r.id);break}t.complete?.()}p(e,t){const r=ze.parentId(e.item.extId)?.toString();let i;if(!r)i=this.y(e),this.h.add(i),this.g.set(e.item.extId,i);else if(this.g.has(r)){const s=this.g.get(r);s.children.add(e.item.extId),i=this.y(e,s),this.g.set(e.item.extId,i)}else{console.error(`Test with unknown parent ID: ${JSON.stringify(e)}`);return}return t.add?.(i),e.expand===2&&this.j++,i}q(e,t){const r=this.g.get(e.extId);if(r)return e.expand!==void 0&&(r.expand===2&&this.j--,e.expand===2&&this.j++),S1(r,e),t.update?.(r),r}v(e,t){const r=this.g.get(e);if(!r)return;const i=ze.parentId(r.item.extId)?.toString();i?this.g.get(i).children.delete(r.item.extId):this.h.delete(r);const s=[[e]];for(;s.length;)for(const n of s.pop()){const o=this.g.get(n);o&&(s.push(o.children),this.g.delete(n),t.remove?.(o,o!==r),o.expand===2&&this.j--)}}w(e){}updatePendingRoots(e){this.k+=e}x(){return{}}},aL=X("editorGroupsService"),o9;(function(e){e[e.UP=0]="UP",e[e.DOWN=1]="DOWN",e[e.LEFT=2]="LEFT",e[e.RIGHT=3]="RIGHT"})(o9||(o9={}));var a9;(function(e){e[e.HORIZONTAL=0]="HORIZONTAL",e[e.VERTICAL=1]="VERTICAL"})(a9||(a9={}));var c9;(function(e){e[e.FIRST=0]="FIRST",e[e.LAST=1]="LAST",e[e.NEXT=2]="NEXT",e[e.PREVIOUS=3]="PREVIOUS"})(c9||(c9={}));var l9;(function(e){e[e.MAXIMIZE=0]="MAXIMIZE",e[e.EXPAND=1]="EXPAND",e[e.EVEN=2]="EVEN"})(l9||(l9={}));var u9;(function(e){e[e.COPY_EDITORS=0]="COPY_EDITORS",e[e.MOVE_EDITORS=1]="MOVE_EDITORS"})(u9||(u9={}));var h9;(function(e){e[e.CREATION_TIME=0]="CREATION_TIME",e[e.MOST_RECENTLY_ACTIVE=1]="MOST_RECENTLY_ACTIVE",e[e.GRID_APPEARANCE=2]="GRID_APPEARANCE"})(h9||(h9={}));var d9;(function(e){e[e.NEW_EDITOR=1]="NEW_EDITOR",e[e.MOVE_EDITOR=2]="MOVE_EDITOR",e[e.COPY_EDITOR=3]="COPY_EDITOR"})(d9||(d9={}));var SW=X("editorService"),cL=-1,lL=-2,f9;(function(e){e[e.Upsert=0]="Upsert",e[e.SetTags=1]="SetTags",e[e.UpdateCanResolveChildren=2]="UpdateCanResolveChildren",e[e.RemoveChild=3]="RemoveChild",e[e.SetProp=4]="SetProp",e[e.Bulk=5]="Bulk",e[e.DocumentSynced=6]="DocumentSynced"})(f9||(f9={}));var vl=(e,t)=>e===t,uL={range:(e,t)=>e===t?!0:!e||!t?!1:e.equalsRange(t),busy:vl,label:vl,description:vl,error:vl,sortText:vl,tags:(e,t)=>!(e.length!==t.length||e.some(r=>!t.includes(r)))},hL=Object.entries(uL),dL=(e,t)=>{let r;for(const[i,s]of hL)s(e[i],t[i])||(r?r[i]=t[i]:r={[i]:t[i]});return r},fL=class extends ae{get root(){return this.s.root}constructor(e){super(),this.s=e,this.f=this.B(new Cs(()=>this.flushDiff(),200)),this.g=this.B(new T),this.tree=new Map,this.j=new Map,this.m=[],this.onDidGenerateDiff=this.g.event,this.root.canResolveChildren=!0,this.z(this.root,void 0)}set resolveHandler(e){this.h=e;for(const t of this.tree.values())this.J(t)}get resolveHandler(){return this.h}collectDiff(){const e=this.m;return this.m=[],e}pushDiff(e){switch(e.op){case 2:{for(const t of this.m)if(t.op===2&&t.uri===e.uri){t.docv=e.docv;return}break}case 1:{const t=this.m[this.m.length-1];if(t){if(t.op===1&&t.item.extId===e.item.extId){S1(t.item,e.item);return}if(t.op===0&&t.item.item.extId===e.item.extId){S1(t.item,e.item);return}}break}}this.m.push(e),this.f.isScheduled()||this.f.schedule()}expand(e,t){const r=this.tree.get(e);if(r){if((r.expandLevels===void 0||t>r.expandLevels)&&(r.expandLevels=t),r.expand===1){const i=this.M(r);return i.isOpen()?this.L(r,t-1):i.wait().then(()=>this.L(r,t-1))}else if(r.expand===3)return r.resolveBarrier?.isOpen()===!1?r.resolveBarrier.wait().then(()=>this.L(r,t-1)):this.L(r,t-1)}}dispose(){for(const e of this.tree.values())this.s.getApiFor(e.actual).listener=void 0;this.tree.clear(),this.m=[],super.dispose()}w(e,t){switch(t.op){case 3:this.O(ze.joinToString(e.fullId,t.id));break;case 0:this.z(t.item,e);break;case 5:for(const r of t.ops)this.w(e,r);break;case 1:this.C(t.new,t.old,e.fullId.toString());break;case 2:this.J(e);break;case 4:this.pushDiff({op:1,item:{extId:e.fullId.toString(),item:t.update}});break;case 6:this.y(e.actual.uri);break;default:vT(t)}}y(e){e&&this.pushDiff({op:2,uri:e,docv:this.s.getDocumentVersion(e)})}z(e,t){const r=ze.fromExtHostTestItem(e,this.root.id,t?.actual),i=this.s.getApiFor(e);i.parent&&i.parent!==t?.actual&&this.s.getChildren(i.parent).delete(e.id);let s=this.tree.get(r.toString());if(!s){s={fullId:r,actual:e,expandLevels:t?.expandLevels?t.expandLevels-1:void 0,expand:0},e.tags.forEach(this.D,this),this.tree.set(s.fullId.toString(),s),this.G(e,t),this.pushDiff({op:0,item:{controllerId:this.s.controllerId,expand:s.expand,item:this.s.toITestItem(e)}}),this.I(e,s,t);return}if(s.actual===e){this.H(e,s,t);return}if(s.actual.uri?.toString()!==e.uri?.toString())return this.O(r.toString()),this.z(e,t);const n=this.s.getChildren(s.actual),o=s.actual,a=dL(this.s.toITestItem(o),this.s.toITestItem(e));this.s.getApiFor(o).listener=void 0,s.actual=e,s.resolveBarrier=void 0,s.expand=0,a&&(a.hasOwnProperty("tags")&&(this.C(e.tags,o.tags,r.toString()),delete a.tags),this.w(s,{op:4,update:a})),this.I(e,s,t);for(const[l,u]of n)this.s.getChildren(e).get(u.id)||this.O(ze.joinToString(r,u.id));const c=s.expandLevels;c!==void 0&&queueMicrotask(()=>{s.expand===1&&(s.expandLevels=void 0,this.expand(r.toString(),c))}),this.y(s.actual.uri)}C(e,t,r){const i=new Set(t.map(s=>s.id));for(const s of e)i.delete(s.id)||this.D(s);this.pushDiff({op:1,item:{extId:r,item:{tags:e.map(s=>Pd(this.s.controllerId,s.id))}}}),i.forEach(this.F,this)}D(e){const t=this.j.get(e.id);t?t.refCount++:(this.j.set(e.id,{refCount:1}),this.pushDiff({op:6,tag:{id:Pd(this.s.controllerId,e.id)}}))}F(e){const t=this.j.get(e);t&&!--t.refCount&&(this.j.delete(e),this.pushDiff({op:7,id:Pd(this.s.controllerId,e)}))}G(e,t){this.s.getApiFor(e).parent=t&&t.actual!==this.root?t.actual:void 0}H(e,t,r){this.G(e,r);const i=this.s.getApiFor(e);i.parent=r?.actual,i.listener=s=>this.w(t,s),this.J(t)}I(e,t,r){this.H(e,t,r);for(const[i,s]of this.s.getChildren(e))this.z(s,t)}J(e){let t;this.h?e.resolveBarrier?t=e.resolveBarrier.isOpen()?3:2:t=e.actual.canResolveChildren?1:0:t=0,t!==e.expand&&(e.expand=t,this.pushDiff({op:1,item:{extId:e.fullId.toString(),expand:t}}),t===1&&e.expandLevels!==void 0&&this.M(e))}L(e,t){if(t<0)return;const r=[];for(const[i,s]of this.s.getChildren(e.actual)){const n=this.expand(ze.joinToString(e.fullId,s.id),t);mn(n)&&r.push(n)}if(r.length)return Promise.all(r).then(()=>{})}M(e){if(e.resolveBarrier)return e.resolveBarrier;if(!this.h){const s=new ui;return s.open(),s}e.expand=2,this.N(e);const t=e.resolveBarrier=new ui,r=s=>{console.error(`Unhandled error in resolveHandler of test controller "${this.s.controllerId}"`,s)};let i;try{i=this.h(e.actual===this.root?void 0:e.actual)}catch(s){r(s)}return mn(i)?i.catch(r).then(()=>{t.open(),this.J(e)}):(t.open(),this.J(e)),e.resolveBarrier}N(e){this.pushDiff({op:1,item:{extId:e.fullId.toString(),expand:e.expand}})}O(e){const t=this.tree.get(e);if(!t)throw new Error("attempting to remove non-existent child");this.pushDiff({op:3,itemId:e});const r=[t];for(;r.length;){const i=r.pop();if(i){this.s.getApiFor(i.actual).listener=void 0;for(const s of i.actual.tags)this.F(s.id);this.tree.delete(i.fullId.toString());for(const[s,n]of this.s.getChildren(i.actual))r.push(this.tree.get(ze.joinToString(i.fullId,n.id)))}}}flushDiff(){const e=this.collectDiff();e.length&&this.g.fire(e)}},pL=class extends Error{constructor(e){super(`Attempted to insert a duplicate test item ID ${e}`)}},Ld=class extends Error{constructor(e){super(`TestItem with ID "${e}" is invalid. Make sure to create it from the createTestItem method.`)}},gL=class extends Error{constructor(e,t,r){super(`TestItem with ID "${e}" is from controller "${t}" and cannot be added as a child of an item from controller "${r}".`)}},mL=(e,t,r)=>{let i=new Map;return{get size(){return i.size},forEach(s,n){for(const o of i.values())s.call(n,o,this)},[Symbol.iterator](){return i.entries()},replace(s){const n=new Map,o=new Set(i.keys()),a={op:5,ops:[]};for(const c of s){if(!(c instanceof r))throw new Ld(c.id);const l=t(c).controllerId;if(l!==e.controllerId)throw new gL(c.id,l,e.controllerId);if(n.has(c.id))throw new pL(c.id);n.set(c.id,c),o.delete(c.id),a.ops.push({op:0,item:c})}for(const c of o.keys())a.ops.push({op:3,id:c});e.listener?.(a),i=n},add(s){if(!(s instanceof r))throw new Ld(s.id);i.set(s.id,s),e.listener?.({op:0,item:s})},delete(s){i.delete(s)&&e.listener?.({op:3,id:s})},get(s){return i.get(s)},toJSON(){return Array.from(i.values())}}},p9=new WeakMap,vL=(e,t)=>{const r={controllerId:t};return p9.set(e,r),r},Nd=e=>{const t=p9.get(e);if(!t)throw new Ld(e?.id||"<unknown>");return t},wL=X("remoteAuthorityResolverService"),g9;(function(e){e[e.WebSocket=0]="WebSocket",e[e.Managed=1]="Managed"})(g9||(g9={}));var m9=class{constructor(e){this.id=e,this.type=1}toString(){return`Managed(${this.id})`}},bL=class{constructor(e,t){this.host=e,this.port=t,this.type=0}toString(){return`WebSocket(${this.host}:${this.port})`}},Dr;(function(e){e.Unknown="Unknown",e.NotAvailable="NotAvailable",e.TemporarilyNotAvailable="TemporarilyNotAvailable",e.NoResolverFound="NoResolverFound",e.InvalidAuthority="InvalidAuthority"})(Dr||(Dr={}));var I1=class Vo extends xi{static isNotAvailable(t){return t instanceof Vo&&t._code===Dr.NotAvailable}static isTemporarilyNotAvailable(t){return t instanceof Vo&&t._code===Dr.TemporarilyNotAvailable}static isNoResolverFound(t){return t instanceof Vo&&t._code===Dr.NoResolverFound}static isInvalidAuthority(t){return t instanceof Vo&&t._code===Dr.InvalidAuthority}static isHandled(t){return t instanceof Vo&&t.isHandled}constructor(t,r=Dr.Unknown,i){super(t),this._message=t,this._code=r,this._detail=i,this.isHandled=r===Dr.NotAvailable&&i===!0,Object.setPrototypeOf(this,Vo.prototype)}};function v9(e){const t=e.indexOf("+");return t===-1?e:e.substring(0,t)}var D1,po,Ms,A1,go,Cn,mo,T1,R1,Fd,wl,L1,as,cs,N1,Ar,F1;function pe(e){return Object.assign(e,{apply:function(...r){if(r.length===0)return Reflect.construct(e,[]);{const i=r.length===1?[]:r[1];return Reflect.construct(e,i,r[0].constructor)}},call:function(...r){if(r.length===0)return Reflect.construct(e,[]);{const[i,...s]=r;return Reflect.construct(e,s,i.constructor)}}})}var O1;(function(e){e[e.Top=0]="Top",e[e.Bottom=1]="Bottom"})(O1||(O1={}));var w9;(function(e){e[e.TerminalCommand=0]="TerminalCommand",e[e.Opener=1]="Opener",e[e.Command=3]="Command"})(w9||(w9={}));var _e=D1=class{static from(...t){let r=t;return new D1(function(){if(r){for(const i of r)i&&typeof i.dispose=="function"&&i.dispose();r=void 0}})}#e;constructor(t){this.#e=t}dispose(){typeof this.#e=="function"&&(this.#e(),this.#e=void 0)}};_e=D1=__decorate([pe],_e);var Fe=po=class{static Min(...t){if(t.length===0)throw new TypeError;let r=t[0];for(let i=1;i<t.length;i++){const s=t[i];s.isBefore(r)&&(r=s)}return r}static Max(...t){if(t.length===0)throw new TypeError;let r=t[0];for(let i=1;i<t.length;i++){const s=t[i];s.isAfter(r)&&(r=s)}return r}static isPosition(t){if(!t)return!1;if(t instanceof po)return!0;const{line:r,character:i}=t;return typeof r=="number"&&typeof i=="number"}static of(t){if(t instanceof po)return t;if(this.isPosition(t))return new po(t.line,t.character);throw new Error("Invalid argument, is NOT a position-like object")}get line(){return this.c}get character(){return this.e}constructor(t,r){if(t<0)throw Le("line must be non-negative");if(r<0)throw Le("character must be non-negative");this.c=t,this.e=r}isBefore(t){return this.c<t.c?!0:t.c<this.c?!1:this.e<t.e}isBeforeOrEqual(t){return this.c<t.c?!0:t.c<this.c?!1:this.e<=t.e}isAfter(t){return!this.isBeforeOrEqual(t)}isAfterOrEqual(t){return!this.isBefore(t)}isEqual(t){return this.c===t.c&&this.e===t.e}compareTo(t){return this.c<t.c?-1:this.c>t.line?1:this.e<t.e?-1:this.e>t.e?1:0}translate(t,r=0){if(t===null||r===null)throw Le();let i;return typeof t>"u"?i=0:typeof t=="number"?i=t:(i=typeof t.lineDelta=="number"?t.lineDelta:0,r=typeof t.characterDelta=="number"?t.characterDelta:0),i===0&&r===0?this:new po(this.line+i,this.character+r)}with(t,r=this.character){if(t===null||r===null)throw Le();let i;return typeof t>"u"?i=this.line:typeof t=="number"?i=t:(i=typeof t.line=="number"?t.line:this.line,r=typeof t.character=="number"?t.character:this.character),i===this.line&&r===this.character?this:new po(i,r)}toJSON(){return{line:this.line,character:this.character}}[Symbol.for("debug.description")](){return`(${this.line}:${this.character})`}};Fe=po=__decorate([pe],Fe);var Re=Ms=class{static isRange(t){return t instanceof Ms?!0:t?Fe.isPosition(t.start)&&Fe.isPosition(t.end):!1}static of(t){if(t instanceof Ms)return t;if(this.isRange(t))return new Ms(t.start,t.end);throw new Error("Invalid argument, is NOT a range-like object")}get start(){return this.c}get end(){return this.e}constructor(t,r,i,s){let n,o;if(typeof t=="number"&&typeof r=="number"&&typeof i=="number"&&typeof s=="number"?(n=new Fe(t,r),o=new Fe(i,s)):Fe.isPosition(t)&&Fe.isPosition(r)&&(n=Fe.of(t),o=Fe.of(r)),!n||!o)throw new Error("Invalid arguments");n.isBefore(o)?(this.c=n,this.e=o):(this.c=o,this.e=n)}contains(t){return Ms.isRange(t)?this.contains(t.start)&&this.contains(t.end):Fe.isPosition(t)?!(Fe.of(t).isBefore(this.c)||this.e.isBefore(t)):!1}isEqual(t){return this.c.isEqual(t.c)&&this.e.isEqual(t.e)}intersection(t){const r=Fe.Max(t.start,this.c),i=Fe.Min(t.end,this.e);if(!r.isAfter(i))return new Ms(r,i)}union(t){if(this.contains(t))return this;if(t.contains(this))return t;const r=Fe.Min(t.start,this.c),i=Fe.Max(t.end,this.end);return new Ms(r,i)}get isEmpty(){return this.c.isEqual(this.e)}get isSingleLine(){return this.c.line===this.e.line}with(t,r=this.end){if(t===null||r===null)throw Le();let i;return t?Fe.isPosition(t)?i=t:(i=t.start||this.start,r=t.end||this.end):i=this.start,i.isEqual(this.c)&&r.isEqual(this.end)?this:new Ms(i,r)}toJSON(){return[this.start,this.end]}[Symbol.for("debug.description")](){return b9(this)}};Re=Ms=__decorate([pe],Re);var js=A1=class extends Re{static isSelection(t){return t instanceof A1?!0:t?Re.isRange(t)&&Fe.isPosition(t.anchor)&&Fe.isPosition(t.active)&&typeof t.isReversed=="boolean":!1}get anchor(){return this.f}get active(){return this.g}constructor(t,r,i,s){let n,o;if(typeof t=="number"&&typeof r=="number"&&typeof i=="number"&&typeof s=="number"?(n=new Fe(t,r),o=new Fe(i,s)):Fe.isPosition(t)&&Fe.isPosition(r)&&(n=Fe.of(t),o=Fe.of(r)),!n||!o)throw new Error("Invalid arguments");super(n,o),this.f=n,this.g=o}get isReversed(){return this.f===this.e}toJSON(){return{start:this.start,end:this.end,active:this.active,anchor:this.anchor}}[Symbol.for("debug.description")](){return yL(this)}};js=A1=__decorate([pe],js);function b9(e){return e.isEmpty?`[${e.start.line}:${e.start.character})`:`[${e.start.line}:${e.start.character} -> ${e.end.line}:${e.end.character})`}function yL(e){let t=b9(e);return e.isEmpty||(e.active.isEqual(e.start)?t=`|${t}`:t=`${t}|`),t}var y9=e=>{if(typeof e!="string"||e.length===0||!/^[0-9A-Za-z_\-]+$/.test(e))throw Le("connectionToken")},kL=class{static isResolvedAuthority(e){return e&&typeof e=="object"&&typeof e.host=="string"&&typeof e.port=="number"&&(e.connectionToken===void 0||typeof e.connectionToken=="string")}constructor(e,t,r){if(typeof e!="string"||e.length===0)throw Le("host");if(typeof t!="number"||t===0||Math.round(t)!==t)throw Le("port");typeof r<"u"&&y9(r),this.host=e,this.port=Math.round(t),this.connectionToken=r}},Od=class{static isManagedResolvedAuthority(e){return e&&typeof e=="object"&&typeof e.makeConnection=="function"&&(e.connectionToken===void 0||typeof e.connectionToken=="string")}constructor(e,t){this.makeConnection=e,this.connectionToken=t,typeof t<"u"&&y9(t)}},xa=class Lg extends Error{static NotAvailable(t,r){return new Lg(t,Dr.NotAvailable,r)}static TemporarilyNotAvailable(t){return new Lg(t,Dr.TemporarilyNotAvailable)}constructor(t,r=Dr.Unknown,i){super(t),this._message=t,this._code=r,this._detail=i,Object.setPrototypeOf(this,Lg.prototype)}},Oi;(function(e){e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"})(Oi||(Oi={}));var Ea;(function(e){e[e.Replace=1]="Replace",e[e.Append=2]="Append",e[e.Prepend=3]="Prepend"})(Ea||(Ea={}));var Pn=go=class{static isTextEdit(t){return t instanceof go?!0:t?Re.isRange(t)&&typeof t.newText=="string":!1}static replace(t,r){return new go(t,r)}static insert(t,r){return go.replace(new Re(t,t),r)}static delete(t){return go.replace(t,"")}static setEndOfLine(t){const r=new go(new Re(new Fe(0,0),new Fe(0,0)),"");return r.newEol=t,r}get range(){return this.c}set range(t){if(t&&!Re.isRange(t))throw Le("range");this.c=t}get newText(){return this.e||""}set newText(t){if(t&&typeof t!="string")throw Le("newText");this.e=t}get newEol(){return this.f}set newEol(t){if(t&&typeof t!="number")throw Le("newEol");this.f=t}constructor(t,r){this.c=t,this.e=r}toJSON(){return{range:this.range,newText:this.newText,newEol:this.f}}};Pn=go=__decorate([pe],Pn);var Md=Cn=class{static isNotebookCellEdit(t){return t instanceof Cn?!0:t?Hs.isNotebookRange(t)&&Array.isArray(t.newCells):!1}static replaceCells(t,r){return new Cn(t,r)}static insertCells(t,r){return new Cn(new Hs(t,t),r)}static deleteCells(t){return new Cn(t,[])}static updateCellMetadata(t,r){const i=new Cn(new Hs(t,t),[]);return i.newCellMetadata=r,i}static updateNotebookMetadata(t){const r=new Cn(new Hs(0,0),[]);return r.newNotebookMetadata=t,r}constructor(t,r){this.range=t,this.newCells=r}};Md=Cn=__decorate([pe],Md);var M1=class Ng{static isSnippetTextEdit(t){return t instanceof Ng?!0:t?Re.isRange(t.range)&&wo.isSnippetString(t.snippet):!1}static replace(t,r){return new Ng(t,r)}static insert(t,r){return Ng.replace(new Re(t,t),r)}constructor(t,r){this.range=t,this.snippet=r}},k9;(function(e){e[e.File=1]="File",e[e.Text=2]="Text",e[e.Cell=3]="Cell",e[e.CellReplace=5]="CellReplace",e[e.Snippet=6]="Snippet"})(k9||(k9={}));var vo=class{constructor(){this.c=[]}_allEntries(){return this.c}renameFile(t,r,i,s){this.c.push({_type:1,from:t,to:r,options:i,metadata:s})}createFile(t,r,i){this.c.push({_type:1,from:void 0,to:t,options:r,metadata:i})}deleteFile(t,r,i){this.c.push({_type:1,from:t,to:void 0,options:r,metadata:i})}e(t,r,i){this.c.push({_type:3,metadata:i,uri:t,edit:{editType:5,metadata:r},notebookMetadata:r})}f(t,r,i,s){const n=r.start,o=r.end;(n!==o||i.length>0)&&this.c.push({_type:5,uri:t,index:n,count:o-n,cells:i,metadata:s})}g(t,r,i,s){this.c.push({_type:3,metadata:s,uri:t,edit:{editType:3,index:r,metadata:i}})}replace(t,r,i,s){this.c.push({_type:2,uri:t,edit:new Pn(r,i),metadata:s})}insert(t,r,i,s){this.replace(t,new Re(r,r),i,s)}delete(t,r,i){this.replace(t,r,"",i)}has(t){return this.c.some(r=>r._type===2&&r.uri.toString()===t.toString())}set(t,r){if(r)for(const i of r){if(!i)continue;let s,n;Array.isArray(i)?(s=i[0],n=i[1]):s=i,Md.isNotebookCellEdit(s)?s.newCellMetadata?this.g(t,s.range.start,s.newCellMetadata,n):s.newNotebookMetadata?this.e(t,s.newNotebookMetadata,n):this.f(t,s.range,s.newCells,n):M1.isSnippetTextEdit(s)?this.c.push({_type:6,uri:t,range:s.range,edit:s.snippet,metadata:n}):this.c.push({_type:2,uri:t,edit:s,metadata:n})}else{for(let i=0;i<this.c.length;i++){const s=this.c[i];switch(s._type){case 2:case 6:case 3:case 5:s.uri.toString()===t.toString()&&(this.c[i]=void 0);break}}FC(this.c)}}get(t){const r=[];for(const i of this.c)i._type===2&&i.uri.toString()===t.toString()&&r.push(i.edit);return r}entries(){const t=new rr;for(const r of this.c)if(r._type===2){let i=t.get(r.uri);i||(i=[r.uri,[]],t.set(r.uri,i)),i[1].push(r.edit)}return[...t.values()]}get size(){return this.entries().length}toJSON(){return this.entries()}};vo=__decorate([pe],vo);var wo=mo=class{static isSnippetString(t){return t instanceof mo?!0:t?typeof t.value=="string":!1}static c(t){return t.replace(/\$|}|\\/g,"\\$&")}constructor(t){this.e=1,this.value=t||""}appendText(t){return this.value+=mo.c(t),this}appendTabstop(t=this.e++){return this.value+="$",this.value+=t,this}appendPlaceholder(t,r=this.e++){if(typeof t=="function"){const i=new mo;i.e=this.e,t(i),this.e=i.e,t=i.value}else t=mo.c(t);return this.value+="${",this.value+=r,this.value+=":",this.value+=t,this.value+="}",this}appendChoice(t,r=this.e++){const i=t.map(s=>s.replaceAll(/[|\\,]/g,"\\$&")).join(",");return this.value+="${",this.value+=r,this.value+="|",this.value+=i,this.value+="|}",this}appendVariable(t,r){if(typeof r=="function"){const i=new mo;i.e=this.e,r(i),this.e=i.e,r=i.value}else typeof r=="string"&&(r=r.replace(/\$|}/g,"\\$&"));return this.value+="${",this.value+=t,r&&(this.value+=":",this.value+=r),this.value+="}",this}};wo=mo=__decorate([pe],wo);var bo;(function(e){e[e.Unnecessary=1]="Unnecessary",e[e.Deprecated=2]="Deprecated"})(bo||(bo={}));var pr;(function(e){e[e.Hint=3]="Hint",e[e.Information=2]="Information",e[e.Warning=1]="Warning",e[e.Error=0]="Error"})(pr||(pr={}));var ii=T1=class{static isLocation(t){return t instanceof T1?!0:t?Re.isRange(t.range)&&k.isUri(t.uri):!1}constructor(t,r){if(this.uri=t,r)if(Re.isRange(r))this.range=Re.of(r);else if(Fe.isPosition(r))this.range=new Re(r,r);else throw new Error("Illegal argument")}toJSON(){return{uri:this.uri,range:this.range}}};ii=T1=__decorate([pe],ii);var bl=class{static is(t){return t?typeof t.message=="string"&&t.location&&Re.isRange(t.location.range)&&k.isUri(t.location.uri):!1}constructor(t,r){this.location=t,this.message=r}static isEqual(t,r){return t===r?!0:!t||!r?!1:t.message===r.message&&t.location.range.isEqual(r.location.range)&&t.location.uri.toString()===r.location.uri.toString()}};bl=__decorate([pe],bl);var jd=class{constructor(t,r,i=pr.Error){if(!Re.isRange(t))throw new TypeError("range must be set");if(!r)throw new TypeError("message must be set");this.range=t,this.message=r,this.severity=i}toJSON(){return{severity:pr[this.severity],message:this.message,range:this.range,source:this.source,code:this.code}}static isEqual(t,r){return t===r?!0:!t||!r?!1:t.message===r.message&&t.severity===r.severity&&t.code===r.code&&t.severity===r.severity&&t.source===r.source&&t.range.isEqual(r.range)&&Xi(t.tags,r.tags)&&Xi(t.relatedInformation,r.relatedInformation,bl.isEqual)}};jd=__decorate([pe],jd);var Ud=class{constructor(t,r){if(!t)throw new Error("Illegal argument, contents must be defined");Array.isArray(t)?this.contents=t:this.contents=[t],this.range=r}};Ud=__decorate([pe],Ud);var Hd=class extends Ud{constructor(t,r,i,s){super(t,r),this.canIncreaseVerbosity=i,this.canDecreaseVerbosity=s}};Hd=__decorate([pe],Hd);var j1;(function(e){e[e.Increase=0]="Increase",e[e.Decrease=1]="Decrease"})(j1||(j1={}));var yl;(function(e){e[e.Text=0]="Text",e[e.Read=1]="Read",e[e.Write=2]="Write"})(yl||(yl={}));var Bd=class{constructor(t,r=yl.Text){this.range=t,this.kind=r}toJSON(){return{range:this.range,kind:yl[this.kind]}}};Bd=__decorate([pe],Bd);var zd=class{constructor(t,r){this.uri=t,this.highlights=r}toJSON(){return{uri:this.uri,highlights:this.highlights.map(t=>t.toJSON())}}};zd=__decorate([pe],zd);var lt;(function(e){e[e.File=0]="File",e[e.Module=1]="Module",e[e.Namespace=2]="Namespace",e[e.Package=3]="Package",e[e.Class=4]="Class",e[e.Method=5]="Method",e[e.Property=6]="Property",e[e.Field=7]="Field",e[e.Constructor=8]="Constructor",e[e.Enum=9]="Enum",e[e.Interface=10]="Interface",e[e.Function=11]="Function",e[e.Variable=12]="Variable",e[e.Constant=13]="Constant",e[e.String=14]="String",e[e.Number=15]="Number",e[e.Boolean=16]="Boolean",e[e.Array=17]="Array",e[e.Object=18]="Object",e[e.Key=19]="Key",e[e.Null=20]="Null",e[e.EnumMember=21]="EnumMember",e[e.Struct=22]="Struct",e[e.Event=23]="Event",e[e.Operator=24]="Operator",e[e.TypeParameter=25]="TypeParameter"})(lt||(lt={}));var kl;(function(e){e[e.Deprecated=1]="Deprecated"})(kl||(kl={}));var Sa=R1=class{static validate(t){if(!t.name)throw new Error("name must not be falsy")}constructor(t,r,i,s,n){this.name=t,this.kind=r,this.containerName=n,typeof i=="string"&&(this.containerName=i),s instanceof ii?this.location=s:i instanceof Re&&(this.location=new ii(s,i)),R1.validate(this)}toJSON(){return{name:this.name,kind:lt[this.kind],location:this.location,containerName:this.containerName}}};Sa=R1=__decorate([pe],Sa);var xl=Fd=class{static validate(t){if(!t.name)throw new Error("name must not be falsy");if(!t.range.contains(t.selectionRange))throw new Error("selectionRange must be contained in fullRange");t.children?.forEach(Fd.validate)}constructor(t,r,i,s,n){this.name=t,this.detail=r,this.kind=i,this.range=s,this.selectionRange=n,this.children=[],Fd.validate(this)}};xl=Fd=__decorate([pe],xl);var El;(function(e){e[e.Invoke=1]="Invoke",e[e.Automatic=2]="Automatic"})(El||(El={}));var _d=class{constructor(t,r){this.title=t,this.kind=r}};_d=__decorate([pe],_d);var kt=class{static{wl=this}static{this.c="."}constructor(t){this.value=t}append(t){return new wl(this.value?this.value+wl.c+t:t)}intersects(t){return this.contains(t)||t.contains(this)}contains(t){return this.value===t.value||t.value.startsWith(this.value+wl.c)}};kt=wl=__decorate([pe],kt),kt.Empty=new kt(""),kt.QuickFix=kt.Empty.append("quickfix"),kt.Refactor=kt.Empty.append("refactor"),kt.RefactorExtract=kt.Refactor.append("extract"),kt.RefactorInline=kt.Refactor.append("inline"),kt.RefactorMove=kt.Refactor.append("move"),kt.RefactorRewrite=kt.Refactor.append("rewrite"),kt.Source=kt.Empty.append("source"),kt.SourceOrganizeImports=kt.Source.append("organizeImports"),kt.SourceFixAll=kt.Source.append("fixAll"),kt.Notebook=kt.Empty.append("notebook");var Sl=class{constructor(t,r){if(this.range=t,this.parent=r,r&&!r.range.contains(this.range))throw new Error("Invalid argument: parent must contain this range")}};Sl=__decorate([pe],Sl);var U1=class{constructor(e,t,r,i,s,n){this.kind=e,this.name=t,this.detail=r,this.uri=i,this.range=s,this.selectionRange=n}},x9=class{constructor(e,t){this.fromRanges=t,this.from=e}},E9=class{constructor(e,t){this.fromRanges=t,this.to=e}},$a;(function(e){e[e.Information=0]="Information",e[e.Warning=1]="Warning",e[e.Error=2]="Error"})($a||($a={}));var Wd=class{constructor(t,r){this.range=t,this.command=r}get isResolved(){return!!this.command}};Wd=__decorate([pe],Wd);var Jr=L1=class{#e;static isMarkdownString(t){return t instanceof L1?!0:t&&t.appendCodeblock&&t.appendMarkdown&&t.appendText&&t.value!==void 0}constructor(t,r=!1){this.#e=new Q6(t,{supportThemeIcons:r})}get value(){return this.#e.value}set value(t){this.#e.value=t}get isTrusted(){return this.#e.isTrusted}set isTrusted(t){this.#e.isTrusted=t}get supportThemeIcons(){return this.#e.supportThemeIcons}set supportThemeIcons(t){this.#e.supportThemeIcons=t}get supportHtml(){return this.#e.supportHtml}set supportHtml(t){this.#e.supportHtml=t}get baseUri(){return this.#e.baseUri}set baseUri(t){this.#e.baseUri=t}appendText(t){return this.#e.appendText(t),this}appendMarkdown(t){return this.#e.appendMarkdown(t),this}appendCodeblock(t,r){return this.#e.appendCodeblock(r??"",t),this}};Jr=L1=__decorate([pe],Jr);var H1=class{constructor(t,r){this.label=t,this.documentation=r}};H1=__decorate([pe],H1);var B1=class{constructor(t,r){this.label=t,this.documentation=r,this.parameters=[]}};B1=__decorate([pe],B1);var z1=class{constructor(){this.activeSignature=0,this.activeParameter=0,this.signatures=[]}};z1=__decorate([pe],z1);var _1;(function(e){e[e.Invoke=1]="Invoke",e[e.TriggerCharacter=2]="TriggerCharacter",e[e.ContentChange=3]="ContentChange"})(_1||(_1={}));var W1;(function(e){e[e.Type=1]="Type",e[e.Parameter=2]="Parameter"})(W1||(W1={}));var Vd=class{constructor(t){this.value=t}};Vd=__decorate([pe],Vd);var qd=class{constructor(t,r,i){this.position=t,this.label=r,this.kind=i}};qd=__decorate([pe],qd);var Ca;(function(e){e[e.Invoke=0]="Invoke",e[e.TriggerCharacter=1]="TriggerCharacter",e[e.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(Ca||(Ca={}));var ke;(function(e){e[e.Text=0]="Text",e[e.Method=1]="Method",e[e.Function=2]="Function",e[e.Constructor=3]="Constructor",e[e.Field=4]="Field",e[e.Variable=5]="Variable",e[e.Class=6]="Class",e[e.Interface=7]="Interface",e[e.Module=8]="Module",e[e.Property=9]="Property",e[e.Unit=10]="Unit",e[e.Value=11]="Value",e[e.Enum=12]="Enum",e[e.Keyword=13]="Keyword",e[e.Snippet=14]="Snippet",e[e.Color=15]="Color",e[e.File=16]="File",e[e.Reference=17]="Reference",e[e.Folder=18]="Folder",e[e.EnumMember=19]="EnumMember",e[e.Constant=20]="Constant",e[e.Struct=21]="Struct",e[e.Event=22]="Event",e[e.Operator=23]="Operator",e[e.TypeParameter=24]="TypeParameter",e[e.User=25]="User",e[e.Issue=26]="Issue"})(ke||(ke={}));var $l;(function(e){e[e.Deprecated=1]="Deprecated"})($l||($l={}));var Gd=class{constructor(t,r){this.label=t,this.kind=r}toJSON(){return{label:this.label,kind:this.kind&&ke[this.kind],detail:this.detail,documentation:this.documentation,sortText:this.sortText,filterText:this.filterText,preselect:this.preselect,insertText:this.insertText,textEdit:this.textEdit}}};Gd=__decorate([pe],Gd);var Pa=class{constructor(t=[],r=!1){this.items=t,this.isIncomplete=r}};Pa=__decorate([pe],Pa);var V1=class{constructor(t,r,i){this.insertText=t,this.range=r,this.command=i}};V1=__decorate([pe],V1);var q1=class{constructor(t){this.commands=void 0,this.suppressSuggestions=void 0,this.items=t}};q1=__decorate([pe],q1);var yo;(function(e){e[e.Unknown=0]="Unknown",e[e.Word=1]="Word",e[e.Line=2]="Line",e[e.Suggest=3]="Suggest"})(yo||(yo={}));var Cl;(function(e){e[e.Active=-1]="Active",e[e.Beside=-2]="Beside",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Three=3]="Three",e[e.Four=4]="Four",e[e.Five=5]="Five",e[e.Six=6]="Six",e[e.Seven=7]="Seven",e[e.Eight=8]="Eight",e[e.Nine=9]="Nine"})(Cl||(Cl={}));var In;(function(e){e[e.Left=1]="Left",e[e.Right=2]="Right"})(In||(In={}));function xL(e,t){return`${rt.toKey(e)}.${t}`}var Mi;(function(e){e[e.Off=0]="Off",e[e.On=1]="On",e[e.Relative=2]="Relative",e[e.Interval=3]="Interval"})(Mi||(Mi={}));var Ia;(function(e){e[e.Manual=1]="Manual",e[e.AfterDelay=2]="AfterDelay",e[e.FocusOut=3]="FocusOut"})(Ia||(Ia={}));var Jd;(function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"})(Jd||(Jd={}));var Da;(function(e){e[e.Keyboard=1]="Keyboard",e[e.Mouse=2]="Mouse",e[e.Command=3]="Command"})(Da||(Da={}));var Pl;(function(e){e[e.Undo=1]="Undo",e[e.Redo=2]="Redo"})(Pl||(Pl={}));var ko;(function(e){e[e.OpenOpen=0]="OpenOpen",e[e.ClosedClosed=1]="ClosedClosed",e[e.OpenClosed=2]="OpenClosed",e[e.ClosedOpen=3]="ClosedOpen"})(ko||(ko={})),function(e){function t(r){switch(r){case"keyboard":return e.Keyboard;case"mouse":return e.Mouse;case"api":return e.Command}}e.fromValue=t}(Da||(Da={}));var Aa;(function(e){e[e.Other=0]="Other",e[e.Comment=1]="Comment",e[e.String=2]="String",e[e.RegEx=3]="RegEx"})(Aa||(Aa={})),function(e){function t(r){switch(r){case e.Other:return"other";case e.Comment:return"comment";case e.String:return"string";case e.RegEx:return"regex"}return"other"}e.toString=t}(Aa||(Aa={}));var Qd=class{constructor(t,r){if(r&&!k.isUri(r))throw Le("target");if(!Re.isRange(t)||t.isEmpty)throw Le("range");this.range=t,this.target=r}};Qd=__decorate([pe],Qd);var Ta=class{constructor(t,r,i,s){this.red=t,this.green=r,this.blue=i,this.alpha=s}};Ta=__decorate([pe],Ta);var Yd=class{constructor(t,r){if(r&&!(r instanceof Ta))throw Le("color");if(!Re.isRange(t)||t.isEmpty)throw Le("range");this.range=t,this.color=r}};Yd=__decorate([pe],Yd);var Xd=class{constructor(t){if(!t||typeof t!="string")throw Le("label");this.label=t}};Xd=__decorate([pe],Xd);var S9;(function(e){e[e.RGB=0]="RGB",e[e.HEX=1]="HEX",e[e.HSL=2]="HSL"})(S9||(S9={}));var G1;(function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Information=2]="Information"})(G1||(G1={}));var J1;(function(e){e[e.Unknown=0]="Unknown",e[e.Shutdown=1]="Shutdown",e[e.Process=2]="Process",e[e.User=3]="User",e[e.Extension=4]="Extension"})(J1||(J1={}));var Zd;(function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High"})(Zd||(Zd={}));var EL=class{constructor(e,t,r){if(this.startIndex=e,this.length=t,this.tooltip=r,typeof e!="number"||e<0)throw Le("startIndex");if(typeof t!="number"||t<1)throw Le("length");if(r!==void 0&&typeof r!="string")throw Le("tooltip")}},SL=class{constructor(e){this.uri=e}},$L=class{constructor(e){this.terminalCommand=e}},Q1;(function(e){e[e.Panel=1]="Panel",e[e.Editor=2]="Editor"})(Q1||(Q1={}));var CL=class{constructor(e){if(this.options=e,typeof e!="object")throw Le("options")}},Y1;(function(e){e[e.Always=1]="Always",e[e.Silent=2]="Silent",e[e.Never=3]="Never"})(Y1||(Y1={}));var X1;(function(e){e[e.Shared=1]="Shared",e[e.Dedicated=2]="Dedicated",e[e.New=3]="New"})(X1||(X1={}));var Il=class{static{as=this}static{this.Clean=new as("clean","Clean")}static{this.Build=new as("build","Build")}static{this.Rebuild=new as("rebuild","Rebuild")}static{this.Test=new as("test","Test")}static from(t){switch(t){case"clean":return as.Clean;case"build":return as.Build;case"rebuild":return as.Rebuild;case"test":return as.Test;default:return}}constructor(t,r){if(this.label=r,typeof t!="string"||typeof r!="string")throw Le("name");this.c=t}get id(){return this.c}};Il=as=__decorate([pe],Il);function $9(e){let t="";for(let r=0;r<e.length;r++)t+=e[r].replace(/,/g,",,")+",";return t}var Ra=class{constructor(t,r,i){if(typeof t!="string")throw Le("process");this.e=[],this.c=t,r!==void 0&&(Array.isArray(r)?(this.e=r,this.f=i):this.f=r)}get process(){return this.c}set process(t){if(typeof t!="string")throw Le("process");this.c=t}get args(){return this.e}set args(t){Array.isArray(t)||(t=[]),this.e=t}get options(){return this.f}set options(t){this.f=t}computeId(){const t=[];if(t.push("process"),this.c!==void 0&&t.push(this.c),this.e&&this.e.length>0)for(const r of this.e)t.push(r);return $9(t)}};Ra=__decorate([pe],Ra);var xo=class{constructor(t,r,i){if(this.f=[],Array.isArray(r)){if(!t)throw Le("command can't be undefined or null");if(typeof t!="string"&&typeof t.value!="string")throw Le("command");this.e=t,this.f=r,this.g=i}else{if(typeof t!="string")throw Le("commandLine");this.c=t,this.g=r}}get commandLine(){return this.c}set commandLine(t){if(typeof t!="string")throw Le("commandLine");this.c=t}get command(){return this.e?this.e:""}set command(t){if(typeof t!="string"&&typeof t.value!="string")throw Le("command");this.e=t}get args(){return this.f}set args(t){this.f=t||[]}get options(){return this.g}set options(t){this.g=t}computeId(){const t=[];if(t.push("shell"),this.c!==void 0&&t.push(this.c),this.e!==void 0&&t.push(typeof this.e=="string"?this.e:this.e.value),this.f&&this.f.length>0)for(const r of this.f)t.push(typeof r=="string"?r:r.value);return $9(t)}};xo=__decorate([pe],xo);var Z1;(function(e){e[e.Escape=1]="Escape",e[e.Strong=2]="Strong",e[e.Weak=3]="Weak"})(Z1||(Z1={}));var Dn;(function(e){e[e.Global=1]="Global",e[e.Workspace=2]="Workspace"})(Dn||(Dn={}));var K1=class{constructor(e){this.c=e}computeId(){return"customExecution"+ir()}set callback(e){this.c=e}get callback(){return this.c}},Kd=class{static{cs=this}static{this.c="customExecution"}static{this.e="process"}static{this.f="shell"}static{this.g="$empty"}constructor(t,r,i,s,n,o){this.k=!1,this.l=this.definition=t;let a;typeof r=="string"?(this.o=this.name=r,this.w=this.source=i,this.execution=s,a=n,this.k=!0):r===Dn.Global||r===Dn.Workspace?(this.target=r,this.o=this.name=i,this.w=this.source=s,this.execution=n,a=o):(this.target=r,this.o=this.name=i,this.w=this.source=s,this.execution=n,a=o),typeof a=="string"?(this.r=[a],this.t=!0):Array.isArray(a)?(this.r=a,this.t=!0):(this.r=[],this.t=!1),this.u=!1,this.y=Object.create(null),this.z=Object.create(null)}get _id(){return this.j}set _id(t){this.j=t}get _deprecated(){return this.k}B(){this.j!==void 0&&(this.j=void 0,this.m=void 0,this.C())}C(){this.q instanceof Ra?this.l={type:cs.e,id:this.q.computeId()}:this.q instanceof xo?this.l={type:cs.f,id:this.q.computeId()}:this.q instanceof K1?this.l={type:cs.c,id:this.q.computeId()}:this.l={type:cs.g,id:ir()}}get definition(){return this.l}set definition(t){if(t==null)throw Le("Kind can't be undefined or null");this.B(),this.l=t}get scope(){return this.m}set target(t){this.B(),this.m=t}get name(){return this.o}set name(t){if(typeof t!="string")throw Le("name");this.B(),this.o=t}get execution(){return this.q}set execution(t){t===null&&(t=void 0),this.B(),this.q=t;const r=this.l.type;(cs.g===r||cs.e===r||cs.f===r||cs.c===r)&&this.C()}get problemMatchers(){return this.r}set problemMatchers(t){if(Array.isArray(t))this.B(),this.r=t,this.t=!0;else{this.B(),this.r=[],this.t=!1;return}}get hasDefinedMatchers(){return this.t}get isBackground(){return this.u}set isBackground(t){t!==!0&&t!==!1&&(t=!1),this.B(),this.u=t}get source(){return this.w}set source(t){if(typeof t!="string"||t.length===0)throw Le("source must be a string of length > 0");this.B(),this.w=t}get group(){return this.x}set group(t){t===null&&(t=void 0),this.B(),this.x=t}get detail(){return this.A}set detail(t){t===null&&(t=void 0),this.A=t}get presentationOptions(){return this.y}set presentationOptions(t){t==null&&(t=Object.create(null)),this.B(),this.y=t}get runOptions(){return this.z}set runOptions(t){t==null&&(t=Object.create(null)),this.B(),this.z=t}};Kd=cs=__decorate([pe],Kd);var Eo;(function(e){e[e.SourceControl=1]="SourceControl",e[e.Window=10]="Window",e[e.Notification=15]="Notification"})(Eo||(Eo={}));var ev;(function(e){function t(r){const i=r;return li(i.value)?i.tooltip&&!Me(i.tooltip)?(console.log("INVALID view badge, invalid tooltip",i.tooltip),!1):!0:(console.log("INVALID view badge, invalid value",i.value),!1)}e.isViewBadge=t})(ev||(ev={}));var ef=N1=class{static isTreeItem(t,r){const i=t;if(i.checkboxState!==void 0){const s=li(i.checkboxState)?i.checkboxState:Dt(i.checkboxState)&&li(i.checkboxState.state)?i.checkboxState.state:void 0,n=!li(i.checkboxState)&&Dt(i.checkboxState)?i.checkboxState.tooltip:void 0;if(s===void 0||s!==ls.Checked&&s!==ls.Unchecked||n!==void 0&&!Me(n))return console.log("INVALID tree item, invalid checkboxState",i.checkboxState),!1}if(t instanceof N1)return!0;if(i.label!==void 0&&!Me(i.label)&&!i.label?.label)return console.log("INVALID tree item, invalid label",i.label),!1;if(i.id!==void 0&&!Me(i.id))return console.log("INVALID tree item, invalid id",i.id),!1;if(i.iconPath!==void 0&&!Me(i.iconPath)&&!k.isUri(i.iconPath)&&(!i.iconPath||!Me(i.iconPath.id))){const s=i.iconPath;if(!s||!Me(s.light)&&!k.isUri(s.light)&&!Me(s.dark)&&!k.isUri(s.dark))return console.log("INVALID tree item, invalid iconPath",i.iconPath),!1}return i.description!==void 0&&!Me(i.description)&&typeof i.description!="boolean"?(console.log("INVALID tree item, invalid description",i.description),!1):i.resourceUri!==void 0&&!k.isUri(i.resourceUri)?(console.log("INVALID tree item, invalid resourceUri",i.resourceUri),!1):i.tooltip!==void 0&&!Me(i.tooltip)&&!(i.tooltip instanceof Jr)?(console.log("INVALID tree item, invalid tooltip",i.tooltip),!1):i.command!==void 0&&!i.command.command?(console.log("INVALID tree item, invalid command",i.command),!1):i.collapsibleState!==void 0&&i.collapsibleState<So.None&&i.collapsibleState>So.Expanded?(console.log("INVALID tree item, invalid collapsibleState",i.collapsibleState),!1):i.contextValue!==void 0&&!Me(i.contextValue)?(console.log("INVALID tree item, invalid contextValue",i.contextValue),!1):i.accessibilityInformation!==void 0&&!i.accessibilityInformation?.label?(console.log("INVALID tree item, invalid accessibilityInformation",i.accessibilityInformation),!1):!0}constructor(t,r=So.None){this.collapsibleState=r,k.isUri(t)?this.resourceUri=t:this.label=t}};ef=N1=__decorate([pe],ef);var So;(function(e){e[e.None=0]="None",e[e.Collapsed=1]="Collapsed",e[e.Expanded=2]="Expanded"})(So||(So={}));var ls;(function(e){e[e.Unchecked=0]="Unchecked",e[e.Checked=1]="Checked"})(ls||(ls={}));var tf=class{async asString(){return typeof this.value=="string"?this.value:JSON.stringify(this.value)}asFile(){}constructor(t){this.value=t}};tf=__decorate([pe],tf);var rf=class extends tf{},PL=class extends rf{#e;constructor(e){super(""),this.#e=e}asFile(){return this.#e}},IL=class{constructor(e,t,r,i){this.name=e,this.uri=t,this._itemId=r,this.c=i}data(){return this.c()}},Dl=class{#e=new Map;constructor(t){for(const[r,i]of t??[]){const s=this.#e.get(this.#t(r));s?s.push(i):this.#e.set(this.#t(r),[i])}}get(t){return this.#e.get(this.#t(t))?.[0]}set(t,r){this.#e.set(this.#t(t),[r])}forEach(t,r){for(const[i,s]of this.#e)for(const n of s)t.call(r,n,i,this)}*[Symbol.iterator](){for(const[t,r]of this.#e)for(const i of r)yield[t,i]}#t(t){return t.toLowerCase()}};Dl=__decorate([pe],Dl);var tv=class{constructor(t,r,i){this.insertText=t,this.title=r,this.kind=i}};tv=__decorate([pe],tv);var rv;(function(e){e[e.Automatic=0]="Automatic",e[e.PasteAs=1]="PasteAs"})(rv||(rv={}));var sf=class Fg{static{this.c="."}constructor(t){this.value=t}append(...t){return new Fg((this.value?[this.value,...t]:t).join(Fg.c))}intersects(t){return this.contains(t)||t.contains(this)}contains(t){return this.value===t.value||t.value.startsWith(this.value+Fg.c)}};sf.Empty=new sf("");var DL=class{constructor(e,t,r){this.title=t,this.insertText=e,this.kind=r}},vr=class{constructor(t,r){this.id=t,this.color=r}static isThemeIcon(t){return typeof t.id!="string"?(console.log("INVALID ThemeIcon, invalid id",t.id),!1):!0}};vr=__decorate([pe],vr),vr.File=new vr("file"),vr.Folder=new vr("folder");var Al=class{constructor(t){this.id=t}};Al=__decorate([pe],Al);var La;(function(e){e[e.Global=1]="Global",e[e.Workspace=2]="Workspace",e[e.WorkspaceFolder=3]="WorkspaceFolder"})(La||(La={}));var Na=class{get base(){return this.c}set base(t){this.c=t,this.e=k.file(t)}get baseUri(){return this.e}set baseUri(t){this.e=t,this.c=t.fsPath}constructor(t,r){if(typeof t!="string"&&(!t||!k.isUri(t)&&!k.isUri(t.uri)))throw Le("base");if(typeof r!="string")throw Le("pattern");typeof t=="string"?this.baseUri=k.file(t):k.isUri(t)?this.baseUri=t:this.baseUri=t.uri,this.pattern=r}toJSON(){return{pattern:this.pattern,base:this.base,baseUri:this.baseUri.toJSON()}}};Na=__decorate([pe],Na);var C9=new WeakMap;function AL(e,t){C9.set(e,t)}var Fa=class{constructor(t,r,i,s,n){this.enabled=typeof t=="boolean"?t:!0,typeof r=="string"&&(this.condition=r),typeof i=="string"&&(this.hitCondition=i),typeof s=="string"&&(this.logMessage=s),typeof n=="string"&&(this.mode=n)}get id(){return this.c||(this.c=C9.get(this)??ir()),this.c}};Fa=__decorate([pe],Fa);var $o=class extends Fa{constructor(t,r,i,s,n,o){if(super(r,i,s,n,o),t===null)throw Le("location");this.location=t}};$o=__decorate([pe],$o);var Co=class extends Fa{constructor(t,r,i,s,n,o){super(r,i,s,n,o),this.functionName=t}};Co=__decorate([pe],Co);var nf=class extends Fa{constructor(t,r,i,s,n,o,a,c){if(super(s,n,o,a,c),!r)throw Le("dataId");this.label=t,this.dataId=r,this.canPersist=i}};nf=__decorate([pe],nf);var Oa=class{constructor(t,r,i){this.command=t,this.args=r||[],this.options=i}};Oa=__decorate([pe],Oa);var Ma=class{constructor(t,r){this.port=t,this.host=r}};Ma=__decorate([pe],Ma);var Tl=class{constructor(t){this.path=t}};Tl=__decorate([pe],Tl);var Rl=class{constructor(t){this.implementation=t}};Rl=__decorate([pe],Rl);var P9=class{constructor(e,t,r){this.session=e,this.threadId=t,this.frameId=r}},I9=class{constructor(e,t){this.session=e,this.threadId=t}},of=class{constructor(t,r){this.range=t,this.expression=r}};of=__decorate([pe],of);var Ll;(function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"})(Ll||(Ll={}));var af=class{constructor(t,r){this.range=t,this.text=r}};af=__decorate([pe],af);var cf=class{constructor(t,r,i=!0){this.range=t,this.variableName=r,this.caseSensitiveLookup=i}};cf=__decorate([pe],cf);var lf=class{constructor(t,r){this.range=t,this.expression=r}};lf=__decorate([pe],lf);var iv=class{constructor(t,r){this.frameId=t,this.stoppedLocation=r}};iv=__decorate([pe],iv);var sv;(function(e){e[e.AIGenerated=1]="AIGenerated"})(sv||(sv={}));var Nl;(function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"})(Nl||(Nl={}));var TL=class{constructor(e,t){this.newSymbolName=e,this.tags=t}},ja;(function(e){e[e.Changed=1]="Changed",e[e.Created=2]="Created",e[e.Deleted=3]="Deleted"})(ja||(ja={}));var qt=Ar=class extends Error{static FileExists(t){return new Ar(t,ge.FileExists,Ar.FileExists)}static FileNotFound(t){return new Ar(t,ge.FileNotFound,Ar.FileNotFound)}static FileNotADirectory(t){return new Ar(t,ge.FileNotADirectory,Ar.FileNotADirectory)}static FileIsADirectory(t){return new Ar(t,ge.FileIsADirectory,Ar.FileIsADirectory)}static NoPermissions(t){return new Ar(t,ge.NoPermissions,Ar.NoPermissions)}static Unavailable(t){return new Ar(t,ge.Unavailable,Ar.Unavailable)}constructor(t,r=ge.Unknown,i){super(k.isUri(t)?t.toString(!0):t),this.code=i?.name??"Unknown",Sk(this,r),Object.setPrototypeOf(this,Ar.prototype),typeof Error.captureStackTrace=="function"&&typeof i=="function"&&Error.captureStackTrace(this,i)}};qt=Ar=__decorate([pe],qt);var nv=class{constructor(t,r,i){this.start=t,this.end=r,this.kind=i}};nv=__decorate([pe],nv);var Us;(function(e){e[e.Comment=1]="Comment",e[e.Imports=2]="Imports",e[e.Region=3]="Region"})(Us||(Us={}));var Fl;(function(e){e[e.Collapsed=0]="Collapsed",e[e.Expanded=1]="Expanded"})(Fl||(Fl={}));var ov;(function(e){e[e.Editing=0]="Editing",e[e.Preview=1]="Preview"})(ov||(ov={}));var av;(function(e){e[e.Published=0]="Published",e[e.Draft=1]="Draft"})(av||(av={}));var Ol;(function(e){e[e.Unresolved=0]="Unresolved",e[e.Resolved=1]="Resolved"})(Ol||(Ol={}));var Ml;(function(e){e[e.Current=0]="Current",e[e.Outdated=1]="Outdated"})(Ml||(Ml={}));var jl;(function(e){e[e.Reply=1]="Reply",e[e.Comment=2]="Comment"})(jl||(jl={}));var cv=class{constructor(e,t=[]){this.tokenTypes=e,this.tokenModifiers=t}};function RL(e){return typeof e>"u"||eI(e)}var LL=class D3{constructor(t){if(this.c=0,this.e=0,this.f=!0,this.g=[],this.j=0,this.k=new Map,this.l=new Map,this.m=!1,t){this.m=!0;for(let r=0,i=t.tokenTypes.length;r<i;r++)this.k.set(t.tokenTypes[r],r);for(let r=0,i=t.tokenModifiers.length;r<i;r++)this.l.set(t.tokenModifiers[r],r)}}push(t,r,i,s,n){if(typeof t=="number"&&typeof r=="number"&&typeof i=="number"&&typeof s=="number"&&(typeof n=="number"||typeof n>"u"))return typeof n>"u"&&(n=0),this.q(t,r,i,s,n);if(Re.isRange(t)&&typeof r=="string"&&RL(i))return this.o(t,r,i);throw Le()}o(t,r,i){if(!this.m)throw new Error("Legend must be provided in constructor");if(t.start.line!==t.end.line)throw new Error("`range` cannot span multiple lines");if(!this.k.has(r))throw new Error("`tokenType` is not in the provided legend");const s=t.start.line,n=t.start.character,o=t.end.character-t.start.character,a=this.k.get(r);let c=0;if(i)for(const l of i){if(!this.l.has(l))throw new Error("`tokenModifier` is not in the provided legend");const u=this.l.get(l);c|=1<<u>>>0}this.q(s,n,o,a,c)}q(t,r,i,s,n){if(this.f&&(t<this.c||t===this.c&&r<this.e)){this.f=!1;const c=this.g.length/5|0;let l=0,u=0;for(let h=0;h<c;h++){let d=this.g[5*h],f=this.g[5*h+1];d===0?(d=l,f+=u):d+=l,this.g[5*h]=d,this.g[5*h+1]=f,l=d,u=f}}let o=t,a=r;this.f&&this.j>0&&(o-=this.c,o===0&&(a-=this.e)),this.g[this.j++]=o,this.g[this.j++]=a,this.g[this.j++]=i,this.g[this.j++]=s,this.g[this.j++]=n,this.c=t,this.e=r}static r(t){const r=[],i=t.length/5|0;for(let a=0;a<i;a++)r[a]=a;r.sort((a,c)=>{const l=t[5*a],u=t[5*c];if(l===u){const h=t[5*a+1],d=t[5*c+1];return h-d}return l-u});const s=new Uint32Array(t.length);let n=0,o=0;for(let a=0;a<i;a++){const c=5*r[a],l=t[c+0],u=t[c+1],h=t[c+2],d=t[c+3],f=t[c+4],g=l-n,v=g===0?u-o:u,x=5*a;s[x+0]=g,s[x+1]=v,s[x+2]=h,s[x+3]=d,s[x+4]=f,n=l,o=u}return s}build(t){return this.f?new Ua(new Uint32Array(this.g),t):new Ua(D3.r(this.g),t)}},Ua=class{constructor(e,t){this.resultId=t,this.data=e}},D9=class{constructor(e,t,r){this.start=e,this.deleteCount=t,this.data=r}},uf=class{constructor(e,t){this.resultId=t,this.edits=e}},hf;(function(e){e[e.Separate=0]="Separate",e[e.MergeWithParent=1]="MergeWithParent"})(hf||(hf={}));var NL=class{constructor(e){this.name=e}},lv;(function(e){e[e.Title=1]="Title",e[e.Inline=2]="Inline"})(lv||(lv={}));var Ul=class{static{this.Back={iconPath:new vr("arrow-left")}}constructor(){}};Ul=__decorate([pe],Ul);var Hl;(function(e){e[e.Separator=-1]="Separator",e[e.Default=0]="Default"})(Hl||(Hl={}));var Ha;(function(e){e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error"})(Ha||(Ha={}));var Po;(function(e){e[e.UI=1]="UI",e[e.Workspace=2]="Workspace"})(Po||(Po={}));var uv=class{static validate(e){if(typeof e.badge=="string"){let t=o4(e.badge,0);if(t<e.badge.length&&(t+=o4(e.badge,t)),e.badge.length>t)throw new Error("The 'badge'-property must be undefined or a short character")}else if(e.badge&&!vr.isThemeIcon(e.badge))throw new Error("The 'badge'-property is not a valid ThemeIcon");if(!e.color&&!e.badge&&!e.tooltip)throw new Error("The decoration is empty");return!0}constructor(e,t,r){this.badge=e,this.tooltip=t,this.color=r}},df=class{constructor(t){this.kind=t}};df=__decorate([pe],df);var An;(function(e){e[e.Light=1]="Light",e[e.Dark=2]="Dark",e[e.HighContrast=3]="HighContrast",e[e.HighContrastLight=4]="HighContrastLight"})(An||(An={}));var Hs=class sy{static isNotebookRange(t){return t instanceof sy?!0:t?typeof t.start=="number"&&typeof t.end=="number":!1}get start(){return this.c}get end(){return this.e}get isEmpty(){return this.c===this.e}constructor(t,r){if(t<0)throw Le("start must be positive");if(r<0)throw Le("end must be positive");t<=r?(this.c=t,this.e=r):(this.c=r,this.e=t)}with(t){let r=this.c,i=this.e;return t.start!==void 0&&(r=t.start),t.end!==void 0&&(i=t.end),r===this.c&&i===this.e?this:new sy(r,i)}},ff=class ny{static validate(t){if(typeof t.kind!="number")throw new Error("NotebookCellData MUST have 'kind' property");if(typeof t.value!="string")throw new Error("NotebookCellData MUST have 'value' property");if(typeof t.languageId!="string")throw new Error("NotebookCellData MUST have 'languageId' property")}static isNotebookCellDataArray(t){return Array.isArray(t)&&t.every(r=>ny.isNotebookCellData(r))}static isNotebookCellData(t){return!0}constructor(t,r,i,s,n,o,a){this.kind=t,this.value=r,this.languageId=i,this.mime=s,this.outputs=n??[],this.metadata=o,this.executionSummary=a,ny.validate(this)}},A9=class{constructor(e){this.cells=e}},T9=class rn{static isNotebookCellOutputItem(t){return t instanceof rn?!0:t?typeof t.mime=="string"&&t.data instanceof Uint8Array:!1}static error(t){const r={name:t.name,message:t.message,stack:t.stack};return rn.json(r,"application/vnd.code.notebook.error")}static stdout(t){return rn.text(t,"application/vnd.code.notebook.stdout")}static stderr(t){return rn.text(t,"application/vnd.code.notebook.stderr")}static bytes(t,r="application/octet-stream"){return new rn(t,r)}static#e=new TextEncoder;static text(t,r=Ns.text){const i=rn.#e.encode(String(t));return new rn(i,r)}static json(t,r="text/x-json"){const i=JSON.stringify(t,void 0,"	");return rn.text(i,r)}constructor(t,r){this.data=t,this.mime=r;const i=X6(r,!0);if(!i)throw new Error(`INVALID mime type: ${r}. Must be in the format "type/subtype[;optionalparameter]"`);this.mime=i}},pf=class oy{static isNotebookCellOutput(t){return t instanceof oy?!0:!t||typeof t!="object"?!1:typeof t.id=="string"&&Array.isArray(t.items)}static ensureUniqueMimeTypes(t,r=!1){const i=new Set,s=new Set;for(let n=0;n<t.length;n++){const o=t[n],a=X6(o.mime);if(!i.has(a)||W7(a)){i.add(a);continue}s.add(n),r&&console.warn(`DUPLICATED mime type '${o.mime}' will be dropped`)}return s.size===0?t:t.filter((n,o)=>!s.has(o))}constructor(t,r,i){this.items=oy.ensureUniqueMimeTypes(t,!0),typeof r=="string"?(this.id=r,this.metadata=i):(this.id=ir(),this.metadata=r??i)}},Io;(function(e){e[e.Markup=1]="Markup",e[e.Code=2]="Code"})(Io||(Io={}));var Ba;(function(e){e[e.Idle=1]="Idle",e[e.Pending=2]="Pending",e[e.Executing=3]="Executing"})(Ba||(Ba={}));var gf;(function(e){e[e.Left=1]="Left",e[e.Right=2]="Right"})(gf||(gf={}));var mf;(function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"})(mf||(mf={}));var FL=class{constructor(e,t){this.text=e,this.alignment=t}},hv;(function(e){e[e.Default=1]="Default",e[e.Preferred=2]="Preferred"})(hv||(hv={}));var vf;(function(e){e[e.Default=1]="Default",e[e.Preferred=2]="Preferred",e[e.Hidden=-1]="Hidden"})(vf||(vf={}));var R9=class{constructor(e,t=[]){this.uri=e,this.provides=Ei(t)}},OL=class{constructor(e){this.label=e}},Bl;(function(e){e[e.Named=1]="Named",e[e.Indexed=2]="Indexed"})(Bl||(Bl={}));var dv=class{constructor(t,r){this.label=t,this.timestamp=r}};dv=__decorate([pe],dv);var za;(function(e){e[e.Production=1]="Production",e[e.Development=2]="Development",e[e.Test=3]="Test"})(za||(za={}));var wf;(function(e){e[e.Node=1]="Node",e[e.Webworker=2]="Webworker"})(wf||(wf={}));var Tn;(function(e){e[e.Other=0]="Other",e[e.Comment=1]="Comment",e[e.String=2]="String",e[e.RegEx=3]="RegEx"})(Tn||(Tn={}));var ML=class{constructor(e,t){this.ranges=e,this.wordPattern=t}},jL=class{constructor(e){this.c=e}get autoForwardAction(){return this.c}},fv;(function(e){e[e.Queued=1]="Queued",e[e.Running=2]="Running",e[e.Passed=3]="Passed",e[e.Failed=4]="Failed",e[e.Skipped=5]="Skipped",e[e.Errored=6]="Errored"})(fv||(fv={}));var _a;(function(e){e[e.Run=1]="Run",e[e.Debug=2]="Debug",e[e.Coverage=3]="Coverage"})(_a||(_a={}));var bf=class{constructor(t=void 0,r=void 0,i=void 0,s=!1,n=!0){this.include=t,this.exclude=r,this.profile=i,this.continuous=s,this.preserveFocus=n}};bf=__decorate([pe],bf);var yf=F1=class{static diff(t,r,i){const s=new F1(t);return s.expectedOutput=r,s.actualOutput=i,s}constructor(t){this.message=t}};yf=F1=__decorate([pe],yf);var zl=class{constructor(t){this.id=t}};zl=__decorate([pe],zl);var UL=class{constructor(e,t,r){this.label=e,this.uri=t,this.position=r}},kf=class{constructor(e,t){this.covered=e,this.total=t,xf(this)}};function xf(e){if(e){if(e.covered>e.total)throw new Error(`The total number of covered items (${e.covered}) cannot be greater than the total (${e.total})`);if(e.total<0)throw new Error(`The number of covered items (${e.total}) cannot be negative`)}}var _l=class A3{static fromDetails(t,r){const i=new kf(0,0),s=new kf(0,0),n=new kf(0,0);for(const a of r)if("branches"in a){i.total+=1,i.covered+=a.executed?1:0;for(const c of a.branches)s.total+=1,s.covered+=c.executed?1:0}else n.total+=1,n.covered+=a.executed?1:0;const o=new A3(t,i,s.total>0?s:void 0,n.total>0?n:void 0);return o.detailedCoverage=r,o}constructor(t,r,i,s,n=[]){this.uri=t,this.statementCoverage=r,this.branchCoverage=i,this.declarationCoverage=s,this.fromTests=n}},L9=class{get executionCount(){return+this.executed}set executionCount(e){this.executed=e}constructor(e,t,r=[]){this.executed=e,this.location=t,this.branches=r}},N9=class{get executionCount(){return+this.executed}set executionCount(e){this.executed=e}constructor(e,t,r){this.executed=e,this.location=t,this.label=r}},F9=class{get executionCount(){return+this.executed}set executionCount(e){this.executed=e}constructor(e,t,r){this.name=e,this.executed=t,this.location=r}},pv;(function(e){e[e.None=0]="None",e[e.Option=1]="Option",e[e.Default=2]="Default",e[e.Preferred=3]="Preferred"})(pv||(pv={}));var gv;(function(e){e[e.Untrusted=0]="Untrusted",e[e.Trusted=1]="Trusted",e[e.Unspecified=2]="Unspecified"})(gv||(gv={}));var mv;(function(e){e[e.Notify=1]="Notify",e[e.OpenBrowser=2]="OpenBrowser",e[e.OpenPreview=3]="OpenPreview",e[e.Silent=4]="Silent",e[e.Ignore=5]="Ignore",e[e.OpenBrowserOnce=6]="OpenBrowserOnce"})(mv||(mv={}));var vv=class{constructor(e,t,r,i,s,n){this.kind=e,this.name=t,this.detail=r,this.uri=i,this.range=s,this.selectionRange=n}},wv=class{constructor(e){this.uri=e}},Ef=class{constructor(e,t){this.original=e,this.modified=t}},O9=class{constructor(e,t,r,i){this.base=e,this.input1=t,this.input2=r,this.result=i}},bv=class{constructor(e,t){this.uri=e,this.viewType=t}},M9=class{constructor(e){this.viewType=e}},yv=class{constructor(e,t){this.uri=e,this.notebookType=t}},kv=class{constructor(e,t,r){this.original=e,this.modified=t,this.notebookType=r}},j9=class{constructor(){}},U9=class{constructor(e,t){this.uri=e,this.inputBoxUri=t}},H9=class{constructor(){}},B9=class{constructor(e){this.textDiffs=e}},xv;(function(e){e[e.Down=0]="Down",e[e.Up=1]="Up"})(xv||(xv={}));var Ev;(function(e){e[e.Action=1]="Action",e[e.Toolbar=2]="Toolbar"})(Ev||(Ev={}));var Sv;(function(e){e[e.Short=1]="Short",e[e.Medium=2]="Medium",e[e.Full=3]="Full"})(Sv||(Sv={}));var HL=class{constructor(e,t,r){this.id=e,this.label=t,this.values=r}},$v;(function(e){e[e.Unhelpful=0]="Unhelpful",e[e.Helpful=1]="Helpful",e[e.Undone=2]="Undone",e[e.Accepted=3]="Accepted",e[e.Bug=4]="Bug"})($v||($v={}));var Wl;(function(e){e[e.Unhelpful=0]="Unhelpful",e[e.Helpful=1]="Helpful"})(Wl||(Wl={}));var Sf=class{constructor(e){if(typeof e!="string"&&e.isTrusted===!0)throw new Error("The boolean form of MarkdownString.isTrusted is NOT supported for chat participants.");this.value=typeof e=="string"?new Jr(e):e}},Vl=class{constructor(e,t){if(typeof e!="string"&&e.isTrusted===!0)throw new Error("The boolean form of MarkdownString.isTrusted is NOT supported for chat participants.");this.value=typeof e=="string"?new Jr(e):e,this.vulnerabilities=t}},ql=class{constructor(e,t){this.participant=e,this.command=t}},$f=class{constructor(e,t,r,i){this.title=e,this.message=t,this.data=r,this.buttons=i}},Cf=class{constructor(e,t){this.value=e,this.baseUri=t}},Pf=class{constructor(e,t){this.value=e,this.value2=e,this.title=t}},Gl=class{constructor(e){this.value=e}},If=class{constructor(e,t){this.value=e,this.task=t}},Jl=class{constructor(e){if(typeof e!="string"&&e.isTrusted===!0)throw new Error("The boolean form of MarkdownString.isTrusted is NOT supported for chat participants.");this.value=typeof e=="string"?new Jr(e):e}},Df=class{constructor(e){this.value=e}},Bs=class{constructor(e,t,r){this.value=e,this.iconPath=t,this.options=r}},Af=class{constructor(e){this.value=e}},Tf=class{constructor(e,t,r){this.value=e,this.license=t,this.snippet=r}},Rf=class{constructor(e,t){this.uri=e,this.range=t}},Ql=class{constructor(e,t){this.uri=e,this.edits=Array.isArray(t)?t:[t]}},z9=class{constructor(e,t,r,i){this.prompt=e,this.command=t,this.references=r,this.participant=i}},_9=class{constructor(e,t,r,i){this.response=e,this.result=t,this.participant=r,this.command=i}},ji;(function(e){e[e.Panel=1]="Panel",e[e.Terminal=2]="Terminal",e[e.Notebook=3]="Notebook",e[e.Editor=4]="Editor"})(ji||(ji={}));var Cv;(function(e){e[e.Complete=1]="Complete",e[e.Partial=2]="Partial",e[e.Omitted=3]="Omitted"})(Cv||(Cv={}));var W9=class{constructor(e,t,r){this.document=e,this.selection=t,this.wholeRange=r}},V9=class{constructor(e){this.cell=e}},hi;(function(e){e[e.User=1]="User",e[e.Assistant=2]="Assistant",e[e.System=3]="System"})(hi||(hi={}));var Lf=class{constructor(e,t,r){this.toolCallId=e,this.content=t,this.isError=r??!1}},q9=class ay{static User(t,r){const i=new ay(hi.User,typeof t=="string"?t:"",r);return i.content2=[t],i}static Assistant(t,r){return new ay(hi.Assistant,t,r)}constructor(t,r,i){this.role=t,this.content=r,this.content2=[r],this.name=i}},Yl=class{constructor(e,t,r){this.name=e,this.toolCallId=t,this.parameters=r}},Xl=class{constructor(e){this.value=e}},zs=class qo extends Error{static NotFound(t){return new qo(t,qo.NotFound.name)}static NoPermissions(t){return new qo(t,qo.NoPermissions.name)}static Blocked(t){return new qo(t,qo.Blocked.name)}constructor(t,r,i){super(t,{cause:i}),this.name="LanguageModelError",this.code=r??""}},Pv;(function(e){e[e.SymbolInformation=1]="SymbolInformation",e[e.CommandInformation=2]="CommandInformation",e[e.SearchInformation=3]="SearchInformation",e[e.SettingInformation=4]="SettingInformation"})(Pv||(Pv={}));var Iv;(function(e){e[e.Started=1]="Started",e[e.Recognizing=2]="Recognizing",e[e.Recognized=3]="Recognized",e[e.Stopped=4]="Stopped",e[e.Error=5]="Error"})(Iv||(Iv={}));var Dv;(function(e){e[e.Started=1]="Started",e[e.Stopped=2]="Stopped",e[e.Error=3]="Error"})(Dv||(Dv={}));var Av;(function(e){e[e.Recognized=1]="Recognized",e[e.Stopped=2]="Stopped"})(Av||(Av={}));var BL=class{constructor(e,t){this.text=e,this.range=t}},Zl;(function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"})(Zl||(Zl={}));var Ui;(function(e){function t(i){const{selectionStartLineNumber:s,selectionStartColumn:n,positionLineNumber:o,positionColumn:a}=i,c=new Fe(s-1,n-1),l=new Fe(o-1,a-1);return new js(c,l)}e.to=t;function r(i){const{anchor:s,active:n}=i;return{selectionStartLineNumber:s.line+1,selectionStartColumn:s.character+1,positionLineNumber:n.line+1,positionColumn:n.character+1}}e.from=r})(Ui||(Ui={}));var W;(function(e){function t(i){if(!i)return;const{start:s,end:n}=i;return{startLineNumber:s.line+1,startColumn:s.character+1,endLineNumber:n.line+1,endColumn:n.character+1}}e.from=t;function r(i){if(!i)return;const{startLineNumber:s,startColumn:n,endLineNumber:o,endColumn:a}=i;return new Re(s-1,n-1,o-1,a-1)}e.to=r})(W||(W={}));var Rn;(function(e){function t(i){return{uri:i.uri,range:W.from(i.range)}}e.from=t;function r(i){return new ii(k.revive(i.uri),W.to(i.range))}e.to=r})(Rn||(Rn={}));var Tv;(function(e){function t(r){switch(r){case 1:return Tn.Comment;case 0:return Tn.Other;case 3:return Tn.RegEx;case 2:return Tn.String}}e.to=t})(Tv||(Tv={}));var Ze;(function(e){function t(i){return new Fe(i.lineNumber-1,i.column-1)}e.to=t;function r(i){return{lineNumber:i.line+1,column:i.character+1}}e.from=r})(Ze||(Ze={}));var Wa;(function(e){function t(s,n,o){return Rt(Ei(s).map(a=>r(a,n,o)))}e.from=t;function r(s,n,o){if(typeof s=="string")return{$serialized:!0,language:s,isBuiltin:o?.isBuiltin};if(s)return{$serialized:!0,language:s.language,scheme:i(s.scheme,n),pattern:Qr.from(s.pattern)??void 0,exclusive:s.exclusive,notebookType:s.notebookType,isBuiltin:o?.isBuiltin}}function i(s,n){return n&&typeof s=="string"?n.transformOutgoingScheme(s):s}})(Wa||(Wa={}));var Nf;(function(e){function t(i){switch(i){case bo.Unnecessary:return 1;case bo.Deprecated:return 2}}e.from=t;function r(i){switch(i){case 1:return bo.Unnecessary;case 2:return bo.Deprecated;default:return}}e.to=r})(Nf||(Nf={}));var Va;(function(e){function t(i){let s;return i.code&&(Me(i.code)||li(i.code)?s=String(i.code):s={value:String(i.code.value),target:i.code.target}),{...W.from(i.range),message:i.message,source:i.source,code:s,severity:Of.from(i.severity),relatedInformation:i.relatedInformation&&i.relatedInformation.map(Ff.from),tags:Array.isArray(i.tags)?Rt(i.tags.map(Nf.from)):void 0}}e.from=t;function r(i){const s=new jd(W.to(i),i.message,Of.to(i.severity));return s.source=i.source,s.code=Me(i.code)?i.code:i.code?.value,s.relatedInformation=i.relatedInformation&&i.relatedInformation.map(Ff.to),s.tags=i.tags&&Rt(i.tags.map(Nf.to)),s}e.to=r})(Va||(Va={}));var Ff;(function(e){function t(i){return{...W.from(i.location.range),message:i.message,resource:i.location.uri}}e.from=t;function r(i){return new bl(new ii(i.resource,W.to(i)),i.message)}e.to=r})(Ff||(Ff={}));var Of;(function(e){function t(i){switch(i){case pr.Error:return Pr.Error;case pr.Warning:return Pr.Warning;case pr.Information:return Pr.Info;case pr.Hint:return Pr.Hint}return Pr.Error}e.from=t;function r(i){switch(i){case Pr.Info:return pr.Information;case Pr.Warning:return pr.Warning;case Pr.Error:return pr.Error;case Pr.Hint:return pr.Hint;default:return pr.Error}}e.to=r})(Of||(Of={}));var Gt;(function(e){function t(i){return typeof i=="number"&&i>=Cl.One?i-1:i===Cl.Beside?lL:cL}e.from=t;function r(i){if(typeof i=="number"&&i>=0)return i+1;throw new Error("invalid 'EditorGroupColumn'")}e.to=r})(Gt||(Gt={}));function zL(e){return typeof e.range<"u"}function G9(e){return e.length===0?!0:!!zL(e[0])}var Oe;(function(e){function t(a){return a.map(e.from)}e.fromMany=t;function r(a){return a&&typeof a=="object"&&typeof a.language=="string"&&typeof a.value=="string"}function i(a){let c;if(r(a)){const{language:h,value:d}=a;c={value:"```"+h+`
`+d+"\n```\n"}}else Jr.isMarkdownString(a)?c={value:a.value,isTrusted:a.isTrusted,supportThemeIcons:a.supportThemeIcons,supportHtml:a.supportHtml,baseUri:a.baseUri}:typeof a=="string"?c={value:a}:c={value:""};const l=Object.create(null);c.uris=l;const u=({href:h})=>{try{let d=k.parse(h,!0);d=d.with({query:s(d.query,l)}),l[h]=d}catch{}return""};return Y6.walkTokens(Y6.lexer(c.value),h=>{h.type==="link"?u({href:h.href}):h.type==="image"&&typeof h.href=="string"&&u(dT(h.href))}),c}e.from=i;function s(a,c){if(!a)return a;let l;try{l=i5(a)}catch{}if(!l)return a;let u=!1;return l=Wh(l,h=>{if(k.isUri(h)){const d=`__uri_${Math.random().toString(16).slice(2,8)}`;return c[d]=h,u=!0,d}else return}),u?JSON.stringify(l):a}function n(a){const c=new Jr(a.value,a.supportThemeIcons);return c.isTrusted=a.isTrusted,c.supportHtml=a.supportHtml,c.baseUri=a.baseUri?k.from(a.baseUri):void 0,c}e.to=n;function o(a){if(a)return typeof a=="string"?a:e.from(a)}e.fromStrict=o})(Oe||(Oe={}));function _L(e){return G9(e)?e.map(t=>({range:W.from(t.range),hoverMessage:Array.isArray(t.hoverMessage)?Oe.fromMany(t.hoverMessage):t.hoverMessage?Oe.from(t.hoverMessage):void 0,renderOptions:t.renderOptions})):e.map(t=>({range:W.from(t)}))}function Mf(e){return typeof e>"u"?e:typeof e=="string"?k.file(e):e}var qa;(function(e){function t(r){return typeof r>"u"?r:{contentText:r.contentText,contentIconPath:r.contentIconPath?Mf(r.contentIconPath):void 0,border:r.border,borderColor:r.borderColor,fontStyle:r.fontStyle,fontWeight:r.fontWeight,textDecoration:r.textDecoration,color:r.color,backgroundColor:r.backgroundColor,margin:r.margin,width:r.width,height:r.height}}e.from=t})(qa||(qa={}));var jf;(function(e){function t(r){return typeof r>"u"?r:{backgroundColor:r.backgroundColor,outline:r.outline,outlineColor:r.outlineColor,outlineStyle:r.outlineStyle,outlineWidth:r.outlineWidth,border:r.border,borderColor:r.borderColor,borderRadius:r.borderRadius,borderSpacing:r.borderSpacing,borderStyle:r.borderStyle,borderWidth:r.borderWidth,fontStyle:r.fontStyle,fontWeight:r.fontWeight,textDecoration:r.textDecoration,cursor:r.cursor,color:r.color,opacity:r.opacity,letterSpacing:r.letterSpacing,gutterIconPath:r.gutterIconPath?Mf(r.gutterIconPath):void 0,gutterIconSize:r.gutterIconSize,overviewRulerColor:r.overviewRulerColor,before:r.before?qa.from(r.before):void 0,after:r.after?qa.from(r.after):void 0}}e.from=t})(jf||(jf={}));var Rv;(function(e){function t(r){if(typeof r>"u")return r;switch(r){case ko.OpenOpen:return 0;case ko.ClosedClosed:return 1;case ko.OpenClosed:return 2;case ko.ClosedOpen:return 3}}e.from=t})(Rv||(Rv={}));var Lv;(function(e){function t(r){return{isWholeLine:r.isWholeLine,rangeBehavior:r.rangeBehavior?Rv.from(r.rangeBehavior):void 0,overviewRulerLane:r.overviewRulerLane,light:r.light?jf.from(r.light):void 0,dark:r.dark?jf.from(r.dark):void 0,backgroundColor:r.backgroundColor,outline:r.outline,outlineColor:r.outlineColor,outlineStyle:r.outlineStyle,outlineWidth:r.outlineWidth,border:r.border,borderColor:r.borderColor,borderRadius:r.borderRadius,borderSpacing:r.borderSpacing,borderStyle:r.borderStyle,borderWidth:r.borderWidth,fontStyle:r.fontStyle,fontWeight:r.fontWeight,textDecoration:r.textDecoration,cursor:r.cursor,color:r.color,opacity:r.opacity,letterSpacing:r.letterSpacing,gutterIconPath:r.gutterIconPath?Mf(r.gutterIconPath):void 0,gutterIconSize:r.gutterIconSize,overviewRulerColor:r.overviewRulerColor,before:r.before?qa.from(r.before):void 0,after:r.after?qa.from(r.after):void 0}}e.from=t})(Lv||(Lv={}));var Jt;(function(e){function t(i){return{text:i.newText,eol:i.newEol&&Ya.from(i.newEol),range:W.from(i.range)}}e.from=t;function r(i){const s=new Pn(W.to(i.range),i.text);return s.newEol=typeof i.eol>"u"?void 0:Ya.to(i.eol),s}e.to=r})(Jt||(Jt={}));var xr;(function(e){function t(i,s){const n={edits:[]};if(i instanceof vo){const o=new Cy;for(const a of i._allEntries())a._type===1&&k.isUri(a.to)&&a.from===void 0&&o.add(a.to);for(const a of i._allEntries())if(a._type===1){let c;a.options?.contents&&(ArrayBuffer.isView(a.options.contents)?c={type:"base64",value:Mh(re.wrap(a.options.contents))}:c={type:"dataTransferItem",id:a.options.contents._itemId}),n.edits.push({oldResource:a.from,newResource:a.to,options:{...a.options,contents:c},metadata:a.metadata})}else a._type===2?n.edits.push({resource:a.uri,textEdit:Jt.from(a.edit),versionId:o.has(a.uri)?void 0:s?.getTextDocumentVersion(a.uri),metadata:a.metadata}):a._type===6?n.edits.push({resource:a.uri,textEdit:{range:W.from(a.range),text:a.edit.value,insertAsSnippet:!0},versionId:o.has(a.uri)?void 0:s?.getTextDocumentVersion(a.uri),metadata:a.metadata}):a._type===3?n.edits.push({metadata:a.metadata,resource:a.uri,cellEdit:a.edit,notebookMetadata:a.notebookMetadata,notebookVersionId:s?.getNotebookDocumentVersion(a.uri)}):a._type===5&&n.edits.push({metadata:a.metadata,resource:a.uri,notebookVersionId:s?.getNotebookDocumentVersion(a.uri),cellEdit:{editType:1,index:a.index,count:a.count,cells:a.cells.map(nu.from)}})}return n}e.from=t;function r(i){const s=new vo,n=new rr;for(const o of i.edits)if(o.textEdit){const a=o,c=k.revive(a.resource),l=W.to(a.textEdit.range),u=a.textEdit.text,h=a.textEdit.insertAsSnippet;let d;h?d=M1.replace(l,new wo(u)):d=Pn.replace(l,u);const f=n.get(c);f?f.push(d):n.set(c,[d])}else s.renameFile(k.revive(o.oldResource),k.revive(o.newResource),o.options);for(const[o,a]of n)s.set(o,a);return s}e.to=r})(xr||(xr={}));var di;(function(e){const t=Object.create(null);t[lt.File]=0,t[lt.Module]=1,t[lt.Namespace]=2,t[lt.Package]=3,t[lt.Class]=4,t[lt.Method]=5,t[lt.Property]=6,t[lt.Field]=7,t[lt.Constructor]=8,t[lt.Enum]=9,t[lt.Interface]=10,t[lt.Function]=11,t[lt.Variable]=12,t[lt.Constant]=13,t[lt.String]=14,t[lt.Number]=15,t[lt.Boolean]=16,t[lt.Array]=17,t[lt.Object]=18,t[lt.Key]=19,t[lt.Null]=20,t[lt.EnumMember]=21,t[lt.Struct]=22,t[lt.Event]=23,t[lt.Operator]=24,t[lt.TypeParameter]=25;function r(s){return typeof t[s]=="number"?t[s]:6}e.from=r;function i(s){for(const n in t)if(t[n]===s)return Number(n);return lt.Property}e.to=i})(di||(di={}));var _s;(function(e){function t(i){switch(i){case kl.Deprecated:return 1}}e.from=t;function r(i){switch(i){case 1:return kl.Deprecated}}e.to=r})(_s||(_s={}));var Do;(function(e){function t(i){return{name:i.name,kind:di.from(i.kind),tags:i.tags&&i.tags.map(_s.from),containerName:i.containerName,location:Tr.from(i.location)}}e.from=t;function r(i){const s=new Sa(i.name,di.to(i.kind),i.containerName,Tr.to(i.location));return s.tags=i.tags&&i.tags.map(_s.to),s}e.to=r})(Do||(Do={}));var Nv;(function(e){function t(i){const s={name:i.name||"!!MISSING: name!!",detail:i.detail,range:W.from(i.range),selectionRange:W.from(i.selectionRange),kind:di.from(i.kind),tags:i.tags?.map(_s.from)??[]};return i.children&&(s.children=i.children.map(t)),s}e.from=t;function r(i){const s=new xl(i.name,i.detail,di.to(i.kind),W.to(i.range),W.to(i.selectionRange));return Tc(i.tags)&&(s.tags=i.tags.map(_s.to)),i.children&&(s.children=i.children.map(r)),s}e.to=r})(Nv||(Nv={}));var Ao;(function(e){function t(i){const s=new U1(di.to(i.kind),i.name,i.detail||"",k.revive(i.uri),W.to(i.range),W.to(i.selectionRange));return s._sessionId=i._sessionId,s._itemId=i._itemId,s}e.to=t;function r(i,s,n){if(s=s??i._sessionId,n=n??i._itemId,s===void 0||n===void 0)throw new Error("invalid item");return{_sessionId:s,_itemId:n,name:i.name,detail:i.detail,kind:di.from(i.kind),uri:i.uri,range:W.from(i.range),selectionRange:W.from(i.selectionRange),tags:i.tags?.map(_s.from)}}e.from=r})(Ao||(Ao={}));var Fv;(function(e){function t(r){return new x9(Ao.to(r.from),r.fromRanges.map(i=>W.to(i)))}e.to=t})(Fv||(Fv={}));var Ov;(function(e){function t(r){return new E9(Ao.to(r.to),r.fromRanges.map(i=>W.to(i)))}e.to=t})(Ov||(Ov={}));var Tr;(function(e){function t(i){return{range:i.range&&W.from(i.range),uri:i.uri}}e.from=t;function r(i){return new ii(k.revive(i.uri),W.to(i.range))}e.to=r})(Tr||(Tr={}));var Kl;(function(e){function t(i){const s=i,n=i;return{originSelectionRange:s.originSelectionRange?W.from(s.originSelectionRange):void 0,uri:s.targetUri?s.targetUri:n.uri,range:W.from(s.targetRange?s.targetRange:n.range),targetSelectionRange:s.targetSelectionRange?W.from(s.targetSelectionRange):void 0}}e.from=t;function r(i){return{targetUri:k.revive(i.uri),targetRange:W.to(i.range),targetSelectionRange:i.targetSelectionRange?W.to(i.targetSelectionRange):void 0,originSelectionRange:i.originSelectionRange?W.to(i.originSelectionRange):void 0}}e.to=r})(Kl||(Kl={}));var eu;(function(e){function t(i){return{range:W.from(i.range),contents:Oe.fromMany(i.contents),canIncreaseVerbosity:i.canIncreaseVerbosity,canDecreaseVerbosity:i.canDecreaseVerbosity}}e.from=t;function r(i){const s=i.contents.map(Oe.to),n=W.to(i.range),o=i.canIncreaseVerbosity,a=i.canDecreaseVerbosity;return new Hd(s,n,o,a)}e.to=r})(eu||(eu={}));var Mv;(function(e){function t(i){return{range:W.from(i.range),expression:i.expression}}e.from=t;function r(i){return new of(W.to(i.range),i.expression)}e.to=r})(Mv||(Mv={}));var Uf;(function(e){function t(i){if(i instanceof af)return{type:"text",range:W.from(i.range),text:i.text};if(i instanceof cf)return{type:"variable",range:W.from(i.range),variableName:i.variableName,caseSensitiveLookup:i.caseSensitiveLookup};if(i instanceof lf)return{type:"expression",range:W.from(i.range),expression:i.expression};throw new Error("Unknown 'InlineValue' type")}e.from=t;function r(i){switch(i.type){case"text":return{range:W.to(i.range),text:i.text};case"variable":return{range:W.to(i.range),variableName:i.variableName,caseSensitiveLookup:i.caseSensitiveLookup};case"expression":return{range:W.to(i.range),expression:i.expression}}}e.to=r})(Uf||(Uf={}));var Hf;(function(e){function t(i){return{frameId:i.frameId,stoppedLocation:W.from(i.stoppedLocation)}}e.from=t;function r(i){return new iv(i.frameId,W.to(i.stoppedLocation))}e.to=r})(Hf||(Hf={}));var Ga;(function(e){function t(i){return{range:W.from(i.range),kind:i.kind}}e.from=t;function r(i){return new Bd(W.to(i.range),i.kind)}e.to=r})(Ga||(Ga={}));var jv;(function(e){function t(i){return{uri:i.uri,highlights:i.highlights.map(Ga.from)}}e.from=t;function r(i){return new zd(k.revive(i.uri),i.highlights.map(Ga.to))}e.to=r})(jv||(jv={}));var Uv;(function(e){function t(r){switch(r){case 1:return Ca.TriggerCharacter;case 2:return Ca.TriggerForIncompleteCompletions;case 0:default:return Ca.Invoke}}e.to=t})(Uv||(Uv={}));var Hv;(function(e){function t(r){return{triggerKind:Uv.to(r.triggerKind),triggerCharacter:r.triggerCharacter}}e.to=t})(Hv||(Hv={}));var Bf;(function(e){function t(i){switch(i){case $l.Deprecated:return 1}}e.from=t;function r(i){switch(i){case 1:return $l.Deprecated}}e.to=r})(Bf||(Bf={}));var zf;(function(e){const t=new Map([[ke.Method,0],[ke.Function,1],[ke.Constructor,2],[ke.Field,3],[ke.Variable,4],[ke.Class,5],[ke.Interface,7],[ke.Struct,6],[ke.Module,8],[ke.Property,9],[ke.Unit,12],[ke.Value,13],[ke.Constant,14],[ke.Enum,15],[ke.EnumMember,16],[ke.Keyword,17],[ke.Snippet,27],[ke.Text,18],[ke.Color,19],[ke.File,20],[ke.Reference,21],[ke.Folder,23],[ke.Event,10],[ke.Operator,11],[ke.TypeParameter,24],[ke.Issue,26],[ke.User,25]]);function r(n){return t.get(n)??9}e.from=r;const i=new Map([[0,ke.Method],[1,ke.Function],[2,ke.Constructor],[3,ke.Field],[4,ke.Variable],[5,ke.Class],[7,ke.Interface],[6,ke.Struct],[8,ke.Module],[9,ke.Property],[12,ke.Unit],[13,ke.Value],[14,ke.Constant],[15,ke.Enum],[16,ke.EnumMember],[17,ke.Keyword],[27,ke.Snippet],[18,ke.Text],[19,ke.Color],[20,ke.File],[21,ke.Reference],[23,ke.Folder],[10,ke.Event],[11,ke.Operator],[24,ke.TypeParameter],[25,ke.User],[26,ke.Issue]]);function s(n){return i.get(n)??ke.Property}e.to=s})(zf||(zf={}));var Bv;(function(e){function t(r,i){const s=new Gd(r.label);return s.insertText=r.insertText,s.kind=zf.to(r.kind),s.tags=r.tags?.map(Bf.to),s.detail=r.detail,s.documentation=co(r.documentation)?Oe.to(r.documentation):r.documentation,s.sortText=r.sortText,s.filterText=r.filterText,s.preselect=r.preselect,s.commitCharacters=r.commitCharacters,nt.isIRange(r.range)?s.range=W.to(r.range):typeof r.range=="object"&&(s.range={inserting:W.to(r.range.insert),replacing:W.to(r.range.replace)}),s.keepWhitespace=typeof r.insertTextRules>"u"?!1:!!(r.insertTextRules&1),typeof r.insertTextRules<"u"&&r.insertTextRules&4?s.insertText=new wo(r.insertText):(s.insertText=r.insertText,s.textEdit=s.range instanceof Re?new Pn(s.range,s.insertText):void 0),r.additionalTextEdits&&r.additionalTextEdits.length>0&&(s.additionalTextEdits=r.additionalTextEdits.map(n=>Jt.to(n))),s.command=i&&r.command?i.fromInternal(r.command):void 0,s}e.to=t})(Bv||(Bv={}));var _f;(function(e){function t(i){if(typeof i.label!="string"&&!Array.isArray(i.label))throw new TypeError("Invalid label");return{label:i.label,documentation:Oe.fromStrict(i.documentation)}}e.from=t;function r(i){return{label:i.label,documentation:co(i.documentation)?Oe.to(i.documentation):i.documentation}}e.to=r})(_f||(_f={}));var Wf;(function(e){function t(i){return{label:i.label,documentation:Oe.fromStrict(i.documentation),parameters:Array.isArray(i.parameters)?i.parameters.map(_f.from):[],activeParameter:i.activeParameter}}e.from=t;function r(i){return{label:i.label,documentation:co(i.documentation)?Oe.to(i.documentation):i.documentation,parameters:Array.isArray(i.parameters)?i.parameters.map(_f.to):[],activeParameter:i.activeParameter}}e.to=r})(Wf||(Wf={}));var tu;(function(e){function t(i){return{activeSignature:i.activeSignature,activeParameter:i.activeParameter,signatures:Array.isArray(i.signatures)?i.signatures.map(Wf.from):[]}}e.from=t;function r(i){return{activeSignature:i.activeSignature,activeParameter:i.activeParameter,signatures:Array.isArray(i.signatures)?i.signatures.map(Wf.to):[]}}e.to=r})(tu||(tu={}));var zv;(function(e){function t(r,i){const s=new qd(Ze.to(i.position),typeof i.label=="string"?i.label:i.label.map(_v.to.bind(void 0,r)),i.kind&&Vf.to(i.kind));return s.textEdits=i.textEdits&&i.textEdits.map(Jt.to),s.tooltip=co(i.tooltip)?Oe.to(i.tooltip):i.tooltip,s.paddingLeft=i.paddingLeft,s.paddingRight=i.paddingRight,s}e.to=t})(zv||(zv={}));var _v;(function(e){function t(r,i){const s=new Vd(i.label);return s.tooltip=co(i.tooltip)?Oe.to(i.tooltip):i.tooltip,a1.is(i.command)&&(s.command=r.fromInternal(i.command)),i.location&&(s.location=Tr.to(i.location)),s}e.to=t})(_v||(_v={}));var Vf;(function(e){function t(i){return i}e.from=t;function r(i){return i}e.to=r})(Vf||(Vf={}));var To;(function(e){function t(i){return{range:W.from(i.range),url:i.target,tooltip:i.tooltip}}e.from=t;function r(i){let s;if(i.url)try{s=typeof i.url=="string"?k.parse(i.url,!0):k.revive(i.url)}catch{}const n=new Qd(W.to(i.range),s);return n.tooltip=i.tooltip,n}e.to=r})(To||(To={}));var qf;(function(e){function t(i){const s=new Xd(i.label);return i.textEdit&&(s.textEdit=Jt.to(i.textEdit)),i.additionalTextEdits&&(s.additionalTextEdits=i.additionalTextEdits.map(n=>Jt.to(n))),s}e.to=t;function r(i){return{label:i.label,textEdit:i.textEdit?Jt.from(i.textEdit):void 0,additionalTextEdits:i.additionalTextEdits?i.additionalTextEdits.map(s=>Jt.from(s)):void 0}}e.from=r})(qf||(qf={}));var Ja;(function(e){function t(i){return new Ta(i[0],i[1],i[2],i[3])}e.to=t;function r(i){return[i.red,i.green,i.blue,i.alpha]}e.from=r})(Ja||(Ja={}));var Wv;(function(e){function t(i){return{range:W.from(i.range)}}e.from=t;function r(i){return new Sl(W.to(i.range))}e.to=r})(Wv||(Wv={}));var Gf;(function(e){function t(r){switch(r){case 2:return Ia.AfterDelay;case 1:return Ia.Manual;case 3:case 4:return Ia.FocusOut}}e.to=t})(Gf||(Gf={}));var Qa;(function(e){function t(i){switch(i){case Mi.Off:return 0;case Mi.Relative:return 2;case Mi.Interval:return 3;case Mi.On:default:return 1}}e.from=t;function r(i){switch(i){case 0:return Mi.Off;case 2:return Mi.Relative;case 3:return Mi.Interval;case 1:default:return Mi.On}}e.to=r})(Qa||(Qa={}));var Ya;(function(e){function t(i){if(i===Oi.CRLF)return 1;if(i===Oi.LF)return 0}e.from=t;function r(i){if(i===1)return Oi.CRLF;if(i===0)return Oi.LF}e.to=r})(Ya||(Ya={}));var Vv;(function(e){function t(r){if(typeof r=="object")return r.viewId;switch(r){case Eo.SourceControl:return 3;case Eo.Window:return 10;case Eo.Notification:return 15}throw new Error("Unknown 'ProgressLocation'")}e.from=t})(Vv||(Vv={}));var Jf;(function(e){function t(i){const s={start:i.start+1,end:i.end+1};return i.kind&&(s.kind=Qf.from(i.kind)),s}e.from=t;function r(i){const s={start:i.start-1,end:i.end-1};return i.kind&&(s.kind=Qf.to(i.kind)),s}e.to=r})(Jf||(Jf={}));var Qf;(function(e){function t(i){if(i)switch(i){case Us.Comment:return da.Comment;case Us.Imports:return da.Imports;case Us.Region:return da.Region}}e.from=t;function r(i){if(i)switch(i.value){case da.Comment.value:return Us.Comment;case da.Imports.value:return Us.Imports;case da.Region.value:return Us.Region}}e.to=r})(Qf||(Qf={}));var ru;(function(e){function t(r){if(r)return{pinned:typeof r.preview=="boolean"?!r.preview:void 0,inactive:r.background,preserveFocus:r.preserveFocus,selection:typeof r.selection=="object"?W.from(r.selection):void 0,override:typeof r.override=="boolean"?CT.id:void 0}}e.from=t})(ru||(ru={}));var Qr;(function(e){function t(n){return n instanceof Na?n.toJSON():typeof n=="string"?n:r(n)||i(n)?new Na(n.baseUri??n.base,n.pattern).toJSON():n}e.from=t;function r(n){const o=n;return o?k.isUri(o.baseUri)&&typeof o.pattern=="string":!1}function i(n){const o=n;return o?typeof o.base=="string"&&typeof o.pattern=="string":!1}function s(n){return typeof n=="string"?n:new Na(k.revive(n.baseUri),n.pattern)}e.to=s})(Qr||(Qr={}));var qv;(function(e){function t(r){if(r){if(Array.isArray(r))return r.map(t);if(typeof r=="string")return r;{const i=r;return{language:i.language,scheme:i.scheme,pattern:Qr.from(i.pattern),exclusive:i.exclusive,notebookType:i.notebookType}}}else return}e.from=t})(qv||(qv={}));var Yf;(function(e){function t(i){return!!i&&typeof i=="object"&&"documents"in i&&Array.isArray(i.documents)&&i.documents.every(s=>Array.isArray(s)&&s.every(iu.is))}e.is=t;function r(i){return{documents:i.documents.map(s=>s.map(iu.from)),conversation:i.conversation?.map(s=>s.type==="request"?{type:"request",message:s.message}:{type:"response",message:s.message,references:s.references?.map(iu.from)})}}e.from=r})(Yf||(Yf={}));var iu;(function(e){function t(i){return typeof i=="object"&&i!==null&&"uri"in i&&k.isUri(i.uri)&&"version"in i&&typeof i.version=="number"&&"ranges"in i&&Array.isArray(i.ranges)&&i.ranges.every(s=>s instanceof Re)}e.is=t;function r(i){return{uri:k.from(i.uri),version:i.version,ranges:i.ranges.map(s=>W.from(s))}}e.from=r})(iu||(iu={}));var us;(function(e){function t(i){return{start:i.start,end:i.end}}e.from=t;function r(i){return new Hs(i.start,i.end)}e.to=r})(us||(us={}));var Xa;(function(e){function t(i){return{timing:typeof i.runStartTime=="number"&&typeof i.runEndTime=="number"?{startTime:i.runStartTime,endTime:i.runEndTime}:void 0,executionOrder:i.executionOrder,success:i.lastRunSuccess}}e.to=t;function r(i){return{lastRunSuccess:i.success,runStartTime:i.timing?.startTime,runEndTime:i.timing?.endTime,executionOrder:i.executionOrder}}e.from=r})(Xa||(Xa={}));var Gv;(function(e){function t(r){if(r===pl.Unconfirmed)return Ba.Pending;if(r===pl.Pending)return;if(r===pl.Executing)return Ba.Executing;throw new Error(`Unknown state: ${r}`)}e.to=t})(Gv||(Gv={}));var su;(function(e){function t(i){switch(i){case Io.Markup:return ya.Markup;case Io.Code:default:return ya.Code}}e.from=t;function r(i){switch(i){case ya.Markup:return Io.Markup;case ya.Code:default:return Io.Code}}e.to=r})(su||(su={}));var Ln;(function(e){function t(i){const s={metadata:i.metadata??Object.create(null),cells:[]};for(const n of i.cells)ff.validate(n),s.cells.push(nu.from(n));return s}e.from=t;function r(i){const s=new A9(i.cells.map(nu.to));return g4(i.metadata)||(s.metadata=i.metadata),s}e.to=r})(Ln||(Ln={}));var nu;(function(e){function t(i){return{cellKind:su.from(i.kind),language:i.languageId,mime:i.mime,source:i.value,metadata:i.metadata,internalMetadata:Xa.from(i.executionSummary??{}),outputs:i.outputs?i.outputs.map(Nn.from):[]}}e.from=t;function r(i){return new ff(su.to(i.cellKind),i.source,i.language,i.mime,i.outputs?i.outputs.map(Nn.to):void 0,i.metadata,i.internalMetadata?Xa.to(i.internalMetadata):void 0)}e.to=r})(nu||(nu={}));var Za;(function(e){function t(i){return{mime:i.mime,valueBytes:re.wrap(i.data)}}e.from=t;function r(i){return new T9(i.valueBytes.buffer,i.mime)}e.to=r})(Za||(Za={}));var Nn;(function(e){function t(i){return{outputId:i.id,items:i.items.map(Za.from),metadata:i.metadata}}e.from=t;function r(i){const s=i.items.map(Za.to);return new pf(s,i.outputId,i.metadata)}e.to=r})(Nn||(Nn={}));var Xf;(function(e){function t(s){return i(s)?{include:Qr.from(s.include)??void 0,exclude:Qr.from(s.exclude)??void 0}:Qr.from(s)??void 0}e.from=t;function r(s){return i(s)?{include:Qr.to(s.include),exclude:Qr.to(s.exclude)}:Qr.to(s)}e.to=r;function i(s){const n=s;return n?!Lt(n.include)&&!Lt(n.exclude):!1}})(Xf||(Xf={}));var Jv;(function(e){function t(r,i,s){const n=typeof r.command=="string"?{title:"",command:r.command}:r.command;return{alignment:r.alignment===gf.Left?1:2,command:i.toInternal(n,s),text:r.text,tooltip:r.tooltip,accessibilityInformation:r.accessibilityInformation,priority:r.priority}}e.from=t})(Jv||(Jv={}));var Qv;(function(e){function t(r,i,s){const n=typeof r.command=="string"?{title:"",command:r.command}:r.command;return{command:i.toInternal(n,s),label:r.label,description:r.description,detail:r.detail,documentation:r.documentation}}e.from=t})(Qv||(Qv={}));var Yv;(function(e){function t(r){return{transientOutputs:r?.transientOutputs??!1,transientCellMetadata:r?.transientCellMetadata??{},transientDocumentMetadata:r?.transientDocumentMetadata??{},cellContentMetadata:r?.cellContentMetadata??{}}}e.from=t})(Yv||(Yv={}));var Zf;(function(e){function t(i){return{uri:i.uri,provides:i.provides}}e.from=t;function r(i){return new R9(k.revive(i.uri),i.provides)}e.to=r})(Zf||(Zf={}));var Ka;(function(e){function t(i){return{message:Oe.fromStrict(i.message)||"",type:0,expected:i.expectedOutput,actual:i.actualOutput,contextValue:i.contextValue,location:i.location&&{range:W.from(i.location.range),uri:i.location.uri},stackTrace:i.stackTrace?.map(s=>({label:s.label,position:s.position&&Ze.from(s.position),uri:s.uri&&k.revive(s.uri).toJSON()}))}}e.from=t;function r(i){const s=new yf(typeof i.message=="string"?i.message:Oe.to(i.message));return s.actualOutput=i.actual,s.expectedOutput=i.expected,s.contextValue=i.contextValue,s.location=i.location?Tr.to(i.location):void 0,s}e.to=r})(Ka||(Ka={}));var Hi;(function(e){e.namespace=Pd,e.denamespace=K7})(Hi||(Hi={}));var Fn;(function(e){function t(i){const s=Nd(i).controllerId;return{extId:ze.fromExtHostTestItem(i,s).toString(),label:i.label,uri:k.revive(i.uri),busy:i.busy,tags:i.tags.map(n=>Hi.namespace(s,n.id)),range:nt.lift(W.from(i.range)),description:i.description||null,sortText:i.sortText||null,error:i.error&&Oe.fromStrict(i.error)||null}}e.from=t;function r(i){return{parent:void 0,error:void 0,id:ze.fromString(i.extId).localId,label:i.label,uri:k.revive(i.uri),tags:(i.tags||[]).map(s=>{const{tagId:n}=Hi.denamespace(s);return new zl(n)}),children:{add:()=>{},delete:()=>{},forEach:()=>{},*[Symbol.iterator](){},get:()=>{},replace:()=>{},size:0},range:W.to(i.range||void 0),canResolveChildren:!1,busy:i.busy,description:i.description||void 0,sortText:i.sortText||void 0}}e.toPlain=r})(Fn||(Fn={})),function(e){function t(i){return{id:i.id}}e.from=t;function r(i){return new zl(i.id)}e.to=r}(Hi||(Hi={}));var Xv;(function(e){const t=(i,s)=>{const n=i.value;if(!n)return;const o={...Fn.toPlain(n.item),parent:s,taskStates:n.tasks.map(a=>({state:a.state,duration:a.duration,messages:a.messages.filter(c=>c.type===0).map(Ka.to)})),children:[]};if(i.children)for(const a of i.children.values()){const c=t(a,o);c&&o.children.push(c)}return o};function r(i){const s=new pT;for(const a of i.items)s.insert(ze.fromString(a.item.extId).path,a);const n=[s.nodes],o=[];for(;n.length;)for(const a of n.pop())a.value?o.push(a):a.children&&n.push(a.children.values());return{completedAt:i.completedAt,results:o.map(a=>t(a)).filter(to)}}e.to=r})(Xv||(Xv={}));var ou;(function(e){function t(a){return{covered:a.covered,total:a.total}}function r(a){return"line"in a?Ze.from(a):W.from(a)}function i(a){if(a)return"endLineNumber"in a?W.to(a):Ze.to(a)}function s(a){if(a.type===1){const c=[];if(a.branches)for(const l of a.branches)c.push({executed:l.count,location:i(l.location),label:l.label});return new L9(a.count,i(a.location),a.branches?.map(l=>new N9(l.count,i(l.location),l.label)))}else return new F9(a.name,a.count,i(a.location))}e.to=s;function n(a){if(typeof a.executed=="number"&&a.executed<0)throw new Error(`Invalid coverage count ${a.executed}`);return"branches"in a?{count:a.executed,location:r(a.location),type:1,branches:a.branches.length?a.branches.map(c=>({count:c.executed,location:c.location&&r(c.location),label:c.label})):void 0}:{type:0,name:a.name,count:a.executed,location:r(a.location)}}e.fromDetails=n;function o(a,c,l){return xf(l.statementCoverage),xf(l.branchCoverage),xf(l.declarationCoverage),{id:c,uri:l.uri,statement:t(l.statementCoverage),branch:l.branchCoverage&&t(l.branchCoverage),declaration:l.declarationCoverage&&t(l.declarationCoverage),testIds:l instanceof _l&&l.fromTests.length?l.fromTests.map(u=>ze.fromExtHostTestItem(u,a).toString()):void 0}}e.fromFile=o})(ou||(ou={}));var Zv;(function(e){function t(r){switch(r){case 1:return El.Invoke;case 2:return El.Automatic}}e.to=t})(Zv||(Zv={}));var Ro;(function(e){function t(i){const s=new vv(di.to(i.kind),i.name,i.detail||"",k.revive(i.uri),W.to(i.range),W.to(i.selectionRange));return s._sessionId=i._sessionId,s._itemId=i._itemId,s}e.to=t;function r(i,s,n){if(s=s??i._sessionId,n=n??i._itemId,s===void 0||n===void 0)throw new Error("invalid item");return{_sessionId:s,_itemId:n,kind:di.from(i.kind),name:i.name,detail:i.detail??"",uri:i.uri,range:W.from(i.range),selectionRange:W.from(i.selectionRange),tags:i.tags?.map(_s.from)}}e.from=r})(Ro||(Ro={}));var Kf;(function(e){function t(r){if(r)return{value:r.value,tooltip:r.tooltip}}e.from=t})(Kf||(Kf={}));var ep;(function(e){function t(n,o,a){const c=o.fileData;return c?new PL(new IL(c.name,k.revive(c.uri),c.id,Yg(()=>a(c.id)))):n===Ns.uriList&&o.uriListData?new rf(s(o.uriListData)):new rf(o.asString)}e.to=t;async function r(n,o){const a=await o.asString();if(n===Ns.uriList)return{asString:a,fileData:void 0,uriListData:i(a)};const c=o.asFile();return{asString:a,fileData:c?{name:c.name,uri:c.uri,id:c._itemId??c.id}:void 0}}e.from=r;function i(n){return Xm.split(n).map(o=>{if(o.startsWith("#"))return o;try{return k.parse(o)}catch{}return o})}function s(n){return Xm.create(n.map(o=>typeof o=="string"?o:k.revive(o)))}})(ep||(ep={}));var On;(function(e){function t(i,s){const n=i.items.map(([o,a])=>[o,ep.to(o,a,s)]);return new Dl(n)}e.toDataTransfer=t;async function r(i){const s={items:[]},n=[];for(const[o,a]of i)n.push((async()=>{s.items.push([o,await ep.from(o,a)])})());return await Promise.all(n),s}e.from=r})(On||(On={}));var au;(function(e){function t(i,s){return{kind:"reply",agentId:i.participant??s?.agentId??"",subCommand:i.command??s?.command,message:i.prompt,title:i.label}}e.from=t;function r(i){return{prompt:i.message,label:i.title,participant:i.agentId,command:i.subCommand}}e.to=r})(au||(au={}));var tp;(function(e){function t(i){switch(i){case 0:return hi.System;case 1:return hi.User;case 2:return hi.Assistant}}e.to=t;function r(i){switch(i){case hi.System:return 0;case hi.User:return 1;case hi.Assistant:return 2}return 1}e.from=r})(tp||(tp={}));var ec;(function(e){function t(i){const s=i.content.map(c=>c.type==="text"?c.value:c.type==="tool_result"?new Lf(c.toolCallId,c.value,c.isError):new Yl(c.name,c.toolCallId,c.parameters)),n=s.find(c=>typeof c=="string")??"",o=tp.to(i.role),a=new q9(o,n,i.name);return a.content2=s,a}e.to=t;function r(i){const s=tp.from(i.role),n=i.name,o=i.content2.map(a=>{if(a instanceof Lf)return{type:"tool_result",toolCallId:a.toolCallId,value:a.content,isError:a.isError};if(a instanceof Yl)return{type:"tool_use",toolCallId:a.toolCallId,name:a.name,parameters:a.parameters};if(typeof a!="string")throw new Error("Unexpected chat message content type");return{type:"text",value:a}});return{role:s,name:n,content:o}}e.from=r})(ec||(ec={}));var cu;(function(e){function t(i){return{kind:"markdownContent",content:Oe.from(i.value)}}e.from=t;function r(i){return new Sf(Oe.to(i.content))}e.to=r})(cu||(cu={}));var rp;(function(e){function t(i){return{kind:"codeblockUri",uri:i.value}}e.from=t;function r(i){return new Af(k.revive(i.uri))}e.to=r})(rp||(rp={}));var ip;(function(e){function t(i){return{kind:"markdownVuln",content:Oe.from(i.value),vulnerabilities:i.vulnerabilities}}e.from=t;function r(i){return new Vl(Oe.to(i.content),i.vulnerabilities)}e.to=r})(ip||(ip={}));var sp;(function(e){function t(i){return{kind:"agentDetection",agentId:i.participant,command:i.command}}e.from=t;function r(i){return new ql(i.agentId,i.command)}e.to=r})(sp||(sp={}));var np;(function(e){function t(r){return{kind:"confirmation",title:r.title,message:r.message,data:r.data,buttons:r.buttons}}e.from=t})(np||(np={}));var lu;(function(e){function t(i){const{value:s,baseUri:n}=i;function o(a,c){return a.map(l=>{const u=k.joinPath(c,l.name);return{label:l.name,uri:u,children:l.children&&o(l.children,u)}})}return{kind:"treeData",treeData:{label:es(n),uri:n,children:o(s,n)}}}e.from=t;function r(i){const s=dr(i.treeData);function n(c){return c.map(l=>({name:l.label,children:l.children&&n(l.children)}))}const o=s.uri,a=s.children?n(s.children):[];return new Cf(a,o)}e.to=r})(lu||(lu={}));var uu;(function(e){function t(i){const s=o=>k.isUri(o),n=o=>o instanceof Sa;return{kind:"inlineReference",name:i.title,inlineReference:s(i.value)?i.value:n(i.value)?Do.from(i.value):Rn.from(i.value)}}e.from=t;function r(i){const s=dr(i);return new Pf(k.isUri(s.inlineReference)?s.inlineReference:"location"in s.inlineReference?Do.to(s.inlineReference):Rn.to(s.inlineReference),i.name)}e.to=r})(uu||(uu={}));var Lo;(function(e){function t(i){return{kind:"progressMessage",content:Oe.from(i.value)}}e.from=t;function r(i){return new Gl(i.content.value)}e.to=r})(Lo||(Lo={}));var hu;(function(e){function t(i){return{kind:"warning",content:Oe.from(i.value)}}e.from=t;function r(i){return new Jl(i.content.value)}e.to=r})(hu||(hu={}));var Kv;(function(e){function t(i){return{kind:"move",uri:i.uri,range:W.from(i.range)}}e.from=t;function r(i){return new Rf(k.revive(i.uri),W.to(i.range))}e.to=r})(Kv||(Kv={}));var op;(function(e){function t(r){return{kind:"progressTask",content:Oe.from(r.value)}}e.from=t})(op||(op={}));var e0;(function(e){function t(r){return{kind:"progressTaskResult",content:typeof r=="string"?Oe.from(r):void 0}}e.from=t})(e0||(e0={}));var du;(function(e){function t(i,s,n){return{kind:"command",command:s.toInternal(i.value,n)??{command:i.value.command,title:i.value.title}}}e.from=t;function r(i,s){return new Df(s.fromInternal(i.command)??{command:i.command.id,title:i.command.title})}e.to=r})(du||(du={}));var ap;(function(e){function t(i){return{kind:"textEdit",uri:i.uri,edits:i.edits.map(s=>Jt.from(s))}}e.from=t;function r(i){return new Ql(k.revive(i.uri),i.edits.map(s=>Jt.to(s)))}e.to=r})(ap||(ap={}));var Ws;(function(e){function t(i){const s=or.isThemeIcon(i.iconPath)?i.iconPath:k.isUri(i.iconPath)?{light:k.revive(i.iconPath)}:i.iconPath&&"light"in i.iconPath&&"dark"in i.iconPath&&k.isUri(i.iconPath.light)&&k.isUri(i.iconPath.dark)?{light:k.revive(i.iconPath.light),dark:k.revive(i.iconPath.dark)}:void 0;return typeof i.value=="object"&&"variableName"in i.value?{kind:"reference",reference:{variableName:i.value.variableName,value:k.isUri(i.value.value)||!i.value.value?i.value.value:Rn.from(i.value.value)},iconPath:s,options:i.options}:{kind:"reference",reference:k.isUri(i.value)||typeof i.value=="string"?i.value:Rn.from(i.value),iconPath:s,options:i.options}}e.from=t;function r(i){const s=dr(i),n=o=>k.isUri(o)?o:Rn.to(o);return new Bs(typeof s.reference=="string"?s.reference:"variableName"in s.reference?{variableName:s.reference.variableName,value:s.reference.value&&n(s.reference.value)}:n(s.reference))}e.to=r})(Ws||(Ws={}));var cp;(function(e){function t(r){return{kind:"codeCitation",value:r.value,license:r.license,snippet:r.snippet}}e.from=t})(cp||(cp={}));var lp;(function(e){function t(s,n,o){return s instanceof Sf?cu.from(s):s instanceof Pf?uu.from(s):s instanceof Bs?Ws.from(s):s instanceof Gl?Lo.from(s):s instanceof Cf?lu.from(s):s instanceof Df?du.from(s,n,o):s instanceof Ql?ap.from(s):s instanceof Vl?ip.from(s):s instanceof Af?rp.from(s):s instanceof ql?sp.from(s):s instanceof Jl?hu.from(s):s instanceof $f?np.from(s):s instanceof Tf?cp.from(s):s instanceof Rf?Kv.from(s):{kind:"markdownContent",content:Oe.from("")}}e.from=t;function r(s,n){switch(s.kind){case"reference":return Ws.to(s);case"markdownContent":case"inlineReference":case"progressMessage":case"treeData":case"command":return i(s,n)}}e.to=r;function i(s,n){switch(s.kind){case"markdownContent":return cu.to(s);case"inlineReference":return uu.to(s);case"progressMessage":return;case"treeData":return lu.to(s);case"command":return du.to(s,n)}}e.toContent=i})(lp||(lp={}));var up;(function(e){function t(r,i){const s=r.variables.variables.filter(o=>o.isTool),n=r.variables.variables.filter(o=>!o.isTool);return{prompt:r.message,command:r.command,attempt:r.attempt??0,enableCommandDetection:r.enableCommandDetection??!0,isParticipantDetected:r.isParticipantDetected??!1,references:n.map(hp.to),toolReferences:s.map(dp.to),location:fu.to(r.location),acceptedConfirmationData:r.acceptedConfirmationData,rejectedConfirmationData:r.rejectedConfirmationData,location2:i,toolInvocationToken:Object.freeze({sessionId:r.sessionId})}}e.to=t})(up||(up={}));var fu;(function(e){function t(i){switch(i){case Ir.Notebook:return ji.Notebook;case Ir.Terminal:return ji.Terminal;case Ir.Panel:return ji.Panel;case Ir.Editor:return ji.Editor}}e.to=t;function r(i){switch(i){case ji.Notebook:return Ir.Notebook;case ji.Terminal:return Ir.Terminal;case ji.Panel:return Ir.Panel;case ji.Editor:return Ir.Editor}}e.from=r})(fu||(fu={}));var hp;(function(e){function t(r){const i=r.value;if(!i)throw new Error("Invalid value reference");return{id:r.id,name:r.name,range:r.range&&[r.range.start,r.range.endExclusive],value:y4(i)?k.revive(i):i&&typeof i=="object"&&"uri"in i&&"range"in i&&y4(i.uri)?Rn.to(dr(i)):i,modelDescription:r.modelDescription}}e.to=t})(hp||(hp={}));var dp;(function(e){function t(r){if(r.value)throw new Error("Invalid tool reference");return{id:r.id,range:r.range&&[r.range.start,r.range.endExclusive]}}e.to=t})(dp||(dp={}));var t0;(function(e){function t(r,i,s){return{id:r.id,label:r.label,fullName:r.fullName,icon:r.icon?.id,value:r.values[0].value,insertText:r.insertText,detail:r.detail,documentation:r.documentation,command:i.toInternal(r.command,s)}}e.from=t})(t0||(t0={}));var tc;(function(e){function t(r){return{errorDetails:r.errorDetails,metadata:r.metadata,nextQuestion:r.nextQuestion}}e.to=t})(tc||(tc={}));var r0;(function(e){function t(r,i,s){if(i.action.kind==="vote")return;const n=tc.to(r);if(i.action.kind==="command"){const o=i.action.commandButton.command;return{action:{kind:"command",commandButton:{command:s.fromInternal(o)??{command:o.id,title:o.title}}},result:n}}else return i.action.kind==="followUp"?{action:{kind:"followUp",followup:au.to(i.action.followup)},result:n}:i.action.kind==="inlineChat"?{action:{kind:"editor",accepted:i.action.action==="accepted"},result:n}:{action:i.action,result:n}}e.to=t})(r0||(r0={}));var fp;(function(e){function t(r,i,s){return"terminalCommand"in r?{terminalCommand:r.terminalCommand,shouldExecute:r.shouldExecute}:"uri"in r?{uri:r.uri}:i.toInternal(r,s)}e.from=t})(fp||(fp={}));var i0;(function(e){function t(r){return{kind:s0.to(r.kind)}}e.to=t})(i0||(i0={}));var s0;(function(e){function t(r){switch(r){case 0:return yo.Word;case 1:return yo.Line;case 2:return yo.Suggest;default:return yo.Unknown}}e.to=t})(s0||(s0={}));var n0;(function(e){function t(r,i){return{id:i,label:r.label,description:r.description,canEdit:r.canEdit,collapsibleState:r.collapsibleState||0,contextValue:r.contextValue}}e.from=t})(n0||(n0={}));var o0;(function(e){function t(r){return{id:r.id,modelDescription:r.modelDescription,parametersSchema:r.parametersSchema,displayName:r.displayName,supportedContentTypes:r.supportedContentTypes}}e.to=t})(o0||(o0={}));var J9=class cy{constructor(t,r){this.line=t,this.character=r}isBefore(t){return!1}isBeforeOrEqual(t){return!1}isAfter(t){return!1}isAfterOrEqual(t){return!1}isEqual(t){return!1}compareTo(t){return 0}translate(t,r){return new cy(0,0)}with(t){return new cy(0,0)}},Q9=class ly{constructor(t,r,i,s){this.isEmpty=!1,this.isSingleLine=!1,this.start=new J9(t,r),this.end=new J9(i,s)}contains(t){return!1}isEqual(t){return!1}intersection(t){}union(t){return new ly(0,0,0,0)}with(t){return new ly(0,0,0,0)}},Vs=class{constructor(e,t,r){this.uri=e,this.ranges=t,this.previewText=r}},pp=class{constructor(e,t,r){this.uri=e,this.text=t,this.lineNumber=r}},fi;(function(e){e[e.None=1]="None",e[e.FilesExclude=2]="FilesExclude",e[e.SearchAndFilesExclude=3]="SearchAndFilesExclude"})(fi||(fi={}));var gp;(function(e){e[e.Information=1]="Information",e[e.Warning=2]="Warning"})(gp||(gp={}));var mp=2e4,Y9="\u27EA ",X9=" characters skipped \u27EB",WL=(Y9.length+X9.length+5)*2,jV=X("searchService"),Z9;(function(e){e[e.file=0]="file",e[e.text=1]="text",e[e.aiText=2]="aiText"})(Z9||(Z9={}));var K9;(function(e){e[e.File=1]="File",e[e.Text=2]="Text",e[e.aiText=3]="aiText"})(K9||(K9={}));function a0(e){return!!e.rangeLocations&&!!e.previewText}var ex;(function(e){e[e.Normal=0]="Normal",e[e.NewSearchStarted=1]="NewSearchStarted"})(ex||(ex={}));var tx=class{constructor(e,t,r,i){this.rangeLocations=[],this.webviewIndex=i;const s=Array.isArray(t)?t:[t];if(r&&r.matchLines===1&&VL(s)){e=ZP(e,r.matchLines);let n="",o=0,a=0;const c=Math.floor(r.charsPerLine/5);for(const l of s){const u=Math.max(l.startColumn-c,0),h=l.startColumn+r.charsPerLine;if(u>a+c+WL){const d=Y9+(u-a)+X9;n+=d+e.slice(u,h),o+=u-(a+d.length)}else n+=e.slice(a,h);a=h,this.rangeLocations.push({source:l,preview:new qL(0,l.startColumn-o,l.endColumn-o)})}this.previewText=n}else{const n=Array.isArray(t)?t[0].startLineNumber:t.startLineNumber,o=fh(t,a=>({preview:new c0(a.startLineNumber-n,a.startColumn,a.endLineNumber-n,a.endColumn),source:a}));this.rangeLocations=Array.isArray(o)?o:[o],this.previewText=e}}};function VL(e){const t=e[0].startLineNumber;for(const r of e)if(r.startLineNumber!==t||r.endLineNumber!==t)return!1;return!0}var c0=class{constructor(e,t,r,i){this.startLineNumber=e,this.startColumn=t,this.endLineNumber=r,this.endColumn=i}},qL=class extends c0{constructor(e,t,r){super(e,t,e,r)}},rx;(function(e){e.List="list",e.Tree="tree"})(rx||(rx={}));var ix;(function(e){e.Default="default",e.FileNames="fileNames",e.Type="type",e.Modified="modified",e.CountDescending="countDescending",e.CountAscending="countAscending"})(ix||(ix={}));function GL(e,t=!0){const r=e&&e.files&&e.files.exclude,i=t&&e&&e.search&&e.search.exclude;if(!r&&!i)return;if(!r||!i)return r||i||void 0;let s=Object.create(null);return s=Ps(s,ut(r)),s=Ps(s,ut(i),!0),s}function sx(e,t){return e.excludePattern&&ba(e.excludePattern,t)?!1:e.includePattern||e.usingSearchPaths?e.includePattern&&ba(e.includePattern,t)?!0:e.usingSearchPaths?!!e.folderQueries&&e.folderQueries.some(r=>{const i=r.folder.fsPath;if(ro(t,i)){const s=Ko(i,t);return!r.includePattern||!!ba(r.includePattern,s)}else return!1}):!1:!0}var Mn;(function(e){e[e.unknownEncoding=1]="unknownEncoding",e[e.regexParseError=2]="regexParseError",e[e.globParseError=3]="globParseError",e[e.invalidLiteral=4]="invalidLiteral",e[e.rgProcessError=5]="rgProcessError",e[e.other=6]="other",e[e.canceled=7]="canceled"})(Mn||(Mn={}));var No=class extends Error{constructor(e,t){super(e),this.code=t}};function nx(e){const t={message:e.message,code:e.code};return new Error(JSON.stringify(t))}function JL(e){return!!e.path}function l0(e,t,r=!0){const i=e.searchPath?e.searchPath:e.relativePath;return r?YP(i,t):ba(t,i)}function rc(e,t){const r={...e||{},...t||{}};return Object.keys(r).filter(i=>{const s=r[i];return typeof s=="boolean"&&s})}var ox=class{constructor(e,t){this.c=null,this.a=t.excludePattern?.map(i=>({...e.excludePattern||{},...i.pattern||{}}))??[],this.a.length===0&&(this.a=[e.excludePattern||{}]),this.b=this.a.map(i=>Ni(i));let r=e.includePattern;t.includePattern&&(r?r={...r,...t.includePattern}:r=t.includePattern),r&&(this.c=Ni(r))}d(e,t,r){let i=null;for(const s of this.b){const n=s(e,t,r);if(typeof n=="string"){i=n;break}}return i}matchesExcludesSync(e,t,r){return!!(this.b&&this.d(e,t,r))}includedInQuerySync(e,t,r){return!(this.b&&this.d(e,t,r)||this.c&&!this.c(e,t,r))}includedInQuery(e,t,r){const i=()=>this.c?!!this.c(e,t,r):!0;return Promise.all(this.b.map(s=>{const n=s(e,t,r);return mn(n)?n.then(o=>o?!1:i()):i()})).then(s=>s.some(n=>!!n))}hasSiblingExcludeClauses(){return this.a.reduce((e,t)=>QL(t)||e,!1)}};function QL(e){for(const t in e)if(typeof e[t]!="boolean")return!0;return!1}function YL(e){if(!e)return;let t;return r=>(t||(t=(e()||Promise.resolve([])).then(i=>i?ax(i):{})),t.then(i=>!!i[r]))}function u0(e){if(!e)return;let t;return r=>{if(!t){const i=e();t=i?ax(i):{}}return!!t[r]}}function ax(e){const t={};for(const r of e)t[r]=!0;return t}function cx(e){return e.flatMap(t=>t.patterns.map(r=>t.baseUri?{baseUri:t.baseUri,pattern:r}:r))}var h0={matchLines:100,charsPerLine:1e4};function pu(e,t,r){return new zc(i=>d0(i,r)).isEqual(e,t)}function XL(e,t,r){return pu(e.uri,t.uri,r)?0:eo(e.uri.toString(),t.uri.toString())}function ZL(e,t,r){return e.index!==t.index?e.index<t.index?-1:1:pu(e.uri,t.uri,r)?eo(e.name,t.name):eo(e.uri.toString(),t.uri.toString())}function lx(e,t,r,i){const s=e.slice(0).sort((o,a)=>r(o,a,i)),n=t.slice(0).sort((o,a)=>r(o,a,i));return RC(s,n,(o,a)=>r(o,a,i))}function d0(e,t){const r=t.getCapabilities(e.scheme);return!(r&&r&1024)}var f0=class uy extends GA{static toExtHostWorkspace(t,r,i,s){if(!t)return{workspace:null,added:[],removed:[]};const{id:n,name:o,folders:a,configuration:c,transient:l,isUntitled:u}=t,h=[],d=r;r?a.forEach((x,$)=>{const C=k.revive(x.uri),L=uy.o(i||r,C,s);L?(L.name=x.name,L.index=x.index,h.push(L)):h.push({uri:C,name:x.name,index:$})}):h.push(...a.map(({uri:x,name:$,index:C})=>({uri:k.revive(x),name:$,index:C}))),h.sort((x,$)=>x.index<$.index?-1:1);const f=new uy(n,o,h,!!l,c?k.revive(c):null,!!u,x=>d0(x,s)),{added:g,removed:v}=lx(d?d.workspaceFolders:[],f.workspaceFolders,XL,s);return{workspace:f,added:g,removed:v}}static o(t,r,i){for(let s=0;s<t.folders.length;s++){const n=t.workspaceFolders[s];if(pu(n.uri,r,i))return n}}constructor(t,r,i,s,n,o,a){super(t,i.map(c=>new Qm(c)),s,n,a),this.t=r,this.u=o,this.q=[],this.s=Ls.forUris(a,()=>!0),i.forEach(c=>{this.q.push(c),this.s.set(c.uri,c)})}get name(){return this.t}get isUntitled(){return this.u}get workspaceFolders(){return this.q.slice(0)}getWorkspaceFolder(t,r){return r&&this.s.get(t)&&(t=Th(t)),this.s.findSubstr(t)}resolveWorkspaceFolder(t){return this.s.get(t)}},p0=class{constructor(t,r,i,s,n){this.c=new T,this.onDidChangeWorkspace=this.c.event,this.g=new T,this.onDidGrantWorkspaceTrust=this.g.event,this.u=[],this.v=!1,this.w=new Map,this.B=0,this.C=new Fc,this.D=new Map,this.h=s,this.s=i,this.t=n,this.j=new zA,this.k=new ui,this.o=t.getProxy(K.MainThreadWorkspace),this.q=t.getProxy(K.MainThreadMessageService);const o=r.workspace;this.l=o?new f0(o.id,o.name,[],!!o.transient,o.configuration?k.revive(o.configuration):null,!!o.isUntitled,a=>d0(a,i)):void 0}$initializeWorkspace(t,r){this.v=r,this.$acceptWorkspaceData(t),this.k.open()}waitForInitializeCall(){return this.k.wait()}get workspace(){return this.x}get name(){return this.x?this.x.name:void 0}get workspaceFile(){if(this.x&&this.x.configuration)return this.x.isUntitled?k.from({scheme:Q.untitled,path:es(Th(this.x.configuration))}):this.x.configuration}get x(){return this.n||this.l}getWorkspaceFolders(){if(this.x)return this.x.workspaceFolders.slice(0)}async getWorkspaceFolders2(){if(await this.k.wait(),!!this.x)return this.x.workspaceFolders.slice(0)}updateWorkspaceFolders(t,r,i,...s){const n=[];if(Array.isArray(s)&&s.forEach(u=>{k.isUri(u.uri)&&!n.some(h=>pu(h.uri,u.uri,this.s))&&n.push({uri:u.uri,name:u.name||mm(u.uri)})}),this.n||[r,i].some(u=>typeof u!="number"||u<0)||i===0&&n.length===0)return!1;const o=this.x?this.x.workspaceFolders:[];if(r+i>o.length)return!1;const a=o.slice(0);a.splice(r,i,...n.map(u=>({uri:u.uri,name:u.name||mm(u.uri),index:void 0})));for(let u=0;u<a.length;u++){const h=a[u];if(a.some((d,f)=>f!==u&&pu(h.uri,d.uri,this.s)))return!1}a.forEach((u,h)=>u.index=h);const{added:c,removed:l}=lx(o,a,ZL,this.s);if(c.length===0&&l.length===0)return!1;if(this.o){const u=t.displayName||t.name;this.o.$updateWorkspaceFolders(u,r,i,n).then(void 0,h=>{this.n=void 0;const d={source:{identifier:t.identifier,label:t.displayName||t.name}};this.q.$showMessage(WA.Error,p(2734,null,u,h.toString()),d,[])})}return this.y(a),!0}getWorkspaceFolder(t,r){if(this.x)return this.x.getWorkspaceFolder(t,r)}async getWorkspaceFolder2(t,r){if(await this.k.wait(),!!this.x)return this.x.getWorkspaceFolder(t,r)}async resolveWorkspaceFolder(t){if(await this.k.wait(),!!this.x)return this.x.resolveWorkspaceFolder(t)}getPath(){if(!this.x)return;const{folders:t}=this.x;if(t.length!==0)return t[0].uri.fsPath}getRelativePath(t,r){let i,s="";if(typeof t=="string"?(i=k.file(t),s=t):typeof t<"u"&&(i=t,s=t.fsPath),!i)return s;const n=this.getWorkspaceFolder(i,!0);if(!n)return s;typeof r>"u"&&this.x&&(r=this.x.folders.length>1);let o=A4(n.uri,i);return r&&n.name&&(o=`${n.name}/${o}`),o}y(t){this.x&&(this.n=f0.toExtHostWorkspace({id:this.x.id,name:this.x.name,configuration:this.x.configuration,folders:t,isUntitled:this.x.isUntitled},this.x,void 0,this.s).workspace||void 0)}$acceptWorkspaceData(t){const{workspace:r,added:i,removed:s}=f0.toExtHostWorkspace(t,this.l,this.n,this.s);this.l=r||void 0,this.n=void 0,this.c.fire(Object.freeze({added:i,removed:s}))}findFiles(t,r,i,s,n=Ke.None){this.h.trace(`extHostWorkspace#findFiles: fileSearch, extension: ${s.value}, entryPoint: findFiles`);let o="",a=!0;return r===null?a=!1:r!==void 0&&(typeof r=="string"?o=r:o=r.pattern),this.z(t,void 0,{exclude:[o],maxResults:i,useExcludeSettings:a?fi.FilesExclude:fi.None,useIgnoreFiles:{local:!1}},n)}findFiles2(t,r={},i,s=Ke.None){this.h.trace(`extHostWorkspace#findFiles2: fileSearch, extension: ${i.value}, entryPoint: findFiles2`);const n=r.useDefaultExcludes??!0,o=r.useDefaultSearchExcludes??!0,a=n?o?fi.SearchAndFilesExclude:fi.FilesExclude:fi.None,c={exclude:r.exclude?[r.exclude]:void 0,useIgnoreFiles:{local:r.useIgnoreFiles,global:r.useGlobalIgnoreFiles,parent:r.useParentIgnoreFiles},useExcludeSettings:a,followSymlinks:r.followSymlinks,maxResults:r.maxResults};return this.z(void 0,t!==void 0?[t]:[],c,s)}findFiles2New(t,r={},i,s=Ke.None){return this.h.trace(`extHostWorkspace#findFiles2New: fileSearch, extension: ${i.value}, entryPoint: findFiles2New`),this.z(void 0,t,r,s)}async z(t,r,i,s=Ke.None){if(s&&s.isCancellationRequested)return Promise.resolve([]);const o=(t!==void 0?[t]:r)?.map(a=>{const c=ux(i.exclude),l={ignoreSymlinks:typeof i.followSymlinks=="boolean"?!i.followSymlinks:void 0,disregardIgnoreFiles:typeof i.useIgnoreFiles?.local=="boolean"?!i.useIgnoreFiles.local:void 0,disregardGlobalIgnoreFiles:typeof i.useIgnoreFiles?.global=="boolean"?!i.useIgnoreFiles.global:void 0,disregardParentIgnoreFiles:typeof i.useIgnoreFiles?.parent=="boolean"?!i.useIgnoreFiles.parent:void 0,disregardExcludeSettings:i.useExcludeSettings!==void 0&&i.useExcludeSettings===fi.None,disregardSearchExcludeSettings:i.useExcludeSettings!==void 0&&i.useExcludeSettings!==fi.SearchAndFilesExclude,maxResults:i.maxResults,excludePattern:c.length>0?c:void 0,_reason:"startFileSearch",shouldGlobSearch:t?void 0:!0},u=vp(Qr.from(a)),h=u?.folder;return t?l.includePattern=u?.pattern:l.filePattern=u?.pattern,{folder:h,options:l}})??[];return this.A(o,s)}async A(t,r){return(await Promise.all(t?.map(s=>this.o.$startFileSearch(s.folder??null,s.options,r).then(n=>Array.isArray(n)?n.map(o=>k.revive(o)):[]))??[])).flat()}findTextInFilesNew(t,r,i,s=Ke.None){this.h.trace(`extHostWorkspace#findTextInFilesNew: textSearch, extension: ${i.value}, entryPoint: findTextInFilesNew`);const n=d=>{if(!r)return{folder:void 0,options:{}};const f=d?vp(Qr.from(d)):void 0,g=r.exclude?ux(r.exclude):void 0;return{options:{ignoreSymlinks:typeof r.followSymlinks=="boolean"?!r.followSymlinks:void 0,disregardIgnoreFiles:typeof r.useIgnoreFiles=="boolean"?!r.useIgnoreFiles:void 0,disregardGlobalIgnoreFiles:typeof r.useIgnoreFiles?.global=="boolean"?!r.useIgnoreFiles?.global:void 0,disregardParentIgnoreFiles:typeof r.useIgnoreFiles?.parent=="boolean"?!r.useIgnoreFiles?.parent:void 0,disregardExcludeSettings:r.useExcludeSettings!==void 0&&r.useExcludeSettings===fi.None,disregardSearchExcludeSettings:r.useExcludeSettings!==void 0&&r.useExcludeSettings!==fi.SearchAndFilesExclude,fileEncoding:r.encoding,maxResults:r.maxResults,previewOptions:r.previewOptions?{matchLines:r.previewOptions?.numMatchLines??100,charsPerLine:r.previewOptions?.charsPerLine??1e4}:void 0,surroundingContext:r.surroundingContext,includePattern:f?.pattern,excludePattern:g},folder:f?.folder}},a=(r?.include?.map(d=>n(d))??[n(void 0)]).filter(d=>!!d),c=new be,l=c.add(new T),u=this.findTextInFilesBase(t,a,(d,f)=>l.fire({result:d,uri:f}),s);return{results:new _c(async d=>{c.add(l.event(f=>{const g=f.result,v=f.uri;a0(g)?d.emitOne(new Vs(v,g.rangeLocations.map(x=>({previewRange:new Re(x.preview.startLineNumber,x.preview.startColumn,x.preview.endLineNumber,x.preview.endColumn),sourceRange:new Re(x.source.startLineNumber,x.source.startColumn,x.source.endLineNumber,x.source.endColumn)})),g.previewText)):d.emitOne(new pp(v,g.text,g.lineNumber))})),await u}),complete:u.then(d=>(c.dispose(),{limitHit:d?.limitHit??!1}))}}async findTextInFilesBase(t,r,i,s=Ke.None){const n=this.j.getNext();let o=!1;if(s.onCancellationRequested(a=>{o=!0}),this.u[n]=a=>{if(o)return;const c=k.revive(a.resource);a.results.forEach(l=>{const u=dr(l);i(u,c)})},s.isCancellationRequested)return{};try{const a=await Promise.all(r?.map(c=>this.o.$startTextSearch(t,c.folder??null,c.options,n,s)||{})??[]);return delete this.u[n],a.reduce((c,l)=>({limitHit:c?.limitHit||(l?.limitHit??!1),message:[c?.message??[],l?.message??[]].flat()}),{})??{limitHit:!1}}catch(a){throw delete this.u[n],a}}async findTextInFiles(t,r,i,s,n=Ke.None){this.h.trace(`extHostWorkspace#findTextInFiles: textSearch, extension: ${s.value}, entryPoint: findTextInFiles`);const o=typeof r.previewOptions>"u"?{matchLines:100,charsPerLine:1e4}:r.previewOptions,a=vp(Qr.from(r.include)),c=typeof r.exclude=="string"?r.exclude:r.exclude?r.exclude.pattern:void 0,l={ignoreSymlinks:typeof r.followSymlinks=="boolean"?!r.followSymlinks:void 0,disregardIgnoreFiles:typeof r.useIgnoreFiles=="boolean"?!r.useIgnoreFiles:void 0,disregardGlobalIgnoreFiles:typeof r.useGlobalIgnoreFiles=="boolean"?!r.useGlobalIgnoreFiles:void 0,disregardParentIgnoreFiles:typeof r.useParentIgnoreFiles=="boolean"?!r.useParentIgnoreFiles:void 0,disregardExcludeSettings:typeof r.useDefaultExcludes=="boolean"?!r.useDefaultExcludes:!0,disregardSearchExcludeSettings:typeof r.useSearchExclude=="boolean"?!r.useSearchExclude:!0,fileEncoding:r.encoding,maxResults:r.maxResults,previewOptions:o,surroundingContext:r.afterContext,includePattern:a?.pattern,excludePattern:c?[{pattern:c}]:void 0},u=(h,d)=>{a0(h)?i({uri:d,preview:{text:h.previewText,matches:fh(h.rangeLocations,f=>new Re(f.preview.startLineNumber,f.preview.startColumn,f.preview.endLineNumber,f.preview.endColumn))},ranges:fh(h.rangeLocations,f=>new Re(f.source.startLineNumber,f.source.startColumn,f.source.endLineNumber,f.source.endColumn))}):i({uri:d,text:h.text,lineNumber:h.lineNumber})};return this.findTextInFilesBase(t,[{options:l,folder:a?.folder}],u,n)}$handleTextSearchResult(t,r){this.u[r]?.(t)}async save(t){const r=await this.o.$save(t,{saveAs:!1});return k.revive(r)}async saveAs(t){const r=await this.o.$save(t,{saveAs:!0});return k.revive(r)}saveAll(t){return this.o.$saveAll(t)}resolveProxy(t){return this.o.$resolveProxy(t)}lookupAuthorization(t){return this.o.$lookupAuthorization(t)}lookupKerberosAuthorization(t){return this.o.$lookupKerberosAuthorization(t)}loadCertificates(){return this.o.$loadCertificates()}get trusted(){return this.v}requestWorkspaceTrust(t){return this.o.$requestWorkspaceTrust(t)}$onDidGrantWorkspaceTrust(){this.v||(this.v=!0,this.g.fire())}registerEditSessionIdentityProvider(t,r){if(this.w.has(t))throw new Error(`A provider has already been registered for scheme ${t}`);this.w.set(t,r);const i=this.t.transformOutgoingScheme(t),s=this.B++;return this.o.$registerEditSessionIdentityProvider(s,i),me(()=>{this.w.delete(t),this.o.$unregisterEditSessionIdentityProvider(s)})}async $getEditSessionIdentifier(t,r){this.h.info("Getting edit session identifier for workspaceFolder",t);const i=await this.resolveWorkspaceFolder(k.revive(t));if(!i){this.h.warn("Unable to resolve workspace folder");return}this.h.info("Invoking #provideEditSessionIdentity for workspaceFolder",i);const s=this.w.get(i.uri.scheme);if(this.h.info(`Provider for scheme ${i.uri.scheme} is defined: `,!!s),!s)return;const n=await s.provideEditSessionIdentity(i,r);if(this.h.info("Provider returned edit session identifier: ",n),!!n)return n}async $provideEditSessionIdentityMatch(t,r,i,s){this.h.info("Getting edit session identifier for workspaceFolder",t);const n=await this.resolveWorkspaceFolder(k.revive(t));if(!n){this.h.warn("Unable to resolve workspace folder");return}this.h.info("Invoking #provideEditSessionIdentity for workspaceFolder",n);const o=this.w.get(n.uri.scheme);if(this.h.info(`Provider for scheme ${n.uri.scheme} is defined: `,!!o),!o)return;const a=await o.provideEditSessionIdentityMatch?.(r,i,s);if(this.h.info("Provider returned edit session identifier match result: ",a),!!a)return a}getOnWillCreateEditSessionIdentityEvent(t){return(r,i,s)=>{const n=function(a){r.call(i,a)};return n.extension=t,this.C.event(n,void 0,s)}}async $onWillCreateEditSessionIdentity(t,r,i){const s=await this.resolveWorkspaceFolder(k.revive(t));if(s===void 0)throw new Error("Unable to resolve workspace folder");await this.C.fireAsync({workspaceFolder:s},r,async(n,o)=>{const a=Date.now();await Promise.resolve(n),Date.now()-a>i&&this.h.warn("SLOW edit session create-participant",o.extension.identifier)}),r.isCancellationRequested}registerCanonicalUriProvider(t,r){if(this.D.has(t))throw new Error(`A provider has already been registered for scheme ${t}`);this.D.set(t,r);const i=this.t.transformOutgoingScheme(t),s=this.B++;return this.o.$registerCanonicalUriProvider(s,i),me(()=>{this.D.delete(t),this.o.$unregisterCanonicalUriProvider(s)})}async provideCanonicalUri(t,r,i){const s=this.D.get(t.scheme);if(!s)return;const n=await s.provideCanonicalUri?.(k.revive(t),r,i);if(n)return n}async $provideCanonicalUri(t,r,i){return this.provideCanonicalUri(k.revive(t),{targetScheme:r},i)}};p0=__decorate([__param(0,Ue),__param(1,er),__param(2,ua),__param(3,Ne),__param(4,el)],p0);var Bi=X("IExtHostWorkspace");function vp(e){let t,r;if(e)return typeof e=="string"?t=e:(t=e.pattern,r=k.revive(e.baseUri)),{pattern:t,folder:r}}function ux(e){return(e?.map(t=>{if(typeof t=="string")return t===""?void 0:{pattern:t,uri:void 0};{const r=vp(t);return r?{pattern:r.pattern,uri:r.folder}:void 0}})??[]).filter(t=>!!t)}var hx;(function(e){e[e.None=0]="None",e[e.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=2]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",e[e.InvalidUnicode=4]="InvalidUnicode",e[e.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",e[e.InvalidCharacter=6]="InvalidCharacter"})(hx||(hx={}));var dx;(function(e){e[e.OpenBraceToken=1]="OpenBraceToken",e[e.CloseBraceToken=2]="CloseBraceToken",e[e.OpenBracketToken=3]="OpenBracketToken",e[e.CloseBracketToken=4]="CloseBracketToken",e[e.CommaToken=5]="CommaToken",e[e.ColonToken=6]="ColonToken",e[e.NullKeyword=7]="NullKeyword",e[e.TrueKeyword=8]="TrueKeyword",e[e.FalseKeyword=9]="FalseKeyword",e[e.StringLiteral=10]="StringLiteral",e[e.NumericLiteral=11]="NumericLiteral",e[e.LineCommentTrivia=12]="LineCommentTrivia",e[e.BlockCommentTrivia=13]="BlockCommentTrivia",e[e.LineBreakTrivia=14]="LineBreakTrivia",e[e.Trivia=15]="Trivia",e[e.Unknown=16]="Unknown",e[e.EOF=17]="EOF"})(dx||(dx={}));var fx;(function(e){e[e.InvalidSymbol=1]="InvalidSymbol",e[e.InvalidNumberFormat=2]="InvalidNumberFormat",e[e.PropertyNameExpected=3]="PropertyNameExpected",e[e.ValueExpected=4]="ValueExpected",e[e.ColonExpected=5]="ColonExpected",e[e.CommaExpected=6]="CommaExpected",e[e.CloseBraceExpected=7]="CloseBraceExpected",e[e.CloseBracketExpected=8]="CloseBracketExpected",e[e.EndOfFileExpected=9]="EndOfFileExpected",e[e.InvalidCommentToken=10]="InvalidCommentToken",e[e.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=12]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",e[e.InvalidUnicode=14]="InvalidUnicode",e[e.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",e[e.InvalidCharacter=16]="InvalidCharacter"})(fx||(fx={}));var g0;(function(e){e.DEFAULT={allowTrailingComma:!0}})(g0||(g0={}));function KL(e,t=!1){let r=0;const i=e.length;let s="",n=0,o=16,a=0;function c(v){let x=0,$=0;for(;x<v;){const C=e.charCodeAt(r);if(C>=48&&C<=57)$=$*16+C-48;else if(C>=65&&C<=70)$=$*16+C-65+10;else if(C>=97&&C<=102)$=$*16+C-97+10;else break;r++,x++}return x<v&&($=-1),$}function l(v){r=v,s="",n=0,o=16,a=0}function u(){const v=r;if(e.charCodeAt(r)===48)r++;else for(r++;r<e.length&&ic(e.charCodeAt(r));)r++;if(r<e.length&&e.charCodeAt(r)===46)if(r++,r<e.length&&ic(e.charCodeAt(r)))for(r++;r<e.length&&ic(e.charCodeAt(r));)r++;else return a=3,e.substring(v,r);let x=r;if(r<e.length&&(e.charCodeAt(r)===69||e.charCodeAt(r)===101))if(r++,(r<e.length&&e.charCodeAt(r)===43||e.charCodeAt(r)===45)&&r++,r<e.length&&ic(e.charCodeAt(r))){for(r++;r<e.length&&ic(e.charCodeAt(r));)r++;x=r}else a=3;return e.substring(v,x)}function h(){let v="",x=r;for(;;){if(r>=i){v+=e.substring(x,r),a=2;break}const $=e.charCodeAt(r);if($===34){v+=e.substring(x,r),r++;break}if($===92){if(v+=e.substring(x,r),r++,r>=i){a=2;break}switch(e.charCodeAt(r++)){case 34:v+='"';break;case 92:v+="\\";break;case 47:v+="/";break;case 98:v+="\b";break;case 102:v+="\f";break;case 110:v+=`
`;break;case 114:v+="\r";break;case 116:v+="	";break;case 117:{const L=c(4);L>=0?v+=String.fromCharCode(L):a=4;break}default:a=5}x=r;continue}if($>=0&&$<=31)if(wp($)){v+=e.substring(x,r),a=2;break}else a=6;r++}return v}function d(){if(s="",a=0,n=r,r>=i)return n=i,o=17;let v=e.charCodeAt(r);if(m0(v)){do r++,s+=String.fromCharCode(v),v=e.charCodeAt(r);while(m0(v));return o=15}if(wp(v))return r++,s+=String.fromCharCode(v),v===13&&e.charCodeAt(r)===10&&(r++,s+=`
`),o=14;switch(v){case 123:return r++,o=1;case 125:return r++,o=2;case 91:return r++,o=3;case 93:return r++,o=4;case 58:return r++,o=6;case 44:return r++,o=5;case 34:return r++,s=h(),o=10;case 47:{const x=r-1;if(e.charCodeAt(r+1)===47){for(r+=2;r<i&&!wp(e.charCodeAt(r));)r++;return s=e.substring(x,r),o=12}if(e.charCodeAt(r+1)===42){r+=2;const $=i-1;let C=!1;for(;r<$;){if(e.charCodeAt(r)===42&&e.charCodeAt(r+1)===47){r+=2,C=!0;break}r++}return C||(r++,a=1),s=e.substring(x,r),o=13}return s+=String.fromCharCode(v),r++,o=16}case 45:if(s+=String.fromCharCode(v),r++,r===i||!ic(e.charCodeAt(r)))return o=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return s+=u(),o=11;default:for(;r<i&&f(v);)r++,v=e.charCodeAt(r);if(n!==r){switch(s=e.substring(n,r),s){case"true":return o=8;case"false":return o=9;case"null":return o=7}return o=16}return s+=String.fromCharCode(v),r++,o=16}}function f(v){if(m0(v)||wp(v))return!1;switch(v){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function g(){let v;do v=d();while(v>=12&&v<=15);return v}return{setPosition:l,getPosition:()=>r,scan:t?g:d,getToken:()=>o,getTokenValue:()=>s,getTokenOffset:()=>n,getTokenLength:()=>r-n,getTokenError:()=>a}}function m0(e){return e===32||e===9||e===11||e===12||e===160||e===5760||e>=8192&&e<=8203||e===8239||e===8287||e===12288||e===65279}function wp(e){return e===10||e===13||e===8232||e===8233}function ic(e){return e>=48&&e<=57}var px;(function(e){e[e.nullCharacter=0]="nullCharacter",e[e.maxAsciiCharacter=127]="maxAsciiCharacter",e[e.lineFeed=10]="lineFeed",e[e.carriageReturn=13]="carriageReturn",e[e.lineSeparator=8232]="lineSeparator",e[e.paragraphSeparator=8233]="paragraphSeparator",e[e.nextLine=133]="nextLine",e[e.space=32]="space",e[e.nonBreakingSpace=160]="nonBreakingSpace",e[e.enQuad=8192]="enQuad",e[e.emQuad=8193]="emQuad",e[e.enSpace=8194]="enSpace",e[e.emSpace=8195]="emSpace",e[e.threePerEmSpace=8196]="threePerEmSpace",e[e.fourPerEmSpace=8197]="fourPerEmSpace",e[e.sixPerEmSpace=8198]="sixPerEmSpace",e[e.figureSpace=8199]="figureSpace",e[e.punctuationSpace=8200]="punctuationSpace",e[e.thinSpace=8201]="thinSpace",e[e.hairSpace=8202]="hairSpace",e[e.zeroWidthSpace=8203]="zeroWidthSpace",e[e.narrowNoBreakSpace=8239]="narrowNoBreakSpace",e[e.ideographicSpace=12288]="ideographicSpace",e[e.mathematicalSpace=8287]="mathematicalSpace",e[e.ogham=5760]="ogham",e[e._=95]="_",e[e.$=36]="$",e[e._0=48]="_0",e[e._1=49]="_1",e[e._2=50]="_2",e[e._3=51]="_3",e[e._4=52]="_4",e[e._5=53]="_5",e[e._6=54]="_6",e[e._7=55]="_7",e[e._8=56]="_8",e[e._9=57]="_9",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.j=106]="j",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.ampersand=38]="ampersand",e[e.asterisk=42]="asterisk",e[e.at=64]="at",e[e.backslash=92]="backslash",e[e.bar=124]="bar",e[e.caret=94]="caret",e[e.closeBrace=125]="closeBrace",e[e.closeBracket=93]="closeBracket",e[e.closeParen=41]="closeParen",e[e.colon=58]="colon",e[e.comma=44]="comma",e[e.dot=46]="dot",e[e.doubleQuote=34]="doubleQuote",e[e.equals=61]="equals",e[e.exclamation=33]="exclamation",e[e.greaterThan=62]="greaterThan",e[e.lessThan=60]="lessThan",e[e.minus=45]="minus",e[e.openBrace=123]="openBrace",e[e.openBracket=91]="openBracket",e[e.openParen=40]="openParen",e[e.percent=37]="percent",e[e.plus=43]="plus",e[e.question=63]="question",e[e.semicolon=59]="semicolon",e[e.singleQuote=39]="singleQuote",e[e.slash=47]="slash",e[e.tilde=126]="tilde",e[e.backspace=8]="backspace",e[e.formFeed=12]="formFeed",e[e.byteOrderMark=65279]="byteOrderMark",e[e.tab=9]="tab",e[e.verticalTab=11]="verticalTab"})(px||(px={}));function eN(e,t,r=g0.DEFAULT){const i=KL(e,!1);function s(se){return se?()=>se(i.getTokenOffset(),i.getTokenLength()):()=>!0}function n(se){return se?Ae=>se(Ae,i.getTokenOffset(),i.getTokenLength()):()=>!0}const o=s(t.onObjectBegin),a=n(t.onObjectProperty),c=s(t.onObjectEnd),l=s(t.onArrayBegin),u=s(t.onArrayEnd),h=n(t.onLiteralValue),d=n(t.onSeparator),f=s(t.onComment),g=n(t.onError),v=r&&r.disallowComments,x=r&&r.allowTrailingComma;function $(){for(;;){const se=i.scan();switch(i.getTokenError()){case 4:C(14);break;case 5:C(15);break;case 3:C(13);break;case 1:v||C(11);break;case 2:C(12);break;case 6:C(16);break}switch(se){case 12:case 13:v?C(10):f();break;case 16:C(1);break;case 15:case 14:break;default:return se}}}function C(se,Ae=[],xe=[]){if(g(se),Ae.length+xe.length>0){let tt=i.getToken();for(;tt!==17;){if(Ae.indexOf(tt)!==-1){$();break}else if(xe.indexOf(tt)!==-1)break;tt=$()}}}function L(se){const Ae=i.getTokenValue();return se?h(Ae):a(Ae),$(),!0}function F(){switch(i.getToken()){case 11:{let se=0;try{se=JSON.parse(i.getTokenValue()),typeof se!="number"&&(C(2),se=0)}catch{C(2)}h(se);break}case 7:h(null);break;case 8:h(!0);break;case 9:h(!1);break;default:return!1}return $(),!0}function z(){return i.getToken()!==10?(C(3,[],[2,5]),!1):(L(!1),i.getToken()===6?(d(":"),$(),Z()||C(4,[],[2,5])):C(5,[],[2,5]),!0)}function Y(){o(),$();let se=!1;for(;i.getToken()!==2&&i.getToken()!==17;){if(i.getToken()===5){if(se||C(4,[],[]),d(","),$(),i.getToken()===2&&x)break}else se&&C(6,[],[]);z()||C(4,[],[2,5]),se=!0}return c(),i.getToken()!==2?C(7,[2],[]):$(),!0}function oe(){l(),$();let se=!1;for(;i.getToken()!==4&&i.getToken()!==17;){if(i.getToken()===5){if(se||C(4,[],[]),d(","),$(),i.getToken()===4&&x)break}else se&&C(6,[],[]);Z()||C(4,[],[4,5]),se=!0}return u(),i.getToken()!==4?C(8,[4],[]):$(),!0}function Z(){switch(i.getToken()){case 3:return oe();case 1:return Y();case 10:return L(!0);default:return F()}}return $(),i.getToken()===17?r.allowEmptyContent?!0:(C(4,[],[]),!1):Z()?(i.getToken()!==17&&C(9,[],[]),!0):(C(4,[],[]),!1)}function gu(e){return Object.isFrozen(e)?e:k5(e)}var sc=class Go{static createEmptyModel(t){return new Go({},[],[],void 0,t)}constructor(t,r,i,s,n){this.b=t,this.c=r,this.d=i,this.raw=s,this.f=n,this.a=new Map}get rawConfiguration(){if(!this.g)if(this.raw?.length){const t=this.raw.map(r=>{if(r instanceof Go)return r;const i=new tN("",this.f);return i.parseRaw(r),i.configurationModel});this.g=t.reduce((r,i)=>i===r?i:r.merge(i),t[0])}else this.g=this;return this.g}get contents(){return this.b}get overrides(){return this.d}get keys(){return this.c}isEmpty(){return this.c.length===0&&Object.keys(this.b).length===0&&this.d.length===0}getValue(t){return t?cd(this.contents,t):this.contents}inspect(t,r){const i=this;return{get value(){return gu(i.rawConfiguration.getValue(t))},get override(){return r?gu(i.rawConfiguration.getOverrideValue(t,r)):void 0},get merged(){return gu(r?i.rawConfiguration.override(r).getValue(t):i.rawConfiguration.getValue(t))},get overrides(){const s=[];for(const{contents:n,identifiers:o,keys:a}of i.rawConfiguration.overrides){const c=new Go(n,a,[],void 0,i.f).getValue(t);c!==void 0&&s.push({identifiers:o,value:c})}return s.length?gu(s):void 0}}}getOverrideValue(t,r){const i=this.j(r);return i?t?cd(i,t):i:void 0}getKeysForOverrideIdentifier(t){const r=[];for(const i of this.overrides)i.identifiers.includes(t)&&r.push(...i.keys);return Qo(r)}getAllOverrideIdentifiers(){const t=[];for(const r of this.overrides)t.push(...r.identifiers);return Qo(t)}override(t){let r=this.a.get(t);return r||(r=this.h(t),this.a.set(t,r)),r}merge(...t){const r=ut(this.contents),i=ut(this.overrides),s=[...this.keys],n=this.raw?.length?[...this.raw]:[this];for(const o of t)if(n.push(...o.raw?.length?o.raw:[o]),!o.isEmpty()){this.i(r,o.contents);for(const a of o.overrides){const[c]=i.filter(l=>Xi(l.identifiers,a.identifiers));c?(this.i(c.contents,a.contents),c.keys.push(...a.keys),c.keys=Qo(c.keys)):i.push(ut(a))}for(const a of o.keys)s.indexOf(a)===-1&&s.push(a)}return new Go(r,s,i,n.every(o=>o instanceof Go)?void 0:n,this.f)}h(t){const r=this.j(t);if(!r||typeof r!="object"||!Object.keys(r).length)return this;const i={};for(const s of Qo([...Object.keys(this.contents),...Object.keys(r)])){let n=this.contents[s];const o=r[s];o&&(typeof n=="object"&&typeof o=="object"?(n=ut(n),this.i(n,o)):n=o),i[s]=n}return new Go(i,this.keys,this.overrides,void 0,this.f)}i(t,r){for(const i of Object.keys(r)){if(i in t&&Dt(t[i])&&Dt(r[i])){this.i(t[i],r[i]);continue}t[i]=ut(r[i])}}j(t){let r=null,i=null;const s=n=>{n&&(i?this.i(i,n):i=ut(n))};for(const n of this.overrides)n.identifiers.length===1&&n.identifiers[0]===t?r=n.contents:n.identifiers.includes(t)&&s(n.contents);return s(r),i}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}addValue(t,r){this.k(t,r,!0)}setValue(t,r){this.k(t,r,!1)}removeValue(t){const r=this.keys.indexOf(t);r!==-1&&(this.keys.splice(r,1),aR(this.contents,t),ns.test(t)&&this.overrides.splice(this.overrides.findIndex(i=>Xi(i.identifiers,ul(t))),1))}k(t,r,i){if(n7(this.contents,t,r,s=>this.f.error(s)),i=i||this.keys.indexOf(t)===-1,i&&this.keys.push(t),ns.test(t)){const s=ul(t),n={identifiers:s,keys:Object.keys(this.contents[t]),contents:m1(this.contents[t],a=>this.f.error(a))},o=this.overrides.findIndex(a=>Xi(a.identifiers,s));o!==-1?this.overrides[o]=n:this.overrides.push(n)}}},tN=class{constructor(e,t){this.f=e,this.g=t,this.a=null,this.b=null,this.c=[],this.d=[]}get configurationModel(){return this.b||sc.createEmptyModel(this.g)}get restrictedConfigurations(){return this.c}get errors(){return this.d}parse(e,t){if(!Lt(e)){const r=this.h(e);this.parseRaw(r,t)}}reparse(e){this.a&&this.parseRaw(this.a,e)}parseRaw(e,t){this.a=e;const{contents:r,keys:i,overrides:s,restricted:n,hasExcludedProperties:o}=this.i(e,t);this.b=new sc(r,i,s,o?[e]:void 0,this.g),this.c=n||[]}h(e){let t={},r=null,i=[];const s=[],n=[];function o(c){Array.isArray(i)?i.push(c):r!==null&&(i[r]=c)}const a={onObjectBegin:()=>{const c={};o(c),s.push(i),i=c,r=null},onObjectProperty:c=>{r=c},onObjectEnd:()=>{i=s.pop()},onArrayBegin:()=>{const c=[];o(c),s.push(i),i=c,r=null},onArrayEnd:()=>{i=s.pop()},onLiteralValue:o,onError:(c,l,u)=>{n.push({error:c,offset:l,length:u})}};if(e)try{eN(e,a),t=i[0]||{}}catch(c){this.g.error(`Error while parsing settings file ${this.f}: ${c}`),this.d=[c]}return t}i(e,t){const r=fr.as(va.Configuration).getConfigurationProperties(),i=this.j(e,r,!0,t);e=i.raw;const s=m1(e,a=>this.g.error(`Conflict in settings file ${this.f}: ${a}`)),n=Object.keys(e),o=this.l(e,a=>this.g.error(`Conflict in settings file ${this.f}: ${a}`));return{contents:s,keys:n,overrides:o,restricted:i.restricted,hasExcludedProperties:i.hasExcludedProperties}}j(e,t,r,i){let s=!1;if(!i?.scopes&&!i?.skipRestricted&&!i?.exclude?.length)return{raw:e,restricted:[],hasExcludedProperties:s};const n={},o=[];for(const a in e)if(ns.test(a)&&r){const c=this.j(e[a],t,!1,i);n[a]=c.raw,s=s||c.hasExcludedProperties,o.push(...c.restricted)}else{const c=t[a],l=c?typeof c.scope<"u"?c.scope:3:void 0;c?.restricted&&o.push(a),!i.exclude?.includes(a)&&(i.include?.includes(a)||(l===void 0||i.scopes===void 0||i.scopes.includes(l))&&!(i.skipRestricted&&c?.restricted))?n[a]=e[a]:s=!0}return{raw:n,restricted:o,hasExcludedProperties:s}}l(e,t){const r=[];for(const i of Object.keys(e))if(ns.test(i)){const s={};for(const n in e[i])s[n]=e[i][n];r.push({identifiers:ul(i),keys:Object.keys(s),contents:m1(s,t)})}return r}},rN=class{constructor(e,t,r,i,s,n,o,a,c,l,u,h,d){this.a=e,this.b=t,this.c=r,this.overrideIdentifiers=i,this.d=s,this.f=n,this.g=o,this.h=a,this.i=c,this.j=l,this.k=u,this.l=h,this.m=d}get value(){return gu(this.c)}n(e){return e?.value!==void 0||e?.override!==void 0||e?.overrides!==void 0?e:void 0}get q(){return this.p||(this.p=this.d.inspect(this.a,this.b.overrideIdentifier)),this.p}get defaultValue(){return this.q.merged}get default(){return this.n(this.q)}get s(){return this.r===void 0&&(this.r=this.f?this.f.inspect(this.a):null),this.r}get policyValue(){return this.s?.merged}get policy(){return this.s?.value!==void 0?{value:this.s.value}:void 0}get u(){return this.t===void 0&&(this.t=this.g?this.g.inspect(this.a):null),this.t}get applicationValue(){return this.u?.merged}get application(){return this.n(this.u)}get w(){return this.v||(this.v=this.h.inspect(this.a,this.b.overrideIdentifier)),this.v}get userValue(){return this.w.merged}get user(){return this.n(this.w)}get y(){return this.x||(this.x=this.i.inspect(this.a,this.b.overrideIdentifier)),this.x}get userLocalValue(){return this.y.merged}get userLocal(){return this.n(this.y)}get A(){return this.z||(this.z=this.j.inspect(this.a,this.b.overrideIdentifier)),this.z}get userRemoteValue(){return this.A.merged}get userRemote(){return this.n(this.A)}get D(){return this.B===void 0&&(this.B=this.k?this.k.inspect(this.a,this.b.overrideIdentifier):null),this.B}get workspaceValue(){return this.D?.merged}get workspace(){return this.n(this.D)}get F(){return this.E===void 0&&(this.E=this.l?this.l.inspect(this.a,this.b.overrideIdentifier):null),this.E}get workspaceFolderValue(){return this.F?.merged}get workspaceFolder(){return this.n(this.F)}get H(){return this.G===void 0&&(this.G=this.m.inspect(this.a,this.b.overrideIdentifier)),this.G}get memoryValue(){return this.H.merged}get memory(){return this.n(this.H)}},v0=class T3{constructor(t,r,i,s,n,o,a,c,l,u){this.j=t,this.l=r,this.m=i,this.n=s,this.p=n,this.q=o,this.r=a,this.s=c,this.t=l,this.u=u,this.h=null,this.i=new rr,this.v=null}getValue(t,r,i){return this.w(t,r,i).getValue(t)}updateValue(t,r,i={}){let s;i.resource?(s=this.t.get(i.resource),s||(s=sc.createEmptyModel(this.u),this.t.set(i.resource,s))):s=this.s,r===void 0?s.removeValue(t):s.setValue(t,r),i.resource||(this.h=null)}inspect(t,r,i){const s=this.w(t,r,i),n=this.A(r.resource,i),o=r.resource?this.t.get(r.resource)||this.s:this.s,a=new Set;for(const c of s.overrides)for(const l of c.identifiers)s.getOverrideValue(t,l)!==void 0&&a.add(l);return new rN(t,r,s.getValue(t),a.size?[...a]:void 0,this.j,this.l.isEmpty()?void 0:this.l,this.applicationConfiguration.isEmpty()?void 0:this.applicationConfiguration,this.userConfiguration,this.localUserConfiguration,this.remoteUserConfiguration,i?this.q:void 0,n||void 0,o)}keys(t){const r=this.A(void 0,t);return{default:this.j.keys.slice(0),user:this.userConfiguration.keys.slice(0),workspace:this.q.keys.slice(0),workspaceFolder:r?r.keys.slice(0):[]}}updateDefaultConfiguration(t){this.j=t,this.h=null,this.i.clear()}updatePolicyConfiguration(t){this.l=t}updateApplicationConfiguration(t){this.m=t,this.h=null,this.i.clear()}updateLocalUserConfiguration(t){this.n=t,this.v=null,this.h=null,this.i.clear()}updateRemoteUserConfiguration(t){this.p=t,this.v=null,this.h=null,this.i.clear()}updateWorkspaceConfiguration(t){this.q=t,this.h=null,this.i.clear()}updateFolderConfiguration(t,r){this.r.set(t,r),this.i.delete(t)}deleteFolderConfiguration(t){this.folderConfigurations.delete(t),this.i.delete(t)}compareAndUpdateDefaultConfiguration(t,r){const i=[];if(!r){const{added:s,updated:n,removed:o}=jn(this.j,t);r=[...s,...n,...o]}for(const s of r)for(const n of ul(s)){const o=this.j.getKeysForOverrideIdentifier(n),a=t.getKeysForOverrideIdentifier(n),c=[...a.filter(l=>o.indexOf(l)===-1),...o.filter(l=>a.indexOf(l)===-1),...o.filter(l=>!Di(this.j.override(n).getValue(l),t.override(n).getValue(l)))];i.push([n,c])}return this.updateDefaultConfiguration(t),{keys:r,overrides:i}}compareAndUpdatePolicyConfiguration(t){const{added:r,updated:i,removed:s}=jn(this.l,t),n=[...r,...i,...s];return n.length&&this.updatePolicyConfiguration(t),{keys:n,overrides:[]}}compareAndUpdateApplicationConfiguration(t){const{added:r,updated:i,removed:s,overrides:n}=jn(this.applicationConfiguration,t),o=[...r,...i,...s];return o.length&&this.updateApplicationConfiguration(t),{keys:o,overrides:n}}compareAndUpdateLocalUserConfiguration(t){const{added:r,updated:i,removed:s,overrides:n}=jn(this.localUserConfiguration,t),o=[...r,...i,...s];return o.length&&this.updateLocalUserConfiguration(t),{keys:o,overrides:n}}compareAndUpdateRemoteUserConfiguration(t){const{added:r,updated:i,removed:s,overrides:n}=jn(this.remoteUserConfiguration,t),o=[...r,...i,...s];return o.length&&this.updateRemoteUserConfiguration(t),{keys:o,overrides:n}}compareAndUpdateWorkspaceConfiguration(t){const{added:r,updated:i,removed:s,overrides:n}=jn(this.workspaceConfiguration,t),o=[...r,...i,...s];return o.length&&this.updateWorkspaceConfiguration(t),{keys:o,overrides:n}}compareAndUpdateFolderConfiguration(t,r){const i=this.folderConfigurations.get(t),{added:s,updated:n,removed:o,overrides:a}=jn(i,r),c=[...s,...n,...o];return(c.length||!i)&&this.updateFolderConfiguration(t,r),{keys:c,overrides:a}}compareAndDeleteFolderConfiguration(t){const r=this.folderConfigurations.get(t);if(!r)throw new Error("Unknown folder");this.deleteFolderConfiguration(t);const{added:i,updated:s,removed:n,overrides:o}=jn(r,void 0);return{keys:[...i,...s,...n],overrides:o}}get defaults(){return this.j}get applicationConfiguration(){return this.m}get userConfiguration(){return this.v||(this.v=this.p.isEmpty()?this.n:this.n.merge(this.p)),this.v}get localUserConfiguration(){return this.n}get remoteUserConfiguration(){return this.p}get workspaceConfiguration(){return this.q}get folderConfigurations(){return this.r}w(t,r,i){let s=this.x(r,i);return r.overrideIdentifier&&(s=s.override(r.overrideIdentifier)),!this.l.isEmpty()&&this.l.getValue(t)!==void 0&&(s=s.merge(this.l)),s}x({resource:t},r){let i=this.y();if(r&&t){const s=r.getFolder(t);s&&(i=this.z(s.uri)||i);const n=this.t.get(t);n&&(i=i.merge(n))}return i}y(){return this.h||(this.h=this.j.merge(this.applicationConfiguration,this.userConfiguration,this.q,this.s)),this.h}z(t){let r=this.i.get(t);if(!r){const i=this.y(),s=this.r.get(t);s?(r=i.merge(s),this.i.set(t,r)):r=i}return r}A(t,r){if(r&&t){const i=r.getFolder(t);if(i)return this.r.get(i.uri)}}toData(){return{defaults:{contents:this.j.contents,overrides:this.j.overrides,keys:this.j.keys},policy:{contents:this.l.contents,overrides:this.l.overrides,keys:this.l.keys},application:{contents:this.applicationConfiguration.contents,overrides:this.applicationConfiguration.overrides,keys:this.applicationConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this.q.contents,overrides:this.q.overrides,keys:this.q.keys},folders:[...this.r.keys()].reduce((t,r)=>{const{contents:i,overrides:s,keys:n}=this.r.get(r);return t.push([r,{contents:i,overrides:s,keys:n}]),t},[])}}allKeys(){const t=new Set;return this.j.keys.forEach(r=>t.add(r)),this.userConfiguration.keys.forEach(r=>t.add(r)),this.q.keys.forEach(r=>t.add(r)),this.r.forEach(r=>r.keys.forEach(i=>t.add(i))),[...t.values()]}B(){const t=new Set;return this.j.getAllOverrideIdentifiers().forEach(r=>t.add(r)),this.userConfiguration.getAllOverrideIdentifiers().forEach(r=>t.add(r)),this.q.getAllOverrideIdentifiers().forEach(r=>t.add(r)),this.r.forEach(r=>r.getAllOverrideIdentifiers().forEach(i=>t.add(i))),[...t.values()]}D(t){const r=new Set;return this.j.getKeysForOverrideIdentifier(t).forEach(i=>r.add(i)),this.userConfiguration.getKeysForOverrideIdentifier(t).forEach(i=>r.add(i)),this.q.getKeysForOverrideIdentifier(t).forEach(i=>r.add(i)),this.r.forEach(i=>i.getKeysForOverrideIdentifier(t).forEach(s=>r.add(s))),[...r.values()]}static parse(t,r){const i=this.E(t.defaults,r),s=this.E(t.policy,r),n=this.E(t.application,r),o=this.E(t.user,r),a=this.E(t.workspace,r),c=t.folders.reduce((l,u)=>(l.set(k.revive(u[0]),this.E(u[1],r)),l),new rr);return new T3(i,s,n,o,sc.createEmptyModel(r),a,c,sc.createEmptyModel(r),new rr,r)}static E(t,r){return new sc(t.contents,t.keys,t.overrides,void 0,r)}},iN=class{constructor(e,t,r,i,s){this.change=e,this.f=t,this.g=r,this.h=i,this.i=s,this.a=`
`,this.b=this.a.charCodeAt(0),this.c=46,this.affectedKeys=new Set,this.j=void 0;for(const n of e.keys)this.affectedKeys.add(n);for(const[,n]of e.overrides)for(const o of n)this.affectedKeys.add(o);this.d=this.a;for(const n of this.affectedKeys)this.d+=n+this.a}get previousConfiguration(){return!this.j&&this.f&&(this.j=v0.parse(this.f.data,this.i)),this.j}affectsConfiguration(e,t){const r=this.a+e,i=this.d.indexOf(r);if(i<0)return!1;const s=i+r.length;if(s>=this.d.length)return!1;const n=this.d.charCodeAt(s);if(n!==this.b&&n!==this.c)return!1;if(t){const o=this.previousConfiguration?this.previousConfiguration.getValue(e,t,this.f?.workspace):void 0,a=this.g.getValue(e,t,this.h);return!Di(o,a)}return!0}};function jn(e,t){const{added:r,removed:i,updated:s}=gx(t?.rawConfiguration,e?.rawConfiguration),n=[],o=e?.getAllOverrideIdentifiers()||[],a=t?.getAllOverrideIdentifiers()||[];if(t){const c=a.filter(l=>!o.includes(l));for(const l of c)n.push([l,t.getKeysForOverrideIdentifier(l)])}if(e){const c=o.filter(l=>!a.includes(l));for(const l of c)n.push([l,e.getKeysForOverrideIdentifier(l)])}if(t&&e){for(const c of o)if(a.includes(c)){const l=gx({contents:e.getOverrideValue(void 0,c)||{},keys:e.getKeysForOverrideIdentifier(c)},{contents:t.getOverrideValue(void 0,c)||{},keys:t.getKeysForOverrideIdentifier(c)});n.push([c,[...l.added,...l.removed,...l.updated]])}}return{added:r,removed:i,updated:s,overrides:n}}function gx(e,t){const r=e?t?e.keys.filter(n=>t.keys.indexOf(n)===-1):[...e.keys]:[],i=t?e?t.keys.filter(n=>e.keys.indexOf(n)===-1):[...t.keys]:[],s=[];if(e&&t){for(const n of t.keys)if(e.keys.indexOf(n)!==-1){const o=cd(t.contents,n),a=cd(e.contents,n);Di(o,a)||s.push(n)}}return{added:r,removed:i,updated:s}}function mu(e,t){if(t){const r=t.split(".");let i=e;for(let s=0;i&&s<r.length;s++)i=i[r[s]];return i}}function sN(e){return e instanceof k}function nN(e){return e&&e.uri instanceof k&&e.languageId&&typeof e.languageId=="string"}function oN(e){return e&&!e.uri&&e.languageId&&typeof e.languageId=="string"}function aN(e){return e&&e.uri instanceof k&&(!e.name||typeof e.name=="string")&&(!e.index||typeof e.index=="number")}function mx(e){if(sN(e))return{resource:e};if(nN(e))return{resource:e.uri,overrideIdentifier:e.languageId};if(oN(e))return{overrideIdentifier:e.languageId};if(aN(e))return{resource:e.uri};if(e===null)return{resource:null}}var w0=class{constructor(t,r,i){this.a=t.getProxy(K.MainThreadConfiguration),this.c=r,this.b=i,this.d=new ui,this.e=null}getConfigProvider(){return this.d.wait().then(t=>this.e)}$initializeConfiguration(t){this.e=new cN(this.a,this.c,t,this.b),this.d.open()}$acceptConfigurationChanged(t,r){this.getConfigProvider().then(i=>i.$acceptConfigurationChanged(t,r))}};w0=__decorate([__param(0,Ue),__param(1,Bi),__param(2,Ne)],w0);var cN=class{constructor(e,t,r,i){this.a=new T,this.b=e,this.f=i,this.c=t,this.e=v0.parse(r,i),this.d=this.k(r.configurationScopes)}get onDidChangeConfiguration(){return this.a&&this.a.event}$acceptConfigurationChanged(e,t){const r={data:this.e.toData(),workspace:this.c.workspace};this.e=v0.parse(e,this.f),this.d=this.k(e.configurationScopes),this.a.fire(this.j(t,r))}getConfiguration(e,t,r){const i=mx(t)||{},s=this.g(e?mu(this.e.getValue(void 0,i,this.c.workspace),e):this.e.getValue(void 0,i,this.c.workspace));e&&this.h(e,i,r?.identifier);function n(a){if(a==null)return null;if(typeof a=="boolean")return a?2:5;switch(a){case La.Global:return 2;case La.Workspace:return 5;case La.WorkspaceFolder:return 6}}const o={has(a){return typeof mu(s,a)<"u"},get:(a,c)=>{this.h(e?`${e}.${a}`:a,i,r?.identifier);let l=mu(s,a);if(typeof l>"u")l=c;else{let u;const h=(d,f)=>{if(Dt(d)){let g;const v=()=>{u=u||ut(s),g=g||mu(u,f)};return new Proxy(d,{get:(x,$)=>{if(typeof $=="string"&&$.toLowerCase()==="tojson")return v(),()=>g;if(u)return g=g||mu(u,f),g[$];const C=x[$];return typeof $=="string"?h(C,`${f}.${$}`):C},set:(x,$,C)=>(v(),g&&(g[$]=C),!0),deleteProperty:(x,$)=>(v(),g&&delete g[$],!0),defineProperty:(x,$,C)=>(v(),g&&Object.defineProperty(g,$,C),!0)})}return Array.isArray(d)?ut(d):d};l=h(l,a)}return l},update:(a,c,l,u)=>{a=e?`${e}.${a}`:a;const h=n(l);return c!==void 0?this.b.$updateConfigurationOption(h,a,c,i,u):this.b.$removeConfigurationOption(h,a,i,u)},inspect:a=>{a=e?`${e}.${a}`:a;const c=this.e.inspect(a,i,this.c.workspace);if(c)return{key:a,defaultValue:ut(c.policy?.value??c.default?.value),globalValue:ut(c.user?.value??c.application?.value),workspaceValue:ut(c.workspace?.value),workspaceFolderValue:ut(c.workspaceFolder?.value),defaultLanguageValue:ut(c.default?.override),globalLanguageValue:ut(c.user?.override??c.application?.override),workspaceLanguageValue:ut(c.workspace?.override),workspaceFolderLanguageValue:ut(c.workspaceFolder?.override),languageIds:ut(c.overrideIdentifiers)}}};return typeof s=="object"&&Ps(o,s,!1),Object.freeze(o)}g(e){const t=r=>Dt(r)?new Proxy(r,{get:(i,s)=>t(i[s]),set:(i,s,n)=>{throw new Error(`TypeError: Cannot assign to read only property '${String(s)}' of object`)},deleteProperty:(i,s)=>{throw new Error(`TypeError: Cannot delete read only property '${String(s)}' of object`)},defineProperty:(i,s)=>{throw new Error(`TypeError: Cannot define property '${String(s)}' for a readonly object`)},setPrototypeOf:i=>{throw new Error("TypeError: Cannot set prototype for a readonly object")},isExtensible:()=>!1,preventExtensions:()=>!0}):r;return t(e)}h(e,t,r){const i=ns.test(e)?4:this.d.get(e),s=r?`[${r.value}] `:"";if(i===4){typeof t?.resource>"u"&&this.f.warn(`${s}Accessing a resource scoped configuration without providing a resource is not expected. To get the effective value for '${e}', provide the URI of a resource or 'null' for any resource.`);return}if(i===3){t?.resource&&this.f.warn(`${s}Accessing a window scoped configuration for a resource is not expected. To associate '${e}' to a resource, define its scope to 'resource' in configuration contributions in 'package.json'.`);return}}j(e,t){const r=new iN(e,t,this.e,this.c.workspace,this.f);return Object.freeze({affectsConfiguration:(i,s)=>r.affectsConfiguration(i,mx(s))})}k(e){return e.reduce((t,r)=>(t.set(r[0],r[1]),t),new Map)}},pi=X("IExtHostConfiguration"),lN=class{constructor(e,t){this.versionId=e,this.removedDueToLooping=t}},vu=class R3{static isHostExtension(t,r,i){if(r.getExtensionDescription(t))return!1;const s=i.getExtensionDescription(t);return s?!!((s.main||s.browser)&&s.api==="none"):!1}constructor(t,r){this.j=t,this.c=new T,this.onDidChange=this.c.event,this.d=0,this.e=r,this.k()}k(){this.e.sort(hN),this.f=new Os,this.g=[],this.h=new Map;for(const t of this.e){if(this.f.has(t.identifier)){console.error("Extension `"+t.identifier.value+"` is already registered");continue}this.f.set(t.identifier,t),this.g.push(t);const r=this.j.readActivationEvents(t);for(const i of r)this.h.has(i)||this.h.set(i,[]),this.h.get(i).push(t)}}set(t){return this.e=t,this.k(),this.d++,this.c.fire(void 0),{versionId:this.d}}deltaExtensions(t,r){this.e=wx(this.e,r),this.e=this.e.concat(t);const i=R3.l(this.e);return this.e=wx(this.e,i.map(s=>s.identifier)),this.k(),this.d++,this.c.fire(void 0),new lN(this.d,i)}static l(t){const r=new class{constructor(){this.c=new Map,this.d=new Set,this.e=[]}addNode(a){this.d.has(a)||(this.d.add(a),this.e.push(a))}addArc(a,c){this.addNode(a),this.addNode(c),this.c.has(a)?this.c.get(a).push(c):this.c.set(a,[c])}getArcs(a){return this.c.has(a)?this.c.get(a):[]}hasOnlyGoodArcs(a,c){const l=r.getArcs(a);for(let u=0;u<l.length;u++)if(!c.has(l[u]))return!1;return!0}getNodes(){return this.e}},i=new Os;for(const a of t)if(i.set(a.identifier,a),a.extensionDependencies)for(const c of a.extensionDependencies)r.addArc(rt.toKey(a.identifier),rt.toKey(c));const s=new Set;r.getNodes().filter(a=>r.getArcs(a).length===0).forEach(a=>s.add(a));const n=r.getNodes().filter(a=>!s.has(a));let o;do{o=!1;for(let a=0;a<n.length;a++){const c=n[a];r.hasOnlyGoodArcs(c,s)&&(n.splice(a,1),a--,s.add(c),o=!0)}}while(o);return n.map(a=>i.get(a))}containsActivationEvent(t){return this.h.has(t)}containsExtension(t){return this.f.has(t)}getExtensionDescriptionsForActivationEvent(t){const r=this.h.get(t);return r?r.slice(0):[]}getAllExtensionDescriptions(){return this.g.slice(0)}getSnapshot(){return new uN(this.d,this.getAllExtensionDescriptions())}getExtensionDescription(t){const r=this.f.get(t);return r||void 0}getExtensionDescriptionByUUID(t){for(const r of this.g)if(r.uuid===t)return r}getExtensionDescriptionByIdOrUUID(t,r){return this.getExtensionDescription(t)??(r?this.getExtensionDescriptionByUUID(r):void 0)}},uN=class{constructor(e,t){this.versionId=e,this.extensions=t}},vx;(function(e){e[e.Builtin=0]="Builtin",e[e.User=1]="User",e[e.Dev=2]="Dev"})(vx||(vx={}));function hN(e,t){const r=e.isBuiltin?0:e.isUnderDevelopment?2:1,i=t.isBuiltin?0:t.isUnderDevelopment?2:1;if(r!==i)return r-i;const s=He.basename(e.extensionLocation.path),n=He.basename(t.extensionLocation.path);return s<n?-1:s>n?1:0}function wx(e,t){const r=new lo(t);return e.filter(i=>!r.has(i.identifier))}var b0="^([a-z0-9A-Z][a-z0-9-A-Z]*)\\.([a-z0-9A-Z][a-z0-9-A-Z]*)$",BV=new RegExp(b0),bx;(function(e){e.COMMAND="command",e.SETTINGS_SYNC="settingsSync"})(bx||(bx={}));var yx;(function(e){e[e.NoneOrRelevance=0]="NoneOrRelevance",e[e.LastUpdatedDate=1]="LastUpdatedDate",e[e.Title=2]="Title",e[e.PublisherName=3]="PublisherName",e[e.InstallCount=4]="InstallCount",e[e.PublishedDate=10]="PublishedDate",e[e.AverageRating=6]="AverageRating",e[e.WeightedRating=12]="WeightedRating"})(yx||(yx={}));var kx;(function(e){e[e.Default=0]="Default",e[e.Ascending=1]="Ascending",e[e.Descending=2]="Descending"})(kx||(kx={}));var xx;(function(e){e.Install="install",e.Uninstall="uninstall"})(xx||(xx={}));var Ex;(function(e){e[e.None=1]="None",e[e.Install=2]="Install",e[e.Update=3]="Update",e[e.Migrate=4]="Migrate"})(Ex||(Ex={}));var zV=X("extensionGalleryService"),Sx;(function(e){e.Timeout="Timeout",e.Cancelled="Cancelled",e.Failed="Failed",e.DownloadFailedWriting="DownloadFailedWriting",e.Offline="Offline"})(Sx||(Sx={}));var $x;(function(e){e.Unsupported="Unsupported",e.Deprecated="Deprecated",e.Malicious="Malicious",e.Incompatible="Incompatible",e.IncompatibleApi="IncompatibleApi",e.IncompatibleTargetPlatform="IncompatibleTargetPlatform",e.ReleaseVersionNotFound="ReleaseVersionNotFound",e.Invalid="Invalid",e.Download="Download",e.DownloadSignature="DownloadSignature",e.DownloadFailedWriting="DownloadFailedWriting",e.UpdateMetadata="UpdateMetadata",e.Extract="Extract",e.Scanning="Scanning",e.ScanningExtension="ScanningExtension",e.ReadUninstalled="ReadUninstalled",e.UnsetUninstalled="UnsetUninstalled",e.Delete="Delete",e.Rename="Rename",e.IntializeDefaultProfile="IntializeDefaultProfile",e.AddToProfile="AddToProfile",e.InstalledExtensionNotFound="InstalledExtensionNotFound",e.PostInstall="PostInstall",e.CorruptZip="CorruptZip",e.IncompleteZip="IncompleteZip",e.PackageNotSigned="PackageNotSigned",e.SignatureVerificationInternal="SignatureVerificationInternal",e.SignatureVerificationFailed="SignatureVerificationFailed",e.NotAllowed="NotAllowed",e.Gallery="Gallery",e.Cancelled="Cancelled",e.Unknown="Unknown",e.Internal="Internal"})($x||($x={}));var Cx;(function(e){e.Success="Success",e.RequiredArgumentMissing="RequiredArgumentMissing",e.InvalidArgument="InvalidArgument",e.PackageIsUnreadable="PackageIsUnreadable",e.UnhandledException="UnhandledException",e.SignatureManifestIsMissing="SignatureManifestIsMissing",e.SignatureManifestIsUnreadable="SignatureManifestIsUnreadable",e.SignatureIsMissing="SignatureIsMissing",e.SignatureIsUnreadable="SignatureIsUnreadable",e.CertificateIsUnreadable="CertificateIsUnreadable",e.SignatureArchiveIsUnreadable="SignatureArchiveIsUnreadable",e.FileAlreadyExists="FileAlreadyExists",e.SignatureArchiveIsInvalidZip="SignatureArchiveIsInvalidZip",e.SignatureArchiveHasSameSignatureFile="SignatureArchiveHasSameSignatureFile",e.PackageIntegrityCheckFailed="PackageIntegrityCheckFailed",e.SignatureIsInvalid="SignatureIsInvalid",e.SignatureManifestIsInvalid="SignatureManifestIsInvalid",e.SignatureIntegrityCheckFailed="SignatureIntegrityCheckFailed",e.EntryIsMissing="EntryIsMissing",e.EntryIsTampered="EntryIsTampered",e.Untrusted="Untrusted",e.CertificateRevoked="CertificateRevoked",e.SignatureIsNotValid="SignatureIsNotValid",e.UnknownError="UnknownError",e.PackageIsInvalidZip="PackageIsInvalidZip",e.SignatureArchiveHasTooManyEntries="SignatureArchiveHasTooManyEntries"})(Cx||(Cx={}));var _V=X("extensionManagementService"),WV=X("IGlobalExtensionEnablementService"),VV=X("IExtensionTipsService"),qV=tm(1791,"Extensions"),GV=tm(1792,"Preferences"),JV=X("telemetryService"),QV=X("customEndpointTelemetryService"),Px;(function(e){e[e.NONE=0]="NONE",e[e.CRASH=1]="CRASH",e[e.ERROR=2]="ERROR",e[e.USAGE=3]="USAGE"})(Px||(Px={}));var Ix;(function(e){e.OFF="off",e.CRASH="crash",e.ERROR="error",e.ON="all"})(Ix||(Ix={}));var y0=class{constructor(e){this.value=e,this.isTrustedTelemetryValue=!0}},dN=class{constructor(){this.telemetryLevel=0,this.sessionId="someValue.sessionId",this.machineId="someValue.machineId",this.sqmId="someValue.sqmId",this.devDeviceId="someValue.devDeviceId",this.firstSessionDate="someValue.firstSessionDate",this.sendErrorTelemetry=!1}publicLog(){}publicLog2(){}publicLogError(){}publicLogError2(){}setExperimentProperty(){}},YV=new dN,fN="extensionTelemetryLog",pN=new Set(["ssh-remote","dev-container","attached-container","wsl","tunnel","codespaces","amlext"]);function gN(e){if(!e)return"none";const t=g1(e);return pN.has(t)?t:"other"}function mN(e,t){if(!e||!e.includes("/")&&!e.includes("\\"))return e;let r=e;const i=[];for(const a of t)for(;;){const c=a.exec(e);if(!c)break;i.push([c.index,a.lastIndex])}const s=/^[\\\/]?(node_modules|node_modules\.asar)[\\\/]/,n=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-\._]+(\\\\|\\|\/))+[\w-\._]*/g;let o=0;for(r="";;){const a=n.exec(e);if(!a)break;const c=i.some(([l,u])=>a.index<u&&l<n.lastIndex);!s.test(a[0])&&!c&&(r+=e.substring(o,a.index)+"<REDACTED: user-file-path>",o=n.lastIndex)}return o<e.length&&(r+=e.substr(o)),r}function vN(e){if(!e)return e;const t=[{label:"Google API Key",regex:/AIza[A-Za-z0-9_\\\-]{35}/},{label:"Slack Token",regex:/xox[pbar]\-[A-Za-z0-9]/},{label:"GitHub Token",regex:/(gh[psuro]_[a-zA-Z0-9]{36}|github_pat_[a-zA-Z0-9]{22}_[a-zA-Z0-9]{59})/},{label:"Generic Secret",regex:/(key|token|sig|secret|signature|password|passwd|pwd|android:value)[^a-zA-Z0-9]/i},{label:"CLI Credentials",regex:/((login|psexec|(certutil|psexec)\.exe).{1,50}(\s-u(ser(name)?)?\s+.{3,100})?\s-(admin|user|vm|root)?p(ass(word)?)?\s+["']?[^$\-\/\s]|(^|[\s\r\n\\])net(\.exe)?.{1,5}(user\s+|share\s+\/user:| user -? secrets ? set) \s + [^ $\s \/])/},{label:"Email",regex:/@[a-zA-Z0-9-]+\.[a-zA-Z0-9-]+/}];for(const r of t)if(r.regex.test(e))return`<REDACTED: ${r.label}>`;return e}function Dx(e,t){return Wh(e,r=>{if(r instanceof y0||Object.hasOwnProperty.call(r,"isTrustedTelemetryValue"))return r.value;if(typeof r=="string"){let i=r.replaceAll("%20"," ");i=mN(i,t);for(const s of t)i=i.replace(s,"");return i=vN(i),i}})}var XV=new rt("pprice.better-merge"),wN=class{constructor(){this.a=new Map,this.b=new WeakMap}register(e,t){this.a.set(e,t)}readActivationEvents(e){return this.b.has(e)||this.b.set(e,this.c(e)),this.b.get(e)}createActivationEventsMap(e){const t=Object.create(null);for(const r of e){const i=this.readActivationEvents(r);i.length>0&&(t[rt.toKey(r.identifier)]=i)}return t}c(e){if(typeof e.main>"u"&&typeof e.browser>"u")return[];const t=Array.isArray(e.activationEvents)?e.activationEvents.slice(0):[];for(let r=0;r<t.length;r++)t[r]==="onUri"&&(t[r]=`onUri:${rt.toKey(e.identifier)}`);if(!e.contributes)return t;for(const r in e.contributes){const i=this.a.get(r);if(!i)continue;const s=e.contributes[r],n=Array.isArray(s)?s:[s];try{i(n,t)}catch(o){It(o)}}return t}},bN=new wN,yN=Object.freeze({identifier:new rt("nullExtensionDescription"),name:"Null Extension Description",version:"0.0.0",publisher:"vscode",engines:{vscode:""},extensionLocation:k.parse("void:location"),isBuiltin:!1,targetPlatform:"undefined",isUserBuiltin:!1,isUnderDevelopment:!1}),kN=X("extensionService"),Ax=class{constructor(e){this.dependency=e}},Tx;(function(e){e[e.EagerAutoStart=1]="EagerAutoStart",e[e.EagerManualStart=2]="EagerManualStart",e[e.Lazy=3]="Lazy"})(Tx||(Tx={}));function zt(e,t){return e.enabledApiProposals?e.enabledApiProposals.includes(t):!1}function H(e,t){if(!zt(e,t))throw new Error(`Extension '${e.identifier.value}' CANNOT use API proposal: ${t}.
Its package.json#enabledApiProposals-property declares: ${e.enabledApiProposals?.join(", ")??"[]"} but NOT ${t}.
 The missing proposal MUST be added and you must start in extension development mode or use the following command line switch: --enable-proposed-api ${e.identifier.value}`)}var Rx;(function(e){e[e.Normal=0]="Normal",e[e.Immediate=1]="Immediate"})(Rx||(Rx={}));var bp=class L3{static{this.NONE=new L3(!1,-1,-1,-1)}constructor(t,r,i,s){this.startup=t,this.codeLoadingTime=r,this.activateCallTime=i,this.activateResolvedTime=s}},Lx=class{constructor(e){this.a=e,this.b=-1,this.c=-1,this.d=-1,this.f=-1,this.g=-1,this.h=-1}j(e,t){return e===-1||t===-1?-1:t-e}build(){return new bp(this.a,this.j(this.b,this.c),this.j(this.d,this.f),this.j(this.g,this.h))}codeLoadingStart(){this.b=Date.now()}codeLoadingStop(){this.c=Date.now()}activateCallStart(){this.d=Date.now()}activateCallStop(){this.f=Date.now()}activateResolveStart(){this.g=Date.now()}activateResolveStop(){this.h=Date.now()}},yp=class{constructor(e,t,r,i,s,n){this.activationFailed=e,this.activationFailedError=t,this.activationTimes=r,this.module=i,this.exports=s,this.disposable=n}},xN=class extends yp{constructor(e){super(!1,null,e,{activate:void 0,deactivate:void 0},void 0,ae.None)}},EN=class extends yp{constructor(){super(!1,null,bp.NONE,{activate:void 0,deactivate:void 0},void 0,ae.None)}},kp=class extends yp{constructor(e){super(!0,e,bp.NONE,{activate:void 0,deactivate:void 0},void 0,ae.None)}},k0=class{constructor(t,r,i,s){this.g=s,this.a=t,this.b=r,this.c=i,this.d=new Os,this.f=Object.create(null)}dispose(){for(const[t,r]of this.d)r.dispose()}async waitForActivatingExtensions(){const t=[];for(const[r,i]of this.d)t.push(i.wait());await Promise.all(t)}isActivated(t){const r=this.d.get(t);return!!(r&&r.value)}getActivatedExtension(t){const r=this.d.get(t);if(!r||!r.value)throw new Error(`Extension '${t.value}' is not known or not activated`);return r.value}async activateByEvent(t,r){if(this.f[t])return;const i=this.a.getExtensionDescriptionsForActivationEvent(t);await this.h(i.map(s=>({id:s.identifier,reason:{startup:r,extensionId:s.identifier,activationEvent:t}}))),this.f[t]=!0}activateById(t,r){const i=this.a.getExtensionDescription(t);if(!i)throw new Error(`Extension '${t.value}' is not known`);return this.h([{id:i.identifier,reason:r}])}async h(t){const r=t.filter(i=>!this.isActivated(i.id)).map(i=>this.j(i));await Promise.all(r.map(i=>i.wait()))}j(t){if(this.d.has(t.id))return this.d.get(t.id);if(this.l(t.id))return this.k(t,null,[],null);const r=this.a.getExtensionDescription(t.id);if(!r){const n=new Error(`Cannot activate unknown extension '${t.id.value}'`),o=this.k(t,null,[],new kp(n));return this.c.onExtensionActivationError(t.id,n,new Ax(t.id.value)),o}const i=[],s=typeof r.extensionDependencies>"u"?[]:r.extensionDependencies;for(const n of s){if(this.m(n))continue;const o=this.d.get(n);if(o){i.push(o);continue}if(this.l(n)){i.push(this.j({id:this.b.getExtensionDescription(n).identifier,reason:t.reason}));continue}const a=this.a.getExtensionDescription(n);if(a){if(!a.main&&!a.browser)continue;i.push(this.j({id:a.identifier,reason:t.reason}));continue}const c=r.displayName||r.identifier.value,l=new Error(`Cannot activate the '${c}' extension because it depends on unknown extension '${n}'`),u=this.k(t,r.displayName,[],new kp(l));return this.c.onExtensionActivationError(r.identifier,l,new Ax(n)),u}return this.k(t,r.displayName,i,null)}k(t,r,i,s){const n=new x0(t.id,r,t.reason,i,s,this.c,this.g);return this.d.set(t.id,n),n}l(t){return vu.isHostExtension(t,this.a,this.b)}m(t){const r=this.b.getExtensionDescription(t);return r?!r.main&&!r.browser:!1}};k0=__decorate([__param(3,Ne)],k0);var x0=class{get value(){return this.h}get friendlyName(){return this.d||this.c.value}constructor(t,r,i,s,n,o,a){this.c=t,this.d=r,this.f=i,this.g=s,this.h=n,this.j=o,this.k=a,this.a=new ui,this.b=!1,this.l()}dispose(){this.b=!0}wait(){return this.a.wait()}async l(){await this.m(),this.a.open()}async m(){if(!this.h){for(;this.g.length>0;){for(let t=0;t<this.g.length;t++){const r=this.g[t];if(r.value&&!r.value.activationFailed){this.g.splice(t,1),t--;continue}if(r.value&&r.value.activationFailed){const i=new Error(`Cannot activate the '${this.friendlyName}' extension because its dependency '${r.friendlyName}' failed to activate`);i.detail=r.value.activationFailedError,this.h=new kp(i),this.j.onExtensionActivationError(this.c,i,null);return}}this.g.length>0&&await Promise.race(this.g.map(t=>t.wait()))}await this.n()}}async n(){try{this.h=await this.j.actualActivateExtension(this.c,this.f)}catch(t){const r=new Error;if(t&&t.name&&(r.name=t.name),t&&t.message?r.message=`Activating extension '${this.c.value}' failed: ${t.message}.`:r.message=`Activating extension '${this.c.value}' failed: ${t}.`,t&&t.stack&&(r.stack=t.stack),this.h=new kp(r),this.b&&ys(t))return;this.j.onExtensionActivationError(this.c,r,null),this.k.error(`Activating extension ${this.c.value} failed due to an error:`),this.k.error(t)}}};x0=__decorate([__param(6,Ne)],x0);var Nx=class{constructor(e,t){this.c=t,this.b=new T,this.onDidChangeStorage=this.b.event,this.a=e.getProxy(K.MainThreadStorage)}registerExtensionStorageKeysToSync(e,t){this.a.$registerExtensionStorageKeysToSync(e,t)}async initializeExtensionStorage(e,t,r){const i=await this.a.$initializeExtensionStorage(e,t);let s;return i&&(s=this.d(e,t,i)),s||r}setValue(e,t,r){return this.a.$setValue(e,t,r)}$acceptValue(e,t,r){const i=this.d(e,t,r);i&&this.b.fire({shared:e,key:t,value:i})}d(e,t,r){try{return JSON.parse(r)}catch(i){this.c.error(`[extHostStorage] unexpected error parsing storage contents (extensionId: ${t}, global: ${e}): ${i}`)}}},E0=X("IExtHostStorage"),Fx=class{constructor(e,t,r){this.h=new Map,this.a=e,this.b=t,this.c=r,this.d=this.c.initializeExtensionStorage(this.b,this.a,Object.create(null)).then(i=>(this.f=i,this)),this.g=this.c.onDidChangeStorage(i=>{i.shared===this.b&&i.key===this.a&&(this.f=i.value)}),this.i=new Cs(()=>{const i=this.h;this.h=new Map,(async()=>{try{await this.c.setValue(this.b,this.a,this.f);for(const s of i.values())s.complete()}catch(s){for(const n of i.values())n.error(s)}})()},0)}keys(){return Object.entries(this.f??{}).filter(([,e])=>e!==void 0).map(([e])=>e)}get whenReady(){return this.d}get(e,t){let r=this.f[e];return typeof r>"u"&&(r=t),r}update(e,t){this.f[e]=t;const r=this.h.get(e);if(r!==void 0)return r.p;const i=new vn;return this.h.set(e,i),this.i.isScheduled()||this.i.schedule(),i.p}dispose(){this.g.dispose()}},SN=class extends Fx{setKeysForSync(e){this.c.registerExtensionStorageKeysToSync({id:this.a,version:this.j.version},e)}constructor(e,t){super(e.identifier.value,!0,t),this.j=e}},hs,S0=hs=class{constructor(t,r){this.b=new Map,this.c=new j4,this.a=t.getProxy(K.MainThreadFileSystem);const i=this;this.value=Object.freeze({async stat(s){try{let n;const o=i.b.get(s.scheme);return o?(await i.a.$ensureActivation(s.scheme),n=await o.impl.stat(s)):n=await i.a.$stat(s),{type:n.type,ctime:n.ctime,mtime:n.mtime,size:n.size,permissions:n.permissions===kn.Readonly?1:void 0}}catch(n){hs.e(n)}},async readDirectory(s){try{const n=i.b.get(s.scheme);return n?(await i.a.$ensureActivation(s.scheme),(await n.impl.readDirectory(s)).slice()):await i.a.$readdir(s)}catch(n){return hs.e(n)}},async createDirectory(s){try{const n=i.b.get(s.scheme);return n&&!n.isReadonly?(await i.a.$ensureActivation(s.scheme),await i.d(n.impl,n.extUri,s)):await i.a.$mkdir(s)}catch(n){return hs.e(n)}},async readFile(s){try{const n=i.b.get(s.scheme);return n?(await i.a.$ensureActivation(s.scheme),(await n.impl.readFile(s)).slice()):(await i.a.$readFile(s)).buffer}catch(n){return hs.e(n)}},async writeFile(s,n){try{const o=i.b.get(s.scheme);return o&&!o.isReadonly?(await i.a.$ensureActivation(s.scheme),await i.d(o.impl,o.extUri,o.extUri.dirname(s)),await i.c.queueFor(s,()=>Promise.resolve(o.impl.writeFile(s,n,{create:!0,overwrite:!0})))):await i.a.$writeFile(s,re.wrap(n))}catch(o){return hs.e(o)}},async delete(s,n){try{const o=i.b.get(s.scheme);return o&&!o.isReadonly&&!n?.useTrash?(await i.a.$ensureActivation(s.scheme),await o.impl.delete(s,{recursive:!1,...n})):await i.a.$delete(s,{recursive:!1,useTrash:!1,atomic:!1,...n})}catch(o){return hs.e(o)}},async rename(s,n,o){try{return await i.a.$rename(s,n,{overwrite:!1,...o})}catch(a){return hs.e(a)}},async copy(s,n,o){try{return await i.a.$copy(s,n,{overwrite:!1,...o})}catch(a){return hs.e(a)}},isWritableFileSystem(s){const n=r.getCapabilities(s);if(typeof n=="number")return!(n&2048)}})}async d(t,r,i){const s=[];for(;!r.isEqual(i,r.dirname(i));)try{if(!((await t.stat(i)).type&Gr.Directory))throw qt.FileExists(`Unable to create folder '${i.scheme===Q.file?i.fsPath:i.toString(!0)}' that already exists but is not a directory`);break}catch(n){if(sd(n)!==ge.FileNotFound)throw n;s.push(r.basename(i)),i=r.dirname(i)}for(let n=s.length-1;n>=0;n--){i=r.joinPath(i,s[n]);try{await t.createDirectory(i)}catch(o){if(sd(o)!==ge.FileExists)throw o}}}static e(t){if(t instanceof qt)throw t;if(t instanceof id)switch(t.code){case ge.FileExists:throw qt.FileExists(t.message);case ge.FileNotFound:throw qt.FileNotFound(t.message);case ge.FileNotADirectory:throw qt.FileNotADirectory(t.message);case ge.FileIsADirectory:throw qt.FileIsADirectory(t.message);case ge.NoPermissions:throw qt.NoPermissions(t.message);case ge.Unavailable:throw qt.Unavailable(t.message);default:throw new qt(t.message,t.name)}if(!(t instanceof Error))throw new qt(String(t));if(t.name==="ENOPRO"||t.message.includes("ENOPRO"))throw qt.Unavailable(t.message);switch(t.name){case ge.FileExists:throw qt.FileExists(t.message);case ge.FileNotFound:throw qt.FileNotFound(t.message);case ge.FileNotADirectory:throw qt.FileNotADirectory(t.message);case ge.FileIsADirectory:throw qt.FileIsADirectory(t.message);case ge.NoPermissions:throw qt.NoPermissions(t.message);case ge.Unavailable:throw qt.Unavailable(t.message);default:throw new qt(t.message,t.name)}}addFileSystemProvider(t,r,i){return this.b.set(t,{impl:r,extUri:i?.isCaseSensitive?Ye:DI,isReadonly:!!i?.isReadonly}),me(()=>this.b.delete(t))}getFileSystemProviderExtUri(t){return this.b.get(t)?.extUri??Ye}};S0=hs=__decorate([__param(0,Ue),__param(1,ua)],S0);var wu=X("IExtHostConsumerFileSystem"),$0=X("IExtensionStoragePaths"),C0=class{constructor(t,r,i){this.d=r,this.f=i,this.a=t.workspace??void 0,this.b=t.environment,this.whenReady=this.h().then(s=>this.c=s)}async g(t){return k.joinPath(this.b.workspaceStorageHome,t)}async h(){if(!this.a)return Promise.resolve(void 0);const t=this.a.id,r=await this.g(t);try{return await this.f.value.stat(r),this.d.trace("[ExtHostStorage] storage dir already exists",r),r}catch{}try{return this.d.trace("[ExtHostStorage] creating dir and metadata-file",r),await this.f.value.createDirectory(r),await this.f.value.writeFile(k.joinPath(r,"meta.json"),new TextEncoder().encode(JSON.stringify({id:this.a.id,configuration:k.revive(this.a.configuration)?.toString(),name:this.a.name},void 0,2))),r}catch(i){this.d.error("[ExtHostStorage]",i);return}}workspaceValue(t){if(this.c)return k.joinPath(this.c,t.identifier.value)}globalValue(t){return k.joinPath(this.b.globalStorageHome,t.identifier.value.toLowerCase())}onWillDeactivateAll(){}};C0=__decorate([__param(0,er),__param(1,Ne),__param(2,wu)],C0);var $N=X("tunnelService"),rq=X("sharedTunnelsService"),gi;(function(e){e.Http="http",e.Https="https"})(gi||(gi={}));var ds;(function(e){e.ConstantPrivate="constantPrivate",e.Private="private",e.Public="public"})(ds||(ds={}));function CN(e){return!!e.forwardPort}var Un;(function(e){e[e.Notify=1]="Notify",e[e.OpenBrowser=2]="OpenBrowser",e[e.OpenPreview=3]="OpenPreview",e[e.Silent=4]="Silent",e[e.Ignore=5]="Ignore",e[e.OpenBrowserOnce=6]="OpenBrowserOnce"})(Un||(Un={}));function PN(e){if(e.scheme!=="http"&&e.scheme!=="https")return;const t=/^(localhost|127\.0\.0\.1|0\.0\.0\.0):(\d+)$/.exec(e.authority);if(t)return{address:t[1],port:+t[2]}}var bu=["localhost","127.0.0.1","0:0:0:0:0:0:0:1","::1"];function Fo(e){return bu.indexOf(e)>=0}var xp=["0.0.0.0","0:0:0:0:0:0:0:0","::"];function qs(e){return xp.indexOf(e)>=0}function IN(e,t,r,i){if(r===1)return!1;if(r===2&&qs(t)){const s=/(\d+)\.(\d+)\.(\d+)/g.exec(i);if(s?.length===4&&parseInt(s[1])>=18)return!1}return e<1024}var DN=class{constructor(e,t,r){this.remoteAddress=e,this.localAddress=t,this.b=r,this.a=new T,this.onDidDispose=this.a.event}dispose(){return this.a.fire(),this.b()}},P0=class extends ae{constructor(t,r){super(),this.r=t,this.s=r,this.a=new T,this.onTunnelOpened=this.a.event,this.b=new T,this.onTunnelClosed=this.b.event,this.c=new T,this.onAddedTunnelProvider=this.c.event,this.f=new Map,this.h=!1,this.j=!0,this.m=[],this.n=new Set}get hasTunnelProvider(){return!!this.g}get t(){const t=this.s.getValue("remote.localPortHost");return!t||t==="localhost"?"127.0.0.1":"0.0.0.0"}setTunnelProvider(t){return this.g=t,t?(this.c.fire(),{dispose:()=>{this.g=void 0,this.h=!1,this.m=[]}}):(this.h=!1,this.m=[],this.c.fire(),{dispose:()=>{}})}setTunnelFeatures(t){this.h=t.elevation,this.m=t.privacyOptions,this.j=t.protocol}get canChangeProtocol(){return this.j}get canElevate(){return this.h}get canChangePrivacy(){return this.m.length>0}get privacyOptions(){return this.m}get tunnels(){return this.u()}async u(){const t=[],r=Array.from(this.f.values());for(const i of r){const s=Array.from(i.values());for(const n of s){const o=await n.value;o&&typeof o!="string"&&t.push(o)}}return t}async dispose(){super.dispose();for(const t of this.f.values()){for(const{value:r}of t.values())await r.then(i=>typeof i!="string"?i?.dispose():void 0);t.clear()}this.f.clear()}setEnvironmentTunnel(t,r,i,s,n){this.z(t,r,Promise.resolve({tunnelRemoteHost:t,tunnelRemotePort:r,localAddress:i,privacy:s,protocol:n,dispose:()=>Promise.resolve()}))}async getExistingTunnel(t,r){(qs(t)||Fo(t))&&(t=bu[0]);const i=this.D(t,r);if(i)return++i.refcount,i.value}openTunnel(t,r,i,s,n,o=!1,a,c){this.r.trace(`ForwardedPorts: (TunnelService) openTunnel request for ${r}:${i} on local port ${n}.`);const l=this.g??t;if(!l)return;if(r||(r="localhost"),s||(s=this.t),this.g&&this.n.has(i)){this.r.debug("ForwardedPorts: (TunnelService) Another call to create a tunnel with the same address has occurred before the last one completed. This call will be ignored.");return}const u=this.F(l,r,i,s,n,o,a,c);return u?u.then(h=>{if(h){if(typeof h=="string")return this.r.trace("ForwardedPorts: (TunnelService) The tunnel provider returned an error when creating the tunnel."),this.C(r,i),h}else{this.r.trace("ForwardedPorts: (TunnelService) New tunnel is undefined."),this.C(r,i);return}this.r.trace("ForwardedPorts: (TunnelService) New tunnel established.");const d=this.w(h);return(h.tunnelRemoteHost!==r||h.tunnelRemotePort!==i)&&this.r.warn("ForwardedPorts: (TunnelService) Created tunnel does not match requirements of requested tunnel. Host or port mismatch."),a&&h.privacy!==a&&this.r.warn("ForwardedPorts: (TunnelService) Created tunnel does not match requirements of requested tunnel. Privacy mismatch."),this.a.fire(d),d}):(this.r.trace("ForwardedPorts: (TunnelService) Tunnel was not created."),u)}w(t){return{tunnelRemotePort:t.tunnelRemotePort,tunnelRemoteHost:t.tunnelRemoteHost,tunnelLocalPort:t.tunnelLocalPort,localAddress:t.localAddress,privacy:t.privacy,protocol:t.protocol,dispose:async()=>{this.r.trace(`ForwardedPorts: (TunnelService) dispose request for ${t.tunnelRemoteHost}:${t.tunnelRemotePort} `);const r=this.f.get(t.tunnelRemoteHost);if(r){const i=r.get(t.tunnelRemotePort);i&&(i.refcount--,await this.y(t.tunnelRemoteHost,t.tunnelRemotePort,i))}}}}async y(t,r,i){if(i.refcount<=0){this.r.trace(`ForwardedPorts: (TunnelService) Tunnel is being disposed ${t}:${r}.`);const s=i.value.then(async n=>{n&&typeof n!="string"&&(await n.dispose(!0),this.b.fire({host:n.tunnelRemoteHost,port:n.tunnelRemotePort}))});return this.f.has(t)&&this.f.get(t).delete(r),s}}async closeTunnel(t,r){this.r.trace(`ForwardedPorts: (TunnelService) close request for ${t}:${r} `);const i=this.f.get(t);if(i&&i.has(r)){const s=i.get(r);s.refcount=0,await this.y(t,r,s)}}z(t,r,i){this.f.has(t)||this.f.set(t,new Map),this.f.get(t).set(r,{refcount:1,value:i})}async C(t,r){const i=this.f.get(t);if(i){const s=i.get(r),n=s?await s.value:void 0;(!n||typeof n=="string")&&i.delete(r),i.size===0&&this.f.delete(t)}}D(t,r){const i=[t];Fo(t)?(i.push(...bu),i.push(...xp)):qs(t)&&i.push(...xp);const s=i.map(n=>this.f.get(n));for(const n of s){const o=n?.get(r);if(o)return o}}canTunnel(t){return!!PN(t)}G(t,r,i,s,n,o,a){this.r.trace(`ForwardedPorts: (TunnelService) Creating tunnel with provider ${r}:${i} on local port ${s}.`);const c=i;this.n.add(c);const l=s===void 0?i:s,u={elevationRequired:n?this.isPortPrivileged(l):!1},h={remoteAddress:{host:r,port:i},localAddressPort:s,privacy:o,public:o?o!==ds.Private:void 0,protocol:a},d=t.forwardPort(h,u);return d?(this.z(r,i,d),d.finally(()=>{this.r.trace("ForwardedPorts: (TunnelService) Tunnel created by provider."),this.n.delete(c)})):this.n.delete(c),d}};P0=__decorate([__param(0,Ne),__param(1,Sn)],P0);var AN=class extends DN{},I0;(function(e){function t(i){return{remoteAddress:i.remoteAddress,localAddress:i.localAddress,public:!!i.public,privacy:i.privacy??(i.public?ds.Public:ds.Private),protocol:i.protocol}}e.fromApiTunnel=t;function r(i){return{remoteAddress:{host:i.tunnelRemoteHost,port:i.tunnelRemotePort},localAddress:i.localAddress,public:i.privacy!==ds.ConstantPrivate&&i.privacy!==ds.ConstantPrivate,privacy:i.privacy,protocol:i.protocol}}e.fromServiceTunnel=r})(I0||(I0={}));var Ep=X("IExtHostTunnelService"),Sp=class extends ae{constructor(t,r,i){super(),this.s=i,this.f=()=>Promise.resolve(!0),this.g=new Map,this.h=new T,this.onDidChangeTunnels=this.h.event,this.n=0,this.r=new Map,this.a=t.getProxy(K.MainThreadTunnelService)}async openTunnel(t,r){this.s.trace(`ForwardedPorts: (ExtHostTunnelService) ${t.identifier.value} called openTunnel API for ${r.remoteAddress.host}:${r.remoteAddress.port}.`);const i=await this.a.$openTunnel(r,t.displayName);if(i){const s=new AN(i.remoteAddress,i.localAddress,()=>this.a.$closeTunnel(i.remoteAddress));return this.B(s),s}}async getTunnels(){return this.a.$getTunnels()}u(){return this.n++}registerPortsAttributesProvider(t,r){t.portRange===void 0&&t.commandPattern===void 0&&this.s.error("PortAttributesProvider must specify either a portRange or a commandPattern");const i=this.u();return this.r.set(i,{selector:t,provider:r}),this.a.$registerPortsAttributesProvider(t,i),new _e(()=>{this.r.delete(i),this.a.$unregisterPortsAttributesProvider(i)})}async $providePortAttributes(t,r,i,s,n){const o=[];for(const c of t){const l=this.r.get(c);if(!l)return[];o.push(...await Promise.all(r.map(async u=>{let h;try{h=await l.provider.providePortAttributes({port:u,pid:i,commandLine:s},n)}catch{h=await l.provider.providePortAttributes(u,i,s,n)}return{providedAttributes:h,port:u}})))}const a=o.filter(c=>!!c.providedAttributes);return a.length>0?a.map(c=>({autoForwardAction:c.providedAttributes.autoForwardAction,port:c.port})):[]}async $registerCandidateFinder(t){}registerTunnelProvider(t,r){if(this.b)throw new Error("A tunnel provider has already been registered. Only the first tunnel provider to be registered will be used.");this.b=async(s,n)=>await t.provideTunnel(s,n,Ke.None)??void 0;const i=r.tunnelFeatures?{elevation:!!r.tunnelFeatures?.elevation,privacyOptions:r.tunnelFeatures?.privacyOptions,protocol:r.tunnelFeatures.protocol===void 0?!0:r.tunnelFeatures.protocol}:void 0;return this.a.$setTunnelProvider(i,!0),Promise.resolve(me(()=>{this.b=void 0,this.a.$setTunnelProvider(void 0,!1)}))}async setTunnelFactory(t,r){if(t){t.candidatePortSource!==void 0&&this.a.$setCandidatePortSource(t.candidatePortSource),t.showCandidatePort&&(this.f=t.showCandidatePort,this.a.$setCandidateFilter());const i=t.tunnelFactory??(r?this.w(r):void 0);if(i){this.b=i;let s=t.tunnelFeatures?.privacyOptions??[];t.tunnelFeatures?.public&&s.length===0&&(s=[{id:"private",label:p(2732,null),themeIcon:"lock"},{id:"public",label:p(2733,null),themeIcon:"eye"}]);const n=t.tunnelFeatures?{elevation:!!t.tunnelFeatures?.elevation,public:!!t.tunnelFeatures?.public,privacyOptions:s,protocol:!0}:void 0;this.a.$setTunnelProvider(n,!!t.tunnelFactory)}}else this.b=void 0;return me(()=>{this.b=void 0})}w(t){}async $closeTunnel(t,r){if(this.g.has(t.host)){const i=this.g.get(t.host);i.has(t.port)&&(r&&i.get(t.port).disposeListener.dispose(),await i.get(t.port).tunnel.dispose(),i.delete(t.port))}}async $onDidTunnelsChange(){this.h.fire()}async $forwardPort(t,r){if(this.b)try{this.s.trace("ForwardedPorts: (ExtHostTunnelService) Getting tunnel from provider.");const i=this.b(t,r);if(this.s.trace("ForwardedPorts: (ExtHostTunnelService) Got tunnel promise from provider."),i!==void 0){const s=await i;if(this.s.trace("ForwardedPorts: (ExtHostTunnelService) Successfully awaited tunnel from provider."),s===void 0){this.s.error("ForwardedPorts: (ExtHostTunnelService) Resolved tunnel is undefined");return}this.g.has(t.remoteAddress.host)||this.g.set(t.remoteAddress.host,new Map);const n=this.B(s.onDidDispose(()=>(this.s.trace("ForwardedPorts: (ExtHostTunnelService) Extension fired tunnel's onDidDispose."),this.a.$closeTunnel(s.remoteAddress))));return this.g.get(t.remoteAddress.host).set(t.remoteAddress.port,{tunnel:s,disposeListener:n}),I0.fromApiTunnel(s)}else this.s.trace("ForwardedPorts: (ExtHostTunnelService) Tunnel is undefined")}catch(i){if(this.s.trace("ForwardedPorts: (ExtHostTunnelService) tunnel provider error"),i instanceof Error)return i.message}}async $applyCandidateFilter(t){const r=await Promise.all(t.map(s=>this.f(s.host,s.port,s.detail??""))),i=t.filter((s,n)=>r[n]);return this.s.trace(`ForwardedPorts: (ExtHostTunnelService) filtered from ${t.map(s=>s.port).join(", ")} to ${i.map(s=>s.port).join(", ")}`),i}};Sp=__decorate([__param(0,Ue),__param(1,er),__param(2,Ne)],Sp);function TN(e){return[...e.entries()]}function RN(e){return e?[...e.entries()]:[]}var LN=class{constructor(e){this.b=e,this.a=new Map}dispose(){for(const e of this.a.values())e.dispose()}startBuffering(e,t,r=5){const i=t(s=>{const n=typeof s=="string"?s:s.data;let o=this.a.get(e);if(o){o.data.push(n);return}const a=setTimeout(()=>this.flushBuffer(e),r);o={data:[n],timeoutId:a,dispose:()=>{clearTimeout(a),this.flushBuffer(e),i.dispose()}},this.a.set(e,o)});return i}stopBuffering(e){this.a.get(e)?.dispose()}flushBuffer(e){const t=this.a.get(e);t&&(this.a.delete(e),this.b(e,t.data.join("")))}},Oo=(e,t,r,i)=>{let s=t;return{enumerable:!0,configurable:!1,get(){return s},set(n){if(!r(s,n)){const o=s;s=n,e.listener?.(i(n,o))}}}},nc=(e,t)=>e===t,Hn={range:(e,t)=>e===t?!0:!e||!t?!1:e.isEqual(t),label:nc,description:nc,sortText:nc,busy:nc,error:nc,canResolveChildren:nc,tags:(e,t)=>!(e.length!==t.length||e.some(r=>!t.find(i=>r.id===i.id)))},oc=e=>t=>({op:4,update:e(t)}),NN=(e,t)=>({range:(()=>{let r;const i=oc(s=>({range:nt.lift(W.from(s))}));return{enumerable:!0,configurable:!1,get(){return r},set(s){e.listener?.({op:6}),Hn.range(r,s)||(r=s,e.listener?.(i(s)))}}})(),label:Oo(e,t,Hn.label,oc(r=>({label:r}))),description:Oo(e,void 0,Hn.description,oc(r=>({description:r}))),sortText:Oo(e,void 0,Hn.sortText,oc(r=>({sortText:r}))),canResolveChildren:Oo(e,!1,Hn.canResolveChildren,r=>({op:2,state:r})),busy:Oo(e,!1,Hn.busy,oc(r=>({busy:r}))),error:Oo(e,void 0,Hn.error,oc(r=>({error:Oe.fromStrict(r)||null}))),tags:Oo(e,[],Hn.tags,(r,i)=>({op:1,new:r.map(Hi.from),old:i.map(Hi.from)}))}),FN=e=>{const t=ze.fromString(e.extId),r=new yu(t.controllerId,t.localId,e.label,k.revive(e.uri)||void 0);return r.range=W.to(e.range||void 0),r.description=e.description||void 0,r.sortText=e.sortText||void 0,r.tags=e.tags.map(i=>Hi.to({id:K7(i).tagId})),r},Ox=e=>{let t;for(const r of e.tests){const i=FN(r.item);Nd(i).parent=t,t=i}return t},yu=class N3{constructor(t,r,i,s){if(r.includes("\0"))throw new Error(`Test IDs may not include the ${JSON.stringify(r)} symbol`);const n=vL(this,t);Object.defineProperties(this,{id:{value:r,enumerable:!0,writable:!1},uri:{value:s,enumerable:!0,writable:!1},parent:{enumerable:!1,get(){return n.parent instanceof D0?void 0:n.parent}},children:{value:mL(n,Nd,N3),enumerable:!0,writable:!1},...NN(n,i)})}},D0=class extends yu{constructor(e,t){super(e,e,t,void 0),this._isRoot=!0}},ON=class extends fL{constructor(e,t,r){super({controllerId:e,getDocumentVersion:i=>i&&r.getDocument(i)?.version,getApiFor:Nd,getChildren:i=>i.children,root:new D0(e,t),toITestItem:Fn.from})}},ku;(function(e){e[e.Desktop=1]="Desktop",e[e.Web=2]="Web"})(ku||(ku={}));var Mx;(function(e){e[e.VersionMismatch=55]="VersionMismatch",e[e.UnexpectedError=81]="UnexpectedError"})(Mx||(Mx={}));var jx;(function(e){e[e.Initialized=0]="Initialized",e[e.Ready=1]="Ready",e[e.Terminate=2]="Terminate"})(jx||(jx={}));function Ux(e){const t=re.alloc(1);switch(e){case 0:t.writeUInt8(1,0);break;case 1:t.writeUInt8(2,0);break;case 2:t.writeUInt8(3,0);break}return t}function MN(e,t){if(e.byteLength!==1)return!1;switch(e.readUInt8(0)){case 1:return t===0;case 2:return t===1;case 3:return t===2;default:return!1}}var Hx;(function(e){e.Start="START_NATIVE_LOG",e.End="END_NATIVE_LOG"})(Hx||(Hx={}));var A0=class extends ae{constructor(t,r){super(),this.s=t,this.t=r,this.a=this.B(new T),this.onDidChangeTelemetryEnabled=this.a.event,this.b=this.B(new T),this.onDidChangeTelemetryConfiguration=this.b.event,this.c={usage:!0,error:!0},this.f=0,this.g=!1,this.j=!1,this.r=new Map,this.m=k.revive(this.s.environment.extensionTelemetryLogResource),this.j=this.s.environment.isExtensionTelemetryLoggingOnly,this.n=r.createLogger(this.m,{id:fN,name:p(2729,null,this.j?" (Not Sent)":""),hidden:!0}),this.B(this.n),this.B(r.onDidChangeLogLevel(i=>{CA(i)&&this.u()})),this.n.info("Below are logs for extension telemetry events sent to the telemetry output channel API once the log level is set to trace."),this.n.info("===========================================================")}u(){this.t.setVisibility(this.m,this.g&&this.t.getLogLevel()===ye.Trace)}getTelemetryConfiguration(){return this.f===3}getTelemetryDetails(){return{isCrashEnabled:this.f>=1,isErrorsEnabled:this.c.error?this.f>=2:!1,isUsageEnabled:this.c.usage?this.f>=3:!1}}instantiateLogger(t,r,i){const s=this.getTelemetryDetails(),n=new Bx(r,i,t,this.n,this.j,this.getBuiltInCommonProperties(t),{isUsageEnabled:s.isUsageEnabled,isErrorsEnabled:s.isErrorsEnabled}),o=this.r.get(t.identifier.value)??[];return this.r.set(t.identifier.value,[...o,n]),n.apiTelemetryLogger}$initializeTelemetryLevel(t,r,i){this.f=t,this.g=r,this.c=i??{usage:!0,error:!0},this.u()}getBuiltInCommonProperties(t){const r=Object.create(null);switch(r["common.extname"]=`${t.publisher}.${t.name}`,r["common.extversion"]=t.version,r["common.vscodemachineid"]=this.s.telemetryInfo.machineId,r["common.vscodesessionid"]=this.s.telemetryInfo.sessionId,r["common.sqmid"]=this.s.telemetryInfo.sqmId,r["common.devDeviceId"]=this.s.telemetryInfo.devDeviceId,r["common.vscodeversion"]=this.s.version,r["common.isnewappinstall"]=zx(this.s.telemetryInfo.firstSessionDate),r["common.product"]=this.s.environment.appHost,this.s.uiKind){case ku.Web:r["common.uikind"]="web";break;case ku.Desktop:r["common.uikind"]="desktop";break;default:r["common.uikind"]="unknown"}return r["common.remotename"]=g1(gN(this.s.remote.authority)),r}$onDidChangeTelemetryLevel(t){this.h=this.getTelemetryConfiguration(),this.f=t;const r=this.getTelemetryDetails();this.r.forEach((i,s)=>{const n=i.filter(o=>!o.isDisposed);n.length===0?this.r.delete(s):this.r.set(s,n)}),this.r.forEach(i=>{for(const s of i)s.updateTelemetryEnablements(r.isUsageEnabled,r.isErrorsEnabled)}),this.h!==this.getTelemetryConfiguration()&&this.a.fire(this.getTelemetryConfiguration()),this.b.fire(this.getTelemetryDetails()),this.u()}onExtensionError(t,r){const s=this.r.get(t.value)?.filter(o=>!o.isDisposed);if(!s)return this.r.delete(t.value),!1;let n=!1;for(const o of s)o.ignoreUnhandledExtHostErrors||(o.logError(r),n=!0);return n}};A0=__decorate([__param(0,er),__param(1,ca)],A0);var Bx=class{static validateSender(e){if(typeof e!="object")throw new TypeError("TelemetrySender argument is invalid");if(typeof e.sendEventData!="function")throw new TypeError("TelemetrySender.sendEventData must be a function");if(typeof e.sendErrorData!="function")throw new TypeError("TelemetrySender.sendErrorData must be a function");if(typeof e.flush<"u"&&typeof e.flush!="function")throw new TypeError("TelemetrySender.flush must be a function or undefined")}constructor(e,t,r,i,s,n,o){this.g=r,this.h=i,this.i=s,this.j=n,this.a=new T,this.ignoreUnhandledExtHostErrors=t?.ignoreUnhandledErrors??!1,this.b=t?.ignoreBuiltInCommonProperties??!1,this.c=t?.additionalCommonProperties,this.f=e,this.d={isUsageEnabled:o.isUsageEnabled,isErrorsEnabled:o.isErrorsEnabled}}updateTelemetryEnablements(e,t){this.e&&(this.d={isUsageEnabled:e,isErrorsEnabled:t},this.a.fire(this.e))}mixInCommonPropsAndCleanData(e){let t="properties"in e?e.properties??{}:e;return t=Dx(t,[]),this.c&&(t=Ps(t,this.c)),this.b||(t=Ps(t,this.j)),"properties"in e?e.properties=t:e=t,e}k(e,t){this.f&&(this.g.publisher==="vscode"?e=this.g.name+"/"+e:e=this.g.identifier.value+"/"+e,t=this.mixInCommonPropsAndCleanData(t||{}),this.i||this.f?.sendEventData(e,t),this.h.trace(e,t))}logUsage(e,t){this.d.isUsageEnabled&&this.k(e,t)}logError(e,t){if(!(!this.d.isErrorsEnabled||!this.f))if(typeof e=="string")this.k(e,t);else{const r={name:e.name,message:e.message,stack:e.stack,cause:e.cause},i=Dx(r,[]),s=new Error(i.message,{cause:i.cause});s.stack=i.stack,s.name=i.name,t=this.mixInCommonPropsAndCleanData(t||{}),this.i||this.f.sendErrorData(s,t),this.h.trace("exception",t)}}get apiTelemetryLogger(){if(!this.e){const e=this,t={logUsage:e.logUsage.bind(e),get isUsageEnabled(){return e.d.isUsageEnabled},get isErrorsEnabled(){return e.d.isErrorsEnabled},logError:e.logError.bind(e),dispose:e.dispose.bind(e),onDidChangeEnableStates:e.a.event.bind(e)};this.e=Object.freeze(t)}return this.e}get isDisposed(){return!this.f}dispose(){if(this.f?.flush){let e=this.f;this.f=void 0,Promise.resolve(e.flush()).then(e=void 0),this.e=void 0}else this.f=void 0}};function zx(e){const t=Date.now()-new Date(e).getTime();return isNaN(t)?!1:t<1e3*60*60*24}var $p=X("IExtHostTelemetry"),T0=class{#e;#t;#r;constructor(t,r,i){this.b=new Map,this.c=new Map,this.#e=t.getProxy(K.MainThreadCommands),this.d=r,this.#r=i,this.#t=t.getProxy(K.MainThreadTelemetry),this.converter=new jN(this,s=>{const n=this.c.get(s);return n?.result===Ee.Void?n:void 0},r),this.f=[{processArgument(s){return dr(s)}},{processArgument(s){return Wh(s,function(n){if(nt.isIRange(n))return W.to(n);if(ri.isIPosition(n))return Ze.to(n);if(nt.isIRange(n.range)&&k.isUri(n.uri))return Tr.to(n);if(n instanceof re)return n.buffer.buffer;if(!Array.isArray(n))return n})}}]}registerArgumentProcessor(t){this.f.push(t)}registerApiCommand(t){const r=this.registerCommand(!1,t.id,async(...i)=>{const s=t.args.map((o,a)=>{if(!o.validate(i[a]))throw new Error(`Invalid argument '${o.name}' when running '${t.id}', received: ${typeof i[a]=="object"?JSON.stringify(i[a],null,"	"):i[a]} `);return o.convert(i[a])}),n=await this.executeCommand(t.internalId,...s);return t.result.convert(n,i,this.converter)},void 0,{description:t.description,args:t.args,returns:t.result.description});return this.c.set(t.id,t),new _e(()=>{r.dispose(),this.c.delete(t.id)})}registerCommand(t,r,i,s,n,o){if(this.d.trace("ExtHostCommands#registerCommand",r),!r.trim().length)throw new Error("invalid id");if(this.b.has(r))throw new Error(`command '${r}' already exists`);return this.b.set(r,{callback:i,thisArg:s,metadata:n,extension:o}),t&&this.#e.$registerCommand(r),new _e(()=>{this.b.delete(r)&&t&&this.#e.$unregisterCommand(r)})}executeCommand(t,...r){return this.d.trace("ExtHostCommands#executeCommand",t),this.g(t,r,!0)}async g(t,r,i){if(this.b.has(t))return this.#e.$fireCommandActivationEvent(t),this.h(t,r,!1);{let s=!1;const n=Wh(r,function(o){if(o instanceof Fe)return Ze.from(o);if(o instanceof Re)return W.from(o);if(o instanceof ii)return Tr.from(o);if(Hs.isNotebookRange(o))return us.from(o);if(o instanceof ArrayBuffer)return s=!0,re.wrap(new Uint8Array(o));if(o instanceof Uint8Array)return s=!0,re.wrap(o);if(o instanceof re)return s=!0,o;if(!Array.isArray(o))return o});try{const o=await this.#e.$executeCommand(t,s?new ei(n):n,i);return dr(o)}catch(o){if(o instanceof Error&&o.message==="$executeCommand:retry")return this.g(t,r,!1);throw o}}}async h(t,r,i){const s=this.b.get(t);if(!s)throw new Error("Unknown command");const{callback:n,thisArg:o,metadata:a}=s;if(a?.args)for(let l=0;l<a.args.length;l++)try{sI(r[l],a.args[l].constraint)}catch{throw new Error(`Running the contributed command: '${t}' failed. Illegal argument '${a.args[l].name}' - ${a.args[l].description}`)}const c=Hr.create();try{return await n.apply(o,r)}catch(l){if(t===this.converter.delegatingCommandId){const u=this.converter.getActualCommand(...r);u&&(t=u.command)}if(this.d.error(l,t,s.extension?.identifier),!i)throw l;if(s.extension?.identifier){const u=this.#r.onExtensionError(s.extension.identifier,l);this.d.trace("forwarded error to extension?",u,s.extension?.identifier)}throw new class extends Error{constructor(){super(yn(l)),this.id=t,this.source=s.extension?.displayName??s.extension?.name}}}finally{this.j(s,t,c.elapsed())}}j(t,r,i){t.extension&&this.#t.$publicLog2("Extension:ActionExecuted",{extensionId:t.extension.identifier.value,id:new y0(r),duration:i})}$executeContributedCommand(t,...r){this.d.trace("ExtHostCommands#$executeContributedCommand",t);const i=this.b.get(t);return i?(r=r.map(s=>this.f.reduce((n,o)=>o.processArgument(n,i.extension?.identifier),s)),this.h(t,r,!0)):Promise.reject(new Error(`Contributed command '${t}' does not exist.`))}getCommands(t=!1){return this.d.trace("ExtHostCommands#getCommands",t),this.#e.$getCommands().then(r=>(t&&(r=r.filter(i=>i[0]!=="_")),r))}$getContributedCommandMetadata(){const t=Object.create(null);for(const[r,i]of this.b){const{metadata:s}=i;s&&(t[r]=s)}return Promise.resolve(t)}};T0=__decorate([__param(0,Ue),__param(1,Ne),__param(2,$p)],T0);var zi=X("IExtHostCommands"),jN=class{constructor(e,t,r){this.d=e,this.f=t,this.g=r,this.delegatingCommandId=`__vsc${ir()}`,this.b=new Map,this.c=0,this.d.registerCommand(!0,this.delegatingCommandId,this.h,this)}toInternal(e,t){if(!e)return;const r={$ident:void 0,id:e.command,title:e.title,tooltip:e.tooltip};if(!e.command)return r;const i=this.f(e.command);if(i)r.id=i.internalId,r.arguments=i.args.map((s,n)=>s.convert(e.arguments&&e.arguments[n]));else if(Tc(e.arguments)){const s=`${e.command} /${++this.c}`;this.b.set(s,e),t.add(me(()=>{this.b.delete(s),this.g.trace("CommandsConverter#DISPOSE",s)})),r.$ident=s,r.id=this.delegatingCommandId,r.arguments=[s],this.g.trace("CommandsConverter#CREATE",e.command,s)}return r}fromInternal(e){return typeof e.$ident=="string"?this.b.get(e.$ident):{command:e.id,title:e.title,arguments:e.arguments}}getActualCommand(...e){return this.b.get(e[0])}h(...e){const t=this.getActualCommand(...e);return this.g.trace("CommandsConverter#EXECUTE",e[0],t?t.command:"MISSING"),t?this.d.executeCommand(t.command,...t.arguments||[]):Promise.reject(`Actual command not found, wanted to execute ${e[0]}`)}},V=class Or{static{this.Uri=new Or("uri","Uri of a text document",t=>k.isUri(t),t=>t)}static{this.Position=new Or("position","A position in a text document",t=>Fe.isPosition(t),Ze.from)}static{this.Range=new Or("range","A range in a text document",t=>Re.isRange(t),W.from)}static{this.Selection=new Or("selection","A selection in a text document",t=>js.isSelection(t),Ui.from)}static{this.Number=new Or("number","",t=>typeof t=="number",t=>t)}static{this.String=new Or("string","",t=>typeof t=="string",t=>t)}static{this.StringArray=Or.Arr(Or.String)}static Arr(t){return new Or(`${t.name}_array`,`Array of ${t.name}, ${t.description}`,r=>Array.isArray(r)&&r.every(i=>t.validate(i)),r=>r.map(i=>t.convert(i)))}static{this.CallHierarchyItem=new Or("item","A call hierarchy item",t=>t instanceof U1,Ao.from)}static{this.TypeHierarchyItem=new Or("item","A type hierarchy item",t=>t instanceof vv,Ro.from)}static{this.TestItem=new Or("testItem","A VS Code TestItem",t=>t instanceof yu,Fn.from)}constructor(t,r,i,s){this.name=t,this.description=r,this.validate=i,this.convert=s}optional(){return new Or(this.name,`(optional) ${this.description}`,t=>t==null||this.validate(t),t=>t===void 0?void 0:t===null?null:this.convert(t))}with(t,r){return new Or(t??this.name,r??this.description,this.validate,this.convert)}},Ee=class F3{static{this.Void=new F3("no result",t=>t)}constructor(t,r){this.description=t,this.convert=r}},Se=class{constructor(e,t,r,i,s){this.id=e,this.internalId=t,this.description=r,this.args=i,this.result=s}},Gs=X("IExtHostTerminalService"),R0=class extends ae{constructor(e,t,r,i){super(),this.u=e,this._id=t,this.w=r,this.y=i,this.a=!1,this.m={isInteractedWith:!1},this.isOpen=!1,this.s=this.B(new T),this.onWillDispose=this.s.event,this.w=Object.freeze(this.w),this.b=new Promise(n=>this.g=n);const s=this;this.value={get name(){return s.y||""},get processId(){return s.b},get creationOptions(){return s.w},get exitStatus(){return s.j},get state(){return s.m},get selection(){return s.n},get shellIntegration(){return s.shellIntegration},sendText(n,o=!0){s.C(),s.u.$sendText(s._id,n,o)},show(n){s.C(),s.u.$show(s._id,n)},hide(){s.C(),s.u.$hide(s._id)},dispose(){s.a||(s.a=!0,s.u.$dispose(s._id))},get dimensions(){if(!(s.f===void 0||s.h===void 0))return{columns:s.f,rows:s.h}}}}dispose(){this.s.fire(),super.dispose()}async create(e,t){if(typeof this._id!="string")throw new Error("Terminal has already been created");await this.u.$createTerminal(this._id,{name:e.name,shellPath:e.shellPath??void 0,shellArgs:e.shellArgs??void 0,cwd:e.cwd??t?.cwd??void 0,env:e.env??void 0,icon:Wx(e.iconPath)??void 0,color:ha.isThemeColor(e.color)?e.color.id:void 0,initialText:e.message??void 0,strictEnv:e.strictEnv??void 0,hideFromUser:e.hideFromUser??void 0,forceShellIntegration:t?.forceShellIntegration??void 0,isFeatureTerminal:t?.isFeatureTerminal??void 0,isExtensionOwnedTerminal:!0,useShellEnvironment:t?.useShellEnvironment??void 0,location:t?.location||this.z(e.location,t?.resolvedExtHostIdentifier),isTransient:e.isTransient??void 0})}async createExtensionTerminal(e,t,r,i,s){if(typeof this._id!="string")throw new Error("Terminal has already been created");if(await this.u.$createTerminal(this._id,{name:this.y,isExtensionCustomPtyTerminal:!0,icon:i,color:ha.isThemeColor(s)?s.id:void 0,location:t?.location||this.z(e,r),isTransient:!0}),typeof this._id=="string")throw new Error("Terminal creation failed");return this._id}z(e,t){return typeof e=="object"?"parentTerminal"in e&&e.parentTerminal&&t?{parentTerminal:t}:"viewColumn"in e?{viewColumn:Gt.from(e.viewColumn),preserveFocus:e.preserveFocus}:void 0:e}C(){if(this.a)throw new Error("Terminal has already been disposed")}set name(e){this.y=e}setExitStatus(e,t){this.j=Object.freeze({code:e,reason:t})}setDimensions(e,t){return e===this.f&&t===this.h||e===0||t===0?!1:(this.f=e,this.h=t,!0)}setInteractedWith(){return this.m.isInteractedWith?!1:(this.m={isInteractedWith:!0},!0)}setSelection(e){this.n=e}_setProcessId(e){this.g?(this.g(e),this.g=void 0):this.b.then(t=>{t!==e&&(this.b=Promise.resolve(e))})}},L0=class{get onProcessReady(){return this.b.event}constructor(e){this.g=e,this.id=0,this.shouldPersist=!1,this.a=new T,this.onProcessData=this.a.event,this.b=new T,this.d=new T,this.onDidChangeProperty=this.d.event,this.f=new T,this.onProcessExit=this.f.event}refreshProperty(e){throw new Error(`refreshProperty is not suppported in extension owned terminals. property: ${e}`)}updateProperty(e,t){throw new Error(`updateProperty is not suppported in extension owned terminals. property: ${e}, value: ${t}`)}async start(){}shutdown(){this.g.close()}input(e){this.g.handleInput?.(e)}resize(e,t){this.g.setDimensions?.({columns:e,rows:t})}clearBuffer(){}async processBinary(e){}acknowledgeDataEvent(e){}async setUnicodeVersion(e){}getInitialCwd(){return Promise.resolve("")}getCwd(){return Promise.resolve("")}startSendingEvents(e){this.g.onDidWrite(t=>this.a.fire(t)),this.g.onDidClose?.((t=void 0)=>{this.f.fire(t===void 0?void 0:t)}),this.g.onDidOverrideDimensions?.(t=>{t&&this.d.fire({type:"overrideDimensions",value:{cols:t.columns,rows:t.rows}})}),this.g.onDidChangeName?.(t=>{this.d.fire({type:"title",value:t})}),this.g.open(e||void 0),e&&this.g.setDimensions?.(e),this.b.fire({pid:-1,cwd:"",windowsPty:void 0})}},UN=1,Cp=class extends ae{get activeTerminal(){return this.b?.value}get terminals(){return this.f.map(t=>t.value)}constructor(t,r,i){super(),this.Q=r,this.f=[],this.g=new Map,this.h={},this.j={},this.m={},this.n=new Map,this.w=this.B(new ks),this.z=new Set,this.C=new Map,this.D=new Map,this.F=new Map,this.G=new Map,this.H=new T,this.onDidCloseTerminal=this.H.event,this.I=new T,this.onDidOpenTerminal=this.I.event,this.J=new T,this.onDidChangeActiveTerminal=this.J.event,this.L=new T,this.onDidChangeTerminalDimensions=this.L.event,this.M=new T,this.onDidChangeTerminalState=this.M.event,this.N=new T,this.onDidChangeShell=this.N.event,this.O=new T({onWillAddFirstListener:()=>this.a.$startSendingDataEvents(),onDidRemoveLastListener:()=>this.a.$stopSendingDataEvents()}),this.onDidWriteTerminalData=this.O.event,this.P=new T({onWillAddFirstListener:()=>this.a.$startSendingCommandEvents(),onDidRemoveLastListener:()=>this.a.$stopSendingCommandEvents()}),this.onDidExecuteTerminalCommand=this.P.event,this.a=i.getProxy(K.MainThreadTerminalService),this.y=new LN(this.a.$sendProcessData),this.a.$registerProcessSupport(t),this.Q.registerArgumentProcessor({processArgument:s=>{const n=o=>{const a=o;return this.getTerminalById(a.instanceId)?.value};switch(s?.$mid){case 15:return n(s);default:{if(Array.isArray(s))for(let o=0;o<s.length&&s[o].$mid===15;o++)s[o]=n(s[o]);return s}}}}),this.B({dispose:()=>{for(const[s,n]of this.g)n.shutdown(!0)}})}getDefaultShell(t){return(t?this.u:this.s)?.path||""}getDefaultShellArgs(t){return(t?this.u:this.s)?.args||[]}createExtensionTerminal(t,r){const i=new R0(this.a,ir(),t,t.name),s=new L0(t.pty);return i.createExtensionTerminal(t.location,r,this.R(t,r).resolvedExtHostIdentifier,Wx(t.iconPath),BN(t.color)).then(n=>{const o=this.S(n,s);this.h[n]=o}),this.f.push(i),i.value}R(t,r){if(r=r||{},t.location&&typeof t.location=="object"&&"parentTerminal"in t.location){const i=t.location.parentTerminal;if(i){const s=this.f.find(n=>n.value===i);s&&(r.resolvedExtHostIdentifier=s._id)}}else t.location&&typeof t.location!="object"?r.location=t.location:r.location&&typeof r.location=="object"&&"splitActiveTerminal"in r.location&&(r.location={splitActiveTerminal:!0});return r}attachPtyToTerminal(t,r){if(!this.getTerminalById(t))throw new Error(`Cannot resolve terminal with id ${t} for virtual process`);const s=new L0(r),n=this.S(t,s);this.h[t]=n}async $acceptActiveTerminalChanged(t){const r=this.b;if(t===null){this.b=void 0,r!==this.b&&this.J.fire(this.b);return}const i=this.getTerminalById(t);i&&(this.b=i,r!==this.b&&this.J.fire(this.b.value))}async $acceptTerminalProcessData(t,r){const i=this.getTerminalById(t);i&&this.O.fire({terminal:i.value,data:r})}async $acceptTerminalDimensions(t,r,i){const s=this.getTerminalById(t);s&&s.setDimensions(r,i)&&this.L.fire({terminal:s.value,dimensions:s.value.dimensions})}async $acceptDidExecuteCommand(t,r){const i=this.getTerminalById(t);i&&this.P.fire({terminal:i.value,...r})}async $acceptTerminalMaximumDimensions(t,r,i){this.g.get(t)?.resize(r,i)}async $acceptTerminalTitleChange(t,r){const i=this.getTerminalById(t);i&&(i.name=r)}async $acceptTerminalClosed(t,r,i){const s=this.X(this.f,t);if(s!==null){const n=this.f.splice(s,1)[0];n.setExitStatus(r,i),this.H.fire(n.value)}}$acceptTerminalOpened(t,r,i,s){if(r){const a=this.X(this.f,r);if(a!==null){this.f[a]._id=t,this.I.fire(this.terminals[a]),this.f[a].isOpen=!0;return}}const n={name:s.name,shellPath:s.executable,shellArgs:s.args,cwd:typeof s.cwd=="string"?s.cwd:k.revive(s.cwd),env:s.env,hideFromUser:s.hideFromUser},o=new R0(this.a,t,n,i);this.f.push(o),this.I.fire(o.value),o.isOpen=!0}async $acceptTerminalProcessId(t,r){this.getTerminalById(t)?._setProcessId(r)}async $startExtensionTerminal(t,r){const i=this.getTerminalById(t);if(!i)return{message:p(2730,null,t)};i.isOpen||await new Promise(n=>{const o=this.onDidOpenTerminal(async a=>{a===i.value&&(o.dispose(),n())})});const s=this.g.get(t);s?s.startSendingEvents(r):this.j[t]={initialDimensions:r}}S(t,r){const i=new be;i.add(r.onProcessReady(n=>this.a.$sendProcessReady(t,n.pid,n.cwd,n.windowsPty))),i.add(r.onDidChangeProperty(n=>this.a.$sendProcessProperty(t,n))),this.y.startBuffering(t,r.onProcessData),i.add(r.onProcessExit(n=>this.U(t,n))),this.g.set(t,r);const s=this.j[t];return s&&r instanceof L0&&(r.startSendingEvents(s.initialDimensions),delete this.j[t]),i}$acceptProcessAckDataEvent(t,r){this.g.get(t)?.acknowledgeDataEvent(r)}$acceptProcessInput(t,r){this.g.get(t)?.input(r)}$acceptTerminalInteraction(t){const r=this.getTerminalById(t);r?.setInteractedWith()&&this.M.fire(r.value)}$acceptTerminalSelection(t,r){this.getTerminalById(t)?.setSelection(r)}$acceptProcessResize(t,r,i){try{this.g.get(t)?.resize(r,i)}catch(s){if(s.code!=="EPIPE"&&s.code!=="ERR_IPC_CHANNEL_CLOSED")throw s}}$acceptProcessShutdown(t,r){this.g.get(t)?.shutdown(r)}$acceptProcessRequestInitialCwd(t){this.g.get(t)?.getInitialCwd().then(r=>this.a.$sendProcessProperty(t,{type:"initialCwd",value:r}))}$acceptProcessRequestCwd(t){this.g.get(t)?.getCwd().then(r=>this.a.$sendProcessProperty(t,{type:"cwd",value:r}))}$acceptProcessRequestLatency(t){return Promise.resolve(t)}registerLinkProvider(t){return this.z.add(t),this.z.size===1&&this.a.$startLinkProvider(),new _e(()=>{this.z.delete(t),this.z.size===0&&this.a.$stopLinkProvider()})}registerProfileProvider(t,r,i){if(this.C.has(r))throw new Error(`Terminal profile provider "${r}" already registered`);return this.C.set(r,i),this.a.$registerProfileProvider(r,t.identifier.value),new _e(()=>{this.C.delete(r),this.a.$unregisterProfileProvider(r)})}registerTerminalQuickFixProvider(t,r,i){if(this.D.has(t))throw new Error(`Terminal quick fix provider "${t}" is already registered`);return this.D.set(t,i),this.a.$registerQuickFixProvider(t,r),new _e(()=>{this.D.delete(t),this.a.$unregisterQuickFixProvider(t)})}async $provideTerminalQuickFixes(t,r){const i=new wt().token;if(i.isCancellationRequested)return;const s=this.D.get(t);if(!s)return;const n=await s.provideTerminalQuickFixes(r,i);if(n===null||Array.isArray(n)&&n.length===0)return;const o=new be;if(this.w.value=o,!Array.isArray(n))return n?fp.from(n,this.Q.converter,o):void 0;const a=[];for(const c of n){const l=fp.from(c,this.Q.converter,o);l&&a.push(l)}return a}async $createContributedProfileTerminal(t,r){const i=new wt().token;let s=await this.C.get(t)?.provideTerminalProfile(i);if(!i.isCancellationRequested){if(s&&!("options"in s)&&(s={options:s}),!s||!("options"in s))throw new Error(`No terminal profile options provided for id "${t}"`);if("pty"in s.options){this.createExtensionTerminal(s.options,r);return}this.createTerminalFromOptions(s.options,r)}}async $provideLinks(t,r){const i=this.getTerminalById(t);if(!i)return[];this.F.delete(t),this.G.get(t)?.dispose(!0);const n=new wt;this.G.set(t,n);const o=[],a={terminal:i.value,line:r},c=[];for(const h of this.z)c.push(ra.withAsyncBody(async d=>{n.token.onCancellationRequested(()=>d({provider:h,links:[]}));const f=await h.provideTerminalLinks(a,n.token)||[];n.token.isCancellationRequested||d({provider:h,links:f})}));const l=await Promise.all(c);if(n.token.isCancellationRequested)return[];const u=new Map;for(const h of l)h&&h.links.length>0&&o.push(...h.links.map(d=>{const f={id:UN++,startIndex:d.startIndex,length:d.length,label:d.tooltip};return u.set(f.id,{provider:h.provider,link:d}),f}));return this.F.set(t,u),o}$activateLink(t,r){const i=this.F.get(t)?.get(r);i&&i.provider.handleTerminalLink(i.link)}U(t,r){this.y.stopBuffering(t),this.g.delete(t),delete this.j[t];const i=this.h[t];i&&(i.dispose(),delete this.h[t]),this.a.$sendProcessExit(t,r)}getTerminalById(t){return this.W(this.f,t)}getTerminalIdByApiObject(t){const r=this.f.findIndex(i=>i.value===t);return r>=0?r:null}W(t,r){const i=this.X(t,r);return i!==null?t[i]:null}X(t,r){const i=t.findIndex(s=>s._id===r);return i>=0?i:null}getEnvironmentVariableCollection(t){let r=this.n.get(t.identifier.value);return r||(r=this.B(new _x),this.Z(t.identifier.value,r)),r.getScopedEnvironmentVariableCollection(void 0)}Y(t,r){const i=TN(r.map),s=RN(r.descriptionMap);this.a.$setEnvironmentVariableCollection(t,r.persistent,i.length===0?void 0:i,s)}$initEnvironmentVariableCollections(t){t.forEach(r=>{const i=r[0],s=this.B(new _x(r[1]));this.Z(i,s)})}$acceptDefaultProfile(t,r){const i=this.s;this.s=t,this.u=r,i?.path!==t.path&&this.N.fire(t.path)}Z(t,r){this.n.set(t,r),this.B(r.onDidChangeCollection(()=>{this.Y(t,r)}))}};Cp=__decorate([__param(1,zi),__param(2,Ue)],Cp);var _x=class extends ae{get persistent(){return this.b}set persistent(e){this.b=e,this.f.fire()}get onDidChangeCollection(){return this.f&&this.f.event}constructor(e){super(),this.map=new Map,this.a=new Map,this.descriptionMap=new Map,this.b=!0,this.f=new T,this.map=new Map(e)}getScopedEnvironmentVariableCollection(e){const t=this.j(e);let r=this.a.get(t);return r||(r=new HN(this,e),this.a.set(t,r),this.B(r.onDidChangeCollection(()=>this.f.fire()))),r}replace(e,t,r,i){this.g(e,{value:t,type:Ea.Replace,options:r??{applyAtProcessCreation:!0},scope:i})}append(e,t,r,i){this.g(e,{value:t,type:Ea.Append,options:r??{applyAtProcessCreation:!0},scope:i})}prepend(e,t,r,i){this.g(e,{value:t,type:Ea.Prepend,options:r??{applyAtProcessCreation:!0},scope:i})}g(e,t){if(t.options&&t.options.applyAtProcessCreation===!1&&!t.options.applyAtShellIntegration)throw new Error("EnvironmentVariableMutatorOptions must apply at either process creation or shell integration");const r=this.h(e,t.scope),i=this.map.get(r),s=t.options?{applyAtProcessCreation:t.options.applyAtProcessCreation??!1,applyAtShellIntegration:t.options.applyAtShellIntegration??!1}:{applyAtProcessCreation:!0};if(!i||i.value!==t.value||i.type!==t.type||i.options?.applyAtProcessCreation!==s.applyAtProcessCreation||i.options?.applyAtShellIntegration!==s.applyAtShellIntegration||i.scope?.workspaceFolder?.index!==t.scope?.workspaceFolder?.index){const n=this.h(e,t.scope),o={variable:e,...t,options:s};this.map.set(n,o),this.f.fire()}}get(e,t){const r=this.h(e,t),i=this.map.get(r);return i?Vx(i):void 0}h(e,t){const r=this.j(t);return r.length?`${e}:::${r}`:e}j(e){return this.m(e?.workspaceFolder)??""}m(e){return e?e.uri.toString():void 0}getVariableMap(e){const t=new Map;for(const[r,i]of this.map)this.j(i.scope)===this.j(e)&&t.set(i.variable,Vx(i));return t}delete(e,t){const r=this.h(e,t);this.map.delete(r),this.f.fire()}clear(e){if(e?.workspaceFolder){for(const[t,r]of this.map)r.scope?.workspaceFolder?.index===e.workspaceFolder.index&&this.map.delete(t);this.n(e)}else this.map.clear(),this.descriptionMap.clear();this.f.fire()}setDescription(e,t){const r=this.j(t),i=this.descriptionMap.get(r);if(!i||i.description!==e){let s;typeof e=="string"?s=e:s=e?.value.split(`

`)[0];const n={description:s,scope:t};this.descriptionMap.set(r,n),this.f.fire()}}getDescription(e){const t=this.j(e);return this.descriptionMap.get(t)?.description}n(e){const t=this.j(e);this.descriptionMap.delete(t)}},HN=class{get persistent(){return this.b.persistent}set persistent(e){this.b.persistent=e}get onDidChangeCollection(){return this.a&&this.a.event}constructor(e,t){this.b=e,this.d=t,this.a=new T}getScoped(e){return this.b.getScopedEnvironmentVariableCollection(e)}replace(e,t,r){this.b.replace(e,t,r,this.d)}append(e,t,r){this.b.append(e,t,r,this.d)}prepend(e,t,r){this.b.prepend(e,t,r,this.d)}get(e){return this.b.get(e,this.d)}forEach(e,t){this.b.getVariableMap(this.d).forEach((r,i)=>e.call(t,i,r,this),this.d)}[Symbol.iterator](){return this.b.getVariableMap(this.d).entries()}delete(e){this.b.delete(e,this.d),this.a.fire(void 0)}clear(){this.b.clear(this.d)}set description(e){this.b.setDescription(e,this.d)}get description(){return this.b.getDescription(this.d)}},N0=class extends Cp{constructor(t,r){super(!1,t,r)}createTerminal(t,r,i){throw new Qg}createTerminalFromOptions(t,r){throw new Qg}};N0=__decorate([__param(0,zi),__param(1,Ue)],N0);function Wx(e){if(!(!e||typeof e=="string"))return"id"in e?{id:e.id,color:e.color}:e}function BN(e){return ha.isThemeColor(e)?e:void 0}function Vx(e){const t={...e};return delete t.scope,t.options=t.options??void 0,delete t.variable,t}var zN=X("progressService"),qx;(function(e){e[e.Explorer=1]="Explorer",e[e.Scm=3]="Scm",e[e.Extensions=5]="Extensions",e[e.Window=10]="Window",e[e.Notification=15]="Notification",e[e.Dialog=20]="Dialog"})(qx||(qx={}));var uq=Object.freeze({total(){},worked(){},done(){}}),Pp=class{static{this.None=Object.freeze({report(){}})}get value(){return this.a}constructor(e){this.b=e}report(e){this.a=e,this.b(this.a)}},Gx=class extends ae{constructor(t,r){super(),this.a=new vn,r.withProgress(t,i=>(this.b=i,this.c&&i.report(this.c),this.a.p)),this.B(me(()=>this.a.complete()))}report(t){this.b?this.b.report(t):this.c=t}};Gx=__decorate([__param(1,zN)],Gx);var dq=X("editorProgressService"),Jx="__",fq=X("IAuthenticationService"),pq=X("IAuthenticationExtensionsService"),F0=X("IExtHostAuthentication"),O0=class{constructor(t){this.b=new Map,this.c=new T,this.d=new _N,this.a=t.getProxy(K.MainThreadAuthentication)}getExtensionScopedSessionsEvent(t){const r=t.toLowerCase();return Qe.chain(this.c.event,i=>i.filter(s=>!s.extensionIdFilter||s.extensionIdFilter.includes(r)).map(s=>({provider:s.provider})))}async getSession(t,r,i,s={}){const n=rt.toKey(t.identifier),o=[...i].sort().join(" ");return await this.d.getOrCreate(`${n} ${r} ${o}`,async()=>{await this.a.$ensureProvider(r);const a=t.displayName||t.name;return this.a.$getSession(r,i,n,a,s)})}async getAccounts(t){return await this.a.$ensureProvider(t),await this.a.$getAccounts(t)}async removeSession(t,r){const i=this.b.get(t);return i?i.provider.removeSession(r):this.a.$removeSession(t,r)}registerAuthenticationProvider(t,r,i,s){if(this.b.get(t))throw new Error(`An authentication provider with id '${t}' is already registered.`);this.b.set(t,{label:r,provider:i,options:s??{supportsMultipleAccounts:!1}});const n=i.onDidChangeSessions(o=>this.a.$sendDidChangeSessions(t,o));return this.a.$registerAuthenticationProvider(t,r,s?.supportsMultipleAccounts??!1),new _e(()=>{n.dispose(),this.b.delete(t),this.a.$unregisterAuthenticationProvider(t)})}async $createSession(t,r,i){const s=this.b.get(t);if(s)return await s.provider.createSession(r,i);throw new Error(`Unable to find authentication provider with handle: ${t}`)}async $removeSession(t,r){const i=this.b.get(t);if(i)return await i.provider.removeSession(r);throw new Error(`Unable to find authentication provider with handle: ${t}`)}async $getSessions(t,r,i){const s=this.b.get(t);if(s)return await s.provider.getSessions(r,i);throw new Error(`Unable to find authentication provider with handle: ${t}`)}$onDidChangeAuthenticationSessions(t,r,i){return t.startsWith(Jx)||this.c.fire({provider:{id:t,label:r},extensionIdFilter:i}),Promise.resolve()}};O0=__decorate([__param(0,Ue)],O0);var _N=class{constructor(){this.a=new Map}getOrCreate(e,t){const r=this.a.get(e);if(r)return r;const i=t().finally(()=>this.a.delete(e));return this.a.set(e,i),i}},M0,j0=X("IExtHostLanguageModels"),Qx=class{constructor(e,t){this.option=e,this.stream=new vm,this.stream=t??new vm}},WN=class{constructor(){this.a=new Map,this.b=new vm,this.c=!1;const e=this;this.apiObject={get stream(){return e.b.asyncIterable},get text(){return _c.map(e.b.asyncIterable,t=>{if(t instanceof Xl)return t.value}).coalesce()}}}*d(){if(this.a.size>0)for(const[,e]of this.a)yield e.stream;else yield this.b}handleFragment(e){if(this.c)return;let t=this.a.get(e.index);t||(this.a.size===0?t=new Qx(e.index,this.b):t=new Qx(e.index),this.a.set(e.index,t));let r;e.part.type==="text"?r=new Xl(e.part.value):r=new Yl(e.part.name,e.part.toolCallId,e.part.parameters),t.stream.emitOne(r)}reject(e){this.c=!0;for(const t of this.d())t.reject(e)}resolve(){this.c=!0;for(const e of this.d())e.resolve()}},U0=class{static{M0=this}static{this.a=1}constructor(t,r,i){this.j=r,this.k=i,this.c=new T,this.d=new T,this.onDidChangeProviders=this.d.event,this.f=new Map,this.g=new Map,this.h=new Os,this.i=new Map,this.s=new Set,this.b=t.getProxy(K.MainThreadLanguageModels)}dispose(){this.c.dispose(),this.d.dispose()}registerLanguageModel(t,r,i,s){const n=M0.a++;this.f.set(n,{extension:t.identifier,provider:i,languageModelId:r});let o;s.auth&&(o={providerLabel:t.displayName||t.name,accountLabel:typeof s.auth=="object"?s.auth.label:void 0}),this.b.$registerLanguageModelProvider(n,`${rt.toKey(t.identifier)}/${r}`,{extension:t.identifier,id:r,vendor:s.vendor??rt.toKey(t.identifier),name:s.name??"",family:s.family??"",version:s.version,maxInputTokens:s.maxInputTokens,maxOutputTokens:s.maxOutputTokens,auth:o,targetExtensions:s.extensions,isDefault:s.isDefault,isUserSelectable:s.isUserSelectable});const a=i.onDidReceiveLanguageModelResponse2?.(({extensionId:c,participant:l,tokenCount:u})=>{this.b.$whenLanguageModelChatRequestMade(r,new rt(c),l,u)});return me(()=>{this.f.delete(n),this.b.$unregisterProvider(n),a?.dispose()})}async $startChatRequest(t,r,i,s,n,o){const a=this.f.get(t);if(!a)throw new Error("Provider not found");const c=new Pp(async u=>{if(o.isCancellationRequested){this.j.warn(`[CHAT](${a.extension.value}) CANNOT send progress because the REQUEST IS CANCELLED`);return}let h;if(u.part instanceof Yl?h={type:"tool_use",name:u.part.name,parameters:u.part.parameters,toolCallId:u.part.toolCallId}:u.part instanceof Xl&&(h={type:"text",value:u.part.value}),!h){this.j.warn(`[CHAT](${a.extension.value}) UNKNOWN part ${JSON.stringify(u)}`);return}this.b.$reportResponsePart(r,{index:u.index,part:h})});let l;if(a.provider.provideLanguageModelResponse2)l=Promise.resolve(a.provider.provideLanguageModelResponse2(s.map(ec.to),n,rt.toKey(i),c,o));else{const u=new Pp(async h=>{c.report({index:h.index,part:new Xl(h.part)})});l=Promise.resolve(a.provider.provideLanguageModelResponse(s.map(ec.to),n?.modelOptions??{},rt.toKey(i),u,o))}l.then(()=>{this.b.$reportResponseDone(r,void 0)},u=>{this.b.$reportResponseDone(r,Dc(u))})}$provideTokenLength(t,r,i){const s=this.f.get(t);return s?Promise.resolve(s.provider.provideTokenCount(r,i)):Promise.resolve(0)}$acceptChatModelMetadata(t){if(t.added)for(const{identifier:r,metadata:i}of t.added)this.g.set(r,{metadata:i,apiObjects:new Os});if(t.removed)for(const r of t.removed){this.g.delete(r);for(const[i,s]of this.i)s.languageModelId===r&&(s.res.reject(new Er),this.i.delete(i))}t.added?.forEach(r=>this.q(r.metadata)),this.d.fire(void 0)}async getLanguageModelByIdentifier(t,r){const i=this.g.get(r);if(!i)return;this.o(t.identifier,i.metadata)&&await this.q(i.metadata);let s=i.apiObjects.get(t.identifier);if(!s){const n=this;s={id:i.metadata.id,vendor:i.metadata.vendor,family:i.metadata.family,version:i.metadata.version,name:i.metadata.name,maxInputTokens:i.metadata.maxInputTokens,countTokens(o,a){if(!n.g.has(r))throw zs.NotFound(r);return n.r(r,o,a??Ke.None)},sendRequest(o,a,c){if(!n.g.has(r))throw zs.NotFound(r);return n.l(t,r,o,a??{},c??Ke.None)}},Object.freeze(s),i.apiObjects.set(t.identifier,s)}return s}async selectLanguageModels(t,r){const i=await this.b.$selectChatModels({...r,extension:t.identifier}),s=[];for(const n of i){const o=await this.getLanguageModelByIdentifier(t,n);o&&s.push(o)}return s}async l(t,r,i,s,n){const o=this.m(t,i),a=t.identifier,c=this.g.get(r)?.metadata;if(!c||!this.g.has(r))throw zs.NotFound(`Language model '${r}' is unknown.`);if(this.o(a,c)&&(!await this.n(t,{identifier:c.extension,displayName:c.auth.providerLabel},s.justification,!1)||!this.h.get(a)?.has(c.extension)))throw zs.NoPermissions(`Language model '${r}' cannot be used by '${a.value}'.`);try{const l=Math.random()*1e6|0,u=new WN;this.i.set(l,{languageModelId:r,res:u});try{await this.b.$tryStartChatRequest(a,r,l,o,s,n)}catch(h){throw this.i.delete(l),h}return u.apiObject}catch(l){throw l.name===zs.name?l:new zs(`Language model '${r}' errored: ${yn(l)}`,"Unknown",l)}}m(t,r){const i=[];for(const s of r)s.role===hi.System&&H(t,"languageModelSystem"),s.content2.some(n=>n instanceof Lf)&&H(t,"lmTools"),i.push(ec.from(s));return i}async $acceptResponsePart(t,r){const i=this.i.get(t);i&&i.res.handleFragment(r)}async $acceptResponseDone(t,r){const i=this.i.get(t);i&&(this.i.delete(t),r?i.res.reject($C(r)):i.res.resolve())}async n(t,r,i,s){const n=Jx+r.identifier.value;if(await this.k.getSession(t,n,[],{silent:!0}))return this.$updateModelAccesslist([{from:t.identifier,to:r.identifier,enabled:!0}]),!0;if(s)return!1;try{const a=i?p(2721,null,r.displayName,i):void 0;return await this.k.getSession(t,n,[],{forceNewSession:{detail:a}}),this.$updateModelAccesslist([{from:t.identifier,to:r.identifier,enabled:!0}]),!0}catch{return!1}}o(t,r){return!!r.auth&&!rt.equals(r.extension,t)}async q(t){if(t.auth)for(const r of this.s)try{await this.n(r,{identifier:t.extension,displayName:""},void 0,!0)}catch(i){this.j.error("Fake Auth request failed"),this.j.error(i)}}async r(t,r,i){if(!this.g.get(t))throw zs.NotFound(`Language model '${t}' is unknown.`);const n=ci.find(this.f.values(),o=>o.languageModelId===t);return n?n.provider.provideTokenCount(r,i):this.b.$countTokens(t,typeof r=="string"?r:ec.from(r),i)}$updateModelAccesslist(t){const r=new Array;for(const{from:i,to:s,enabled:n}of t){const o=this.h.get(i)??new lo;if(o.has(s)!==n){n?o.add(s):o.delete(s),this.h.set(i,o);const c={from:i,to:s};r.push(c),this.c.fire(c)}}}createLanguageModelAccessInformation(t){this.s.add(t);const r=this,i=Qe.signal(Qe.filter(this.c.event,n=>rt.equals(n.from,t.identifier))),s=Qe.signal(this.d.event);return{get onDidChange(){return Qe.any(i,s)},canSendRequest(n){let o;e:for(const[c,l]of r.g)for(const u of l.apiObjects.values())if(u===n){o=l.metadata;break e}if(!o)return;if(!r.o(t.identifier,o))return!0;const a=r.h.get(t.identifier);if(a)return a.has(o.extension)}}}};U0=M0=__decorate([__param(0,Ue),__param(1,Ne),__param(2,F0)],U0);function xu(e,t=at){return hm(e,t)?e.charAt(0).toUpperCase()+e.slice(1):e}function VN(e,t){return e.replace(/^~($|\/|\\)/,`${t}$1`)}var Yx;(function(e){e[e.TEXT=0]="TEXT",e[e.VARIABLE=1]="VARIABLE",e[e.SEPARATOR=2]="SEPARATOR"})(Yx||(Yx={}));var Xx;(function(e){e[e.MAX_SAFE_SMALL_INTEGER=1073741824]="MAX_SAFE_SMALL_INTEGER",e[e.MIN_SAFE_SMALL_INTEGER=-1073741824]="MIN_SAFE_SMALL_INTEGER",e[e.MAX_UINT_8=255]="MAX_UINT_8",e[e.MAX_UINT_16=65535]="MAX_UINT_16",e[e.MAX_UINT_32=4294967295]="MAX_UINT_32",e[e.UNICODE_SUPPLEMENTARY_PLANE_BEGIN=65536]="UNICODE_SUPPLEMENTARY_PLANE_BEGIN"})(Xx||(Xx={}));function Zx(e){return e<0?0:e>255?255:e|0}function ac(e){return e<0?0:e>4294967295?4294967295:e|0}var Kx=class O3{constructor(t){const r=Zx(t);this.c=r,this.a=O3.d(r),this.b=new Map}static d(t){const r=new Uint8Array(256);return r.fill(t),r}set(t,r){const i=Zx(r);t>=0&&t<256?this.a[t]=i:this.b.set(t,i)}get(t){return t>=0&&t<256?this.a[t]:this.b.get(t)||this.c}clear(){this.a.fill(this.c),this.b.clear()}},e8;(function(e){e[e.False=0]="False",e[e.True=1]="True"})(e8||(e8={}));var t8;(function(e){e[e.Regular=0]="Regular",e[e.Whitespace=1]="Whitespace",e[e.WordSeparator=2]="WordSeparator"})(t8||(t8={}));var qN=class extends Kx{constructor(e,t){super(0),this.e=null,this.f=null,this.g=[],this.intlSegmenterLocales=t,this.intlSegmenterLocales.length>0?this.e=new Intl.Segmenter(this.intlSegmenterLocales,{granularity:"word"}):this.e=null;for(let r=0,i=e.length;r<i;r++)this.set(e.charCodeAt(r),2);this.set(32,1),this.set(9,1)}findPrevIntlWordBeforeOrAtOffset(e,t){let r=null;for(const i of this.h(e)){if(i.index>t)break;r=i}return r}findNextIntlWordAtOrAfterOffset(e,t){for(const r of this.h(e))if(!(r.index<t))return r;return null}h(e){return this.e?this.f===e?this.g:(this.f=e,this.g=this.j(this.e.segment(e)),this.g):[]}j(e){const t=[];for(const r of e)this.k(r)&&t.push(r);return t}k(e){return!!e.isWordLike}},r8=new Rc(10);function GN(e,t){const r=`${e}/${t.join(",")}`;let i=r8.get(r);return i||(i=new qN(e,t),r8.set(r,i)),i}var H0;(function(e){e[e.Left=1]="Left",e[e.Center=2]="Center",e[e.Right=4]="Right",e[e.Full=7]="Full"})(H0||(H0={}));var i8;(function(e){e[e.Left=1]="Left",e[e.Center=2]="Center",e[e.Right=3]="Right"})(i8||(i8={}));var s8;(function(e){e[e.Inline=1]="Inline",e[e.Gutter=2]="Gutter"})(s8||(s8={}));var n8;(function(e){e[e.Normal=1]="Normal",e[e.Underlined=2]="Underlined"})(n8||(n8={}));var o8;(function(e){e[e.Both=0]="Both",e[e.Right=1]="Right",e[e.Left=2]="Left",e[e.None=3]="None"})(o8||(o8={}));var a8;(function(e){e[e.TextDefined=0]="TextDefined",e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"})(a8||(a8={}));var c8;(function(e){e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"})(c8||(c8={}));var l8;(function(e){e[e.LF=0]="LF",e[e.CRLF=1]="CRLF"})(l8||(l8={}));var B0=class{constructor(e,t){this._findMatchBrand=void 0,this.range=e,this.matches=t}},u8;(function(e){e[e.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",e[e.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",e[e.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",e[e.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"})(u8||(u8={}));var h8;(function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.None=2]="None",e[e.LeftOfInjectedText=3]="LeftOfInjectedText",e[e.RightOfInjectedText=4]="RightOfInjectedText"})(h8||(h8={}));var d8;(function(e){e[e.FIRST_LINE_DETECTION_LENGTH_LIMIT=1e3]="FIRST_LINE_DETECTION_LENGTH_LIMIT"})(d8||(d8={}));var JN=class{constructor(e,t,r){this.regex=e,this.wordSeparators=t,this.simpleSearch=r}},QN=class{constructor(e,t,r){this.reverseEdits=e,this.changes=t,this.trimAutoWhitespaceLineNumbers=r}},f8=class{constructor(e,t,r,i){this.searchString=e,this.isRegex=t,this.matchCase=r,this.wordSeparators=i}parseSearchRequest(){if(this.searchString==="")return null;let e;this.isRegex?e=p8(this.searchString):e=this.searchString.indexOf(`
`)>=0;let t=null;try{t=Ky(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch{return null}if(!t)return null;let r=!this.isRegex&&!e;return r&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(r=this.matchCase),new JN(t,this.wordSeparators?GN(this.wordSeparators,[]):null,r?this.searchString:null)}};function p8(e){if(!e||e.length===0)return!1;for(let t=0,r=e.length;t<r;t++){const i=e.charCodeAt(t);if(i===10)return!0;if(i===92){if(t++,t>=r)break;const s=e.charCodeAt(t);if(s===110||s===114||s===87)return!0}}return!1}function g8(e,t,r){if(!r)return new B0(e,null);const i=[];for(let s=0,n=t.length;s<n;s++)i[s]=t[s];return new B0(e,i)}function YN(e,t,r,i,s){if(i===0)return!0;const n=t.charCodeAt(i-1);if(e.get(n)!==0||n===13||n===10)return!0;if(s>0){const o=t.charCodeAt(i);if(e.get(o)!==0)return!0}return!1}function XN(e,t,r,i,s){if(i+s===r)return!0;const n=t.charCodeAt(i+s);if(e.get(n)!==0||n===13||n===10)return!0;if(s>0){const o=t.charCodeAt(i+s-1);if(e.get(o)!==0)return!0}return!1}function m8(e,t,r,i,s){return YN(e,t,r,i,s)&&XN(e,t,r,i,s)}var ZN=class{constructor(e,t){this._wordSeparators=e,this.a=t,this.b=-1,this.c=0}reset(e){this.a.lastIndex=e,this.b=-1,this.c=0}next(e){const t=e.length;let r;do{if(this.b+this.c===t||(r=this.a.exec(e),!r))return null;const i=r.index,s=r[0].length;if(i===this.b&&s===this.c){if(s===0){n4(e,t,this.a.lastIndex)>65535?this.a.lastIndex+=2:this.a.lastIndex+=1;continue}return null}if(this.b=i,this.c=s,!this._wordSeparators||m8(this._wordSeparators,e,t,i,s))return r}while(r);return null}};function v8(e){return e.scheme!==Q.file&&e.scheme!==Q.vscodeRemote}function KN(e){if(e.folders.length)return e.folders.every(t=>v8(t.uri))?e.folders[0].uri:void 0;if(e.configuration&&v8(e.configuration))return e.configuration}function eF(e){return KN(e)?.scheme}var w8=w1,b8=X("remoteAgentService"),vq=new class{constructor(){this.maxSampleCount=5,this.sampleDelay=2e3,this.initial=[],this.maxInitialCount=3,this.average=[],this.maxAverageCount=100,this.highLatencyMultiple=2,this.highLatencyMinThreshold=500,this.highLatencyMaxThreshold=1500,this.lastMeasurement=void 0}get latency(){return this.lastMeasurement}async measure(e){let t=1/0;for(let i=0;i<this.maxSampleCount;i++){const s=await e.getRoundTripTime();if(s===void 0)return;t=Math.min(t,s/2),await br(this.sampleDelay)}this.average.push(t),this.average.length>this.maxAverageCount&&this.average.shift();let r;return this.initial.length<this.maxInitialCount?this.initial.push(t):r=this.initial.reduce((i,s)=>i+s,0)/this.initial.length,this.lastMeasurement={initial:r,current:t,average:this.average.reduce((i,s)=>i+s,0)/this.average.length,high:typeof r>"u"?!1:t>this.highLatencyMaxThreshold||t>this.highLatencyMinThreshold&&t>r*this.highLatencyMultiple},this.lastMeasurement}},z0,tF=X("pathService"),y8=z0=class{constructor(t,r,i,s){this.d=t,this.e=r,this.f=i,this.g=s,this.a=(async()=>(await this.e.getEnvironment())?.os||Wy)(),this.b=(async()=>{const n=await this.e.getEnvironment();return this.c=n?.userHome??t})()}hasValidBasename(t,r,i){return typeof r=="string"||typeof r>"u"?this.a.then(s=>this.h(t,s,r)):this.h(t,r,i)}h(t,r,i){return t.scheme===Q.file||t.scheme===Q.vscodeRemote?lI(i??es(t),r===1):!0}get defaultUriScheme(){return z0.findDefaultUriScheme(this.f,this.g)}static findDefaultUriScheme(t,r){if(t.remoteAuthority)return Q.vscodeRemote;const i=eF(r.getWorkspace());if(i)return i;const s=r.getWorkspace().folders[0];if(s)return s.uri.scheme;const n=r.getWorkspace().configuration;return n?n.scheme:Q.file}userHome(t){return t?.preferLocal?this.d:this.b}get resolvedUserHome(){return this.c}get path(){return this.a.then(t=>t===1?Bt:He)}async fileURI(t){let r="";if(await this.a===1&&(t=t.replace(/\\/g,"/")),t[0]==="/"&&t[1]==="/"){const s=t.indexOf("/",2);s===-1?(r=t.substring(2),t="/"):(r=t.substring(2,s),t=t.substring(s)||"/")}return k.from({scheme:Q.file,authority:r,path:t,query:"",fragment:""})}};y8=z0=__decorate([__param(1,b8),__param(2,w8),__param(3,Zh)],y8);function rF(e){return typeof e=="object"&&"uri"in e&&"pattern"in e}var k8=class{constructor(t,r,i,s,n,o){this.a=t,this.b=r,this.c=i,this.d=s,this.f=n,this.g=o}aiText(t,r,i={}){return{...this.j(r?.map(Ym),i),type:3,contentPattern:t}}text(t,r,i={}){t=this.h(t,i);const s=this.a.getValue(),n=r&&r.some(a=>!this.a.getValue({resource:a}).search.useRipgrep);return{...this.j(r?.map(Ym),i),type:2,contentPattern:t,previewOptions:i.previewOptions,maxFileSize:i.maxFileSize,usePCRE2:s.search.usePCRE2||n||!1,surroundingContext:i.surroundingContext,userDisabledExcludesAndIgnoreFiles:i.disregardExcludeSettings&&i.disregardIgnoreFiles}}h(t,r){const i=this.a.getValue();t.isRegExp&&(t.pattern=t.pattern.replace(/\r?\n/g,"\\n"));const s={...t,wordSeparators:i.editor.wordSeparators};return this.l(t,r)&&(s.isCaseSensitive=!0),this.m(t)&&(s.isMultiline=!0),r.notebookSearchConfig?.includeMarkupInput&&(s.notebookInfo||(s.notebookInfo={}),s.notebookInfo.isInNotebookMarkdownInput=r.notebookSearchConfig.includeMarkupInput),r.notebookSearchConfig?.includeMarkupPreview&&(s.notebookInfo||(s.notebookInfo={}),s.notebookInfo.isInNotebookMarkdownPreview=r.notebookSearchConfig.includeMarkupPreview),r.notebookSearchConfig?.includeCodeInput&&(s.notebookInfo||(s.notebookInfo={}),s.notebookInfo.isInNotebookCellInput=r.notebookSearchConfig.includeCodeInput),r.notebookSearchConfig?.includeOutput&&(s.notebookInfo||(s.notebookInfo={}),s.notebookInfo.isInNotebookCellOutput=r.notebookSearchConfig.includeOutput),s}file(t,r={}){return{...this.j(t,r),type:1,filePattern:r.filePattern?r.filePattern.trim():r.filePattern,exists:r.exists,sortByScore:r.sortByScore,cacheKey:r.cacheKey,shouldGlobMatchFilePattern:r.shouldGlobSearch}}i(t,r){if(!t)return{};if(Array.isArray(t)){if(t=t.filter(i=>i.length>0).map(Ip),!t.length)return{}}else t=Ip(t);return r?this.parseSearchPaths(t):{pattern:_0(...Array.isArray(t)?t:[t])}}j(t=[],r={}){let i=Array.isArray(r.excludePattern)?r.excludePattern.map(u=>u.pattern).flat():r.excludePattern;i=i?.length===1?i[0]:i;const s=this.i(r.includePattern,r.expandPatterns),n=this.i(i,r.expandPatterns),o=t.length>1,a=(s.searchPaths&&s.searchPaths.length?s.searchPaths.map(u=>this.t(u,r,n)):t.map(u=>this.u(u,r,n,o))).filter(u=>!!u),c={_reason:r._reason,folderQueries:a,usingSearchPaths:!!(s.searchPaths&&s.searchPaths.length),extraFileResources:r.extraFileResources,excludePattern:n.pattern,includePattern:s.pattern,onlyOpenEditors:r.onlyOpenEditors,maxResults:r.maxResults,onlyFileScheme:r.onlyFileScheme};if(r.onlyOpenEditors){const u=Rt(this.c.groups.flatMap(f=>f.editors.map(g=>g.resource)));this.d.trace("QueryBuilder#commonQuery - openEditor URIs",JSON.stringify(u));const h=u.filter(f=>sx(c,f.fsPath)),d=this.k(h);return this.d.trace("QueryBuilder#commonQuery - openEditor Query",JSON.stringify(d)),{...c,...d}}const l=r.extraFileResources&&r.extraFileResources.filter(u=>sx(c,u.fsPath));return c.extraFileResources=l&&l.length?l:void 0,c}k(t){const r=[],i=new rr,s={};let n=!1;return t.forEach(o=>{if(o.scheme===Q.walkThrough)return;if(TI(o)){const c=this.b.getWorkspaceFolder(o)?.uri??this.g.extUri.dirname(o);let l=i.get(c);l||(n=!0,l={folder:c,includePattern:{}},r.push(l),i.set(c,l));const u=Ko(c.fsPath,o.fsPath);ea(l.includePattern)[u.replace(/\\/g,"/")]=!0}else o.fsPath&&(n=!0,s[o.fsPath]=!0)}),{folderQueries:r,includePattern:s,usingSearchPaths:!0,excludePattern:n?void 0:{"**/*":!0}}}l(t,r){if(r.isSmartCase){if(t.isRegExp){if(l4(t.pattern,!0))return!0}else if(l4(t.pattern))return!0}return!!t.isCaseSensitive}m(t){return t.isMultiline||t.isRegExp&&p8(t.pattern)||t.pattern.indexOf(`
`)>=0?!0:!!t.isMultiline}parseSearchPaths(t){const r=h=>Ki(h)||/^\.\.?([\/\\]|$)/.test(h),s=(Array.isArray(t)?t:sF(t)).map(h=>{const d=this.f.resolvedUserHome;return d?VN(h,d.scheme===Q.file?d.fsPath:d.path):h}),n=Vg(s,h=>r(h)?"searchPaths":"exprSegments"),o=(n.exprSegments||[]).map(h=>pn(h,"/")).map(h=>pn(h,"\\")).map(h=>(h[0]==="."&&(h="*"+h),nF(h))),a={},c=this.o(n.searchPaths||[]);c&&c.length&&(a.searchPaths=c);const l=o.flat(),u=_0(...l);return u&&(a.pattern=u),a}n(t,r){return r.disregardExcludeSettings?void 0:GL(t,!r.disregardSearchExcludeSettings)}o(t){if(!t||!t.length)return[];const r=t.flatMap(s=>{let{pathPortion:n,globPortion:o}=iF(s);return o&&(o=W0(o)),this.q(n).flatMap(c=>this.r(c,o))}),i=new Map;return r.forEach(s=>{const n=s.searchPath.toString(),o=i.get(n);o?s.pattern&&(o.pattern=o.pattern||{},o.pattern[s.pattern]=!0):i.set(n,{searchPath:s.searchPath,pattern:s.pattern?_0(s.pattern):void 0})}),Array.from(i.values())}q(t){if(Ki(t)){const r=this.b.getWorkspace().folders;return r[0]&&r[0].uri.scheme!==Q.file?[{searchPath:r[0].uri.with({path:t})}]:[{searchPath:k.file(Ss(t))}]}if(this.b.getWorkbenchState()===2){const r=this.b.getWorkspace().folders[0].uri;if(t=Ip(t),t.startsWith("../")||t===".."){const s=He.resolve(r.path,t);return[{searchPath:r.with({path:s})}]}const i=W0(t);return[{searchPath:r,pattern:i}]}else{if(t==="./"||t===".\\")return[];{const r=t.replace(/^\.[\/\\]/,""),s=this.b.getWorkspace().folders.map(n=>{const o=r.match(new RegExp(`^${fn(n.name)}(?:/(.*)|$)`));return o?{match:o,folder:n}:null}).filter(to);if(s.length)return s.map(n=>{const o=n.match[1];return{searchPath:n.folder.uri,pattern:o&&W0(o)}});{const n=t.match(/\.[\/\\](.+)[\/\\]?/),o=n?n[1]:t,a=p(12745,null,o);throw new Error(a)}}}}r(t,r){const i=t.pattern&&r?`${t.pattern}/${r}`:t.pattern||r,s=[{searchPath:t.searchPath,pattern:i}];return i&&!i.endsWith("**")&&s.push({searchPath:t.searchPath,pattern:i+"/**"}),s}t(t,r,i){const s=this.u(Ym(t.searchPath),r,i,!1);return s?{...s,includePattern:t.pattern}:null}u(t,r,i,s){let n;const o=k.isUri(t)?t:t.uri;let a=r.excludePattern?.map(f=>{const g=r.excludePattern&&rF(f)?f.uri:void 0;return!g||!(k.isUri(t)&&this.g.extUri.isEqual(t,g))?g:void 0});if(a?.length||(a=[void 0]),i.searchPaths){const f=i.searchPaths.filter(g=>D4(g.searchPath,o))[0];if(f&&!f.pattern)return null;f&&(n=f.pattern)}const c=this.a.getValue({resource:o}),u={...this.n(c,r)||{},...n||{}},h=k.isUri(t)?es(t):t.name,d=a.map(f=>Object.keys(u).length>0?{folder:f,pattern:u}:void 0).filter(f=>f);return{folder:o,folderName:s?h:void 0,excludePattern:d,fileEncoding:c.files&&c.files.encoding,disregardIgnoreFiles:typeof r.disregardIgnoreFiles=="boolean"?r.disregardIgnoreFiles:!c.search.useIgnoreFiles,disregardGlobalIgnoreFiles:typeof r.disregardGlobalIgnoreFiles=="boolean"?r.disregardGlobalIgnoreFiles:!c.search.useGlobalIgnoreFiles,disregardParentIgnoreFiles:typeof r.disregardParentIgnoreFiles=="boolean"?r.disregardParentIgnoreFiles:!c.search.useParentIgnoreFiles,ignoreSymlinks:typeof r.ignoreSymlinks=="boolean"?r.ignoreSymlinks:!c.search.followSymlinks}}};k8=__decorate([__param(0,Sn),__param(1,Zh),__param(2,aL),__param(3,Ne),__param(4,tF),__param(5,h7)],k8);function iF(e){const t=e.match(/[\*\{\}\(\)\[\]\?]/);if(t){const r=t.index,i=e.substr(0,r).match(/[/|\\][^/\\]*$/);if(i){let s=e.substr(0,i.index);return s.match(/[/\\]/)||(s+="/"),{pathPortion:s,globPortion:e.substr((i.index||0)+1)}}}return{pathPortion:e}}function _0(...e){return e.length?e.reduce((t,r)=>(t[r]=!0,t),Object.create(null)):void 0}function sF(e){return fl(e,",").map(t=>t.trim()).filter(t=>!!t.length)}function nF(e){return[`**/${e}/**`,`**/${e}`].map(r=>r.replace(/\*\*\/\*\*/g,"**"))}function Ip(e){return e.replace(/\\/g,"/")}function W0(e){return Ip(e).replace(/^\.\//,"").replace(/\/+$/g,"")}var oF=7e3;function aF(e,t){const r=t.activationEvents;if(!r)return Promise.resolve(void 0);const i=[],s=[];for(const u of r)if(/^workspaceContains:/.test(u)){const h=u.substr(18);h.indexOf("*")>=0||h.indexOf("?")>=0||e.forceUsingSearch?s.push(h):i.push(h)}if(i.length===0&&s.length===0)return Promise.resolve(void 0);const{promise:n,resolve:o}=F4(),a=u=>o({activationEvent:u}),c=Promise.all(i.map(u=>cF(e,u,a))).then(()=>{}),l=lF(e,t.identifier,s,a);return Promise.all([c,l]).then(()=>{o(void 0)}),n}async function cF(e,t,r){for(const i of e.folders)if(await e.exists(Mt(k.revive(i),t))){r(`workspaceContains:${t}`);return}}async function lF(e,t,r,i){if(r.length===0)return Promise.resolve(void 0);const s=new wt,n=e.checkExists(e.folders,r,s.token),o=setTimeout(async()=>{s.cancel(),e.logService.info(`Not activating extension '${t.value}': Timed out while searching for 'workspaceContains' pattern ${r.join(",")}`)},oF);let a=!1;try{a=await n}catch(c){ys(c)||It(c)}s.dispose(),clearTimeout(o),a&&i(`workspaceContains:${r.join(",")}`)}var x8=class{constructor(e){this.b=new T,this.onDidChangePassword=this.b.event,this.a=e.getProxy(K.MainThreadSecretState)}async $onDidChangePassword(e){this.b.fire(e)}get(e,t){return this.a.$getPassword(e,t)}store(e,t,r){return this.a.$setPassword(e,t,r)}delete(e,t){return this.a.$deletePassword(e,t)}},V0=X("IExtHostSecretState"),uF=class{#e;constructor(e,t){this.disposables=new be,this.a=rt.toKey(e.identifier),this.#e=t,this.onDidChange=Qe.map(Qe.filter(this.#e.onDidChangePassword,r=>r.extensionId===this.a),r=>({key:r.key}),this.disposables)}dispose(){this.disposables.dispose()}get(e){return this.#e.get(this.a,e)}store(e,t){return this.#e.store(this.a,e,t)}delete(e){return this.#e.delete(this.a,e)}},q0=class{constructor(t,r,i){this.f=i,this.d=new Map,this.a=r.getProxy(K.MainThreadLocalization),this.b=t.environment.appLanguage,this.c=this.b===Qn}getMessage(t,r){const{message:i,args:s,comment:n}=r;if(this.c)return Zy(i,s??{});let o=i;n&&n.length>0&&(o+=`/${Array.isArray(n)?n.join(""):n}`);const a=this.d.get(t)?.contents[o];return a||this.f.warn(`Using default string since no string found in i18n bundle that has the key: ${o}`),Zy(a??i,s??{})}getBundle(t){return this.d.get(t)?.contents}getBundleUri(t){return this.d.get(t)?.uri}async initializeLocalizedMessages(t){if(this.c||!t.l10n&&!t.isBuiltin||this.d.has(t.identifier.value))return;let r;const i=await this.g(t);if(!i){this.f.error(`No bundle location found for extension ${t.identifier.value}`);return}try{const s=await this.a.$fetchBundleContents(i),n=JSON.parse(s);r=t.isBuiltin?n.contents?.bundle:n}catch(s){this.f.error(`Failed to load translations for ${t.identifier.value} from ${i}: ${s.message}`);return}r&&this.d.set(t.identifier.value,{contents:r,uri:i})}async g(t){if(t.isBuiltin){const r=await this.a.$fetchBuiltInBundleUri(t.identifier.value,this.b);return k.revive(r)}return t.l10n?k.joinPath(t.extensionLocation,t.l10n,`bundle.l10n.${this.b}.json`):void 0}};q0=__decorate([__param(0,er),__param(1,Ue),__param(2,Ne)],q0);var G0=X("IExtHostLocalizationService"),J0=X("IExtHostManagedSockets"),Q0=class{constructor(t){this.b=0,this.c=null,this.d=new Map,this.a=t.getProxy(K.MainThreadManagedSockets)}setFactory(t,r){for(const i of this.d.values())i.dispose();this.c&&this.a.$unregisterSocketFactory(this.c.socketFactoryId),this.c=new hF(t,r),this.a.$registerSocketFactory(this.c.socketFactoryId)}async $openRemoteSocket(t){if(!this.c||this.c.socketFactoryId!==t)throw new Error(`No socket factory with id ${t}`);const r=++this.b,i=await this.c.makeConnection(),s=new be;return this.d.set(r,new dF(r,i,s)),s.add(me(()=>this.d.delete(r))),s.add(i.onDidEnd(()=>{this.a.$onDidManagedSocketEnd(r),s.dispose()})),s.add(i.onDidClose(n=>{this.a.$onDidManagedSocketClose(r,n?.stack??n?.message),s.dispose()})),s.add(i.onDidReceiveMessage(n=>this.a.$onDidManagedSocketHaveData(r,re.wrap(n)))),r}$remoteSocketWrite(t,r){this.d.get(t)?.actual.send(r.buffer)}$remoteSocketEnd(t){const r=this.d.get(t);r&&(r.actual.end(),r.dispose())}async $remoteSocketDrain(t){await this.d.get(t)?.actual.drain?.()}};Q0=__decorate([__param(0,Ue)],Q0);var hF=class{constructor(e,t){this.socketFactoryId=e,this.makeConnection=t}},dF=class extends ae{constructor(e,t,r){super(),this.socketId=e,this.actual=t,this.B(r)}},Y0,E8=X("IHostUtils"),X0=Y0=class extends ae{constructor(t,r,i,s,n,o,a,c,l,u,h,d,f){super(),this.Y=d,this.Z=f,this.a=this.B(new T),this.onDidChangeRemoteConnectionData=this.a.event,this.R=new Map,this.W=!1,this.c=r,this.g=i,this.f=a,this.j=s,this.m=n,this.s=o,this.t=l,this.u=u,this.w=h,this.y=this.g.getProxy(K.MainThreadWorkspace),this.z=this.g.getProxy(K.MainThreadTelemetry),this.C=this.g.getProxy(K.MainThreadExtensionService),this.D=new ui,this.F=new ui,this.G=new ui,this.H=new ui,this.I=new pF(this.f.extensions.activationEvents),this.L=new vu(this.I,this.f.extensions.allExtensions);const g=new lo(this.f.extensions.myExtensions);this.J=new vu(this.I,C8(this.L,g)),Yn&&(this.s.info(`Creating extension host with the following global extensions: ${cc(this.L)}`),this.s.info(`Creating extension host with the following local extensions: ${cc(this.J)}`)),this.M=new Nx(this.g,this.s),this.N=new x8(this.g),this.O=c,this.h=this.q.add(t.createChild(new Gm([E0,this.M],[V0,this.N]))),this.P=this.B(new k0(this.J,this.L,{onExtensionActivationError:(v,x,$)=>{this.C.$onExtensionActivationError(v,Dc(x),$)},actualActivateExtension:async(v,x)=>{if(vu.isHostExtension(v,this.J,this.L))return await this.C.$activateExtension(v,x),new EN;const $=this.J.getExtensionDescription(v);return this.fb($,x)}},this.s)),this.Q=null,this.S=Object.create(null),this.U=!1,this.X=this.f.remote.connectionData}getRemoteConnectionData(){return this.X}async initialize(){try{await this.vb(),this.D.open(),await this.j.waitForInitializeCall(),Nt("code/extHost/ready"),this.F.open(),this.f.autoStart&&this.tb()}catch(t){It(t)}}async $(){this.O.onWillDeactivateAll();let t=[];try{t=this.J.getAllExtensionDescriptions().map(n=>n.identifier).filter(n=>this.isActivated(n)).map(n=>this.eb(n))}catch{}await Promise.all(t)}terminate(t,r=0){if(this.W)return;this.W=!0,this.s.info(`Extension host terminating: ${t}`),this.s.flush(),this.u.dispose(),this.P.dispose(),qg(s=>{this.s.error(s)}),this.g.dispose();const i=this.$();Promise.race([br(5e3),i]).finally(()=>{this.c.pid?this.s.info(`Extension host with pid ${this.c.pid} exiting with code ${r}`):this.s.info(`Extension host exiting with code ${r}`),this.s.flush(),this.s.dispose(),this.c.exit(r)})}isActivated(t){return this.G.isOpen()?this.P.isActivated(t):!1}async getExtension(t){const r=await this.C.$getExtension(t);return r&&{...r,identifier:new rt(r.identifier.value),extensionLocation:k.revive(r.extensionLocation)}}ab(t,r){return this.P.activateByEvent(t,r)}bb(t,r){return this.P.activateById(t,r)}activateByIdWithErrors(t,r){return this.bb(t,r).then(()=>{const i=this.P.getActivatedExtension(t);if(i.activationFailed)return Promise.reject(i.activationFailedError)})}getExtensionRegistry(){return this.G.wait().then(t=>this.J)}getExtensionExports(t){if(this.G.isOpen())return this.P.getActivatedExtension(t).exports;try{return this.P.getActivatedExtension(t).exports}catch{return null}}async cb(t){if(t.scheme===Q.file&&this.c.fsRealpath){const r=t.fsPath;this.R.has(r)||this.R.set(r,this.c.fsRealpath(r));const i=await this.R.get(r);return k.file(i)}return t}async getExtensionPathIndex(){return this.Q||(this.Q=this.db(this.J.getAllExtensionDescriptions()).then(t=>new fF(t))),this.Q}async db(t){const r=Ls.forUris(i=>gm.ignorePathCasing(i));return await Promise.all(t.map(async i=>{if(this.wb(i)){const s=await this.cb(i.extensionLocation);r.set(s,i)}})),r}eb(t){let r=Promise.resolve(void 0);if(!this.G.isOpen()||!this.P.isActivated(t))return r;const i=this.P.getActivatedExtension(t);if(!i)return r;try{typeof i.module.deactivate=="function"&&(r=Promise.resolve(i.module.deactivate()).then(void 0,s=>(this.s.error(s),Promise.resolve(void 0))))}catch(s){this.s.error(`An error occurred when deactivating the extension '${t.value}':`),this.s.error(s)}try{i.disposable.dispose()}catch(s){this.s.error(`An error occurred when disposing the subscriptions for extension '${t.value}':`),this.s.error(s)}return r}async fb(t,r){return this.f.remote.isRemote?this.C.$onWillActivateExtension(t.identifier):await this.C.$onWillActivateExtension(t.identifier),this.hb(t,r).then(i=>{const s=i.activationTimes;return this.C.$onDidActivateExtension(t.identifier,s.codeLoadingTime,s.activateCallTime,s.activateResolvedTime,r),this.gb(t,r,"success",s),i},i=>{throw this.gb(t,r,"failure"),i})}gb(t,r,i,s){const n=$8(t,r);this.z.$publicLog2("extensionActivationTimes",{...n,...s||{},outcome:i})}hb(t,r){const i=$8(t,r);this.z.$publicLog2("activatePlugin",i);const s=this.wb(t);if(!s)return Promise.resolve(new xN(bp.NONE));this.s.info(`ExtensionService#_doActivateExtension ${t.identifier.value}, startup: ${r.startup}, activationEvent: '${r.activationEvent}'${t.identifier.value!==r.extensionId.value?`, root cause: ${r.extensionId.value}`:""}`),this.s.flush();const n=new be,o=new Lx(r.startup);return Promise.all([this.xb(t,Mt(t.extensionLocation,s),o),this.ib(t,n)]).then(a=>(Nt(`code/extHost/willActivateExtension/${t.identifier.value}`),Y0.jb(this.s,t.identifier,a[0],a[1],n,o))).then(a=>(Nt(`code/extHost/didActivateExtension/${t.identifier.value}`),a))}ib(t,r){const i=this.Z.createLanguageModelAccessInformation(t),s=r.add(new SN(t,this.M)),n=r.add(new Fx(t.identifier.value,!1,this.M)),o=r.add(new uF(t,this.N)),a=t.isUnderDevelopment?this.f.environment.extensionTestsLocationURI?za.Test:za.Development:za.Production,c=this.f.remote.isRemote?Po.Workspace:Po.UI;return this.s.trace(`ExtensionService#loadExtensionContext ${t.identifier.value}`),Promise.all([s.whenReady,n.whenReady,this.O.whenReady]).then(()=>{const l=this;let u,h;const d=zt(t,"ipc")?this.f.messagePorts?.get(rt.toKey(t.identifier)):void 0;return Object.freeze({globalState:s,workspaceState:n,secrets:o,subscriptions:[],get languageModelAccessInformation(){return i},get extensionUri(){return t.extensionLocation},get extensionPath(){return t.extensionLocation.fsPath},asAbsolutePath(f){return bt(t.extensionLocation.fsPath,f)},get storagePath(){return l.O.workspaceValue(t)?.fsPath},get globalStoragePath(){return l.O.globalValue(t).fsPath},get logPath(){return bt(l.f.logsLocation.fsPath,t.identifier.value)},get logUri(){return k.joinPath(l.f.logsLocation,t.identifier.value)},get storageUri(){return l.O.workspaceValue(t)},get globalStorageUri(){return l.O.globalValue(t)},get extensionMode(){return a},get extension(){return u===void 0&&(u=new Eu(l,t.identifier,t,c,!1)),u},get extensionRuntime(){return H(t,"extensionRuntime"),l.extensionRuntime},get environmentVariableCollection(){return l.u.getEnvironmentVariableCollection(t)},get messagePassingProtocol(){if(!h){if(!d)return;const f=Qe.buffer(Qe.fromDOMEventEmitter(d,"message",g=>g.data));d.start(),h={onDidReceiveMessage:f,postMessage:d.postMessage.bind(d)}}return h}})})}static jb(t,r,i,s,n,o){return i=i||{activate:void 0,deactivate:void 0},this.kb(t,r,i,s,o).then(a=>new yp(!1,null,o.build(),i,a,me(()=>{n.dispose(),Si(s.subscriptions)})))}static kb(t,r,i,s,n){if(typeof i.activate=="function")try{n.activateCallStart(),t.trace(`ExtensionService#_callActivateOptional ${r.value}`);const o=typeof global=="object"?global:self,a=i.activate.apply(o,[s]);return n.activateCallStop(),n.activateResolveStart(),Promise.resolve(a).then(c=>(n.activateResolveStop(),c))}catch(o){return Promise.reject(o)}else return Promise.resolve(i)}lb(t,r){this.bb(t.identifier,{startup:!1,extensionId:t.identifier,activationEvent:r}).then(void 0,i=>{this.s.error(i)})}mb(t,r=0){const s=Date.now();zy(()=>{for(let n=r;n<t.length;n+=1){const o=t[n];for(const a of o.activationEvents??[])if(a==="onStartupFinished")if(Date.now()-s>50){this.mb(t,n);break}else this.lb(o,a)}})}nb(){this.C.$setPerformanceMarks(o2()),this.m.getConfigProvider().then(t=>{const r=t.getConfiguration("extensions.experimental").get("deferredStartupFinishedActivation"),i=this.J.getAllExtensionDescriptions();if(r)this.mb(i);else for(const s of i)if(s.activationEvents)for(const n of s.activationEvents)n==="onStartupFinished"&&this.lb(s,n)})}ob(){const t=this.ab("*",!0).then(void 0,o=>{this.s.error(o)});this.B(this.j.onDidChangeWorkspace(o=>this.pb(o.added)));const r=this.j.workspace?this.j.workspace.folders:[],i=this.pb(r),s=this.rb(),n=Promise.all([s,t,i]).then(()=>{});return Promise.race([n,br(1e4)]).then(()=>{this.nb()}),n}pb(t){return t.length===0?Promise.resolve(void 0):Promise.all(this.J.getAllExtensionDescriptions().map(r=>this.qb(t,r))).then(()=>{})}async qb(t,r){if(this.isActivated(r.identifier))return;const i=!this.f.remote.isRemote&&!!this.f.remote.authority,s={logService:this.s,folders:t.map(o=>o.uri),forceUsingSearch:i||!this.c.fsExists,exists:o=>this.c.fsExists(o.fsPath),checkExists:(o,a,c)=>this.y.$checkExists(o,a,c)},n=await aF(s,r);if(n)return this.bb(r.identifier,{startup:!0,extensionId:r.identifier,activationEvent:n.activationEvent}).then(void 0,o=>this.s.error(o))}async rb(){if(this.f.remote.authority)return this.ab(`onResolveRemoteAuthority:${this.f.remote.authority}`,!1)}async $extensionTestsExecute(){await this.H.wait();try{return await this.sb()}catch(t){throw console.error(t),t}}async sb(){const{extensionDevelopmentLocationURI:t,extensionTestsLocationURI:r}=this.f.environment;if(!t||!r)throw new Error(p(2717,null));const i=await this.xb(null,r,new Lx(!1));if(!i||typeof i.run!="function")throw new Error(p(2718,null,r.toString()));return new Promise((s,n)=>{const o=(l,u)=>{l?(Yn&&this.s.error("Test runner called back with error",l),n(l)):(Yn&&(u?this.s.info(`Test runner called back with ${u} failures.`):this.s.info("Test runner called back with successful outcome.")),s(typeof u=="number"&&u>0?1:0))},a=Pi(r),c=i.run(a,o);c&&c.then&&c.then(()=>{Yn&&this.s.info("Test runner finished successfully."),s(0)}).catch(l=>{Yn&&this.s.error("Test runner finished with error",l),n(l instanceof Error&&l.stack?l.stack:String(l))})})}tb(){if(this.U)throw new Error("Extension host is already started!");return this.U=!0,this.F.wait().then(()=>this.G.open()).then(()=>Promise.race([this.P.waitForActivatingExtensions(),br(1e3)])).then(()=>this.ob()).then(()=>{this.H.open(),this.s.info("Eager extensions activated")})}registerRemoteAuthorityResolver(t,r){return this.S[t]=r,me(()=>{delete this.S[t]})}async getRemoteExecServer(t){const{resolver:r}=await this.ub(t);return r?.resolveExecServer?.(t,{resolveAttempt:0})}async ub(t){const r=t.indexOf("+");if(r===-1)throw new xa("Not an authority that can be resolved!",Dr.InvalidAuthority);const i=t.substr(0,r);return await this.D.wait(),await this.ab(`onResolveRemoteAuthority:${i}`,!1),{authorityPrefix:i,resolver:this.S[i]}}async $resolveAuthority(t,r){const i=Hr.create(!1),s=()=>`[resolveAuthority(${v9(t)},${r})][${i.elapsed()}ms] `,n=C=>this.s.info(`${s()}${C}`),o=C=>this.s.warn(`${s()}${C}`),a=(C,L=void 0)=>this.s.error(`${s()}${C}`,L),c=C=>{if(C instanceof xa)return{type:"error",error:{code:C._code,message:C._message,detail:C._detail}};throw C},l=async C=>{n(`activating resolver for ${C}...`);const{resolver:L,authorityPrefix:F}=await this.ub(C);if(!L)throw a(`no resolver for ${F}`),new xa(`No remote extension installed to resolve ${F}.`,Dr.NoResolverFound);return{resolver:L,authorityPrefix:F,remoteAuthority:C}},u=t.split(/@|%40/g).reverse();n(`activating remote resolvers ${u.join(" -> ")}`);let h;try{h=await Promise.all(u.map(l)).catch(async C=>{if(!(C instanceof xa)||C._code!==Dr.InvalidAuthority)throw C;return o(`resolving nested authorities failed: ${C.message}`),[await l(t)]})}catch(C){return c(C)}const d=new U4;d.cancelAndSet(()=>n("waiting..."),1e3);let f,g;for(const[C,{authorityPrefix:L,resolver:F,remoteAuthority:z}]of h.entries())try{if(C===h.length-1)n("invoking final resolve()..."),Nt(`code/extHost/willResolveAuthority/${L}`),f=await F.resolve(z,{resolveAttempt:r,execServer:g}),Nt(`code/extHost/didResolveAuthorityOK/${L}`),n("setting tunnel factory..."),this.B(await this.t.setTunnelFactory(F,Od.isManagedResolvedAuthority(f)?f:void 0));else{if(n(`invoking resolveExecServer() for ${z}`),Nt(`code/extHost/willResolveExecServer/${L}`),g=await F.resolveExecServer?.(z,{resolveAttempt:r,execServer:g}),!g)throw new xa(`Exec server was not available for ${z}`,Dr.NoResolverFound);Nt(`code/extHost/didResolveExecServerOK/${L}`)}}catch(Y){return Nt(`code/extHost/didResolveAuthorityError/${L}`),a("returned an error",Y),d.dispose(),c(Y)}d.dispose();const v={environmentTunnels:f.environmentTunnels,features:f.tunnelFeatures?{elevation:f.tunnelFeatures.elevation,privacyOptions:f.tunnelFeatures.privacyOptions,protocol:f.tunnelFeatures.protocol===void 0?!0:f.tunnelFeatures.protocol}:void 0},x={extensionHostEnv:f.extensionHostEnv,isTrusted:f.isTrusted,authenticationSession:f.authenticationSessionForInitializingExtensions?{id:f.authenticationSessionForInitializingExtensions.id,providerId:f.authenticationSessionForInitializingExtensions.providerId}:void 0};n(`returned ${Od.isManagedResolvedAuthority(f)?"managed authority":`${f.host}:${f.port}`}`);let $;if(Od.isManagedResolvedAuthority(f)){const C=r;this.Y.setFactory(C,f.makeConnection),$={authority:t,connectTo:new m9(C),connectionToken:f.connectionToken}}else $={authority:t,connectTo:new bL(f.host,f.port),connectionToken:f.connectionToken};return{type:"ok",value:{authority:$,options:x,tunnelInformation:v}}}async $getCanonicalURI(t,r){this.s.info(`$getCanonicalURI invoked for authority (${v9(t)})`);const{resolver:i}=await this.ub(t);if(!i)return null;const s=k.revive(r);if(typeof i.getCanonicalURI>"u")return s;const n=await mr(()=>i.getCanonicalURI(s));return n||s}async $startExtensionHost(t){t.toAdd.forEach(o=>o.extensionLocation=k.revive(o.extensionLocation));const{globalRegistry:r,myExtensions:i}=S8(this.I,this.L,this.J,t),s=await this.db(i);return(await this.getExtensionPathIndex()).setSearchTree(s),this.L.set(r.getAllExtensionDescriptions()),this.J.set(i),Yn&&(this.s.info(`$startExtensionHost: global extensions: ${cc(this.L)}`),this.s.info(`$startExtensionHost: local extensions: ${cc(this.J)}`)),this.tb()}$activateByEvent(t,r){return r===1?this.D.wait().then(i=>this.ab(t,!1)):this.G.wait().then(i=>this.ab(t,!1))}async $activate(t,r){return await this.G.wait(),this.J.getExtensionDescription(t)?(await this.bb(t,r),!0):!1}async $deltaExtensions(t){t.toAdd.forEach(o=>o.extensionLocation=k.revive(o.extensionLocation));const{globalRegistry:r,myExtensions:i}=S8(this.I,this.L,this.J,t),s=await this.db(i);return(await this.getExtensionPathIndex()).setSearchTree(s),this.L.set(r.getAllExtensionDescriptions()),this.J.set(i),Yn&&(this.s.info(`$deltaExtensions: global extensions: ${cc(this.L)}`),this.s.info(`$deltaExtensions: local extensions: ${cc(this.J)}`)),Promise.resolve(void 0)}async $test_latency(t){return t}async $test_up(t){return t.byteLength}async $test_down(t){const r=re.alloc(t),i=Math.random()%256;for(let s=0;s<t;s++)r.writeUInt8(i,s);return r}async $updateRemoteConnectionData(t){this.X=t,this.a.fire()}};X0=Y0=__decorate([__param(0,Qh),__param(1,E8),__param(2,Ue),__param(3,Bi),__param(4,pi),__param(5,Ne),__param(6,er),__param(7,$0),__param(8,Ep),__param(9,Gs),__param(10,G0),__param(11,J0),__param(12,j0)],X0);function S8(e,t,r,i){e.addActivationEvents(i.addActivationEvents);const s=new vu(e,t.getAllExtensionDescriptions());s.deltaExtensions(i.toAdd,i.toRemove);const n=new lo(r.getAllExtensionDescriptions().map(a=>a.identifier));for(const a of i.myToRemove)n.delete(a);for(const a of i.myToAdd)n.add(a);const o=C8(s,n);return{globalRegistry:s,myExtensions:o}}function $8(e,t){return{id:e.identifier.value,name:e.name,extensionVersion:e.version,publisherDisplayName:e.publisher,activationEvents:e.activationEvents?e.activationEvents.join(","):null,isBuiltin:e.isBuiltin,reason:t.activationEvent,reasonId:t.extensionId.value}}function cc(e){return e.getAllExtensionDescriptions().map(t=>t.identifier.value).join(",")}var Js=X("IExtHostExtensionService"),Eu=class{#e;#t;#r;constructor(e,t,r,i,s){this.#e=e,this.#t=t,this.#r=r.identifier,this.id=r.identifier.value,this.extensionUri=r.extensionLocation,this.extensionPath=Ss(Pi(r.extensionLocation)),this.packageJSON=r,this.extensionKind=i,this.isFromDifferentExtensionHost=s}get isActive(){return this.#e.isActivated(this.#r)}get exports(){if(!(this.packageJSON.api==="none"||this.isFromDifferentExtensionHost))return this.#e.getExtensionExports(this.#r)}async activate(){if(this.isFromDifferentExtensionHost)throw new Error("Cannot activate foreign extension");return await this.#e.activateByIdWithErrors(this.#r,{startup:!1,extensionId:this.#t,activationEvent:"api"}),this.exports}};function C8(e,t){return e.getAllExtensionDescriptions().filter(r=>t.has(r.identifier))}var fF=class{constructor(e){this.a=e}setSearchTree(e){this.a=e}findSubstr(e){return this.a.findSubstr(e)}forEach(e){return this.a.forEach(e)}},pF=class{constructor(e){this.a=new Os,this.addActivationEvents(e)}readActivationEvents(e){return this.a.get(e.identifier)??[]}addActivationEvents(e){for(const t of Object.keys(e))this.a.set(t,e[t])}},P8=class{static async installEarlyHandler(e){Error.stackTraceLimit=100;const t=e.get(Ne),i=e.get(Ue).getProxy(K.MainThreadErrors);qg(s=>{t.error(s);const n=Dc(s);i.$onUnexpectedError(n)})}static async installFullHandler(e){const t=e.get(Ne),r=e.get(Ue),i=e.get(Js),s=e.get($p),n=r.getProxy(K.MainThreadExtensionService),o=r.getProxy(K.MainThreadErrors),a=await i.getExtensionPathIndex(),c=new WeakMap;function l(d,f){if(c.has(d))return c.get(d).stack;let g="",v,x;for(const C of f)g+=`
	at ${C.toString()}`,x=C.getFileName(),!v&&x&&(v=a.findSubstr(k.file(x)));const $=`${d.name||"Error"}: ${d.message||""}${g}`;return c.set(d,{extensionIdentifier:v?.identifier,stack:$}),$}const u=Symbol("prepareStackTrace wrapped");let h=l;Object.defineProperty(Error,"prepareStackTrace",{configurable:!1,get(){return h},set(d){if(d===l||!d||d[u]){h=d||l;return}h=function(f,g){return l(f,g),d.call(Error,f,g)},Object.assign(h,{[u]:!0})}}),qg(d=>{t.error(d);const f=Dc(d),g=c.get(d);if(!g?.extensionIdentifier){o.$onUnexpectedError(f);return}n.$onExtensionRuntimeError(g.extensionIdentifier,f);const v=s.onExtensionError(g.extensionIdentifier,d);t.trace("forwarded error to extension?",v,g)})}},gF=class M3{constructor(t,r,i,s,n){this.a=i,this.b=new oA(t,null,s),r=M3.e(r,this.b);const o=new Gm(...LA());o.set(er,{_serviceBrand:void 0,...r,messagePorts:n}),o.set(Ue,new MA(this.b)),o.set(el,new jA(s)),o.set(E8,i);const a=new OA(o,!0);a.invokeFunction(P8.installEarlyHandler),this.d=a.invokeFunction(c=>c.get(Ne)),Nt("code/extHost/didCreateServices"),this.a.pid?this.d.info(`Extension host with pid ${this.a.pid} started`):this.d.info("Extension host started"),this.d.trace("initData",r),this.c=a.invokeFunction(c=>c.get(Js)),this.c.initialize(),a.invokeFunction(P8.installFullHandler)}async asBrowserUri(t){const r=this.b.getProxy(K.MainThreadExtensionService);return k.revive(await r.$asBrowserUri(t))}terminate(t){this.c.terminate(t)}static e(t,r){t.extensions.allExtensions.forEach(s=>{s.extensionLocation=k.revive(r.transformIncomingURIs(s.extensionLocation))}),t.environment.appRoot=k.revive(r.transformIncomingURIs(t.environment.appRoot));const i=t.environment.extensionDevelopmentLocationURI;return i&&(t.environment.extensionDevelopmentLocationURI=i.map(s=>k.revive(r.transformIncomingURIs(s)))),t.environment.extensionTestsLocationURI=k.revive(r.transformIncomingURIs(t.environment.extensionTestsLocationURI)),t.environment.globalStorageHome=k.revive(r.transformIncomingURIs(t.environment.globalStorageHome)),t.environment.workspaceStorageHome=k.revive(r.transformIncomingURIs(t.environment.workspaceStorageHome)),t.environment.extensionTelemetryLogResource=k.revive(r.transformIncomingURIs(t.environment.extensionTelemetryLogResource)),t.nlsBaseUrl=k.revive(r.transformIncomingURIs(t.nlsBaseUrl)),t.logsLocation=k.revive(r.transformIncomingURIs(t.logsLocation)),t.workspace=r.transformIncomingURIs(t.workspace),t}};function mF(e){return{transformIncoming:t=>t.scheme==="vscode-remote"?{scheme:"file",path:t.path,query:t.query,fragment:t.fragment}:t.scheme==="file"?{scheme:"vscode-local",path:t.path,query:t.query,fragment:t.fragment}:t,transformOutgoing:t=>t.scheme==="file"?{scheme:"vscode-remote",authority:e,path:t.path,query:t.query,fragment:t.fragment}:t.scheme==="vscode-local"?{scheme:"file",path:t.path,query:t.query,fragment:t.fragment}:t,transformOutgoingScheme:t=>t==="file"?"vscode-remote":t==="vscode-local"?"file":t}}function vF(e){return new KD(mF(e))}var I8;(function(e){e[e.IPC=1]="IPC",e[e.Socket=2]="Socket",e[e.MessagePort=3]="MessagePort"})(I8||(I8={}));var Dp=class j3{static{this.ENV_KEY="VSCODE_EXTHOST_IPC_HOOK"}constructor(t){this.pipeName=t,this.type=1}serialize(t){t[j3.ENV_KEY]=this.pipeName}},Z0=class U3{constructor(){this.type=2}static{this.ENV_KEY="VSCODE_EXTHOST_WILL_SEND_SOCKET"}serialize(t){t[U3.ENV_KEY]="1"}},K0=class H3{constructor(){this.type=3}static{this.ENV_KEY="VSCODE_WILL_SEND_MESSAGE_PORT"}serialize(t){t[H3.ENV_KEY]="1"}};function wF(e){delete e[Dp.ENV_KEY],delete e[Z0.ENV_KEY],delete e[K0.ENV_KEY]}function bF(e){if(e[Dp.ENV_KEY])return ew(e,new Dp(e[Dp.ENV_KEY]));if(e[Z0.ENV_KEY])return ew(e,new Z0);if(e[K0.ENV_KEY])return ew(e,new K0);throw new Error("No connection information defined in environment!")}function ew(e,t){return wF(e),t}var Eq=new J("inOutput",!1),Sq=new J("activeLogOutput",!1),$q=new J("activeLogOutput.levelSettable",!1),Cq=new J("activeLogOutput.level",""),Pq=new J("activeLogOutput.levelIsDefault",!1),Iq=new J("outputView.scrollLock",!1),Dq=X("outputService"),Su;(function(e){e[e.Append=1]="Append",e[e.Replace=2]="Replace",e[e.Clear=3]="Clear"})(Su||(Su={}));var yF={OutputChannels:"workbench.contributions.outputChannels"},kF=class{constructor(){this.a=new Map,this.b=new T,this.onDidRegisterChannel=this.b.event,this.c=new T,this.onDidRemoveChannel=this.c.event}registerChannel(e){this.a.has(e.id)||(this.a.set(e.id,e),this.b.fire(e.id))}getChannels(){const e=[];return this.a.forEach(t=>e.push(t)),e}getChannel(e){return this.a.get(e)}removeChannel(e){this.a.delete(e),this.c.fire(e)}};fr.add(yF.OutputChannels,new kF);var Aq=new J("activeOutputChannel",""),xF=60,EF=xF*60,tw=EF*24,Tq=tw*7,Rq=tw*30,Lq=tw*365;function SF(e){return e.getFullYear()+"-"+String(e.getMonth()+1).padStart(2,"0")+"-"+String(e.getDate()).padStart(2,"0")+"T"+String(e.getHours()).padStart(2,"0")+":"+String(e.getMinutes()).padStart(2,"0")+":"+String(e.getSeconds()).padStart(2,"0")+"."+(e.getMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}var D8=class extends qm{get disposed(){return this.n}constructor(e,t,r,i,s){super(),this.id=e,this.name=t,this.r=r,this.s=i,this.extension=s,this.m=0,this.n=!1,this.visible=!1,this.setLevel(r.getLevel()),this.B(r.onDidChangeLogLevel(n=>this.setLevel(n)))}get logLevel(){return this.getLevel()}appendLine(e){this.append(e+`
`)}append(e){this.info(e)}clear(){const e=this.m;this.r.flush(),this.s.$update(this.id,Su.Clear,e)}replace(e){const t=this.m;this.info(e),this.s.$update(this.id,Su.Replace,t),this.visible&&this.r.flush()}show(e,t){this.r.flush(),this.s.$reveal(this.id,!!(typeof e=="boolean"?e:t))}hide(){this.s.$close(this.id)}g(e,t){this.m+=re.fromString(t).byteLength,IA(this.r,e,t),this.visible&&(this.r.flush(),this.s.$update(this.id,Su.Append))}dispose(){super.dispose(),this.n||(this.s.$dispose(this.id),this.n=!0)}},$F=class extends D8{appendLine(e){this.append(e)}},rw=class{constructor(t,r,i,s,n,o){this.i=r,this.j=i,this.k=s,this.l=n,this.m=o,this.d=new Map,this.f=1,this.g=new Map,this.h=null,this.a=t.getProxy(K.MainThreadOutputService),this.b=this.k.extUri.joinPath(r.logsLocation,`output_logging_${SF(new Date).replace(/-|:|\.\d+Z$/g,"")}`)}$setVisibleChannel(t){this.h=t;for(const[r,i]of this.g)i.visible=r===this.h}createOutputChannel(t,r,i){if(t=t.trim(),!t)throw new Error("illegal argument `name`. must not be falsy");const s=typeof r=="object"&&r.log,n=Me(r)?r:void 0;if(Me(n)&&!n.trim())throw new Error("illegal argument `languageId`. must not be empty");let o;const a=this.i.environment.extensionLogLevel?.find(([l])=>rt.equals(i.identifier,l))?.[1];a&&(o=RA(a));const c=s?this.o(t,o,i):this.n(t,n,i);return c.then(l=>{this.g.set(l.id,l),l.visible=l.id===this.h}),s?this.r(t,o??this.m.getLevel(),c):this.q(t,c)}async n(t,r,i){this.c||(this.c=this.j.value.createDirectory(this.b).then(()=>this.b));const s=await this.c,n=this.k.extUri.joinPath(s,`${this.f++}-${t.replace(/[\\/:\*\?"<>\|]/g,"")}.log`),o=this.l.createLogger(n,{logLevel:"always",donotRotate:!0,donotUseFormatters:!0,hidden:!0}),a=await this.a.$register(t,n,r,i.identifier.value);return new D8(a,t,o,this.a,i)}async o(t,r,i){const s=await this.p(i),n=t.replace(/[\\/:\*\?"<>\|]/g,""),o=this.k.extUri.joinPath(s,`${n}.log`),a=`${i.identifier.value}.${n}`,c=this.l.createLogger(o,{id:a,name:t,logLevel:r,extensionId:i.identifier.value});return new $F(a,t,c,this.a,i)}p(t){let r=this.d.get(t.identifier.value);if(!r){const i=this.k.extUri.joinPath(this.i.logsLocation,t.identifier.value);this.d.set(t.identifier.value,r=(async()=>{try{await this.j.value.createDirectory(i)}catch(s){if(sd(s)!==ge.FileExists)throw s}return i})())}return r}q(t,r){let i=!1;const s=()=>{if(i)throw new Error("Channel has been closed")};return{get name(){return t},append(n){s(),r.then(o=>o.append(n))},appendLine(n){s(),r.then(o=>o.appendLine(n))},clear(){s(),r.then(n=>n.clear())},replace(n){s(),r.then(o=>o.replace(n))},show(n,o){s(),r.then(a=>a.show(n,o))},hide(){s(),r.then(n=>n.hide())},dispose(){i=!0,r.then(n=>n.dispose())}}}r(t,r,i){const s=new be,n=()=>{if(s.isDisposed)throw new Error("Channel has been closed")},o=s.add(new T);function a(c){r=c,o.fire(c)}return i.then(c=>{s.add(c),c.logLevel!==r&&a(c.logLevel),s.add(c.onDidChangeLogLevel(l=>a(l)))}),{...this.q(t,i),get logLevel(){return r},onDidChangeLogLevel:o.event,trace(c,...l){n(),i.then(u=>u.trace(c,...l))},debug(c,...l){n(),i.then(u=>u.debug(c,...l))},info(c,...l){n(),i.then(u=>u.info(c,...l))},warn(c,...l){n(),i.then(u=>u.warn(c,...l))},error(c,...l){n(),i.then(u=>u.error(c,...l))},dispose(){s.dispose()}}}};rw=__decorate([__param(0,Ue),__param(1,er),__param(2,wu),__param(3,ua),__param(4,ca),__param(5,Ne)],rw);var A8=X("IExtHostOutputService"),$u,iw=class{static{$u=this}static{this.c=0}static{this.d=250}constructor(t,r){this.h=r,this.f=new Map,this.g=t.getProxy(K.MainThreadDecorations)}registerFileDecorationProvider(t,r){const i=$u.c++;this.f.set(i,{provider:t,extensionDescription:r}),this.g.$registerDecorationProvider(i,r.identifier.value);const s=t.onDidChangeFileDecorations&&t.onDidChangeFileDecorations(n=>{if(!n){this.g.$onDidChange(i,null);return}const o=Ei(n);if(o.length<=$u.d){this.g.$onDidChange(i,o);return}this.h.warn("[Decorations] CAPPING events from decorations provider",r.identifier.value,o.length);const a=o.map(u=>({uri:u,rank:FP(u.path,"/")})),c=TC(a,(u,h)=>u.rank-h.rank||eo(u.uri.path,h.uri.path)),l=[];e:for(const u of c){let h;for(const d of u){const f=Sr(d.uri.path);if(h!==f&&(h=f,l.push(d.uri)>=$u.d))break e}}this.g.$onDidChange(i,l)});return new _e(()=>{s?.dispose(),this.g.$unregisterDecorationProvider(i),this.f.delete(i)})}async $provideDecorations(t,r,i){if(!this.f.has(t))return Object.create(null);const s=Object.create(null),{provider:n,extensionDescription:o}=this.f.get(t);return await Promise.all(r.map(async a=>{try{const{uri:c,id:l}=a,u=await Promise.resolve(n.provideFileDecoration(k.revive(c),i));if(!u)return;try{uv.validate(u),u.badge&&typeof u.badge!="string"&&H(o,"codiconDecoration"),s[l]=[u.propagate,u.tooltip,u.badge,u.color]}catch(h){this.h.warn(`INVALID decoration from extension '${o.identifier.value}': ${h}`)}}catch(c){this.h.error(c)}})),s}};iw=$u=__decorate([__param(0,Ue),__param(1,Ne)],iw);var T8=X("IExtHostDecorations"),CF=class{constructor(e){this.a=e,this.b=new Uint32Array(e.length),this.c=new Int32Array(1),this.c[0]=-1}getCount(){return this.a.length}insertValues(e,t){e=ac(e);const r=this.a,i=this.b,s=t.length;return s===0?!1:(this.a=new Uint32Array(r.length+s),this.a.set(r.subarray(0,e),0),this.a.set(r.subarray(e),e+s),this.a.set(t,e),e-1<this.c[0]&&(this.c[0]=e-1),this.b=new Uint32Array(this.a.length),this.c[0]>=0&&this.b.set(i.subarray(0,this.c[0]+1)),!0)}setValue(e,t){return e=ac(e),t=ac(t),this.a[e]===t?!1:(this.a[e]=t,e-1<this.c[0]&&(this.c[0]=e-1),!0)}removeValues(e,t){e=ac(e),t=ac(t);const r=this.a,i=this.b;if(e>=r.length)return!1;const s=r.length-e;return t>=s&&(t=s),t===0?!1:(this.a=new Uint32Array(r.length-t),this.a.set(r.subarray(0,e),0),this.a.set(r.subarray(e+t),e),this.b=new Uint32Array(this.a.length),e-1<this.c[0]&&(this.c[0]=e-1),this.c[0]>=0&&this.b.set(i.subarray(0,this.c[0]+1)),!0)}getTotalSum(){return this.a.length===0?0:this.d(this.a.length-1)}getPrefixSum(e){return e<0?0:(e=ac(e),this.d(e))}d(e){if(e<=this.c[0])return this.b[e];let t=this.c[0]+1;t===0&&(this.b[0]=this.a[0],t++),e>=this.a.length&&(e=this.a.length-1);for(let r=t;r<=e;r++)this.b[r]=this.b[r-1]+this.a[r];return this.c[0]=Math.max(this.c[0],e),this.b[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let t=0,r=this.a.length-1,i=0,s=0,n=0;for(;t<=r;)if(i=t+(r-t)/2|0,s=this.b[i],n=s-this.a[i],e<n)r=i-1;else if(e>=s)t=i+1;else break;return new PF(i,e-n)}},PF=class{constructor(e,t){this.index=e,this.remainder=t,this._prefixSumIndexOfResultBrand=void 0,this.index=e,this.remainder=t}},IF=class{constructor(e,t,r,i){this.a=e,this.b=t,this.c=r,this.d=i,this.f=null,this.g=null}dispose(){this.b.length=0}get version(){return this.d}getText(){return this.g===null&&(this.g=this.b.join(this.c)),this.g}onEvents(e){e.eol&&e.eol!==this.c&&(this.c=e.eol,this.f=null);const t=e.changes;for(const r of t)this.k(r.range),this.l(new ri(r.range.startLineNumber,r.range.startColumn),r.text);this.d=e.versionId,this.g=null}h(){if(!this.f){const e=this.c.length,t=this.b.length,r=new Uint32Array(t);for(let i=0;i<t;i++)r[i]=this.b[i].length+e;this.f=new CF(r)}}j(e,t){this.b[e]=t,this.f&&this.f.setValue(e,this.b[e].length+this.c.length)}k(e){if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this.j(e.startLineNumber-1,this.b[e.startLineNumber-1].substring(0,e.startColumn-1)+this.b[e.startLineNumber-1].substring(e.endColumn-1));return}this.j(e.startLineNumber-1,this.b[e.startLineNumber-1].substring(0,e.startColumn-1)+this.b[e.endLineNumber-1].substring(e.endColumn-1)),this.b.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this.f&&this.f.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber)}l(e,t){if(t.length===0)return;const r=t4(t);if(r.length===1){this.j(e.lineNumber-1,this.b[e.lineNumber-1].substring(0,e.column-1)+r[0]+this.b[e.lineNumber-1].substring(e.column-1));return}r[r.length-1]+=this.b[e.lineNumber-1].substring(e.column-1),this.j(e.lineNumber-1,this.b[e.lineNumber-1].substring(0,e.column-1)+r[0]);const i=new Uint32Array(r.length-1);for(let s=1;s<r.length;s++)this.b.splice(e.lineNumber+s-1,0,r[s]),i[s-1]=r[s].length+this.c.length;this.f&&this.f.insertValues(e.lineNumber,i)}},sw=new Map;function DF(e,t){t?sw.set(e,t):sw.delete(e)}function AF(e){return sw.get(e)}var TF=class extends IF{constructor(e,t,r,i,s,n,o){super(t,r,i,s),this.o=e,this.p=n,this.q=o,this.n=!1}dispose(){qr(!this.n),this.n=!0,this.q=!1}equalLines(e){return Xi(this.b,e)}get document(){if(!this.m){const e=this;this.m={get uri(){return e.a},get fileName(){return e.a.fsPath},get isUntitled(){return e.a.scheme===Q.untitled},get languageId(){return e.p},get version(){return e.d},get isClosed(){return e.n},get isDirty(){return e.q},save(){return e.r()},getText(t){return t?e.s(t):e.getText()},get eol(){return e.c===`
`?Oi.LF:Oi.CRLF},get lineCount(){return e.b.length},lineAt(t){return e.t(t)},offsetAt(t){return e.u(t)},positionAt(t){return e.v(t)},validateRange(t){return e.w(t)},validatePosition(t){return e.x(t)},getWordRangeAtPosition(t,r){return e.y(t,r)},[Symbol.for("debug.description")](){return`TextDocument(${e.a.toString()})`}}}return Object.freeze(this.m)}_acceptLanguageId(e){qr(!this.n),this.p=e}_acceptIsDirty(e){qr(!this.n),this.q=e}r(){return this.n?Promise.reject(new Error("Document has been closed")):this.o.$trySaveDocument(this.a)}s(e){const t=this.w(e);if(t.isEmpty)return"";if(t.isSingleLine)return this.b[t.start.line].substring(t.start.character,t.end.character);const r=this.c,i=t.start.line,s=t.end.line,n=[];n.push(this.b[i].substring(t.start.character));for(let o=i+1;o<s;o++)n.push(this.b[o]);return n.push(this.b[s].substring(0,t.end.character)),n.join(r)}t(e){let t;if(e instanceof Fe?t=e.line:typeof e=="number"&&(t=e),typeof t!="number"||t<0||t>=this.b.length||Math.floor(t)!==t)throw new Error("Illegal value for `line`");return new RF(t,this.b[t],t===this.b.length-1)}u(e){return e=this.x(e),this.h(),this.f.getPrefixSum(e.line-1)+e.character}v(e){e=Math.floor(e),e=Math.max(0,e),this.h();const t=this.f.getIndexOf(e),r=this.b[t.index].length;return new Fe(t.index,Math.min(t.remainder,r))}w(e){if(!(e instanceof Re))throw new Error("Invalid argument");const t=this.x(e.start),r=this.x(e.end);return t===e.start&&r===e.end?e:new Re(t.line,t.character,r.line,r.character)}x(e){if(!(e instanceof Fe))throw new Error("Invalid argument");if(this.b.length===0)return e.with(0,0);let{line:t,character:r}=e,i=!1;if(t<0)t=0,r=0,i=!0;else if(t>=this.b.length)t=this.b.length-1,r=this.b[t].length,i=!0;else{const s=this.b[t].length;r<0?(r=0,i=!0):r>s&&(r=s,i=!0)}return i?new Fe(t,r):e}y(e,t){const r=this.x(e);if(!t)t=AF(this.p);else if(e4(t))throw new Error(`[getWordRangeAtPosition]: ignoring custom regexp '${t.source}' because it matches the empty string.`);const i=I5(r.character+1,C5(t),this.b[r.line],0);if(i)return new Re(r.line,i.startColumn-1,r.line,i.endColumn-1)}},RF=class{constructor(e,t,r){this.a=e,this.b=t,this.c=r}get lineNumber(){return this.a}get text(){return this.b}get range(){return new Re(this.a,0,this.a,this.b.length)}get rangeIncludingLineBreak(){return this.c?this.range:new Re(this.a,0,this.a+1,0)}get firstNonWhitespaceCharacterIndex(){return/^(\s*)/.exec(this.b)[1].length}get isEmptyOrWhitespace(){return this.firstNonWhitespaceCharacterIndex===this.b.length}},Ap=class{constructor(e){this.a=e,this.b=0}nextId(){return this.a+ ++this.b}},Oq=new Ap("id#"),LF=class B3{static{this.c=new Ap("TextEditorDecorationType")}constructor(t,r,i){const s=B3.c.nextId();t.$registerTextEditorDecorationType(r.identifier,s,Lv.from(i)),this.value=Object.freeze({key:s,dispose(){t.$removeTextEditorDecorationType(s)}})}},NF=class{constructor(e,t){this.g=[],this.h=void 0,this.j=!1,this.c=e,this.d=e.version,this.e=t.undoStopBefore,this.f=t.undoStopAfter}finalize(){return this.j=!0,{documentVersionId:this.d,edits:this.g,setEndOfLine:this.h,undoStopBefore:this.e,undoStopAfter:this.f}}k(){if(this.j)throw new Error("Edit is only valid while callback runs")}replace(e,t){this.k();let r=null;if(e instanceof Fe)r=new Re(e,e);else if(e instanceof Re)r=e;else throw new Error("Unrecognized location");this.l(r,t,!1)}insert(e,t){this.k(),this.l(new Re(e,e),t,!0)}delete(e){this.k();let t=null;if(e instanceof Re)t=e;else throw new Error("Unrecognized location");this.l(t,null,!0)}l(e,t,r){const i=this.c.validateRange(e);this.g.push({range:i,text:t,forceMoveMarkers:r})}setEndOfLine(e){if(this.k(),e!==Oi.LF&&e!==Oi.CRLF)throw Le("endOfLine");this.h=e}},FF=class{constructor(e,t,r,i){this.c=e,this.d=t,this._accept(r),this.e=i;const s=this;this.value={get tabSize(){return s.f},set tabSize(n){s.n(n)},get indentSize(){return s.g},set indentSize(n){s.p(n)},get insertSpaces(){return s.j},set insertSpaces(n){s.s(n)},get cursorStyle(){return s.k},set cursorStyle(n){s.t(n)},get lineNumbers(){return s.l},set lineNumbers(n){s.u(n)}}}_accept(e){this.f=e.tabSize,this.g=e.indentSize,this.h=e.originalIndentSize,this.j=e.insertSpaces,this.k=e.cursorStyle,this.l=Qa.to(e.lineNumbers)}m(e){if(e==="auto")return"auto";if(typeof e=="number"){const t=Math.floor(e);return t>0?t:null}if(typeof e=="string"){const t=parseInt(e,10);return isNaN(t)?null:t>0?t:null}return null}n(e){const t=this.m(e);if(t!==null){if(typeof t=="number"){if(this.f===t)return;this.f=t}this.v("setTabSize",this.c.$trySetOptions(this.d,{tabSize:t}))}}o(e){if(e==="tabSize")return"tabSize";if(typeof e=="number"){const t=Math.floor(e);return t>0?t:null}if(typeof e=="string"){const t=parseInt(e,10);return isNaN(t)?null:t>0?t:null}return null}p(e){const t=this.o(e);if(t!==null){if(typeof t=="number"){if(this.h===t)return;this.g=t,this.h=t}this.v("setIndentSize",this.c.$trySetOptions(this.d,{indentSize:t}))}}q(e){return e==="auto"?"auto":e==="false"?!1:!!e}s(e){const t=this.q(e);if(typeof t=="boolean"){if(this.j===t)return;this.j=t}this.v("setInsertSpaces",this.c.$trySetOptions(this.d,{insertSpaces:t}))}t(e){this.k!==e&&(this.k=e,this.v("setCursorStyle",this.c.$trySetOptions(this.d,{cursorStyle:e})))}u(e){this.l!==e&&(this.l=e,this.v("setLineNumbers",this.c.$trySetOptions(this.d,{lineNumbers:Qa.from(e)})))}assign(e){const t={};let r=!1;if(typeof e.tabSize<"u"){const i=this.m(e.tabSize);i==="auto"?(r=!0,t.tabSize=i):typeof i=="number"&&this.f!==i&&(this.f=i,r=!0,t.tabSize=i)}if(typeof e.indentSize<"u"){const i=this.o(e.indentSize);i==="tabSize"?(r=!0,t.indentSize=i):typeof i=="number"&&this.h!==i&&(this.g=i,this.h=i,r=!0,t.indentSize=i)}if(typeof e.insertSpaces<"u"){const i=this.q(e.insertSpaces);i==="auto"?(r=!0,t.insertSpaces=i):this.j!==i&&(this.j=i,r=!0,t.insertSpaces=i)}typeof e.cursorStyle<"u"&&this.k!==e.cursorStyle&&(this.k=e.cursorStyle,r=!0,t.cursorStyle=e.cursorStyle),typeof e.lineNumbers<"u"&&this.l!==e.lineNumbers&&(this.l=e.lineNumbers,r=!0,t.lineNumbers=Qa.from(e.lineNumbers)),r&&this.v("setOptions",this.c.$trySetOptions(this.d,t))}v(e,t){t.catch(r=>{this.e.warn(`ExtHostTextEditorOptions '${e}' failed:'`),this.e.warn(r)})}},OF=class{constructor(e,t,r,i,s,n,o,a){this.id=e,this.j=t,this.k=r,this.g=!1,this.h=new Set,this.c=s,this.d=new FF(this.j,this.id,n,r),this.e=o,this.f=a;const c=this;this.value=Object.freeze({get document(){return i.value},set document(l){throw new Jn("document")},get selection(){return c.c&&c.c[0]},set selection(l){if(!(l instanceof js))throw Le("selection");c.c=[l],c.l()},get selections(){return c.c},set selections(l){if(!Array.isArray(l)||l.some(u=>!(u instanceof js)))throw Le("selections");c.c=l,c.l()},get visibleRanges(){return c.e},set visibleRanges(l){throw new Jn("visibleRanges")},get options(){return c.d.value},set options(l){c.g||c.d.assign(l)},get viewColumn(){return c.f},set viewColumn(l){throw new Jn("viewColumn")},edit(l,u={undoStopBefore:!0,undoStopAfter:!0}){if(c.g)return Promise.reject(new Error("TextEditor#edit not possible on closed editors"));const h=new NF(i.value,u);return l(h),c.m(h)},insertSnippet(l,u,h={undoStopBefore:!0,undoStopAfter:!0}){if(c.g)return Promise.reject(new Error("TextEditor#insertSnippet not possible on closed editors"));let d;if(!u||Array.isArray(u)&&u.length===0)d=c.c.map(f=>W.from(f));else if(u instanceof Fe){const{lineNumber:f,column:g}=Ze.from(u);d=[{startLineNumber:f,startColumn:g,endLineNumber:f,endColumn:g}]}else if(u instanceof Re)d=[W.from(u)];else{d=[];for(const f of u)if(f instanceof Re)d.push(W.from(f));else{const{lineNumber:g,column:v}=Ze.from(f);d.push({startLineNumber:g,startColumn:v,endLineNumber:g,endColumn:v})}}return t.$tryInsertSnippet(e,i.value.version,l.value,d,h)},setDecorations(l,u){const h=u.length===0;h&&!c.h.has(l.key)||(h?c.h.delete(l.key):c.h.add(l.key),c.n(()=>{if(G9(u))return t.$trySetDecorations(e,l.key,_L(u));{const d=new Array(4*u.length);for(let f=0,g=u.length;f<g;f++){const v=u[f];d[4*f]=v.start.line+1,d[4*f+1]=v.start.character+1,d[4*f+2]=v.end.line+1,d[4*f+3]=v.end.character+1}return t.$trySetDecorationsFast(e,l.key,d)}}))},revealRange(l,u){c.n(()=>t.$tryRevealRange(e,W.from(l),u||Jd.Default))},show(l){t.$tryShowEditor(e,Gt.from(l))},hide(){t.$tryHideEditor(e)},[Symbol.for("debug.description")](){return`TextEditor(${this.document.uri.toString()})`}})}dispose(){qr(!this.g),this.g=!0}_acceptOptions(e){qr(!this.g),this.d._accept(e)}_acceptVisibleRanges(e){qr(!this.g),this.e=e}_acceptViewColumn(e){qr(!this.g),this.f=e}_acceptSelections(e){qr(!this.g),this.c=e}async l(){const e=this.c.map(Ui.from);return await this.n(()=>this.j.$trySetSelections(this.id,e)),this.value}m(e){const t=e.finalize();if(t.edits.length===0&&!t.setEndOfLine)return Promise.resolve(!0);const r=t.edits.map(s=>s.range);r.sort((s,n)=>s.end.line===n.end.line?s.end.character===n.end.character?s.start.line===n.start.line?s.start.character-n.start.character:s.start.line-n.start.line:s.end.character-n.end.character:s.end.line-n.end.line);for(let s=0,n=r.length-1;s<n;s++){const o=r[s].end;if(r[s+1].start.isBefore(o))return Promise.reject(new Error("Overlapping ranges are not allowed!"))}const i=t.edits.map(s=>({range:W.from(s.range),text:s.text,forceMoveMarkers:s.forceMoveMarkers}));return this.j.$tryApplyEdits(this.id,t.documentVersionId,i,{setEndOfLine:typeof t.setEndOfLine=="number"?Ya.from(t.setEndOfLine):void 0,undoStopBefore:t.undoStopBefore,undoStopAfter:t.undoStopAfter})}n(e){return this.g?(this.k.warn("TextEditor is closed/disposed"),Promise.resolve(void 0)):e().then(()=>this,t=>(t instanceof Error&&t.name==="DISPOSED"||this.k.warn(t),null))}},MF=class{constructor(e){this.value=e,this.a=0}ref(){this.a++}unref(){return--this.a===0}},nw=class{constructor(t,r){this.h=t,this.i=r,this.a=null,this.b=new Map,this.c=new rr,this.d=new T,this.e=new T,this.f=new T,this.g=new T,this.onDidAddDocuments=this.d.event,this.onDidRemoveDocuments=this.e.event,this.onDidChangeVisibleTextEditors=this.f.event,this.onDidChangeActiveTextEditor=this.g.event}$acceptDocumentsAndEditorsDelta(t){this.acceptDocumentsAndEditorsDelta(t)}acceptDocumentsAndEditorsDelta(t){const r=[],i=[],s=[];if(t.removedDocuments)for(const n of t.removedDocuments){const o=k.revive(n),a=this.c.get(o);a?.unref()&&(this.c.delete(o),r.push(a.value))}if(t.addedDocuments)for(const n of t.addedDocuments){const o=k.revive(n.uri);let a=this.c.get(o);if(a&&o.scheme!==Q.vscodeNotebookCell&&o.scheme!==Q.vscodeInteractiveInput)throw new Error(`document '${o} already exists!'`);a||(a=new MF(new TF(this.h.getProxy(K.MainThreadDocuments),o,n.lines,n.EOL,n.versionId,n.languageId,n.isDirty)),this.c.set(o,a),i.push(a.value)),a.ref()}if(t.removedEditors)for(const n of t.removedEditors){const o=this.b.get(n);this.b.delete(n),o&&s.push(o)}if(t.addedEditors)for(const n of t.addedEditors){const o=k.revive(n.documentUri);qr(this.c.has(o),`document '${o}' does not exist`),qr(!this.b.has(n.id),`editor '${n.id}' already exists!`);const a=this.c.get(o).value,c=new OF(n.id,this.h.getProxy(K.MainThreadTextEditors),this.i,new _r(()=>a.document),n.selections.map(Ui.to),n.options,n.visibleRanges.map(l=>W.to(l)),typeof n.editorPosition=="number"?Gt.to(n.editorPosition):void 0);this.b.set(n.id,c)}t.newActiveEditor!==void 0&&(qr(t.newActiveEditor===null||this.b.has(t.newActiveEditor),`active editor '${t.newActiveEditor}' does not exist`),this.a=t.newActiveEditor),Si(r),Si(s),t.removedDocuments&&this.e.fire(r),t.addedDocuments&&this.d.fire(i),(t.removedEditors||t.addedEditors)&&this.f.fire(this.allEditors().map(n=>n.value)),t.newActiveEditor!==void 0&&this.g.fire(this.activeEditor())}getDocument(t){return this.c.get(t)?.value}allDocuments(){return ci.map(this.c.values(),t=>t.value)}getEditor(t){return this.b.get(t)}activeEditor(t){if(!this.a)return;const r=this.b.get(this.a);return t?r:r?.value}allEditors(){return[...this.b.values()]}};nw=__decorate([__param(0,Ue),__param(1,Ne)],nw);var Mo=X("IExtHostDocumentsAndEditors"),Cu=X("IExtHostApiDeprecationService"),ow=class{constructor(t,r){this.c=r,this.a=new Set,this.b=t.getProxy(K.MainThreadTelemetry)}report(t,r,i){const s=this.d(t,r);this.a.has(s)||(this.a.add(s),r.isUnderDevelopment&&this.c.warn(`[Deprecation Warning] '${t}' is deprecated. ${i}`),this.b.$publicLog2("extHostDeprecatedApiUsage",{extensionId:r.identifier.value,apiId:t}))}d(t,r){return`${t}-${r.identifier.value}`}};ow=__decorate([__param(0,Ue),__param(1,Ne)],ow);var Uq=Object.freeze(new class{report(e,t,r){}}),jF={activeComment:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.activeComment.d.ts"},aiRelatedInformation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiRelatedInformation.d.ts"},aiTextSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiTextSearchProvider.d.ts"},aiTextSearchProviderNew:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiTextSearchProviderNew.d.ts"},attributableCoverage:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.attributableCoverage.d.ts"},authLearnMore:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authLearnMore.d.ts"},authSession:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authSession.d.ts"},canonicalUriProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.canonicalUriProvider.d.ts"},chatParticipantAdditions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatParticipantAdditions.d.ts"},chatParticipantPrivate:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatParticipantPrivate.d.ts",version:2},chatProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatProvider.d.ts"},chatTab:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatTab.d.ts"},chatVariableResolver:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatVariableResolver.d.ts"},codeActionAI:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codeActionAI.d.ts"},codeActionRanges:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codeActionRanges.d.ts"},codiconDecoration:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codiconDecoration.d.ts"},commentReactor:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentReactor.d.ts"},commentReveal:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentReveal.d.ts"},commentThreadApplicability:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentThreadApplicability.d.ts"},commentingRangeHint:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentingRangeHint.d.ts"},commentsDraftState:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentsDraftState.d.ts"},contribAccessibilityHelpContent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribAccessibilityHelpContent.d.ts"},contribChatParticipantDetection:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribChatParticipantDetection.d.ts"},contribCommentEditorActionsMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentEditorActionsMenu.d.ts"},contribCommentPeekContext:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentPeekContext.d.ts"},contribCommentThreadAdditionalMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentThreadAdditionalMenu.d.ts"},contribCommentsViewThreadMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentsViewThreadMenus.d.ts"},contribDebugCreateConfiguration:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribDebugCreateConfiguration.d.ts"},contribDiffEditorGutterToolBarMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribDiffEditorGutterToolBarMenus.d.ts"},contribEditSessions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribEditSessions.d.ts"},contribEditorContentMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribEditorContentMenu.d.ts"},contribIssueReporter:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribIssueReporter.d.ts"},contribLabelFormatterWorkspaceTooltip:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribLabelFormatterWorkspaceTooltip.d.ts"},contribMenuBarHome:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMenuBarHome.d.ts"},contribMergeEditorMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMergeEditorMenus.d.ts"},contribMultiDiffEditorMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMultiDiffEditorMenus.d.ts"},contribNotebookStaticPreloads:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribNotebookStaticPreloads.d.ts"},contribRemoteHelp:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribRemoteHelp.d.ts"},contribShareMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribShareMenu.d.ts"},contribSourceControlHistoryItemMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlHistoryItemMenu.d.ts"},contribSourceControlHistoryTitleMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlHistoryTitleMenu.d.ts"},contribSourceControlInputBoxMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlInputBoxMenu.d.ts"},contribSourceControlTitleMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlTitleMenu.d.ts"},contribStatusBarItems:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribStatusBarItems.d.ts"},contribViewContainerTitle:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewContainerTitle.d.ts"},contribViewsRemote:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewsRemote.d.ts"},contribViewsWelcome:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewsWelcome.d.ts"},createFileSystemWatcher:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.createFileSystemWatcher.d.ts"},customEditorMove:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.customEditorMove.d.ts"},debugVisualization:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.debugVisualization.d.ts"},defaultChatParticipant:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.defaultChatParticipant.d.ts",version:2},diffCommand:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.diffCommand.d.ts"},diffContentOptions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.diffContentOptions.d.ts"},documentFiltersExclusive:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.documentFiltersExclusive.d.ts"},documentPaste:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.documentPaste.d.ts"},editSessionIdentityProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editSessionIdentityProvider.d.ts"},editorHoverVerbosityLevel:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editorHoverVerbosityLevel.d.ts"},editorInsets:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editorInsets.d.ts"},embeddings:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.embeddings.d.ts"},extensionRuntime:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.extensionRuntime.d.ts"},extensionsAny:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.extensionsAny.d.ts"},externalUriOpener:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.externalUriOpener.d.ts"},fileComments:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileComments.d.ts"},fileSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileSearchProvider.d.ts"},fileSearchProviderNew:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileSearchProviderNew.d.ts"},findFiles2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findFiles2.d.ts"},findFiles2New:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findFiles2New.d.ts"},findTextInFiles:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findTextInFiles.d.ts"},findTextInFilesNew:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findTextInFilesNew.d.ts"},fsChunks:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fsChunks.d.ts"},idToken:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.idToken.d.ts"},inlineCompletionsAdditions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.inlineCompletionsAdditions.d.ts"},inlineEdit:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.inlineEdit.d.ts"},interactive:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.interactive.d.ts"},interactiveWindow:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.interactiveWindow.d.ts"},ipc:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.ipc.d.ts"},languageModelSystem:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageModelSystem.d.ts"},languageStatusText:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageStatusText.d.ts"},lmTools:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.lmTools.d.ts",version:7},mappedEditsProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.mappedEditsProvider.d.ts"},multiDocumentHighlightProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.multiDocumentHighlightProvider.d.ts"},newSymbolNamesProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.newSymbolNamesProvider.d.ts"},notebookCellExecution:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookCellExecution.d.ts"},notebookCellExecutionState:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookCellExecutionState.d.ts"},notebookControllerAffinityHidden:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookControllerAffinityHidden.d.ts"},notebookDeprecated:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookDeprecated.d.ts"},notebookExecution:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookExecution.d.ts"},notebookKernelSource:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookKernelSource.d.ts"},notebookLiveShare:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookLiveShare.d.ts"},notebookMessaging:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookMessaging.d.ts"},notebookMime:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookMime.d.ts"},notebookReplDocument:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookReplDocument.d.ts"},notebookVariableProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookVariableProvider.d.ts"},portsAttributes:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.portsAttributes.d.ts"},profileContentHandlers:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.profileContentHandlers.d.ts"},quickDiffProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickDiffProvider.d.ts"},quickInputButtonLocation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickInputButtonLocation.d.ts"},quickPickItemTooltip:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickPickItemTooltip.d.ts"},quickPickSortByLabel:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickPickSortByLabel.d.ts"},resolvers:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.resolvers.d.ts"},scmActionButton:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmActionButton.d.ts"},scmHistoryProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmHistoryProvider.d.ts"},scmMultiDiffEditor:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmMultiDiffEditor.d.ts"},scmSelectedProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmSelectedProvider.d.ts"},scmTextDocument:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmTextDocument.d.ts"},scmValidation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmValidation.d.ts"},shareProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.shareProvider.d.ts"},showLocal:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.showLocal.d.ts"},speech:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.speech.d.ts"},tabInputMultiDiff:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tabInputMultiDiff.d.ts"},tabInputTextMerge:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tabInputTextMerge.d.ts"},taskPresentationGroup:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.taskPresentationGroup.d.ts"},telemetry:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.telemetry.d.ts"},terminalDataWriteEvent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalDataWriteEvent.d.ts"},terminalDimensions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalDimensions.d.ts"},terminalExecuteCommandEvent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalExecuteCommandEvent.d.ts"},terminalQuickFixProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalQuickFixProvider.d.ts"},terminalSelection:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalSelection.d.ts"},testObserver:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.testObserver.d.ts"},testRelatedCode:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.testRelatedCode.d.ts"},textSearchCompleteNew:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchCompleteNew.d.ts"},textSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchProvider.d.ts"},textSearchProviderNew:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchProviderNew.d.ts"},timeline:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.timeline.d.ts"},tokenInformation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tokenInformation.d.ts"},treeViewActiveItem:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewActiveItem.d.ts"},treeViewMarkdownMessage:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewMarkdownMessage.d.ts"},treeViewReveal:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewReveal.d.ts"},tunnelFactory:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tunnelFactory.d.ts"},tunnels:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tunnels.d.ts"},workspaceTrust:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.workspaceTrust.d.ts"}},Tp=Object.freeze(jF),aw=fr.as(ld.JSONContribution),UF=class Og{static a(t){const r=new lo;for(let i=0,s=t.length;i<s;i++)r.add(t[i].description.identifier);return r}static compute(t,r){if(!t||!t.length)return new Og(r,[]);if(!r||!r.length)return new Og([],t);const i=this.a(t),s=this.a(r),n=r.filter(a=>!i.has(a.description.identifier)),o=t.filter(a=>!s.has(a.description.identifier));return new Og(n,o)}constructor(t,r){this.added=t,this.removed=r}},HF=class{constructor(e,t){this.name=e,this.defaultExtensionKind=t,this.a=null,this.b=null,this.c=null}setHandler(e){if(this.a!==null)throw new Error("Handler already set!");return this.a=e,this.d(),{dispose:()=>{this.a=null}}}acceptUsers(e){this.c=UF.compute(this.b,e),this.b=e,this.d()}d(){if(!(this.a===null||this.b===null||this.c===null))try{this.a(this.b,this.c)}catch(e){It(e)}}},BF={type:"string",enum:["ui","workspace"],enumDescriptions:[p(12450,null),p(12451,null)]},R8="vscode://schemas/vscode-extensions",cw={properties:{engines:{type:"object",description:p(12452,null),properties:{vscode:{type:"string",description:p(12453,null),default:"^1.22.0"}}},publisher:{description:p(12454,null),type:"string"},displayName:{description:p(12455,null),type:"string"},categories:{description:p(12456,null),type:"array",uniqueItems:!0,items:{oneOf:[{type:"string",enum:nR},{type:"string",const:"Languages",deprecationMessage:p(12457,null)}]}},galleryBanner:{type:"object",description:p(12458,null),properties:{color:{description:p(12459,null),type:"string"},theme:{description:p(12460,null),type:"string",enum:["dark","light"]}}},contributes:{description:p(12461,null),type:"object",properties:{},default:{}},preview:{type:"boolean",description:p(12462,null)},enableProposedApi:{type:"boolean",deprecationMessage:p(12463,null)},enabledApiProposals:{markdownDescription:p(12464,null),type:"array",uniqueItems:!0,items:{type:"string",enum:Object.keys(Tp).map(e=>e),markdownEnumDescriptions:Object.values(Tp).map(e=>e.proposal)}},api:{markdownDescription:p(12465,null),type:"string",enum:["none"],enumDescriptions:[p(12466,null)]},activationEvents:{description:p(12467,null),type:"array",items:{type:"string",defaultSnippets:[{label:"onWebviewPanel",description:p(12468,null),body:"onWebviewPanel:viewType"},{label:"onLanguage",description:p(12469,null),body:"onLanguage:${1:languageId}"},{label:"onCommand",description:p(12470,null),body:"onCommand:${2:commandId}"},{label:"onDebug",description:p(12471,null),body:"onDebug"},{label:"onDebugInitialConfigurations",description:p(12472,null),body:"onDebugInitialConfigurations"},{label:"onDebugDynamicConfigurations",description:p(12473,null),body:"onDebugDynamicConfigurations"},{label:"onDebugResolve",description:p(12474,null),body:"onDebugResolve:${6:type}"},{label:"onDebugAdapterProtocolTracker",description:p(12475,null),body:"onDebugAdapterProtocolTracker:${6:type}"},{label:"workspaceContains",description:p(12476,null),body:"workspaceContains:${4:filePattern}"},{label:"onStartupFinished",description:p(12477,null),body:"onStartupFinished"},{label:"onTaskType",description:p(12478,null),body:"onTaskType:${1:taskType}"},{label:"onFileSystem",description:p(12479,null),body:"onFileSystem:${1:scheme}"},{label:"onEditSession",description:p(12480,null),body:"onEditSession:${1:scheme}"},{label:"onSearch",description:p(12481,null),body:"onSearch:${7:scheme}"},{label:"onView",body:"onView:${5:viewId}",description:p(12482,null)},{label:"onUri",body:"onUri",description:p(12483,null)},{label:"onOpenExternalUri",body:"onOpenExternalUri",description:p(12484,null)},{label:"onCustomEditor",body:"onCustomEditor:${9:viewType}",description:p(12485,null)},{label:"onNotebook",body:"onNotebook:${1:type}",description:p(12486,null)},{label:"onAuthenticationRequest",body:"onAuthenticationRequest:${11:authenticationProviderId}",description:p(12487,null)},{label:"onRenderer",description:p(12488,null),body:"onRenderer:${11:rendererId}"},{label:"onTerminalProfile",body:"onTerminalProfile:${1:terminalId}",description:p(12489,null)},{label:"onTerminalQuickFixRequest",body:"onTerminalQuickFixRequest:${1:quickFixId}",description:p(12490,null)},{label:"onWalkthrough",body:"onWalkthrough:${1:walkthroughID}",description:p(12491,null)},{label:"onIssueReporterOpened",body:"onIssueReporterOpened",description:p(12492,null)},{label:"onChatParticipant",body:"onChatParticipant:${1:participantId}",description:p(12493,null)},{label:"onLanguageModelTool",body:"onLanguageModelTool:${1:toolId}",description:p(12494,null)},{label:"*",description:p(12495,null),body:"*"}]}},badges:{type:"array",description:p(12496,null),items:{type:"object",required:["url","href","description"],properties:{url:{type:"string",description:p(12497,null)},href:{type:"string",description:p(12498,null)},description:{type:"string",description:p(12499,null)}}}},markdown:{type:"string",description:p(12500,null),enum:["github","standard"],default:"github"},qna:{default:"marketplace",description:p(12501,null),anyOf:[{type:["string","boolean"],enum:["marketplace",!1]},{type:"string"}]},extensionDependencies:{description:p(12502,null),type:"array",uniqueItems:!0,items:{type:"string",pattern:b0}},extensionPack:{description:p(12503,null),type:"array",uniqueItems:!0,items:{type:"string",pattern:b0}},extensionKind:{description:p(12504,null),type:"array",items:BF,default:["workspace"],defaultSnippets:[{body:["ui"],description:p(12505,null)},{body:["workspace"],description:p(12506,null)},{body:["ui","workspace"],description:p(12507,null)},{body:["workspace","ui"],description:p(12508,null)},{body:[],description:p(12509,null)}]},capabilities:{description:p(12510,null),type:"object",properties:{virtualWorkspaces:{description:p(12511,null),type:["boolean","object"],defaultSnippets:[{label:"limited",body:{supported:"${1:limited}",description:"${2}"}},{label:"false",body:{supported:!1,description:"${2}"}}],default:(!0).valueOf,properties:{supported:{markdownDescription:p(12512,null),type:["string","boolean"],enum:["limited",!0,!1],enumDescriptions:[p(12513,null),p(12514,null),p(12515,null)]},description:{type:"string",markdownDescription:p(12516,null)}}},untrustedWorkspaces:{description:p(12517,null),type:"object",required:["supported"],defaultSnippets:[{body:{supported:"${1:limited}",description:"${2}"}}],properties:{supported:{markdownDescription:p(12518,null),type:["string","boolean"],enum:["limited",!0,!1],enumDescriptions:[p(12519,null),p(12520,null),p(12521,null)]},restrictedConfigurations:{description:p(12522,null),type:"array",items:{type:"string"}},description:{type:"string",markdownDescription:p(12523,null)}}}}},sponsor:{description:p(12524,null),type:"object",defaultSnippets:[{body:{url:"${1:https:}"}}],properties:{url:{description:p(12525,null),type:"string"}}},scripts:{type:"object",properties:{"vscode:prepublish":{description:p(12526,null),type:"string"},"vscode:uninstall":{description:p(12527,null),type:"string"}}},icon:{type:"string",description:p(12528,null)},l10n:{type:"string",description:p(12529,null)},pricing:{type:"string",markdownDescription:p(12530,null),enum:["Free","Trial"],default:"Free"}}},zF=class{constructor(){this.a=new Map}registerExtensionPoint(e){if(this.a.has(e.extensionPoint))throw new Error("Duplicate extension point: "+e.extensionPoint);const t=new HF(e.extensionPoint,e.defaultExtensionKind);return this.a.set(e.extensionPoint,t),e.activationEventsGenerator&&bN.register(e.extensionPoint,e.activationEventsGenerator),cw.properties.contributes.properties[e.extensionPoint]=e.jsonSchema,aw.registerSchema(R8,cw),t}getExtensionPoints(){return Array.from(this.a.values())}},L8={ExtensionsRegistry:"ExtensionsRegistry"};fr.add(L8.ExtensionsRegistry,new zF);var _F=fr.as(L8.ExtensionsRegistry);aw.registerSchema(R8,cw),aw.registerSchema(oR,{properties:{extensionEnabledApiProposals:{description:p(12531,null),type:"object",properties:{},additionalProperties:{anyOf:[{type:"array",uniqueItems:!0,items:{type:"string",enum:Object.keys(Tp),markdownEnumDescriptions:Object.values(Tp).map(e=>e.proposal)}}]}}}});var WF={type:"object",additionalProperties:!1,properties:{type:{type:"string",description:p(10019,null)},required:{type:"array",items:{type:"string"}},properties:{type:"object",description:p(10020,null),additionalProperties:{$ref:"http://json-schema.org/draft-07/schema#"}},when:{type:"string",markdownDescription:p(10021,null),default:""}}},lw;(function(e){function t(r,i,s){if(!r)return;const n=Me(r.type)?r.type:void 0;if(!n||n.length===0){s.error(p(10022,null));return}const o=[];if(Array.isArray(r.required))for(const a of r.required)Me(a)&&o.push(a);return{extensionId:i.value,taskType:n,required:o,properties:r.properties?ut(r.properties):{},when:r.when?nr.deserialize(r.when):void 0}}e.from=t})(lw||(lw={}));var VF=_F.registerExtensionPoint({extensionPoint:"taskDefinitions",activationEventsGenerator:(e,t)=>{for(const r of e)r.type&&t.push(`onTaskType:${r.type}`)},jsonSchema:{description:p(10023,null),type:"array",items:WF}}),qF=class{constructor(){this.d=new T,this.onDefinitionsChanged=this.d.event,this.a=Object.create(null),this.b=new Promise((e,t)=>{VF.setHandler((r,i)=>{this.c=void 0;try{for(const s of i.removed){const n=s.value;for(const o of n)this.a&&o.type&&this.a[o.type]&&delete this.a[o.type]}for(const s of i.added){const n=s.value;for(const o of n){const a=lw.from(o,s.description.identifier,s.collector);a&&(this.a[a.taskType]=a)}}(i.removed.length>0||i.added.length>0)&&this.d.fire()}catch{}e(void 0)})})}onReady(){return this.b}get(e){return this.a[e]}all(){return Object.keys(this.a).map(e=>this.a[e])}getJsonSchema(){if(this.c===void 0){const e=[];for(const t of this.all()){const r={type:"object",additionalProperties:!1};t.required.length>0&&(r.required=t.required.slice(0)),t.properties!==void 0?r.properties=ut(t.properties):r.properties=Object.create(null),r.properties.type={type:"string",enum:[t.taskType]},e.push(r)}this.c={oneOf:e}}return this.c}},GF=new qF,JF="settings",Hq=new J("taskRunning",!1,p(10024,null)),Bq=tm(10026,"Tasks"),Rp;(function(e){e[e.Escape=1]="Escape",e[e.Strong=2]="Strong",e[e.Weak=3]="Weak"})(Rp||(Rp={})),function(e){function t(r){if(!r)return e.Strong;switch(r.toLowerCase()){case"escape":return e.Escape;case"strong":return e.Strong;case"weak":return e.Weak;default:return e.Strong}}e.from=t}(Rp||(Rp={}));var N8;(function(e){e.defaults={cwd:"${workspaceFolder}"}})(N8||(N8={}));var Pu;(function(e){e[e.Always=1]="Always",e[e.Silent=2]="Silent",e[e.Never=3]="Never"})(Pu||(Pu={})),function(e){function t(r){switch(r.toLowerCase()){case"always":return e.Always;case"silent":return e.Silent;case"never":return e.Never;default:return e.Always}}e.fromString=t}(Pu||(Pu={}));var Iu;(function(e){e[e.Never=1]="Never",e[e.OnProblem=2]="OnProblem",e[e.Always=3]="Always"})(Iu||(Iu={})),function(e){function t(r){switch(r.toLowerCase()){case"always":return e.Always;case"never":return e.Never;case"onproblem":return e.OnProblem;default:return e.OnProblem}}e.fromString=t}(Iu||(Iu={}));var Du;(function(e){e[e.Shared=1]="Shared",e[e.Dedicated=2]="Dedicated",e[e.New=3]="New"})(Du||(Du={})),function(e){function t(r){switch(r.toLowerCase()){case"shared":return e.Shared;case"dedicated":return e.Dedicated;case"new":return e.New;default:return e.Shared}}e.fromString=t}(Du||(Du={}));var F8;(function(e){e.defaults={echo:!0,reveal:Pu.Always,revealProblems:Iu.Never,focus:!1,panel:Du.Shared,showReuseMessage:!0,clear:!1}})(F8||(F8={}));var Lp;(function(e){e[e.Shell=1]="Shell",e[e.Process=2]="Process",e[e.CustomExecution=3]="CustomExecution"})(Lp||(Lp={})),function(e){function t(i){switch(i.toLowerCase()){case"shell":return e.Shell;case"process":return e.Process;case"customExecution":return e.CustomExecution;default:return e.Process}}e.fromString=t;function r(i){switch(i){case e.Shell:return"shell";case e.Process:return"process";case e.CustomExecution:return"customExecution";default:return"process"}}e.toString=r}(Lp||(Lp={}));var O8;(function(e){function t(r){return Me(r)?r:r.value}e.value=t})(O8||(O8={}));var M8;(function(e){e.Clean={_id:"clean",isDefault:!1},e.Build={_id:"build",isDefault:!1},e.Rebuild={_id:"rebuild",isDefault:!1},e.Test={_id:"test",isDefault:!1};function t(i){return i===e.Clean._id||i===e.Build._id||i===e.Rebuild._id||i===e.Test._id}e.is=t;function r(i){if(i!==void 0)return Me(i)?t(i)?{_id:i,isDefault:!1}:void 0:i}e.from=r})(M8||(M8={}));var j8;(function(e){e[e.Global=1]="Global",e[e.Workspace=2]="Workspace",e[e.Folder=3]="Folder"})(j8||(j8={}));var U8;(function(e){e.Workspace="workspace",e.Extension="extension",e.InMemory="inMemory",e.WorkspaceFile="workspaceFile",e.User="user";function t(r){switch(r){case e.User:return 2;case e.WorkspaceFile:return 5;default:return 6}}e.toConfigurationTarget=t})(U8||(U8={}));var H8;(function(e){e.parallel="parallel",e.sequence="sequence"})(H8||(H8={}));var uw;(function(e){e[e.default=1]="default",e[e.folderOpen=2]="folderOpen"})(uw||(uw={}));var B8;(function(e){e.defaults={reevaluateOnRerun:!0,runOn:uw.default,instanceLimit:1}})(B8||(B8={}));var Np;(function(e){e[e.Process=1]="Process",e[e.Terminal=2]="Terminal"})(Np||(Np={})),function(e){e._default=e.Terminal}(Np||(Np={}));var z8;(function(e){e[e.V0_1_0=1]="V0_1_0",e[e.V2_0_0=2]="V2_0_0"})(z8||(z8={}));var _8;(function(e){e.DependsOnStarted="dependsOnStarted",e.AcquiredInput="acquiredInput",e.Start="start",e.ProcessStarted="processStarted",e.Active="active",e.Inactive="inactive",e.Changed="changed",e.Terminated="terminated",e.ProcessEnded="processEnded",e.End="end"})(_8||(_8={}));var W8;(function(e){e.SingleRun="singleRun",e.Background="background"})(W8||(W8={}));var V8;(function(e){e[e.System=0]="System",e[e.User=1]="User",e[e.FolderOpen=2]="FolderOpen",e[e.ConfigurationChange=3]="ConfigurationChange",e[e.Reconnect=4]="Reconnect"})(V8||(V8={}));var q8;(function(e){function t(c){return{taskId:c._id,taskName:c.configurationProperties.name,runType:c.configurationProperties.isBackground?"background":"singleRun",group:c.configurationProperties.group,__task:c}}function r(c,l,u){return{...t(c),kind:"start",terminalId:l,resolvedVariables:u}}e.start=r;function i(c,l,u){return{...t(c),kind:"processStarted",terminalId:l,processId:u}}e.processStarted=i;function s(c,l,u){return{...t(c),kind:"processEnded",terminalId:l,exitCode:u}}e.processEnded=s;function n(c,l,u){return{...t(c),kind:"terminated",exitReason:u,terminalId:l}}e.terminated=n;function o(c,l,u){return{...t(l),kind:c,terminalId:u}}e.general=o;function a(){return{kind:"changed"}}e.changed=a})(q8||(q8={}));var Fp;(function(e){function t(i){const s=Object.keys(i).sort();let n="";for(const o of s){let a=i[o];a instanceof Object?a=t(a):typeof a=="string"&&(a=a.replace(/,/g,",,")),n+=o+","+a+","}return n}function r(i){const n={_key:t(i),type:i.taskType};return Object.assign(n,i),n}e.create=r})(Fp||(Fp={}));var G8;(function(e){e.AutoDetect="task.autoDetect",e.SaveBeforeRun="task.saveBeforeRun",e.ShowDecorations="task.showDecorations",e.ProblemMatchersNeverPrompt="task.problemMatchers.neverPrompt",e.SlowProviderWarning="task.slowProviderWarning",e.QuickOpenHistory="task.quickOpen.history",e.QuickOpenDetail="task.quickOpen.detail",e.QuickOpenSkip="task.quickOpen.skip",e.QuickOpenShowAll="task.quickOpen.showAll",e.AllowAutomaticTasks="task.allowAutomaticTasks",e.Reconnection="task.reconnection",e.VerboseLogging="task.verboseLogging"})(G8||(G8={}));var J8;(function(e){e.Tasks="tasks",e.SuppressTaskName="tasks.suppressTaskName",e.Windows="tasks.windows",e.Osx="tasks.osx",e.Linux="tasks.linux",e.ShowOutput="tasks.showOutput",e.IsShellCommand="tasks.isShellCommand",e.ServiceTestSetting="tasks.service.testSetting"})(J8||(J8={}));var Q8;(function(e){function t(r,i){const s=GF.get(r.type);if(s===void 0){const c=ut(r);return delete c._key,Fp.create(c)}const n=Object.create(null);n.type=s.taskType;const o=new Set;s.required.forEach(c=>o.add(c));const a=s.properties;for(const c of Object.keys(a)){const l=r[c];if(l!=null)n[c]=l;else if(o.has(c)){const u=a[c];if(u.default!==void 0)n[c]=ut(u.default);else switch(u.type){case"boolean":n[c]=!1;break;case"number":case"integer":n[c]=0;break;case"string":n[c]="";break;default:i.error(p(10025,null,JSON.stringify(r,void 0,0),c));return}}}return Fp.create(n)}e.createTaskIdentifier=t})(Q8||(Q8={}));var Op;(function(e){function t(i){if(i!=null)return i}e.from=t;function r(i){if(i!=null)return i}e.to=r})(Op||(Op={}));var Mp;(function(e){function t(i){if(i!=null)return i}e.from=t;function r(i){if(i!=null)return i}e.to=r})(Mp||(Mp={}));var hw;(function(e){function t(i){if(i!=null)return i}e.from=t;function r(i){if(i!=null)return i}e.to=r})(hw||(hw={}));var Au;(function(e){function t(s){if(s){const n=s;return n&&!!n.process}else return!1}e.is=t;function r(s){if(s==null)return;const n={process:s.process,args:s.args};return s.options&&(n.options=hw.from(s.options)),n}e.from=r;function i(s){if(s!=null)return new Ra(s.process,s.args,s.options)}e.to=i})(Au||(Au={}));var dw;(function(e){function t(i){if(i!=null)return i}e.from=t;function r(i){if(i!=null)return i}e.to=r})(dw||(dw={}));var Tu;(function(e){function t(s){if(s){const n=s;return n&&(!!n.commandLine||!!n.command)}else return!1}e.is=t;function r(s){if(s==null)return;const n={};return s.commandLine!==void 0?n.commandLine=s.commandLine:(n.command=s.command,n.args=s.args),s.options&&(n.options=dw.from(s.options)),n}e.from=r;function i(s){if(!(s==null||s.command===void 0&&s.commandLine===void 0))return s.commandLine?new xo(s.commandLine,s.options):new xo(s.command,s.args?s.args:[],s.options)}e.to=i})(Tu||(Tu={}));var _i;(function(e){function t(s){if(s){const n=s;return n&&n.customExecution==="customExecution"}else return!1}e.is=t;function r(s){return{customExecution:"customExecution"}}e.from=r;function i(s,n){return n.get(s)}e.to=i})(_i||(_i={}));var fw;(function(e){function t(r,i){let s;return r.scope!==void 0&&typeof r.scope!="number"?s=r.scope.uri:r.scope!==void 0&&typeof r.scope=="number"&&(r.scope===Dn.Workspace&&i&&i.workspaceFile?s=i.workspaceFile:s=JF),{id:r._id,workspaceFolder:s}}e.from=t})(fw||(fw={}));var pw;(function(e){function t(r){if(r!=null)return{_id:r.id,isDefault:r.isDefault}}e.from=t})(pw||(pw={}));var fs;(function(e){function t(s,n){if(s==null)return[];const o=[];for(const a of s){const c=r(a,n);c&&o.push(c)}return o}e.fromMany=t;function r(s,n){if(s==null)return;let o;s.execution instanceof Ra?o=Au.from(s.execution):s.execution instanceof xo?o=Tu.from(s.execution):s.execution&&s.execution instanceof K1&&(o=_i.from(s.execution));const a=Op.from(s.definition);let c;return s.scope?typeof s.scope=="number"?c=s.scope:c=s.scope.uri:c=Dn.Workspace,!a||!c?void 0:{_id:s._id,definition:a,name:s.name,source:{extensionId:n.identifier.value,label:s.source,scope:c},execution:o,isBackground:s.isBackground,group:pw.from(s.group),presentationOptions:Mp.from(s.presentationOptions),problemMatchers:Ei(s.problemMatchers),hasDefinedMatchers:s.hasDefinedMatchers,runOptions:s.runOptions?s.runOptions:{reevaluateOnRerun:!0},detail:s.detail}}e.from=r;async function i(s,n,o){if(s==null)return;let a;Au.is(s.execution)?a=Au.to(s.execution):Tu.is(s.execution)?a=Tu.to(s.execution):_i.is(s.execution)&&(a=_i.to(s._id,o));const c=Op.to(s.definition);let l;if(s.source&&(s.source.scope!==void 0?typeof s.source.scope=="number"?l=s.source.scope:l=await n.resolveWorkspaceFolder(k.revive(s.source.scope)):l=Dn.Workspace),!c||!l)return;const u=new Kd(c,l,s.name,s.source.label,a,s.problemMatchers);return s.isBackground!==void 0&&(u.isBackground=s.isBackground),s.group!==void 0&&(u.group=Il.from(s.group._id),u.group&&s.group.isDefault&&(u.group=new Il(u.group.id,u.group.label),s.group.isDefault===!0&&(u.group.isDefault=s.group.isDefault))),s.presentationOptions&&(u.presentationOptions=Mp.to(s.presentationOptions)),s._id&&(u._id=s._id),s.detail&&(u.detail=s.detail),u}e.to=i})(fs||(fs={}));var gw;(function(e){function t(i){return i}e.from=t;function r(i){if(i)return Object.assign(Object.create(null),i)}e.to=r})(gw||(gw={}));var mw=class{#e;constructor(e,t,r){this._id=t,this.a=r,this.#e=e}get task(){return this.a}terminate(){this.#e.terminateTask(this)}fireDidStartProcess(e){}fireDidEndProcess(e){}},jp=class{constructor(t,r,i,s,n,o,a,c){this.q=new T,this.r=new T,this.s=new T,this.u=new T,this.a=t.getProxy(K.MainThreadTask),this.b=i,this.c=s,this.d=n,this.e=o,this.h=0,this.j=new Map,this.k=new Map,this.l=new Map,this.m=new Map,this.n=new Set,this.o=new Map,this.f=a,this.g=c,this.a.$registerSupportedExecutions(!0)}registerTaskProvider(t,r,i){if(!i)return new _e(()=>{});const s=this.x();return this.j.set(s,{type:r,provider:i,extension:t}),this.a.$registerTaskProvider(s,r),new _e(()=>{this.j.delete(s),this.a.$unregisterTaskProvider(s)})}registerTaskSystem(t,r){this.a.$registerTaskSystem(t,r)}fetchTasks(t){return this.a.$fetchTasks(gw.from(t)).then(async r=>{const i=[];for(const s of r){const n=await fs.to(s,this.b,this.m);n&&i.push(n)}return i})}get taskExecutions(){const t=[];return this.k.forEach(r=>t.push(r)),t}terminateTask(t){if(!(t instanceof mw))throw new Error("No valid task execution provided");return this.a.$terminateTask(t._id)}get onDidStartTask(){return this.q.event}async $onDidStartTask(t,r,i){const s=this.m.get(t.id);s&&(this.o.set(t.id,s),this.e.attachPtyToTerminal(r,await s.callback(i))),this.p=t.id,this.q.fire({execution:await this.z(t)})}get onDidEndTask(){return this.r.event}async $OnDidEndTask(t){if(!this.l.has(t.id))return;const r=await this.z(t);this.l.delete(t.id),this.k.delete(t.id),this.B(t),this.r.fire({execution:r})}get onDidStartTaskProcess(){return this.s.event}async $onDidStartTaskProcess(t){const r=await this.z(t.id);this.s.fire({execution:r,processId:t.processId})}get onDidEndTaskProcess(){return this.u.event}async $onDidEndTaskProcess(t){const r=await this.z(t.id);this.u.fire({execution:r,exitCode:t.exitCode})}$provideTasks(t,r){const i=this.j.get(t);if(!i)return Promise.reject(new Error("no handler found"));const s=[],n=mr(()=>i.provider.provideTasks(Ke.None)).then(o=>this.v(r,s,i,o));return new Promise(o=>{n.then(a=>{Promise.all(s).then(()=>{o(a)})})})}async $resolveTask(t,r){const i=this.j.get(t);if(!i)return Promise.reject(new Error("no handler found"));if(r.definition.type!==i.type)throw new Error(`Unexpected: Task of type [${r.definition.type}] cannot be resolved by provider of type [${i.type}].`);const s=await fs.to(r,this.b,this.m);if(!s)throw new Error("Unexpected: Task cannot be resolved.");const n=await i.provider.resolveTask(s,Ke.None);if(!n)return;this.A(n,i);const o=fs.from(n,i.extension);if(!o)throw new Error("Unexpected: Task cannot be resolved.");if(n.definition!==s.definition)throw new Error("Unexpected: The resolved task definition must be the same object as the original task definition. The task definition cannot be changed.");return _i.is(o.execution)&&await this.y(o,n,!0),await this.w(o)}x(){return this.h++}async y(t,r,i){const s=await this.a.$createTaskId(t);!i&&!this.m.has(s)&&(this.n.add(s),this.o.set(s,r.execution)),this.m.set(s,r.execution)}async z(t,r){if(typeof t=="string"){const n=this.l.get(t);if(!n)throw new xi("Unexpected: The specified task is missing an execution");return n}const i=this.l.get(t.id);if(i)return i;let s;return r?s=Promise.resolve(new mw(this,t.id,r)):s=fs.to(t.task,this.b,this.m).then(n=>{if(!n)throw new xi("Unexpected: Task does not exist.");return new mw(this,t.id,n)}),this.l.set(t.id,s),s.then(n=>(this.k.set(t.id,n),n))}A(t,r){t._deprecated&&this.g.report("Task.constructor",r.extension,"Use the Task constructor that takes a `scope` instead.")}B(t){this.o.get(t.id)&&this.o.delete(t.id),this.n.has(t.id)&&this.p!==t.id&&(this.m.delete(t.id),this.n.delete(t.id));const i=this.n.values();let s=i.next();for(;!s.done;)!this.o.has(s.value)&&this.p!==s.value&&(this.m.delete(s.value),this.n.delete(s.value)),s=i.next()}};jp=__decorate([__param(0,Ue),__param(1,er),__param(2,Bi),__param(3,Mo),__param(4,pi),__param(5,Gs),__param(6,Ne),__param(7,Cu)],jp);var vw=class extends jp{constructor(t,r,i,s,n,o,a,c){super(t,r,i,s,n,o,a,c),this.registerTaskSystem(Q.vscodeRemote,{scheme:Q.vscodeRemote,authority:"",platform:fP(0)})}async executeTask(t,r){if(!r.execution)throw new Error("Tasks to execute must include an execution");const i=fs.from(r,t);if(i===void 0)throw new Error("Task is not valid");if(_i.is(i.execution))await this.y(i,r,!1);else throw new Qg;const s=await this.z(await this.a.$getTaskExecution(i),r);return this.a.$executeTask(i).catch(n=>{throw new Error(n)}),s}v(t,r,i,s){const n=[];if(s)for(const o of s){if(this.A(o,i),!o.definition||!t[o.definition.type]){const c=o.source?o.source:"No task source";this.f.warn(`The task [${c}, ${o.name}] uses an undefined task type. The task will be ignored in the future.`)}const a=fs.from(o,i.extension);a&&_i.is(a.execution)?(n.push(a),r.push(this.y(a,o,!0))):this.f.warn("Only custom execution tasks supported.")}return{tasks:n,extension:i.extension}}async w(t){if(_i.is(t.execution))return t;this.f.warn("Only custom execution tasks supported.")}async $resolveVariables(t,r){return{process:void 0,variables:Object.create(null)}}async $jsonTasksSupported(){return!1}async $findExecutable(t,r,i){}};vw=__decorate([__param(0,Ue),__param(1,er),__param(2,Bi),__param(3,Mo),__param(4,pi),__param(5,Gs),__param(6,Ne),__param(7,Cu)],vw);var ww=X("IExtHostTask"),Y8=class{constructor(){this.f=new Map,this.m=[],this.n=new T,this.o=new T,this.d=1}get onError(){return this.n.event}get onExit(){return this.o.event}onMessage(e){this.k&&this.n.fire(new Error("attempt to set more than one 'Message' callback")),this.k=e}onEvent(e){this.j&&this.n.fire(new Error("attempt to set more than one 'Event' callback")),this.j=e}onRequest(e){this.g&&this.n.fire(new Error("attempt to set more than one 'Request' callback")),this.g=e}sendResponse(e){e.seq>0?this.n.fire(new Error(`attempt to send more than one response for command ${e.command}`)):this.u("response",e)}sendRequest(e,t,r,i){const s={command:e};if(t&&Object.keys(t).length>0&&(s.arguments=t),this.u("request",s),typeof i=="number"){const n=setTimeout(()=>{clearTimeout(n);const o=this.f.get(s.seq);if(o){this.f.delete(s.seq);const a={type:"response",seq:0,request_seq:s.seq,success:!1,command:e,message:p(5830,null,i,e)};o(a)}},i)}return r&&this.f.set(s.seq,r),s.seq}acceptMessage(e){this.k?this.k(e):(this.m.push(e),this.m.length===1&&this.s())}q(e,t){return e.type!=="event"||t.type!=="event"}async s(){let e;for(;this.m.length;){if((!e||this.q(this.m[0],e))&&await br(0),e=this.m.shift(),!e)return;switch(e.type){case"event":this.j?.(e);break;case"request":this.g?.(e);break;case"response":{const t=e,r=this.f.get(t.request_seq);r&&(this.f.delete(t.request_seq),r(t));break}}}}u(e,t){t.type=e,t.seq=this.d++,this.sendMessage(t)}async w(){if(this.f.size===0)return Promise.resolve();const e=new Map;this.f.forEach((t,r)=>e.set(r,t)),await br(500),e.forEach((t,r)=>{t({type:"response",seq:0,request_seq:r,success:!1,command:"canceled",message:"canceled"}),this.f.delete(r)})}getPendingRequestIds(){return Array.from(this.f.keys())}dispose(){this.m=[]}};function QF(e){return e.type&&(e.label||e.program||e.runtime)}var YF=/^[a-zA-Z][a-zA-Z0-9\+\-\.]+:/;function XF(e){return!!(e&&e.match(YF))}function X8(e){if(typeof e.path=="string"&&!(typeof e.sourceReference=="number"&&e.sourceReference>0)){if(XF(e.path))return k.parse(e.path);if(Ki(e.path))return k.file(e.path)}return e.path}function Z8(e){if(typeof e.path=="object"){const t=k.revive(e.path);if(t)return t.scheme===Q.file?t.fsPath:t.toString()}return e.path}function ZF(e,t){const r=t?X8:Z8,i=ut(e);return K8(i,(s,n)=>{s&&n&&(n.path=r(n))}),i}function KF(e,t){const r=t?X8:Z8,i=ut(e);return K8(i,(s,n)=>{!s&&n&&(n.path=r(n))}),i}function K8(e,t){switch(e.type){case"event":{const r=e;switch(r.event){case"output":t(!1,r.body.source);break;case"loadedSource":t(!1,r.body.source);break;case"breakpoint":t(!1,r.body.breakpoint.source);break;default:break}break}case"request":{const r=e;switch(r.command){case"setBreakpoints":t(!0,r.arguments.source);break;case"breakpointLocations":t(!0,r.arguments.source);break;case"source":t(!0,r.arguments.source);break;case"gotoTargets":t(!0,r.arguments.source);break;case"launchVSCode":r.arguments.args.forEach(i=>t(!1,i));break;default:break}break}case"response":{const r=e;if(r.success&&r.body)switch(r.command){case"stackTrace":r.body.stackFrames.forEach(i=>t(!1,i.source));break;case"loadedSources":r.body.sources.forEach(i=>t(!1,i));break;case"scopes":r.body.scopes.forEach(i=>t(!1,i.source));break;case"setFunctionBreakpoints":r.body.breakpoints.forEach(i=>t(!1,i.source));break;case"setBreakpoints":r.body.breakpoints.forEach(i=>t(!1,i.source));break;case"disassemble":r.body?.instructions.forEach(s=>t(!1,s.location));break;case"locations":t(!1,r.body?.source);break;default:break}break}}}var lc=X("IExtHostEditorTabs"),eE=class{constructor(e,t,r){this.e=r,this.d=t,this.acceptDtoUpdate(e)}get apiObject(){if(!this.a){const e=this,t={get isActive(){return e.b.id===e.e()},get label(){return e.b.label},get input(){return e.c},get isDirty(){return e.b.isDirty},get isPinned(){return e.b.isPinned},get isPreview(){return e.b.isPreview},get group(){return e.d.apiObject}};this.a=Object.freeze(t)}return this.a}get tabId(){return this.b.id}acceptDtoUpdate(e){this.b=e,this.c=this.f()}f(){switch(this.b.input.kind){case 1:return new wv(k.revive(this.b.input.uri));case 2:return new Ef(k.revive(this.b.input.original),k.revive(this.b.input.modified));case 3:return new O9(k.revive(this.b.input.base),k.revive(this.b.input.input1),k.revive(this.b.input.input2),k.revive(this.b.input.result));case 6:return new bv(k.revive(this.b.input.uri),this.b.input.viewType);case 7:return new M9(this.b.input.viewType);case 4:return new yv(k.revive(this.b.input.uri),this.b.input.notebookType);case 5:return new kv(k.revive(this.b.input.original),k.revive(this.b.input.modified),this.b.input.notebookType);case 8:return new j9;case 9:return new U9(k.revive(this.b.input.uri),k.revive(this.b.input.inputBoxUri));case 10:return new H9;case 11:return new B9(this.b.input.diffEditors.map(e=>new Ef(k.revive(e.original),k.revive(e.modified))));default:return}}},eO=class{constructor(e,t){this.c=[],this.d="",this.b=e,this.e=t;for(const r of e.tabs)r.isActive&&(this.d=r.id),this.c.push(new eE(r,this,()=>this.activeTabId()))}get apiObject(){if(!this.a){const e=this,t={get isActive(){return e.b.groupId===e.e()},get viewColumn(){return Gt.to(e.b.viewColumn)},get activeTab(){return e.c.find(r=>r.tabId===e.d)?.apiObject},get tabs(){return Object.freeze(e.c.map(r=>r.apiObject))}};this.a=Object.freeze(t)}return this.a}get groupId(){return this.b.groupId}get tabs(){return this.c}acceptGroupDtoUpdate(e){this.b=e}acceptTabOperation(e){if(e.kind===0){const r=new eE(e.tabDto,this,()=>this.activeTabId());return this.c.splice(e.index,0,r),e.tabDto.isActive&&(this.d=r.tabId),r}else if(e.kind===1){const r=this.c.splice(e.index,1)[0];if(!r)throw new Error(`Tab close updated received for index ${e.index} which does not exist`);return r.tabId===this.d&&(this.d=""),r}else if(e.kind===3){if(e.oldIndex===void 0)throw new Error("Invalid old index on move IPC");const r=this.c.splice(e.oldIndex,1)[0];if(!r)throw new Error(`Tab move updated received for index ${e.oldIndex} which does not exist`);return this.c.splice(e.index,0,r),r}const t=this.c.find(r=>r.tabId===e.tabDto.id);if(!t)throw new Error("INVALID tab");return e.tabDto.isActive?this.d=e.tabDto.id:this.d===e.tabDto.id&&!e.tabDto.isActive&&(this.d=""),t.acceptDtoUpdate(e.tabDto),t}activeTabId(){return this.d}},bw=class{constructor(t){this.b=new T,this.c=new T,this.e=[],this.a=t.getProxy(K.MainThreadEditorTabs)}get tabGroups(){if(!this.f){const t=this,r={onDidChangeTabGroups:t.c.event,onDidChangeTabs:t.b.event,get all(){return Object.freeze(t.e.map(i=>i.apiObject))},get activeTabGroup(){const i=t.d;return ea(t.e.find(n=>n.groupId===i)?.apiObject)},close:async(i,s)=>{const n=Array.isArray(i)?i:[i];return n.length?tO(n[0])?this.j(n,s):this.i(n,s):!0}};this.f=Object.freeze(r)}return this.f}$acceptEditorTabModel(t){const r=new Set(this.e.map(l=>l.groupId)),i=new Set(t.map(l=>l.groupId)),s=xC(r,i),n=this.e.filter(l=>s.removed.includes(l.groupId)).map(l=>l.apiObject),o=[],a=[];this.e=t.map(l=>{const u=new eO(l,()=>this.d);return s.added.includes(u.groupId)?o.push(u.apiObject):a.push(u.apiObject),u});const c=ea(t.find(l=>l.isActive===!0)?.groupId);c!==void 0&&this.d!==c&&(this.d=c),this.c.fire(Object.freeze({opened:o,closed:n,changed:a}))}$acceptTabGroupUpdate(t){const r=this.e.find(i=>i.groupId===t.groupId);if(!r)throw new Error("Update Group IPC call received before group creation.");r.acceptGroupDtoUpdate(t),t.isActive&&(this.d=t.groupId),this.c.fire(Object.freeze({changed:[r.apiObject],opened:[],closed:[]}))}$acceptTabOperation(t){const r=this.e.find(s=>s.groupId===t.groupId);if(!r)throw new Error("Update Tabs IPC call received before group creation.");const i=r.acceptTabOperation(t);switch(t.kind){case 0:this.b.fire(Object.freeze({opened:[i.apiObject],closed:[],changed:[]}));return;case 1:this.b.fire(Object.freeze({opened:[],closed:[i.apiObject],changed:[]}));return;case 3:case 2:this.b.fire(Object.freeze({opened:[],closed:[],changed:[i.apiObject]}));return}}g(t){for(const r of this.e)for(const i of r.tabs)if(i.apiObject===t)return i}h(t){return this.e.find(r=>r.apiObject===t)}async i(t,r){const i=[];for(const s of t){const n=this.g(s);if(!n)throw new Error("Tab close: Invalid tab not found!");i.push(n.tabId)}return this.a.$closeTab(i,r)}async j(t,r){const i=[];for(const s of t){const n=this.h(s);if(!n)throw new Error("Group close: Invalid group not found!");i.push(n.groupId)}return this.a.$closeGroup(i,r)}};bw=__decorate([__param(0,Ue)],bw);function tO(e){return e.tabs!==void 0}var rO=0,tE=new WeakMap,Ru=X("IExtHostTesting"),yw=class extends ae{constructor(t,r,i,s){super(),this.C=r,this.D=i,this.F=s,this.f=this.B(new T),this.g=new Map,this.w=this.B(new T),this.y=new Set,this.z=new Map,this.onResultsChanged=this.f.event,this.results=[],this.h=t.getProxy(K.MainThreadTesting),this.m=new cO(this.h),this.j=new nO(this.h,r),i.registerArgumentProcessor({processArgument:n=>{switch(n?.$mid){case 16:{const o=n,a=o.tests[o.tests.length-1].item.extId;return this.g.get(ze.root(a))?.collection.tree.get(a)?.actual??Ox(n)}case 18:{const{test:o,message:a}=n,c=o.item.extId;return{test:this.g.get(ze.root(c))?.collection.tree.get(c)?.actual??Ox({$mid:16,tests:[o]}),message:Ka.to(a)}}default:return n}}}),i.registerCommand(!1,"testing.getExplorerSelection",async()=>{const n=await i.executeCommand("_testing.getExplorerSelection"),o=a=>{const c=this.g.get(ze.root(a));if(c)return ze.isRoot(a)?c.controller:c.collection.tree.get(a)?.actual};return{include:n?.include.map(o).filter(to)||[],exclude:n?.exclude.map(o).filter(to)||[]}})}createTestController(t,r,i,s){if(this.g.has(r))throw new Error(`Attempt to insert a duplicate controller with ID "${r}"`);const n=new be,o=n.add(new ON(r,i,this.F));o.root.label=i;const a=new Map,c=new Set,l=this.h,u=()=>{let f=0;s&&(f|=2);const g=d.relatedCodeProvider;return g&&(g?.provideRelatedTests&&(f|=8),g?.provideRelatedCode&&(f|=4)),f},h={items:o.root.children,get label(){return i},set label(f){i=f,o.root.label=f,l.$updateController(r,{label:i})},get refreshHandler(){return s},set refreshHandler(f){s=f,l.$updateController(r,{capabilities:u()})},get id(){return r},get relatedCodeProvider(){return d.relatedCodeProvider},set relatedCodeProvider(f){H(t,"testRelatedCode"),d.relatedCodeProvider=f,l.$updateController(r,{capabilities:u()})},createRunProfile:(f,g,v,x,$,C)=>{let L=As(f);for(;a.has(L);)L++;return new nE(this.h,a,c,this.w.event,r,L,f,g,v,x,$,C)},createTestItem(f,g,v){return new yu(r,f,g,v)},createTestRun:(f,g,v=!0)=>this.j.createTestRun(t,r,o,f,g,v),invalidateTestResults:f=>{if(f===void 0)this.h.$markTestRetired(void 0);else{const g=f instanceof Array?f:[f];this.h.$markTestRetired(g.map(v=>ze.fromExtHostTestItem(v,r).toString()))}},set resolveHandler(f){o.resolveHandler=f},get resolveHandler(){return o.resolveHandler},dispose:()=>{n.dispose()}},d={controller:h,collection:o,profiles:a,extension:t,activeProfiles:c};return l.$registerTestController(r,i,u()),n.add(me(()=>l.$unregisterTestController(r))),this.g.set(r,d),n.add(me(()=>this.g.delete(r))),n.add(o.onDidGenerateDiff(f=>l.$publishDiff(r,f.map(Rd.serialize)))),h}createTestObserver(){return this.m.checkout()}async runTests(t,r=Ke.None){const i=iE(t);if(!i)throw new Error("The request passed to `vscode.test.runTests` must include a profile");const s=this.g.get(i.controllerId);if(!s)throw new Error("Controller not found");await this.h.$runTests({preserveFocus:t.preserveFocus??!0,group:kw[i.kind],targets:[{testIds:t.include?.map(n=>ze.fromExtHostTestItem(n,s.collection.root.id).toString())??[s.collection.root.id],profileId:i.profileId,controllerId:i.controllerId}],exclude:t.exclude?.map(n=>n.id)},r)}registerTestFollowupProvider(t){return this.y.add(t),{dispose:()=>{this.y.delete(t)}}}async $getTestsRelatedToCode(t,r,i){const s=this.F.getDocument(k.revive(t));if(!s)return[];const n=Ze.to(r),o=[];return await Promise.all([...this.g.values()].map(async a=>{let c;try{c=await a.relatedCodeProvider?.provideRelatedTests?.(s.document,n,i)}catch(l){i.isCancellationRequested||this.C.warn(`Error thrown while providing related tests for ${a.controller.label}`,l)}if(c){for(const l of c)o.push(ze.fromExtHostTestItem(l,a.controller.id).toString());a.collection.flushDiff()}})),o}async $getCodeRelatedToTest(t,r){const i=this.g.get(ze.root(t));if(!i)return[];const s=i.collection.tree.get(t);return s?(await i.relatedCodeProvider?.provideRelatedCode?.(s.actual,r))?.map(Tr.from)??[]:[]}$syncTests(){for(const{collection:t}of this.g.values())t.flushDiff();return Promise.resolve()}async $getCoverageDetails(t,r,i){return(await this.j.getCoverageDetails(t,r,i))?.map(ou.fromDetails)}async $disposeRun(t){this.j.disposeTestRun(t)}$configureRunProfile(t,r){this.g.get(t)?.profiles.get(r)?.configureHandler?.()}$setDefaultRunProfiles(t){const r=new Map;for(const[i,s]of Object.entries(t)){const n=this.g.get(i);if(!n)continue;const o=new Map,a=s.filter(l=>!n.activeProfiles.has(l)),c=[...n.activeProfiles].filter(l=>!s.includes(l));for(const l of a)o.set(l,!0),n.activeProfiles.add(l);for(const l of c)o.set(l,!1),n.activeProfiles.delete(l);o.size&&r.set(i,o)}this.w.fire(r)}async $refreshTests(t,r){await this.g.get(t)?.controller.refreshHandler?.(r)}$publishTestResults(t){this.results=Object.freeze(t.map(r=>{const i=Xv.to(r),s=r.tasks.findIndex(n=>n.hasCoverage);return s!==-1&&(i.getDetailedCoverage=(n,o=Ke.None)=>this.h.$getCoverageDetails(r.id,s,n,o).then(a=>a.map(ou.to))),tE.set(i,r.id),i}).concat(this.results).sort((r,i)=>i.completedAt-r.completedAt).slice(0,32)),this.f.fire()}async $expandTest(t,r){const i=this.g.get(ze.fromString(t).controllerId)?.collection;i&&(await i.expand(t,r<0?1/0:r),i.flushDiff())}$acceptDiff(t){this.m.applyDiff(t.map(r=>Rd.deserialize({asCanonicalUri:i=>i},r)))}async $runControllerTests(t,r){return Promise.all(t.map(i=>this.G(i,!1,r)))}async $startContinuousRun(t,r){const i=new wt(r),s=await Promise.all(t.map(n=>this.G(n,!0,i.token)));return!r.isCancellationRequested&&!s.some(n=>n.error)&&await new Promise(n=>r.onCancellationRequested(n)),i.dispose(!0),s}async $provideTestFollowups(t,r){const i=this.results.find(o=>tE.get(o)===t.resultId),s=i&&lO(ze.fromString(t.extId),i?.results);if(!s)return[];let n=[];return await Promise.all([...this.y].map(async o=>{try{const a=await o.provideFollowup(i,s,t.taskIndex,t.messageIndex,r);a&&(n=n.concat(a))}catch(a){this.C.error("Error thrown while providing followup for test message",a)}})),r.isCancellationRequested?[]:n.map(o=>{const a=rO++;return this.z.set(a,o),{title:o.title,id:a}})}$disposeTestFollowups(t){for(const r of t)this.z.delete(r)}$executeTestFollowup(t){const r=this.z.get(t);return r?this.D.executeCommand(r.command,...r.arguments||[]):Promise.resolve()}$cancelExtensionTestRun(t,r){t===void 0?this.j.cancelAllRuns():this.j.cancelRunById(t,r)}getMetadataForRun(t){for(const r of this.j.trackers){const i=r.getTaskIdForRun(t);if(i)return{taskId:i,runId:r.id}}}async G(t,r,i){const s=this.g.get(t.controllerId);if(!s)return{};const{collection:n,profiles:o,extension:a}=s,c=o.get(t.profileId);if(!c)return{};const l=t.testIds.map(f=>n.tree.get(f)).filter(to),u=t.excludeExtIds.map(f=>s.collection.tree.get(f)).filter(to).filter(f=>l.some(g=>g.fullId.compare(f.fullId)===2));if(!l.length)return{};const h=new bf(l.some(f=>f.actual instanceof D0)?void 0:l.map(f=>f.actual),u.map(f=>f.actual),c,r),d=nL(t)&&this.j.prepareForMainThreadTestRun(a,h,sE.fromInternal(t,s.collection),c,i);try{return await c.runHandler(h,i),{}}catch(f){return{error:String(f)}}finally{d&&d.hasRunningTasks&&!i.isCancellationRequested&&await Qe.toPromise(d.onEnd)}}};yw=__decorate([__param(0,Ue),__param(1,Ne),__param(2,zi),__param(3,Mo)],yw);var iO=1e4,rE;(function(e){e[e.Running=0]="Running",e[e.Cancelling=1]="Cancelling",e[e.Ended=2]="Ended"})(rE||(rE={}));var sO=class extends ae{get hasRunningTasks(){return this.g>0}get id(){return this.C.id}constructor(e,t,r,i,s,n){super(),this.C=e,this.D=t,this.F=r,this.G=i,this.H=s,this.f=0,this.g=0,this.h=new Map,this.j=new Set,this.w=this.B(new T),this.z=new Map,this.onEnd=this.w.event,this.m=this.B(new wt(n));const o=this.B(new Cs(()=>this.I(),iO));this.B(this.m.token.onCancellationRequested(()=>o.schedule()));const a=new T;this.y=a.event,this.B(me(()=>{a.fire(),a.dispose()}))}getTaskIdForRun(e){for(const[t,{run:r}]of this.h)if(r===e)return t}cancel(e){e?this.h.get(e)?.cts.cancel():this.f===0?(this.m.cancel(),this.f=1):this.f===1&&this.I()}async getCoverageDetails(e,t,r){const[,i]=ze.fromString(e).path,s=this.z.get(e);if(!s)return[];const{report:n,extIds:o}=s,a=this.h.get(i);if(!a)throw new Error("unreachable: run task was not found");let c;if(t&&n instanceof _l){const u=o.indexOf(t);if(u===-1)return[];c=n.fromTests[u]}return await(c?this.G?.loadDetailedCoverageForTest?.(a.run,n,c,r):this.G?.loadDetailedCoverage?.(a.run,n,r))??[]}createRun(e){const t=this.C.id,r=this.C.controllerId,i=ir(),s=l=>(u,...h)=>{if(o){this.F.warn(`Setting the state of test "${u.id}" is a no-op after the run ends.`);return}this.L(u),l(u,...h)},n=(l,u)=>{const h=u instanceof Array?u.map(Ka.from):[Ka.from(u)];if(l.uri&&l.range){const d={range:W.from(l.range),uri:l.uri};for(const f of h)f.location=f.location||d}this.D.$appendTestMessagesInRun(t,i,ze.fromExtHostTestItem(l,r).toString(),h)};let o=!1;const a=this.B(new wt(this.m.token)),c={isPersisted:this.C.isPersisted,token:a.token,name:e,onDidDispose:this.y,addCoverage:l=>{if(o)return;const u=l instanceof _l?l.fromTests:[];if(u.length){H(this.H,"attributableCoverage");for(const f of u)this.L(f)}const h=l.uri.toString(),d=new ze([t,i,h]).toString();this.z.set(d,{report:l,extIds:u.map(f=>ze.fromExtHostTestItem(f,r).toString())}),this.D.$appendCoverage(t,i,ou.fromFile(r,d,l))},enqueued:s(l=>{this.D.$updateTestStateInRun(t,i,ze.fromExtHostTestItem(l,r).toString(),1)}),skipped:s(l=>{this.D.$updateTestStateInRun(t,i,ze.fromExtHostTestItem(l,r).toString(),5)}),started:s(l=>{this.D.$updateTestStateInRun(t,i,ze.fromExtHostTestItem(l,r).toString(),2)}),errored:s((l,u,h)=>{n(l,u),this.D.$updateTestStateInRun(t,i,ze.fromExtHostTestItem(l,r).toString(),6,h)}),failed:s((l,u,h)=>{n(l,u),this.D.$updateTestStateInRun(t,i,ze.fromExtHostTestItem(l,r).toString(),4,h)}),passed:s((l,u)=>{this.D.$updateTestStateInRun(t,i,ze.fromExtHostTestItem(l,this.C.controllerId).toString(),3,u)}),appendOutput:(l,u,h)=>{o||(h&&this.L(h),this.D.$appendOutputToRun(t,i,re.fromString(l),u&&Tr.from(u),h&&ze.fromExtHostTestItem(h,r).toString()))},end:()=>{o||(o=!0,this.D.$finishedTestRunTask(t,i),--this.g||this.J())}};return this.g++,this.h.set(i,{run:c,cts:a}),this.D.$startedTestRunTask(t,{id:i,ctrlId:this.C.controllerId,name:e||this.H.displayName||this.H.identifier.value,running:!0}),c}I(){for(const{run:e}of this.h.values())e.end()}J(){this.f!==2&&(this.f=2,this.w.fire())}L(e){if(!(e instanceof yu))throw new Ld(e.id);if(this.j.has(ze.fromExtHostTestItem(e,this.C.controllerId).toString()))return;const t=[],r=this.C.colllection.root;for(;;){const i=Fn.from(e);if(t.unshift(i),this.j.has(i.extId)||(this.j.add(i.extId),e===r))break;e=e.parent||r}this.D.$addTestsToRun(this.C.controllerId,this.C.id,t)}dispose(){this.J(),super.dispose()}},nO=class{get trackers(){return this.f.values()}constructor(e,t){this.h=e,this.j=t,this.f=new Map,this.g=new Map}getCoverageDetails(e,t,r){const i=ze.root(e);return this.g.get(i)?.getCoverageDetails(e,t,r)||[]}disposeTestRun(e){this.g.get(e)?.dispose(),this.g.delete(e);for(const[t,{id:r}]of this.f)r===e&&this.f.delete(t)}prepareForMainThreadTestRun(e,t,r,i,s){return this.k(t,r,i,e,s)}cancelRunById(e,t){this.g.get(e)?.cancel(t)}cancelAllRuns(){for(const e of this.f.values())e.cancel()}createTestRun(e,t,r,i,s,n){const o=this.f.get(i);if(o)return o.createRun(s);const a=sE.fromPublic(t,r,i,n),c=iE(i);this.h.$startedExtensionTestRun({controllerId:t,continuous:!!i.continuous,profile:c&&{group:kw[c.kind],id:c.profileId},exclude:i.exclude?.map(u=>ze.fromExtHostTestItem(u,r.root.id).toString())??[],id:a.id,include:i.include?.map(u=>ze.fromExtHostTestItem(u,r.root.id).toString())??[r.root.id],preserveFocus:i.preserveFocus??!0,persist:n});const l=this.k(i,a,i.profile,e);return Qe.once(l.onEnd)(()=>{this.h.$finishedExtensionTestRun(a.id)}),l.createRun(s)}k(e,t,r,i,s){const n=new sO(t,this.h,this.j,r,i,s);return this.f.set(e,n),this.g.set(n.id,n),n}},iE=e=>{if(e.profile){if(!(e.profile instanceof nE))throw new Error("TestRunRequest.profile is not an instance created from TestController.createRunProfile");return e.profile}},sE=class hy{static fromPublic(t,r,i,s){return new hy(t,ir(),s,r)}static fromInternal(t,r){return new hy(t.controllerId,t.runId,!0,r)}constructor(t,r,i,s){this.controllerId=t,this.id=r,this.isPersisted=i,this.colllection=s}},oO=class{get isEmpty(){return this.f.size===0&&this.h.size===0&&this.g.size===0}constructor(e){this.k=e,this.f=new Set,this.g=new Set,this.h=new Set,this.j=new Set}add(e){this.f.add(e)}update(e){Object.assign(e.revived,Fn.toPlain(e.item)),this.f.has(e)||this.g.add(e)}remove(e){if(this.f.has(e)){this.f.delete(e);return}this.g.delete(e);const t=ze.parentId(e.item.extId);if(t&&this.j.has(t.toString())){this.j.add(e.item.extId);return}this.h.add(e)}getChangeEvent(){const{f:e,g:t,h:r}=this;return{get added(){return[...e].map(i=>i.revived)},get updated(){return[...t].map(i=>i.revived)},get removed(){return[...r].map(i=>i.revived)}}}complete(){this.isEmpty||this.k.fire(this.getChangeEvent())}},aO=class extends oL{constructor(){super(...arguments),this.z=new T,this.onDidChangeTests=this.z.event}get rootTests(){return this.h}getMirroredTestDataById(e){return this.g.get(e)}getMirroredTestDataByReference(e){return this.g.get(e.id)}y(e,t){return{...e,revived:Fn.toPlain(e.item),depth:t?t.depth+1:0,children:new Set}}x(){return new oO(this.z)}},cO=class{constructor(e){this.g=e}checkout(){this.f||(this.f=this.h());const e=this.f;return e.observers++,{onDidChangeTest:e.tests.onDidChangeTests,get tests(){return[...e.tests.rootTests].map(t=>t.revived)},dispose:Yg(()=>{--e.observers===0&&(this.g.$unsubscribeFromDiffs(),this.f=void 0)})}}getMirroredTestDataByReference(e){return this.f?.tests.getMirroredTestDataByReference(e)}applyDiff(e){this.f?.tests.apply(e)}h(){const e=new aO({asCanonicalUri:t=>t});return this.g.$subscribeToDiffs(),{observers:0,tests:e}}},Lu=(e,t,r,i)=>{r?Object.assign(r,i):t.$updateTestRunConfig(e.controllerId,e.profileId,i)},nE=class{#e;#t;#r;#i;#n;get label(){return this.g}set label(e){e!==this.g&&(this.g=e,Lu(this,this.#e,this.#i,{label:e}))}get supportsContinuousRun(){return this.h}set supportsContinuousRun(e){e!==this.h&&(this.h=e,Lu(this,this.#e,this.#i,{supportsContinuousRun:e}))}get isDefault(){return this.#t.has(this.profileId)}set isDefault(e){e!==this.isDefault&&(e?this.#t.add(this.profileId):this.#t.delete(this.profileId),Lu(this,this.#e,this.#i,{isDefault:e}))}get tag(){return this._tag}set tag(e){e?.id!==this._tag?.id&&(this._tag=e,Lu(this,this.#e,this.#i,{tag:e?Hi.namespace(this.controllerId,e.id):null}))}get configureHandler(){return this.f}set configureHandler(e){e!==this.f&&(this.f=e,Lu(this,this.#e,this.#i,{hasConfigurationHandler:!!e}))}get onDidChangeDefault(){return Qe.chain(this.#r,e=>e.map(t=>t.get(this.controllerId)?.get(this.profileId)).filter(to))}constructor(e,t,r,i,s,n,o,a,c,l=!1,u=void 0,h=!1){this.controllerId=s,this.profileId=n,this.g=o,this.kind=a,this.runHandler=c,this._tag=u,this.h=h,this.#e=e,this.#n=t,this.#t=r,this.#r=i,t.set(n,this);const d=kw[a];if(typeof d!="number")throw new Error(`Unknown TestRunProfile.group ${a}`);l&&r.add(n),this.#i={profileId:n,controllerId:s,tag:u?Hi.namespace(this.controllerId,u.id):null,label:o,group:d,isDefault:l,hasConfigurationHandler:!1,supportsContinuousRun:h},queueMicrotask(()=>{this.#i&&(this.#e.$publishTestRunProfile(this.#i),this.#i=void 0)})}dispose(){this.#n?.delete(this.profileId)&&(this.#n=void 0,this.#e.$removeTestProfile(this.controllerId,this.profileId)),this.#i=void 0}},kw={[_a.Coverage]:8,[_a.Debug]:4,[_a.Run]:2};function lO(e,t){for(let r=0;r<e.path.length;r++){const i=t.find(s=>s.id===e.path[r]);if(!i)return;if(r===e.path.length-1)return i;t=i.children}}var qq=X("configurationResolverService"),ht;(function(e){e.Unknown="unknown",e.Env="env",e.Config="config",e.Command="command",e.Input="input",e.ExtensionInstallFolder="extensionInstallFolder",e.WorkspaceFolder="workspaceFolder",e.Cwd="cwd",e.WorkspaceFolderBasename="workspaceFolderBasename",e.UserHome="userHome",e.LineNumber="lineNumber",e.SelectedText="selectedText",e.File="file",e.FileWorkspaceFolder="fileWorkspaceFolder",e.FileWorkspaceFolderBasename="fileWorkspaceFolderBasename",e.RelativeFile="relativeFile",e.RelativeFileDirname="relativeFileDirname",e.FileDirname="fileDirname",e.FileExtname="fileExtname",e.FileBasename="fileBasename",e.FileBasenameNoExtension="fileBasenameNoExtension",e.FileDirnameBasename="fileDirnameBasename",e.ExecPath="execPath",e.ExecInstallFolder="execInstallFolder",e.PathSeparator="pathSeparator",e.PathSeparatorAlias="/"})(ht||(ht={}));var Rr=class extends xi{constructor(e,t){super(t),this.variable=e}},uO=class Mg{static{this.VARIABLE_LHS="${"}static{this.VARIABLE_REGEXP=/\$\{(.*?)\}/g}constructor(t,r,i,s){this.h=new Map,this.a=t,this.b=r,this.g=i,s&&(this.c=s.then(n=>this.i(n)))}i(t){if(at){const r=Object.create(null);return Object.keys(t).forEach(i=>{r[i.toLowerCase()]=t[i]}),r}return t}resolveWithEnvironment(t,r,i){return this.l({env:this.i(t),userHome:void 0},r?r.uri:void 0,i)}async resolveAsync(t,r){const i={env:await this.c,userHome:await this.g};return this.l(i,t?t.uri:void 0,r)}async j(t,r,i,s){const n=ut(r);at&&n.windows?Object.keys(n.windows).forEach(a=>n[a]=n.windows[a]):Kt&&n.osx?Object.keys(n.osx).forEach(a=>n[a]=n.osx[a]):Ot&&n.linux&&Object.keys(n.linux).forEach(a=>n[a]=n.linux[a]),delete n.windows,delete n.osx,delete n.linux;const o={env:await this.c,userHome:await this.g};return this.l(o,t?t.uri:void 0,n,i,s)}async resolveAnyAsync(t,r,i){return this.j(t,r,i)}async resolveAnyMap(t,r,i){const s=new Map;return{newConfig:await this.j(t,r,i,s),resolvedVariables:s}}resolveWithInteractionReplace(t,r,i,s){throw new Error("resolveWithInteractionReplace not implemented.")}resolveWithInteraction(t,r,i,s){throw new Error("resolveWithInteraction not implemented.")}contributeVariable(t,r){if(this.h.has(t))throw new Error("Variable "+t+" is contributed twice.");this.h.set(t,r)}async l(t,r,i,s,n){if(Me(i))return this.m(t,r,i,s,n);if(Array.isArray(i))return Promise.all(i.map(o=>this.l(t,r,o,s,n)));if(Dt(i)){const o=Object.create(null),a=await Promise.all(Object.keys(i).map(async c=>[await this.m(t,r,c,s,n),await this.l(t,r,i[c],s,n)]));for(const[c,l]of a)o[c]=l;return o}return i}m(t,r,i,s,n){return UP(i,Mg.VARIABLE_REGEXP,async(o,a)=>{if(a.includes(Mg.VARIABLE_LHS))return o;let c=await this.o(t,o,a,r,s);return n?.set(a,c),c!==o&&Me(c)&&c.match(Mg.VARIABLE_REGEXP)&&(c=await this.m(t,r,c,s,n)),c})}n(t){return this.b?this.b.getUriLabel(t,{noPrefix:!0}):t.fsPath}async o(t,r,i,s,n){let o;const a=i.split(":");a.length>1&&(i=a[0],o=a[1]);const c=h=>{const d=this.a.getFilePath();if(d)return xu(d);throw new Rr(h,p(12280,null,r))},l=h=>{const d=c(h);if(this.a.getWorkspaceFolderPathForFile){const f=this.a.getWorkspaceFolderPathForFile();if(f)return xu(f)}throw new Rr(h,p(12281,null,r,St(d)))},u=h=>{if(o){const d=this.a.getFolderUri(o);if(d)return d;throw new Rr(h,p(12282,null,r,o))}if(s)return s;throw this.a.getWorkspaceFolderCount()>1?new Rr(h,p(12283,null,r)):new Rr(h,p(12284,null,r))};switch(i){case"env":if(o){if(t.env){const h=t.env[at?o.toLowerCase():o];if(Me(h))return h}return""}throw new Rr(ht.Env,p(12285,null,r));case"config":if(o){const h=this.a.getConfigurationValue(s,o);if(Lt(h))throw new Rr(ht.Config,p(12286,null,r,o));if(Dt(h))throw new Rr(ht.Config,p(12287,null,r,o));return h}throw new Rr(ht.Config,p(12288,null,r));case"command":return this.p(ht.Command,r,o,n,"command");case"input":return this.p(ht.Input,r,o,n,"input");case"extensionInstallFolder":if(o){const h=await this.a.getExtension(o);if(!h)throw new Rr(ht.ExtensionInstallFolder,p(12289,null,r,o));return this.n(h.extensionLocation)}throw new Rr(ht.ExtensionInstallFolder,p(12290,null,r));default:switch(i){case"workspaceRoot":case"workspaceFolder":return xu(this.n(u(ht.WorkspaceFolder)));case"cwd":return s||o?xu(this.n(u(ht.Cwd))):Zn();case"workspaceRootFolderName":case"workspaceFolderBasename":return xu(St(this.n(u(ht.WorkspaceFolderBasename))));case"userHome":{if(t.userHome)return t.userHome;throw new Rr(ht.UserHome,p(12291,null,r))}case"lineNumber":{const h=this.a.getLineNumber();if(h)return h;throw new Rr(ht.LineNumber,p(12292,null,r))}case"selectedText":{const h=this.a.getSelectedText();if(h)return h;throw new Rr(ht.SelectedText,p(12293,null,r))}case"file":return c(ht.File);case"fileWorkspaceFolder":return l(ht.FileWorkspaceFolder);case"fileWorkspaceFolderBasename":return St(l(ht.FileWorkspaceFolderBasename));case"relativeFile":return s||o?Ko(this.n(u(ht.RelativeFile)),c(ht.RelativeFile)):c(ht.RelativeFile);case"relativeFileDirname":{const h=Sr(c(ht.RelativeFileDirname));if(s||o){const d=Ko(this.n(u(ht.RelativeFileDirname)),h);return d.length===0?".":d}return h}case"fileDirname":return Sr(c(ht.FileDirname));case"fileExtname":return Sh(c(ht.FileExtname));case"fileBasename":return St(c(ht.FileBasename));case"fileBasenameNoExtension":{const h=St(c(ht.FileBasenameNoExtension));return h.slice(0,h.length-Sh(h).length)}case"fileDirnameBasename":return St(Sr(c(ht.FileDirnameBasename)));case"execPath":{const h=this.a.getExecPath();return h||r}case"execInstallFolder":{const h=this.a.getAppRoot();return h||r}case"pathSeparator":case"/":return $t;default:try{const h=o?`${i}:${o}`:i;return this.p(ht.Unknown,r,h,n,void 0)}catch{return r}}}}p(t,r,i,s,n){if(i&&s){const o=n===void 0?s[i]:s[n+":"+i];if(typeof o=="string")return o;throw new Rr(t,p(12294,null,r))}return r}},uc=X("IExtHostVariableResolverProvider"),hO=class extends uO{constructor(e,t,r,i,s,n,o){function a(){if(r){const c=r.activeEditor();if(c)return c.document.uri;const l=i.tabGroups.all.find(u=>u.isActive)?.activeTab;if(l!==void 0){if(l.input instanceof Ef||l.input instanceof kv)return l.input.modified;if(l.input instanceof wv||l.input instanceof yv||l.input instanceof bv)return l.input.uri}}}super({getFolderUri:c=>{const l=n.folders.filter(u=>u.name===c);if(l&&l.length>0)return l[0].uri},getWorkspaceFolderCount:()=>n.folders.length,getConfigurationValue:(c,l)=>s.getConfiguration(void 0,c).get(l),getAppRoot:()=>Zn(),getExecPath:()=>Kn.VSCODE_EXEC_PATH,getFilePath:()=>{const c=a();if(c)return Ss(c.fsPath)},getWorkspaceFolderPathForFile:()=>{if(t){const c=a();if(c){const l=t.getWorkspaceFolder(c);if(l)return Ss(l.uri.fsPath)}}},getSelectedText:()=>{if(r){const c=r.activeEditor();if(c&&!c.selection.isEmpty)return c.document.getText(c.selection)}},getLineNumber:()=>{if(r){const c=r.activeEditor();if(c)return String(c.selection.end.line+1)}},getExtension:c=>e.getExtension(c)},void 0,o?Promise.resolve(o):void 0,Promise.resolve(Kn))}},Up=class extends ae{constructor(t,r,i,s,n){super(),this.b=t,this.c=r,this.g=i,this.h=s,this.j=n,this.a=new _r(async()=>{const o=await this.h.getConfigProvider(),c={folders:await this.c.getWorkspaceFolders2()||[]};return this.B(this.c.onDidChangeWorkspace(async l=>{c.folders=await this.c.getWorkspaceFolders2()||[]})),new hO(this.b,this.c,this.g,this.j,o,c,this.m())})}getResolver(){return this.a.value}m(){}};Up=__decorate([__param(0,Js),__param(1,Bi),__param(2,Mo),__param(3,pi),__param(4,lc)],Up);var xw=X("IExtHostDebugService"),Hp=class extends ae{get onDidStartDebugSession(){return this.y.event}get onDidTerminateDebugSession(){return this.z.event}get onDidChangeActiveDebugSession(){return this.C.event}get activeDebugSession(){return this.D?.api}get onDidReceiveDebugSessionCustomEvent(){return this.F.event}get activeDebugConsole(){return this.G.value}constructor(t,r,i,s,n,o,a,c){super(),this.Y=r,this.Z=i,this.$=s,this.ab=n,this.bb=o,this.cb=a,this.db=c,this.w=new Map,this.O=0,this.P=new Map,this.Q=new Map,this.R=new WeakMap,this.S=new Map,this.W=new Map,this.X=0,this.f=0,this.g=[],this.h=0,this.j=[],this.m=0,this.n=[],this.M=new Map,this.N=new Map,this.y=this.B(new T),this.z=this.B(new T),this.C=this.B(new T),this.F=this.B(new T),this.u=t.getProxy(K.MainThreadDebugService),this.I=this.B(new T),this.L=this.B(new T),this.G=new fO(this.u),this.H=new Map,this.Z.getExtensionRegistry().then(l=>{this.B(l.onDidChange(u=>{this.fb(l)})),this.fb(l)})}async $getVisualizerTreeItem(t,r){const i=this.gb(r);if(!i)return;const s=await this.Q.get(t)?.getTreeItem?.(i);return s?this.eb(t,s):void 0}registerDebugVisualizationTree(t,r,i){const s=rt.toKey(t.identifier),n=this.yb(s,r);if(this.P.has(n))throw new Error(`A debug visualization provider with id '${r}' is already registered`);return this.Q.set(n,i),this.u.$registerDebugVisualizerTree(n,!!i.editItem),me(()=>{this.u.$unregisterDebugVisualizerTree(n),this.Q.delete(r)})}async $getVisualizerTreeItemChildren(t,r){const i=this.S.get(r)?.item;return i?(await this.Q.get(t)?.getChildren?.(i))?.map(n=>this.eb(t,n))||[]:[]}async $editVisualizerTreeItem(t,r){const i=this.S.get(t);if(!i)return;const s=await this.Q.get(i.provider)?.editItem?.(i.item,r);return this.eb(i.provider,s||i.item)}$disposeVisualizedTree(t){const r=this.S.get(t);if(!r)return;const i=[r.children];for(const s of i)if(s)for(const n of s)i.push(this.S.get(n)?.children),this.S.delete(n)}eb(t,r){let i=this.R.get(r);return i||(i=this.O++,this.R.set(r,i),this.S.set(i,{provider:t,item:r})),n0.from(r,i)}asDebugSourceUri(t,r){const i=t;if(typeof i.sourceReference=="number"&&i.sourceReference>0){let s=`debug:${encodeURIComponent(i.path||"")}`,n="?";return r&&(s+=`${n}session=${encodeURIComponent(r.id)}`,n="&"),s+=`${n}ref=${i.sourceReference}`,k.parse(s)}else{if(i.path)return k.file(i.path);throw new Error("cannot create uri from DAP 'source' object; properties 'path' and 'sourceReference' are both missing.")}}fb(t){const r=[];for(const i of t.getAllExtensionDescriptions())if(i.contributes){const s=i.contributes.debuggers;if(s&&s.length>0)for(const n of s)QF(n)&&r.push(n.type)}this.u.$registerDebugTypes(r)}get activeStackItem(){return this.J}get onDidChangeActiveStackItem(){return this.L.event}get onDidChangeBreakpoints(){return this.I.event}get breakpoints(){const t=[];return this.H.forEach(r=>t.push(r)),t}async $resolveDebugVisualizer(t,r){const i=this.W.get(t);if(!i)throw new Error(`No debug visualizer found with id '${t}'`);let{v:s,provider:n,extensionId:o}=i;if(s.visualization||(s=await n.resolveDebugVisualization?.(s,r)||s,i.v=s),!s.visualization)throw new Error(`No visualization returned from resolveDebugVisualization in '${n}'`);return this.zb(o,s.visualization)}async $executeDebugVisualizerCommand(t){const r=this.W.get(t);if(!r)throw new Error(`No debug visualizer found with id '${t}'`);const i=r.v.visualization;i&&"command"in i&&this.cb.executeCommand(i.command,...i.arguments||[])}gb(t){const r=this.w.get(t.sessionId);return r&&{session:r.api,variable:t.variable,containerId:t.containerId,frameId:t.frameId,threadId:t.threadId}}async $provideDebugVisualizers(t,r,i,s){const n=this.gb(i),o=this.yb(t,r),a=this.P.get(o);if(!n||!a)return[];const c=await a.provideDebugVisualization(n,s);return c?c.map(l=>{const u=++this.X;this.W.set(u,{v:l,provider:a,extensionId:t});const h=l.iconPath?this.Ab(l.iconPath):void 0;return{id:u,name:l.name,iconClass:h?.iconClass,iconPath:h?.iconPath,visualization:this.zb(t,l.visualization)}}):[]}$disposeDebugVisualizers(t){for(const r of t)this.W.delete(r)}registerDebugVisualizationProvider(t,r,i){if(!t.contributes?.debugVisualizers?.some(o=>o.id===r))throw new Error(`Extensions may only call registerDebugVisualizationProvider() for renderers they contribute (got ${r})`);const s=rt.toKey(t.identifier),n=this.yb(s,r);if(this.P.has(n))throw new Error(`A debug visualization provider with id '${r}' is already registered`);return this.P.set(n,i),this.u.$registerDebugVisualizer(s,r),me(()=>{this.u.$unregisterDebugVisualizer(s,r),this.P.delete(r)})}addBreakpoints(t){const r=t.filter(n=>{const o=n.id;return this.H.has(o)?!1:(this.H.set(o,n),!0)});this.vb(r,[],[]);const i=[],s=new Map;for(const n of r)if(n instanceof $o){let o=s.get(n.location.uri.toString());o||(o={type:"sourceMulti",uri:n.location.uri,lines:[]},s.set(n.location.uri.toString(),o),i.push(o)),o.lines.push({id:n.id,enabled:n.enabled,condition:n.condition,hitCondition:n.hitCondition,logMessage:n.logMessage,line:n.location.range.start.line,character:n.location.range.start.character,mode:n.mode})}else n instanceof Co&&i.push({type:"function",id:n.id,enabled:n.enabled,hitCondition:n.hitCondition,logMessage:n.logMessage,condition:n.condition,functionName:n.functionName,mode:n.mode});return this.u.$registerBreakpoints(i)}removeBreakpoints(t){const r=t.filter(o=>this.H.delete(o.id));this.vb([],r,[]);const i=r.filter(o=>o instanceof $o).map(o=>o.id),s=r.filter(o=>o instanceof Co).map(o=>o.id),n=r.filter(o=>o instanceof nf).map(o=>o.id);return this.u.$unregisterBreakpoints(i,s,n)}startDebugging(t,r,i){const s=i.testRun&&this.db.getMetadataForRun(i.testRun);return this.u.$startDebugging(t?t.uri:void 0,r,{parentSessionID:i.parentSession?i.parentSession.id:void 0,lifecycleManagedByParent:i.lifecycleManagedByParent,repl:i.consoleMode===hf.MergeWithParent?"mergeWithParent":"separate",noDebug:i.noDebug,compact:i.compact,suppressSaveBeforeStart:i.suppressSaveBeforeStart,testRun:s&&{runId:s.runId,taskId:s.taskId},suppressDebugStatusbar:i.suppressDebugStatusbar??i.debugUI?.simple,suppressDebugToolbar:i.suppressDebugToolbar??i.debugUI?.simple,suppressDebugView:i.suppressDebugView??i.debugUI?.simple})}stopDebugging(t){return this.u.$stopDebugging(t?t.id:void 0)}registerDebugConfigurationProvider(t,r,i){if(!r)return new _e(()=>{});const s=this.f++;return this.g.push({type:t,handle:s,provider:r}),this.u.$registerDebugConfigurationProvider(t,i,!!r.provideDebugConfigurations,!!r.resolveDebugConfiguration,!!r.resolveDebugConfigurationWithSubstitutedVariables,s),new _e(()=>{this.g=this.g.filter(n=>n.provider!==r),this.u.$unregisterDebugConfigurationProvider(s)})}registerDebugAdapterDescriptorFactory(t,r,i){if(!i)return new _e(()=>{});if(!this.rb(t,r))throw new Error(`a DebugAdapterDescriptorFactory can only be registered from the extension that defines the '${r}' debugger.`);if(this.ob(r))throw new Error("a DebugAdapterDescriptorFactory can only be registered once per a type.");const s=this.h++;return this.j.push({type:r,handle:s,factory:i}),this.u.$registerDebugAdapterDescriptorFactory(r,s),new _e(()=>{this.j=this.j.filter(n=>n.factory!==i),this.u.$unregisterDebugAdapterDescriptorFactory(s)})}registerDebugAdapterTrackerFactory(t,r){if(!r)return new _e(()=>{});const i=this.m++;return this.n.push({type:t,handle:i,factory:r}),new _e(()=>{this.n=this.n.filter(s=>s.factory!==r)})}async $runInTerminal(t,r){return Promise.resolve(void 0)}async $substituteVariables(t,r){let i;const s=await this.xb(t);return s&&(i={uri:s.uri,name:s.name,index:s.index,toResource:()=>{throw new Error("Not implemented")}}),(await this.bb.getResolver()).resolveAnyAsync(i,r)}hb(t,r){if(t instanceof Rl)return new gO(t.implementation)}ib(){}async $startDASession(t,r){const i=this,s=await this.wb(r);return this.tb(this.ob(s.type),s).then(n=>{if(!n)throw new Error(`Couldn't find a debug adapter descriptor for debug type '${s.type}' (extension might have failed to activate)`);const o=this.hb(n,s);if(!o)throw new Error(`Couldn't create a debug adapter for type '${s.type}'.`);const a=o;return this.M.set(t,a),this.sb(s).then(c=>(c&&this.N.set(t,c),a.onMessage(async l=>{if(l.type==="request"&&l.command==="handshake"){const u=l,h={type:"response",seq:0,command:u.command,request_seq:u.seq,success:!0};this.U||(this.U=this.ib());try{if(this.U){const d=await this.U.sign(u.arguments.value);h.body={signature:d},a.sendResponse(h)}else throw new Error("no signer")}catch(d){h.success=!1,h.message=d.message,a.sendResponse(h)}}else c&&c.onDidSendMessage&&c.onDidSendMessage(l),l=KF(l,!0),i.u.$acceptDAMessage(t,l)}),a.onError(l=>{c&&c.onError&&c.onError(l),this.u.$acceptDAError(t,l.name,l.message,l.stack)}),a.onExit(l=>{c&&c.onExit&&c.onExit(l??void 0,void 0),this.u.$acceptDAExit(t,l??void 0,void 0)}),c&&c.onWillStartSession&&c.onWillStartSession(),a.startSession()))})}$sendDAMessage(t,r){r=ZF(r,!1);const i=this.N.get(t);i&&i.onWillReceiveMessage&&i.onWillReceiveMessage(r),this.M.get(t)?.sendMessage(r)}$stopDASession(t){const r=this.N.get(t);this.N.delete(t),r&&r.onWillStopSession&&r.onWillStopSession();const i=this.M.get(t);return this.M.delete(t),i?i.stopSession():Promise.resolve(void 0)}$acceptBreakpointsDelta(t){const r=[],i=[],s=[];if(t.added)for(const n of t.added){const o=n.id;if(o&&!this.H.has(o)){let a;if(n.type==="function")a=new Co(n.functionName,n.enabled,n.condition,n.hitCondition,n.logMessage,n.mode);else if(n.type==="data")a=new nf(n.label,n.dataId,n.canPersist,n.enabled,n.hitCondition,n.condition,n.logMessage,n.mode);else{const c=k.revive(n.uri);a=new $o(new ii(c,new Fe(n.line,n.character)),n.enabled,n.condition,n.hitCondition,n.logMessage,n.mode)}AL(a,o),this.H.set(o,a),r.push(a)}}if(t.removed)for(const n of t.removed){const o=this.H.get(n);o&&(this.H.delete(n),i.push(o))}if(t.changed){for(const n of t.changed)if(n.id){const o=this.H.get(n.id);if(o){if(o instanceof Co&&n.type==="function"){const a=o;a.enabled=n.enabled,a.condition=n.condition,a.hitCondition=n.hitCondition,a.logMessage=n.logMessage,a.functionName=n.functionName}else if(o instanceof $o&&n.type==="source"){const a=o;a.enabled=n.enabled,a.condition=n.condition,a.hitCondition=n.hitCondition,a.logMessage=n.logMessage,a.location=new ii(k.revive(n.uri),new Fe(n.line,n.character))}s.push(o)}}}this.vb(r,i,s)}async $acceptStackFrameFocus(t){let r;if(t){const i=await this.wb(t.sessionId);t.kind==="thread"?r=new I9(i.api,t.threadId):r=new P9(i.api,t.threadId,t.frameId)}this.J=r,this.L.fire(this.J)}$provideDebugConfigurations(t,r,i){return mr(async()=>{const s=this.qb(t);if(!s)throw new Error("no DebugConfigurationProvider found");if(!s.provideDebugConfigurations)throw new Error("DebugConfigurationProvider has no method provideDebugConfigurations");const n=await this.xb(r);return s.provideDebugConfigurations(n,i)}).then(s=>{if(!s)throw new Error("nothing returned from DebugConfigurationProvider.provideDebugConfigurations");return s})}$resolveDebugConfiguration(t,r,i,s){return mr(async()=>{const n=this.qb(t);if(!n)throw new Error("no DebugConfigurationProvider found");if(!n.resolveDebugConfiguration)throw new Error("DebugConfigurationProvider has no method resolveDebugConfiguration");const o=await this.xb(r);return n.resolveDebugConfiguration(o,i,s)})}$resolveDebugConfigurationWithSubstitutedVariables(t,r,i,s){return mr(async()=>{const n=this.qb(t);if(!n)throw new Error("no DebugConfigurationProvider found");if(!n.resolveDebugConfigurationWithSubstitutedVariables)throw new Error("DebugConfigurationProvider has no method resolveDebugConfigurationWithSubstitutedVariables");const o=await this.xb(r);return n.resolveDebugConfigurationWithSubstitutedVariables(o,i,s)})}async $provideDebugAdapter(t,r){const i=this.pb(t);if(!i)return Promise.reject(new Error("no adapter descriptor factory found for handle"));const s=await this.wb(r);return this.tb(i,s).then(n=>{if(!n)throw new Error(`Couldn't find a debug adapter descriptor for debug type '${s.type}'`);return this.jb(n)})}async $acceptDebugSessionStarted(t){const r=await this.wb(t);this.y.fire(r.api)}async $acceptDebugSessionTerminated(t){const r=await this.wb(t);r&&(this.z.fire(r.api),this.w.delete(r.id))}async $acceptDebugSessionActiveChanged(t){this.D=t?await this.wb(t):void 0,this.C.fire(this.D?.api)}async $acceptDebugSessionNameChanged(t,r){(await this.wb(t))?._acceptNameChanged(r)}async $acceptDebugSessionCustomEvent(t,r){const s={session:(await this.wb(t)).api,event:r.event,body:r.body};this.F.fire(s)}jb(t){if(t instanceof Oa)return this.kb(t);if(t instanceof Ma)return this.lb(t);if(t instanceof Tl)return this.mb(t);if(t instanceof Rl)return this.nb(t);throw new Error("convertToDto unexpected type")}kb(t){return{type:"executable",command:t.command,args:t.args,options:t.options}}lb(t){return{type:"server",port:t.port,host:t.host}}mb(t){return{type:"pipeServer",path:t.path}}nb(t){return{type:"implementation"}}ob(t){const r=this.j.filter(i=>i.type===t);if(r.length>0)return r[0].factory}pb(t){const r=this.j.filter(i=>i.handle===t);if(r.length>0)return r[0].factory}qb(t){const r=this.g.filter(i=>i.handle===t);if(r.length>0)return r[0].provider}rb(t,r){if(t.contributes){const i=t.contributes.debuggers;if(i&&i.length>0){for(const s of i)if(s.label&&s.type&&s.type===r)return!0}}return!1}sb(t){const i=t.configuration.type,s=this.n.filter(n=>n.type===i||n.type==="*").map(n=>mr(()=>n.factory.createDebugAdapterTracker(t.api)).then(o=>o,o=>null));return Promise.race([Promise.all(s).then(n=>{const o=Rt(n);if(o.length>0)return new pO(o)}),new Promise(n=>setTimeout(()=>n(void 0),1e3))]).catch(n=>{})}async tb(t,r){const i=r.configuration.debugServer;if(typeof i=="number")return Promise.resolve(new Ma(i));if(t){const n=await this.Z.getExtensionRegistry();return mr(()=>t.createDebugAdapterDescriptor(r.api,this.ub(r,n))).then(o=>{if(o)return o})}const s=await this.Z.getExtensionRegistry();return Promise.resolve(this.ub(r,s))}ub(t,r){}vb(t,r,i){(t.length>0||r.length>0||i.length>0)&&this.I.fire(Object.freeze({added:t,removed:r,changed:i}))}async wb(t){if(t)if(typeof t=="string"){const r=this.w.get(t);if(r)return r}else{let r=this.w.get(t.id);if(!r){const i=await this.xb(t.folderUri),s=t.parent?this.w.get(t.parent):void 0;r=new dO(this.u,t.id,t.type,t.name,i,t.configuration,s?.api),this.w.set(r.id,r),this.u.$sessionCached(r.id)}return r}throw new Error("cannot find session")}xb(t){if(t){const r=k.revive(t);return this.Y.resolveWorkspaceFolder(r)}return Promise.resolve(void 0)}yb(t,r){return`${t}\0${r}`}zb(t,r){if(r){if("title"in r&&"command"in r)return{type:0};if("treeId"in r)return{type:1,id:`${t}\0${r.treeId}`};throw new Error("Unsupported debug visualization type")}}Ab(t){const r=this.Bb(t);let i,s;return"id"in r?s=or.asClassName(r):i=r,{iconPath:i,iconClass:s}}Bb(t){if(t instanceof vr)return{id:t.id};const r=typeof t=="object"&&"dark"in t?t.dark:t,i=typeof t=="object"&&"light"in t?t.light:t;return{dark:typeof r=="string"?k.file(r):r,light:typeof i=="string"?k.file(i):i}}};Hp=__decorate([__param(0,Ue),__param(1,Bi),__param(2,Js),__param(3,pi),__param(4,lc),__param(5,uc),__param(6,zi),__param(7,Ru)],Hp);var dO=class{constructor(e,t,r,i,s,n,o){this.f=e,this.g=t,this.h=r,this.j=i,this.k=s,this.l=n,this.m=o}get api(){const e=this;return this.d??=Object.freeze({id:e.g,type:e.h,get name(){return e.j},set name(t){e.j=t,e.f.$setDebugSessionName(e.g,t)},parentSession:e.m,workspaceFolder:e.k,configuration:e.l,customRequest(t,r){return e.f.$customDebugAdapterRequest(e.g,t,r)},getDebugProtocolBreakpoint(t){return e.f.$getDebugProtocolBreakpoint(e.g,t.id)}})}get id(){return this.g}get type(){return this.h}_acceptNameChanged(e){this.j=e}get configuration(){return this.l}},fO=class{constructor(e){this.value=Object.freeze({append(t){e.$appendDebugConsole(t)},appendLine(t){this.append(t+`
`)}})}},pO=class{constructor(e){this.d=e}onWillStartSession(){this.d.forEach(e=>e.onWillStartSession?e.onWillStartSession():void 0)}onWillReceiveMessage(e){this.d.forEach(t=>t.onWillReceiveMessage?t.onWillReceiveMessage(e):void 0)}onDidSendMessage(e){this.d.forEach(t=>t.onDidSendMessage?t.onDidSendMessage(e):void 0)}onWillStopSession(){this.d.forEach(e=>e.onWillStopSession?e.onWillStopSession():void 0)}onError(e){this.d.forEach(t=>t.onError?t.onError(e):void 0)}onExit(e,t){this.d.forEach(r=>r.onExit?r.onExit(e,t):void 0)}},gO=class extends Y8{constructor(e){super(),this.h=e,e.onDidSendMessage(t=>{this.acceptMessage(t)})}startSession(){return Promise.resolve(void 0)}sendMessage(e){this.h.handleMessage(e)}stopSession(){return this.h.dispose(),Promise.resolve(void 0)}},Ew=class extends Hp{constructor(t,r,i,s,n,o,a,c){super(t,r,i,s,n,o,a,c)}};Ew=__decorate([__param(0,Ue),__param(1,Bi),__param(2,Js),__param(3,pi),__param(4,lc),__param(5,uc),__param(6,zi),__param(7,Ru)],Ew);function mO(e){return"uri"in e&&"ranges"in e&&"preview"in e}function vO(e){return e.folderOptions.map(t=>({folder:t.folder,excludes:t.excludes.map(r=>typeof r=="string"?r:r.pattern),includes:t.includes,useGlobalIgnoreFiles:t.useIgnoreFiles.global,useIgnoreFiles:t.useIgnoreFiles.local,useParentIgnoreFiles:t.useIgnoreFiles.parent,followSymlinks:t.followSymlinks,maxResults:e.maxResults,session:e.session}))}var oE=class{constructor(e){this.a=e}provideFileSearchResults(e,t,r){return(async()=>{const s=vO(t);return Promise.all(s.map(n=>this.a.provideFileSearchResults({pattern:e},n,r)))})().then(s=>Rt(s).flat())}};function aE(e){return e.folderOptions.map(t=>({folder:t.folder,excludes:t.excludes.map(r=>typeof r=="string"?r:r.pattern),includes:t.includes,useGlobalIgnoreFiles:t.useIgnoreFiles.global,useIgnoreFiles:t.useIgnoreFiles.local,useParentIgnoreFiles:t.useIgnoreFiles.parent,followSymlinks:t.followSymlinks,maxResults:e.maxResults,previewOptions:cE(e.previewOptions),maxFileSize:e.maxFileSize,encoding:t.encoding,afterContext:e.surroundingContext,beforeContext:e.surroundingContext}))}function cE(e){return{matchLines:e?.matchLines??h0.matchLines,charsPerLine:e?.charsPerLine??h0.charsPerLine}}function lE(e){if(mO(e)){const t=Ei(e.ranges).map((r,i)=>{const n=Ei(e.preview.matches)[i];return{sourceRange:r,previewRange:n}});return new Vs(e.uri,t,e.preview.text)}else return new pp(e.uri,e.text,e.lineNumber)}var wO=class{constructor(e){this.a=e}provideTextSearchResults(e,t,r,i){const s=a=>{uE(a)&&r.report(lE(a))};return(async()=>Rt(await Promise.all(aE(t).map(a=>this.a.provideTextSearchResults(e,a,{report:c=>s(c)},i)))).reduce((a,c)=>({limitHit:a.limitHit||c.limitHit}),{limitHit:!1}))().then(a=>({limitHit:a.limitHit,message:Rt(Ei(a.message))}))}},bO=class{constructor(e){this.a=e,this.name=this.a.name}provideAITextSearchResults(e,t,r,i){const s=a=>{uE(a)&&r.report(lE(a))};return(async()=>Rt(await Promise.all(aE(t).map(a=>this.a.provideAITextSearchResults(e,a,{report:c=>s(c)},i)))).reduce((a,c)=>({limitHit:a.limitHit||c.limitHit}),{limitHit:!1}))().then(a=>({limitHit:a.limitHit,message:Rt(Ei(a.message))}))}};function uE(e){if(yO(e)){if(Array.isArray(e.ranges)){if(!Array.isArray(e.preview.matches))return console.warn("INVALID - A text search provider match's`ranges` and`matches` properties must have the same type."),!1;if(e.preview.matches.length!==e.ranges.length)return console.warn("INVALID - A text search provider match's`ranges` and`matches` properties must have the same length."),!1}else if(Array.isArray(e.preview.matches))return console.warn("INVALID - A text search provider match's`ranges` and`matches` properties must have the same length."),!1}return!0}function yO(e){return!!e.preview}var kO=class{constructor(e,t,r){this.l=e,this.o=t,this.p=r,this.f=!1,this.g=0,this.h=!1,this.a=e.filePattern,this.b=e.includePattern&&Ni(e.includePattern),this.c=e.maxResults||void 0,this.d=e.exists,this.j=new Set,this.k=e.excludePattern&&Ni(e.excludePattern)}cancel(){this.h=!0,this.j.forEach(e=>e.cancel()),this.j=new Set}search(e){const t=this.l.folderQueries||[];return new Promise((r,i)=>{const s=n=>{this.g++,e(n)};if(this.h)return r({limitHit:this.f});this.l.extraFileResources&&this.l.extraFileResources.forEach(n=>{const o=n.toString(),a=St(o);this.k&&this.k(o,a)||this.w(s,{base:n,basename:a})}),this.q(t,s).then(n=>{r({limitHit:this.f,stats:n||void 0})},n=>{i(new Error(yn(n)))})})}async q(e,t){const r=new wt,i=e.map(c=>this.r(c)),s=this.o instanceof oE?this.p?.tokenSource.token:this.p?.obj,n={folderOptions:i,maxResults:this.l.maxResults??mp,session:s},o=Ls.forUris();e.forEach(c=>{const l=new ox(this.l,c),u=!l.hasSiblingExcludeClauses();o.set(c.folder,{queryTester:l,noSiblingsClauses:u,folder:c.folder,tree:this.s()})});let a;try{this.j.add(r),a=Hr.create();const c=await this.o.provideFileSearchResults(this.l.filePattern||"",n,r.token),l=a.elapsed(),u=Hr.create();return this.h&&!this.f||(c&&c.forEach(h=>{const d=o.findSubstr(h),f=He.relative(d.folder.path,h.path);if(d.noSiblingsClauses){const g=St(h.path);this.w(t,{base:d.folder,relativePath:f,basename:g});return}this.u(d.tree,d.folder,f,t)}),this.h&&!this.f)?null:(o.forEach(h=>{this.v(h.tree,h.queryTester,t)}),{providerTime:l,postProcessTime:u.elapsed()})}finally{r.dispose(),this.j.delete(r)}}r(e){const t=rc(this.l.includePattern,e.includePattern);let r=e.excludePattern?.map(s=>({folder:s.folder,patterns:rc(this.l.excludePattern,s.pattern)}));r?.length||(r=[{folder:void 0,patterns:rc(this.l.excludePattern,void 0)}]);const i=cx(r);return{folder:e.folder,excludes:i,includes:t,useIgnoreFiles:{local:!e.disregardIgnoreFiles,parent:!e.disregardParentIgnoreFiles,global:!e.disregardGlobalIgnoreFiles},followSymlinks:!e.ignoreSymlinks}}s(){const e={rootEntries:[],pathToEntries:Object.create(null)};return e.pathToEntries["."]=e.rootEntries,e}u({pathToEntries:e},t,r,i){if(r===this.a){const n=St(this.a);this.w(i,{base:t,relativePath:this.a,basename:n})}function s(n){const o=St(n),a=Sr(n);let c=e[a];c||(c=e[a]=[],s(a)),c.push({base:t,relativePath:n,basename:o})}s(r)}v({rootEntries:e,pathToEntries:t},r,i){const s=this,n=this.a;function o(a){const c=u0(()=>a.map(l=>l.basename));for(let l=0,u=a.length;l<u;l++){const h=a[l],{relativePath:d,basename:f}=h;if(r.matchesExcludesSync(d,f,n!==f?c:void 0))continue;const g=t[d];if(g)o(g);else{if(d===n)continue;s.w(i,h)}if(s.f)break}}o(e)}w(e,t){(!this.b||t.relativePath&&this.b(t.relativePath,t.basename))&&((this.d||this.c&&this.g>=this.c)&&(this.f=!0,this.cancel()),this.f||e(t))}},xO=class{constructor(){this.a=new Object,this.tokenSource=new wt}get obj(){if(this.a)return this.a;throw new Error("Session object has been dereferenced.")}cancel(){this.tokenSource.cancel(),this.a=void 0}},EO=class z3{constructor(){this.b=new Map}static{this.a=512}fileSearch(t,r,i,s){const n=this.c(t.cacheKey),o=new kO(t,r,n);let a=0;const c=l=>{a+=l.length,i(l.map(u=>this.d(u)))};return this.f(o,z3.a,c,s).then(l=>({limitHit:l.limitHit,stats:l.stats?{fromCache:!1,type:"fileSearchProvider",resultCount:a,detailStats:l.stats}:void 0,messages:[]}))}clearCache(t){this.b.get(t)?.cancel(),this.b.delete(t)}c(t){if(t)return this.b.has(t)||this.b.set(t,new xO),this.b.get(t)}d(t){return t.relativePath?{resource:Mt(t.base,t.relativePath)}:{resource:t.base}}f(t,r,i,s){const n=s.onCancellationRequested(()=>{t.cancel()}),o=c=>{c&&(a.push(c),r>0&&a.length>=r&&(i(a),a=[]))};let a=[];return t.search(o).then(c=>(a.length&&i(a),n.dispose(),c),c=>(a.length&&i(a),n.dispose(),Promise.reject(c)))}},Sw=class{constructor(e,t,r){this.f=e,this.g=t,this.h=r,this.b=null,this.c=!1,this.d=0}get j(){return this.f.query}search(e,t){const r=this.j.folderQueries||[],i=new wt(t);return new Promise((s,n)=>{this.b=new $O(e);let o=!1;const a=(c,l)=>{if(!o&&!this.c){const u=this.l(c);c instanceof Vs&&typeof this.j.maxResults=="number"&&this.d+u>this.j.maxResults&&(this.c=!0,o=!0,i.cancel(),c=this.m(c,this.j.maxResults-this.d));const h=this.l(c);this.d+=h;const d=c instanceof Vs;(h>0||!d)&&this.b.add(c,l)}};this.n(r,a,i.token).then(c=>{i.dispose(),this.b.flush(),s({limitHit:this.c||c?.limitHit,messages:this.k(c),stats:{type:this.h}})},c=>{i.dispose();const l=yn(c);n(new Error(l))})})}k(e){return e?.message?Array.isArray(e.message)?e.message:[e.message]:[]}l(e){return e instanceof Vs?Array.isArray(e.ranges)?e.ranges.length:1:0}m(e,t){return new Vs(e.uri,e.ranges.slice(0,t),e.previewText)}async n(e,t,r){const i=Ls.forUris(()=>!0);e.forEach((l,u)=>{const h=new ox(this.j,l);i.set(l.folder,{queryTester:h,folder:l.folder,folderIdx:u})});const s=[],n={report:l=>{if(l.uri===void 0)throw Error("Text search result URI is undefined. Please check provider implementation.");const u=i.findSubstr(l.uri),h=u.folder.scheme===Q.file?YL(()=>this.g.readdir(Th(l.uri))):void 0,d=A4(u.folder,l.uri);if(d){const f=u.queryTester.includedInQuery(d,St(d),h);mn(f)?s.push(f.then(g=>{g&&t(l,u.folderIdx)})):f&&t(l,u.folderIdx)}}},a={folderOptions:e.map(l=>this.o(l)),maxFileSize:this.j.maxFileSize,maxResults:this.j.maxResults??mp,previewOptions:this.j.previewOptions??h0,surroundingContext:this.j.surroundingContext??0};"usePCRE2"in this.j&&(a.usePCRE2=this.j.usePCRE2);let c;return this.f.query.type===3?c=await this.f.provider.provideAITextSearchResults(this.f.query.contentPattern,a,n,r):c=await this.f.provider.provideTextSearchResults(SO(this.f.query.contentPattern),a,n,r),s.length&&await Promise.all(s),c}o(e){const t=rc(this.j.includePattern,e.includePattern);let r=e.excludePattern?.map(n=>({folder:n.folder,patterns:rc(this.j.excludePattern,n.pattern)}));(!r||r.length===0)&&(r=[{folder:void 0,patterns:rc(this.j.excludePattern,void 0)}]);const i=cx(r);return{folder:k.from(e.folder),excludes:i,includes:t,useIgnoreFiles:{local:!e.disregardIgnoreFiles,parent:!e.disregardParentIgnoreFiles,global:!e.disregardGlobalIgnoreFiles},followSymlinks:!e.ignoreSymlinks,encoding:(e.fileEncoding&&this.g.toCanonicalName(e.fileEncoding))??""}}};function SO(e){return{isCaseSensitive:e.isCaseSensitive||!1,isRegExp:e.isRegExp||!1,isWordMatch:e.isWordMatch||!1,isMultiline:e.isMultiline||!1,pattern:e.pattern}}var $O=class{constructor(e){this.g=e,this.c=-1,this.f=null,this.b=new PO(512,t=>this.j(t))}add(e,t){this.f&&(this.c!==t||!D4(this.d,e.uri))&&(this.h(),this.f=null),this.f||(this.c=t,this.f={resource:e.uri,results:[]}),this.f.results.push(CO(e))}h(){const e=this.f&&this.f.results?this.f.results.length:0;this.b.addItem(this.f,e)}flush(){this.h(),this.b.flush()}j(e){this.g(e)}};function CO(e){return e instanceof Vs?{previewText:e.previewText,rangeLocations:e.ranges.map(t=>({preview:{startLineNumber:t.previewRange.start.line,startColumn:t.previewRange.start.character,endLineNumber:t.previewRange.end.line,endColumn:t.previewRange.end.character},source:{startLineNumber:t.sourceRange.start.line,startColumn:t.sourceRange.start.character,endLineNumber:t.sourceRange.end.line,endColumn:t.sourceRange.end.character}}))}:{text:e.text,lineNumber:e.lineNumber}}var PO=class dy{static{this.b=4e3}static{this.c=50}constructor(t,r){this.j=t,this.k=r,this.d=0,this.f=[],this.g=0}addItem(t,r){t&&this.l(t,r)}addItems(t,r){t&&this.m(t,r)}l(t,r){this.f.push(t),this.g+=r,this.n()}m(t,r){this.f=this.f.concat(t),this.g+=r,this.n()}n(){this.d<dy.c?this.flush():this.g>=this.j?this.flush():this.h||(this.h=setTimeout(()=>{this.flush()},dy.b))}flush(){this.g&&(this.d+=this.g,this.k(this.f),this.f=[],this.g=0,this.h&&(clearTimeout(this.h),this.h=0))}},$w=X("IExtHostSearch"),Bp=class{constructor(t,r,i){this.o=t,this.q=r,this.s=i,this.c=this.o.getProxy(K.MainThreadSearch),this.e=0,this.g=new Map,this.h=new Set,this.i=new Map,this.j=new Set,this.k=new Map,this.l=new Set,this.n=new EO}t(t){return this.q.transformOutgoingScheme(t)}registerTextSearchProviderOld(t,r){if(this.h.has(t))throw new Error(`a text search provider for the scheme '${t}' is already registered`);this.h.add(t);const i=this.e++;return this.g.set(i,new wO(r)),this.c.$registerTextSearchProvider(i,this.t(t)),me(()=>{this.h.delete(t),this.g.delete(i),this.c.$unregisterProvider(i)})}registerTextSearchProvider(t,r){if(this.h.has(t))throw new Error(`a text search provider for the scheme '${t}' is already registered`);this.h.add(t);const i=this.e++;return this.g.set(i,r),this.c.$registerTextSearchProvider(i,this.t(t)),me(()=>{this.h.delete(t),this.g.delete(i),this.c.$unregisterProvider(i)})}registerAITextSearchProviderOld(t,r){if(this.j.has(t))throw new Error(`an AI text search provider for the scheme '${t}'is already registered`);this.j.add(t);const i=this.e++;return this.i.set(i,new bO(r)),this.c.$registerAITextSearchProvider(i,this.t(t)),me(()=>{this.j.delete(t),this.i.delete(i),this.c.$unregisterProvider(i)})}registerAITextSearchProvider(t,r){if(this.j.has(t))throw new Error(`an AI text search provider for the scheme '${t}'is already registered`);this.j.add(t);const i=this.e++;return this.i.set(i,r),this.c.$registerAITextSearchProvider(i,this.t(t)),me(()=>{this.j.delete(t),this.i.delete(i),this.c.$unregisterProvider(i)})}registerFileSearchProviderOld(t,r){if(this.l.has(t))throw new Error(`a file search provider for the scheme '${t}' is already registered`);this.l.add(t);const i=this.e++;return this.k.set(i,new oE(r)),this.c.$registerFileSearchProvider(i,this.t(t)),me(()=>{this.l.delete(t),this.k.delete(i),this.c.$unregisterProvider(i)})}registerFileSearchProvider(t,r){if(this.l.has(t))throw new Error(`a file search provider for the scheme '${t}' is already registered`);this.l.add(t);const i=this.e++;return this.k.set(i,r),this.c.$registerFileSearchProvider(i,this.t(t)),me(()=>{this.l.delete(t),this.k.delete(i),this.c.$unregisterProvider(i)})}$provideFileSearchResults(t,r,i,s){const n=zp(i),o=this.k.get(t);if(o)return this.n.fileSearch(n,o,a=>{this.c.$handleFileMatch(t,r,a.map(c=>c.resource))},s);throw new Error("unknown provider: "+t)}async doInternalFileSearchWithCustomCallback(t,r,i){return{messages:[]}}$clearCache(t){return this.n.clearCache(t),Promise.resolve(void 0)}$provideTextSearchResults(t,r,i,s){const n=this.g.get(t);if(!n||!n.provideTextSearchResults)throw new Error(`Unknown Text Search Provider ${t}`);const o=zp(i);return this.v(o,n).search(c=>this.c.$handleTextMatch(t,r,c),s)}$provideAITextSearchResults(t,r,i,s){const n=this.i.get(t);if(!n||!n.provideAITextSearchResults)throw new Error(`Unknown AI Text Search Provider ${t}`);const o=zp(i);return this.w(o,n).search(c=>this.c.$handleTextMatch(t,r,c),s)}$enableExtensionHostSearch(){}async $getAIName(t){const r=this.i.get(t);if(!(!r||!r.provideAITextSearchResults))return r.name??"AI"}v(t,r){return new Sw({query:t,provider:r},{readdir:i=>Promise.resolve([]),toCanonicalName:i=>i},"textSearchProvider")}w(t,r){return new Sw({query:t,provider:r},{readdir:i=>Promise.resolve([]),toCanonicalName:i=>i},"aiTextSearchProvider")}};Bp=__decorate([__param(0,Ue),__param(1,el),__param(2,Ne)],Bp);function zp(e){return{...e,folderQueries:e.folderQueries&&e.folderQueries.map(IO),extraFileResources:e.extraFileResources&&e.extraFileResources.map(t=>k.revive(t))}}function IO(e){return dr(e)}var Cw,Pw=class{static{Cw=this}static{this.a={focused:!0,active:!0}}getState(){const t=this.d;return{get focused(){return t.focused},get active(){return t.active}}}constructor(t){this.c=new T,this.onDidChangeWindowState=this.c.event,this.d=Cw.a,this.b=t.getProxy(K.MainThreadWindow),this.b.$getInitialState().then(({isFocused:r,isActive:i})=>{this.onDidChangeWindowProperty("focused",r),this.onDidChangeWindowProperty("active",i)})}$onDidChangeWindowFocus(t){this.onDidChangeWindowProperty("focused",t)}$onDidChangeWindowActive(t){this.onDidChangeWindowProperty("active",t)}onDidChangeWindowProperty(t,r){r!==this.d[t]&&(this.d={...this.d,[t]:r},this.c.fire(this.d))}openUri(t,r){let i;if(typeof t=="string"){i=t;try{t=k.parse(t)}catch{return Promise.reject(`Invalid uri - '${t}'`)}}return $h(t.scheme)?Promise.reject("Invalid scheme - cannot be empty"):t.scheme===Q.command?Promise.reject(`Invalid scheme '${t.scheme}'`):this.b.$openUri(t,i,r)}async asExternalUri(t,r){if($h(t.scheme))return Promise.reject("Invalid scheme - cannot be empty");const i=await this.b.$asExternalUri(t,r);return k.from(i)}};Pw=Cw=__decorate([__param(0,Ue)],Pw);var hE=X("IExtHostWindow"),_p=class extends AA{constructor(t,r){super(r.logLevel,r.logsLocation,r.loggers.map(i=>dr(i))),this.r=t.getProxy(K.MainThreadLogger)}$setLogLevel(t,r){r?this.setLogLevel(k.revive(r),t):this.setLogLevel(t)}setVisibility(t,r){super.setVisibility(t,r),this.r.$setVisibility(t,r)}s(t,r,i){return new DO(this.r,t,r,i)}};_p=__decorate([__param(0,Ue),__param(1,er)],_p);var DO=class extends qm{constructor(e,t,r,i){super(i?.logLevel==="always"),this.r=e,this.s=t,this.m=!1,this.n=[],this.setLevel(r),this.r.$createLogger(t,i).then(()=>{this.u(this.n),this.m=!0})}g(e,t){const r=[[e,t]];this.m?this.u(r):this.n.push(...r)}u(e){this.r.$log(this.s,e)}flush(){this.r.$flush(this.s)}},Iw=X("IExtHostTerminalShellIntegration"),Dw=class extends ae{constructor(t,r){super(),this.h=r,this.b=new Map,this.c=new T,this.onDidChangeTerminalShellIntegration=this.c.event,this.f=new T,this.onDidStartTerminalShellExecution=this.f.event,this.g=new T,this.onDidEndTerminalShellExecution=this.g.event,this.a=t.getProxy(K.MainThreadTerminalShellIntegration),this.B(me(()=>{for(const[i,s]of this.b)s.dispose();this.b.clear()}))}$shellIntegrationChange(t){const r=this.h.getTerminalById(t);if(!r)return;const i=r.value;let s=this.b.get(t);s||(s=new AO(r.value,this.f),this.b.set(t,s),s.store.add(r.onWillDispose(()=>this.b.get(t)?.dispose())),s.store.add(s.onDidRequestShellExecution(n=>this.a.$executeCommand(t,n))),s.store.add(s.onDidRequestEndExecution(n=>this.g.fire(n))),s.store.add(s.onDidRequestChangeShellIntegration(n=>this.c.fire(n))),r.shellIntegration=s.value),this.c.fire({terminal:i,shellIntegration:s.value})}$shellExecutionStart(t,r,i,s,n){this.b.has(t)||this.$shellIntegrationChange(t);const o={value:r,confidence:i,isTrusted:s};this.b.get(t)?.startShellExecution(o,k.revive(n))}$shellExecutionEnd(t,r,i,s,n){const o={value:r,confidence:i,isTrusted:s};this.b.get(t)?.endShellExecution(o,n)}$shellExecutionData(t,r){this.b.get(t)?.emitData(r)}$cwdChange(t,r){this.b.get(t)?.setCwd(k.revive(r))}$closeTerminal(t){this.b.get(t)?.dispose(),this.b.delete(t)}};Dw=__decorate([__param(0,Ue),__param(1,Gs)],Dw);var AO=class extends ae{get currentExecution(){return this.a}constructor(e,t){super(),this.j=e,this.m=t,this.b=!1,this.store=this.B(new be),this.f=this.B(new T),this.onDidRequestChangeShellIntegration=this.f.event,this.g=this.B(new T),this.onDidRequestShellExecution=this.g.event,this.h=this.B(new T),this.onDidRequestEndExecution=this.h.event;const r=this;this.value={get cwd(){return r.c},executeCommand(i,s){let n=i;s&&(n+=` "${s.map(c=>`${c.replaceAll('"','\\"')}`).join('" "')}"`),r.g.fire(n);const o={value:n,confidence:Zd.High,isTrusted:!0},a=r.startShellExecution(o,r.c,!0).value;return r.b=!0,a}}}startShellExecution(e,t,r){if(this.b&&this.a)this.b=!1;else{this.a&&(this.a.endExecution(void 0),this.h.fire({terminal:this.j,shellIntegration:this.value,execution:this.a.value,exitCode:void 0}));const i=this.a=new TO(e,t??this.c);r?queueMicrotask(()=>this.m.fire({terminal:this.j,shellIntegration:this.value,execution:i.value})):this.m.fire({terminal:this.j,shellIntegration:this.value,execution:this.a.value})}return this.a}emitData(e){this.currentExecution?.emitData(e)}endShellExecution(e,t){this.a&&(this.a.endExecution(e),this.h.fire({terminal:this.j,shellIntegration:this.value,execution:this.a.value,exitCode:t}),this.a=void 0)}setCwd(e){let t=!1;k.isUri(this.c)?t=!k.isUri(e)||this.c.toString()!==e.toString():this.c!==e&&(t=!0),t&&(this.c=e,this.f.fire({terminal:this.j,shellIntegration:this.value}))}},TO=class{constructor(e,t){this.c=e,this.cwd=t,this.b=!1;const r=this;this.value={get commandLine(){return r.c},get cwd(){return r.cwd},read(){return r.d()}}}d(){if(!this.a){if(this.b)return _c.EMPTY;this.a=new RO}return this.a.createIterable()}emitData(e){this.a?.emitData(e)}endExecution(e){e&&(this.c=e),this.a?.endExecution(),this.a=void 0,this.b=!0}},RO=class extends ae{constructor(){super(...arguments),this.b=[]}createIterable(){this.a||(this.a=new ui);const e=this.a;return new _c(async r=>{this.b.push(r),await e.wait()})}emitData(e){for(const t of this.b)t.emitOne(e)}endExecution(){this.a?.open(),this.a=void 0}};Be(G0,q0,1),Be(ca,_p,1),Be(Cu,ow,1),Be(zi,T0,0),Be(F0,O0,0),Be(j0,U0,0),Be(pi,w0,0),Be(wu,S0,0),Be(Ru,yw,0),Be(xw,Ew,0),Be(T8,iw,0),Be(Mo,nw,0),Be(J0,Q0,0),Be(ua,YA,0),Be(A8,rw,1),Be($w,Bp,0),Be(E0,Nx,0),Be(ww,vw,0),Be(Gs,N0,0),Be(Iw,Dw,0),Be(Ep,Sp,0),Be(hE,Pw,0),Be(Bi,p0,0),Be(V0,x8,0),Be($p,A0,0),Be(lc,bw,0),Be(uc,Up,0);var Aw=class extends Cp{constructor(t,r){super(!0,t,r)}createTerminal(t,r,i){return this.createTerminalFromOptions({name:t,shellPath:r,shellArgs:i})}createTerminalFromOptions(t,r){const i=new R0(this.a,ir(),t,t.name);return this.f.push(i),i.create(t,this.R(t,r)),i.value}};Aw=__decorate([__param(0,zi),__param(1,Ue)],Aw);import{promises as dE}from"fs";var fE;(function(e){e[e.stdout=0]="stdout",e[e.stderr=1]="stderr"})(fE||(fE={}));var pE;(function(e){e[e.Success=0]="Success",e[e.Unknown=1]="Unknown",e[e.AccessDenied=2]="AccessDenied",e[e.ProcessNotFound=3]="ProcessNotFound"})(pE||(pE={}));function LO(e,...t){const r=t.reduce((n,o)=>(n[o]=!0,n),{}),i=[/^ELECTRON_.+$/,/^VSCODE_(?!(PORTABLE|SHELL_LOGIN|ENV_REPLACE|ENV_APPEND|ENV_PREPEND)).+$/,/^SNAP(|_.*)$/,/^GDK_PIXBUF_.+$/];Object.keys(e).filter(n=>!r[n]).forEach(n=>{for(let o=0;o<i.length;o++)if(n.search(i[o])!==-1){delete e[n];break}})}function NO(e){e&&(delete e.DEBUG,Ot&&delete e.LD_PRELOAD)}function FO(e=Kn){return e.comspec||"cmd.exe"}function OO(e){let t=[],r=!1;const i=function(s){if(r){t.push(s);return}(!e.send(s,o=>{if(o&&console.error(o),r=!1,t.length>0){const a=t.slice(0);t=[],a.forEach(c=>i(c))}})||at)&&(r=!0)};return{send:i}}var Nu;(function(e){async function t(r,i,s){if(Ki(r))return r;if(i===void 0&&(i=Zn()),Sr(r)!=="."||(s===void 0&&Me(Kn.PATH)&&(s=Kn.PATH.split(Xy)),s===void 0||s.length===0))return bt(i,r);async function o(a){if(await gt.exists(a)){let c;try{c=await dE.stat(a)}catch(l){l.message.startsWith("EACCES")&&(c=await dE.lstat(a))}return c?!c.isDirectory():!1}return!1}for(const a of s){let c;if(Ki(a)?c=bt(a,r):c=bt(i,a,r),await o(c))return c;let l=c+".com";if(await o(l)||(l=c+".exe",await o(l)))return l}return bt(i,r)}e.findExecutable=t})(Nu||(Nu={}));import{homedir as MO}from"os";var Tw=class extends jp{constructor(t,r,i,s,n,o,a,c,l){super(t,r,i,s,n,o,a,c),this.C=i,this.D=l,r.remote.isRemote&&r.remote.authority?this.registerTaskSystem(Q.vscodeRemote,{scheme:Q.vscodeRemote,authority:r.remote.authority,platform:process.platform}):this.registerTaskSystem(Q.file,{scheme:Q.file,authority:"",platform:process.platform}),this.a.$registerSupportedExecutions(!0,!0,!0)}async executeTask(t,r){const i=r;if(!r.execution&&i._id===void 0)throw new Error("Tasks to execute must include an execution");if(i._id!==void 0){const s=fw.from(i,this.C),n=await this.a.$getTaskExecution(s);if(n.task===void 0)throw new Error("Task from execution DTO is undefined");const o=await this.z(n,r);return this.a.$executeTask(s).catch(()=>{}),o}else{const s=fs.from(r,t);if(s===void 0)return Promise.reject(new Error("Task is not valid"));_i.is(s.execution)&&await this.y(s,r,!1);const n=await this.z(await this.a.$getTaskExecution(s),r);return this.a.$executeTask(s).catch(()=>{}),n}}v(t,r,i,s){const n=[];if(s)for(const o of s){this.A(o,i),(!o.definition||!t[o.definition.type])&&this.f.warn(`The task [${o.source}, ${o.name}] uses an undefined task type. The task will be ignored in the future.`);const a=fs.from(o,i.extension);a&&(n.push(a),_i.is(a.execution)&&r.push(this.y(a,o,!0)))}return{tasks:n,extension:i.extension}}async w(t){return t}async G(t){let r=t&&t.length>0?t[0]:void 0;if(!r){const i=k.file(MO());r=new Qm({uri:i,name:es(i),index:0})}return{uri:r.uri,name:r.name,index:r.index,toResource:()=>{throw new Error("Not implemented")}}}async $resolveVariables(t,r){const i=k.revive(t),s={process:void 0,variables:Object.create(null)},n=await this.b.resolveWorkspaceFolder(i),o=await this.b.getWorkspaceFolders2()??[],a=await this.D.getResolver(),c=n?{uri:n.uri,name:n.name,index:n.index,toResource:()=>{throw new Error("Not implemented")}}:await this.G(o);for(const l of r.variables)s.variables[l]=await a.resolveAsync(c,l);if(r.process!==void 0){let l;if(r.process.path!==void 0){l=r.process.path.split(Xy);for(let u=0;u<l.length;u++)l[u]=await a.resolveAsync(c,l[u])}s.process=await Nu.findExecutable(await a.resolveAsync(c,r.process.name),r.process.cwd!==void 0?await a.resolveAsync(c,r.process.cwd):void 0,l)}return s}async $jsonTasksSupported(){return!0}async $findExecutable(t,r,i){return Nu.findExecutable(t,r,i)}};Tw=__decorate([__param(0,Ue),__param(1,er),__param(2,Bi),__param(3,Mo),__param(4,pi),__param(5,Gs),__param(6,Ne),__param(7,Cu),__param(8,uc)],Tw);import*as hc from"child_process";var sG=X("externalTerminal"),Wp="Terminal.app",gE=p(1867,null),Rw=class{async getDefaultTerminalForPlatforms(){return{windows:Lw.getDefaultTerminalWindows(),linux:await mE.getDefaultTerminalLinuxReady(),osx:"xterm"}}},Lw=class sn extends Rw{static{this.b="cmd.exe"}openTerminal(t,r){return this.spawnTerminal(hc,t,FO(),r)}spawnTerminal(t,r,i,s){const n=r.windowsExec||sn.getDefaultTerminalWindows();s&&s[1]===":"&&(s=s[0].toUpperCase()+s.substr(1));const o=St(n,".exe").toLowerCase();if(o==="cmder")return t.spawn(n,s?[s]:void 0),Promise.resolve(void 0);const a=["/c","start","/wait"];return n.indexOf(" ")>=0&&a.push(n),a.push(n),o==="wt"&&a.push("-d ."),new Promise((c,l)=>{const u=dc(process),h=t.spawn(i,a,{cwd:s,env:u,detached:!0});h.on("error",l),h.on("exit",()=>c())})}async runInTerminal(t,r,i,s,n){const o="windowsExec"in n&&n.windowsExec?n.windowsExec:sn.getDefaultTerminalWindows(),a=await sn.f();return new Promise((c,l)=>{const u=`"${r} - ${gE}"`,h=`"${i.join('" "')}" & pause`,d=Object.assign({},dc(process),s);Object.keys(d).filter($=>d[$]===null).forEach($=>delete d[$]);const f={cwd:r,env:d,windowsVerbatimArguments:!0};let g,v;St(o,".exe")==="wt"?(g=o,v=["-d",".",sn.b,"/c",h]):a?(g=a,v=["-d",".",o,"/c",h]):(g=sn.b,v=["/c","start",u,"/wait",o,"/c",`"${h}"`]),hc.spawn(g,v,f).on("error",$=>{l(Nw($))}),c(void 0)})}static getDefaultTerminalWindows(){if(!sn.d){const t=!!process.env.hasOwnProperty("PROCESSOR_ARCHITEW6432");sn.d=`${process.env.windir?process.env.windir:"C:\\Windows"}\\${t?"Sysnative":"System32"}\\cmd.exe`}return sn.d}static async f(){try{const t=await Nu.findExecutable("wt");return await gt.exists(t)?t:void 0}catch{return}}};__decorate([r5],Lw,"f",null);var jO=class _3 extends Rw{static{this.b="/usr/bin/osascript"}openTerminal(t,r){return this.spawnTerminal(hc,t,r)}runInTerminal(t,r,i,s,n){const o=n.osxExec||Wp;return new Promise((a,c)=>{if(o===Wp||o==="iTerm.app"){const l=o===Wp?"TerminalHelper":"iTermHelper",h=[pm.asFileUri(`vs/workbench/contrib/externalTerminal/node/${l}.scpt`).fsPath,"-t",t||gE,"-w",r];for(const g of i)h.push("-a"),h.push(g);if(s){const g=Object.assign({},dc(process),s);for(const v in g){const x=g[v];x===null?(h.push("-u"),h.push(v)):(h.push("-e"),h.push(`${v}=${x}`))}}let d="";const f=hc.spawn(_3.b,h);f.on("error",g=>{c(Nw(g))}),f.stderr.on("data",g=>{d+=g.toString()}),f.on("exit",g=>{if(g===0)a(void 0);else if(d){const v=d.split(`
`,1);c(new Error(v[0]))}else c(new Error(p(1868,null,l,g)))})}else c(new Error(p(1869,null,o)))})}spawnTerminal(t,r,i){const s=r.osxExec||Wp;return new Promise((n,o)=>{const a=["-a",s];i&&a.push(i);const c=dc(process),l=t.spawn("/usr/bin/open",a,{cwd:i,env:c});l.on("error",o),l.on("exit",()=>n())})}},mE=class Vn extends Rw{static{this.b=p(1870,null)}openTerminal(t,r){return this.spawnTerminal(hc,t,r)}runInTerminal(t,r,i,s,n){const o=n.linuxExec?Promise.resolve(n.linuxExec):Vn.getDefaultTerminalLinuxReady();return new Promise((a,c)=>{const l=[];o.then(u=>{u.indexOf("gnome-terminal")>=0?l.push("-x"):l.push("-e"),l.push("bash"),l.push("-c");const h=`${UO(i)}; echo; read -p "${Vn.b}" -n1;`;l.push(`''${h}''`);const d=Object.assign({},dc(process),s);Object.keys(d).filter(x=>d[x]===null).forEach(x=>delete d[x]);const f={cwd:r,env:d};let g="";const v=hc.spawn(u,l,f);v.on("error",x=>{c(Nw(x))}),v.stderr.on("data",x=>{g+=x.toString()}),v.on("exit",x=>{if(x===0)a(void 0);else if(g){const $=g.split(`
`,1);c(new Error($[0]))}else c(new Error(p(1871,null,u,x)))})})})}static async getDefaultTerminalLinuxReady(){if(!Vn.d)if(!Ot)Vn.d=Promise.resolve("xterm");else{const t=await gt.exists("/etc/debian_version");Vn.d=new Promise(r=>{t?r("x-terminal-emulator"):process.env.DESKTOP_SESSION==="gnome"||process.env.DESKTOP_SESSION==="gnome-classic"?r("gnome-terminal"):process.env.DESKTOP_SESSION==="kde-plasma"?r("konsole"):process.env.COLORTERM?r(process.env.COLORTERM):process.env.TERM?r(process.env.TERM):r("xterm")})}return Vn.d}spawnTerminal(t,r,i){const s=r.linuxExec?Promise.resolve(r.linuxExec):Vn.getDefaultTerminalLinuxReady();return new Promise((n,o)=>{s.then(a=>{const c=dc(process),l=t.spawn(a,[],{cwd:i,env:c});l.on("error",o),l.on("exit",()=>n())})})}};function dc(e){const t={...e.env};return LO(t),t}function Nw(e){return"errno"in e&&e.errno==="ENOENT"&&"path"in e&&typeof e.path=="string"?new Error(p(1872,null,e.path)):e}function UO(e){let t="";for(const r of e)r.indexOf(" ")>=0?t+='"'+r+'"':t+=r,t+=" ";return t}var vE=!0,HO=!1,wE;(function(e){e[e.LoaderAvailable=1]="LoaderAvailable",e[e.BeginLoadingScript=10]="BeginLoadingScript",e[e.EndLoadingScriptOK=11]="EndLoadingScriptOK",e[e.EndLoadingScriptError=12]="EndLoadingScriptError",e[e.BeginInvokeFactory=21]="BeginInvokeFactory",e[e.EndInvokeFactory=22]="EndInvokeFactory",e[e.NodeBeginEvaluatingScript=31]="NodeBeginEvaluatingScript",e[e.NodeEndEvaluatingScript=32]="NodeEndEvaluatingScript",e[e.NodeBeginNativeRequire=33]="NodeBeginNativeRequire",e[e.NodeEndNativeRequire=34]="NodeEndNativeRequire",e[e.CachedDataFound=60]="CachedDataFound",e[e.CachedDataMissed=61]="CachedDataMissed",e[e.CachedDataRejected=62]="CachedDataRejected",e[e.CachedDataCreated=63]="CachedDataCreated"})(wE||(wE={}));var BO=class{constructor(e,t,r){this.id=e,this.dependencies=t,this.callback=r}},jo;(function(e){e[e.Uninitialized=1]="Uninitialized",e[e.InitializedInternal=2]="InitializedInternal",e[e.InitializedExternal=3]="InitializedExternal"})(jo||(jo={}));var zO=class W3{static{this.INSTANCE=new W3}constructor(){this.a=typeof self=="object"&&self.constructor&&self.constructor.name==="DedicatedWorkerGlobalScope",this.b=typeof document=="object",this.c=[],this.d=jo.Uninitialized}g(){if(this.d===jo.Uninitialized){if(globalThis.define){console.log("[amdX] AMD loader already present externally"),this.d=jo.InitializedExternal;return}}else return;this.d=jo.InitializedInternal,globalThis.define=(t,r,i)=>{typeof t!="string"&&(i=r,r=t,t=null),(typeof r!="object"||!Array.isArray(r))&&(i=r,r=null),this.c.push(new BO(t,r,i))},globalThis.define.amd=!0,this.b?this.f=globalThis._VSCODE_WEB_PACKAGE_TTP??window.trustedTypes?.createPolicy("amdLoader",{createScriptURL(t){if(t.startsWith(window.location.origin)||t.startsWith(`${Q.vscodeFileResource}://${P4}`))return t;throw new Error(`[trusted_script_src] Invalid script url: ${t}`)}}):this.a&&(this.f=globalThis._VSCODE_WEB_PACKAGE_TTP??globalThis.trustedTypes?.createPolicy("amdLoader",{createScriptURL(t){return t}}))}async load(t){if(this.g(),this.d===jo.InitializedExternal)return new Promise(o=>{const a=ir();console.log(`[amdX] Using external define("${a}", ["${t}"])`),globalThis.define(a,[t],function(c){console.log(`[amdX] Got a result for ${a}: ${!!c}`),o(c)})});const r=await(this.a?this.i(t):this.b?this.h(t):this.j(t));if(!r){console.warn(`Did not receive a define call from script ${t}`);return}const i={},s=[],n=[];if(Array.isArray(r.dependencies))for(const o of r.dependencies)o==="exports"?s.push(i):n.push(o);if(n.length>0)throw new Error(`Cannot resolve dependencies for script ${t}. The dependencies are: ${n.join(", ")}`);return typeof r.callback=="function"?r.callback(...s)??i:r.callback}h(t){return new Promise((r,i)=>{const s=document.createElement("script");s.setAttribute("async","async"),s.setAttribute("type","text/javascript");const n=()=>{s.removeEventListener("load",o),s.removeEventListener("error",a)},o=c=>{n(),r(this.c.pop())},a=c=>{n(),i(c)};s.addEventListener("load",o),s.addEventListener("error",a),this.f&&(t=this.f.createScriptURL(t)),s.setAttribute("src",t),window.document.getElementsByTagName("head")[0].appendChild(s)})}async i(t){return this.f&&(t=this.f.createScriptURL(t)),vE?await import(t):importScripts(t),this.c.pop()}async j(t){try{const r=(await import("fs")).default,i=(await import("vm")).default,s=(await import("module")).default,n=k.parse(t).fsPath,o=r.readFileSync(n).toString(),a=s.wrap(o.replace(/^#!.*/,""));return new i.Script(a).runInThisContext().apply(),this.c.pop()}catch(r){throw r}}},Fw=new Map;async function _O(e,t,r){if(vE){r===void 0&&(r=!!(globalThis._VSCODE_PRODUCT_JSON??globalThis.vscode?.context?.configuration()?.product)?.commit);const i=t?`${e}/${t}`:e;if(Fw.has(i))return Fw.get(i);let s;if(/^\w[\w\d+.-]*:\/\//.test(i))s=i;else{const c=`${HO&&r&&!xh?PI:CI}/${i}`;s=pm.asBrowserUri(c).toString(!0)}const n=zO.INSTANCE.load(s);return Fw.set(i,n),n}else return await import(e)}var WO=class V3{constructor(){this.b=new Map}static{this.a=1}async createNewMessage(t){try{const r=await this.c();if(r){const i=String(V3.a++);return this.b.set(i,r),{id:i,data:r.createNewMessage(t)}}}catch{}return{id:"",data:t}}async validate(t,r){if(!t.id)return!0;const i=this.b.get(t.id);if(!i)return!1;this.b.delete(t.id);try{return i.validate(r)==="ok"}catch{return!1}finally{i.dispose?.()}}async sign(t){try{return await this.d(t)}catch{}return t}},bE=class extends WO{c(){return this.h().then(e=>new e.validator)}d(e){return this.h().then(t=>new t.signer().sign(e))}async h(){const e="vsda",{default:t}=await import(e);return t}};import*as Ow from"child_process";import*as yE from"net";var kE=class $c extends Y8{static{this.b=`\r
\r
`}static{this.i=/\r?\n/}static{this.l=/: */}constructor(){super(),this.r=Buffer.allocUnsafe(0),this.t=-1}v(t,r){this.p=r,this.r=Buffer.allocUnsafe(0),this.t=-1,t.on("data",i=>this.x(i))}sendMessage(t){if(this.p){const r=JSON.stringify(t);this.p.write(`Content-Length: ${Buffer.byteLength(r,"utf8")}${$c.b}${r}`,"utf8")}}x(t){for(this.r=Buffer.concat([this.r,t]);;){if(this.t>=0){if(this.r.length>=this.t){const r=this.r.toString("utf8",0,this.t);if(this.r=this.r.slice(this.t),this.t=-1,r.length>0)try{this.acceptMessage(JSON.parse(r))}catch(i){this.n.fire(new Error((i.message||i)+`
`+r))}continue}}else{const r=this.r.indexOf($c.b);if(r!==-1){const s=this.r.toString("utf8",0,r).split($c.i);for(const n of s){const o=n.split($c.l);o[0]==="Content-Length"&&(this.t=Number(o[1]))}this.r=this.r.slice(r+$c.b.length);continue}}break}}},xE=class extends kE{startSession(){return new Promise((e,t)=>{let r=!1;this.y=this.z(()=>{this.v(this.y,this.y),e(),r=!0}),this.y.on("close",()=>{r?this.n.fire(new Error("connection closed")):t(new Error("connection closed"))}),this.y.on("error",i=>{r?this.n.fire(i):t(i)})})}async stopSession(){await this.w(),this.y&&(this.y.end(),this.y=void 0)}},VO=class extends xE{constructor(e){super(),this.A=e}z(e){return yE.createConnection(this.A.port,this.A.host||"127.0.0.1",e)}},qO=class extends xE{constructor(e){super(),this.A=e}z(e){return yE.createConnection(this.A.path,e)}},EE=class Jo extends kE{constructor(t,r){super(),this.z=t,this.A=r}async startSession(){const t=this.z.command,r=this.z.args,i=this.z.options||{};try{if(t)if(Ki(t)){if(!await gt.exists(t))throw new Error(p(5967,null,t))}else t.indexOf("/")<0&&t.indexOf("\\")<0;else throw new Error(p(5968,null,this.A));let s=process.env;if(i.env&&Object.keys(i.env).length>0&&(s=Ps(ut(process.env),i.env)),t==="node")if(Array.isArray(r)&&r.length>0){const n=!!process.env.ELECTRON_RUN_AS_NODE||!!process.versions.electron,o={env:s,execArgv:n?["-e","delete process.env.ELECTRON_RUN_AS_NODE;require(process.argv[1])"]:[],silent:!0};i.cwd&&(o.cwd=i.cwd);const a=Ow.fork(r[0],r.slice(1),o);if(!a.pid)throw new Error(p(5969,null,r[0]));this.y=a}else throw new Error(p(5970,null));else{let n=t,o=r;const a={env:s};i.cwd&&(a.cwd=i.cwd),at&&(t.endsWith(".bat")||t.endsWith(".cmd"))&&(a.shell=!0,n=`"${t}"`,o=r.map(c=>(c=c.replace(/"/g,'\\"'),`"${c}"`))),this.y=Ow.spawn(n,o,a)}this.y.on("error",n=>{this.n.fire(n)}),this.y.on("exit",(n,o)=>{this.o.fire(n)}),this.y.stdout.on("close",()=>{this.n.fire(new Error("read error"))}),this.y.stdout.on("error",n=>{this.n.fire(n)}),this.y.stdin.on("error",n=>{this.n.fire(n)}),this.y.stderr.resume(),this.v(this.y.stdout,this.y.stdin)}catch(s){this.n.fire(s)}}async stopSession(){return this.y?(await this.w(),at?new Promise((t,r)=>{const i=Ow.exec(`taskkill /F /T /PID ${this.y.pid}`,function(s,n,o){if(s)return r(s)});i.on("exit",t),i.on("error",r)}):(this.y.kill("SIGTERM"),Promise.resolve(void 0))):Promise.resolve(void 0)}static B(t,r){if(!t)return;const i=Object.create(null);t.runtime&&(t.runtime.indexOf("./")===0?i.runtime=bt(r,t.runtime):i.runtime=t.runtime),t.runtimeArgs&&(i.runtimeArgs=t.runtimeArgs),t.program&&(Ki(t.program)?i.program=t.program:i.program=bt(r,t.program)),t.args&&(i.args=t.args);const s=t;return s.win&&(i.win=Jo.B(s.win,r)),s.winx86&&(i.winx86=Jo.B(s.winx86,r)),s.windows&&(i.windows=Jo.B(s.windows,r)),s.osx&&(i.osx=Jo.B(s.osx,r)),s.linux&&(i.linux=Jo.B(s.linux,r)),i}static platformAdapterExecutable(t,r){let i=Object.create(null);r=r.toLowerCase();for(const l of t)if(l.contributes){const u=l.contributes.debuggers;u&&u.length>0&&u.filter(h=>typeof h.type=="string"&&$i(h.type,r)).forEach(h=>{const d=Jo.B(h,l.extensionLocation.fsPath);i=Ps(i,d,l.isBuiltin)})}let s;at&&!process.env.hasOwnProperty("PROCESSOR_ARCHITEW6432")?s=i.winx86||i.win||i.windows:at?s=i.win||i.windows:Kt?s=i.osx:Ot&&(s=i.linux),s=s||i;const n=s.program||i.program,o=s.args||i.args,a=s.runtime||i.runtime,c=s.runtimeArgs||i.runtimeArgs;if(a)return{type:"executable",command:a,args:(c||[]).concat(typeof n=="string"?[n]:[]).concat(o||[])};if(n)return{type:"executable",command:n,args:o||[]}}};import*as GO from"child_process";function JO(e,t){return new Promise((r,i)=>{let s="";const n=GO.spawn(e,t);n.pid&&n.stdout.on("data",o=>{s+=o.toString()}),n.on("error",o=>{i(o)}),n.on("close",o=>{r(s)})})}async function QO(e){if(e)if(at){const t=await import("@vscode/windows-process-tree");return new Promise(r=>{t.getProcessTree(e,i=>{r(!!i&&i.children.length>0)})})}else return JO("/usr/bin/pgrep",["-lP",String(e)]).then(t=>{const r=t.trim();return!(r.length===0||r.indexOf(" tmux")>=0)},t=>!0);return Promise.resolve(!0)}var SE;(function(e){e[e.cmd=0]="cmd",e[e.powershell=1]="powershell",e[e.bash=2]="bash"})(SE||(SE={}));function YO(e,t,r,i,s){e=e.trim().toLowerCase();let n;e.indexOf("powershell")>=0||e.indexOf("pwsh")>=0?n=1:e.indexOf("cmd.exe")>=0?n=0:e.indexOf("bash")>=0?n=2:at?n=0:n=2;let o,a=" ";switch(n){case 1:if(o=c=>(c=c.replace(/\'/g,"''"),c.length>0&&c.charAt(c.length-1)==="\\"?`'${c}\\'`:`'${c}'`),i){const c=b4(i);c&&(a+=`${c}:; `),a+=`cd ${o(i)}; `}if(s)for(const c in s){const l=s[c];l===null?a+=`Remove-Item env:${c}; `:a+=`\${env:${c}}='${l}'; `}if(t.length>0){const c=t.shift(),l=r?c:o(c);a+=l[0]==="'"?`& ${l} `:`${l} `;for(const u of t)a+=u==="<"||u===">"||r?u:o(u),a+=" "}break;case 0:if(o=c=>(c=c.replace(/\"/g,'""'),c=c.replace(/([><!^&|])/g,"^$1"),' "'.split("").some(l=>c.includes(l))||c.length===0?`"${c}"`:c),i){const c=b4(i);c&&(a+=`${c}: && `),a+=`cd ${o(i)} && `}if(s){a+='cmd /C "';for(const c in s){let l=s[c];l===null?a+=`set "${c}=" && `:(l=l.replace(/[&^|<>]/g,u=>`^${u}`),a+=`set "${c}=${l}" && `)}}for(const c of t)a+=c==="<"||c===">"||r?c:o(c),a+=" ";s&&(a+='"');break;case 2:{o=l=>(l=l.replace(/(["'\\\$!><#()\[\]*&^| ;{}?`])/g,"\\$1"),l.length===0?'""':l);const c=l=>/[^\w@%\/+=,.:^-]/.test(l)?`'${l.replace(/'/g,"'\\''")}'`:l;if(i&&(a+=`cd ${o(i)} ; `),s){a+="/usr/bin/env";for(const l in s){const u=s[l];u===null?a+=` -u ${c(l)}`:a+=` ${c(`${l}=${u}`)}`}a+=" "}for(const l of t)a+=l==="<"||l===">"||r?l:o(l),a+=" ";break}}return a}var Mw=class extends Hp{constructor(t,r,i,s,n,o,a,c,l,u){super(t,r,i,s,a,c,l,u),this.Eb=n,this.Fb=o,this.Cb=new ZO}hb(t,r){return t instanceof Oa?new EE(this.kb(t),r.type):t instanceof Ma?new VO(this.lb(t)):t instanceof Tl?new qO(this.mb(t)):super.hb(t,r)}ub(t,r){const i=EE.platformAdapterExecutable(r.getAllExtensionDescriptions(),t.type);if(i)return new Oa(i.command,i.args,i.options)}ib(){return new bE}async $runInTerminal(t,r){if(t.kind==="integrated"){this.Db||(this.Db=this.B(this.Eb.onDidCloseTerminal(g=>{this.Cb.onTerminalClosed(g)})));const i=await this.$.getConfigProvider(),s=this.Eb.getDefaultShell(!0),n=this.Eb.getDefaultShellArgs(!0),o=t.title||p(2747,null),a=JSON.stringify({shell:s,shellArgs:n});let c=await this.Cb.checkout(a,o),l,u=!1;if(c)l=t.cwd;else{const g={shellPath:s,shellArgs:n,cwd:t.cwd,name:o,iconPath:new vr("debug")};u=!0,c=this.Eb.createTerminalFromOptions(g,{isFeatureTerminal:!0,forceShellIntegration:!0,useShellEnvironment:!0}),this.Cb.insert(c,a)}c.show(!0);const h=await c.processId;if(u){let g;(function(x){x[x.DataDebounce=500]="DataDebounce",x[x.MaxDelay=5e3]="MaxDelay"})(g||(g={}));const v=new be;await new Promise(x=>{const $=v.add(new Cs(x,500));v.add(this.Eb.onDidWriteTerminalData(C=>{C.terminal===c&&$.schedule()})),v.add(this.Fb.onDidChangeTerminalShellIntegration(C=>{C.terminal===c&&x()})),v.add(M4(x,5e3))}),v.dispose()}else c.state.isInteractedWith&&!c.shellIntegration&&(c.sendText(""),await br(200)),i.getConfiguration("debug.terminal").get("clearBeforeReusing")&&(s.indexOf("powershell")>=0||s.indexOf("pwsh")>=0||s.indexOf("cmd.exe")>=0?c.sendText("cls"):s.indexOf("bash")>=0?c.sendText("clear"):at?c.sendText("cls"):c.sendText("clear"));const d=YO(s,t.args,!!t.argsCanBeInterpretedByShell,l,t.env);c.shellIntegration?c.shellIntegration.executeCommand(d):c.sendText(d);const f=this.onDidTerminateDebugSession(g=>{g.id===r&&(this.Cb.free(c),f.dispose())});return h}else if(t.kind==="external")return XO(t,await this.$.getConfigProvider());return super.$runInTerminal(t,r)}};Mw=__decorate([__param(0,Ue),__param(1,Bi),__param(2,Js),__param(3,pi),__param(4,Gs),__param(5,Iw),__param(6,lc),__param(7,uc),__param(8,zi),__param(9,Ru)],Mw);var Fu=void 0;function XO(e,t){if(!Fu)if(at)Fu=new Lw;else if(Kt)Fu=new jO;else if(Ot)Fu=new mE;else throw new Error("external terminals not supported on this platform");const r=t.getConfiguration("terminal");return Fu.runInTerminal(e.title,e.cwd,e.args,e.env||{},r.external||{})}var ZO=class q3{constructor(){this.b=new Map}static{this.a=1e3}async checkout(t,r,i=!1){const n=[...this.b.entries()].map(([o,a])=>$s(async c=>{if(o.name!==r||a.lastUsedAt!==-1&&await QO(await o.processId))return null;const l=Date.now();return a.lastUsedAt+q3.a>l||c.isCancellationRequested?null:a.config!==t?(i&&o.dispose(),null):(a.lastUsedAt=l,o)}));return await MI(n,o=>!!o)}insert(t,r){this.b.set(t,{lastUsedAt:Date.now(),config:r})}free(t){const r=this.b.get(t);r&&(r.lastUsedAt=-1)}onTerminalClosed(t){this.b.delete(t)}},$E=new _r(()=>{const e=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return{collator:e,collatorIsNumeric:e.resolvedOptions().numeric}}),oG=new _r(()=>({collator:new Intl.Collator(void 0,{numeric:!0})})),aG=new _r(()=>({collator:new Intl.Collator(void 0,{numeric:!0,sensitivity:"accent"})}));function CE(e,t,r=!1){const i=e||"",s=t||"",n=$E.value.collator.compare(i,s);return $E.value.collatorIsNumeric&&n===0&&i!==s?i<s?-1:1:n}function KO(e,t,r=!1){return r||(e=e&&e.toLowerCase(),t=t&&t.toLowerCase()),e===t?0:e<t?-1:1}function Vp(e,t,r=!1){const i=e.split($t),s=t.split($t),n=i.length-1,o=s.length-1;let a,c;for(let l=0;;l++){if(a=n===l,c=o===l,a&&c)return CE(i[l],s[l],r);if(a)return-1;if(c)return 1;const u=KO(i[l],s[l],r);if(u!==0)return u}}function jw(e,t,r){const i=e.toLowerCase(),s=t.toLowerCase(),n=eM(e,t,r);if(n)return n;const o=i.endsWith(r),a=s.endsWith(r);if(o!==a)return o?-1:1;const c=CE(i,s);return c!==0?c:i.localeCompare(s)}function eM(e,t,r){const i=e.toLowerCase(),s=t.toLowerCase(),n=i.startsWith(r),o=s.startsWith(r);if(n!==o)return n?-1:1;if(n&&o){if(i.length<s.length)return-1;if(i.length>s.length)return 1}return 0}var qp=0,PE=[qp,[]];function IE(e,t,r,i){if(!e||!t)return PE;const s=e.length,n=t.length;if(s<n)return PE;const o=e.toLowerCase();return tM(t,r,n,e,o,s,i)}function tM(e,t,r,i,s,n,o){const a=[],c=[];for(let d=0;d<r;d++){const f=d*n,g=f-n,v=d>0,x=e[d],$=t[d];for(let C=0;C<n;C++){const L=C>0,F=f+C,z=F-1,Y=g+C-1,oe=L?a[z]:0,Z=v&&L?a[Y]:0,se=v&&L?c[Y]:0;let Ae;!Z&&v?Ae=0:Ae=rM(x,$,i,s,C,se),Ae&&Z+Ae>=oe&&(o||v||s.startsWith(t,C))?(c[F]=se+1,a[F]=Z+Ae):(c[F]=qp,a[F]=oe)}}const l=[];let u=r-1,h=n-1;for(;u>=0&&h>=0;){const d=u*n+h;c[d]===qp||(l.push(h),u--),h--}return[a[r*n-1],l.reverse()]}function rM(e,t,r,i,s,n){let o=0;if(!iM(t,i[s]))return o;if(o+=1,n>0&&(o+=n*5),e===r[s]&&(o+=1),s===0)o+=8;else{const a=sM(r.charCodeAt(s-1));a?o+=a:rl(r.charCodeAt(s))&&n===0&&(o+=2)}return o}function iM(e,t){return e===t?!0:e==="/"||e==="\\"?t==="/"||t==="\\":!1}function sM(e){switch(e){case 47:case 92:return 5;case 95:case 45:case 46:case 32:case 39:case 34:case 58:return 4;default:return 0}}var Gp=Object.freeze({score:0}),Jp=1<<18,Uw=1<<17,Hw=65536;function nM(e,t,r,i){const s=i.values?i.values:[i];return As({[i.normalized]:{values:s.map(o=>({value:o.normalized,expectContiguousMatch:o.expectContiguousMatch})),label:e,description:t,allowNonContiguousMatches:r}})}function DE(e,t,r,i,s){if(!e||!t.normalized)return Gp;const n=i.getItemLabel(e);if(!n)return Gp;const o=i.getItemDescription(e),a=nM(n,o,r,t),c=s[a];if(c)return c;const l=oM(n,o,i.getItemPath(e),t,r);return s[a]=l,l}function oM(e,t,r,i,s){const n=!r||!i.containsPathSeparator;return r&&(Ot?i.pathNormalized===r:$i(i.pathNormalized,r))?{score:Jp,labelMatch:[{start:0,end:e.length}],descriptionMatch:t?[{start:0,end:t.length}]:void 0}:i.values&&i.values.length>1?aM(e,t,r,i.values,n,s):AE(e,t,r,i,n,s)}function aM(e,t,r,i,s,n){let o=0;const a=[],c=[];for(const l of i){const{score:u,labelMatch:h,descriptionMatch:d}=AE(e,t,r,l,s,n);if(u===qp)return Gp;o+=u,h&&a.push(...h),d&&c.push(...d)}return{score:o,labelMatch:RE(a),descriptionMatch:RE(c)}}function AE(e,t,r,i,s,n){if(s||!t){const[o,a]=IE(e,i.normalized,i.normalizedLowercase,n&&!i.expectContiguousMatch);if(o){const c=Zm(i.normalized,e);let l;if(c){l=Uw;const u=Math.round(i.normalized.length/e.length*100);l+=u}else l=Hw;return{score:l+o,labelMatch:c||TE(a)}}}if(t){let o=t;r&&(o=`${t}${$t}`);const a=o.length,c=`${o}${e}`,[l,u]=IE(c,i.normalized,i.normalizedLowercase,n&&!i.expectContiguousMatch);if(l){const h=TE(u),d=[],f=[];return h.forEach(g=>{g.start<a&&g.end>a?(d.push({start:0,end:g.end-a}),f.push({start:g.start,end:a})):g.start>=a?d.push({start:g.start-a,end:g.end-a}):f.push(g)}),{score:l,labelMatch:d,descriptionMatch:f}}}return Gp}function TE(e){const t=[];if(!e)return t;let r;for(const i of e)r&&r.end===i?r.end+=1:(r={start:i,end:i+1},t.push(r));return t}function RE(e){const t=e.sort((s,n)=>s.start-n.start),r=[];let i;for(const s of t)!i||!cM(i,s)?(i=s,r.push(s)):(i.start=Math.min(i.start,s.start),i.end=Math.max(i.end,s.end));return r}function cM(e,t){return!(e.end<t.start||t.end<e.start)}function lM(e,t,r,i,s,n){const o=DE(e,r,i,s,n),a=DE(t,r,i,s,n),c=o.score,l=a.score;if((c===Jp||l===Jp)&&c!==l)return c===Jp?-1:1;if(c>Hw||l>Hw){if(c!==l)return c>l?-1:1;if(c<Uw&&l<Uw){const x=uM(o.labelMatch,a.labelMatch);if(x!==0)return x}const g=s.getItemLabel(e)||"",v=s.getItemLabel(t)||"";if(g.length!==v.length)return g.length-v.length}if(c!==l)return c>l?-1:1;const u=Array.isArray(o.labelMatch)&&o.labelMatch.length>0,h=Array.isArray(a.labelMatch)&&a.labelMatch.length>0;if(u&&!h)return-1;if(h&&!u)return 1;const d=LE(e,o,s),f=LE(t,a,s);return d&&f&&d!==f?f>d?-1:1:hM(e,t,r,s)}function LE(e,t,r){let i=-1,s=-1;if(t.descriptionMatch&&t.descriptionMatch.length?i=t.descriptionMatch[0].start:t.labelMatch&&t.labelMatch.length&&(i=t.labelMatch[0].start),t.labelMatch&&t.labelMatch.length){if(s=t.labelMatch[t.labelMatch.length-1].end,t.descriptionMatch&&t.descriptionMatch.length){const n=r.getItemDescription(e);n&&(s+=n.length)}}else t.descriptionMatch&&t.descriptionMatch.length&&(s=t.descriptionMatch[t.descriptionMatch.length-1].end);return s-i}function uM(e,t){if(!e&&!t||(!e||!e.length)&&(!t||!t.length))return 0;if(!t||!t.length)return-1;if(!e||!e.length)return 1;const r=e[0].start,s=e[e.length-1].end-r,n=t[0].start,a=t[t.length-1].end-n;return s===a?0:a<s?1:-1}function hM(e,t,r,i){const s=i.getItemLabel(e)||"",n=i.getItemLabel(t)||"",o=i.getItemDescription(e),a=i.getItemDescription(t),c=s.length+(o?o.length:0),l=n.length+(a?a.length:0);if(c!==l)return c-l;const u=i.getItemPath(e),h=i.getItemPath(t);return u&&h&&u.length!==h.length?u.length-h.length:s!==n?jw(s,n,r.normalized):o&&a&&o!==a?jw(o,a,r.normalized):u&&h&&u!==h?jw(u,h,r.normalized):0}function NE(e){return e.startsWith('"')&&e.endsWith('"')}var dM=" ";function Bw(e){typeof e!="string"&&(e="");const t=e.toLowerCase(),{pathNormalized:r,normalized:i,normalizedLowercase:s}=FE(e),n=r.indexOf($t)>=0,o=NE(e);let a;const c=e.split(dM);if(c.length>1)for(const l of c){const u=NE(l),{pathNormalized:h,normalized:d,normalizedLowercase:f}=FE(l);d&&(a||(a=[]),a.push({original:l,originalLowercase:l.toLowerCase(),pathNormalized:h,normalized:d,normalizedLowercase:f,expectContiguousMatch:u}))}return{original:e,originalLowercase:t,pathNormalized:r,normalized:i,normalizedLowercase:s,values:a,containsPathSeparator:n,expectContiguousMatch:o}}function FE(e){let t;at?t=e.replace(/\//g,$t):t=e.replace(/\\/g,$t);const r=MP(t).replace(/\s|"/g,"");return{pathNormalized:t,normalized:r,normalizedLowercase:r.toLowerCase()}}import*as fM from"child_process";import*as zw from"fs";import{StringDecoder as OE}from"string_decoder";import*as pM from"child_process";function Qp(e){return e.startsWith("**")||e.startsWith("/")?e:`/${e}`}function gM(e){return new c0(e.start.line,e.start.character,e.end.line,e.end.character)}function ME(e){return new Q9(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn)}var Yp=class{constructor(t,r){this.a=t,this.b=r}appendLine(t){this.b.debug(`${this.a}#search`,t)}};Yp=__decorate([__param(1,Ne)],Yp);import{rgPath as mM}from"@vscode/ripgrep";var jE=mM.replace(/\bnode_modules\.asar\b/,"node_modules.asar.unpacked");function vM(e,t,r,i,s){const n=wM(e,t,r,i,s),o=t.folder.fsPath;return{cmd:pM.spawn(jE,n.args,{cwd:o}),rgDiskPath:jE,siblingClauses:n.siblingClauses,rgArgs:n,cwd:o}}function wM(e,t,r,i,s){const n=["--files","--hidden","--case-sensitive","--no-require-git"];yM([t],r,!1).forEach(a=>{const c=Qp(a);if(n.push("-g",c),Kt){const l=V4(c);l!==c&&n.push("-g",l)}});const o=bM([t],i,void 0,!1);return o.globArgs.forEach(a=>{const c=`!${Qp(a)}`;if(n.push("-g",c),Kt){const l=V4(c);l!==c&&n.push("-g",l)}}),t.disregardIgnoreFiles!==!1?n.push("--no-ignore"):t.disregardParentIgnoreFiles!==!1&&n.push("--no-ignore-parent"),t.ignoreSymlinks||n.push("--follow"),e.exists&&n.push("--quiet"),s&&n.push("--threads",`${s}`),n.push("--no-config"),t.disregardGlobalIgnoreFiles&&n.push("--no-ignore-global"),{args:n,siblingClauses:o.siblingClauses}}function bM(e,t,r,i=!0){const s=[];let n={};return e.forEach(o=>{const a=Object.assign({},o.excludePattern||{},t||{}),c=UE(a,i?o.folder.fsPath:void 0,r);s.push(...c.globArgs),c.siblingClauses&&(n=Object.assign(n,c.siblingClauses))}),{globArgs:s,siblingClauses:n}}function yM(e,t,r=!0){const i=[];return e.forEach(s=>{const n=Object.assign({},t||{},s.includePattern||{}),o=UE(n,r?s.folder.fsPath:void 0);i.push(...o.globArgs)}),i}function UE(e,t,r){const i=[],s={};return Object.keys(e).forEach(n=>{if(r&&r.has(n)||!n)return;const o=e[n];n=xM(t?kM(t,n):n),n.startsWith("\\\\")?n="\\\\"+n.substr(2).replace(/\\/g,"/"):n=n.replace(/\\/g,"/"),typeof o=="boolean"&&o?(n.startsWith("\\\\")&&(n+="**"),i.push(EM(n))):o&&o.when&&(s[n]=o)}),{globArgs:i,siblingClauses:s}}function kM(e,t){return Ki(t)?t:bt(e,t)}function xM(e){return e=pn(e,"\\"),pn(e,"/")}function EM(e){return lm(e).toLowerCase()==="c:/"?e.replace(/^c:[/\\]/i,"/"):e}var Xp=new Set;process.on("exit",()=>{Xp.forEach(e=>e())});var SM=class{constructor(e){this.c=null,this.h=null,this.l=!1,this.m=null,this.r=null,this.s=0,this.a=e,this.b=e.filePattern||"",this.d=e.includePattern&&Ni(e.includePattern),this.f=e.maxResults||null,this.g=!!e.exists,this.v=Object.create(null),this.k=0,this.j=!1,this.o=0,this.p=0,this.q=[],this.b&&(this.c=e.shouldGlobMatchFilePattern?null:Bw(this.b).normalizedLowercase),this.u=e.excludePattern&&Ni(e.excludePattern),this.t=new Map,e.folderQueries.forEach(t=>{const r={};t.excludePattern?.forEach(s=>{Object.assign(r,s.pattern||{},this.a.excludePattern||{})}),t.excludePattern?.length||Object.assign(r,this.a.excludePattern||{});const i=t.folder.fsPath;e.folderQueries.map(s=>s.folder.fsPath).filter(s=>s!==i).forEach(s=>{ro(s,i)&&(r[Ko(i,s)]=!0)}),this.t.set(i,new $M(r,i))})}cancel(){this.l=!0,Xp.forEach(e=>e())}walk(e,t,r,i,s,n){if(this.m=Hr.create(!1),this.l)return n(null,this.j);t.forEach(o=>{const a=St(o.fsPath);this.u&&this.u(o.fsPath,a)||this.J(i,{relativePath:o.fsPath,searchPath:void 0})}),this.r=Hr.create(!1),this.w(e,(o,a)=>{this.x(this.y,this,o,r,i,s,c=>{if(c){const l=yn(c);console.error(l),this.q.push(l),a(c,void 0)}else a(null,void 0)})},(o,a)=>{this.m.stop();const c=o?Rt(o)[0]:null;n(c,this.j)})}w(e,t,r){const i=new Array(e.length),s=new Array(e.length);let n=!1,o=0;if(e.length===0)return r(null,[]);e.forEach((a,c)=>{t(a,(l,u)=>{if(l?(n=!0,i[c]=null,s[c]=l):(i[c]=u,s[c]=null),++o===e.length)return r(n?s:null,i)})})}x(e,t,...r){try{e.apply(t,r)}catch(i){r[r.length-1](i)}}y(e,t,r,i,s){const n=e.folder.fsPath,o=Kt,a=()=>d&&d.kill();Xp.add(a);let c=x=>{Xp.delete(a),c=()=>{},s(x)},l="";const u=this.D(),h=vM(this.a,e,this.a.includePattern,this.t.get(e.folder.fsPath).expression,t),d=h.cmd,f=!Object.keys(h.siblingClauses).length,g=h.rgArgs.args.map(x=>x.match(/^-/)?x:`'${x}'`).join(" ");let v=`${h.rgDiskPath} ${g}
 - cwd: ${h.cwd}`;h.rgArgs.siblingClauses&&(v+=`
 - Sibling clauses: ${JSON.stringify(h.rgArgs.siblingClauses)}`),i({message:v}),this.s=0,this.z(d,"utf8",i,(x,$,C)=>{if(x){c(x);return}if(this.j){c();return}const F=(l+(o?Hh($||""):$)).split(`
`);if(C){const z=F.length;F[z-1]=F[z-1].trim(),F[z-1]||F.pop()}else l=F.pop()||"";if(F.length&&F[0].indexOf(`
`)!==-1){c(new Error("Splitting up files failed"));return}if(this.s+=F.length,f){for(const z of F)if(this.J(r,{base:n,relativePath:z,searchPath:this.N(e,z)}),this.j){a();break}(C||this.j)&&c();return}this.G(e,u,n,F,r),C&&(this.H(u,n,r),c())})}spawnFindCmd(e){const t=this.t.get(e.folder.fsPath),r=t.getBasenameTerms(),i=t.getPathTerms(),s=["-L","."];if(r.length||i.length){s.push("-not","(","(");for(const n of r)s.push("-name",n),s.push("-o");for(const n of i)s.push("-path",n),s.push("-o");s.pop(),s.push(")","-prune",")")}return s.push("-type","f"),fM.spawn("find",s,{cwd:e.folder.fsPath})}readStdout(e,t,r){let i="";this.z(e,t,()=>{},(s,n,o)=>{if(s){r(s);return}i+=n,o&&r(null,i)})}z(e,t,r,i){let s=(a,c,l)=>{(a||l)&&(s=()=>{},this.r?.stop()),i(a,c,l)},n=!1;e.stdout?(this.A(e.stdout,t,s),e.stdout.once("data",()=>n=!0)):r({message:"stdout is null"});let o;e.stderr?o=this.B(e.stderr):r({message:"stderr is null"}),e.on("error",a=>{s(a)}),e.on("close",a=>{let c;!n&&(c=this.C(o,t))&&CM(c)?s(new Error(`command failed with error code ${a}: ${this.C(o,t)}`)):(this.g&&a===0&&(this.j=!0),s(null,"",!0))})}A(e,t,r){const i=new OE(t);return e.on("data",s=>{r(null,i.write(s))}),i}B(e){const t=[];return e.on("data",r=>{t.push(r)}),t}C(e,t){const r=new OE(t);return e.map(i=>r.write(i)).join("")}D(){const e={rootEntries:[],pathToEntries:Object.create(null)};return e.pathToEntries["."]=e.rootEntries,e}G(e,{pathToEntries:t},r,i,s){i.indexOf(this.b)!==-1&&this.J(s,{base:r,relativePath:this.b,searchPath:this.N(e,this.b)});const n=o=>{const a=St(o),c=Sr(o);let l=t[c];l||(l=t[c]=[],n(c)),l.push({base:r,relativePath:o,basename:a,searchPath:this.N(e,o)})};i.forEach(n)}H({rootEntries:e,pathToEntries:t},r,i){const s=this,n=this.t.get(r),o=this.b;function a(c){s.o++;const l=u0(()=>c.map(u=>u.basename));for(let u=0,h=c.length;u<h;u++){const d=c[u],{relativePath:f,basename:g}=d;if(n.test(f,g,o!==g?l:void 0))continue;const v=t[f];if(v)a(v);else{if(s.p++,f===o)continue;s.J(i,d)}if(s.j)break}}a(e)}getStats(){return{cmdTime:this.r.elapsed(),fileWalkTime:this.m.elapsed(),directoriesWalked:this.o,filesWalked:this.p,cmdResultCount:this.s}}I(e,t,r,i,s){const n=e.folder,o=u0(()=>r);this.w(r,(a,c)=>{if(this.l||this.j)return c(null);const l=t?[t,a].join($t):a;if(this.t.get(e.folder.fsPath).test(l,a,this.a.filePattern!==a?o:void 0))return c(null);const u=[n.fsPath,l].join($t);zw.lstat(u,(h,d)=>{if(h||this.l||this.j)return c(null);this.L(u,d,(f,g)=>f||this.l||this.j?c(null):g.isDirectory()?(this.o++,this.M(u,d,(v,x)=>v||this.l||this.j||(x=x||"",this.v[x])?c(null):(this.v[x]=!0,gt.readdir(u).then($=>{if(this.l||this.j)return c(null);this.I(e,l,$,i,C=>c(C||null))},$=>{c(null)})))):(this.p++,l===this.b||this.h&&li(g.size)&&g.size>this.h||this.J(i,{base:n.fsPath,relativePath:l,searchPath:this.N(e,l)}),c(null,void 0)))})},a=>{const c=a&&Rt(a);return s(c&&c.length>0?c[0]:void 0)})}J(e,t){this.K(t)&&(!this.d||this.d(t.relativePath,St(t.relativePath)))&&(this.k++,(this.g||this.f&&this.k>this.f)&&(this.j=!0),this.j||e(t))}K(e){if(this.b){if(this.b==="*")return!0;if(this.c)return l0(e,this.c);if(this.b)return l0(e,this.b,!1)}return!0}L(e,t,r){return t.isSymbolicLink()?zw.stat(e,r):r(null,t)}M(e,t,r){return t.isSymbolicLink()?zw.realpath(e,(i,s)=>i?r(i):r(null,s)):r(null,e)}N(e,t){return e.folderName?bt(e.folderName,t):t}},HE=class{constructor(e,t){this.a=e.folderQueries,this.b=e.extraFileResources||[],this.d=t,this.c=new SM(e)}search(e,t,r){this.c.walk(this.a,this.b,this.d,e,t,(i,s)=>{r(i,{limitHit:s,stats:this.c.getStats(),messages:[]})})}cancel(){this.c.cancel()}},$M=class{constructor(e,t){this.expression=e,this.c=t,this.d(e)}d(e){let t,r;Object.keys(e).filter(i=>e[i]).forEach(i=>{Ki(i)?(t=t||y7(),t[i]=e[i]):(r=r||y7(),r[i]=e[i])}),this.a=t&&Ni(t,{trimForExclusions:!0}),this.b=r&&Ni(r,{trimForExclusions:!0})}test(e,t,r){return this.b&&this.b(e,t,r)||this.a&&this.a(bt(this.c,e),t,r)}getBasenameTerms(){const e=[];return this.a&&e.push(...P7(this.a)),this.b&&e.push(...P7(this.b)),e}getPathTerms(){const e=[];return this.a&&e.push(...I7(this.a)),this.b&&e.push(...I7(this.b)),e}};function CM(e){const t=e.trim().split(`
`),r=t[0].trim();if(r.startsWith("Error parsing regex"))return r;if(r.startsWith("regex parse error"))return XP(t[t.length-1].trim());if(r.startsWith("error parsing glob")||r.startsWith("unsupported encoding"))return r.charAt(0).toUpperCase()+r.substr(1);if(r==="Literal '\\n' not allowed.")return"Literal '\\n' currently not supported";if(r.startsWith("Literal "))return r}import*as PM from"child_process";import{EventEmitter as IM}from"events";import{StringDecoder as DM}from"string_decoder";import{RegExpParser as AM,RegExpVisitor as TM}from"vscode-regexpp";import{rgPath as RM}from"@vscode/ripgrep";var BE=RM.replace(/\bnode_modules\.asar\b/,"node_modules.asar.unpacked"),zE=class{constructor(e,t){this.a=e,this.b=t}provideTextSearchResults(e,t,r,i){return Promise.all(t.folderOptions.map(s=>{const n={folderOptions:s,numThreads:this.b,maxResults:t.maxResults,previewOptions:t.previewOptions,maxFileSize:t.maxFileSize,surroundingContext:t.surroundingContext};return this.provideTextSearchResultsWithRgOptions(e,n,r,i)})).then(s=>({limitHit:s.some(o=>!!o&&o.limitHit)}))}provideTextSearchResultsWithRgOptions(e,t,r,i){return this.a.appendLine(`provideTextSearchResults ${e.pattern}, ${JSON.stringify({...t,folder:t.folderOptions.folder.toString()})}`),new Promise((s,n)=>{i.onCancellationRequested(()=>g());const o={...t,numThreads:this.b},a=OM(e,o),c=t.folderOptions.folder.fsPath,l=a.map(L=>L.match(/^-/)?L:`'${L}'`).join(" ");this.a.appendLine(`${BE} ${l}
 - cwd: ${c}`);let u=PM.spawn(BE,a,{cwd:c});u.on("error",L=>{console.error(L),this.a.appendLine("Error: "+(L&&L.message)),n(nx(new No(L&&L.message,Mn.rgProcessError)))});let h=!1;const d=new FM(t.maxResults??mp,t.folderOptions.folder,cE(t.previewOptions));d.on("result",L=>{h=!0,x="",r.report(L)});let f=!1;const g=()=>{f=!0,u?.kill(),d?.cancel()};let v=!1;d.on("hitLimit",()=>{v=!0,g()});let x="";u.stdout.on("data",L=>{d.handleData(L),h||(x+=L)});let $=!1;u.stdout.once("data",()=>$=!0);let C="";u.stderr.on("data",L=>{const F=L.toString();this.a.appendLine(F),C.length+F.length<1e6&&(C+=F)}),u.on("close",()=>{if(this.a.appendLine($?"Got data from stdout":"No data from stdout"),this.a.appendLine(h?"Got result from parser":"No result from parser"),x&&this.a.appendLine(`Got data without result: ${x}`),this.a.appendLine(""),f)s({limitHit:v});else{d.flush(),u=null;let L;C&&!$&&(L=LM(C))?n(nx(new No(L.message,L.code))):s({limitHit:v})}})})}};function LM(e){const t=e.split(`
`),r=t[0].trim();if(t.some(s=>s.startsWith("regex parse error")))return new No(NM(t),Mn.regexParseError);const i=r.match(/grep config error: unknown encoding: (.*)/);if(i)return new No(`Unknown encoding: ${i[1]}`,Mn.unknownEncoding);if(r.startsWith("error parsing glob"))return new No(r.charAt(0).toUpperCase()+r.substr(1),Mn.globParseError);if(r.startsWith("the literal"))return new No(r.charAt(0).toUpperCase()+r.substr(1),Mn.invalidLiteral);if(r.startsWith("PCRE2: error compiling pattern"))return new No(r,Mn.regexParseError)}function NM(e){const t=["Regex parse error"],r=e.filter(i=>i.startsWith("PCRE2:"));if(r.length>=1){const i=r[0].replace("PCRE2:","");if(i.indexOf(":")!==-1&&i.split(":").length>=2){const s=i.split(":")[1];t.push(":"+s)}}return t.join("")}var FM=class extends IM{constructor(e,t,r){super(),this.g=e,this.h=t,this.j=r,this.a="",this.b=!1,this.c=!1,this.f=0,this.d=new DM}cancel(){this.b=!0}flush(){this.k(this.d.end())}on(e,t){return super.on(e,t),this}handleData(e){if(this.b)return;const t=typeof e=="string"?e:this.d.write(e);this.k(t)}k(e){let t=e.indexOf(`
`);const r=this.a+e;if(t>=0)t+=this.a.length;else{this.a=r;return}let i=0;for(;t>=0;)this.m(r.substring(i,t).trim()),i=t+1,t=r.indexOf(`
`,i);this.a=r.substring(i)}m(e){if(this.b||!e)return;let t;try{t=JSON.parse(e)}catch{throw new Error(`malformed line from rg: ${e}`)}if(t.type==="match"){const r=Ou(t.data.path),i=k.joinPath(this.h,r),s=this.n(t.data,i);this.p(s),this.c&&(this.cancel(),this.emit("hitLimit"))}else if(t.type==="context"){const r=Ou(t.data.path),i=k.joinPath(this.h,r);this.o(t.data,i).forEach(n=>this.p(n))}}n(e,t){const r=e.line_number-1,i=Ou(e.lines),s=Buffer.from(i);let n=0,o=0,a=r;e.submatches.length===0&&e.submatches.push(i.length?{start:0,end:1,match:{text:i[0]}}:{start:0,end:0,match:{text:""}});const c=Rt(e.submatches.map((h,d)=>{if(this.c)return null;this.f++,this.f>=this.g&&(this.c=!0);const f=Ou(h.match),g=s.slice(n,h.start).toString(),v=_E(g),x=v.numLines>0?v.lastLineLength:v.lastLineLength+o,$=_E(f),C=v.numLines+a,L=$.numLines+C,F=$.numLines>0?$.lastLineLength:$.lastLineLength+x;return n=h.end,o=F,a=L,new Q9(C,x,L,F)})),l=fh(c,gM),u=new tx(i,l,this.j);return new Vs(t,u.rangeLocations.map(h=>({sourceRange:ME(h.source),previewRange:ME(h.preview)})),u.previewText)}o(e,t){const r=Ou(e.lines),i=e.line_number;return r.replace(/\r?\n$/,"").split(`
`).map((s,n)=>new pp(t,s,i+n))}p(e){this.emit("result",e)}};function Ou(e){return e.bytes?Buffer.from(e.bytes,"base64").toString():e.text}function _E(e){const t=/\n/g;let r=0,i=-1,s;for(;s=t.exec(e);)r++,i=s.index;const n=i>=0?e.length-i-1:e.length;return{numLines:r,lastLineLength:n}}function OM(e,t){const r=["--hidden","--no-require-git"];r.push(e.isCaseSensitive?"--case-sensitive":"--ignore-case");const{doubleStarIncludes:i,otherIncludes:s}=Vg(t.folderOptions.includes,o=>o.startsWith("**")?"doubleStarIncludes":"otherIncludes");if(s&&s.length){const o=new Set;s.forEach(a=>{o.add(a)}),r.push("-g","!*"),o.forEach(a=>{MM(a).map(Qp).forEach(c=>{r.push("-g",c)})})}i&&i.length&&i.forEach(o=>{r.push("-g",o)}),t.folderOptions.excludes.map(o=>typeof o=="string"?o:o.pattern).map(Qp).forEach(o=>r.push("-g",`!${o}`)),t.maxFileSize&&r.push("--max-filesize",t.maxFileSize+""),t.folderOptions.useIgnoreFiles.local?t.folderOptions.useIgnoreFiles.parent||r.push("--no-ignore-parent"):r.push("--no-ignore"),t.folderOptions.followSymlinks&&r.push("--follow"),t.folderOptions.encoding&&t.folderOptions.encoding!=="utf8"&&r.push("--encoding",t.folderOptions.encoding),t.numThreads&&r.push("--threads",`${t.numThreads}`),e.pattern==="--"&&(e.isRegExp=!0,e.pattern="\\-\\-"),e.isMultiline&&!e.isRegExp&&(e.pattern=fn(e.pattern),e.isRegExp=!0),t.usePCRE2&&r.push("--pcre2"),r.push("--crlf"),e.isRegExp&&(e.pattern=jM(e.pattern),r.push("--engine","auto"));let n;if(e.isWordMatch){const a=Ky(e.pattern,!!e.isRegExp,{wholeWord:e.isWordMatch}).source.replace(/\\\//g,"/");r.push("--regexp",a)}else if(e.isRegExp){let o=UM(e.pattern);o=HM(o),r.push("--regexp",o)}else n=e.pattern,r.push("--fixed-strings");return r.push("--no-config"),t.folderOptions.useIgnoreFiles.global||r.push("--no-ignore-global"),r.push("--json"),e.isMultiline&&r.push("--multiline"),t.surroundingContext&&(r.push("--before-context",t.surroundingContext+""),r.push("--after-context",t.surroundingContext+"")),r.push("--"),n&&r.push(n),r.push("."),r}function MM(e){return VE(e).flatMap(r=>{const i=fl(r,"/");return i.map((s,n)=>i.slice(0,n+1).join("/"))})}function jM(e){const t=/((?:[^\\]|^)(?:\\\\)*)\\u([a-z0-9]{4})/gi;for(;e.match(t);)e=e.replace(t,"$1\\x{$2}");const r=/((?:[^\\]|^)(?:\\\\)*)\\u\{([a-z0-9]{4})\}/gi;for(;e.match(r);)e=e.replace(r,"$1\\x{$2}");return e}var WE=e=>e.type==="Assertion"&&e.kind==="lookbehind";function UM(e){let t;try{t=new AM().parsePattern(e)}catch{return e}let r="",i=0;const s=(a,c,l)=>{r+=e.slice(i,a)+l,i=c},n=[];return new TM({onCharacterEnter(a){if(a.raw!=="\\n")return;const c=n[0];if(!c)s(a.start,a.end,"\\r?\\n");else if(!n.some(WE))if(c.type==="CharacterClass")if(c.negate){const l=e.slice(c.start+2,a.start)+e.slice(a.end,c.end-1);c.parent?.type==="Quantifier"?s(c.start,c.end,l?`[^${l}]`:"."):s(c.start,c.end,"(?!\\r?\\n"+(l?`|[${l}]`:"")+")")}else{const l=e.slice(c.start+1,a.start)+e.slice(a.end,c.end-1);s(c.start,c.end,l===""?"\\r?\\n":`(?:[${l}]|\\r?\\n)`)}else c.type==="Quantifier"&&s(a.start,a.end,"(?:\\r?\\n)")},onQuantifierEnter(a){n.unshift(a)},onQuantifierLeave(){n.shift()},onCharacterClassRangeEnter(a){n.unshift(a)},onCharacterClassRangeLeave(){n.shift()},onCharacterClassEnter(a){n.unshift(a)},onCharacterClassLeave(){n.shift()},onAssertionEnter(a){WE(a)&&n.push(a)},onAssertionLeave(a){n[0]===a&&n.shift()}}).visit(t),r+=e.slice(i),r}function HM(e){return e.replace(/\n/g,"\\r?\\n")}function BM(e){let t=!1,r=!1,i="",s="";for(let n=0;n<e.length;n++){const o=e[n];switch(o){case"\\":r?(t?s+="\\"+o:i+="\\"+o,r=!1):r=!0;break;case"{":if(r)t?s+=o:i+=o,r=!1;else{if(t)return{strInBraces:i+"{"+s+"{"+e.substring(n+1)};t=!0}break;case"}":if(r)t?s+=o:i+=o,r=!1;else{if(t)return{fixedStart:i,strInBraces:s,fixedEnd:e.substring(n+1)};i+=o}break;default:t?s+=(r?"\\":"")+o:i+=(r?"\\":"")+o,r=!1;break}}return{strInBraces:i+(t?"{"+s:"")}}function VE(e){const{fixedStart:t,strInBraces:r,fixedEnd:i}=BM(e);if(t===void 0||i===void 0)return[r];let s=fl(r,",");s.length||(s=[""]);const n=VE(i);return s.flatMap(o=>{const a=t+o;return n.map(c=>a+c)})}var gG=512*8,mG=512*128,qE;(function(e){e[e.STREAM_IS_BINARY=1]="STREAM_IS_BINARY"})(qE||(qE={}));function zM(e){switch(e){case"shiftjis":return"shift-jis";case"utf16le":return"utf-16le";case"utf16be":return"utf-16be";case"big5hkscs":return"big5-hkscs";case"eucjp":return"euc-jp";case"euckr":return"euc-kr";case"koi8r":return"koi8-r";case"koi8u":return"koi8-u";case"macroman":return"x-mac-roman";case"utf8bom":return"utf8";default:{const t=e.match(/windows(\d+)/);return t?"windows-"+t[1]:e}}}var _w={utf8:{labelLong:"UTF-8",labelShort:"UTF-8",order:1,alias:"utf8bom",guessableName:"UTF-8"},utf8bom:{labelLong:"UTF-8 with BOM",labelShort:"UTF-8 with BOM",encodeOnly:!0,order:2,alias:"utf8"},utf16le:{labelLong:"UTF-16 LE",labelShort:"UTF-16 LE",order:3,guessableName:"UTF-16LE"},utf16be:{labelLong:"UTF-16 BE",labelShort:"UTF-16 BE",order:4,guessableName:"UTF-16BE"},windows1252:{labelLong:"Western (Windows 1252)",labelShort:"Windows 1252",order:5,guessableName:"windows-1252"},iso88591:{labelLong:"Western (ISO 8859-1)",labelShort:"ISO 8859-1",order:6},iso88593:{labelLong:"Western (ISO 8859-3)",labelShort:"ISO 8859-3",order:7},iso885915:{labelLong:"Western (ISO 8859-15)",labelShort:"ISO 8859-15",order:8},macroman:{labelLong:"Western (Mac Roman)",labelShort:"Mac Roman",order:9},cp437:{labelLong:"DOS (CP 437)",labelShort:"CP437",order:10},windows1256:{labelLong:"Arabic (Windows 1256)",labelShort:"Windows 1256",order:11},iso88596:{labelLong:"Arabic (ISO 8859-6)",labelShort:"ISO 8859-6",order:12},windows1257:{labelLong:"Baltic (Windows 1257)",labelShort:"Windows 1257",order:13},iso88594:{labelLong:"Baltic (ISO 8859-4)",labelShort:"ISO 8859-4",order:14},iso885914:{labelLong:"Celtic (ISO 8859-14)",labelShort:"ISO 8859-14",order:15},windows1250:{labelLong:"Central European (Windows 1250)",labelShort:"Windows 1250",order:16,guessableName:"windows-1250"},iso88592:{labelLong:"Central European (ISO 8859-2)",labelShort:"ISO 8859-2",order:17,guessableName:"ISO-8859-2"},cp852:{labelLong:"Central European (CP 852)",labelShort:"CP 852",order:18},windows1251:{labelLong:"Cyrillic (Windows 1251)",labelShort:"Windows 1251",order:19,guessableName:"windows-1251"},cp866:{labelLong:"Cyrillic (CP 866)",labelShort:"CP 866",order:20,guessableName:"IBM866"},iso88595:{labelLong:"Cyrillic (ISO 8859-5)",labelShort:"ISO 8859-5",order:21,guessableName:"ISO-8859-5"},koi8r:{labelLong:"Cyrillic (KOI8-R)",labelShort:"KOI8-R",order:22,guessableName:"KOI8-R"},koi8u:{labelLong:"Cyrillic (KOI8-U)",labelShort:"KOI8-U",order:23},iso885913:{labelLong:"Estonian (ISO 8859-13)",labelShort:"ISO 8859-13",order:24},windows1253:{labelLong:"Greek (Windows 1253)",labelShort:"Windows 1253",order:25,guessableName:"windows-1253"},iso88597:{labelLong:"Greek (ISO 8859-7)",labelShort:"ISO 8859-7",order:26,guessableName:"ISO-8859-7"},windows1255:{labelLong:"Hebrew (Windows 1255)",labelShort:"Windows 1255",order:27,guessableName:"windows-1255"},iso88598:{labelLong:"Hebrew (ISO 8859-8)",labelShort:"ISO 8859-8",order:28,guessableName:"ISO-8859-8"},iso885910:{labelLong:"Nordic (ISO 8859-10)",labelShort:"ISO 8859-10",order:29},iso885916:{labelLong:"Romanian (ISO 8859-16)",labelShort:"ISO 8859-16",order:30},windows1254:{labelLong:"Turkish (Windows 1254)",labelShort:"Windows 1254",order:31},iso88599:{labelLong:"Turkish (ISO 8859-9)",labelShort:"ISO 8859-9",order:32},windows1258:{labelLong:"Vietnamese (Windows 1258)",labelShort:"Windows 1258",order:33},gbk:{labelLong:"Simplified Chinese (GBK)",labelShort:"GBK",order:34},gb18030:{labelLong:"Simplified Chinese (GB18030)",labelShort:"GB18030",order:35},cp950:{labelLong:"Traditional Chinese (Big5)",labelShort:"Big5",order:36,guessableName:"Big5"},big5hkscs:{labelLong:"Traditional Chinese (Big5-HKSCS)",labelShort:"Big5-HKSCS",order:37},shiftjis:{labelLong:"Japanese (Shift JIS)",labelShort:"Shift JIS",order:38,guessableName:"SHIFT_JIS"},eucjp:{labelLong:"Japanese (EUC-JP)",labelShort:"EUC-JP",order:39,guessableName:"EUC-JP"},euckr:{labelLong:"Korean (EUC-KR)",labelShort:"EUC-KR",order:40,guessableName:"EUC-KR"},windows874:{labelLong:"Thai (Windows 874)",labelShort:"Windows 874",order:41},iso885911:{labelLong:"Latin/Thai (ISO 8859-11)",labelShort:"ISO 8859-11",order:42},koi8ru:{labelLong:"Cyrillic (KOI8-RU)",labelShort:"KOI8-RU",order:43},koi8t:{labelLong:"Tajik (KOI8-T)",labelShort:"KOI8-T",order:44},gb2312:{labelLong:"Simplified Chinese (GB 2312)",labelShort:"GB 2312",order:45,guessableName:"GB2312"},cp865:{labelLong:"Nordic DOS (CP 865)",labelShort:"CP 865",order:46},cp850:{labelLong:"Western European DOS (CP 850)",labelShort:"CP 850",order:47}},vG=(()=>{const e={};for(const t in _w)_w[t].guessableName&&(e[t]=_w[t]);return e})(),GE=class extends Sw{constructor(e,t,r=jh,i="searchProcess"){super({query:e,provider:t},{readdir:s=>r.Promises.readdir(s.fsPath),toCanonicalName:s=>zM(s)},i)}},_M=class{constructor(e,t){this.a=e,this.b=t}search(e,t,r){if((!this.a.folderQueries||!this.a.folderQueries.length)&&(!this.a.extraFileResources||!this.a.extraFileResources.length))return Promise.resolve({type:"success",limitHit:!1,stats:{type:"searchProcess"},messages:[]});const i={appendLine(n){r({message:n})}},s=new GE(this.a,new zE(i,this.b),jh);return new Promise((n,o)=>s.search(a=>{t(a.map(WM))},e).then(a=>n({limitHit:a.limitHit??!1,type:"success",stats:a.stats,messages:[]}),o))}};function WM(e){return{path:e.resource&&e.resource.fsPath,results:e.results,numMatches:(e.results||[]).reduce((t,r)=>a0(r)?t+r.rangeLocations.length:t+1,0)}}var VM=class jg{static{this.a=512}constructor(t="searchProcess",r){this.d=t,this.f=r,this.b=Object.create(null)}fileSearch(t){let r;const i=JE(t),s=new T({onDidAddFirstListener:()=>{r=$s(async n=>{const o=await this.f?.();return this.doFileSearchWithEngine(HE,i,a=>s.fire(a),n,jg.a,o)}),r.then(n=>s.fire(n),n=>s.fire({type:"error",error:{message:n.message,stack:n.stack}}))},onDidRemoveLastListener:()=>{r.cancel()}});return s.event}textSearch(t){let r;const i=JE(t),s=new T({onDidAddFirstListener:()=>{r=$s(n=>this.g(i,o=>s.fire(o),n)),r.then(n=>s.fire(n),n=>s.fire({type:"error",error:{message:n.message,stack:n.stack}}))},onDidRemoveLastListener:()=>{r.cancel()}});return s.event}async g(t,r,i){t.maxFileSize=this.h().maxFileSize;const s=await this.f?.();return new _M(t,s).search(i,r,r)}h(){return{maxFileSize:16*Ak.GB}}doFileSearch(t,r,i,s){return this.doFileSearchWithEngine(HE,t,i,s,jg.a,r)}doFileSearchWithEngine(t,r,i,s,n=jg.a,o){let a=0;const c=u=>{Array.isArray(u)?(a+=u.length,i(u.map(h=>this.j(h)))):u.relativePath?(a++,i(this.j(u))):i(u)};if(r.sortByScore){let u=this.n(r,c,s);if(!u){const h=r.maxResults?Object.assign({},r,{maxResults:null}):r,d=new t(h,o);u=this.k(d,r,i,c,s)}return new Promise((h,d)=>{u.then(([f,g])=>{const v=g.map(x=>this.j(x));this.q(v,i,n),h(f)},d)})}const l=new t(r,o);return this.s(l,c,n,s).then(u=>({limitHit:u.limitHit,type:"success",stats:{detailStats:u.stats,type:this.d,fromCache:!1,resultCount:a,sortingTime:void 0},messages:[]}))}j(t){return{path:t.base?bt(t.base,t.relativePath):t.relativePath}}k(t,r,i,s,n){const o=new T;let a=$s(l=>{let u=[];const h=d=>{Array.isArray(d)?u=d:(s(d),o.fire(d))};return this.s(t,h,-1,l).then(d=>[d,u])}),c;if(r.cacheKey){c=this.l(r.cacheKey);const l={promise:a,event:o.event,resolved:!1};c.resultsToSearchCache[r.filePattern||""]=l,a.then(()=>{l.resolved=!0},u=>{delete c.resultsToSearchCache[r.filePattern||""]}),a=this.t(a)}return a.then(([l,u])=>{const h=c?c.scorerCache:Object.create(null),d=(typeof r.maxResults!="number"||r.maxResults>0)&&Hr.create(!1);return this.o(r,u,h,n).then(f=>{const g=d?d.elapsed():-1;return[{type:"success",stats:{detailStats:l.stats,sortingTime:g,fromCache:!1,type:this.d,resultCount:f.length},messages:l.messages,limitHit:l.limitHit||typeof r.maxResults=="number"&&u.length>r.maxResults},f]})})}l(t){const r=this.b[t];return r||(this.b[t]=new qM)}n(t,r,i){const s=t.cacheKey&&this.b[t.cacheKey];if(!s)return;const n=this.r(s,t.filePattern||"",r,i);if(n)return n.then(([o,a,c])=>{const l=Hr.create(!1);return this.o(t,a,s.scorerCache,i).then(u=>{const h=l.elapsed(),d={fromCache:!0,detailStats:c,type:this.d,resultCount:a.length,sortingTime:h};return[{type:"success",limitHit:o.limitHit||typeof t.maxResults=="number"&&a.length>t.maxResults,stats:d,messages:[]},u]})})}o(t,r,i,s){const n=Bw(t.filePattern||""),o=(c,l)=>lM(c,l,n,!0,GM,i),a=typeof t.maxResults=="number"?t.maxResults:mp;return LC(r,o,a,1e4,s)}q(t,r,i){if(i&&i>0)for(let s=0;s<t.length;s+=i)r(t.slice(s,s+i));else r(t)}r(t,r,i,s){const n=Hr.create(!1),o=r.indexOf($t)>=0;let a;for(const h in t.resultsToSearchCache)if(r.startsWith(h)){if(o&&h.indexOf($t)<0&&h!=="")continue;const d=t.resultsToSearchCache[h];a={promise:this.t(d.promise),event:d.event,resolved:d.resolved};break}if(!a)return null;const c=n.elapsed(),l=Hr.create(!1),u=a.event(i);return s&&s.onCancellationRequested(()=>{u.dispose()}),a.promise.then(([h,d])=>{if(s&&s.isCancellationRequested)throw Ac();const f=[],g=Bw(r).normalizedLowercase;for(const v of d)l0(v,g)&&f.push(v);return[h,f,{cacheWasResolved:a.resolved,cacheLookupTime:c,cacheFilterTime:l.elapsed(),cacheEntryCount:d.length}]})}s(t,r,i,s){return new Promise((n,o)=>{let a=[];s?.onCancellationRequested(()=>t.cancel()),t.search(c=>{c&&(i?(a.push(c),i>0&&a.length>=i&&(r(a),a=[])):r(c))},c=>{r(c)},(c,l)=>{a.length&&r(a),c?(r({message:"Search finished. Error: "+c.message}),o(c)):(r({message:"Search finished. Stats: "+JSON.stringify(l.stats)}),n(l))})})}clearCache(t){return delete this.b[t],Promise.resolve(void 0)}t(t){return new class{get[Symbol.toStringTag](){return this.toString()}cancel(){}then(r,i){return t.then(r,i)}catch(r){return this.then(void 0,r)}finally(r){return t.finally(r)}}}},qM=class{constructor(){this.resultsToSearchCache=Object.create(null),this.scorerCache=Object.create(null)}},GM=new class{getItemLabel(e){return St(e.relativePath)}getItemDescription(e){return Sr(e.relativePath)}getItemPath(e){return e.relativePath}};function JE(e){return{...e,folderQueries:e.folderQueries&&e.folderQueries.map(JM),extraFileResources:e.extraFileResources&&e.extraFileResources.map(t=>k.revive(t))}}function JM(e){return dr(e)}var QE=class{constructor(e,t){this.b=e,this.c=t,this.a=new Set,process.once("exit",()=>this.f())}async provideTextSearchResults(e,t,r,i){const s=await this.c(),n=new zE(this.b,s);return Promise.all(t.folderOptions.map(o=>{const a={folderOptions:o,numThreads:s,maxResults:t.maxResults,previewOptions:t.previewOptions,maxFileSize:t.maxFileSize,surroundingContext:t.surroundingContext};if(o.folder.scheme===Q.vscodeUserData){const c={...a,folder:o.folder.with({scheme:Q.file})},l=new Pp(u=>r.report({...u,uri:u.uri.with({scheme:o.folder.scheme})}));return this.d(i,u=>n.provideTextSearchResultsWithRgOptions(e,c,l,u))}else return this.d(i,c=>n.provideTextSearchResultsWithRgOptions(e,a,r,c))})).then(o=>({limitHit:o.some(c=>!!c&&c.limitHit)}))}async d(e,t){const r=QM(e);this.a.add(r);const i=await t(r.token);return this.a.delete(r),i}f(){this.a.forEach(e=>e.cancel())}};function QM(e){const t=new wt;return e.onCancellationRequested(()=>t.cancel()),t}var Ww=class extends Bp{constructor(t,r,i,s,n){super(t,i,n),this.E=s,this.x=jh,this.y=-1,this.z=null,this.A=!1,this.C=new be,this.D=!1,this.getNumThreads=this.getNumThreads.bind(this),this.getNumThreadsCached=this.getNumThreadsCached.bind(this),this.F=this.F.bind(this);const o=new Yp("RipgrepSearchUD",this.s);this.C.add(this.registerTextSearchProvider(Q.vscodeUserData,new QE(o,this.getNumThreadsCached))),r.remote.isRemote&&r.remote.authority&&this.G(),s.getConfigProvider().then(a=>{this.D||this.C.add(a.onDidChangeConfiguration(this.F))})}F(t){t.affectsConfiguration("search")&&(this.B=void 0)}async getNumThreads(){return(await this.E.getConfigProvider()).getConfiguration("search").get("ripgrep.maxThreads")}async getNumThreadsCached(){return this.B||(this.B=this.getNumThreads()),this.B}dispose(){this.D=!0,this.C.dispose()}$enableExtensionHostSearch(){this.G()}G(){if(this.A)return;this.A=!0;const t=new Yp("RipgrepSearchEH",this.s);this.C.add(this.registerTextSearchProvider(Q.file,new QE(t,this.getNumThreadsCached))),this.C.add(this.H(Q.file,new VM("fileSearchProvider",this.getNumThreadsCached)))}H(t,r){const i=this.e++;return this.z=r,this.y=i,this.c.$registerFileSearchProvider(i,this.t(t)),me(()=>{this.z=null,this.c.$unregisterProvider(i)})}$provideFileSearchResults(t,r,i,s){const n=zp(i);if(t===this.y){const o=Date.now();return this.I(t,r,n,s).then(a=>{const c=Date.now()-o;return this.s.debug(`Ext host file search time: ${c}ms`),a})}return super.$provideFileSearchResults(t,r,i,s)}async doInternalFileSearchWithCustomCallback(t,r,i){const s=o=>{if(JL(o)&&(o=[o]),Array.isArray(o)){i(o.map(a=>k.file(a.path)));return}o.message&&this.s.debug("ExtHostSearch",o.message)};if(!this.z)throw new Error("No internal file search handler");const n=await this.getNumThreadsCached();return this.z.doFileSearch(t,n,s,r)}async I(t,r,i,s){return this.doInternalFileSearchWithCustomCallback(i,s,n=>{this.c.$handleFileMatch(t,r,n)})}$clearCache(t){return this.z?.clearCache(t),super.$clearCache(t)}v(t,r){return new GE(t,r,void 0,"textSearchProvider")}};Ww=__decorate([__param(0,Ue),__param(1,er),__param(2,el),__param(3,pi),__param(4,Ne)],Ww);function YE(e,t,r,i,s,n){if(Array.isArray(e)){let o=0;for(const a of e){const c=YE(a,t,r,i,s,n);if(c===10)return c;c>o&&(o=c)}return o}else{if(typeof e=="string")return i?e==="*"?5:e===r?10:0:0;if(e){const{language:o,pattern:a,scheme:c,hasAccessToAllModels:l,notebookType:u}=e;if(!i&&!l)return 0;u&&s&&(t=s);let h=0;if(c)if(c===t.scheme)h=10;else if(c==="*")h=5;else return 0;if(o)if(o===r)h=10;else if(o==="*")h=Math.max(h,5);else return 0;if(u)if(u===n)h=10;else if(u==="*"&&n!==void 0)h=Math.max(h,5);else return 0;if(a){let d;if(typeof a=="string"?d=a:d={...a,base:Ss(a.base)},d===t.fsPath||ba(d,t.fsPath))h=10;else return 0}return h}else return 0}}function XE(e){return typeof e=="string"?!1:Array.isArray(e)?e.some(XE):!!e.notebookType}var Vw;(function(e){e[e.None=0]="None",e[e.Indent=1]="Indent",e[e.IndentOutdent=2]="IndentOutdent",e[e.Outdent=3]="Outdent"})(Vw||(Vw={}));var bG=X("editSessionIdentityService"),qw;(function(e){e[e.Complete=100]="Complete",e[e.Partial=50]="Partial",e[e.None=0]="None"})(qw||(qw={}));var YM=class{constructor(e){this.a=new Map,this.b=0,this.c=e.getProxy(K.MainThreadAiRelatedInformation)}async $provideAiRelatedInformation(e,t,r){if(this.a.size===0)throw new Error("No related information providers registered");const i=this.a.get(e);if(!i)throw new Error("related information provider not found");return await i.provideRelatedInformation(t,r)??[]}getRelatedInformation(e,t,r){return this.c.$getAiRelatedInformation(t,r)}registerRelatedInformationProvider(e,t,r){const i=this.b;return this.b++,this.a.set(i,r),this.c.$registerAiRelatedInformationProvider(i,t),new _e(()=>{this.c.$unregisterAiRelatedInformationProvider(i),this.a.delete(i)})}},ZE;(function(e){e[e.Full=1]="Full",e[e.Delta=2]="Delta"})(ZE||(ZE={}));function KE(e){for(let t=0,r=e.length;t<r;t+=4){const i=e[t+0],s=e[t+1],n=e[t+2],o=e[t+3];e[t+0]=o,e[t+1]=n,e[t+2]=s,e[t+3]=i}}function XM(e){const t=new Uint8Array(e.buffer,e.byteOffset,e.length*4);return Gy()||KE(t),re.wrap(t)}function ZM(e){const t=e.buffer;if(Gy()||KE(t),t.byteOffset%4===0)return new Uint32Array(t.buffer,t.byteOffset,t.length/4);{const r=new Uint8Array(t.byteLength);return r.set(t),new Uint32Array(r.buffer,r.byteOffset,r.length/4)}}function Gw(e){const t=new Uint32Array(KM(e));let r=0;if(t[r++]=e.id,e.type==="full")t[r++]=1,t[r++]=e.data.length,t.set(e.data,r),r+=e.data.length;else{t[r++]=2,t[r++]=e.deltas.length;for(const i of e.deltas)t[r++]=i.start,t[r++]=i.deleteCount,i.data?(t[r++]=i.data.length,t.set(i.data,r),r+=i.data.length):t[r++]=0}return XM(t)}function KM(e){let t=0;if(t+=2,e.type==="full")t+=1+e.data.length;else{t+=1,t+=3*e.deltas.length;for(const r of e.deltas)r.data&&(t+=r.data.length)}return t}function eS(e){const t=ZM(e);let r=0;const i=t[r++];if(t[r++]===1){const a=t[r++],c=t.subarray(r,r+a);return r+=a,{id:i,type:"full",data:c}}const n=t[r++],o=[];for(let a=0;a<n;a++){const c=t[r++],l=t[r++],u=t[r++];let h;u>0&&(h=t.subarray(r,r+u),r+=u),o[a]={start:c,deleteCount:l,data:h}}return{id:i,type:"delta",deltas:o}}var ej=[new Se("vscode.executeDocumentHighlights","_executeDocumentHighlights","Execute document highlight provider.",[V.Uri,V.Position],new Ee("A promise that resolves to an array of DocumentHighlight-instances.",Wi(Ga.to))),new Se("vscode.executeDocumentSymbolProvider","_executeDocumentSymbolProvider","Execute document symbol provider.",[V.Uri],new Ee("A promise that resolves to an array of SymbolInformation and DocumentSymbol instances.",(e,t)=>{if(Xg(e))return;class r extends Sa{static to(s){const n=new r(s.name,di.to(s.kind),s.containerName||"",new ii(t[0],W.to(s.range)));return n.detail=s.detail,n.range=n.location.range,n.selectionRange=W.to(s.selectionRange),n.children=s.children?s.children.map(r.to):[],n}}return e.map(r.to)})),new Se("vscode.executeFormatDocumentProvider","_executeFormatDocumentProvider","Execute document format provider.",[V.Uri,new V("options","Formatting options",e=>!0,e=>e)],new Ee("A promise that resolves to an array of TextEdits.",Wi(Jt.to))),new Se("vscode.executeFormatRangeProvider","_executeFormatRangeProvider","Execute range format provider.",[V.Uri,V.Range,new V("options","Formatting options",e=>!0,e=>e)],new Ee("A promise that resolves to an array of TextEdits.",Wi(Jt.to))),new Se("vscode.executeFormatOnTypeProvider","_executeFormatOnTypeProvider","Execute format on type provider.",[V.Uri,V.Position,new V("ch","Trigger character",e=>typeof e=="string",e=>e),new V("options","Formatting options",e=>!0,e=>e)],new Ee("A promise that resolves to an array of TextEdits.",Wi(Jt.to))),new Se("vscode.executeDefinitionProvider","_executeDefinitionProvider","Execute all definition providers.",[V.Uri,V.Position],new Ee("A promise that resolves to an array of Location or LocationLink instances.",Bn)),new Se("vscode.experimental.executeDefinitionProvider_recursive","_executeDefinitionProvider_recursive","Execute all definition providers.",[V.Uri,V.Position],new Ee("A promise that resolves to an array of Location or LocationLink instances.",Bn)),new Se("vscode.executeTypeDefinitionProvider","_executeTypeDefinitionProvider","Execute all type definition providers.",[V.Uri,V.Position],new Ee("A promise that resolves to an array of Location or LocationLink instances.",Bn)),new Se("vscode.experimental.executeTypeDefinitionProvider_recursive","_executeTypeDefinitionProvider_recursive","Execute all type definition providers.",[V.Uri,V.Position],new Ee("A promise that resolves to an array of Location or LocationLink instances.",Bn)),new Se("vscode.executeDeclarationProvider","_executeDeclarationProvider","Execute all declaration providers.",[V.Uri,V.Position],new Ee("A promise that resolves to an array of Location or LocationLink instances.",Bn)),new Se("vscode.experimental.executeDeclarationProvider_recursive","_executeDeclarationProvider_recursive","Execute all declaration providers.",[V.Uri,V.Position],new Ee("A promise that resolves to an array of Location or LocationLink instances.",Bn)),new Se("vscode.executeImplementationProvider","_executeImplementationProvider","Execute all implementation providers.",[V.Uri,V.Position],new Ee("A promise that resolves to an array of Location or LocationLink instances.",Bn)),new Se("vscode.experimental.executeImplementationProvider_recursive","_executeImplementationProvider_recursive","Execute all implementation providers.",[V.Uri,V.Position],new Ee("A promise that resolves to an array of Location or LocationLink instances.",Bn)),new Se("vscode.executeReferenceProvider","_executeReferenceProvider","Execute all reference providers.",[V.Uri,V.Position],new Ee("A promise that resolves to an array of Location-instances.",Wi(Tr.to))),new Se("vscode.experimental.executeReferenceProvider","_executeReferenceProvider_recursive","Execute all reference providers.",[V.Uri,V.Position],new Ee("A promise that resolves to an array of Location-instances.",Wi(Tr.to))),new Se("vscode.executeHoverProvider","_executeHoverProvider","Execute all hover providers.",[V.Uri,V.Position],new Ee("A promise that resolves to an array of Hover-instances.",Wi(eu.to))),new Se("vscode.experimental.executeHoverProvider_recursive","_executeHoverProvider_recursive","Execute all hover providers.",[V.Uri,V.Position],new Ee("A promise that resolves to an array of Hover-instances.",Wi(eu.to))),new Se("vscode.executeSelectionRangeProvider","_executeSelectionRangeProvider","Execute selection range provider.",[V.Uri,new V("position","A position in a text document",e=>Array.isArray(e)&&e.every(t=>Fe.isPosition(t)),e=>e.map(Ze.from))],new Ee("A promise that resolves to an array of ranges.",e=>e.map(t=>{let r;for(const i of t.reverse())r=new Sl(W.to(i),r);return r}))),new Se("vscode.executeWorkspaceSymbolProvider","_executeWorkspaceSymbolProvider","Execute all workspace symbol providers.",[V.String.with("query","Search string")],new Ee("A promise that resolves to an array of SymbolInformation-instances.",e=>e.map(Do.to))),new Se("vscode.prepareCallHierarchy","_executePrepareCallHierarchy","Prepare call hierarchy at a position inside a document",[V.Uri,V.Position],new Ee("A promise that resolves to an array of CallHierarchyItem-instances",e=>e.map(Ao.to))),new Se("vscode.provideIncomingCalls","_executeProvideIncomingCalls","Compute incoming calls for an item",[V.CallHierarchyItem],new Ee("A promise that resolves to an array of CallHierarchyIncomingCall-instances",e=>e.map(Fv.to))),new Se("vscode.provideOutgoingCalls","_executeProvideOutgoingCalls","Compute outgoing calls for an item",[V.CallHierarchyItem],new Ee("A promise that resolves to an array of CallHierarchyOutgoingCall-instances",e=>e.map(Ov.to))),new Se("vscode.prepareRename","_executePrepareRename","Execute the prepareRename of rename provider.",[V.Uri,V.Position],new Ee("A promise that resolves to a range and placeholder text.",e=>{if(e)return{range:W.to(e.range),placeholder:e.text}})),new Se("vscode.executeDocumentRenameProvider","_executeDocumentRenameProvider","Execute rename provider.",[V.Uri,V.Position,V.String.with("newName","The new symbol name")],new Ee("A promise that resolves to a WorkspaceEdit.",e=>{if(e){if(e.rejectReason)throw new Error(e.rejectReason);return xr.to(e)}})),new Se("vscode.executeLinkProvider","_executeLinkProvider","Execute document link provider.",[V.Uri,V.Number.with("linkResolveCount","Number of links that should be resolved, only when links are unresolved.").optional()],new Ee("A promise that resolves to an array of DocumentLink-instances.",e=>e.map(To.to))),new Se("vscode.provideDocumentSemanticTokensLegend","_provideDocumentSemanticTokensLegend","Provide semantic tokens legend for a document",[V.Uri],new Ee("A promise that resolves to SemanticTokensLegend.",e=>{if(e)return new cv(e.tokenTypes,e.tokenModifiers)})),new Se("vscode.provideDocumentSemanticTokens","_provideDocumentSemanticTokens","Provide semantic tokens for a document",[V.Uri],new Ee("A promise that resolves to SemanticTokens.",e=>{if(!e)return;const t=eS(e);if(t.type==="full")return new Ua(t.data,void 0)})),new Se("vscode.provideDocumentRangeSemanticTokensLegend","_provideDocumentRangeSemanticTokensLegend","Provide semantic tokens legend for a document range",[V.Uri,V.Range.optional()],new Ee("A promise that resolves to SemanticTokensLegend.",e=>{if(e)return new cv(e.tokenTypes,e.tokenModifiers)})),new Se("vscode.provideDocumentRangeSemanticTokens","_provideDocumentRangeSemanticTokens","Provide semantic tokens for a document range",[V.Uri,V.Range],new Ee("A promise that resolves to SemanticTokens.",e=>{if(!e)return;const t=eS(e);if(t.type==="full")return new Ua(t.data,void 0)})),new Se("vscode.executeCompletionItemProvider","_executeCompletionItemProvider","Execute completion item provider.",[V.Uri,V.Position,V.String.with("triggerCharacter","Trigger completion when the user types the character, like `,` or `(`").optional(),V.Number.with("itemResolveCount","Number of completions to resolve (too large numbers slow down completions)").optional()],new Ee("A promise that resolves to a CompletionList-instance.",(e,t,r)=>{if(!e)return new Pa([]);const i=e.suggestions.map(s=>Bv.to(s,r));return new Pa(i,e.incomplete)})),new Se("vscode.executeSignatureHelpProvider","_executeSignatureHelpProvider","Execute signature help provider.",[V.Uri,V.Position,V.String.with("triggerCharacter","Trigger signature help when the user types the character, like `,` or `(`").optional()],new Ee("A promise that resolves to SignatureHelp.",e=>{if(e)return tu.to(e)})),new Se("vscode.executeCodeLensProvider","_executeCodeLensProvider","Execute code lens provider.",[V.Uri,V.Number.with("itemResolveCount","Number of lenses that should be resolved and returned. Will only return resolved lenses, will impact performance)").optional()],new Ee("A promise that resolves to an array of CodeLens-instances.",(e,t,r)=>Wi(i=>new Wd(W.to(i.range),i.command&&r.fromInternal(i.command)))(e))),new Se("vscode.executeCodeActionProvider","_executeCodeActionProvider","Execute code action provider.",[V.Uri,new V("rangeOrSelection","Range in a text document. Some refactoring provider requires Selection object.",e=>Re.isRange(e),e=>js.isSelection(e)?Ui.from(e):W.from(e)),V.String.with("kind","Code action kind to return code actions for").optional(),V.Number.with("itemResolveCount","Number of code actions to resolve (too large numbers slow down code actions)").optional()],new Ee("A promise that resolves to an array of Command-instances.",(e,t,r)=>Wi(i=>{if(i._isSynthetic){if(!i.command)throw new Error("Synthetic code actions must have a command");return r.fromInternal(i.command)}else{const s=new _d(i.title,i.kind?new kt(i.kind):void 0);return i.edit&&(s.edit=xr.to(i.edit)),i.command&&(s.command=r.fromInternal(i.command)),s.isPreferred=i.isPreferred,s}})(e))),new Se("vscode.executeDocumentColorProvider","_executeDocumentColorProvider","Execute document color provider.",[V.Uri],new Ee("A promise that resolves to an array of ColorInformation objects.",e=>e?e.map(t=>new Yd(W.to(t.range),Ja.to(t.color))):[])),new Se("vscode.executeColorPresentationProvider","_executeColorPresentationProvider","Execute color presentation provider.",[new V("color","The color to show and insert",e=>e instanceof Ta,Ja.from),new V("context","Context object with uri and range",e=>!0,e=>({uri:e.uri,range:W.from(e.range)}))],new Ee("A promise that resolves to an array of ColorPresentation objects.",e=>e?e.map(qf.to):[])),new Se("vscode.executeInlayHintProvider","_executeInlayHintProvider","Execute inlay hints provider",[V.Uri,V.Range],new Ee("A promise that resolves to an array of Inlay objects",(e,t,r)=>e.map(zv.to.bind(void 0,r)))),new Se("vscode.executeFoldingRangeProvider","_executeFoldingRangeProvider","Execute folding range provider",[V.Uri],new Ee("A promise that resolves to an array of FoldingRange objects",(e,t)=>{if(e)return e.map(Jf.to)})),new Se("vscode.resolveNotebookContentProviders","_resolveNotebookContentProvider","Resolve Notebook Content Providers",[],new Ee("A promise that resolves to an array of NotebookContentProvider static info objects.",Wi(e=>({viewType:e.viewType,displayName:e.displayName,options:{transientOutputs:e.options.transientOutputs,transientCellMetadata:e.options.transientCellMetadata,transientDocumentMetadata:e.options.transientDocumentMetadata},filenamePattern:e.filenamePattern.map(t=>Xf.to(t))})))),new Se("vscode.executeInlineValueProvider","_executeInlineValueProvider","Execute inline value provider",[V.Uri,V.Range,new V("context","An InlineValueContext",e=>e&&typeof e.frameId=="number"&&e.stoppedLocation instanceof Re,e=>Hf.from(e))],new Ee("A promise that resolves to an array of InlineValue objects",e=>e.map(Uf.to))),new Se("vscode.open","_workbench.open","Opens the provided resource in the editor. Can be a text or binary file, or an http(s) URL. If you need more control over the options for opening a text file, use vscode.window.showTextDocument instead.",[new V("uriOrString","Uri-instance or string (only http/https)",e=>k.isUri(e)||typeof e=="string"&&xI(e,Q.http,Q.https),e=>e),new V("columnOrOptions","Either the column in which to open or editor options, see vscode.TextDocumentShowOptions",e=>e===void 0||typeof e=="number"||typeof e=="object",e=>e&&(typeof e=="number"?[Gt.from(e),void 0]:[Gt.from(e.viewColumn),ru.from(e)])).optional(),V.String.with("label","").optional()],Ee.Void),new Se("vscode.openWith","_workbench.openWith","Opens the provided resource with a specific editor.",[V.Uri.with("resource","Resource to open"),V.String.with("viewId","Custom editor view id. This should be the viewType string for custom editors or the notebookType string for notebooks. Use 'default' to use VS Code's default text editor"),new V("columnOrOptions","Either the column in which to open or editor options, see vscode.TextDocumentShowOptions",e=>e===void 0||typeof e=="number"||typeof e=="object",e=>e&&(typeof e=="number"?[Gt.from(e),void 0]:[Gt.from(e.viewColumn),ru.from(e)])).optional()],Ee.Void),new Se("vscode.diff","_workbench.diff","Opens the provided resources in the diff editor to compare their contents.",[V.Uri.with("left","Left-hand side resource of the diff editor"),V.Uri.with("right","Right-hand side resource of the diff editor"),V.String.with("title","Human readable title for the diff editor").optional(),new V("columnOrOptions","Either the column in which to open or editor options, see vscode.TextDocumentShowOptions",e=>e===void 0||typeof e=="object",e=>e&&[Gt.from(e.viewColumn),ru.from(e)]).optional()],Ee.Void),new Se("vscode.changes","_workbench.changes","Opens a list of resources in the changes editor to compare their contents.",[V.String.with("title","Human readable title for the changes editor"),new V("resourceList","List of resources to compare",e=>{for(const t of e){if(t.length!==3)return!1;const[r,i,s]=t;if(!k.isUri(r)||!k.isUri(i)&&i!==void 0&&i!==null||!k.isUri(s)&&s!==void 0&&s!==null)return!1}return!0},e=>e)],Ee.Void),new Se("vscode.prepareTypeHierarchy","_executePrepareTypeHierarchy","Prepare type hierarchy at a position inside a document",[V.Uri,V.Position],new Ee("A promise that resolves to an array of TypeHierarchyItem-instances",e=>e.map(Ro.to))),new Se("vscode.provideSupertypes","_executeProvideSupertypes","Compute supertypes for an item",[V.TypeHierarchyItem],new Ee("A promise that resolves to an array of TypeHierarchyItem-instances",e=>e.map(Ro.to))),new Se("vscode.provideSubtypes","_executeProvideSubtypes","Compute subtypes for an item",[V.TypeHierarchyItem],new Ee("A promise that resolves to an array of TypeHierarchyItem-instances",e=>e.map(Ro.to))),new Se("vscode.revealTestInExplorer","_revealTestInExplorer","Reveals a test instance in the explorer",[V.TestItem],Ee.Void),new Se("vscode.experimental.editSession.continue","_workbench.editSessions.actions.continueEditSession","Continue the current edit session in a different workspace",[V.Uri.with("workspaceUri","The target workspace to continue the current edit session in")],Ee.Void),new Se("setContext","_setContext","Set a custom context key value that can be used in when clauses.",[V.String.with("name","The context key name"),new V("value","The context key value",()=>!0,e=>e)],Ee.Void),new Se("vscode.executeMappedEditsProvider","_executeMappedEditsProvider","Execute Mapped Edits Provider",[V.Uri,V.StringArray,new V("MappedEditsContext","Mapped Edits Context",e=>Yf.is(e),e=>Yf.from(e))],new Ee("A promise that resolves to a workspace edit or null",e=>e?xr.to(e):null)),new Se("vscode.editorChat.start","inlineChat.start","Invoke a new editor chat session",[new V("Run arguments","",e=>!0,e=>{if(e)return{initialRange:e.initialRange?W.from(e.initialRange):void 0,initialSelection:js.isSelection(e.initialSelection)?Ui.from(e.initialSelection):void 0,message:e.message,autoSend:e.autoSend,position:e.position?Ze.from(e.position):void 0}})],Ee.Void)],tj=class{static register(e){ej.forEach(e.registerApiCommand,e),this.a(e)}static a(e){e.registerCommand(!1,"_validateWhenClauses",SA)}};function Wi(e){return t=>{if(Array.isArray(t))return t.map(e)}}function Bn(e){if(!Array.isArray(e))return;const t=[];for(const r of e)mT(r)?t.push(Kl.to(r)):t.push(Tr.to(r));return t}var Jw=class{constructor(t,r){this.a=t.getProxy(K.MainThreadBulkEdits),this.b={getTextDocumentVersion:i=>r.getDocument(i)?.version,getNotebookDocumentVersion:()=>{}}}applyWorkspaceEdit(t,r,i){const s=new ei(xr.from(t,this.b));return this.a.$tryApplyWorkspaceEdit(s,void 0,i?.isRefactoring??!1)}};Jw=__decorate([__param(0,Ue)],Jw);var tS;(function(e){e[e.Complete=1]="Complete",e[e.Partial=2]="Partial",e[e.Omitted=3]="Omitted"})(tS||(tS={}));var Zp;(function(e){e[e.Down=0]="Down",e[e.Up=1]="Up"})(Zp||(Zp={}));var rS;(function(e){e.IncorrectCode="incorrectCode",e.DidNotFollowInstructions="didNotFollowInstructions",e.IncompleteCode="incompleteCode",e.MissingContext="missingContext",e.PoorlyWrittenOrFormatted="poorlyWrittenOrFormatted",e.RefusedAValidRequest="refusedAValidRequest",e.OffensiveOrUnsafe="offensiveOrUnsafe",e.Other="other",e.WillReportIssue="willReportIssue"})(rS||(rS={}));var iS;(function(e){e[e.Action=1]="Action",e[e.Toolbar=2]="Toolbar"})(iS||(iS={}));var kG=X("IChatService"),rj=class{constructor(e,t,r,i,s){this.j=e,this.k=t,this.l=r,this.m=i,this.n=s,this.b=Hr.create(!1),this.c=!1}close(){this.c=!0}get timings(){return{firstProgress:this.d,totalElapsed:this.b.elapsed()}}get apiObject(){if(!this.g){let t=function(s){if(r.c){const n=new Error("Response stream has been closed");throw Error.captureStackTrace(n,s),n}};var e=t;const r=this;this.b.reset();const i=(s,n)=>{if(typeof this.d>"u"&&(s.kind==="markdownContent"||s.kind==="markdownVuln")&&(this.d=this.b.elapsed()),n){const o=this.l.$handleProgressChunk(this.k.requestId,s),a={report:c=>{o?.then(l=>{l&&(Jr.isMarkdownString(c.value)?this.l.$handleProgressChunk(this.k.requestId,hu.from(c),l):this.l.$handleProgressChunk(this.k.requestId,Ws.from(c),l))})}};Promise.all([o,n?.(a)]).then(([c,l])=>{c!==void 0&&this.l.$handleProgressChunk(this.k.requestId,e0.from(l),c)})}else this.l.$handleProgressChunk(this.k.requestId,s)};this.g={markdown(s){t(this.markdown);const n=new Sf(s),o=cu.from(n);return i(o),this},markdownWithVulnerabilities(s,n){t(this.markdown),n&&H(r.j,"chatParticipantAdditions");const o=new Vl(s,n),a=ip.from(o);return i(a),this},codeblockUri(s){t(this.codeblockUri),H(r.j,"chatParticipantAdditions");const n=new Af(s),o=rp.from(n);return i(o),this},filetree(s,n){t(this.filetree);const o=new Cf(s,n),a=lu.from(o);return i(a),this},anchor(s,n){t(this.anchor);const o=new Pf(s,n),a=uu.from(o);return i(a),this},button(s){t(this.anchor);const n=new Df(s),o=du.from(n,r.m,r.n);return i(o),this},progress(s,n){t(this.progress);const o=new If(s,n),a=n?op.from(o):Lo.from(o);return i(a,n),this},warning(s){t(this.progress),H(r.j,"chatParticipantAdditions");const n=new Jl(s),o=hu.from(n);return i(o),this},reference(s,n){return this.reference2(s,n)},reference2(s,n,o){if(t(this.reference),typeof s=="object"&&"variableName"in s&&H(r.j,"chatParticipantAdditions"),typeof s=="object"&&"variableName"in s&&!s.value){const a=r.k.variables.variables.find(c=>c.name===s.variableName);if(a){let c;if(a.references?.length)c=a.references.map(l=>({kind:"reference",reference:{variableName:s.variableName,value:l.reference}}));else{const l=new Bs(s,n,o);c=[Ws.from(l)]}return c.forEach(l=>i(l)),this}}else{const a=new Bs(s,n,o),c=Ws.from(a);i(c)}return this},codeCitation(s,n,o){t(this.codeCitation),H(r.j,"chatParticipantAdditions");const a=new Tf(s,n,o),c=cp.from(a);i(c)},textEdit(s,n){t(this.textEdit),H(r.j,"chatParticipantAdditions");const o=new Ql(s,n),a=ap.from(o);return i(a),this},detectedParticipant(s,n){t(this.detectedParticipant),H(r.j,"chatParticipantAdditions");const o=new ql(s,n),a=sp.from(o);return i(a),this},confirmation(s,n,o,a){t(this.confirmation),H(r.j,"chatParticipantAdditions");const c=new $f(s,n,o,a),l=np.from(c);return i(l),this},push(s){if(t(this.push),(s instanceof Ql||s instanceof Vl||s instanceof ql||s instanceof Jl||s instanceof $f||s instanceof Tf||s instanceof Rf||s instanceof If)&&H(r.j,"chatParticipantAdditions"),s instanceof Bs)this.reference2(s.value,s.iconPath,s.options);else if(s instanceof If){const n=s.task?op.from(s):Lo.from(s);i(n,s.task)}else{const n=lp.from(s,r.m,r.n);i(n)}return this}}}return this.g}},ij=class Ug extends ae{static{this.b=0}static{this.j=0}constructor(t,r,i,s,n){super(),this.t=r,this.u=i,this.w=s,this.y=n,this.c=new Map,this.m=new Map,this.n=this.B(new ph),this.s=this.B(new ph),this.g=t.getProxy(K.MainThreadChatAgents2)}transferActiveChat(t){this.g.$transferActiveChatSession(t)}createChatAgent(t,r,i){const s=Ug.b++,n=new sS(t,r,this.g,s,i);return this.c.set(s,n),this.g.$registerAgent(s,t.identifier,r,{},void 0),n.apiAgent}createDynamicChatAgent(t,r,i,s){const n=Ug.b++,o=new sS(t,r,this.g,n,s);return this.c.set(n,o),this.g.$registerAgent(n,t.identifier,r,{isSticky:!0},i),o.apiAgent}registerChatParticipantDetectionProvider(t,r){const i=Ug.j++;return this.m.set(i,new sj(t,r)),this.g.$registerChatParticipantDetectionProvider(i),me(()=>{this.m.delete(i),this.g.$unregisterChatParticipantDetectionProvider(i)})}async $detectChatParticipant(t,r,i,s,n){const{request:o,location:a,history:c}=await this.z(r,i),l=this.m.get(t);if(!l)return;const u=up.to(o,a);return o.userSelectedModelId&&zt(l.extension,"chatParticipantAdditions")&&(u.userSelectedModel=await this.y.getLanguageModelByIdentifier(l.extension,o.userSelectedModelId)),l.provider.provideParticipantDetection(u,{history:c},{participants:s.participants,location:fu.to(s.location)},n)}async z(t,r){const i=dr(t),s=await this.C(i.agentId,r);let n;if(i.locationData?.type===Ir.Editor){const o=this.w.getDocument(i.locationData.document);n=new W9(o,Ui.to(i.locationData.selection),W.to(i.locationData.wholeRange))}else if(i.locationData?.type===Ir.Notebook){const o=this.w.getDocument(i.locationData.sessionInputUri);n=new V9(o)}else i.locationData?.type,Ir.Terminal;return{request:i,location:n,history:s}}async $invokeAgent(t,r,i,s){const n=this.c.get(t);if(!n)throw new Error(`[CHAT](${t}) CANNOT invoke agent because the agent is not registered`);let o;try{const{request:a,location:c,history:l}=await this.z(r,i);let u=this.n.get(a.sessionId);u||(u=new be,this.n.set(a.sessionId,u)),o=new rj(n.extension,a,this.g,this.u.converter,u);const h=up.to(a,c);a.userSelectedModelId&&zt(n.extension,"chatParticipantAdditions")&&(h.userSelectedModel=await this.y.getLanguageModelByIdentifier(n.extension,a.userSelectedModelId));const d=n.invoke(h,{history:l},o.apiObject,s);return await N4(Promise.resolve(d).then(f=>{if(f?.metadata)try{JSON.stringify(f.metadata)}catch(v){const x=`result.metadata MUST be JSON.stringify-able. Got error: ${v.message}`;return this.t.error(`[${n.extension.identifier.value}] [@${n.id}] ${x}`,n.extension),{errorDetails:{message:x},timings:o?.timings,nextQuestion:f.nextQuestion}}let g;return f?.errorDetails&&(g={...f.errorDetails,responseIsIncomplete:!0}),g?.responseIsRedacted&&H(n.extension,"chatParticipantPrivate"),{errorDetails:g,timings:o?.timings,metadata:f?.metadata,nextQuestion:f?.nextQuestion}}),s)}catch(a){return this.t.error(a,n.extension),a instanceof zs&&a.cause&&(a=a.cause),{errorDetails:{message:yn(a),responseIsIncomplete:!0}}}finally{o?.close()}}async C(t,r){const i=[];for(const s of r.history){const n=tc.to(s.result),o=t===s.request.agentId?n:{...n,metadata:void 0},a=s.request.variables.variables.filter(h=>!h.isTool).map(hp.to),c=s.request.variables.variables.filter(h=>h.isTool).map(dp.to),l=new z9(s.request.message,s.request.command,a,s.request.agentId);l.toolReferences=c,i.push(l);const u=Rt(s.response.map(h=>lp.toContent(h,this.u.converter)));i.push(new _9(u,o,s.request.agentId,s.request.command))}return i}$releaseSession(t){this.n.deleteAndDispose(t)}async $provideFollowups(t,r,i,s,n){const o=this.c.get(r);if(!o)return Promise.resolve([]);const a=dr(t),c=await this.C(o.id,s),l=tc.to(i);return(await o.provideFollowups(l,{history:c},n)).filter(u=>{const h=!u.participant||ci.some(this.c.values(),d=>d.id===u.participant&&rt.equals(d.extension.identifier,o.extension.identifier));return h||this.t.warn(`[@${o.id}] ChatFollowup refers to an unknown participant: ${u.participant}`),h}).map(u=>au.from(u,a))}$acceptFeedback(t,r,i){const s=this.c.get(t);if(!s)return;const n=tc.to(r);let o;switch(i.direction){case Zp.Down:o=Wl.Unhelpful;break;case Zp.Up:o=Wl.Helpful;break}const a={result:n,kind:o,unhelpfulReason:zt(s.extension,"chatParticipantAdditions")?i.reason:void 0};s.acceptFeedback(Object.freeze(a))}$acceptAction(t,r,i){const s=this.c.get(t);if(!s||i.action.kind==="vote")return;const n=r0.to(r,i,this.u.converter);n&&s.acceptAction(Object.freeze(n))}async $invokeCompletionProvider(t,r,i){const s=this.c.get(t);if(!s)return[];let n=this.s.get(t);return n?n.clear():(n=new be,this.s.set(t,n)),(await s.invokeCompletionProvider(r,i)).map(a=>t0.from(a,this.u.converter,n))}async $provideWelcomeMessage(t,r){const i=this.c.get(t);if(i)return await i.provideWelcomeMessage(r)}async $provideChatTitle(t,r,i){const s=this.c.get(t);if(!s)return;const n=await this.C(s.id,{history:r});return await s.provideTitle({history:n},i)}async $provideSampleQuestions(t,r,i){const s=this.c.get(t);if(s)return(await s.provideSampleQuestions(fu.to(r),i)).map(n=>au.from(n,void 0))}},sj=class{constructor(e,t){this.extension=e,this.provider=t}},sS=class{constructor(e,t,r,i,s){this.extension=e,this.id=t,this.w=r,this.x=i,this.y=s,this.l=new T,this.m=new T}acceptFeedback(e){this.l.fire(e)}acceptAction(e){this.m.fire(e)}async invokeCompletionProvider(e,t){return this.o?await this.o.provider.provideCompletionItems(e,t)??[]:[]}async provideFollowups(e,t,r){if(!this.b)return[];const i=await this.b.provideFollowups(e,t,r);return i?i.filter(s=>!(s&&"commandId"in s)).filter(s=>!(s&&"message"in s)):[]}async provideWelcomeMessage(e){if(!this.q?.provideWelcomeMessage)return;const t=await this.q.provideWelcomeMessage(e),r=t?.icon;if(!(!t||!or.isThemeIcon(r)))return{...t,icon:r,message:Oe.from(t.message)}}async provideTitle(e,t){if(this.s)return await this.s.provideChatTitle(e,t)??void 0}async provideSampleQuestions(e,t){if(!this.q||!this.q.provideSampleQuestions)return[];const r=await this.q.provideSampleQuestions(e,t);return r||[]}get apiAgent(){let e=!1,t=!1;const r=()=>{e||t||(t=!0,queueMicrotask(()=>{this.w.$updateAgent(this.x,{icon:this.c?this.c instanceof k?this.c:"light"in this.c?this.c.light:void 0:void 0,iconDark:this.c&&"dark"in this.c?this.c.dark:void 0,themeIcon:this.c instanceof vr?this.c:void 0,hasFollowups:this.b!==void 0,isSecondary:this.k,helpTextPrefix:!this.d||typeof this.d=="string"?this.d:Oe.from(this.d),helpTextVariablesPrefix:!this.g||typeof this.g=="string"?this.g:Oe.from(this.g),helpTextPostfix:!this.j||typeof this.j=="string"?this.j:Oe.from(this.j),supportIssueReporting:this.n,requester:this.t,supportsSlowVariables:this.u}),t=!1}))},i=this;return{get id(){return i.id},get iconPath(){return i.c},set iconPath(s){i.c=s,r()},get requestHandler(){return i.y},set requestHandler(s){p4(typeof s=="function","Invalid request handler"),i.y=s},get followupProvider(){return i.b},set followupProvider(s){i.b=s,r()},get helpTextPrefix(){return H(i.extension,"defaultChatParticipant"),i.d},set helpTextPrefix(s){H(i.extension,"defaultChatParticipant"),i.d=s,r()},get helpTextVariablesPrefix(){return H(i.extension,"defaultChatParticipant"),i.g},set helpTextVariablesPrefix(s){H(i.extension,"defaultChatParticipant"),i.g=s,r()},get helpTextPostfix(){return H(i.extension,"defaultChatParticipant"),i.j},set helpTextPostfix(s){H(i.extension,"defaultChatParticipant"),i.j=s,r()},get isSecondary(){return H(i.extension,"defaultChatParticipant"),i.k},set isSecondary(s){H(i.extension,"defaultChatParticipant"),i.k=s,r()},get supportIssueReporting(){return H(i.extension,"chatParticipantPrivate"),i.n},set supportIssueReporting(s){H(i.extension,"chatParticipantPrivate"),i.n=s,r()},get onDidReceiveFeedback(){return i.l.event},set participantVariableProvider(s){if(H(i.extension,"chatParticipantAdditions"),i.o=s,s){if(!s.triggerCharacters.length)throw new Error("triggerCharacters are required");i.w.$registerAgentCompletionsProvider(i.x,i.id,s.triggerCharacters)}else i.w.$unregisterAgentCompletionsProvider(i.x,i.id)},get participantVariableProvider(){return H(i.extension,"chatParticipantAdditions"),i.o},set welcomeMessageProvider(s){H(i.extension,"defaultChatParticipant"),i.q=s,r()},get welcomeMessageProvider(){return H(i.extension,"defaultChatParticipant"),i.q},set titleProvider(s){H(i.extension,"defaultChatParticipant"),i.s=s,r()},get titleProvider(){return H(i.extension,"defaultChatParticipant"),i.s},onDidPerformAction:zt(this.extension,"chatParticipantAdditions")?this.m.event:void 0,set requester(s){i.t=s,r()},get requester(){return i.t},set supportsSlowReferences(s){H(i.extension,"chatParticipantPrivate"),i.u=s,r()},get supportsSlowReferences(){return H(i.extension,"chatParticipantPrivate"),i.u},dispose(){e=!0,i.b=void 0,i.l.dispose(),i.w.$unregisterAgent(i.x)}}}invoke(e,t,r,i){return this.y(e,t,r,i)}},nj=class G3{static{this.a=0}constructor(t){this.b=new Map,this.c=t.getProxy(K.MainThreadChatVariables)}async $resolveVariable(t,r,i,s){const n=this.b.get(t);if(n)try{if(n.resolver.resolve2){H(n.extension,"chatParticipantAdditions");const o=new oj(r,this.c),a=await n.resolver.resolve2(n.data.name,{prompt:i},o.apiObject,s);if(a&&a[0])return a[0].value}else{const o=await n.resolver.resolve(n.data.name,{prompt:i},s);if(o&&o[0])return o[0].value}}catch(o){Gg(o)}}registerVariableResolver(t,r,i,s,n,o,a,c,l){const u=G3.a++,h=l?or.fromId(l):void 0;return this.b.set(u,{extension:t,data:{id:r,name:i,description:s,modelDescription:n,icon:h},resolver:a}),this.c.$registerVariable(u,{id:r,name:i,description:s,modelDescription:n,isSlow:o,fullName:c,icon:h}),me(()=>{this.b.delete(u),this.c.$unregisterVariable(u)})}},oj=class{constructor(e,t){this.c=e,this.d=t,this.a=!1}close(){this.a=!0}get apiObject(){if(!this.b){let t=function(s){if(r.a){const n=new Error("Response stream has been closed");throw Error.captureStackTrace(n,s),n}};var e=t;const r=this,i=s=>{this.d.$handleProgressChunk(this.c,s)};this.b={progress(s){t(this.progress);const n=new Gl(s),o=Lo.from(n);return i(o),this},reference(s){t(this.reference);const n=new Bs(s),o=Ws.from(n);return i(o),this},push(s){return t(this.push),s instanceof Bs?i(Ws.from(s)):s instanceof Gl&&i(Lo.from(s)),this}}}return this.b}},aj=class{constructor(e){const t=e.getProxy(K.MainThreadClipboard);this.value=Object.freeze({readText(){return t.$readText()},writeText(r){return t.$writeText(r)}})}},nS="vscode-cdn.net",cj=`vscode-resource.${nS}`,Qw=`'self' https://*.${nS}`;function Mu(e,t){return e.scheme===Q.http||e.scheme===Q.https?e:(t&&t.authority&&t.isRemote&&e.scheme===Q.file&&(e=k.from({scheme:Q.vscodeRemote,authority:t.authority,path:e.path})),k.from({scheme:Q.https,authority:`${e.scheme}+${lj(e.authority)}.${cj}`,path:e.path,fragment:e.fragment,query:e.query}))}function lj(e){return e.replace(/./g,t=>{const r=t.charCodeAt(0);return r>=97&&r<=122||r>=65&&r<=90||r>=48&&r<=57?t:"-"+r.toString(16).padStart(4,"0")})}var uj=class{constructor(e,t,r){this.d=e,this.e=t,this.f=r,this.a=0,this.b=new be,this.c=new Map,this.b.add(t.onDidChangeVisibleTextEditors(()=>{const i=t.getVisibleTextEditors();for(const s of this.c.values())i.indexOf(s.editor)<0&&s.inset.dispose()}))}dispose(){this.c.forEach(e=>e.inset.dispose()),this.b.dispose()}createWebviewEditorInset(e,t,r,i,s){let n;for(const d of this.e.getVisibleTextEditors(!0))if(d.value===e){n=d;break}if(!n)throw new Error("not a visible editor");const o=this,a=this.a++,c=new T,l=new T,u=new class{constructor(){this.a="",this.b=Object.create(null)}asWebviewUri(d){return Mu(d,o.f)}get cspSource(){return Qw}set options(d){this.b=d,o.d.$setOptions(a,d)}get options(){return this.b}set html(d){this.a=d,o.d.$setHtml(a,d)}get html(){return this.a}get onDidReceiveMessage(){return c.event}postMessage(d){return o.d.$postMessage(a,d)}},h=new class{constructor(){this.editor=e,this.line=t,this.height=r,this.webview=u,this.onDidDispose=l.event}dispose(){o.c.has(a)&&(o.c.delete(a),o.d.$disposeEditorInset(a),l.fire(),l.dispose(),c.dispose())}};return this.d.$createEditorInset(a,n.id,n.value.document.uri,t+1,r,i||{},s.identifier,s.extensionLocation),this.c.set(a,{editor:e,inset:h,onDidReceiveMessage:c}),h}$onDidDispose(e){const t=this.c.get(e);t&&t.inset.dispose()}$onDidReceiveMessage(e,t){this.c.get(e)?.onDidReceiveMessage.fire(t)}};function hj(e,t,r){const i=e.getProxy(K.MainThreadComments);class s{static{this.a=0}constructor(){this.b=new Map,this.c=new Os,t.registerArgumentProcessor({processArgument:g=>{if(g&&g.$mid===6){const v=this.b.get(g.handle);return v?v.value:g}else if(g&&g.$mid===7){const v=g,x=this.b.get(v.commentControlHandle);if(!x)return v;const $=x.getCommentThread(v.commentThreadHandle);return $?$.value:v}else if(g&&(g.$mid===9||g.$mid===8)){const v=this.b.get(g.thread.commentControlHandle);if(!v)return g;const x=v.getCommentThread(g.thread.commentThreadHandle);return x?g.$mid===8?x.value:{thread:x.value,text:g.text}:g}else if(g&&g.$mid===10){const v=this.b.get(g.thread.commentControlHandle);if(!v)return g;const x=v.getCommentThread(g.thread.commentThreadHandle);if(!x)return g;const $=g.commentUniqueId,C=x.getCommentByUniqueId($);return C||g}else if(g&&g.$mid===11){const v=this.b.get(g.thread.commentControlHandle);if(!v)return g;const x=v.getCommentThread(g.thread.commentThreadHandle);if(!x)return g;const $=g.text,C=g.commentUniqueId,L=x.getCommentByUniqueId(C);return L?(typeof L.body=="string"?L.body=$:L.body=new Jr($),L):g}return g}})}createCommentController(g,v,x){const $=s.a++,C=new o(g,$,v,x);this.b.set(C.handle,C);const L=this.c.get(g.identifier)||[];return L.push(C),this.c.set(g.identifier,L),C.value}async $createCommentThreadTemplate(g,v,x,$){const C=this.b.get(g);C&&C.$createCommentThreadTemplate(v,x,$)}async $setActiveComment(g,v){const x=this.b.get(g);x&&x.$setActiveComment(v??void 0)}async $updateCommentThreadTemplate(g,v,x){const $=this.b.get(g);$&&$.$updateCommentThreadTemplate(v,x)}$deleteCommentThread(g,v){this.b.get(g)?.$deleteCommentThread(v)}async $provideCommentingRanges(g,v,x){const $=this.b.get(g);if(!$||!$.commentingRangeProvider)return Promise.resolve(void 0);const C=await r.ensureDocumentData(k.revive(v));return mr(async()=>{const L=await $.commentingRangeProvider.provideCommentingRanges(C.document,x);let F;return Array.isArray(L)?F={ranges:L,fileComments:!1}:L?F={ranges:L.ranges||[],fileComments:L.enableFileComments||!1}:F=L??void 0,F}).then(L=>{let F;return L&&(F={ranges:L.ranges.map(z=>W.from(z)),fileComments:L.fileComments}),F})}$toggleReaction(g,v,x,$,C){const L=this.b.get(g);return!L||!L.reactionHandler?Promise.resolve(void 0):mr(()=>{const F=L.getCommentThread(v);if(F){const z=F.getCommentByUniqueId($.uniqueIdInThread);if(L!==void 0&&z&&L.reactionHandler)return L.reactionHandler(z,l(C))}return Promise.resolve(void 0)})}}class n{static{this.a=0}set threadId(g){this.n=g}get threadId(){return this.n}get id(){return this.n}get resource(){return this.o}get uri(){return this.o}set range(g){(g===void 0!=(this.p===void 0)||!g||!this.p||!g.isEqual(this.p))&&(this.p=g,this.b.range=g,this.c.fire())}get range(){return this.p}set canReply(g){this.d!==g&&(this.d=g,this.b.canReply=g,this.c.fire())}get canReply(){return this.d}get label(){return this.e}set label(g){this.e=g,this.b.label=g,this.c.fire()}get contextValue(){return this.f}set contextValue(g){this.f=g,this.b.contextValue=g,this.c.fire()}get comments(){return this.q}set comments(g){this.q=g,this.b.comments=g,this.c.fire()}get collapsibleState(){return this.g}set collapsibleState(g){this.g=g,this.b.collapsibleState=g,this.c.fire()}get state(){return this.h}set state(g){this.h=g,typeof g=="object"?(H(this.extensionDescription,"commentThreadApplicability"),this.b.state=g.resolved,this.b.applicability=g.applicability):this.b.state=g,this.c.fire()}get isDisposed(){return this.j}constructor(g,v,x,$,C,L,F,z,Y){this.m=v,this.n=x,this.o=$,this.p=C,this.q=L,this.extensionDescription=F,this.r=z,this.handle=n.a++,this.commentHandle=0,this.b=Object.create(null),this.c=new T,this.onDidUpdateCommentThread=this.c.event,this.d=!0,this.k=new Map,this.l=new ks,this.l.value=new be,this.n===void 0&&(this.n=`${g}.${this.handle}`),i.$createCommentThread(v,this.handle,this.n,this.o,W.from(this.p),this.q.map(Z=>a(this,Z,this.k,this.extensionDescription)),F.identifier,this.r,Y),this.i=[],this.j=!1,this.i.push(this.onDidUpdateCommentThread(()=>{this.eventuallyUpdateCommentThread()})),this.i.push({dispose:()=>{i.$deleteCommentThread(v,this.handle)}});const oe=this;this.value={get uri(){return oe.uri},get range(){return oe.range},set range(Z){oe.range=Z},get comments(){return oe.comments},set comments(Z){oe.comments=Z},get collapsibleState(){return oe.collapsibleState},set collapsibleState(Z){oe.collapsibleState=Z},get canReply(){return oe.canReply},set canReply(Z){oe.canReply=Z},get contextValue(){return oe.contextValue},set contextValue(Z){oe.contextValue=Z},get label(){return oe.label},set label(Z){oe.label=Z},get state(){return oe.state},set state(Z){oe.state=Z},reveal:(Z,se)=>oe.reveal(Z,se),hide:()=>oe.hide(),dispose:()=>{oe.dispose()}}}s(){this.r&&(this.r=!1,this.b.isTemplate=!1)}eventuallyUpdateCommentThread(){if(this.j)return;this.s(),this.l.value||(this.l.value=new be);const g=x=>Object.prototype.hasOwnProperty.call(this.b,x),v={};g("range")&&(v.range=W.from(this.p)),g("label")&&(v.label=this.label),g("contextValue")&&(v.contextValue=this.contextValue??null),g("comments")&&(v.comments=this.q.map(x=>a(this,x,this.k,this.extensionDescription))),g("collapsibleState")&&(v.collapseState=u(this.g)),g("canReply")&&(v.canReply=this.canReply),g("state")&&(v.state=h(this.h)),g("applicability")&&(v.applicability=d(this.h)),g("isTemplate")&&(v.isTemplate=this.r),this.b={},i.$updateCommentThread(this.m,this.handle,this.n,this.o,v)}getCommentByUniqueId(g){for(const v of this.k){const x=v[0],$=v[1];if(g===$)return x}}async reveal(g,v){H(this.extensionDescription,"commentReveal");let x;g&&g.body!==void 0?x=g:v=v??g;let $=x?this.k.get(x):void 0;$??=this.k.get(this.q[0]);let C=!0,L=!1;return v?.focus===jl.Reply?(L=!0,C=!1):v?.focus===jl.Comment&&(C=!1),i.$revealCommentThread(this.m,this.handle,$,{preserveFocus:C,focusReply:L})}async hide(){return i.$hideCommentThread(this.m,this.handle)}dispose(){this.j=!0,this.l.dispose(),this.i.forEach(g=>g.dispose())}}__decorate([zh(100)],n.prototype,"eventuallyUpdateCommentThread",null);class o{get id(){return this.j}get label(){return this.k}get handle(){return this.i}get commentingRangeProvider(){return this.b}set commentingRangeProvider(g){this.b=g,g?.resourceHints&&H(this.h,"commentingRangeHint"),i.$updateCommentingRanges(this.handle,g?.resourceHints)}get reactionHandler(){return this.c}set reactionHandler(g){this.c=g,i.$updateCommentControllerFeatures(this.handle,{reactionHandler:!!g})}get options(){return this.d}set options(g){this.d=g,i.$updateCommentControllerFeatures(this.handle,{options:this.d})}get activeComment(){return H(this.h,"activeComment"),this.e}get activeCommentThread(){return H(this.h,"activeComment"),this.f?.value}constructor(g,v,x,$){this.h=g,this.i=v,this.j=x,this.k=$,this.a=new Map,i.$registerCommentController(this.handle,x,$,this.h.identifier.value);const C=this;this.value=Object.freeze({id:C.id,label:C.label,get options(){return C.options},set options(L){C.options=L},get commentingRangeProvider(){return C.commentingRangeProvider},set commentingRangeProvider(L){C.commentingRangeProvider=L},get reactionHandler(){return C.reactionHandler},set reactionHandler(L){C.reactionHandler=L},get activeCommentThread(){return C.activeCommentThread},createCommentThread(L,F,z){return C.createCommentThread(L,F,z).value},dispose:()=>{C.dispose()}}),this.g=[],this.g.push({dispose:()=>{i.$unregisterCommentController(this.handle)}})}createCommentThread(g,v,x){v===void 0&&H(this.h,"fileComments");const $=new n(this.id,this.handle,void 0,g,v,x,this.h,!1);return this.a.set($.handle,$),$}$setActiveComment(g){if(!g){this.e=void 0,this.f=void 0;return}const v=this.a.get(g.commentThreadHandle);v&&(this.e=g.uniqueIdInThread?v.getCommentByUniqueId(g.uniqueIdInThread):void 0,this.f=v)}$createCommentThreadTemplate(g,v,x){const $=new n(this.id,this.handle,void 0,k.revive(g),W.to(v),[],this.h,!0,x);return $.collapsibleState=fa.Expanded,this.a.set($.handle,$),$}$updateCommentThreadTemplate(g,v){const x=this.a.get(g);x&&(x.range=W.to(v))}$deleteCommentThread(g){this.a.get(g)?.dispose(),this.a.delete(g)}getCommentThread(g){return this.a.get(g)}dispose(){this.a.forEach(g=>{g.dispose()}),this.g.forEach(g=>g.dispose())}}function a(f,g,v,x){let $=v.get(g);return $||($=++f.commentHandle,v.set(g,$)),g.state!==void 0&&H(x,"commentsDraftState"),g.reactions?.some(C=>C.reactors!==void 0)&&H(x,"commentReactor"),{mode:g.mode,contextValue:g.contextValue,uniqueIdInThread:$,body:typeof g.body=="string"?g.body:Oe.from(g.body),userName:g.author.name,userIconPath:g.author.iconPath,label:g.label,commentReactions:g.reactions?g.reactions.map(C=>c(C)):void 0,state:g.state,timestamp:g.timestamp?.toJSON()}}function c(f){return{label:f.label,iconPath:f.iconPath?Mf(f.iconPath):void 0,count:f.count,hasReacted:f.authorHasReacted,reactors:f.reactors&&f.reactors.length>0&&typeof f.reactors[0]!="string"?f.reactors.map(g=>g.name):f.reactors}}function l(f){return{label:f.label||"",count:f.count||0,iconPath:f.iconPath?k.revive(f.iconPath):"",authorHasReacted:f.hasReacted||!1,reactors:f.reactors?.map(g=>({name:g}))}}function u(f){if(f!==void 0)switch(f){case Fl.Expanded:return fa.Expanded;case Fl.Collapsed:return fa.Collapsed}return fa.Collapsed}function h(f){let g;if(typeof f=="object"?g=f.resolved:g=f,g!==void 0)switch(g){case Ol.Unresolved:return il.Unresolved;case Ol.Resolved:return il.Resolved}return il.Unresolved}function d(f){let g;if(typeof f=="object"&&(g=f.applicability),g!==void 0)switch(g){case Ml.Current:return sl.Current;case Ml.Outdated:return sl.Outdated}return sl.Current}return new s}var Kp={},We={exports:Kp};(function(e,t){if(typeof Kp=="object"&&typeof We=="object")We.exports=t();else if(typeof define=="function"&&define.amd)define([],t);else{var r=t();for(var i in r)(typeof Kp=="object"?Kp:e)[i]=r[i]}})(typeof self<"u"?self:void 0,function(){return function(e){var t={};function r(i){if(t[i])return t[i].exports;var s=t[i]={i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,r),s.l=!0,s.exports}return r.m=e,r.c=t,r.d=function(i,s,n){r.o(i,s)||Object.defineProperty(i,s,{enumerable:!0,get:n})},r.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},r.t=function(i,s){if(1&s&&(i=r(i)),8&s||4&s&&typeof i=="object"&&i&&i.__esModule)return i;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:i}),2&s&&typeof i!="string")for(var o in i)r.d(n,o,function(a){return i[a]}.bind(null,o));return n},r.n=function(i){var s=i&&i.__esModule?function(){return i.default}:function(){return i};return r.d(s,"a",s),s},r.o=function(i,s){return Object.prototype.hasOwnProperty.call(i,s)},r.p="",r(r.s=0)}([function(e,t,r){(function(i){var s;t=e.exports=Je,s=typeof i=="object"&&i.env&&i.env.NODE_DEBUG&&/\bsemver\b/i.test(i.env.NODE_DEBUG)?function(){var A=Array.prototype.slice.call(arguments,0);A.unshift("SEMVER"),console.log.apply(console,A)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var n=256,o=Number.MAX_SAFE_INTEGER||9007199254740991,a=t.re=[],c=t.src=[],l=0,u=l++;c[u]="0|[1-9]\\d*";var h=l++;c[h]="[0-9]+";var d=l++;c[d]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var f=l++;c[f]="("+c[u]+")\\.("+c[u]+")\\.("+c[u]+")";var g=l++;c[g]="("+c[h]+")\\.("+c[h]+")\\.("+c[h]+")";var v=l++;c[v]="(?:"+c[u]+"|"+c[d]+")";var x=l++;c[x]="(?:"+c[h]+"|"+c[d]+")";var $=l++;c[$]="(?:-("+c[v]+"(?:\\."+c[v]+")*))";var C=l++;c[C]="(?:-?("+c[x]+"(?:\\."+c[x]+")*))";var L=l++;c[L]="[0-9A-Za-z-]+";var F=l++;c[F]="(?:\\+("+c[L]+"(?:\\."+c[L]+")*))";var z=l++,Y="v?"+c[f]+c[$]+"?"+c[F]+"?";c[z]="^"+Y+"$";var oe="[v=\\s]*"+c[g]+c[C]+"?"+c[F]+"?",Z=l++;c[Z]="^"+oe+"$";var se=l++;c[se]="((?:<|>)?=?)";var Ae=l++;c[Ae]=c[h]+"|x|X|\\*";var xe=l++;c[xe]=c[u]+"|x|X|\\*";var tt=l++;c[tt]="[v=\\s]*("+c[xe]+")(?:\\.("+c[xe]+")(?:\\.("+c[xe]+")(?:"+c[$]+")?"+c[F]+"?)?)?";var dt=l++;c[dt]="[v=\\s]*("+c[Ae]+")(?:\\.("+c[Ae]+")(?:\\.("+c[Ae]+")(?:"+c[C]+")?"+c[F]+"?)?)?";var ee=l++;c[ee]="^"+c[se]+"\\s*"+c[tt]+"$";var q=l++;c[q]="^"+c[se]+"\\s*"+c[dt]+"$";var ne=l++;c[ne]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var G=l++;c[G]="(?:~>?)";var le=l++;c[le]="(\\s*)"+c[G]+"\\s+",a[le]=new RegExp(c[le],"g");var Pe=l++;c[Pe]="^"+c[G]+c[tt]+"$";var we=l++;c[we]="^"+c[G]+c[dt]+"$";var it=l++;c[it]="(?:\\^)";var Ge=l++;c[Ge]="(\\s*)"+c[it]+"\\s+",a[Ge]=new RegExp(c[Ge],"g");var At=l++;c[At]="^"+c[it]+c[tt]+"$";var Tt=l++;c[Tt]="^"+c[it]+c[dt]+"$";var Yt=l++;c[Yt]="^"+c[se]+"\\s*("+oe+")$|^$";var ot=l++;c[ot]="^"+c[se]+"\\s*("+Y+")$|^$";var cr=l++;c[cr]="(\\s*)"+c[se]+"\\s*("+oe+"|"+c[tt]+")",a[cr]=new RegExp(c[cr],"g");var bi=l++;c[bi]="^\\s*("+c[tt]+")\\s+-\\s+("+c[tt]+")\\s*$";var yi=l++;c[yi]="^\\s*("+c[dt]+")\\s+-\\s+("+c[dt]+")\\s*$";var Xr=l++;c[Xr]="(<|>)?=?\\s*\\*";for(var Te=0;Te<35;Te++)s(Te,c[Te]),a[Te]||(a[Te]=new RegExp(c[Te]));function ki(A,O){if(A instanceof Je)return A;if(typeof A!="string"||A.length>n||!(O?a[Z]:a[z]).test(A))return null;try{return new Je(A,O)}catch{return null}}function Je(A,O){if(A instanceof Je){if(A.loose===O)return A;A=A.version}else if(typeof A!="string")throw new TypeError("Invalid Version: "+A);if(A.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof Je))return new Je(A,O);s("SemVer",A,O),this.loose=O;var U=A.trim().match(O?a[Z]:a[z]);if(!U)throw new TypeError("Invalid Version: "+A);if(this.raw=A,this.major=+U[1],this.minor=+U[2],this.patch=+U[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");U[4]?this.prerelease=U[4].split(".").map(function(ue){if(/^[0-9]+$/.test(ue)){var $e=+ue;if($e>=0&&$e<o)return $e}return ue}):this.prerelease=[],this.build=U[5]?U[5].split("."):[],this.format()}t.parse=ki,t.valid=function(A,O){var U=ki(A,O);return U?U.version:null},t.clean=function(A,O){var U=ki(A.trim().replace(/^[=v]+/,""),O);return U?U.version:null},t.SemVer=Je,Je.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},Je.prototype.toString=function(){return this.version},Je.prototype.compare=function(A){return s("SemVer.compare",this.version,this.loose,A),A instanceof Je||(A=new Je(A,this.loose)),this.compareMain(A)||this.comparePre(A)},Je.prototype.compareMain=function(A){return A instanceof Je||(A=new Je(A,this.loose)),Mr(this.major,A.major)||Mr(this.minor,A.minor)||Mr(this.patch,A.patch)},Je.prototype.comparePre=function(A){if(A instanceof Je||(A=new Je(A,this.loose)),this.prerelease.length&&!A.prerelease.length)return-1;if(!this.prerelease.length&&A.prerelease.length)return 1;if(!this.prerelease.length&&!A.prerelease.length)return 0;var O=0;do{var U=this.prerelease[O],ue=A.prerelease[O];if(s("prerelease compare",O,U,ue),U===void 0&&ue===void 0)return 0;if(ue===void 0)return 1;if(U===void 0)return-1;if(U!==ue)return Mr(U,ue)}while(++O)},Je.prototype.inc=function(A,O){switch(A){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",O);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",O);break;case"prepatch":this.prerelease.length=0,this.inc("patch",O),this.inc("pre",O);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",O),this.inc("pre",O);break;case"major":this.minor===0&&this.patch===0&&this.prerelease.length!==0||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":this.patch===0&&this.prerelease.length!==0||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var U=this.prerelease.length;--U>=0;)typeof this.prerelease[U]=="number"&&(this.prerelease[U]++,U=-2);U===-1&&this.prerelease.push(0)}O&&(this.prerelease[0]===O?isNaN(this.prerelease[1])&&(this.prerelease=[O,0]):this.prerelease=[O,0]);break;default:throw new Error("invalid increment argument: "+A)}return this.format(),this.raw=this.version,this},t.inc=function(A,O,U,ue){typeof U=="string"&&(ue=U,U=void 0);try{return new Je(A,U).inc(O,ue).version}catch{return null}},t.diff=function(A,O){if(qn(A,O))return null;var U=ki(A),ue=ki(O);if(U.prerelease.length||ue.prerelease.length){for(var $e in U)if(($e==="major"||$e==="minor"||$e==="patch")&&U[$e]!==ue[$e])return"pre"+$e;return"prerelease"}for(var $e in U)if(($e==="major"||$e==="minor"||$e==="patch")&&U[$e]!==ue[$e])return $e},t.compareIdentifiers=Mr;var ni=/^[0-9]+$/;function Mr(A,O){var U=ni.test(A),ue=ni.test(O);return U&&ue&&(A=+A,O=+O),U&&!ue?-1:ue&&!U?1:A<O?-1:A>O?1:0}function jr(A,O,U){return new Je(A,U).compare(new Je(O,U))}function on(A,O,U){return jr(A,O,U)>0}function an(A,O,U){return jr(A,O,U)<0}function qn(A,O,U){return jr(A,O,U)===0}function Qi(A,O,U){return jr(A,O,U)!==0}function Gn(A,O,U){return jr(A,O,U)>=0}function ws(A,O,U){return jr(A,O,U)<=0}function bs(A,O,U,ue){var $e;switch(O){case"===":typeof A=="object"&&(A=A.version),typeof U=="object"&&(U=U.version),$e=A===U;break;case"!==":typeof A=="object"&&(A=A.version),typeof U=="object"&&(U=U.version),$e=A!==U;break;case"":case"=":case"==":$e=qn(A,U,ue);break;case"!=":$e=Qi(A,U,ue);break;case">":$e=on(A,U,ue);break;case">=":$e=Gn(A,U,ue);break;case"<":$e=an(A,U,ue);break;case"<=":$e=ws(A,U,ue);break;default:throw new TypeError("Invalid operator: "+O)}return $e}function lr(A,O){if(A instanceof lr){if(A.loose===O)return A;A=A.value}if(!(this instanceof lr))return new lr(A,O);s("comparator",A,O),this.loose=O,this.parse(A),this.semver===Zr?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}t.rcompareIdentifiers=function(A,O){return Mr(O,A)},t.major=function(A,O){return new Je(A,O).major},t.minor=function(A,O){return new Je(A,O).minor},t.patch=function(A,O){return new Je(A,O).patch},t.compare=jr,t.compareLoose=function(A,O){return jr(A,O,!0)},t.rcompare=function(A,O,U){return jr(O,A,U)},t.sort=function(A,O){return A.sort(function(U,ue){return t.compare(U,ue,O)})},t.rsort=function(A,O){return A.sort(function(U,ue){return t.rcompare(U,ue,O)})},t.gt=on,t.lt=an,t.eq=qn,t.neq=Qi,t.gte=Gn,t.lte=ws,t.cmp=bs,t.Comparator=lr;var Zr={};function xt(A,O){if(A instanceof xt)return A.loose===O?A:new xt(A.raw,O);if(A instanceof lr)return new xt(A.value,O);if(!(this instanceof xt))return new xt(A,O);if(this.loose=O,this.raw=A,this.set=A.split(/\s*\|\|\s*/).map(function(U){return this.parseRange(U.trim())},this).filter(function(U){return U.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+A);this.format()}function _t(A){return!A||A.toLowerCase()==="x"||A==="*"}function Yi(A,O,U,ue,$e,ft,he,ur,Ct,Zt,wr,Et,P){return((O=_t(U)?"":_t(ue)?">="+U+".0.0":_t($e)?">="+U+"."+ue+".0":">="+O)+" "+(ur=_t(Ct)?"":_t(Zt)?"<"+(+Ct+1)+".0.0":_t(wr)?"<"+Ct+"."+(+Zt+1)+".0":Et?"<="+Ct+"."+Zt+"."+wr+"-"+Et:"<="+ur)).trim()}function cn(A,O){for(var U=0;U<A.length;U++)if(!A[U].test(O))return!1;if(O.prerelease.length){for(U=0;U<A.length;U++)if(s(A[U].semver),A[U].semver!==Zr&&A[U].semver.prerelease.length>0){var ue=A[U].semver;if(ue.major===O.major&&ue.minor===O.minor&&ue.patch===O.patch)return!0}return!1}return!0}function oi(A,O,U){try{O=new xt(O,U)}catch{return!1}return O.test(A)}function Xt(A,O,U,ue){var $e,ft,he,ur,Ct;switch(A=new Je(A,ue),O=new xt(O,ue),U){case">":$e=on,ft=ws,he=an,ur=">",Ct=">=";break;case"<":$e=an,ft=Gn,he=on,ur="<",Ct="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(oi(A,O,ue))return!1;for(var Zt=0;Zt<O.set.length;++Zt){var wr=O.set[Zt],Et=null,P=null;if(wr.forEach(function(Pt){Pt.semver===Zr&&(Pt=new lr(">=0.0.0")),Et=Et||Pt,P=P||Pt,$e(Pt.semver,Et.semver,ue)?Et=Pt:he(Pt.semver,P.semver,ue)&&(P=Pt)}),Et.operator===ur||Et.operator===Ct||(!P.operator||P.operator===ur)&&ft(A,P.semver)||P.operator===Ct&&he(A,P.semver))return!1}return!0}lr.prototype.parse=function(A){var O=this.loose?a[Yt]:a[ot],U=A.match(O);if(!U)throw new TypeError("Invalid comparator: "+A);this.operator=U[1],this.operator==="="&&(this.operator=""),U[2]?this.semver=new Je(U[2],this.loose):this.semver=Zr},lr.prototype.toString=function(){return this.value},lr.prototype.test=function(A){return s("Comparator.test",A,this.loose),this.semver===Zr||(typeof A=="string"&&(A=new Je(A,this.loose)),bs(A,this.operator,this.semver,this.loose))},lr.prototype.intersects=function(A,O){if(!(A instanceof lr))throw new TypeError("a Comparator is required");var U;if(this.operator==="")return U=new xt(A.value,O),oi(this.value,U,O);if(A.operator==="")return U=new xt(this.value,O),oi(A.semver,U,O);var ue=!(this.operator!==">="&&this.operator!==">"||A.operator!==">="&&A.operator!==">"),$e=!(this.operator!=="<="&&this.operator!=="<"||A.operator!=="<="&&A.operator!=="<"),ft=this.semver.version===A.semver.version,he=!(this.operator!==">="&&this.operator!=="<="||A.operator!==">="&&A.operator!=="<="),ur=bs(this.semver,"<",A.semver,O)&&(this.operator===">="||this.operator===">")&&(A.operator==="<="||A.operator==="<"),Ct=bs(this.semver,">",A.semver,O)&&(this.operator==="<="||this.operator==="<")&&(A.operator===">="||A.operator===">");return ue||$e||ft&&he||ur||Ct},t.Range=xt,xt.prototype.format=function(){return this.range=this.set.map(function(A){return A.join(" ").trim()}).join("||").trim(),this.range},xt.prototype.toString=function(){return this.range},xt.prototype.parseRange=function(A){var O=this.loose;A=A.trim(),s("range",A,O);var U=O?a[yi]:a[bi];A=A.replace(U,Yi),s("hyphen replace",A),A=A.replace(a[cr],"$1$2$3"),s("comparator trim",A,a[cr]),A=(A=(A=A.replace(a[le],"$1~")).replace(a[Ge],"$1^")).split(/\s+/).join(" ");var ue=O?a[Yt]:a[ot],$e=A.split(" ").map(function(ft){return function(he,ur){return s("comp",he),he=function(Ct,Zt){return Ct.trim().split(/\s+/).map(function(wr){return function(Et,P){s("caret",Et,P);var Pt=P?a[Tt]:a[At];return Et.replace(Pt,function(gr,N,y,E,S){var I;return s("caret",Et,gr,N,y,E,S),_t(N)?I="":_t(y)?I=">="+N+".0.0 <"+(+N+1)+".0.0":_t(E)?I=N==="0"?">="+N+"."+y+".0 <"+N+"."+(+y+1)+".0":">="+N+"."+y+".0 <"+(+N+1)+".0.0":S?(s("replaceCaret pr",S),S.charAt(0)!=="-"&&(S="-"+S),I=N==="0"?y==="0"?">="+N+"."+y+"."+E+S+" <"+N+"."+y+"."+(+E+1):">="+N+"."+y+"."+E+S+" <"+N+"."+(+y+1)+".0":">="+N+"."+y+"."+E+S+" <"+(+N+1)+".0.0"):(s("no pr"),I=N==="0"?y==="0"?">="+N+"."+y+"."+E+" <"+N+"."+y+"."+(+E+1):">="+N+"."+y+"."+E+" <"+N+"."+(+y+1)+".0":">="+N+"."+y+"."+E+" <"+(+N+1)+".0.0"),s("caret return",I),I})}(wr,Zt)}).join(" ")}(he,ur),s("caret",he),he=function(Ct,Zt){return Ct.trim().split(/\s+/).map(function(wr){return function(Et,P){var Pt=P?a[we]:a[Pe];return Et.replace(Pt,function(gr,N,y,E,S){var I;return s("tilde",Et,gr,N,y,E,S),_t(N)?I="":_t(y)?I=">="+N+".0.0 <"+(+N+1)+".0.0":_t(E)?I=">="+N+"."+y+".0 <"+N+"."+(+y+1)+".0":S?(s("replaceTilde pr",S),S.charAt(0)!=="-"&&(S="-"+S),I=">="+N+"."+y+"."+E+S+" <"+N+"."+(+y+1)+".0"):I=">="+N+"."+y+"."+E+" <"+N+"."+(+y+1)+".0",s("tilde return",I),I})}(wr,Zt)}).join(" ")}(he,ur),s("tildes",he),he=function(Ct,Zt){return s("replaceXRanges",Ct,Zt),Ct.split(/\s+/).map(function(wr){return function(Et,P){Et=Et.trim();var Pt=P?a[q]:a[ee];return Et.replace(Pt,function(gr,N,y,E,S,I){s("xRange",Et,gr,N,y,E,S,I);var R=_t(y),M=R||_t(E),_=M||_t(S);return N==="="&&_&&(N=""),R?gr=N===">"||N==="<"?"<0.0.0":"*":N&&_?(M&&(E=0),_&&(S=0),N===">"?(N=">=",M?(y=+y+1,E=0,S=0):_&&(E=+E+1,S=0)):N==="<="&&(N="<",M?y=+y+1:E=+E+1),gr=N+y+"."+E+"."+S):M?gr=">="+y+".0.0 <"+(+y+1)+".0.0":_&&(gr=">="+y+"."+E+".0 <"+y+"."+(+E+1)+".0"),s("xRange return",gr),gr})}(wr,Zt)}).join(" ")}(he,ur),s("xrange",he),he=function(Ct,Zt){return s("replaceStars",Ct,Zt),Ct.trim().replace(a[Xr],"")}(he,ur),s("stars",he),he}(ft,O)}).join(" ").split(/\s+/);return this.loose&&($e=$e.filter(function(ft){return!!ft.match(ue)})),$e=$e.map(function(ft){return new lr(ft,O)})},xt.prototype.intersects=function(A,O){if(!(A instanceof xt))throw new TypeError("a Range is required");return this.set.some(function(U){return U.every(function(ue){return A.set.some(function($e){return $e.every(function(ft){return ue.intersects(ft,O)})})})})},t.toComparators=function(A,O){return new xt(A,O).set.map(function(U){return U.map(function(ue){return ue.value}).join(" ").trim().split(" ")})},xt.prototype.test=function(A){if(!A)return!1;typeof A=="string"&&(A=new Je(A,this.loose));for(var O=0;O<this.set.length;O++)if(cn(this.set[O],A))return!0;return!1},t.satisfies=oi,t.maxSatisfying=function(A,O,U){var ue=null,$e=null;try{var ft=new xt(O,U)}catch{return null}return A.forEach(function(he){ft.test(he)&&(ue&&$e.compare(he)!==-1||($e=new Je(ue=he,U)))}),ue},t.minSatisfying=function(A,O,U){var ue=null,$e=null;try{var ft=new xt(O,U)}catch{return null}return A.forEach(function(he){ft.test(he)&&(ue&&$e.compare(he)!==1||($e=new Je(ue=he,U)))}),ue},t.validRange=function(A,O){try{return new xt(A,O).range||"*"}catch{return null}},t.ltr=function(A,O,U){return Xt(A,O,"<",U)},t.gtr=function(A,O,U){return Xt(A,O,">",U)},t.outside=Xt,t.prerelease=function(A,O){var U=ki(A,O);return U&&U.prerelease.length?U.prerelease:null},t.intersects=function(A,O,U){return A=new xt(A,U),O=new xt(O,U),A.intersects(O)},t.coerce=function(A){if(A instanceof Je)return A;if(typeof A!="string")return null;var O=A.match(a[ne]);return O==null?null:ki((O[1]||"0")+"."+(O[2]||"0")+"."+(O[3]||"0"))}}).call(this,r(1))},function(e,t){var r,i,s=e.exports={};function n(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(x){if(r===setTimeout)return setTimeout(x,0);if((r===n||!r)&&setTimeout)return r=setTimeout,setTimeout(x,0);try{return r(x,0)}catch{try{return r.call(null,x,0)}catch{return r.call(this,x,0)}}}(function(){try{r=typeof setTimeout=="function"?setTimeout:n}catch{r=n}try{i=typeof clearTimeout=="function"?clearTimeout:o}catch{i=o}})();var c,l=[],u=!1,h=-1;function d(){u&&c&&(u=!1,c.length?l=c.concat(l):h=-1,l.length&&f())}function f(){if(!u){var x=a(d);u=!0;for(var $=l.length;$;){for(c=l,l=[];++h<$;)c&&c[h].run();h=-1,$=l.length}c=null,u=!1,function(C){if(i===clearTimeout)return clearTimeout(C);if((i===o||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(C);try{i(C)}catch{try{return i.call(null,C)}catch{return i.call(this,C)}}}(x)}}function g(x,$){this.fun=x,this.array=$}function v(){}s.nextTick=function(x){var $=new Array(arguments.length-1);if(arguments.length>1)for(var C=1;C<arguments.length;C++)$[C-1]=arguments[C];l.push(new g(x,$)),l.length!==1||u||a(f)},g.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=v,s.addListener=v,s.once=v,s.off=v,s.removeListener=v,s.removeAllListeners=v,s.emit=v,s.prependListener=v,s.prependOnceListener=v,s.listeners=function(x){return[]},s.binding=function(x){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(x){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}}])});var xG=We.exports.SEMVER_SPEC_VERSION,EG=We.exports.parse,SG=We.exports.valid,$G=We.exports.coerce,CG=We.exports.clean,PG=We.exports.inc,IG=We.exports.major,DG=We.exports.minor,AG=We.exports.patch,TG=We.exports.prerelease,RG=We.exports.gt,LG=We.exports.gte,NG=We.exports.lt,FG=We.exports.lte,OG=We.exports.eq,MG=We.exports.neq,jG=We.exports.cmp,UG=We.exports.compare,HG=We.exports.rcompare,BG=We.exports.compareIdentifiers,zG=We.exports.rcompareIdentifiers,_G=We.exports.compareBuild,WG=We.exports.sort,VG=We.exports.rsort,qG=We.exports.diff,GG=We.exports.validRange,JG=We.exports.satisfies,QG=We.exports.maxSatisfying,YG=We.exports.minSatisfying,XG=We.exports.minVersion,ZG=We.exports.gtr,KG=We.exports.ltr,eJ=We.exports.outside,tJ=We.exports.intersects,rJ=We.exports.SemVer,iJ=We.exports.Comparator,sJ=We.exports.Range,oS=/^(\^|>=)?((\d+)|x)\.((\d+)|x)\.((\d+)|x)(\-.*)?$/,dj=/^-(\d{4})(\d{2})(\d{2})$/;function fj(e){return e=e.trim(),e==="*"||oS.test(e)}function aS(e){if(!fj(e))return null;if(e=e.trim(),e==="*")return{hasCaret:!1,hasGreaterEquals:!1,majorBase:0,majorMustEqual:!1,minorBase:0,minorMustEqual:!1,patchBase:0,patchMustEqual:!1,preRelease:null};const t=e.match(oS);return t?{hasCaret:t[1]==="^",hasGreaterEquals:t[1]===">=",majorBase:t[2]==="x"?0:parseInt(t[2],10),majorMustEqual:t[2]!=="x",minorBase:t[4]==="x"?0:parseInt(t[4],10),minorMustEqual:t[4]!=="x",patchBase:t[6]==="x"?0:parseInt(t[6],10),patchMustEqual:t[6]!=="x",preRelease:t[8]||null}:null}function cS(e){if(!e)return null;const t=e.majorBase,r=e.majorMustEqual,i=e.minorBase;let s=e.minorMustEqual;const n=e.patchBase;let o=e.patchMustEqual;e.hasCaret&&(t===0||(s=!1),o=!1);let a=0;if(e.preRelease){const c=dj.exec(e.preRelease);if(c){const[,l,u,h]=c;a=Date.UTC(Number(l),Number(u)-1,Number(h))}}return{majorBase:t,majorMustEqual:r,minorBase:i,minorMustEqual:s,patchBase:n,patchMustEqual:o,isMinimum:e.hasGreaterEquals,notBefore:a}}var pj=class{constructor(){this.buffers=[]}add(e){let t=this.buffers.indexOf(e);return t<0&&(t=this.buffers.length,this.buffers.push(e)),t}};function gj(e,t){if(t.serializeBuffersForPostMessage){const r=new pj,s=JSON.stringify(e,(o,a)=>{if(a instanceof ArrayBuffer)return{$$vscode_array_buffer_reference$$:!0,index:r.add(a)};if(ArrayBuffer.isView(a)){const c=mj(a);if(c)return{$$vscode_array_buffer_reference$$:!0,index:r.add(a.buffer),view:{type:c,byteLength:a.byteLength,byteOffset:a.byteOffset}}}return a}),n=r.buffers.map(o=>{const a=new Uint8Array(o);return re.wrap(a)});return{message:s,buffers:n}}else return{message:JSON.stringify(e),buffers:[]}}function mj(e){switch(e.constructor.name){case"Int8Array":return 1;case"Uint8Array":return 2;case"Uint8ClampedArray":return 3;case"Int16Array":return 4;case"Uint16Array":return 5;case"Int32Array":return 6;case"Uint32Array":return 7;case"Float32Array":return 8;case"Float64Array":return 9;case"BigInt64Array":return 10;case"BigUint64Array":return 11}}function vj(e,t){const r=t.map(n=>{const o=new ArrayBuffer(n.byteLength);return new Uint8Array(o).set(n.buffer),o}),i=t.length?(n,o)=>{if(o&&typeof o=="object"&&o.$$vscode_array_buffer_reference$$){const a=o,{index:c}=a,l=r[c];if(a.view)switch(a.view.type){case 1:return new Int8Array(l,a.view.byteOffset,a.view.byteLength/Int8Array.BYTES_PER_ELEMENT);case 2:return new Uint8Array(l,a.view.byteOffset,a.view.byteLength/Uint8Array.BYTES_PER_ELEMENT);case 3:return new Uint8ClampedArray(l,a.view.byteOffset,a.view.byteLength/Uint8ClampedArray.BYTES_PER_ELEMENT);case 4:return new Int16Array(l,a.view.byteOffset,a.view.byteLength/Int16Array.BYTES_PER_ELEMENT);case 5:return new Uint16Array(l,a.view.byteOffset,a.view.byteLength/Uint16Array.BYTES_PER_ELEMENT);case 6:return new Int32Array(l,a.view.byteOffset,a.view.byteLength/Int32Array.BYTES_PER_ELEMENT);case 7:return new Uint32Array(l,a.view.byteOffset,a.view.byteLength/Uint32Array.BYTES_PER_ELEMENT);case 8:return new Float32Array(l,a.view.byteOffset,a.view.byteLength/Float32Array.BYTES_PER_ELEMENT);case 9:return new Float64Array(l,a.view.byteOffset,a.view.byteLength/Float64Array.BYTES_PER_ELEMENT);case 10:return new BigInt64Array(l,a.view.byteOffset,a.view.byteLength/BigInt64Array.BYTES_PER_ELEMENT);case 11:return new BigUint64Array(l,a.view.byteOffset,a.view.byteLength/BigUint64Array.BYTES_PER_ELEMENT);default:throw new Error("Unknown array buffer view type")}return l}return o}:void 0;return{message:JSON.parse(e,i),arrayBuffers:r}}var wj=class{#e;#t;#r;#i;#n;#s;#a;#o;#c;#l;#u;#d;constructor(e,t,r,i,s,n,o){this.#a="",this.#c=!1,this.#l=!1,this._onMessageEmitter=new T,this.onDidReceiveMessage=this._onMessageEmitter.event,this.#h=new T,this._onDidDispose=this.#h.event,this.#e=e,this.#t=t,this.#o=r,this.#i=i,this.#n=s,this.#s=n,this.#u=fc(n),this.#d=bj(n),this.#r=o}#h;dispose(){this.#c=!0,this.#h.fire(),this.#h.dispose(),this._onMessageEmitter.dispose()}asWebviewUri(e){return this.#l=!0,Mu(e,this.#i)}get cspSource(){const e=this.#s.extensionLocation;if(e.scheme===Q.https||e.scheme===Q.http){let t=e.toString();return t.endsWith("/")||(t+="/"),t+" "+Qw}return Qw}get html(){return this.a(),this.#a}set html(e){this.a(),this.#a!==e&&(this.#a=e,this.#d&&!this.#l&&/(["'])vscode-resource:([^\s'"]+?)(["'])/i.test(e)&&(this.#l=!0,this.#r.report("Webview vscode-resource: uris",this.#s,"Please migrate to use the 'webview.asWebviewUri' api instead: https://aka.ms/vscode-webview-use-aswebviewuri")),this.#t.$setHtml(this.#e,this.b(e)))}get options(){return this.a(),this.#o}set options(e){this.a(),Di(this.#o,e)||this.#t.$setOptions(this.#e,lS(this.#s,this.#n,e)),this.#o=e}async postMessage(e){if(this.#c)return!1;const t=gj(e,{serializeBuffersForPostMessage:this.#u});return this.#t.$postMessage(this.#e,t.message,...t.buffers)}a(){if(this.#c)throw new Error("Webview is disposed")}b(e){if(!this.#d)return e;const t=this.#s.extensionLocation?.scheme===Q.vscodeRemote,r=this.#s.extensionLocation.scheme===Q.vscodeRemote?this.#s.extensionLocation.authority:void 0;return e.replace(/(["'])(?:vscode-resource):(\/\/([^\s\/'"]+?)(?=\/))?([^\s'"]+?)(["'])/gi,(i,s,n,o,a,c)=>{const l=k.from({scheme:o||"file",path:decodeURIComponent(a)}),u=Mu(l,{isRemote:t,authority:r}).toString();return`${s}${u}${c}`}).replace(/(["'])(?:vscode-webview-resource):(\/\/[^\s\/'"]+\/([^\s\/'"]+?)(?=\/))?([^\s'"]+?)(["'])/gi,(i,s,n,o,a,c)=>{const l=k.from({scheme:o||"file",path:decodeURIComponent(a)}),u=Mu(l,{isRemote:t,authority:r}).toString();return`${s}${u}${c}`})}};function fc(e){try{const t=cS(aS(e.engines.vscode));return!!t&&t.majorBase>=1&&t.minorBase>=57}catch{return!1}}function bj(e){try{const t=cS(aS(e.engines.vscode));return t?t.majorBase<1||t.majorBase===1&&t.minorBase<60:!1}catch{return!1}}var yj=class extends ae{constructor(e,t,r,i,s){super(),this.c=t,this.f=r,this.g=i,this.h=s,this.b=new Map,this.a=e.getProxy(K.MainThreadWebviews)}dispose(){super.dispose();for(const e of this.b.values())e.dispose();this.b.clear()}$onMessage(e,t,r){const i=this.j(e);if(i){const{message:s}=vj(t,r.value);i._onMessageEmitter.fire(s)}}$onMissingCsp(e,t){this.g.warn(`${t} created a webview without a content security policy: https://aka.ms/vscode-webview-missing-csp`)}createNewWebview(e,t,r){const i=new wj(e,this.a,kj(t),this.c,this.f,r,this.h);this.b.set(e,i);const s=i._onDidDispose(()=>{s.dispose(),this.deleteWebview(e)});return i}deleteWebview(e){this.b.delete(e)}j(e){return this.b.get(e)}};function eg(e){return{id:e.identifier,location:e.extensionLocation}}function lS(e,t,r){return{enableCommandUris:r.enableCommandUris,enableScripts:r.enableScripts,enableForms:r.enableForms,portMapping:r.portMapping,localResourceRoots:r.localResourceRoots||xj(e,t)}}function kj(e){return{enableCommandUris:e.enableCommandUris,enableScripts:e.enableScripts,enableForms:e.enableForms,portMapping:e.portMapping,localResourceRoots:e.localResourceRoots?.map(t=>k.from(t))}}function xj(e,t){return[...(t?.getWorkspaceFolders()||[]).map(r=>r.uri),e.extensionLocation]}var Vi=class J3{static{this.a=!1}constructor(t){this.d=t,this.b=new Map,this.c=1}add(t){const r=this.c++;return this.b.set(r,t),this.e(),r}get(t,r){return this.b.has(t)?this.b.get(t)[r]:void 0}delete(t){this.b.delete(t),this.e()}e(){J3.a&&console.log(`${this.d} cache size - ${this.b.size}`)}},Ej=class{constructor(e,t){this.document=e,this.b=t,this.a=1,this.c=new Vi("custom documents")}addEdit(e){return this.c.add([e])}async undo(e,t){await this.f(e).undo(),t||this.disposeBackup()}async redo(e,t){await this.f(e).redo(),t||this.disposeBackup()}disposeEdits(e){for(const t of e)this.c.delete(t)}getNewBackupUri(){if(!this.b)throw new Error("Backup requires a valid storage path");const e=Dj(this.document.uri)+this.a++;return Mt(this.b,e)}updateBackup(e){this.d?.delete(),this.d=e}disposeBackup(){this.d?.delete(),this.d=void 0}f(e){const t=this.c.get(e,0);if(!t)throw new Error("No edit found");return t}},Sj=class{constructor(){this.a=new Map}get(e,t){return this.a.get(this.b(e,t))}add(e,t,r){const i=this.b(e,t.uri);if(this.a.has(i))throw new Error(`Document already exists for viewType:${e} resource:${t.uri}`);const s=new Ej(t,r);return this.a.set(i,s),s}delete(e,t){const r=this.b(e,t.uri);this.a.delete(r)}b(e,t){return`${e}@@@${t}`}},uS;(function(e){e[e.Text=0]="Text",e[e.Custom=1]="Custom"})(uS||(uS={}));var $j=class{constructor(){this.a=new Map}addTextProvider(e,t,r){return this.b(e,{type:0,extension:t,provider:r})}addCustomProvider(e,t,r){return this.b(e,{type:1,extension:t,provider:r})}get(e){return this.a.get(e)}b(e,t){if(this.a.has(e))throw new Error(`Provider for viewType:${e} already registered`);return this.a.set(e,t),new _e(()=>this.a.delete(e))}},Cj=class{constructor(e,t,r,i,s){this.d=t,this.f=r,this.g=i,this.h=s,this.b=new $j,this.c=new Sj,this.a=e.getProxy(K.MainThreadCustomEditors)}registerCustomEditorProvider(e,t,r,i){const s=new be;return Pj(r)?(s.add(this.b.addTextProvider(t,e,r)),this.a.$registerTextEditorProvider(eg(e),t,i.webviewOptions||{},{supportsMove:!!r.moveCustomTextEditor},fc(e))):(s.add(this.b.addCustomProvider(t,e,r)),tg(r)&&s.add(r.onDidChangeCustomDocument(n=>{const o=this.i(t,n.document.uri);if(Ij(n)){const a=o.addEdit(n);this.a.$onDidEdit(n.document.uri,t,a,n.label)}else this.a.$onContentChange(n.document.uri,t)})),this.a.$registerCustomEditorProvider(eg(e),t,i.webviewOptions||{},!!i.supportsMultipleEditorsPerDocument,fc(e))),_e.from(s,new _e(()=>{this.a.$unregisterEditorProvider(t)}))}async $createCustomDocument(e,t,r,i,s){const n=this.b.get(t);if(!n)throw new Error(`No provider found for '${t}'`);if(n.type!==1)throw new Error(`Invalid provide type for '${t}'`);const o=k.revive(e),a=await n.provider.openCustomDocument(o,{backupId:r,untitledDocumentData:i?.buffer},s);let c;return tg(n.provider)&&this.f&&(c=this.f.workspaceValue(n.extension)??this.f.globalValue(n.extension)),this.c.add(t,a,c),{editable:tg(n.provider)}}async $disposeCustomDocument(e,t){const r=this.b.get(t);if(!r)throw new Error(`No provider found for '${t}'`);if(r.type!==1)throw new Error(`Invalid provider type for '${t}'`);const i=k.revive(e),{document:s}=this.i(t,i);this.c.delete(t,s),s.dispose()}async $resolveCustomEditor(e,t,r,i,s,n){const o=this.b.get(r);if(!o)throw new Error(`No provider found for '${r}'`);const a=Gt.to(s),c=this.g.createNewWebview(t,i.contentOptions,o.extension),l=this.h.createNewWebviewPanel(t,r,i.title,a,i.options,c,i.active),u=k.revive(e);switch(o.type){case 1:{const{document:h}=this.i(r,u);return o.provider.resolveCustomEditor(h,l,n)}case 0:{const h=this.d.getDocument(u);return o.provider.resolveCustomTextEditor(h,l,n)}default:throw new Error("Unknown webview provider type")}}$disposeEdits(e,t,r){this.i(t,e).disposeEdits(r)}async $onMoveCustomEditor(e,t,r){const i=this.b.get(r);if(!i)throw new Error(`No provider found for '${r}'`);if(!i.provider.moveCustomTextEditor)throw new Error(`Provider does not implement move '${r}'`);const s=this.h.getWebviewPanel(e);if(!s)throw new Error("No webview found");const n=k.revive(t),o=this.d.getDocument(n);await i.provider.moveCustomTextEditor(o,s,Ke.None)}async $undo(e,t,r,i){return this.i(t,e).undo(r,i)}async $redo(e,t,r,i){return this.i(t,e).redo(r,i)}async $revert(e,t,r){const i=this.i(t,e);await this.j(t).revertCustomDocument(i.document,r),i.disposeBackup()}async $onSave(e,t,r){const i=this.i(t,e);await this.j(t).saveCustomDocument(i.document,r),i.disposeBackup()}async $onSaveAs(e,t,r,i){const s=this.i(t,e);return this.j(t).saveCustomDocumentAs(s.document,k.revive(r),i)}async $backup(e,t,r){const i=this.i(t,e),n=await this.j(t).backupCustomDocument(i.document,{destination:i.getNewBackupUri()},r);return i.updateBackup(n),n.id}i(e,t){const r=this.c.get(e,k.revive(t));if(!r)throw new Error("No custom document found");return r}j(e){const r=this.b.get(e)?.provider;if(!r||!tg(r))throw new Error("Custom document is not editable");return r}};function tg(e){return!!e.onDidChangeCustomDocument}function Pj(e){return typeof e.resolveCustomTextEditor=="function"}function Ij(e){return typeof e.undo=="function"&&typeof e.redo=="function"}function Dj(e){const t=e.scheme===Q.file||e.scheme===Q.untitled?e.fsPath:e.toString();return As(t)+""}var Uo,hS=class Q3{#e;#t;#r;constructor(t,r,i,s,n,o,a,c){this.d=t,this.e=r,this.f=i,this.g=s,this.h=n,this.c=!1,this.f=Math.max(s,i),this.#r=new rr(l=>o.getComparisonKey(l)),this.#e=a,this.#t=c}dispose(){this.c||(this.#t.fire([...this.#r.keys()]),this.#e?.$clear(this.e),this.#r.clear(),this.c=!0)}get name(){return this.j(),this.d}set(t,r){if(!t){this.clear();return}this.j();let i=[];if(k.isUri(t)){if(!r){this.delete(t);return}this.#r.set(t,r.slice()),i=[t]}else if(Array.isArray(t)){i=[];let o;t=[...t].sort(Q3.k);for(const a of t){const[c,l]=a;if((!o||c.toString()!==o.toString())&&(o&&this.#r.get(o).length===0&&this.#r.delete(o),o=c,i.push(c),this.#r.set(c,[])),l)this.#r.get(c)?.push(...l);else{const u=this.#r.get(c);u&&(u.length=0)}}}if(this.#t.fire(i),!this.#e)return;const s=[];let n=0;for(const o of i){let a=[];const c=this.#r.get(o);if(c)if(c.length>this.g){a=[];const l=[pr.Error,pr.Warning,pr.Information,pr.Hint];e:for(let u=0;u<4;u++)for(const h of c)if(h.severity===l[u]&&a.push({...Va.from(h),modelVersionId:this.h(o)})===this.g)break e;a.push({severity:Pr.Info,message:p(2716,null,c.length-this.g),startLineNumber:a[a.length-1].startLineNumber,startColumn:a[a.length-1].startColumn,endLineNumber:a[a.length-1].endLineNumber,endColumn:a[a.length-1].endColumn})}else a=c.map(l=>({...Va.from(l),modelVersionId:this.h(o)}));if(s.push([o,a]),n+=a.length,n>this.f)break}this.#e.$changeMany(this.e,s)}delete(t){this.j(),this.#t.fire([t]),this.#r.delete(t),this.#e?.$changeMany(this.e,[[t,void 0]])}clear(){this.j(),this.#t.fire([...this.#r.keys()]),this.#r.clear(),this.#e?.$clear(this.e)}forEach(t,r){this.j();for(const[i,s]of this)t.call(r,i,s,this)}*[Symbol.iterator](){this.j();for(const t of this.#r.keys())yield[t,this.get(t)]}get(t){this.j();const r=this.#r.get(t);return Array.isArray(r)?Object.freeze(r.slice(0)):[]}has(t){return this.j(),Array.isArray(this.#r.get(t))}j(){if(this.c)throw new Error("illegal state - object is disposed")}static k(t,r){return t[0].toString()<r[0].toString()?-1:t[0].toString()>r[0].toString()?1:0}},Yw=class{static{Uo=this}static{this.c=0}static{this.d=1e3}static{this.e=1.1*this.d}static _mapper(t){const r=new rr;for(const i of t)r.set(i,i);return{uris:Object.freeze(Array.from(r.values()))}}constructor(t,r,i,s){this.j=r,this.k=i,this.l=s,this.g=new Map,this.h=new sP({merge:n=>n.flat(),delay:50}),this.onDidChangeDiagnostics=Qe.map(this.h.event,Uo._mapper),this.f=t.getProxy(K.MainThreadDiagnostics)}createDiagnosticCollection(t,r){const{g:i,f:s,h:n,j:o,k:a,l:c}=this,l=new class{$changeMany(d,f){s.$changeMany(d,f),o.trace("[DiagnosticCollection] change many (extension, owner, uris)",t.value,d,f.length===0?"CLEARING":f)}$clear(d){s.$clear(d),o.trace("[DiagnosticCollection] remove all (extension, owner)",t.value,d)}dispose(){s.dispose()}};let u;if(!r)r="_generated_diagnostic_collection_name_#"+Uo.c++,u=r;else if(!i.has(r))u=r;else{this.j.warn(`DiagnosticCollection with name '${r}' does already exist.`);do u=r+Uo.c++;while(i.has(u))}return new class extends hS{constructor(){super(r,u,Uo.e,Uo.d,d=>c.getDocument(d)?.version,a.extUri,l,n),i.set(u,this)}dispose(){super.dispose(),i.delete(u)}}}getDiagnostics(t){if(t)return this.m(t);{const r=new Map,i=[];for(const s of this.g.values())s.forEach((n,o)=>{let a=r.get(n.toString());typeof a>"u"&&(a=i.length,r.set(n.toString(),a),i.push([n,[]])),i[a][1]=i[a][1].concat(...o)});return i}}m(t){let r=[];for(const i of this.g.values())i.has(t)&&(r=r.concat(i.get(t)));return r}$acceptMarkersChange(t){if(!this.n){const r="_generated_mirror",i=new hS(r,r,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,s=>{},this.k.extUri,void 0,this.h);this.g.set(r,i),this.n=i}for(const[r,i]of t)this.n.set(k.revive(r),i.map(Va.to))}};Yw=Uo=__decorate([__param(1,Ne),__param(2,ua)],Yw);var Aj=class{constructor(e){this.a=e.getProxy(K.MainThreadDialogs)}showOpenDialog(e,t){return t?.allowUIResources&&H(e,"showLocal"),this.a.$showOpenDialog(t).then(r=>r?r.map(i=>k.revive(i)):void 0)}showSaveDialog(e){return this.a.$showSaveDialog(e).then(t=>t?k.revive(t):void 0)}},Tj=class Y3{static{this.a=0}constructor(t,r,i){this.d=r,this.e=i,this.b=new Map,this.c=t.getProxy(K.MainThreadDocumentContentProviders)}registerTextDocumentContentProvider(t,r){if(Object.keys(Q).indexOf(t)>=0)throw new Error(`scheme '${t}' already registered`);const i=Y3.a++;this.b.set(i,r),this.c.$registerTextContentProvider(i,t);let s;if(typeof r.onDidChange=="function"){let n;s=r.onDidChange(async o=>{if(o.scheme!==t){this.e.warn(`Provider for scheme '${t}' is firing event for schema '${o.scheme}' which will be IGNORED`);return}if(!this.d.getDocument(o))return;n&&await n;const a=this.$provideTextDocumentContent(i,o).then(async c=>{if(!c&&typeof c!="string")return;const l=this.d.getDocument(o);if(!l)return;const u=t4(c);if(!l.equalLines(u))return this.c.$onVirtualDocumentChange(o,c)}).catch(It).finally(()=>{n===a&&(n=void 0)});n=a})}return new _e(()=>{this.b.delete(i)&&this.c.$unregisterTextContentProvider(i),s&&(s.dispose(),s=void 0)})}$provideTextDocumentContent(t,r){const i=this.b.get(t);return i?Promise.resolve(i.provideTextDocumentContent(k.revive(r),Ke.None)):Promise.reject(new Error(`unsupported uri-scheme: ${r.scheme}`))}},Rj=class{constructor(e,t,r,i={timeout:1500,errors:3}){this.c=e,this.d=t,this.f=r,this.g=i,this.a=new Nc,this.b=new WeakMap}dispose(){this.a.clear()}getOnWillSaveTextDocumentEvent(e){return(t,r,i)=>{const n={dispose:this.a.push([t,r,e])};return Array.isArray(i)&&i.push(n),n}}async $participateInSave(e,t){const r=k.revive(e);let i=!1;const s=setTimeout(()=>i=!0,this.g.timeout),n=[];try{for(const o of[...this.a]){if(i)break;const a=this.d.getDocument(r),c=await this.h(o,{document:a,reason:Gf.to(t)});n.push(c)}}finally{clearTimeout(s)}return n}h([e,t,r],i){const s=this.b.get(e);return typeof s=="number"&&s>this.g.errors?Promise.resolve(!1):this.i(r,e,t,i).then(()=>!0,n=>{if(this.c.error(`onWillSaveTextDocument-listener from extension '${r.identifier.value}' threw ERROR`),this.c.error(n),!(n instanceof Error)||n.message!=="concurrent_edits"){const o=this.b.get(e);this.b.set(e,o?o+1:1),typeof o=="number"&&o>this.g.errors&&this.c.info(`onWillSaveTextDocument-listener from extension '${r.identifier.value}' will now be IGNORED because of timeouts and/or errors`)}return!1})}i(e,t,r,i){const s=[],n=Date.now(),{document:o,reason:a}=i,{version:c}=o,l=Object.freeze({document:o,reason:a,waitUntil(u){if(Object.isFrozen(s))throw Jg("waitUntil can not be called async");s.push(Promise.resolve(u))}});try{t.apply(r,[l])}catch(u){return Promise.reject(u)}return Object.freeze(s),new Promise((u,h)=>{const d=setTimeout(()=>h(new Error("timeout")),this.g.timeout);return Promise.all(s).then(f=>{this.c.debug(`onWillSaveTextDocument-listener from extension '${e.identifier.value}' finished after ${Date.now()-n}ms`),clearTimeout(d),u(f)}).catch(f=>{clearTimeout(d),h(f)})}).then(u=>{const h={edits:[]};for(const d of u)if(Array.isArray(d)&&d.every(f=>f instanceof Pn))for(const{newText:f,newEol:g,range:v}of d)h.edits.push({resource:o.uri,versionId:void 0,textEdit:{range:v&&W.from(v),text:f,eol:g&&Ya.from(g)}});if(h.edits.length!==0)return c===o.version?this.f.$tryApplyWorkspaceEdit(new ei(h)):Promise.reject(new Error("concurrent_edits"))})}},Lj=class{constructor(e,t){this.a=new T,this.b=new T,this.c=new T,this.d=new T,this.onDidAddDocument=this.a.event,this.onDidRemoveDocument=this.b.event,this.onDidChangeDocument=this.c.event,this.onDidSaveDocument=this.d.event,this.e=new be,this.h=new Map,this.f=e.getProxy(K.MainThreadDocuments),this.g=t,this.g.onDidRemoveDocuments(r=>{for(const i of r)this.b.fire(i.document)},void 0,this.e),this.g.onDidAddDocuments(r=>{for(const i of r)this.a.fire(i.document)},void 0,this.e)}dispose(){this.e.dispose()}getAllDocumentData(){return[...this.g.allDocuments()]}getDocumentData(e){if(!e)return;const t=this.g.getDocument(e);if(t)return t}getDocument(e){const t=this.getDocumentData(e);if(!t?.document)throw new Error(`Unable to retrieve document from URI '${e}'`);return t.document}ensureDocumentData(e){const t=this.g.getDocument(e);if(t)return Promise.resolve(t);let r=this.h.get(e.toString());return r||(r=this.f.$tryOpenDocument(e).then(i=>{this.h.delete(e.toString());const s=k.revive(i);return ea(this.g.getDocument(s))},i=>(this.h.delete(e.toString()),Promise.reject(i))),this.h.set(e.toString(),r)),r}createDocumentData(e){return this.f.$tryCreateDocument(e).then(t=>k.revive(t))}$acceptModelLanguageChanged(e,t){const r=k.revive(e),i=this.g.getDocument(r);if(!i)throw new Error("unknown document");this.b.fire(i.document),i._acceptLanguageId(t),this.a.fire(i.document)}$acceptModelSaved(e){const t=k.revive(e),r=this.g.getDocument(t);if(!r)throw new Error("unknown document");this.$acceptDirtyStateChanged(e,!1),this.d.fire(r.document)}$acceptDirtyStateChanged(e,t){const r=k.revive(e),i=this.g.getDocument(r);if(!i)throw new Error("unknown document");i._acceptIsDirty(t),this.c.fire({document:i.document,contentChanges:[],reason:void 0})}$acceptModelChanged(e,t,r){const i=k.revive(e),s=this.g.getDocument(i);if(!s)throw new Error("unknown document");s._acceptIsDirty(r),s.onEvents(t);let n;t.isUndoing?n=Pl.Undo:t.isRedoing&&(n=Pl.Redo),this.c.fire(k5({document:s.document,contentChanges:t.changes.map(o=>({range:W.to(o.range),rangeOffset:o.rangeOffset,rangeLength:o.rangeLength,text:o.text})),reason:n}))}setWordDefinitionFor(e,t){DF(e,t)}},Nj=class{constructor(e){this.b=new Map,this.c=new T,this.onDidChange=this.c.event,this.d=new Set,this.e=0,this.a=e.getProxy(K.MainThreadEmbeddings)}registerEmbeddingsProvider(e,t,r){if(this.d.has(t))throw new Error("An embeddings provider for this model is already registered");const i=this.e++;return this.a.$registerEmbeddingProvider(i,t),this.b.set(i,{id:t,provider:r}),me(()=>{this.d.delete(t),this.a.$unregisterEmbeddingProvider(i),this.b.delete(i)})}async computeEmbeddings(e,t,r){r??=Ke.None;let i=!1;typeof t=="string"&&(t=[t],i=!0);const s=await this.a.$computeEmbeddings(e,t,r);if(s.length!==t.length)throw new Error;if(i){if(s.length!==1)throw new Error;return s[0]}return s}async $provideEmbeddings(e,t,r){const i=this.b.get(e);if(!i)return[];const s=await i.provider.provideEmbeddings(t,r);return s||[]}get embeddingsModels(){return Array.from(this.d)}$acceptEmbeddingModels(e){this.d=new Set(e),this.c.fire()}},Fj=class{constructor(e){this.a=new Map,this.b=0,this.c=e.getProxy(K.MainThreadAiEmbeddingVector)}async $provideAiEmbeddingVector(e,t,r){if(this.a.size===0)throw new Error("No embedding vector providers registered");const i=this.a.get(e);if(!i)throw new Error("Embedding vector provider not found");const s=await i.provideEmbeddingVector(t,r);if(!s)throw new Error("Embedding vector provider returned undefined");return s}registerEmbeddingVectorProvider(e,t,r){const i=this.b;return this.b++,this.a.set(i,r),this.c.$registerAiEmbeddingVectorProvider(t,i),new _e(()=>{this.c.$unregisterAiEmbeddingVectorProvider(i),this.a.delete(i)})}},dS;(function(e){e[e.Invalid=0]="Invalid",e[e.Start=1]="Start",e[e.H=2]="H",e[e.HT=3]="HT",e[e.HTT=4]="HTT",e[e.HTTP=5]="HTTP",e[e.F=6]="F",e[e.FI=7]="FI",e[e.FIL=8]="FIL",e[e.BeforeColon=9]="BeforeColon",e[e.AfterColon=10]="AfterColon",e[e.AlmostThere=11]="AlmostThere",e[e.End=12]="End",e[e.Accept=13]="Accept",e[e.LastKnownState=14]="LastKnownState"})(dS||(dS={}));var Oj=class{constructor(e,t,r){const i=new Uint8Array(e*t);for(let s=0,n=e*t;s<n;s++)i[s]=r;this.a=i,this.rows=e,this.cols=t}get(e,t){return this.a[e*this.cols+t]}set(e,t,r){this.a[e*this.cols+t]=r}},fS=class{constructor(e){let t=0,r=0;for(let s=0,n=e.length;s<n;s++){const[o,a,c]=e[s];a>t&&(t=a),o>r&&(r=o),c>r&&(r=c)}t++,r++;const i=new Oj(r,t,0);for(let s=0,n=e.length;s<n;s++){const[o,a,c]=e[s];i.set(o,a,c)}this.a=i,this.b=t}nextState(e,t){return t<0||t>=this.b?0:this.a.get(e,t)}},Xw=null;function Mj(){return Xw===null&&(Xw=new fS([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),Xw}var pS;(function(e){e[e.None=0]="None",e[e.ForceTermination=1]="ForceTermination",e[e.CannotEndIn=2]="CannotEndIn"})(pS||(pS={}));var ju=null;function jj(){if(ju===null){ju=new Kx(0);const e=` 	<>'"\u3001\u3002\uFF61\uFF64\uFF0C\uFF0E\uFF1A\uFF1B\u2018\u3008\u300C\u300E\u3014\uFF08\uFF3B\uFF5B\uFF62\uFF63\uFF5D\uFF3D\uFF09\u3015\u300F\u300D\u3009\u2019\uFF40\uFF5E\u2026`;for(let r=0;r<e.length;r++)ju.set(e.charCodeAt(r),1);const t=".,;:";for(let r=0;r<t.length;r++)ju.set(t.charCodeAt(r),2)}return ju}var Uj=class fy{static a(t,r,i,s,n){let o=n-1;do{const a=r.charCodeAt(o);if(t.get(a)!==2)break;o--}while(o>s);if(s>0){const a=r.charCodeAt(s-1),c=r.charCodeAt(o);(a===40&&c===41||a===91&&c===93||a===123&&c===125)&&o--}return{range:{startLineNumber:i,startColumn:s+1,endLineNumber:i,endColumn:o+2},url:r.substring(s,o+1)}}static computeLinks(t,r=Mj()){const i=jj(),s=[];for(let n=1,o=t.getLineCount();n<=o;n++){const a=t.getLineContent(n),c=a.length;let l=0,u=0,h=0,d=1,f=!1,g=!1,v=!1,x=!1;for(;l<c;){let $=!1;const C=a.charCodeAt(l);if(d===13){let L;switch(C){case 40:f=!0,L=0;break;case 41:L=f?0:1;break;case 91:v=!0,g=!0,L=0;break;case 93:v=!1,L=g?0:1;break;case 123:x=!0,L=0;break;case 125:L=x?0:1;break;case 39:case 34:case 96:h===C?L=1:h===39||h===34||h===96?L=0:L=1;break;case 42:L=h===42?1:0;break;case 124:L=h===124?1:0;break;case 32:L=v?0:1;break;default:L=i.get(C)}L===1&&(s.push(fy.a(i,a,n,u,l)),$=!0)}else if(d===12){let L;C===91?(g=!0,L=0):L=i.get(C),L===1?$=!0:d=13}else d=r.nextState(d,C),d===0&&($=!0);$&&(d=1,f=!1,g=!1,x=!1,u=l+1,h=C),l++}d===13&&s.push(fy.a(i,a,n,u,c))}return s}},Hj=class{constructor(){this.a=[]}add(e){this.b=void 0,this.a.push(e)}delete(e){const t=this.a.indexOf(e);t>=0&&(this.a.splice(t,1),this.b=void 0)}c(){if(!this.b){const e=this.a.sort(),t=[];let r,i,s=14,n=14;for(const o of e){let a=r?HP(r,o):0;for(a===0?i=1:i=n;a<o.length;a++)a+1===o.length?(s=n,n=9):n+=1,t.push([i,o.toUpperCase().charCodeAt(a),n]),t.push([i,o.toLowerCase().charCodeAt(a),n]),i=n;r=o,n=s}t.push([9,58,10]),t.push([10,47,12]),this.b=new fS(t)}}provideDocumentLinks(e){this.c();const t=[],r=Uj.computeLinks({getLineContent(i){return e.lineAt(i-1).text},getLineCount(){return e.lineCount}},this.b);for(const i of r){const s=To.to(i);s.target&&t.push(s)}return t}},Bj=class py{constructor(t,r){this.i=r,this.b=new Hj,this.c=new Map,this.d=new Set,this.f=new Map,this.h=0,this.a=t.getProxy(K.MainThreadFileSystem)}dispose(){this.g?.dispose()}registerFileSystemProvider(t,r,i,s={}){if(py.j(i),this.d.has(r))throw new Error(`a provider for the scheme '${r}' is already registered`);this.g||(this.g=this.i.registerDocumentLinkProvider(t,"*",this.b));const n=this.h++;this.b.add(r),this.d.add(r),this.c.set(n,i);let o=2;s.isCaseSensitive&&(o+=1024),s.isReadonly&&(o+=2048),typeof i.copy=="function"&&(o+=8),typeof i.open=="function"&&typeof i.close=="function"&&typeof i.read=="function"&&typeof i.write=="function"&&(H(t,"fsChunks"),o+=4);let a;s.isReadonly&&co(s.isReadonly)&&s.isReadonly.value!==""&&(a={value:s.isReadonly.value,isTrusted:s.isReadonly.isTrusted,supportThemeIcons:s.isReadonly.supportThemeIcons,supportHtml:s.isReadonly.supportHtml,baseUri:s.isReadonly.baseUri,uris:s.isReadonly.uris}),this.a.$registerFileSystemProvider(n,r,o,a).catch(l=>{console.error(`FAILED to register filesystem provider of ${t.identifier.value}-extension for the scheme ${r}`),console.error(l)});const c=i.onDidChangeFile(l=>{const u=[];for(const h of l){const{uri:d,type:f}=h;if(d.scheme!==r)continue;let g;switch(f){case ja.Changed:g=0;break;case ja.Created:g=1;break;case ja.Deleted:g=2;break;default:throw new Error("Unknown FileChangeType")}u.push({resource:d,type:g})}this.a.$onFileSystemChange(n,u)});return me(()=>{c.dispose(),this.b.delete(r),this.d.delete(r),this.c.delete(n),this.a.$unregisterProvider(n)})}static j(t){if(!t)throw new Error("MISSING provider");if(typeof t.watch!="function")throw new Error("Provider does NOT implement watch");if(typeof t.stat!="function")throw new Error("Provider does NOT implement stat");if(typeof t.readDirectory!="function")throw new Error("Provider does NOT implement readDirectory");if(typeof t.createDirectory!="function")throw new Error("Provider does NOT implement createDirectory");if(typeof t.readFile!="function")throw new Error("Provider does NOT implement readFile");if(typeof t.writeFile!="function")throw new Error("Provider does NOT implement writeFile");if(typeof t.delete!="function")throw new Error("Provider does NOT implement delete");if(typeof t.rename!="function")throw new Error("Provider does NOT implement rename")}static k(t){const{type:r,ctime:i,mtime:s,size:n,permissions:o}=t;return{type:r,ctime:i,mtime:s,size:n,permissions:o}}$stat(t,r){return Promise.resolve(this.l(t).stat(k.revive(r))).then(i=>py.k(i))}$readdir(t,r){return Promise.resolve(this.l(t).readDirectory(k.revive(r)))}$readFile(t,r){return Promise.resolve(this.l(t).readFile(k.revive(r))).then(i=>re.wrap(i))}$writeFile(t,r,i,s){return Promise.resolve(this.l(t).writeFile(k.revive(r),i.buffer,s))}$delete(t,r,i){return Promise.resolve(this.l(t).delete(k.revive(r),i))}$rename(t,r,i,s){return Promise.resolve(this.l(t).rename(k.revive(r),k.revive(i),s))}$copy(t,r,i,s){const n=this.l(t);if(!n.copy)throw new Error('FileSystemProvider does not implement "copy"');return Promise.resolve(n.copy(k.revive(r),k.revive(i),s))}$mkdir(t,r){return Promise.resolve(this.l(t).createDirectory(k.revive(r)))}$watch(t,r,i,s){const n=this.l(t).watch(k.revive(i),s);this.f.set(r,n)}$unwatch(t,r){const i=this.f.get(r);i&&(i.dispose(),this.f.delete(r))}$open(t,r,i){const s=this.l(t);if(!s.open)throw new Error('FileSystemProvider does not implement "open"');return Promise.resolve(s.open(k.revive(r),i))}$close(t,r){const i=this.l(t);if(!i.close)throw new Error('FileSystemProvider does not implement "close"');return Promise.resolve(i.close(r))}$read(t,r,i,s){const n=this.l(t);if(!n.read)throw new Error('FileSystemProvider does not implement "read"');const o=re.alloc(s);return Promise.resolve(n.read(r,i,o.buffer,0,s)).then(a=>o.slice(0,a))}$write(t,r,i,s){const n=this.l(t);if(!n.write)throw new Error('FileSystemProvider does not implement "write"');return Promise.resolve(n.write(r,i,s.buffer,0,s.byteLength))}l(t){const r=this.c.get(t);if(!r){const i=new Error;throw i.name="ENOPRO",i.message="no provider",i}return r}};function gS(e){return typeof e.correlationId=="number"}function zj(e){return e.recursive===!0}var mS=class X3 extends ae{static{this.a=5}constructor(t,r,i,s){super(),this.h=t,this.j=r,this.m=i,this.n=s,this.c=this.B(new ks),this.f=void 0,this.g=0}s(){const t=new be;this.c.value=t,this.b=this.r(t),this.b.setVerboseLogging(this.m),t.add(this.b.onDidChangeFile(r=>this.h(r))),t.add(this.b.onDidLogMessage(r=>this.j(r))),t.add(this.b.onDidError(r=>this.t(r.error,r.request)))}t(t,r){this.u(t,r)?this.g<X3.a&&this.f?(this.y(`restarting watcher after unexpected error: ${t}`),this.w(this.f)):this.y(`gave up attempting to restart watcher after unexpected error: ${t}`):this.y(t)}u(t,r){return!(!this.n.restartOnError||r||t.indexOf("No space left on device")!==-1||t.indexOf("EMFILE")!==-1)}w(t){this.g++,this.s(),this.watch(t)}async watch(t){this.f=t,await this.b?.watch(t)}async setVerboseLogging(t){this.m=t,await this.b?.setVerboseLogging(t)}y(t){this.j({type:"error",message:`[File Watcher (${this.n.type})] ${t}`})}z(t){this.j({type:"trace",message:`[File Watcher (${this.n.type})] ${t}`})}dispose(){return this.b=void 0,super.dispose()}},_j=class extends mS{constructor(e,t,r){super(e,t,r,{type:"node.js",restartOnError:!1})}},Wj=class extends mS{constructor(e,t,r){super(e,t,r,{type:"universal",restartOnError:!0})}};function vS(e){return e.map(t=>({type:t.type,resource:k.revive(t.resource),cId:t.cId}))}function Vj(e){const t=new qj;for(const r of e)t.processEvent(r);return t.coalesce()}function wS(e,t){return typeof t=="string"&&!t.startsWith(fo)&&!Ki(t)?{base:e,pattern:t}:t}function bS(e,t){const r=[];for(const i of t)r.push(Ni(wS(e,i)));return r}var qj=class{constructor(){this.a=new Set,this.b=new Map}c(e){return Ot?e.resource.fsPath:e.resource.fsPath.toLowerCase()}processEvent(e){const t=this.b.get(this.c(e));let r=!1;if(t){const i=t.type,s=e.type;t.resource.fsPath!==e.resource.fsPath&&(e.type===2||e.type===1)?r=!0:i===1&&s===2?(this.b.delete(this.c(e)),this.a.delete(t)):i===2&&s===1?t.type=0:i===1&&s===0||(t.type=s)}else r=!0;r&&(this.a.add(e),this.b.set(this.c(e),e))}coalesce(){const e=[],t=[];return Array.from(this.a).filter(r=>r.type!==2?(e.push(r),!1):!0).sort((r,i)=>r.resource.fsPath.length-i.resource.fsPath.length).filter(r=>t.some(i=>xT(r.resource.fsPath,i,!Ot))?!1:(t.push(r.resource.fsPath),!0)).concat(e)}};function Gj(e,t){if(typeof t=="number")switch(e.type){case 1:return(t&4)===0;case 2:return(t&8)===0;case 0:return(t&2)===0}return!1}function Jj(e){if(typeof e=="number"){const t=[];return e&4&&t.push("Added"),e&8&&t.push("Deleted"),e&2&&t.push("Updated"),t.length===0?"<all>":`[${t.join(", ")}]`}return"<none>"}var Qj=class{get ignoreCreateEvents(){return!!(this.h&1)}get ignoreChangeEvents(){return!!(this.h&2)}get ignoreDeleteEvents(){return!!(this.h&4)}constructor(e,t,r,i,s,n,o){this.a=Math.random(),this.b=new T,this.c=new T,this.d=new T,this.h=0,o.ignoreCreateEvents&&(this.h+=1),o.ignoreChangeEvents&&(this.h+=2),o.ignoreDeleteEvents&&(this.h+=4);const a=Ni(n),c=typeof n=="string",l=o.correlate,u=s(h=>{if(!(typeof h.session=="number"&&h.session!==this.a)&&!(l&&typeof h.session>"u")){if(!o.ignoreCreateEvents)for(const d of h.created){const f=k.revive(d);a(f.fsPath)&&(!c||r.getWorkspaceFolder(f))&&this.b.fire(f)}if(!o.ignoreChangeEvents)for(const d of h.changed){const f=k.revive(d);a(f.fsPath)&&(!c||r.getWorkspaceFolder(f))&&this.c.fire(f)}if(!o.ignoreDeleteEvents)for(const d of h.deleted){const f=k.revive(d);a(f.fsPath)&&(!c||r.getWorkspaceFolder(f))&&this.d.fire(f)}}});this.g=_e.from(this.i(e,r,t,i,n,o,o.correlate),this.b,this.c,this.d,u)}i(e,t,r,i,s,n,o){const a=_e.from();if(typeof s=="string"||n.ignoreChangeEvents&&n.ignoreCreateEvents&&n.ignoreDeleteEvents)return a;const c=e.getProxy(K.MainThreadFileSystemEventService);let l=!1;(s.pattern.includes(fo)||s.pattern.includes(b1))&&(l=!0);const u=n.excludes??[];let h,d;if(o)(n.ignoreChangeEvents||n.ignoreCreateEvents||n.ignoreDeleteEvents)&&(d=14,n.ignoreChangeEvents&&(d&=-3),n.ignoreCreateEvents&&(d&=-5),n.ignoreDeleteEvents&&(d&=-9));else if(l&&u.length===0){const f=t.getWorkspaceFolder(k.revive(s.baseUri)),g=r.getConfiguration("files",f).get("watcherExclude");if(g)for(const v in g)v&&g[v]===!0&&u.push(v)}else if(!l){const f=t.getWorkspaceFolder(k.revive(s.baseUri));if(f){const g=r.getConfiguration("files",f).get("watcherExclude");if(g){for(const v in g)if(v&&g[v]===!0){const x=`${pn(v,"/")}/${fo}`;h||(h=[]),h.push(wS(f.uri.fsPath,x))}}if(!h||h.length===0)return a}}return c.$watch(i.identifier.value,this.a,s.baseUri,{recursive:l,excludes:u,includes:h,filter:d},!!o),_e.from({dispose:()=>c.$unwatch(this.a)})}dispose(){this.g.dispose()}get onDidCreate(){return this.b.event}get onDidChange(){return this.c.event}get onDidDelete(){return this.d.event}},Yj=class{constructor(e){this.a=e,this.session=this.a.session,this.b=new _r(()=>this.a.created.map(k.revive)),this.c=new _r(()=>this.a.changed.map(k.revive)),this.d=new _r(()=>this.a.deleted.map(k.revive))}get created(){return this.b.value}get changed(){return this.c.value}get deleted(){return this.d.value}},Xj=class{constructor(e,t,r){this.j=e,this.k=t,this.l=r,this.a=new T,this.b=new T,this.c=new T,this.d=new T,this.g=new Fc,this.h=new Fc,this.i=new Fc,this.onDidRenameFile=this.b.event,this.onDidCreateFile=this.c.event,this.onDidDeleteFile=this.d.event}createFileSystemWatcher(e,t,r,i,s){return new Qj(this.j,t,e,r,this.a.event,Qr.from(i),s)}$onFileEvent(e){this.a.fire(new Yj(e))}$onDidRunFileOperation(e,t){switch(e){case 2:this.b.fire(Object.freeze({files:t.map(r=>({oldUri:k.revive(r.source),newUri:k.revive(r.target)}))}));break;case 1:this.d.fire(Object.freeze({files:t.map(r=>k.revive(r.target))}));break;case 0:case 3:this.c.fire(Object.freeze({files:t.map(r=>k.revive(r.target))}));break;default:}}getOnWillRenameFileEvent(e){return this.m(e,this.g)}getOnWillCreateFileEvent(e){return this.m(e,this.h)}getOnWillDeleteFileEvent(e){return this.m(e,this.i)}m(e,t){return(r,i,s)=>{const n=function(a){r.call(i,a)};return n.extension=e,t.event(n,void 0,s)}}async $onWillRunFileOperation(e,t,r,i){switch(e){case 2:return await this.n(this.g,{files:t.map(s=>({oldUri:k.revive(s.source),newUri:k.revive(s.target)}))},r,i);case 1:return await this.n(this.i,{files:t.map(s=>k.revive(s.target))},r,i);case 0:case 3:return await this.n(this.h,{files:t.map(s=>k.revive(s.target))},r,i)}}async n(e,t,r,i){const s=new Set,n=[];if(await e.fireAsync(t,i,async(a,c)=>{const l=Date.now(),u=await Promise.resolve(a);u instanceof vo&&(n.push([c.extension,u]),s.add(c.extension.displayName??c.extension.identifier.value)),Date.now()-l>r&&this.k.warn("SLOW file-participant",c.extension.identifier)}),i.isCancellationRequested||n.length===0)return;const o={edits:[]};for(const[,a]of n){const{edits:c}=xr.from(a,{getTextDocumentVersion:l=>this.l.getDocument(l)?.version,getNotebookDocumentVersion:()=>{}});o.edits=o.edits.concat(c)}return{edit:o,extensionNames:Array.from(s)}}},Zj=class{constructor(e,t,r,i,s){this.a=t,this.b=r,this.c=i;const n=new Se("interactive.open","_interactive.open","Open interactive window and return notebook editor and input URI",[new V("showOptions","Show Options",o=>!0,o=>o),new V("resource","Interactive resource Uri",o=>!0,o=>o),new V("controllerId","Notebook controller Id",o=>!0,o=>o),new V("title","Interactive editor title",o=>!0,o=>o)],new Ee("Notebook and input URI",o=>{if(s.debug("[ExtHostInteractive] open iw with notebook editor id",o.notebookEditorId),o.notebookEditorId!==void 0){const a=this.a.getEditorById(o.notebookEditorId);return s.debug("[ExtHostInteractive] notebook editor found",a.id),{notebookUri:k.revive(o.notebookUri),inputUri:k.revive(o.inputUri),notebookEditor:a.apiEditor}}return s.debug("[ExtHostInteractive] notebook editor not found, uris for the interactive document",o.notebookUri,o.inputUri),{notebookUri:k.revive(o.notebookUri),inputUri:k.revive(o.inputUri)}}));this.c.registerApiCommand(n)}$willAddInteractiveDocument(e,t,r,i){this.b.acceptDocumentsAndEditorsDelta({addedDocuments:[{EOL:t,lines:[""],languageId:r,uri:e,isDirty:!1,versionId:1}]})}$willRemoveInteractiveDocument(e,t){this.b.acceptDocumentsAndEditorsDelta({removedDocuments:[e]})}},Kj=class{constructor(e){this.b=0,this.a=e.getProxy(K.MainThreadLabelService)}$registerResourceLabelFormatter(e){const t=this.b++;return this.a.$registerResourceLabelFormatter(t,e),me(()=>{this.a.$unregisterResourceLabelFormatter(t)})}},yS;(function(e){e[e.LTR=0]="LTR",e[e.RTL=1]="RTL"})(yS||(yS={}));var eU=class wi extends nt{constructor(t,r,i,s){super(t,r,i,s),this.selectionStartLineNumber=t,this.selectionStartColumn=r,this.positionLineNumber=i,this.positionColumn=s}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(t){return wi.selectionsEqual(this,t)}static selectionsEqual(t,r){return t.selectionStartLineNumber===r.selectionStartLineNumber&&t.selectionStartColumn===r.selectionStartColumn&&t.positionLineNumber===r.positionLineNumber&&t.positionColumn===r.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(t,r){return this.getDirection()===0?new wi(this.startLineNumber,this.startColumn,t,r):new wi(t,r,this.startLineNumber,this.startColumn)}getPosition(){return new ri(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new ri(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(t,r){return this.getDirection()===0?new wi(t,r,this.endLineNumber,this.endColumn):new wi(this.endLineNumber,this.endColumn,t,r)}static fromPositions(t,r=t){return new wi(t.lineNumber,t.column,r.lineNumber,r.column)}static fromRange(t,r){return r===0?new wi(t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn):new wi(t.endLineNumber,t.endColumn,t.startLineNumber,t.startColumn)}static liftSelection(t){return new wi(t.selectionStartLineNumber,t.selectionStartColumn,t.positionLineNumber,t.positionColumn)}static selectionsArrEqual(t,r){if(t&&!r||!t&&r)return!1;if(!t&&!r)return!0;if(t.length!==r.length)return!1;for(let i=0,s=t.length;i<s;i++)if(!this.selectionsEqual(t[i],r[i]))return!1;return!0}static isISelection(t){return t&&typeof t.selectionStartLineNumber=="number"&&typeof t.selectionStartColumn=="number"&&typeof t.positionLineNumber=="number"&&typeof t.positionColumn=="number"}static createWithDirection(t,r,i,s,n){return n===0?new wi(t,r,i,s):new wi(i,s,t,r)}},kS=class Z3{constructor(t,r){this.d=t,this.e=r}async provideDocumentSymbols(t,r){const i=this.d.getDocument(t),s=await this.e.provideDocumentSymbols(i,r);if(!Xg(s))return s[0]instanceof xl?s.map(Nv.from):Z3.f(s)}static f(t){t=t.slice(0).sort((s,n)=>{let o=s.location.range.start.compareTo(n.location.range.start);return o===0&&(o=n.location.range.end.compareTo(s.location.range.end)),o});const r=[],i=[];for(const s of t){const n={name:s.name||"!!MISSING: name!!",kind:di.from(s.kind),tags:s.tags?.map(_s.from)||[],detail:"",containerName:s.containerName,range:W.from(s.location.range),selectionRange:W.from(s.location.range),children:[]};for(;;){if(i.length===0){i.push(n),r.push(n);break}const o=i[i.length-1];if(nt.containsRange(o.range,n.range)&&!nt.equalsRange(o.range,n.range)){o.children?.push(n),i.push(n);break}i.pop()}}return r}},rg=class{constructor(e,t,r,i,s,n){this.f=e,this.g=t,this.h=r,this.j=i,this.k=s,this.l=n,this.d=new Vi("CodeLens"),this.e=new Map}async provideCodeLenses(e,t){const r=this.f.getDocument(e),i=await this.h.provideCodeLenses(r,t);if(!i||t.isCancellationRequested)return;const s=this.d.add(i),n=new be;this.e.set(s,n);const o={cacheId:s,lenses:[]};for(let a=0;a<i.length;a++)o.lenses.push({cacheId:[s,a],range:W.from(i[a].range),command:this.g.toInternal(i[a].command,n)});return o}async resolveCodeLens(e,t){const r=e.cacheId&&this.d.get(...e.cacheId);if(!r)return;let i;if(typeof this.h.resolveCodeLens!="function"||r.isResolved?i=r:i=await this.h.resolveCodeLens(r,t),i||(i=r),t.isCancellationRequested)return;const s=e.cacheId&&this.e.get(e.cacheId[0]);if(s){if(!i.command){const n=new Error("INVALID code lens resolved, lacks command: "+this.j.identifier.value);this.k.onExtensionError(this.j.identifier,n),this.l.error(n);return}return e.command=this.g.toInternal(i.command,s),e}}releaseCodeLenses(e){this.e.get(e)?.dispose(),this.e.delete(e),this.d.delete(e)}};function ig(e){return Array.isArray(e)?e.map(Kl.from):e?[Kl.from(e)]:[]}var xS=class{constructor(e,t){this.d=e,this.e=t}async provideDefinition(e,t,r){const i=this.d.getDocument(e),s=Ze.to(t),n=await this.e.provideDefinition(i,s,r);return ig(n)}},ES=class{constructor(e,t){this.d=e,this.e=t}async provideDeclaration(e,t,r){const i=this.d.getDocument(e),s=Ze.to(t),n=await this.e.provideDeclaration(i,s,r);return ig(n)}},SS=class{constructor(e,t){this.d=e,this.e=t}async provideImplementation(e,t,r){const i=this.d.getDocument(e),s=Ze.to(t),n=await this.e.provideImplementation(i,s,r);return ig(n)}},$S=class{constructor(e,t){this.d=e,this.e=t}async provideTypeDefinition(e,t,r){const i=this.d.getDocument(e),s=Ze.to(t),n=await this.e.provideTypeDefinition(i,s,r);return ig(n)}},Zw=class K3{static{this.f=10}constructor(t,r){this.g=t,this.h=r,this.d=0,this.e=new Map}async provideHover(t,r,i,s){const n=this.g.getDocument(t),o=Ze.to(r);let a;if(i&&i.verbosityRequest){const h=i.verbosityRequest.previousHover.id,d=this.e.get(h);if(!d)throw new Error(`Hover with id ${h} not found`);const f={verbosityDelta:i.verbosityRequest.verbosityDelta,previousHover:d};a=await this.h.provideHover(n,o,s,f)}else a=await this.h.provideHover(n,o,s);if(!a||Xg(a.contents))return;a.range||(a.range=n.getWordRangeAtPosition(o)),a.range||(a.range=new Re(o,o));const c=eu.from(a),l=this.d;if(this.e.size===K3.f){const h=Math.min(...this.e.keys());this.e.delete(h)}return this.e.set(l,a),this.d+=1,{...c,id:l}}releaseHover(t){this.e.delete(t)}},CS=class{constructor(e,t){this.d=e,this.e=t}async provideEvaluatableExpression(e,t,r){const i=this.d.getDocument(e),s=Ze.to(t),n=await this.e.provideEvaluatableExpression(i,s,r);if(n)return Mv.from(n)}},PS=class{constructor(e,t){this.d=e,this.e=t}async provideInlineValues(e,t,r,i){const s=this.d.getDocument(e),n=await this.e.provideInlineValues(s,W.to(t),Hf.to(r),i);if(Array.isArray(n))return n.map(o=>Uf.from(o))}},IS=class{constructor(e,t){this.d=e,this.e=t}async provideDocumentHighlights(e,t,r){const i=this.d.getDocument(e),s=Ze.to(t),n=await this.e.provideDocumentHighlights(i,s,r);if(Array.isArray(n))return n.map(Ga.from)}},DS=class{constructor(e,t,r){this.d=e,this.e=t,this.f=r}async provideMultiDocumentHighlights(e,t,r,i){const s=this.d.getDocument(e),n=r.map(c=>{try{return this.d.getDocument(c)}catch(l){this.f.error("Error: Unable to retrieve document from URI: "+c+". Error message: "+l);return}}).filter(c=>c!==void 0),o=Ze.to(t),a=await this.e.provideMultiDocumentHighlights(s,o,n,i);if(Array.isArray(a))return a.map(jv.from)}},AS=class{constructor(e,t){this.d=e,this.e=t}async provideLinkedEditingRanges(e,t,r){const i=this.d.getDocument(e),s=Ze.to(t),n=await this.e.provideLinkedEditingRanges(i,s,r);if(n&&Array.isArray(n.ranges))return{ranges:Rt(n.ranges.map(W.from)),wordPattern:n.wordPattern}}},TS=class{constructor(e,t){this.d=e,this.e=t}async provideReferences(e,t,r,i){const s=this.d.getDocument(e),n=Ze.to(t),o=await this.e.provideReferences(s,n,r,i);if(Array.isArray(o))return o.map(Tr.from)}},sg=class Hg{static{this.d=1e3}constructor(t,r,i,s,n,o,a){this.g=t,this.h=r,this.j=i,this.k=s,this.l=n,this.m=o,this.n=a,this.e=new Vi("CodeAction"),this.f=new Map}async provideCodeActions(t,r,i,s){const n=this.g.getDocument(t),o=eU.isISelection(r)?Ui.to(r):W.to(r),a=[];for(const f of this.j.getDiagnostics(t))if(o.intersection(f.range)&&a.push(f)>Hg.d)break;const c={diagnostics:a,only:i.only?new kt(i.only):void 0,triggerKind:Zv.to(i.trigger)},l=await this.k.provideCodeActions(n,o,c,s);if(!Tc(l)||s.isCancellationRequested)return;const u=this.e.add(l),h=new be;this.f.set(u,h);const d=[];for(let f=0;f<l.length;f++){const g=l[f];if(g)if(Hg.o(g))this.n.report("CodeActionProvider.provideCodeActions - return commands",this.m,"Return 'CodeAction' instances instead."),d.push({_isSynthetic:!0,title:g.title,command:this.h.toInternal(g,h)});else{c.only&&(g.kind?c.only.contains(g.kind)||this.l.warn(`${this.m.identifier.value} - Code actions of kind '${c.only.value}' requested but returned code action is of kind '${g.kind.value}'. Code action will be dropped. Please check 'CodeActionContext.only' to only return requested code actions.`):this.l.warn(`${this.m.identifier.value} - Code actions of kind '${c.only.value}' requested but returned code action does not have a 'kind'. Code action will be dropped. Please set 'CodeAction.kind'.`));const v=g.ranges??[];d.push({cacheId:[u,f],title:g.title,command:g.command&&this.h.toInternal(g.command,h),diagnostics:g.diagnostics&&g.diagnostics.map(Va.from),edit:g.edit&&xr.from(g.edit,void 0),kind:g.kind&&g.kind.value,isPreferred:g.isPreferred,isAI:zt(this.m,"codeActionAI")?g.isAI:!1,ranges:zt(this.m,"codeActionRanges")?Rt(v.map(W.from)):void 0,disabled:g.disabled?.reason})}}return{cacheId:u,actions:d}}async resolveCodeAction(t,r){const[i,s]=t,n=this.e.get(i,s);if(!n||Hg.o(n))return{};if(!this.k.resolveCodeAction)return{};const o=await this.k.resolveCodeAction(n,r)??n;let a;o.edit&&(a=xr.from(o.edit,void 0));let c;if(o.command){const l=this.f.get(i);l&&(c=this.h.toInternal(o.command,l))}return{edit:a,command:c}}releaseCodeActions(t){this.f.get(t)?.dispose(),this.f.delete(t),this.e.delete(t)}static o(t){return typeof t.command=="string"&&typeof t.title=="string"}},Uu=class{constructor(e,t,r,i,s){this.e=e,this.f=t,this.g=r,this.h=i,this.j=s,this.d=new Vi("DocumentPasteEdit")}async prepareDocumentPaste(e,t,r,i){if(!this.g.prepareDocumentPaste)return;const s=this.f.getDocument(e),n=t.map(c=>W.to(c)),o=On.toDataTransfer(r,()=>{throw new CC});if(await this.g.prepareDocumentPaste(s,n,o,i),i.isCancellationRequested)return;const a=Array.from(o).filter(([,c])=>!(c instanceof rf));return On.from(a)}async providePasteEdits(e,t,r,i,s,n){if(!this.g.provideDocumentPasteEdits)return[];const o=this.f.getDocument(t),a=r.map(h=>W.to(h)),c=On.toDataTransfer(i,async h=>(await this.e.$resolvePasteFileData(this.h,e,h)).buffer),l=await this.g.provideDocumentPasteEdits(o,a,c,{only:s.only?new sf(s.only):void 0,triggerKind:s.triggerKind},n);if(!l||n.isCancellationRequested)return[];const u=this.d.add(l);return l.map((h,d)=>({_cacheId:[u,d],title:h.title??p(2719,null,this.j.displayName||this.j.name),kind:h.kind,yieldTo:h.yieldTo?.map(f=>f.value),insertText:typeof h.insertText=="string"?h.insertText:{snippet:h.insertText.value},additionalEdit:h.additionalEdit?xr.from(h.additionalEdit,void 0):void 0}))}async resolvePasteEdit(e,t){const[r,i]=e,s=this.d.get(r,i);if(!s||!this.g.resolveDocumentPasteEdit)return{};const n=await this.g.resolveDocumentPasteEdit(s,t)??s;return{additionalEdit:n.additionalEdit?xr.from(n.additionalEdit,void 0):void 0}}releasePasteEdits(e){this.d.delete(e)}},RS=class{constructor(e,t){this.d=e,this.e=t}async provideDocumentFormattingEdits(e,t,r){const i=this.d.getDocument(e),s=await this.e.provideDocumentFormattingEdits(i,t,r);if(Array.isArray(s))return s.map(Jt.from)}},Kw=class{constructor(e,t){this.d=e,this.e=t}async provideDocumentRangeFormattingEdits(e,t,r,i){const s=this.d.getDocument(e),n=W.to(t),o=await this.e.provideDocumentRangeFormattingEdits(s,n,r,i);if(Array.isArray(o))return o.map(Jt.from)}async provideDocumentRangesFormattingEdits(e,t,r,i){p4(typeof this.e.provideDocumentRangesFormattingEdits=="function","INVALID invocation of `provideDocumentRangesFormattingEdits`");const s=this.d.getDocument(e),n=t.map(W.to),o=await this.e.provideDocumentRangesFormattingEdits(s,n,r,i);if(Array.isArray(o))return o.map(Jt.from)}},LS=class{constructor(e,t){this.d=e,this.e=t,this.autoFormatTriggerCharacters=[]}async provideOnTypeFormattingEdits(e,t,r,i,s){const n=this.d.getDocument(e),o=Ze.to(t),a=await this.e.provideOnTypeFormattingEdits(n,o,r,i,s);if(Array.isArray(a))return a.map(Jt.from)}},ng=class{constructor(e,t){this.e=e,this.f=t,this.d=new Vi("WorkspaceSymbols")}async provideWorkspaceSymbols(e,t){const r=await this.e.provideWorkspaceSymbols(e,t);if(!Tc(r))return{symbols:[]};const i=this.d.add(r),s={cacheId:i,symbols:[]};for(let n=0;n<r.length;n++){const o=r[n];if(!o||!o.name){this.f.warn("INVALID SymbolInformation",o);continue}s.symbols.push({...Do.from(o),cacheId:[i,n]})}return s}async resolveWorkspaceSymbol(e,t){if(typeof this.e.resolveWorkspaceSymbol!="function"||!e.cacheId)return e;const r=this.d.get(...e.cacheId);if(r){const i=await this.e.resolveWorkspaceSymbol(r,t);return i&&Ps(e,Do.from(i),!0)}}releaseWorkspaceSymbols(e){this.d.delete(e)}},og=class gy{static supportsResolving(t){return typeof t.prepareRename=="function"}constructor(t,r,i){this.d=t,this.e=r,this.f=i}async provideRenameEdits(t,r,i,s){const n=this.d.getDocument(t),o=Ze.to(r);try{const a=await this.e.provideRenameEdits(n,o,i,s);return a?xr.from(a):void 0}catch(a){const c=gy.g(a);return c?{rejectReason:c,edits:void 0}:Promise.reject(a)}}async resolveRenameLocation(t,r,i){if(typeof this.e.prepareRename!="function")return Promise.resolve(void 0);const s=this.d.getDocument(t),n=Ze.to(r);try{const o=await this.e.prepareRename(s,n,i);let a,c;if(Re.isRange(o)?(a=o,c=s.getText(o)):Dt(o)&&(a=o.range,c=o.placeholder),!a||!c)return;if(a.start.line>n.line||a.end.line<n.line){this.f.warn("INVALID rename location: position line must be within range start/end lines");return}return{range:W.from(a),text:c}}catch(o){const a=gy.g(o);return a?{rejectReason:a,range:void 0,text:void 0}:Promise.reject(o)}}static g(t){return typeof t=="string"?t:t instanceof Error&&typeof t.message=="string"?t.message:void 0}},eb=class my{static{this.d={[td.Invoke]:Nl.Invoke,[td.Automatic]:Nl.Automatic}}constructor(t,r,i){this.e=t,this.f=r,this.g=i}async supportsAutomaticNewSymbolNamesTriggerKind(){return this.f.supportsAutomaticTriggerKind}async provideNewSymbolNames(t,r,i,s){const n=this.e.getDocument(t),o=W.to(r);try{const a=my.d[i],c=await this.f.provideNewSymbolNames(n,o,a,s);return c?c.map(l=>typeof l=="string"?{newSymbolName:l}:{newSymbolName:l.newSymbolName,tags:l.tags}):void 0}catch(a){this.g.error(my.h(a)??JSON.stringify(a,null,"	"));return}}static h(t){return typeof t=="string"?t:t instanceof Error&&typeof t.message=="string"?t.message:void 0}},tb=class{constructor(e,t){this.resultId=e,this.tokens=t}},rb=class Gi{constructor(t,r){this.f=t,this.g=r,this.e=1,this.d=new Map}async provideDocumentSemanticTokens(t,r,i){const s=this.f.getDocument(t),n=r!==0?this.d.get(r):null;let o=typeof n?.resultId=="string"&&typeof this.g.provideDocumentSemanticTokensEdits=="function"?await this.g.provideDocumentSemanticTokensEdits(s,n.resultId,i):await this.g.provideDocumentSemanticTokens(s,i);return n&&this.d.delete(r),o?(o=Gi.h(o),this.o(Gi.n(n,o),o)):null}async releaseDocumentSemanticColoring(t){this.d.delete(t)}static h(t){return Gi.j(t)?Gi.k(t)?t:new Ua(new Uint32Array(t.data),t.resultId):Gi.l(t)?Gi.m(t)?t:new uf(t.edits.map(r=>new D9(r.start,r.deleteCount,r.data?new Uint32Array(r.data):r.data)),t.resultId):t}static j(t){return t&&!!t.data}static k(t){return t.data instanceof Uint32Array}static l(t){return t&&Array.isArray(t.edits)}static m(t){for(const r of t.edits)if(!(r.data instanceof Uint32Array))return!1;return!0}static n(t,r){if(!Gi.j(r)||!t||!t.tokens)return r;const i=t.tokens,s=i.length,n=r.data,o=n.length;let a=0;const c=Math.min(s,o);for(;a<c&&i[a]===n[a];)a++;if(a===s&&a===o)return new uf([],r.resultId);let l=0;const u=c-a;for(;l<u&&i[s-l-1]===n[o-l-1];)l++;return new uf([{start:a,deleteCount:s-a-l,data:n.subarray(a,o-l)}],r.resultId)}o(t,r){if(Gi.j(t)){const i=this.e++;return this.d.set(i,new tb(t.resultId,t.data)),Gw({id:i,type:"full",data:t.data})}if(Gi.l(t)){const i=this.e++;return Gi.j(r)?this.d.set(i,new tb(r.resultId,r.data)):this.d.set(i,new tb(t.resultId)),Gw({id:i,type:"delta",deltas:(t.edits||[]).map(s=>({start:s.start,deleteCount:s.deleteCount,data:s.data}))})}return null}},NS=class{constructor(e,t){this.d=e,this.e=t}async provideDocumentRangeSemanticTokens(e,t,r){const i=this.d.getDocument(e),s=await this.e.provideDocumentRangeSemanticTokens(i,W.to(t),r);return s?this.f(s):null}f(e){return Gw({id:0,type:"full",data:e.data})}},Hu=class eC{static supportsResolving(t){return typeof t.resolveCompletionItem=="function"}constructor(t,r,i,s,n){this.f=t,this.g=r,this.h=i,this.j=s,this.k=n,this.d=new Vi("CompletionItem"),this.e=new Map}async provideCompletionItems(t,r,i,s){const n=this.f.getDocument(t),o=Ze.to(r),a=n.getWordRangeAtPosition(o)||new Re(o,o),c=a.with({end:o}),l=new Hr,u=await this.h.provideCompletionItems(n,o,s,Hv.to(i));if(!u||s.isCancellationRequested)return;const h=Array.isArray(u)?new Pa(u):u,d=eC.supportsResolving(this.h)?this.d.add(h.items):this.d.add([]),f=new be;this.e.set(d,f);const g=[],v={x:d,b:g,a:{replace:W.from(a),insert:W.from(c)},c:h.isIncomplete||void 0,d:l.elapsed()};for(let x=0;x<h.items.length;x++){const $=h.items[x],C=this.l($,[d,x],c,a);g.push(C)}return v}async resolveCompletionItem(t,r){if(typeof this.h.resolveCompletionItem!="function")return;const i=this.d.get(...t);if(!i)return;const s=this.l(i,t),n=await this.h.resolveCompletionItem(i,r);if(!n)return;const o=this.l(n,t);return(s.h!==o.h||s.i!==o.i)&&this.j.report("CompletionItem.insertText",this.k,"extension MAY NOT change 'insertText' of a CompletionItem during resolve"),(s.n!==o.n||s.o!==o.o||!Di(s.p,o.p))&&this.j.report("CompletionItem.command",this.k,"extension MAY NOT change 'command' of a CompletionItem during resolve"),{...s,d:o.d,c:o.c,l:o.l,h:o.h,i:o.i,n:o.n,o:o.o,p:o.p}}releaseCompletionItems(t){this.e.get(t)?.dispose(),this.e.delete(t),this.d.delete(t)}l(t,r,i,s){const n=this.e.get(r[0]);if(!n)throw Error("DisposableStore is missing...");const o=this.g.toInternal(t.command,n),a={x:r,a:t.label,b:t.kind!==void 0?zf.from(t.kind):void 0,m:t.tags&&t.tags.map(Bf.from),c:t.detail,d:typeof t.documentation>"u"?void 0:Oe.fromStrict(t.documentation),e:t.sortText!==t.label?t.sortText:void 0,f:t.filterText!==t.label?t.filterText:void 0,g:t.preselect||void 0,i:t.keepWhitespace?1:0,k:t.commitCharacters?.join(""),l:t.additionalTextEdits&&t.additionalTextEdits.map(Jt.from),n:o?.$ident,o:o?.id,p:o?.$ident?void 0:o?.arguments};t.textEdit?(this.j.report("CompletionItem.textEdit",this.k,"Use 'CompletionItem.insertText' and 'CompletionItem.range' instead."),a.h=t.textEdit.newText):typeof t.insertText=="string"?a.h=t.insertText:t.insertText instanceof wo&&(a.h=t.insertText.value,a.i|=4);let c;return t.textEdit?c=t.textEdit.range:t.range&&(c=t.range),Re.isRange(c)?a.j=W.from(c):c&&(!i?.isEqual(c.inserting)||!s?.isEqual(c.replacing))&&(a.j={insert:W.from(c.inserting),replace:W.from(c.replacing)}),a}},pc=class{async provideInlineCompletions(e,t,r,i){}async provideInlineEditsForRange(e,t,r,i){}disposeCompletions(e){}handleDidShowCompletionItem(e,t,r){}handlePartialAccept(e,t,r,i){}},tU=class extends pc{constructor(e,t,r,i){super(),this.f=e,this.g=t,this.h=r,this.j=i,this.d=new FS,this.e=zt(this.f,"inlineCompletionsAdditions"),this.k={[ed.Automatic]:Ll.Automatic,[ed.Explicit]:Ll.Invoke}}get supportsHandleEvents(){return zt(this.f,"inlineCompletionsAdditions")&&(typeof this.h.handleDidShowCompletionItem=="function"||typeof this.h.handleDidPartiallyAcceptCompletionItem=="function")}async provideInlineCompletions(e,t,r,i){const s=this.g.getDocument(e),n=Ze.to(t),o=await this.h.provideInlineCompletionItems(s,n,{selectedCompletionInfo:r.selectedSuggestionInfo?{range:W.to(r.selectedSuggestionInfo.range),text:r.selectedSuggestionInfo.text}:void 0,triggerKind:this.k[r.triggerKind]},i);if(!o||i.isCancellationRequested)return;const a=Array.isArray(o)?o:o.items,c=this.e?Array.isArray(o)?[]:o.commands||[]:[],l=this.e&&!Array.isArray(o)?o.enableForwardStability:void 0;let u;return{pid:this.d.createReferenceId({dispose(){u?.dispose()},items:a}),items:a.map((d,f)=>{let g;d.command&&(u||(u=new be),g=this.j.toInternal(d.command,u));const v=d.insertText;return{insertText:typeof v=="string"?v:{snippet:v.value},filterText:d.filterText,range:d.range?W.from(d.range):void 0,command:g,idx:f,completeBracketPairs:this.e?d.completeBracketPairs:!1}}),commands:c.map(d=>(u||(u=new be),this.j.toInternal(d,u))),suppressSuggestions:!1,enableForwardStability:l}}async provideInlineEditsForRange(e,t,r,i){if(!this.h.provideInlineEditsForRange)return;H(this.f,"inlineCompletionsAdditions");const s=this.g.getDocument(e),n=W.to(t),o=await this.h.provideInlineEditsForRange(s,n,{selectedCompletionInfo:r.selectedSuggestionInfo?{range:W.to(r.selectedSuggestionInfo.range),text:r.selectedSuggestionInfo.text}:void 0,triggerKind:this.k[r.triggerKind],userPrompt:r.userPrompt},i);if(!o||i.isCancellationRequested)return;const a=Array.isArray(o)?o:o.items,c=this.e?Array.isArray(o)?[]:o.commands||[]:[],l=this.e&&!Array.isArray(o)?o.enableForwardStability:void 0;let u;return{pid:this.d.createReferenceId({dispose(){u?.dispose()},items:a}),items:a.map((d,f)=>{let g;d.command&&(u||(u=new be),g=this.j.toInternal(d.command,u));const v=d.insertText;return{insertText:typeof v=="string"?v:{snippet:v.value},filterText:d.filterText,range:d.range?W.from(d.range):void 0,command:g,idx:f,completeBracketPairs:this.e?d.completeBracketPairs:!1}}),commands:c.map(d=>(u||(u=new be),this.j.toInternal(d,u))),suppressSuggestions:!1,enableForwardStability:l}}disposeCompletions(e){this.d.disposeReferenceId(e)?.dispose()}handleDidShowCompletionItem(e,t,r){const i=this.d.get(e)?.items[t];i&&this.h.handleDidShowCompletionItem&&this.e&&this.h.handleDidShowCompletionItem(i,r)}handlePartialAccept(e,t,r,i){const s=this.d.get(e)?.items[t];s&&this.h.handleDidPartiallyAcceptCompletionItem&&this.e&&(this.h.handleDidPartiallyAcceptCompletionItem(s,r),this.h.handleDidPartiallyAcceptCompletionItem(s,i0.to(i)))}},ib=class{async provideInlineEdits(e,t,r){const i=this.f.getDocument(e),s=await this.g.provideInlineEdit(i,{triggerKind:this.e[t.triggerKind]},r);if(!s||r.isCancellationRequested)return;let n;const o=this.d.createReferenceId({dispose(){n?.dispose()},item:s});let a;s.accepted&&(n||(n=new be),a=this.h.toInternal(s.accepted,n));let c;return s.rejected&&(n||(n=new be),c=this.h.toInternal(s.rejected,n)),{pid:o,text:s.text,range:W.from(s.range),accepted:a,rejected:c}}disposeEdit(e){this.d.disposeReferenceId(e)?.dispose()}constructor(e,t,r,i){this.f=t,this.g=r,this.h=i,this.d=new FS,this.e={[rd.Automatic]:Zl.Automatic,[rd.Invoke]:Zl.Invoke}}},FS=class{constructor(){this.d=new Map,this.e=1}createReferenceId(e){const t=this.e++;return this.d.set(t,e),t}disposeReferenceId(e){const t=this.d.get(e);return this.d.delete(e),t}get(e){return this.d.get(e)}},sb=class{constructor(e,t){this.e=e,this.f=t,this.d=new Vi("SignatureHelp")}async provideSignatureHelp(e,t,r,i){const s=this.e.getDocument(e),n=Ze.to(t),o=this.g(r),a=await this.f.provideSignatureHelp(s,n,i,o);if(a){const c=this.d.add([a]);return{...tu.from(a),id:c}}}g(e){let t;if(e.activeSignatureHelp){const r=tu.to(e.activeSignatureHelp),i=this.d.get(e.activeSignatureHelp.id,0);i?(t=i,t.activeSignature=r.activeSignature,t.activeParameter=r.activeParameter):t=r}return{...e,activeSignatureHelp:t}}releaseSignatureHelp(e){this.d.delete(e)}},ag=class{constructor(e,t,r,i,s){this.f=e,this.g=t,this.h=r,this.j=i,this.k=s,this.d=new Vi("InlayHints"),this.e=new Map}async provideInlayHints(e,t,r){const i=this.f.getDocument(e),s=W.to(t),n=await this.h.provideInlayHints(i,s,r);if(!Array.isArray(n)||n.length===0){this.j.trace(`[InlayHints] NO inlay hints from '${this.k.identifier.value}' for range ${JSON.stringify(t)}`);return}if(r.isCancellationRequested)return;const o=this.d.add(n);this.e.set(o,new be);const a={hints:[],cacheId:o};for(let c=0;c<n.length;c++)this.l(n[c],s)&&a.hints.push(this.m(n[c],[o,c]));return this.j.trace(`[InlayHints] ${a.hints.length} inlay hints from '${this.k.identifier.value}' for range ${JSON.stringify(t)}`),a}async resolveInlayHint(e,t){if(typeof this.h.resolveInlayHint!="function")return;const r=this.d.get(...e);if(!r)return;const i=await this.h.resolveInlayHint(r,t);if(i&&this.l(i))return this.m(i,e)}releaseHints(e){this.e.get(e)?.dispose(),this.e.delete(e),this.d.delete(e)}l(e,t){return e.label.length===0||Array.isArray(e.label)&&e.label.every(r=>r.value.length===0)?(console.log("INVALID inlay hint, empty label",e),!1):!(t&&!t.contains(e.position))}m(e,t){const r=this.e.get(t[0]);if(!r)throw Error("DisposableStore is missing...");const i={label:"",cacheId:t,tooltip:Oe.fromStrict(e.tooltip),position:Ze.from(e.position),textEdits:e.textEdits&&e.textEdits.map(Jt.from),kind:e.kind&&Vf.from(e.kind),paddingLeft:e.paddingLeft,paddingRight:e.paddingRight};if(typeof e.label=="string")i.label=e.label;else{const s=[];i.label=s;for(const n of e.label){if(!n.value){console.warn("INVALID inlay hint, empty label part",this.k.identifier.value);continue}const o={label:n.value,tooltip:Oe.fromStrict(n.tooltip)};ii.isLocation(n.location)&&(o.location=Tr.from(n.location)),n.command&&(o.command=this.g.toInternal(n.command,r)),s.push(o)}}return i}},cg=class Bg{constructor(t,r){this.e=t,this.f=r,this.d=new Vi("DocumentLink")}async provideLinks(t,r){const i=this.e.getDocument(t),s=await this.f.provideDocumentLinks(i,r);if(!(!Array.isArray(s)||s.length===0)&&!r.isCancellationRequested){if(typeof this.f.resolveDocumentLink!="function")return{links:s.filter(Bg.g).map(To.from)};{const n=this.d.add(s),o={links:[],cacheId:n};for(let a=0;a<s.length;a++){if(!Bg.g(s[a]))continue;const c=To.from(s[a]);c.cacheId=[n,a],o.links.push(c)}return o}}}static g(t){return t.target&&t.target.path.length>5e4?(console.warn("DROPPING link because it is too long"),!1):!0}async resolveLink(t,r){if(typeof this.f.resolveDocumentLink!="function")return;const i=this.d.get(...t);if(!i)return;const s=await this.f.resolveDocumentLink(i,r);if(!(!s||!Bg.g(s)))return To.from(s)}releaseLinks(t){this.d.delete(t)}},nb=class{constructor(e,t){this.d=e,this.e=t}async provideColors(e,t){const r=this.d.getDocument(e),i=await this.e.provideDocumentColors(r,t);return Array.isArray(i)?i.map(n=>({color:Ja.from(n.color),range:W.from(n.range)})):[]}async provideColorPresentations(e,t,r){const i=this.d.getDocument(e),s=W.to(t.range),n=Ja.to(t.color),o=await this.e.provideColorPresentations(n,{document:i,range:s},r);if(Array.isArray(o))return o.map(qf.from)}},OS=class{constructor(e,t){this.d=e,this.e=t}async provideFoldingRanges(e,t,r){const i=this.d.getDocument(e),s=await this.e.provideFoldingRanges(i,t,r);if(Array.isArray(s))return s.map(Jf.from)}},MS=class{constructor(e,t,r){this.d=e,this.e=t,this.f=r}async provideSelectionRanges(e,t,r){const i=this.d.getDocument(e),s=t.map(Ze.to),n=await this.e.provideSelectionRanges(i,s,r);if(!Tc(n))return[];if(n.length!==s.length)return this.f.warn("BAD selection ranges, provider must return ranges for each position"),[];const o=[];for(let a=0;a<s.length;a++){const c=[];o.push(c);let l=s[a],u=n[a];for(;;){if(!u.range.contains(l))throw new Error("INVALID selection range, must contain the previous range");if(c.push(Wv.from(u)),!u.parent)break;l=u.range,u=u.parent}}return o}},Bu=class{constructor(e,t){this.f=e,this.g=t,this.d=new Ap(""),this.e=new Map}async prepareSession(e,t,r){const i=this.f.getDocument(e),s=Ze.to(t),n=await this.g.prepareCallHierarchy(i,s,r);if(!n)return;const o=this.d.nextId();return this.e.set(o,new Map),Array.isArray(n)?n.map(a=>this.h(o,a)):[this.h(o,n)]}async provideCallsTo(e,t,r){const i=this.j(e,t);if(!i)throw new Error("missing call hierarchy item");const s=await this.g.provideCallHierarchyIncomingCalls(i,r);if(s)return s.map(n=>({from:this.h(e,n.from),fromRanges:n.fromRanges.map(o=>W.from(o))}))}async provideCallsFrom(e,t,r){const i=this.j(e,t);if(!i)throw new Error("missing call hierarchy item");const s=await this.g.provideCallHierarchyOutgoingCalls(i,r);if(s)return s.map(n=>({to:this.h(e,n.to),fromRanges:n.fromRanges.map(o=>W.from(o))}))}releaseSession(e){this.e.delete(e)}h(e,t){const r=this.e.get(e),i=Ao.from(t,e,r.size.toString(36));return r.set(i._itemId,t),i}j(e,t){return this.e.get(e)?.get(t)}},zu=class{constructor(e,t){this.f=e,this.g=t,this.d=new Ap(""),this.e=new Map}async prepareSession(e,t,r){const i=this.f.getDocument(e),s=Ze.to(t),n=await this.g.prepareTypeHierarchy(i,s,r);if(!n)return;const o=this.d.nextId();return this.e.set(o,new Map),Array.isArray(n)?n.map(a=>this.h(o,a)):[this.h(o,n)]}async provideSupertypes(e,t,r){const i=this.j(e,t);if(!i)throw new Error("missing type hierarchy item");const s=await this.g.provideTypeHierarchySupertypes(i,r);if(s)return s.map(n=>this.h(e,n))}async provideSubtypes(e,t,r){const i=this.j(e,t);if(!i)throw new Error("missing type hierarchy item");const s=await this.g.provideTypeHierarchySubtypes(i,r);if(s)return s.map(n=>this.h(e,n))}releaseSession(e){this.e.delete(e)}h(e,t){const r=this.e.get(e),i=Ro.from(t,e,r.size.toString(36));return r.set(i._itemId,t),i}j(e,t){return this.e.get(e)?.get(t)}},lg=class{constructor(e,t,r,i,s){this.e=e,this.f=t,this.g=r,this.h=i,this.j=s,this.d=new Vi("DocumentDropEdit")}async provideDocumentOnDropEdits(e,t,r,i,s){const n=this.f.getDocument(t),o=Ze.to(r),a=On.toDataTransfer(i,async h=>(await this.e.$resolveDocumentOnDropFileData(this.h,e,h)).buffer),c=await this.g.provideDocumentDropEdits(n,o,a,s);if(!c)return;const l=Ei(c),u=this.d.add(l);return l.map((h,d)=>({_cacheId:[u,d],title:h.title??p(2720,null,this.j.displayName||this.j.name),kind:h.kind?.value,yieldTo:h.yieldTo?.map(f=>f.value),insertText:typeof h.insertText=="string"?h.insertText:{snippet:h.insertText.value},additionalEdit:h.additionalEdit?xr.from(h.additionalEdit,void 0):void 0}))}async resolveDropEdit(e,t){const[r,i]=e,s=this.d.get(r,i);if(!s||!this.g.resolveDocumentDropEdit)return{};const n=await this.g.resolveDocumentDropEdit(s,t)??s;return{additionalEdit:n.additionalEdit?xr.from(n.additionalEdit,void 0):void 0}}releaseDropEdits(e){this.d.delete(e)}},jS=class{constructor(e,t){this.d=e,this.e=t}async provideMappedEdits(e,t,r,i){const s=k.revive(e),n=this.d.getDocument(s),o=u=>({uri:k.revive(u.uri),version:u.version,ranges:u.ranges.map(h=>W.to(h))}),a=r.documents.map(u=>u.map(o)),c={documents:a,selections:a[0]?.[0]?.ranges??[],conversation:r.conversation?.map(u=>u.type==="response"?{type:"response",message:u.message,references:u.references?.map(o)}:{type:"request",message:u.message})},l=await this.e.provideMappedEdits(n,t,c,i);return l?xr.from(l):null}},_u=class{constructor(e,t){this.adapter=e,this.extension=t}},rU=class tr{static{this.d=0}constructor(t,r,i,s,n,o,a,c){this.g=r,this.h=i,this.j=s,this.k=n,this.l=o,this.m=a,this.n=c,this.f=new Map,this.e=t.getProxy(K.MainThreadLanguageFeatures)}o(t,r){return Wa.from(t,this.g,r)}p(t){return new _e(()=>{this.f.delete(t),this.e.$unregister(t)})}q(){return tr.d++}async s(t,r,i,s,n,o=!1){const a=this.f.get(t);if(!a||!(a.adapter instanceof r))return s;const c=Date.now();o||this.l.trace(`[${a.extension.identifier.value}] INVOKE provider '${i.toString().replace(/[\r\n]/g,"")}'`);const l=i(a.adapter,a.extension);return Promise.resolve(l).catch(u=>{ys(u)||(this.l.error(`[${a.extension.identifier.value}] provider FAILED`),this.l.error(u),this.n.onExtensionError(a.extension.identifier,u))}).finally(()=>{o||this.l.trace(`[${a.extension.identifier.value}] provider DONE after ${Date.now()-c}ms`)}),Ke.isCancellationToken(n)?LI(l,n):l}t(t,r){const i=this.q();return this.f.set(i,new _u(t,r)),i}static u(t){return t.displayName||t.name}static w(t){return t.identifier.value}registerDocumentSymbolProvider(t,r,i,s){const n=this.t(new kS(this.h,i),t),o=s&&s.label||tr.u(t);return this.e.$registerDocumentSymbolProvider(n,this.o(r,t),o),this.p(n)}$provideDocumentSymbols(t,r,i){return this.s(t,kS,s=>s.provideDocumentSymbols(k.revive(r),i),void 0,i)}registerCodeLensProvider(t,r,i){const s=this.q(),n=typeof i.onDidChangeCodeLenses=="function"?this.q():void 0;this.f.set(s,new _u(new rg(this.h,this.j.converter,i,t,this.n,this.l),t)),this.e.$registerCodeLensSupport(s,this.o(r,t),n);let o=this.p(s);if(n!==void 0){const a=i.onDidChangeCodeLenses(c=>this.e.$emitCodeLensEvent(n));o=_e.from(o,a)}return o}$provideCodeLenses(t,r,i){return this.s(t,rg,s=>s.provideCodeLenses(k.revive(r),i),void 0,i,r.scheme==="output")}$resolveCodeLens(t,r,i){return this.s(t,rg,s=>s.resolveCodeLens(r,i),void 0,void 0,!0)}$releaseCodeLenses(t,r){this.s(t,rg,i=>Promise.resolve(i.releaseCodeLenses(r)),void 0,void 0,!0)}registerDefinitionProvider(t,r,i){const s=this.t(new xS(this.h,i),t);return this.e.$registerDefinitionSupport(s,this.o(r,t)),this.p(s)}$provideDefinition(t,r,i,s){return this.s(t,xS,n=>n.provideDefinition(k.revive(r),i,s),[],s)}registerDeclarationProvider(t,r,i){const s=this.t(new ES(this.h,i),t);return this.e.$registerDeclarationSupport(s,this.o(r,t)),this.p(s)}$provideDeclaration(t,r,i,s){return this.s(t,ES,n=>n.provideDeclaration(k.revive(r),i,s),[],s)}registerImplementationProvider(t,r,i){const s=this.t(new SS(this.h,i),t);return this.e.$registerImplementationSupport(s,this.o(r,t)),this.p(s)}$provideImplementation(t,r,i,s){return this.s(t,SS,n=>n.provideImplementation(k.revive(r),i,s),[],s)}registerTypeDefinitionProvider(t,r,i){const s=this.t(new $S(this.h,i),t);return this.e.$registerTypeDefinitionSupport(s,this.o(r,t)),this.p(s)}$provideTypeDefinition(t,r,i,s){return this.s(t,$S,n=>n.provideTypeDefinition(k.revive(r),i,s),[],s)}registerHoverProvider(t,r,i,s){const n=this.t(new Zw(this.h,i),t);return this.e.$registerHoverProvider(n,this.o(r,t)),this.p(n)}$provideHover(t,r,i,s,n){return this.s(t,Zw,o=>o.provideHover(k.revive(r),i,s,n),void 0,n)}$releaseHover(t,r){this.s(t,Zw,i=>Promise.resolve(i.releaseHover(r)),void 0,void 0)}registerEvaluatableExpressionProvider(t,r,i,s){const n=this.t(new CS(this.h,i),t);return this.e.$registerEvaluatableExpressionProvider(n,this.o(r,t)),this.p(n)}$provideEvaluatableExpression(t,r,i,s){return this.s(t,CS,n=>n.provideEvaluatableExpression(k.revive(r),i,s),void 0,s)}registerInlineValuesProvider(t,r,i,s){const n=typeof i.onDidChangeInlineValues=="function"?this.q():void 0,o=this.t(new PS(this.h,i),t);this.e.$registerInlineValuesProvider(o,this.o(r,t),n);let a=this.p(o);if(n!==void 0){const c=i.onDidChangeInlineValues(l=>this.e.$emitInlineValuesEvent(n));a=_e.from(a,c)}return a}$provideInlineValues(t,r,i,s,n){return this.s(t,PS,o=>o.provideInlineValues(k.revive(r),i,s,n),void 0,n)}registerDocumentHighlightProvider(t,r,i){const s=this.t(new IS(this.h,i),t);return this.e.$registerDocumentHighlightProvider(s,this.o(r,t)),this.p(s)}registerMultiDocumentHighlightProvider(t,r,i){const s=this.t(new DS(this.h,i,this.l),t);return this.e.$registerMultiDocumentHighlightProvider(s,this.o(r,t)),this.p(s)}$provideDocumentHighlights(t,r,i,s){return this.s(t,IS,n=>n.provideDocumentHighlights(k.revive(r),i,s),void 0,s)}$provideMultiDocumentHighlights(t,r,i,s,n){return this.s(t,DS,o=>o.provideMultiDocumentHighlights(k.revive(r),i,s.map(a=>k.revive(a)),n),void 0,n)}registerLinkedEditingRangeProvider(t,r,i){const s=this.t(new AS(this.h,i),t);return this.e.$registerLinkedEditingRangeProvider(s,this.o(r,t)),this.p(s)}$provideLinkedEditingRanges(t,r,i,s){return this.s(t,AS,async n=>{const o=await n.provideLinkedEditingRanges(k.revive(r),i,s);if(o)return{ranges:o.ranges,wordPattern:o.wordPattern?tr.y(o.wordPattern):void 0}},void 0,s)}registerReferenceProvider(t,r,i){const s=this.t(new TS(this.h,i),t);return this.e.$registerReferenceSupport(s,this.o(r,t)),this.p(s)}$provideReferences(t,r,i,s,n){return this.s(t,TS,o=>o.provideReferences(k.revive(r),i,s,n),void 0,n)}registerCodeActionProvider(t,r,i,s){const n=new be,o=this.t(new sg(this.h,this.j.converter,this.k,i,this.l,t,this.m),t);return this.e.$registerCodeActionSupport(o,this.o(r,t),{providedKinds:s?.providedCodeActionKinds?.map(a=>a.value),documentation:s?.documentation?.map(a=>({kind:a.kind.value,command:this.j.converter.toInternal(a.command,n)}))},tr.u(t),tr.w(t),!!i.resolveCodeAction),n.add(this.p(o)),n}$provideCodeActions(t,r,i,s,n){return this.s(t,sg,o=>o.provideCodeActions(k.revive(r),i,s,n),void 0,n)}$resolveCodeAction(t,r,i){return this.s(t,sg,s=>s.resolveCodeAction(r,i),{},void 0)}$releaseCodeActions(t,r){this.s(t,sg,i=>Promise.resolve(i.releaseCodeActions(r)),void 0,void 0)}registerDocumentFormattingEditProvider(t,r,i){const s=this.t(new RS(this.h,i),t);return this.e.$registerDocumentFormattingSupport(s,this.o(r,t),t.identifier,t.displayName||t.name),this.p(s)}$provideDocumentFormattingEdits(t,r,i,s){return this.s(t,RS,n=>n.provideDocumentFormattingEdits(k.revive(r),i,s),void 0,s)}registerDocumentRangeFormattingEditProvider(t,r,i){const s=typeof i.provideDocumentRangesFormattingEdits=="function",n=this.t(new Kw(this.h,i),t);return this.e.$registerRangeFormattingSupport(n,this.o(r,t),t.identifier,t.displayName||t.name,s),this.p(n)}$provideDocumentRangeFormattingEdits(t,r,i,s,n){return this.s(t,Kw,o=>o.provideDocumentRangeFormattingEdits(k.revive(r),i,s,n),void 0,n)}$provideDocumentRangesFormattingEdits(t,r,i,s,n){return this.s(t,Kw,o=>o.provideDocumentRangesFormattingEdits(k.revive(r),i,s,n),void 0,n)}registerOnTypeFormattingEditProvider(t,r,i,s){const n=this.t(new LS(this.h,i),t);return this.e.$registerOnTypeFormattingSupport(n,this.o(r,t),s,t.identifier),this.p(n)}$provideOnTypeFormattingEdits(t,r,i,s,n,o){return this.s(t,LS,a=>a.provideOnTypeFormattingEdits(k.revive(r),i,s,n,o),void 0,o)}registerWorkspaceSymbolProvider(t,r){const i=this.t(new ng(r,this.l),t);return this.e.$registerNavigateTypeSupport(i,typeof r.resolveWorkspaceSymbol=="function"),this.p(i)}$provideWorkspaceSymbols(t,r,i){return this.s(t,ng,s=>s.provideWorkspaceSymbols(r,i),{symbols:[]},i)}$resolveWorkspaceSymbol(t,r,i){return this.s(t,ng,s=>s.resolveWorkspaceSymbol(r,i),void 0,void 0)}$releaseWorkspaceSymbols(t,r){this.s(t,ng,i=>i.releaseWorkspaceSymbols(r),void 0,void 0)}registerRenameProvider(t,r,i){const s=this.t(new og(this.h,i,this.l),t);return this.e.$registerRenameSupport(s,this.o(r,t),og.supportsResolving(i)),this.p(s)}$provideRenameEdits(t,r,i,s,n){return this.s(t,og,o=>o.provideRenameEdits(k.revive(r),i,s,n),void 0,n)}$resolveRenameLocation(t,r,i,s){return this.s(t,og,n=>n.resolveRenameLocation(k.revive(r),i,s),void 0,s)}registerNewSymbolNamesProvider(t,r,i){const s=this.t(new eb(this.h,i,this.l),t);return this.e.$registerNewSymbolNamesProvider(s,this.o(r,t)),this.p(s)}$supportsAutomaticNewSymbolNamesTriggerKind(t){return this.s(t,eb,r=>r.supportsAutomaticNewSymbolNamesTriggerKind(),!1,void 0)}$provideNewSymbolNames(t,r,i,s,n){return this.s(t,eb,o=>o.provideNewSymbolNames(k.revive(r),i,s,n),void 0,n)}registerDocumentSemanticTokensProvider(t,r,i,s){const n=this.t(new rb(this.h,i),t),o=typeof i.onDidChangeSemanticTokens=="function"?this.q():void 0;this.e.$registerDocumentSemanticTokensProvider(n,this.o(r,t),s,o);let a=this.p(n);if(o){const c=i.onDidChangeSemanticTokens(l=>this.e.$emitDocumentSemanticTokensEvent(o));a=_e.from(a,c)}return a}$provideDocumentSemanticTokens(t,r,i,s){return this.s(t,rb,n=>n.provideDocumentSemanticTokens(k.revive(r),i,s),null,s)}$releaseDocumentSemanticTokens(t,r){this.s(t,rb,i=>i.releaseDocumentSemanticColoring(r),void 0,void 0)}registerDocumentRangeSemanticTokensProvider(t,r,i,s){const n=this.t(new NS(this.h,i),t);return this.e.$registerDocumentRangeSemanticTokensProvider(n,this.o(r,t),s),this.p(n)}$provideDocumentRangeSemanticTokens(t,r,i,s){return this.s(t,NS,n=>n.provideDocumentRangeSemanticTokens(k.revive(r),i,s),null,s)}registerCompletionItemProvider(t,r,i,s){const n=this.t(new Hu(this.h,this.j.converter,i,this.m,t),t);return this.e.$registerCompletionsProvider(n,this.o(r,t),s,Hu.supportsResolving(i),t.identifier),this.p(n)}$provideCompletionItems(t,r,i,s,n){return this.s(t,Hu,o=>o.provideCompletionItems(k.revive(r),i,s,n),void 0,n)}$resolveCompletionItem(t,r,i){return this.s(t,Hu,s=>s.resolveCompletionItem(r,i),void 0,i)}$releaseCompletionItems(t,r){this.s(t,Hu,i=>i.releaseCompletionItems(r),void 0,void 0)}registerInlineCompletionsProvider(t,r,i,s){const n=new tU(t,this.h,i,this.j.converter),o=this.t(n,t);return this.e.$registerInlineCompletionsSupport(o,this.o(r,t),n.supportsHandleEvents,rt.toKey(t.identifier.value),s?.yieldTo?.map(a=>rt.toKey(a))||[]),this.p(o)}$provideInlineCompletions(t,r,i,s,n){return this.s(t,pc,o=>o.provideInlineCompletions(k.revive(r),i,s,n),void 0,n)}$provideInlineEditsForRange(t,r,i,s,n){return this.s(t,pc,o=>o.provideInlineEditsForRange(k.revive(r),i,s,n),void 0,n)}$handleInlineCompletionDidShow(t,r,i,s){this.s(t,pc,async n=>{n.handleDidShowCompletionItem(r,i,s)},void 0,void 0)}$handleInlineCompletionPartialAccept(t,r,i,s,n){this.s(t,pc,async o=>{o.handlePartialAccept(r,i,s,n)},void 0,void 0)}$freeInlineCompletionsList(t,r){this.s(t,pc,async i=>{i.disposeCompletions(r)},void 0,void 0)}registerInlineEditProvider(t,r,i){const s=new ib(t,this.h,i,this.j.converter),n=this.t(s,t);return this.e.$registerInlineEditProvider(n,this.o(r,t),t.identifier),this.p(n)}$provideInlineEdit(t,r,i,s){return this.s(t,ib,n=>n.provideInlineEdits(k.revive(r),i,s),void 0,s)}$freeInlineEdit(t,r){this.s(t,ib,async i=>{i.disposeEdit(r)},void 0,void 0)}registerSignatureHelpProvider(t,r,i,s){const n=Array.isArray(s)?{triggerCharacters:s,retriggerCharacters:[]}:s,o=this.t(new sb(this.h,i),t);return this.e.$registerSignatureHelpProvider(o,this.o(r,t),n),this.p(o)}$provideSignatureHelp(t,r,i,s,n){return this.s(t,sb,o=>o.provideSignatureHelp(k.revive(r),i,s,n),void 0,n)}$releaseSignatureHelp(t,r){this.s(t,sb,i=>i.releaseSignatureHelp(r),void 0,void 0)}registerInlayHintsProvider(t,r,i){const s=typeof i.onDidChangeInlayHints=="function"?this.q():void 0,n=this.t(new ag(this.h,this.j.converter,i,this.l,t),t);this.e.$registerInlayHintsProvider(n,this.o(r,t),typeof i.resolveInlayHint=="function",s,tr.u(t));let o=this.p(n);if(s!==void 0){const a=i.onDidChangeInlayHints(c=>this.e.$emitInlayHintsEvent(s));o=_e.from(o,a)}return o}$provideInlayHints(t,r,i,s){return this.s(t,ag,n=>n.provideInlayHints(k.revive(r),i,s),void 0,s)}$resolveInlayHint(t,r,i){return this.s(t,ag,s=>s.resolveInlayHint(r,i),void 0,i)}$releaseInlayHints(t,r){this.s(t,ag,i=>i.releaseHints(r),void 0,void 0)}registerDocumentLinkProvider(t,r,i){const s=this.t(new cg(this.h,i),t);return this.e.$registerDocumentLinkProvider(s,this.o(r,t),typeof i.resolveDocumentLink=="function"),this.p(s)}$provideDocumentLinks(t,r,i){return this.s(t,cg,s=>s.provideLinks(k.revive(r),i),void 0,i,r.scheme==="output")}$resolveDocumentLink(t,r,i){return this.s(t,cg,s=>s.resolveLink(r,i),void 0,void 0,!0)}$releaseDocumentLinks(t,r){this.s(t,cg,i=>i.releaseLinks(r),void 0,void 0,!0)}registerColorProvider(t,r,i){const s=this.t(new nb(this.h,i),t);return this.e.$registerDocumentColorProvider(s,this.o(r,t)),this.p(s)}$provideDocumentColors(t,r,i){return this.s(t,nb,s=>s.provideColors(k.revive(r),i),[],i)}$provideColorPresentations(t,r,i,s){return this.s(t,nb,n=>n.provideColorPresentations(k.revive(r),i,s),void 0,s)}registerFoldingRangeProvider(t,r,i){const s=this.q(),n=typeof i.onDidChangeFoldingRanges=="function"?this.q():void 0;this.f.set(s,new _u(new OS(this.h,i),t)),this.e.$registerFoldingRangeProvider(s,this.o(r,t),t.identifier,n);let o=this.p(s);if(n!==void 0){const a=i.onDidChangeFoldingRanges(()=>this.e.$emitFoldingRangeEvent(n));o=_e.from(o,a)}return o}$provideFoldingRanges(t,r,i,s){return this.s(t,OS,n=>n.provideFoldingRanges(k.revive(r),i,s),void 0,s)}registerSelectionRangeProvider(t,r,i){const s=this.t(new MS(this.h,i,this.l),t);return this.e.$registerSelectionRangeProvider(s,this.o(r,t)),this.p(s)}$provideSelectionRanges(t,r,i,s){return this.s(t,MS,n=>n.provideSelectionRanges(k.revive(r),i,s),[],s)}registerCallHierarchyProvider(t,r,i){const s=this.t(new Bu(this.h,i),t);return this.e.$registerCallHierarchyProvider(s,this.o(r,t)),this.p(s)}$prepareCallHierarchy(t,r,i,s){return this.s(t,Bu,n=>Promise.resolve(n.prepareSession(k.revive(r),i,s)),void 0,s)}$provideCallHierarchyIncomingCalls(t,r,i,s){return this.s(t,Bu,n=>n.provideCallsTo(r,i,s),void 0,s)}$provideCallHierarchyOutgoingCalls(t,r,i,s){return this.s(t,Bu,n=>n.provideCallsFrom(r,i,s),void 0,s)}$releaseCallHierarchy(t,r){this.s(t,Bu,i=>Promise.resolve(i.releaseSession(r)),void 0,void 0)}registerTypeHierarchyProvider(t,r,i){const s=this.t(new zu(this.h,i),t);return this.e.$registerTypeHierarchyProvider(s,this.o(r,t)),this.p(s)}$prepareTypeHierarchy(t,r,i,s){return this.s(t,zu,n=>Promise.resolve(n.prepareSession(k.revive(r),i,s)),void 0,s)}$provideTypeHierarchySupertypes(t,r,i,s){return this.s(t,zu,n=>n.provideSupertypes(r,i,s),void 0,s)}$provideTypeHierarchySubtypes(t,r,i,s){return this.s(t,zu,n=>n.provideSubtypes(r,i,s),void 0,s)}$releaseTypeHierarchy(t,r){this.s(t,zu,i=>Promise.resolve(i.releaseSession(r)),void 0,void 0)}registerDocumentOnDropEditProvider(t,r,i,s){const n=this.q();return this.f.set(n,new _u(new lg(this.e,this.h,i,n,t),t)),this.e.$registerDocumentOnDropEditProvider(n,this.o(r,t),zt(t,"documentPaste")&&s?{supportsResolve:!!i.resolveDocumentDropEdit,dropMimeTypes:s.dropMimeTypes}:void 0),this.p(n)}$provideDocumentOnDropEdits(t,r,i,s,n,o){return this.s(t,lg,a=>Promise.resolve(a.provideDocumentOnDropEdits(r,k.revive(i),s,n,o)),void 0,void 0)}$resolveDropEdit(t,r,i){return this.s(t,lg,s=>s.resolveDropEdit(r,i),{},void 0)}$releaseDocumentOnDropEdits(t,r){this.s(t,lg,i=>Promise.resolve(i.releaseDropEdits(r)),void 0,void 0)}registerMappedEditsProvider(t,r,i){const s=this.t(new jS(this.h,i),t);return this.e.$registerMappedEditsProvider(s,this.o(r,t),t.displayName??t.name),this.p(s)}$provideMappedEdits(t,r,i,s,n){return this.s(t,jS,o=>Promise.resolve(o.provideMappedEdits(r,i,s,n)),null,n)}registerDocumentPasteEditProvider(t,r,i,s){const n=this.q();return this.f.set(n,new _u(new Uu(this.e,this.h,i,n,t),t)),this.e.$registerPasteEditProvider(n,this.o(r,t),{supportsCopy:!!i.prepareDocumentPaste,supportsPaste:!!i.provideDocumentPasteEdits,supportsResolve:!!i.resolveDocumentPasteEdit,providedPasteEditKinds:s.providedPasteEditKinds?.map(o=>o.value),copyMimeTypes:s.copyMimeTypes,pasteMimeTypes:s.pasteMimeTypes}),this.p(n)}$prepareDocumentPaste(t,r,i,s,n){return this.s(t,Uu,o=>o.prepareDocumentPaste(k.revive(r),i,s,n),void 0,n)}$providePasteEdits(t,r,i,s,n,o,a){return this.s(t,Uu,c=>c.providePasteEdits(r,k.revive(i),s,n,o,a),void 0,a)}$resolvePasteEdit(t,r,i){return this.s(t,Uu,s=>s.resolvePasteEdit(r,i),{},void 0)}$releasePasteEdits(t,r){this.s(t,Uu,i=>Promise.resolve(i.releasePasteEdits(r)),void 0,void 0)}static y(t){return{pattern:t.source,flags:t.flags}}static z(t){return{decreaseIndentPattern:tr.y(t.decreaseIndentPattern),increaseIndentPattern:tr.y(t.increaseIndentPattern),indentNextLinePattern:t.indentNextLinePattern?tr.y(t.indentNextLinePattern):void 0,unIndentedLinePattern:t.unIndentedLinePattern?tr.y(t.unIndentedLinePattern):void 0}}static B(t){return{beforeText:tr.y(t.beforeText),afterText:t.afterText?tr.y(t.afterText):void 0,previousLineText:t.previousLineText?tr.y(t.previousLineText):void 0,action:t.action}}static C(t){return t.map(tr.B)}static D(t){return{open:t.open,close:t.close,notIn:t.notIn?t.notIn.map(r=>Aa.toString(r)):void 0}}static E(t){return t.map(tr.D)}setLanguageConfiguration(t,r,i){const{wordPattern:s}=i;if(s&&e4(s))throw new Error(`Invalid language configuration: wordPattern '${s}' is not allowed to match the empty string.`);s?this.h.setWordDefinitionFor(r,s):this.h.setWordDefinitionFor(r,void 0),i.__electricCharacterSupport&&this.m.report("LanguageConfiguration.__electricCharacterSupport",t,"Do not use."),i.__characterPairSupport&&this.m.report("LanguageConfiguration.__characterPairSupport",t,"Do not use.");const n=this.q(),o={comments:i.comments,brackets:i.brackets,wordPattern:i.wordPattern?tr.y(i.wordPattern):void 0,indentationRules:i.indentationRules?tr.z(i.indentationRules):void 0,onEnterRules:i.onEnterRules?tr.C(i.onEnterRules):void 0,__electricCharacterSupport:i.__electricCharacterSupport,__characterPairSupport:i.__characterPairSupport,autoClosingPairs:i.autoClosingPairs?tr.E(i.autoClosingPairs):void 0};return this.e.$setLanguageConfiguration(n,r,o),this.p(n)}$setWordDefinitions(t){for(const r of t)this.h.setWordDefinitionFor(r.languageId,new RegExp(r.regexSource,r.regexFlags))}},iU=class{constructor(e){this.a=new Map,this.c=new Map,this.d=new Map,this.b=e.getProxy(K.MainThreadLanguageModelTools),this.b.$getTools().then(t=>{for(const r of t)this.d.set(r.id,dr(r))})}async $countTokensForInvocation(e,t,r){const i=this.c.get(e);if(!i)throw new Error(`Tool invocation call ${e} not found`);return await i(t,r)}async invokeTool(e,t,r){if(!t.requestedContentTypes?.length)throw new Error("LanguageModelToolInvocationOptions.requestedContentTypes is required to be set");const i=ir();t.tokenOptions&&this.c.set(i,t.tokenOptions.countTokens);try{return await this.b.$invokeTool({toolId:e,callId:i,parameters:t.parameters,tokenBudget:t.tokenOptions?.tokenBudget,context:t.toolInvocationToken,requestedContentTypes:t.requestedContentTypes},r)}finally{this.c.delete(i)}}$onDidChangeTools(e){this.d.clear();for(const t of e)this.d.set(t.id,t)}get tools(){return Array.from(this.d.values()).map(e=>o0.to(e))}async $invokeTool(e,t){const r=this.a.get(e.toolId);if(!r)throw new Error(`Unknown tool ${e.toolId}`);const i={parameters:e.parameters,toolInvocationToken:e.context,requestedContentTypes:e.requestedContentTypes};e.tokenBudget!==void 0&&(i.tokenOptions={tokenBudget:e.tokenBudget,countTokens:this.c.get(e.callId)||((n,o=Ke.None)=>this.b.$countTokensForInvocation(e.callId,n,o))});const s=await N4(Promise.resolve(r.tool.invoke(i,t)),t);if(!s)throw new Er;for(const n of Object.keys(s)){if(s[n]instanceof Promise)throw new Error(`Tool result for '${n}' cannot be a Promise`);if(!i.requestedContentTypes.includes(n)&&n!=="toString")throw new Error(`Tool result for '${n}' was not requested from ${e.toolId}.`)}return s}async $provideToolConfirmationMessages(e,t,r,i){const s=this.a.get(e);if(!s)throw new Error(`Unknown tool ${e}`);if(!s.tool.provideToolConfirmationMessages)return;const n=await s.tool.provideToolConfirmationMessages({participantName:t,parameters:r},i);if(n)return{title:n.title,message:typeof n.message=="string"?n.message:Oe.from(n.message)}}async $provideToolInvocationMessage(e,t,r){const i=this.a.get(e);if(!i)throw new Error(`Unknown tool ${e}`);if(i.tool.provideToolInvocationMessage)return await i.tool.provideToolInvocationMessage(t,r)}registerTool(e,t,r){return this.a.set(t,{extension:e,tool:r}),this.b.$registerTool(t),me(()=>{this.a.delete(t),this.b.$unregisterTool(t)})}},sU=class{constructor(e,t,r,i){this.c=t,this.d=r,this.e=i,this.b=[],this.f=0,this.g=new Set,this.a=e.getProxy(K.MainThreadLanguages)}$acceptLanguageIds(e){this.b=e}async getLanguages(){return this.b.slice(0)}async changeLanguage(e,t){await this.a.$changeLanguage(e,t);const r=this.c.getDocumentData(e);if(!r)throw new Error(`document '${e.toString()}' NOT found`);return r.document}async tokenAtPosition(e,t){const r=e.version,i=Ze.from(t),s=await this.a.$tokensAtPosition(e.uri,i),n={type:Tn.Other,range:e.getWordRangeAtPosition(t)??new Re(t.line,t.character,t.line,t.character)};if(!s)return n;const o={range:W.to(s.range),type:Tv.to(s.type)};return!o.range.contains(t)||r!==e.version?n:o}createLanguageStatusItem(e,t,r){const i=this.f++,s=this.a,n=this.g,o=`${e.identifier.value}/${t}`;if(n.has(o))throw new Error(`LanguageStatusItem with id '${t}' ALREADY exists`);n.add(o);const a={selector:r,id:t,name:e.displayName??e.name,severity:$a.Information,command:void 0,text:"",detail:"",busy:!1};let c;const l=new be,u=()=>{if(c?.dispose(),!n.has(o)){console.warn(`LanguageStatusItem (${t}) from ${e.identifier.value} has been disposed and CANNOT be updated anymore`);return}c=M4(()=>{l.clear(),this.a.$setLanguageStatus(i,{id:o,name:a.name??e.displayName??e.name,source:e.displayName??e.name,selector:Wa.from(a.selector,this.e),label:a.text,detail:a.detail??"",severity:a.severity===$a.Error?Ut.Error:a.severity===$a.Warning?Ut.Warning:Ut.Info,command:a.command&&this.d.toInternal(a.command,l),accessibilityInfo:a.accessibilityInformation,busy:a.busy})},0)},h={dispose(){l.dispose(),c?.dispose(),s.$removeLanguageStatus(i),n.delete(o)},get id(){return a.id},get name(){return a.name},set name(d){a.name=d,u()},get selector(){return a.selector},set selector(d){a.selector=d,u()},get text(){return a.text},set text(d){a.text=d,u()},set text2(d){H(e,"languageStatusText"),a.text=d,u()},get text2(){return H(e,"languageStatusText"),a.text},get detail(){return a.detail},set detail(d){a.detail=d,u()},get severity(){return a.severity},set severity(d){a.severity=d,u()},get accessibilityInformation(){return a.accessibilityInformation},set accessibilityInformation(d){a.accessibilityInformation=d,u()},get command(){return a.command},set command(d){a.command=d,u()},get busy(){return a.busy},set busy(d){a.busy=d,u()}};return u(),h}};function nU(e){return e&&e.title}var ob=class{constructor(t,r){this.b=r,this.a=t.getProxy(K.MainThreadMessageService)}showMessage(t,r,i,s,n){const o={source:{identifier:t.identifier,label:t.displayName||t.name}};let a;typeof s=="string"||nU(s)?a=[s,...n]:(o.modal=s?.modal,o.useCustom=s?.useCustom,o.detail=s?.detail,a=n),o.useCustom&&H(t,"resolvers");const c=[];let l=!1;for(let u=0;u<a.length;u++){const h=a[u];if(typeof h=="string")c.push({title:h,handle:u,isCloseAffordance:!1});else if(typeof h=="object"){const{title:d,isCloseAffordance:f}=h;c.push({title:d,isCloseAffordance:!!f,handle:u}),f&&(l?this.b.warn(`[${t.identifier}] Only one message item can have 'isCloseAffordance':`,h):l=!0)}else this.b.warn(`[${t.identifier}] Invalid message item:`,h)}return this.a.$showMessage(r,i,o,c).then(u=>{if(typeof u=="number")return a[u]})}};ob=__decorate([__param(1,Ne)],ob);var ab=class{constructor(e,t,r,i){this.start=e,this.deletedCount=t,this.deletedItems=r,this.items=i}asApiEvent(){return{range:new Hs(this.start,this.start+this.deletedCount),addedCells:this.items.map(e=>e.apiCell),removedCells:this.deletedItems}}},cb=class{static asModelAddData(e){return{EOL:e.eol,lines:e.source,languageId:e.language,uri:e.uri,isDirty:!1,versionId:1}}constructor(e,t,r){this.notebook=e,this.h=t,this.j=r,this.handle=r.handle,this.uri=k.revive(r.uri),this.cellKind=r.cellKind,this.a=r.outputs.map(Nn.to),this.e=r.internalMetadata??{},this.b=Object.freeze(r.metadata??{}),this.d=Object.freeze(Xa.to(r.internalMetadata??{}))}get internalMetadata(){return this.e}get apiCell(){if(!this.f){const e=this,t=this.h.getDocument(this.uri);if(!t)throw new Error(`MISSING extHostDocument for notebook cell: ${this.uri}`);const r={get index(){return e.notebook.getCellIndex(e)},notebook:e.notebook.apiNotebook,kind:su.to(this.j.cellKind),document:t.document,get mime(){return e.g},set mime(i){e.g=i},get outputs(){return e.a.slice(0)},get metadata(){return e.b},get executionSummary(){return e.d}};this.f=Object.freeze(r)}return this.f}setOutputs(e){this.a=e.map(Nn.to)}setOutputItems(e,t,r){const i=r.map(Za.to),s=this.a.find(n=>n.id===e);if(s&&(t||(s.items.length=0),s.items.push(...i),s.items.length>1&&s.items.every(n=>W7(n.mime)))){const n=new Map,o=[];s.items.forEach(a=>{let c;n.has(a.mime)?c=n.get(a.mime):(c=[],n.set(a.mime,c),o.push(a.mime)),c.push(a.data)}),s.items.length=0,o.forEach(a=>{const c=XR(n.get(a));s.items.push({mime:a,data:c.data.buffer})})}}setMetadata(e){this.b=Object.freeze(e)}setInternalMetadata(e){this.e=e,this.d=Object.freeze(Xa.to(e))}setMime(e){}},oU=class tC{static{this.a=0}constructor(t,r,i,s,n){this.k=t,this.l=r,this.m=i,this.uri=s,this.handle=tC.a++,this.b=[],this.g=0,this.h=!1,this.j=!1,this.d=n.viewType,this.f=Object.freeze(n.metadata??Object.create(null)),this.r([[0,0,n.cells]],!0,void 0),this.g=n.versionId}dispose(){this.j=!0}get versionId(){return this.g}get apiNotebook(){if(!this.e){const t=this,r={get uri(){return t.uri},get version(){return t.g},get notebookType(){return t.d},get isDirty(){return t.h},get isUntitled(){return t.uri.scheme===Q.untitled},get isClosed(){return t.j},get metadata(){return t.f},get cellCount(){return t.b.length},cellAt(i){return i=t.n(i),t.b[i].apiCell},getCells(i){return(i?t.p(i):t.b).map(n=>n.apiCell)},save(){return t.q()},[Symbol.for("debug.description")](){return`NotebookDocument(${this.uri.toString()})`}};this.e=Object.freeze(r)}return this.e}acceptDocumentPropertiesChanged(t){t.metadata&&(this.f=Object.freeze({...this.f,...t.metadata}))}acceptDirty(t){this.h=t}acceptModelChanged(t,r,i){this.g=t.versionId,this.h=r,this.acceptDocumentPropertiesChanged({metadata:i});const s={notebook:this.apiNotebook,metadata:i,cellChanges:[],contentChanges:[]},n=[];for(const a of t.rawEvents)a.kind===Fi.ModelChange?this.r(a.changes,!1,s.contentChanges):a.kind===Fi.Move?this.s(a.index,a.length,a.newIdx,s.contentChanges):a.kind===Fi.Output?(this.t(a.index,a.outputs),n.push({cell:this.b[a.index].apiCell,outputs:this.b[a.index].apiCell.outputs})):a.kind===Fi.OutputItem?(this.u(a.index,a.outputId,a.append,a.outputItems),n.push({cell:this.b[a.index].apiCell,outputs:this.b[a.index].apiCell.outputs})):a.kind===Fi.ChangeCellLanguage?(this.v(a.index,a.language),n.push({cell:this.b[a.index].apiCell,document:this.b[a.index].apiCell.document})):a.kind===Fi.ChangeCellContent?n.push({cell:this.b[a.index].apiCell,document:this.b[a.index].apiCell.document}):a.kind===Fi.ChangeCellMime?this.w(a.index,a.mime):a.kind===Fi.ChangeCellMetadata?(this.x(a.index,a.metadata),n.push({cell:this.b[a.index].apiCell,metadata:this.b[a.index].apiCell.metadata})):a.kind===Fi.ChangeCellInternalMetadata&&(this.y(a.index,a.internalMetadata),n.push({cell:this.b[a.index].apiCell,executionSummary:this.b[a.index].apiCell.executionSummary}));const o=new Map;for(let a=0;a<n.length;a++){const c=n[a],l=o.get(c.cell);if(l===void 0){const u=s.cellChanges.push({document:void 0,executionSummary:void 0,metadata:void 0,outputs:void 0,...c});o.set(c.cell,u-1)}else s.cellChanges[l]={...s.cellChanges[l],...c}}return Object.freeze(s),Object.freeze(s.cellChanges),Object.freeze(s.contentChanges),s}n(t){return t=t|0,t<0?0:t>=this.b.length?this.b.length-1:t}o(t){let r=t.start|0,i=t.end|0;return r<0&&(r=0),i>this.b.length&&(i=this.b.length),t.with({start:r,end:i})}p(t){t=this.o(t);const r=[];for(let i=t.start;i<t.end;i++)r.push(this.b[i]);return r}async q(){return this.j?Promise.reject(new Error("Notebook has been closed")):this.k.$trySaveNotebook(this.uri)}r(t,r,i){if(this.j)return;const s=[],n=[],o=[];if(t.reverse().forEach(a=>{const l=a[2].map(d=>{const f=new cb(this,this.l,d);return r||n.push(cb.asModelAddData(d)),f}),u=new ab(a[0],a[1],[],l),h=this.b.splice(a[0],a[1],...l);for(const d of h)o.push(d.uri),u.deletedItems.push(d.apiCell);s.push(u)}),this.l.acceptDocumentsAndEditorsDelta({addedDocuments:n,removedDocuments:o}),i)for(const a of s)i.push(a.asApiEvent())}s(t,r,i,s){const n=this.b.splice(t,r);this.b.splice(i,0,...n);const o=[new ab(t,r,n.map(a=>a.apiCell),[]),new ab(i,0,[],n)];for(const a of o)s.push(a.asApiEvent())}t(t,r){this.b[t].setOutputs(r)}u(t,r,i,s){this.b[t].setOutputItems(r,i,s)}v(t,r){const i=this.b[t];i.apiCell.document.languageId!==r&&this.m.$acceptModelLanguageChanged(i.uri,r)}w(t,r){const i=this.b[t];i.apiCell.mime=r}x(t,r){this.b[t].setMetadata(r)}y(t,r){this.b[t].setInternalMetadata(r)}getCellFromApiCell(t){return this.b.find(r=>r.apiCell===t)}getCellFromIndex(t){return this.b[t]}getCell(t){return this.b.find(r=>r.handle===t)}getCellIndex(t){return this.b.indexOf(t)}},lb=class rC{static{this.apiEditorsToExtHost=new WeakMap}constructor(t,r,i,s,n,o,a){this.id=t,this.c=r,this.notebookData=i,this.d=s,this.e=n,this.f=o,this.g=a,this.a=!1}get apiEditor(){if(!this.b){const t=this;this.b={get notebook(){return t.notebookData.apiNotebook},get selection(){return t.e[0]},set selection(r){this.selections=[r]},get selections(){return t.e},set selections(r){if(!Array.isArray(r)||!r.every(Hs.isNotebookRange))throw Le("selections");t.e=r,t.h(r)},get visibleRanges(){return t.d},revealRange(r,i){t.c.$tryRevealRange(t.id,us.from(r),i??mf.Default)},get viewColumn(){return t.f},get replOptions(){if(t.g==="repl")return{appendIndex:this.notebook.cellCount-1}},[Symbol.for("debug.description")](){return`NotebookEditor(${this.notebook.uri.toString()})`}},rC.apiEditorsToExtHost.set(this.b,this)}return this.b}get visible(){return this.a}_acceptVisibility(t){this.a=t}_acceptVisibleRanges(t){this.d=t}_acceptSelections(t){this.e=t}h(t){this.c.$trySetSelections(this.id,t.map(us.from))}_acceptViewColumn(t){this.f=t}},ub=class{constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==fe)return hb(this.right);let e=this;for(;e.parent!==fe&&e.parent.left!==e;)e=e.parent;return e.parent===fe?fe:e.parent}prev(){if(this.left!==fe)return HS(this.left);let e=this;for(;e.parent!==fe&&e.parent.right!==e;)e=e.parent;return e.parent===fe?fe:e.parent}detach(){this.parent=null,this.left=null,this.right=null}},US;(function(e){e[e.Black=0]="Black",e[e.Red=1]="Red"})(US||(US={}));var fe=new ub(null,0);fe.parent=fe,fe.left=fe,fe.right=fe,fe.color=0;function hb(e){for(;e.left!==fe;)e=e.left;return e}function HS(e){for(;e.right!==fe;)e=e.right;return e}function db(e){return e===fe?0:e.size_left+e.piece.length+db(e.right)}function fb(e){return e===fe?0:e.lf_left+e.piece.lineFeedCnt+fb(e.right)}function pb(){fe.parent=fe}function Wu(e,t){const r=t.right;r.size_left+=t.size_left+(t.piece?t.piece.length:0),r.lf_left+=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),t.right=r.left,r.left!==fe&&(r.left.parent=t),r.parent=t.parent,t.parent===fe?e.root=r:t.parent.left===t?t.parent.left=r:t.parent.right=r,r.left=t,t.parent=r}function Vu(e,t){const r=t.left;t.left=r.right,r.right!==fe&&(r.right.parent=t),r.parent=t.parent,t.size_left-=r.size_left+(r.piece?r.piece.length:0),t.lf_left-=r.lf_left+(r.piece?r.piece.lineFeedCnt:0),t.parent===fe?e.root=r:t===t.parent.right?t.parent.right=r:t.parent.left=r,r.right=t,t.parent=r}function ug(e,t){let r,i;if(t.left===fe?(i=t,r=i.right):t.right===fe?(i=t,r=i.left):(i=hb(t.right),r=i.right),i===e.root){e.root=r,r.color=0,t.detach(),pb(),e.root.parent=fe;return}const s=i.color===1;if(i===i.parent.left?i.parent.left=r:i.parent.right=r,i===t?(r.parent=i.parent,qu(e,r)):(i.parent===t?r.parent=i:r.parent=i.parent,qu(e,r),i.left=t.left,i.right=t.right,i.parent=t.parent,i.color=t.color,t===e.root?e.root=i:t===t.parent.left?t.parent.left=i:t.parent.right=i,i.left!==fe&&(i.left.parent=i),i.right!==fe&&(i.right.parent=i),i.size_left=t.size_left,i.lf_left=t.lf_left,qu(e,i)),t.detach(),r.parent.left===r){const o=db(r),a=fb(r);if(o!==r.parent.size_left||a!==r.parent.lf_left){const c=o-r.parent.size_left,l=a-r.parent.lf_left;r.parent.size_left=o,r.parent.lf_left=a,Qs(e,r.parent,c,l)}}if(qu(e,r.parent),s){pb();return}let n;for(;r!==e.root&&r.color===0;)r===r.parent.left?(n=r.parent.right,n.color===1&&(n.color=0,r.parent.color=1,Wu(e,r.parent),n=r.parent.right),n.left.color===0&&n.right.color===0?(n.color=1,r=r.parent):(n.right.color===0&&(n.left.color=0,n.color=1,Vu(e,n),n=r.parent.right),n.color=r.parent.color,r.parent.color=0,n.right.color=0,Wu(e,r.parent),r=e.root)):(n=r.parent.left,n.color===1&&(n.color=0,r.parent.color=1,Vu(e,r.parent),n=r.parent.left),n.left.color===0&&n.right.color===0?(n.color=1,r=r.parent):(n.left.color===0&&(n.right.color=0,n.color=1,Wu(e,n),n=r.parent.left),n.color=r.parent.color,r.parent.color=0,n.left.color=0,Vu(e,r.parent),r=e.root));r.color=0,pb()}function BS(e,t){for(qu(e,t);t!==e.root&&t.parent.color===1;)if(t.parent===t.parent.parent.left){const r=t.parent.parent.right;r.color===1?(t.parent.color=0,r.color=0,t.parent.parent.color=1,t=t.parent.parent):(t===t.parent.right&&(t=t.parent,Wu(e,t)),t.parent.color=0,t.parent.parent.color=1,Vu(e,t.parent.parent))}else{const r=t.parent.parent.left;r.color===1?(t.parent.color=0,r.color=0,t.parent.parent.color=1,t=t.parent.parent):(t===t.parent.left&&(t=t.parent,Vu(e,t)),t.parent.color=0,t.parent.parent.color=1,Wu(e,t.parent.parent))}e.root.color=0}function Qs(e,t,r,i){for(;t!==e.root&&t!==fe;)t.parent.left===t&&(t.parent.size_left+=r,t.parent.lf_left+=i),t=t.parent}function qu(e,t){let r=0,i=0;if(t!==e.root){for(;t!==e.root&&t===t.parent.right;)t=t.parent;if(t!==e.root)for(t=t.parent,r=db(t.left)-t.size_left,i=fb(t.left)-t.lf_left,t.size_left+=r,t.lf_left+=i;t!==e.root&&(r!==0||i!==0);)t.parent.left===t&&(t.parent.size_left+=r,t.parent.lf_left+=i),t=t.parent}}var Ys=65535;function zS(e){let t;return e[e.length-1]<65536?t=new Uint16Array(e.length):t=new Uint32Array(e.length),t.set(e,0),t}var aU=class{constructor(e,t,r,i,s){this.lineStarts=e,this.cr=t,this.lf=r,this.crlf=i,this.isBasicASCII=s}};function Xs(e,t=!0){const r=[0];let i=1;for(let s=0,n=e.length;s<n;s++){const o=e.charCodeAt(s);o===13?s+1<n&&e.charCodeAt(s+1)===10?(r[i++]=s+2,s++):r[i++]=s+1:o===10&&(r[i++]=s+1)}return t?zS(r):r}function cU(e,t){e.length=0,e[0]=0;let r=1,i=0,s=0,n=0,o=!0;for(let c=0,l=t.length;c<l;c++){const u=t.charCodeAt(c);u===13?c+1<l&&t.charCodeAt(c+1)===10?(n++,e[r++]=c+2,c++):(i++,e[r++]=c+1):u===10?(s++,e[r++]=c+1):o&&u!==9&&(u<32||u>126)&&(o=!1)}const a=new aU(zS(e),i,s,n,o);return e.length=0,a}var Lr=class{constructor(e,t,r,i,s){this.bufferIndex=e,this.start=t,this.end=r,this.lineFeedCnt=i,this.length=s}},Ho=class{constructor(e,t){this.buffer=e,this.lineStarts=t}},lU=class{constructor(e,t){this.a=[],this.c=e,this.d=t,this.b=0,e.root!==fe&&e.iterate(e.root,r=>(r!==fe&&this.a.push(r.piece),!0))}read(){return this.a.length===0?this.b===0?(this.b++,this.d):null:this.b>this.a.length-1?null:this.b===0?this.d+this.c.getPieceContent(this.a[this.b++]):this.c.getPieceContent(this.a[this.b++])}},uU=class{constructor(e){this.a=e,this.b=[]}get(e){for(let t=this.b.length-1;t>=0;t--){const r=this.b[t];if(r.nodeStartOffset<=e&&r.nodeStartOffset+r.node.piece.length>=e)return r}return null}get2(e){for(let t=this.b.length-1;t>=0;t--){const r=this.b[t];if(r.nodeStartLineNumber&&r.nodeStartLineNumber<e&&r.nodeStartLineNumber+r.node.piece.lineFeedCnt>=e)return r}return null}set(e){this.b.length>=this.a&&this.b.shift(),this.b.push(e)}validate(e){let t=!1;const r=this.b;for(let i=0;i<r.length;i++){const s=r[i];if(s.node.parent===null||s.nodeStartOffset>=e){r[i]=null,t=!0;continue}}if(t){const i=[];for(const s of r)s!==null&&i.push(s);this.b=i}}},hU=class{constructor(e,t,r){this.create(e,t,r)}create(e,t,r){this.a=[new Ho("",[0])],this.g={line:0,column:0},this.root=fe,this.b=1,this.c=0,this.d=t,this.e=t.length,this.f=r;let i=null;for(let s=0,n=e.length;s<n;s++)if(e[s].buffer.length>0){e[s].lineStarts||(e[s].lineStarts=Xs(e[s].buffer));const o=new Lr(s+1,{line:0,column:0},{line:e[s].lineStarts.length-1,column:e[s].buffer.length-e[s].lineStarts[e[s].lineStarts.length-1]},e[s].lineStarts.length-1,e[s].buffer.length);this.a.push(e[s]),i=this.S(i,o)}this.h=new uU(1),this.j={lineNumber:0,value:""},this.y()}normalizeEOL(e){const t=Ys,r=t-Math.floor(t/3),i=r*2;let s="",n=0;const o=[];if(this.iterate(this.root,a=>{const c=this.R(a),l=c.length;if(n<=r||n+l<i)return s+=c,n+=l,!0;const u=s.replace(/\r\n|\r|\n/g,e);return o.push(new Ho(u,Xs(u))),s=c,n=l,!0}),n>0){const a=s.replace(/\r\n|\r|\n/g,e);o.push(new Ho(a,Xs(a)))}this.create(o,e,!0)}getEOL(){return this.d}setEOL(e){this.d=e,this.e=this.d.length,this.normalizeEOL(e)}createSnapshot(e){return new lU(this,e)}equal(e){if(this.getLength()!==e.getLength()||this.getLineCount()!==e.getLineCount())return!1;let t=0;return this.iterate(this.root,i=>{if(i===fe)return!0;const s=this.R(i),n=s.length,o=e.G(t),a=e.G(t+n),c=e.getValueInRange2(o,a);return t+=n,s===c})}getOffsetAt(e,t){let r=0,i=this.root;for(;i!==fe;)if(i.left!==fe&&i.lf_left+1>=e)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt+1>=e){r+=i.size_left;const s=this.B(i,e-i.lf_left-2);return r+=s+t-1}else e-=i.lf_left+i.piece.lineFeedCnt,r+=i.size_left+i.piece.length,i=i.right;return r}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,r=0;const i=e;for(;t!==fe;)if(t.size_left!==0&&t.size_left>=e)t=t.left;else if(t.size_left+t.piece.length>=e){const s=this.A(t,e-t.size_left);if(r+=t.lf_left+s.index,s.index===0){const n=this.getOffsetAt(r+1,1),o=i-n;return new ri(r+1,o+1)}return new ri(r+1,s.remainder+1)}else if(e-=t.size_left+t.piece.length,r+=t.lf_left+t.piece.lineFeedCnt,t.right===fe){const s=this.getOffsetAt(r+1,1),n=i-e-s;return new ri(r+1,n+1)}else t=t.right;return new ri(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";const r=this.H(e.startLineNumber,e.startColumn),i=this.H(e.endLineNumber,e.endColumn),s=this.getValueInRange2(r,i);return t?t!==this.d||!this.f?s.replace(/\r\n|\r|\n/g,t):t===this.getEOL()&&this.f?s:s.replace(/\r\n|\r|\n/g,t):s}getValueInRange2(e,t){if(e.node===t.node){const o=e.node,a=this.a[o.piece.bufferIndex].buffer,c=this.u(o.piece.bufferIndex,o.piece.start);return a.substring(c+e.remainder,c+t.remainder)}let r=e.node;const i=this.a[r.piece.bufferIndex].buffer,s=this.u(r.piece.bufferIndex,r.piece.start);let n=i.substring(s+e.remainder,s+r.piece.length);for(r=r.next();r!==fe;){const o=this.a[r.piece.bufferIndex].buffer,a=this.u(r.piece.bufferIndex,r.piece.start);if(r===t.node){n+=o.substring(a,a+t.remainder);break}else n+=o.substr(a,r.piece.length);r=r.next()}return n}getLinesContent(){const e=[];let t=0,r="",i=!1;return this.iterate(this.root,s=>{if(s===fe)return!0;const n=s.piece;let o=n.length;if(o===0)return!0;const a=this.a[n.bufferIndex].buffer,c=this.a[n.bufferIndex].lineStarts,l=n.start.line,u=n.end.line;let h=c[l]+n.start.column;if(i&&(a.charCodeAt(h)===10&&(h++,o--),e[t++]=r,r="",i=!1,o===0))return!0;if(l===u)return!this.f&&a.charCodeAt(h+o-1)===13?(i=!0,r+=a.substr(h,o-1)):r+=a.substr(h,o),!0;r+=this.f?a.substring(h,Math.max(h,c[l+1]-this.e)):a.substring(h,c[l+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=r;for(let d=l+1;d<u;d++)r=this.f?a.substring(c[d],c[d+1]-this.e):a.substring(c[d],c[d+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=r;return!this.f&&a.charCodeAt(c[u]+n.end.column-1)===13?(i=!0,n.end.column===0?t--:r=a.substr(c[u],n.end.column-1)):r=a.substr(c[u],n.end.column),!0}),i&&(e[t++]=r,r=""),e[t++]=r,e}getLength(){return this.c}getLineCount(){return this.b}getLineContent(e){return this.j.lineNumber===e?this.j.value:(this.j.lineNumber=e,e===this.b?this.j.value=this.getLineRawContent(e):this.f?this.j.value=this.getLineRawContent(e,this.e):this.j.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,""),this.j.value)}l(e){if(e.remainder===e.node.piece.length){const t=e.node.next();if(!t)return 0;const r=this.a[t.piece.bufferIndex],i=this.u(t.piece.bufferIndex,t.piece.start);return r.buffer.charCodeAt(i)}else{const t=this.a[e.node.piece.bufferIndex],i=this.u(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(i)}}getLineCharCode(e,t){const r=this.H(e,t+1);return this.l(r)}getLineLength(e){if(e===this.getLineCount()){const t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this.e}getCharCode(e){const t=this.G(e);return this.l(t)}getNearestChunk(e){const t=this.G(e);if(t.remainder===t.node.piece.length){const r=t.node.next();if(!r||r===fe)return"";const i=this.a[r.piece.bufferIndex],s=this.u(r.piece.bufferIndex,r.piece.start);return i.buffer.substring(s,s+r.piece.length)}else{const r=this.a[t.node.piece.bufferIndex],i=this.u(t.node.piece.bufferIndex,t.node.piece.start),s=i+t.remainder,n=i+t.node.piece.length;return r.buffer.substring(s,n)}}findMatchesInNode(e,t,r,i,s,n,o,a,c,l,u){const h=this.a[e.piece.bufferIndex],d=this.u(e.piece.bufferIndex,e.piece.start),f=this.u(e.piece.bufferIndex,s),g=this.u(e.piece.bufferIndex,n);let v;const x={line:0,column:0};let $,C;t._wordSeparators?($=h.buffer.substring(f,g),C=L=>L+f,t.reset(0)):($=h.buffer,C=L=>L,t.reset(f));do if(v=t.next($),v){if(C(v.index)>=g)return l;this.s(e,C(v.index)-d,x);const L=this.t(e.piece.bufferIndex,s,x),F=x.line===s.line?x.column-s.column+i:x.column+1,z=F+v[0].length;if(u[l++]=g8(new nt(r+L,F,r+L,z),v,a),C(v.index)+v[0].length>=g||l>=c)return l}while(v);return l}findMatchesLineByLine(e,t,r,i){const s=[];let n=0;const o=new ZN(t.wordSeparators,t.regex);let a=this.H(e.startLineNumber,e.startColumn);if(a===null)return[];const c=this.H(e.endLineNumber,e.endColumn);if(c===null)return[];let l=this.s(a.node,a.remainder);const u=this.s(c.node,c.remainder);if(a.node===c.node)return this.findMatchesInNode(a.node,o,e.startLineNumber,e.startColumn,l,u,t,r,i,n,s),s;let h=e.startLineNumber,d=a.node;for(;d!==c.node;){const g=this.t(d.piece.bufferIndex,l,d.piece.end);if(g>=1){const x=this.a[d.piece.bufferIndex].lineStarts,$=this.u(d.piece.bufferIndex,d.piece.start),C=x[l.line+g],L=h===e.startLineNumber?e.startColumn:1;if(n=this.findMatchesInNode(d,o,h,L,l,this.s(d,C-$),t,r,i,n,s),n>=i)return s;h+=g}const v=h===e.startLineNumber?e.startColumn-1:0;if(h===e.endLineNumber){const x=this.getLineContent(h).substring(v,e.endColumn-1);return n=this.n(t,o,x,e.endLineNumber,v,n,s,r,i),s}if(n=this.n(t,o,this.getLineContent(h).substr(v),h,v,n,s,r,i),n>=i)return s;h++,a=this.H(h,1),d=a.node,l=this.s(a.node,a.remainder)}if(h===e.endLineNumber){const g=h===e.startLineNumber?e.startColumn-1:0,v=this.getLineContent(h).substring(g,e.endColumn-1);return n=this.n(t,o,v,e.endLineNumber,g,n,s,r,i),s}const f=h===e.startLineNumber?e.startColumn:1;return n=this.findMatchesInNode(c.node,o,h,f,l,u,t,r,i,n,s),s}n(e,t,r,i,s,n,o,a,c){const l=e.wordSeparators;if(!a&&e.simpleSearch){const h=e.simpleSearch,d=h.length,f=r.length;let g=-d;for(;(g=r.indexOf(h,g+d))!==-1;)if((!l||m8(l,r,f,g,d))&&(o[n++]=new B0(new nt(i,g+1+s,i,g+1+d+s),null),n>=c))return n;return n}let u;t.reset(0);do if(u=t.next(r),u&&(o[n++]=g8(new nt(i,u.index+1+s,i,u.index+1+u[0].length+s),u,a),n>=c))return n;while(u);return n}insert(e,t,r=!1){if(this.f=this.f&&r,this.j.lineNumber=0,this.j.value="",this.root!==fe){const{node:i,remainder:s,nodeStartOffset:n}=this.G(e),o=i.piece,a=o.bufferIndex,c=this.s(i,s);if(i.piece.bufferIndex===0&&o.end.line===this.g.line&&o.end.column===this.g.column&&n+o.length===e&&t.length<Ys){this.F(i,t),this.y();return}if(n===e)this.o(t,i),this.h.validate(e);else if(n+i.piece.length>e){const l=[];let u=new Lr(o.bufferIndex,c,o.end,this.t(o.bufferIndex,c,o.end),this.u(a,o.end)-this.u(a,c));if(this.K()&&this.M(t)&&this.I(i,s)===10){const g={line:u.start.line+1,column:0};u=new Lr(u.bufferIndex,g,u.end,this.t(u.bufferIndex,g,u.end),u.length-1),t+=`
`}if(this.K()&&this.L(t))if(this.I(i,s-1)===13){const g=this.s(i,s-1);this.C(i,g),t="\r"+t,i.piece.length===0&&l.push(i)}else this.C(i,c);else this.C(i,c);const h=this.w(t);u.length>0&&this.S(i,u);let d=i;for(let f=0;f<h.length;f++)d=this.S(d,h[f]);this.v(l)}else this.q(t,i)}else{const i=this.w(t);let s=this.T(null,i[0]);for(let n=1;n<i.length;n++)s=this.S(s,i[n])}this.y()}delete(e,t){if(this.j.lineNumber=0,this.j.value="",t<=0||this.root===fe)return;const r=this.G(e),i=this.G(e+t),s=r.node,n=i.node;if(s===n){const h=this.s(s,r.remainder),d=this.s(s,i.remainder);if(r.nodeStartOffset===e){if(t===s.piece.length){const f=s.next();ug(this,s),this.N(f),this.y();return}this.D(s,d),this.h.validate(e),this.N(s),this.y();return}if(r.nodeStartOffset+s.piece.length===e+t){this.C(s,h),this.O(s),this.y();return}this.E(s,h,d),this.y();return}const o=[],a=this.s(s,r.remainder);this.C(s,a),this.h.validate(e),s.piece.length===0&&o.push(s);const c=this.s(n,i.remainder);this.D(n,c),n.piece.length===0&&o.push(n);const l=s.next();for(let h=l;h!==fe&&h!==n;h=h.next())o.push(h);const u=s.piece.length===0?s.prev():s;this.v(o),this.O(u),this.y()}o(e,t){const r=[];if(this.K()&&this.M(e)&&this.L(t)){const n=t.piece,o={line:n.start.line+1,column:0},a=new Lr(n.bufferIndex,o,n.end,this.t(n.bufferIndex,o,n.end),n.length-1);t.piece=a,e+=`
`,Qs(this,t,-1,-1),t.piece.length===0&&r.push(t)}const i=this.w(e);let s=this.T(t,i[i.length-1]);for(let n=i.length-2;n>=0;n--)s=this.T(s,i[n]);this.N(s),this.v(r)}q(e,t){this.Q(e,t)&&(e+=`
`);const r=this.w(e),i=this.S(t,r[0]);let s=i;for(let n=1;n<r.length;n++)s=this.S(s,r[n]);this.N(i)}s(e,t,r){const i=e.piece,s=e.piece.bufferIndex,n=this.a[s].lineStarts,a=n[i.start.line]+i.start.column+t;let c=i.start.line,l=i.end.line,u=0,h=0,d=0;for(;c<=l&&(u=c+(l-c)/2|0,d=n[u],u!==l);)if(h=n[u+1],a<d)l=u-1;else if(a>=h)c=u+1;else break;return r?(r.line=u,r.column=a-d,null):{line:u,column:a-d}}t(e,t,r){if(r.column===0)return r.line-t.line;const i=this.a[e].lineStarts;if(r.line===i.length-1)return r.line-t.line;const s=i[r.line+1],n=i[r.line]+r.column;if(s>n+1)return r.line-t.line;const o=n-1;return this.a[e].buffer.charCodeAt(o)===13?r.line-t.line+1:r.line-t.line}u(e,t){return this.a[e].lineStarts[t.line]+t.column}v(e){for(let t=0;t<e.length;t++)ug(this,e[t])}w(e){if(e.length>Ys){const l=[];for(;e.length>Ys;){const h=e.charCodeAt(Ys-1);let d;h===13||h>=55296&&h<=56319?(d=e.substring(0,Ys-1),e=e.substring(Ys-1)):(d=e.substring(0,Ys),e=e.substring(Ys));const f=Xs(d);l.push(new Lr(this.a.length,{line:0,column:0},{line:f.length-1,column:d.length-f[f.length-1]},f.length-1,d.length)),this.a.push(new Ho(d,f))}const u=Xs(e);return l.push(new Lr(this.a.length,{line:0,column:0},{line:u.length-1,column:e.length-u[u.length-1]},u.length-1,e.length)),this.a.push(new Ho(e,u)),l}let t=this.a[0].buffer.length;const r=Xs(e,!1);let i=this.g;if(this.a[0].lineStarts[this.a[0].lineStarts.length-1]===t&&t!==0&&this.L(e)&&this.M(this.a[0].buffer)){this.g={line:this.g.line,column:this.g.column+1},i=this.g;for(let l=0;l<r.length;l++)r[l]+=t+1;this.a[0].lineStarts=this.a[0].lineStarts.concat(r.slice(1)),this.a[0].buffer+="_"+e,t+=1}else{if(t!==0)for(let l=0;l<r.length;l++)r[l]+=t;this.a[0].lineStarts=this.a[0].lineStarts.concat(r.slice(1)),this.a[0].buffer+=e}const s=this.a[0].buffer.length,n=this.a[0].lineStarts.length-1,o=s-this.a[0].lineStarts[n],a={line:n,column:o},c=new Lr(0,i,a,this.t(0,i,a),s-t);return this.g=a,[c]}getLinesRawContent(){return this.U(this.root)}getLineRawContent(e,t=0){let r=this.root,i="";const s=this.h.get2(e);if(s){r=s.node;const n=this.B(r,e-s.nodeStartLineNumber-1),o=this.a[r.piece.bufferIndex].buffer,a=this.u(r.piece.bufferIndex,r.piece.start);if(s.nodeStartLineNumber+r.piece.lineFeedCnt===e)i=o.substring(a+n,a+r.piece.length);else{const c=this.B(r,e-s.nodeStartLineNumber);return o.substring(a+n,a+c-t)}}else{let n=0;const o=e;for(;r!==fe;)if(r.left!==fe&&r.lf_left>=e-1)r=r.left;else if(r.lf_left+r.piece.lineFeedCnt>e-1){const a=this.B(r,e-r.lf_left-2),c=this.B(r,e-r.lf_left-1),l=this.a[r.piece.bufferIndex].buffer,u=this.u(r.piece.bufferIndex,r.piece.start);return n+=r.size_left,this.h.set({node:r,nodeStartOffset:n,nodeStartLineNumber:o-(e-1-r.lf_left)}),l.substring(u+a,u+c-t)}else if(r.lf_left+r.piece.lineFeedCnt===e-1){const a=this.B(r,e-r.lf_left-2),c=this.a[r.piece.bufferIndex].buffer,l=this.u(r.piece.bufferIndex,r.piece.start);i=c.substring(l+a,l+r.piece.length);break}else e-=r.lf_left+r.piece.lineFeedCnt,n+=r.size_left+r.piece.length,r=r.right}for(r=r.next();r!==fe;){const n=this.a[r.piece.bufferIndex].buffer;if(r.piece.lineFeedCnt>0){const o=this.B(r,0),a=this.u(r.piece.bufferIndex,r.piece.start);return i+=n.substring(a,a+o-t),i}else{const o=this.u(r.piece.bufferIndex,r.piece.start);i+=n.substr(o,r.piece.length)}r=r.next()}return i}y(){let e=this.root,t=1,r=0;for(;e!==fe;)t+=e.lf_left+e.piece.lineFeedCnt,r+=e.size_left+e.piece.length,e=e.right;this.b=t,this.c=r,this.h.validate(this.c)}A(e,t){const r=e.piece,i=this.s(e,t),s=i.line-r.start.line;if(this.u(r.bufferIndex,r.end)-this.u(r.bufferIndex,r.start)===t){const n=this.t(e.piece.bufferIndex,r.start,i);if(n!==s)return{index:n,remainder:0}}return{index:s,remainder:i.column}}B(e,t){if(t<0)return 0;const r=e.piece,i=this.a[r.bufferIndex].lineStarts,s=r.start.line+t+1;return s>r.end.line?i[r.end.line]+r.end.column-i[r.start.line]-r.start.column:i[s]-i[r.start.line]-r.start.column}C(e,t){const r=e.piece,i=r.lineFeedCnt,s=this.u(r.bufferIndex,r.end),n=t,o=this.u(r.bufferIndex,n),a=this.t(r.bufferIndex,r.start,n),c=a-i,l=o-s,u=r.length+l;e.piece=new Lr(r.bufferIndex,r.start,n,a,u),Qs(this,e,l,c)}D(e,t){const r=e.piece,i=r.lineFeedCnt,s=this.u(r.bufferIndex,r.start),n=t,o=this.t(r.bufferIndex,n,r.end),a=this.u(r.bufferIndex,n),c=o-i,l=s-a,u=r.length+l;e.piece=new Lr(r.bufferIndex,n,r.end,o,u),Qs(this,e,l,c)}E(e,t,r){const i=e.piece,s=i.start,n=i.end,o=i.length,a=i.lineFeedCnt,c=t,l=this.t(i.bufferIndex,i.start,c),u=this.u(i.bufferIndex,t)-this.u(i.bufferIndex,s);e.piece=new Lr(i.bufferIndex,i.start,c,l,u),Qs(this,e,u-o,l-a);const h=new Lr(i.bufferIndex,r,n,this.t(i.bufferIndex,r,n),this.u(i.bufferIndex,n)-this.u(i.bufferIndex,r)),d=this.S(e,h);this.N(d)}F(e,t){this.Q(t,e)&&(t+=`
`);const r=this.K()&&this.L(t)&&this.M(e),i=this.a[0].buffer.length;this.a[0].buffer+=t;const s=Xs(t,!1);for(let d=0;d<s.length;d++)s[d]+=i;if(r){const d=this.a[0].lineStarts[this.a[0].lineStarts.length-2];this.a[0].lineStarts.pop(),this.g={line:this.g.line-1,column:i-d}}this.a[0].lineStarts=this.a[0].lineStarts.concat(s.slice(1));const n=this.a[0].lineStarts.length-1,o=this.a[0].buffer.length-this.a[0].lineStarts[n],a={line:n,column:o},c=e.piece.length+t.length,l=e.piece.lineFeedCnt,u=this.t(0,e.piece.start,a),h=u-l;e.piece=new Lr(e.piece.bufferIndex,e.piece.start,a,u,c),this.g=a,Qs(this,e,t.length,h)}G(e){let t=this.root;const r=this.h.get(e);if(r)return{node:r.node,nodeStartOffset:r.nodeStartOffset,remainder:e-r.nodeStartOffset};let i=0;for(;t!==fe;)if(t.size_left>e)t=t.left;else if(t.size_left+t.piece.length>=e){i+=t.size_left;const s={node:t,remainder:e-t.size_left,nodeStartOffset:i};return this.h.set(s),s}else e-=t.size_left+t.piece.length,i+=t.size_left+t.piece.length,t=t.right;return null}H(e,t){let r=this.root,i=0;for(;r!==fe;)if(r.left!==fe&&r.lf_left>=e-1)r=r.left;else if(r.lf_left+r.piece.lineFeedCnt>e-1){const s=this.B(r,e-r.lf_left-2),n=this.B(r,e-r.lf_left-1);return i+=r.size_left,{node:r,remainder:Math.min(s+t-1,n),nodeStartOffset:i}}else if(r.lf_left+r.piece.lineFeedCnt===e-1){const s=this.B(r,e-r.lf_left-2);if(s+t-1<=r.piece.length)return{node:r,remainder:s+t-1,nodeStartOffset:i};t-=r.piece.length-s;break}else e-=r.lf_left+r.piece.lineFeedCnt,i+=r.size_left+r.piece.length,r=r.right;for(r=r.next();r!==fe;){if(r.piece.lineFeedCnt>0){const s=this.B(r,0),n=this.J(r);return{node:r,remainder:Math.min(t-1,s),nodeStartOffset:n}}else if(r.piece.length>=t-1){const s=this.J(r);return{node:r,remainder:t-1,nodeStartOffset:s}}else t-=r.piece.length;r=r.next()}return null}I(e,t){if(e.piece.lineFeedCnt<1)return-1;const r=this.a[e.piece.bufferIndex],i=this.u(e.piece.bufferIndex,e.piece.start)+t;return r.buffer.charCodeAt(i)}J(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}K(){return!(this.f&&this.d===`
`)}L(e){if(typeof e=="string")return e.charCodeAt(0)===10;if(e===fe||e.piece.lineFeedCnt===0)return!1;const t=e.piece,r=this.a[t.bufferIndex].lineStarts,i=t.start.line,s=r[i]+t.start.column;return i===r.length-1||r[i+1]>s+1?!1:this.a[t.bufferIndex].buffer.charCodeAt(s)===10}M(e){return typeof e=="string"?e.charCodeAt(e.length-1)===13:e===fe||e.piece.lineFeedCnt===0?!1:this.I(e,e.piece.length-1)===13}N(e){if(this.K()&&this.L(e)){const t=e.prev();this.M(t)&&this.P(t,e)}}O(e){if(this.K()&&this.M(e)){const t=e.next();this.L(t)&&this.P(e,t)}}P(e,t){const r=[],i=this.a[e.piece.bufferIndex].lineStarts;let s;e.piece.end.column===0?s={line:e.piece.end.line-1,column:i[e.piece.end.line]-i[e.piece.end.line-1]-1}:s={line:e.piece.end.line,column:e.piece.end.column-1};const n=e.piece.length-1,o=e.piece.lineFeedCnt-1;e.piece=new Lr(e.piece.bufferIndex,e.piece.start,s,o,n),Qs(this,e,-1,-1),e.piece.length===0&&r.push(e);const a={line:t.piece.start.line+1,column:0},c=t.piece.length-1,l=this.t(t.piece.bufferIndex,a,t.piece.end);t.piece=new Lr(t.piece.bufferIndex,a,t.piece.end,l,c),Qs(this,t,-1,-1),t.piece.length===0&&r.push(t);const u=this.w(`\r
`);this.S(e,u[0]);for(let h=0;h<r.length;h++)ug(this,r[h])}Q(e,t){if(this.K()&&this.M(e)){const r=t.next();if(this.L(r)){if(e+=`
`,r.piece.length===1)ug(this,r);else{const i=r.piece,s={line:i.start.line+1,column:0},n=i.length-1,o=this.t(i.bufferIndex,s,i.end);r.piece=new Lr(i.bufferIndex,s,i.end,o,n),Qs(this,r,-1,-1)}return!0}}return!1}iterate(e,t){if(e===fe)return t(fe);const r=this.iterate(e.left,t);return r&&t(e)&&this.iterate(e.right,t)}R(e){if(e===fe)return"";const t=this.a[e.piece.bufferIndex],r=e.piece,i=this.u(r.bufferIndex,r.start),s=this.u(r.bufferIndex,r.end);return t.buffer.substring(i,s)}getPieceContent(e){const t=this.a[e.bufferIndex],r=this.u(e.bufferIndex,e.start),i=this.u(e.bufferIndex,e.end);return t.buffer.substring(r,i)}S(e,t){const r=new ub(t,1);if(r.left=fe,r.right=fe,r.parent=fe,r.size_left=0,r.lf_left=0,this.root===fe)this.root=r,r.color=0;else if(e.right===fe)e.right=r,r.parent=e;else{const s=hb(e.right);s.left=r,r.parent=s}return BS(this,r),r}T(e,t){const r=new ub(t,1);if(r.left=fe,r.right=fe,r.parent=fe,r.size_left=0,r.lf_left=0,this.root===fe)this.root=r,r.color=0;else if(e.left===fe)e.left=r,r.parent=e;else{const i=HS(e.left);i.right=r,r.parent=i}return BS(this,r),r}U(e){let t="";return this.iterate(e,r=>(t+=this.R(r),!0)),t}},_S;(function(e){e[e.Unknown=0]="Unknown",e[e.Invalid=3]="Invalid",e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"})(_S||(_S={}));function gb(e){let t=0,r=0,i=0,s=0;for(let n=0,o=e.length;n<o;n++){const a=e.charCodeAt(n);a===13?(t===0&&(r=n),t++,n+1<o&&e.charCodeAt(n+1)===10?(s|=2,n++):s|=3,i=n+1):a===10&&(s|=1,t===0&&(r=n),t++,i=n+1)}return t===0&&(r=e.length),[t,r,e.length-i,s]}var mb;function dU(){return mb||(mb=new TextDecoder("UTF-16LE")),mb}function fU(e,t,r){const i=new Uint16Array(e.buffer,t,r);return r>0&&(i[0]===65279||i[0]===65534)?pU(e,t,r):dU().decode(i)}function pU(e,t,r){const i=[];let s=0;for(let n=0;n<r;n++){const o=XI(e,t);t+=2,i[s++]=String.fromCharCode(o)}return i.join("")}function hg(e){return e.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}var gU=class vs{get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}constructor(t,r,i,s){this.oldPosition=t,this.oldText=r,this.newPosition=i,this.newText=s}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${hg(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${hg(this.oldText)}")`:`(replace@${this.oldPosition} "${hg(this.oldText)}" with "${hg(this.newText)}")`}static a(t){return 4+2*t.length}static c(t,r,i){const s=r.length;Oh(t,s,i),i+=4;for(let n=0;n<s;n++)ZI(t,r.charCodeAt(n),i),i+=2;return i}static d(t,r){const i=Fh(t,r);return r+=4,fU(t,r,i)}writeSize(){return 8+vs.a(this.oldText)+vs.a(this.newText)}write(t,r){return Oh(t,this.oldPosition,r),r+=4,Oh(t,this.newPosition,r),r+=4,r=vs.c(t,this.oldText,r),r=vs.c(t,this.newText,r),r}static read(t,r,i){const s=Fh(t,r);r+=4;const n=Fh(t,r);r+=4;const o=vs.d(t,r);r+=vs.a(o);const a=vs.d(t,r);return r+=vs.a(a),i.push(new vs(s,o,n,a)),r}},mU=class sh extends ae{constructor(t,r,i,s,n,o,a){super(),this.m=this.B(new T),this.onDidChangeContent=this.m.event,this.f=r,this.j=!o,this.g=s,this.h=n,this.c=new hU(t,i,a)}equals(t){return!(t instanceof sh)||this.f!==t.f||this.getEOL()!==t.getEOL()?!1:this.c.equal(t.c)}mightContainRTL(){return this.g}mightContainUnusualLineTerminators(){return this.h}resetMightContainUnusualLineTerminators(){this.h=!1}mightContainNonBasicASCII(){return this.j}getBOM(){return this.f}getEOL(){return this.c.getEOL()}createSnapshot(t){return this.c.createSnapshot(t?this.f:"")}getOffsetAt(t,r){return this.c.getOffsetAt(t,r)}getPositionAt(t){return this.c.getPositionAt(t)}getRangeAt(t,r){const i=t+r,s=this.getPositionAt(t),n=this.getPositionAt(i);return new nt(s.lineNumber,s.column,n.lineNumber,n.column)}getValueInRange(t,r=0){if(t.isEmpty())return"";const i=this.n(r);return this.c.getValueInRange(t,i)}getValueLengthInRange(t,r=0){if(t.isEmpty())return 0;if(t.startLineNumber===t.endLineNumber)return t.endColumn-t.startColumn;const i=this.getOffsetAt(t.startLineNumber,t.startColumn),s=this.getOffsetAt(t.endLineNumber,t.endColumn);let n=0;const o=this.n(r),a=this.getEOL();if(o.length!==a.length){const c=o.length-a.length,l=t.endLineNumber-t.startLineNumber;n=c*l}return s-i+n}getCharacterCountInRange(t,r=0){if(this.j){let i=0;const s=t.startLineNumber,n=t.endLineNumber;for(let o=s;o<=n;o++){const a=this.getLineContent(o),c=o===s?t.startColumn-1:0,l=o===n?t.endColumn-1:a.length;for(let u=c;u<l;u++)Ph(a.charCodeAt(u))?(i=i+1,u=u+1):i=i+1}return i+=this.n(r).length*(n-s),i}return this.getValueLengthInRange(t,r)}getNearestChunk(t){return this.c.getNearestChunk(t)}getLength(){return this.c.getLength()}getLineCount(){return this.c.getLineCount()}getLinesContent(){return this.c.getLinesContent()}getLineContent(t){return this.c.getLineContent(t)}getLineCharCode(t,r){return this.c.getLineCharCode(t,r)}getCharCode(t){return this.c.getCharCode(t)}getLineLength(t){return this.c.getLineLength(t)}getLineMinColumn(t){return 1}getLineMaxColumn(t){return this.getLineLength(t)+1}getLineFirstNonWhitespaceColumn(t){const r=nm(this.getLineContent(t));return r===-1?0:r+1}getLineLastNonWhitespaceColumn(t){const r=jP(this.getLineContent(t));return r===-1?0:r+2}n(t){switch(t){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(t){this.c.setEOL(t)}applyEdits(t,r,i){let s=this.g,n=this.h,o=this.j,a=!0,c=[];for(let v=0;v<t.length;v++){const x=t[v];a&&x._isTracked&&(a=!1);const $=x.range;if(x.text){let Y=!0;o||(Y=!qP(x.text),o=Y),!s&&Y&&(s=a4(x.text)),!n&&Y&&(n=c4(x.text))}let C="",L=0,F=0,z=0;if(x.text){let Y;[L,F,z,Y]=gb(x.text);const oe=this.getEOL();Y===0||Y===(oe===`\r
`?2:1)?C=x.text:C=x.text.replace(/\r\n|\r|\n/g,oe)}c[v]={sortIndex:v,identifier:x.identifier||null,range:$,rangeOffset:this.getOffsetAt($.startLineNumber,$.startColumn),rangeLength:this.getValueLengthInRange($),text:C,eolCount:L,firstLineLength:F,lastLineLength:z,forceMoveMarkers:!!x.forceMoveMarkers,isAutoWhitespaceEdit:x.isAutoWhitespaceEdit||!1}}c.sort(sh.u);let l=!1;for(let v=0,x=c.length-1;v<x;v++){const $=c[v].range.getEndPosition(),C=c[v+1].range.getStartPosition();if(C.isBeforeOrEqual($)){if(C.isBefore($))throw new Error("Overlapping ranges are not allowed!");l=!0}}a&&(c=this.s(c));const u=i||r?sh._getInverseEditRanges(c):[],h=[];if(r)for(let v=0;v<c.length;v++){const x=c[v],$=u[v];if(x.isAutoWhitespaceEdit&&x.range.isEmpty())for(let C=$.startLineNumber;C<=$.endLineNumber;C++){let L="";C===$.startLineNumber&&(L=this.getLineContent(x.range.startLineNumber),nm(L)!==-1)||h.push({lineNumber:C,oldContent:L})}}let d=null;if(i){let v=0;d=[];for(let x=0;x<c.length;x++){const $=c[x],C=u[x],L=this.getValueInRange($.range),F=$.rangeOffset+v;v+=$.text.length-L.length,d[x]={sortIndex:$.sortIndex,identifier:$.identifier,range:C,text:L,textChange:new gU($.rangeOffset,L,F,$.text)}}l||d.sort((x,$)=>x.sortIndex-$.sortIndex)}this.g=s,this.h=n,this.j=o;const f=this.t(c);let g=null;if(r&&h.length>0){h.sort((v,x)=>x.lineNumber-v.lineNumber),g=[];for(let v=0,x=h.length;v<x;v++){const $=h[v].lineNumber;if(v>0&&h[v-1].lineNumber===$)continue;const C=h[v].oldContent,L=this.getLineContent($);L.length===0||L===C||nm(L)!==-1||g.push($)}}return this.m.fire(),new QN(d,f,g)}s(t){return t.length<1e3?t:[this._toSingleEditOperation(t)]}_toSingleEditOperation(t){let r=!1;const i=t[0].range,s=t[t.length-1].range,n=new nt(i.startLineNumber,i.startColumn,s.endLineNumber,s.endColumn);let o=i.startLineNumber,a=i.startColumn;const c=[];for(let f=0,g=t.length;f<g;f++){const v=t[f],x=v.range;r=r||v.forceMoveMarkers,c.push(this.getValueInRange(new nt(o,a,x.startLineNumber,x.startColumn))),v.text.length>0&&c.push(v.text),o=x.endLineNumber,a=x.endColumn}const l=c.join(""),[u,h,d]=gb(l);return{sortIndex:0,identifier:t[0].identifier,range:n,rangeOffset:this.getOffsetAt(n.startLineNumber,n.startColumn),rangeLength:this.getValueLengthInRange(n,0),text:l,eolCount:u,firstLineLength:h,lastLineLength:d,forceMoveMarkers:r,isAutoWhitespaceEdit:!1}}t(t){t.sort(sh.w);const r=[];for(let i=0;i<t.length;i++){const s=t[i],n=s.range.startLineNumber,o=s.range.startColumn,a=s.range.endLineNumber,c=s.range.endColumn;if(n===a&&o===c&&s.text.length===0)continue;s.text?(this.c.delete(s.rangeOffset,s.rangeLength),this.c.insert(s.rangeOffset,s.text,!0)):this.c.delete(s.rangeOffset,s.rangeLength);const l=new nt(n,o,a,c);r.push({range:l,rangeLength:s.rangeLength,text:s.text,rangeOffset:s.rangeOffset,forceMoveMarkers:s.forceMoveMarkers})}return r}findMatchesLineByLine(t,r,i,s){return this.c.findMatchesLineByLine(t,r,i,s)}getPieceTree(){return this.c}static _getInverseEditRange(t,r){const i=t.startLineNumber,s=t.startColumn,[n,o,a]=gb(r);let c;if(r.length>0){const l=n+1;l===1?c=new nt(i,s,i,s+o):c=new nt(i,s,i+l-1,a+1)}else c=new nt(i,s,i,s);return c}static _getInverseEditRanges(t){const r=[];let i=0,s=0,n=null;for(let o=0,a=t.length;o<a;o++){const c=t[o];let l,u;n?n.range.endLineNumber===c.range.startLineNumber?(l=i,u=s+(c.range.startColumn-n.range.endColumn)):(l=i+(c.range.startLineNumber-n.range.endLineNumber),u=c.range.startColumn):(l=c.range.startLineNumber,u=c.range.startColumn);let h;if(c.text.length>0){const d=c.eolCount+1;d===1?h=new nt(l,u,l,u+c.firstLineLength):h=new nt(l,u,l+d-1,c.lastLineLength+1)}else h=new nt(l,u,l,u);i=h.endLineNumber,s=h.endColumn,r.push(h),n=c}return r}static u(t,r){const i=nt.compareRangesUsingEnds(t.range,r.range);return i===0?t.sortIndex-r.sortIndex:i}static w(t,r){const i=nt.compareRangesUsingEnds(t.range,r.range);return i===0?r.sortIndex-t.sortIndex:-i}},vU=class{constructor(e,t,r,i,s,n,o,a,c){this.a=e,this.b=t,this.c=r,this.d=i,this.e=s,this.f=n,this.g=o,this.h=a,this.j=c}k(e){const t=this.c+this.d+this.e,r=this.c+this.e;return t===0?e===1?`
`:`\r
`:r>t/2?`\r
`:`
`}create(e){const t=this.k(e),r=this.a;if(this.j&&(t===`\r
`&&(this.c>0||this.d>0)||t===`
`&&(this.c>0||this.e>0)))for(let s=0,n=r.length;s<n;s++){const o=r[s].buffer.replace(/\r\n|\r|\n/g,t),a=Xs(o);r[s]=new Ho(o,a)}const i=new mU(r,this.b,t,this.f,this.g,this.h,this.j);return{textBuffer:i,disposable:i}}getFirstLineText(e){return this.a[0].buffer.substr(0,e).split(/\r\n|\r|\n/)[0]}},WS=class{constructor(){this.a=[],this.b="",this.c=!1,this.d=0,this.e=[],this.f=0,this.g=0,this.h=0,this.j=!1,this.k=!1,this.l=!0}acceptChunk(e){if(e.length===0)return;this.a.length===0&&QP(e)&&(this.b=JP,e=e.substr(1));const t=e.charCodeAt(e.length-1);t===13||t>=55296&&t<=56319?(this.m(e.substr(0,e.length-1),!1),this.c=!0,this.d=t):(this.m(e,!1),this.c=!1,this.d=t)}m(e,t){!t&&e.length===0||(this.c?this.n(String.fromCharCode(this.d)+e):this.n(e))}n(e){const t=cU(this.e,e);this.a.push(new Ho(e,t.lineStarts)),this.f+=t.cr,this.g+=t.lf,this.h+=t.crlf,t.isBasicASCII||(this.l=!1,this.j||(this.j=a4(e)),this.k||(this.k=c4(e)))}finish(e=!0){return this.o(),new vU(this.a,this.b,this.f,this.g,this.h,this.j,this.k,this.l,e)}o(){if(this.a.length===0&&this.m("",!0),this.c){this.c=!1;const e=this.a[this.a.length-1];e.buffer+=String.fromCharCode(this.d);const t=Xs(e.buffer);e.lineStarts=t,this.d===13&&this.f++}}},wU=class extends ae{constructor(e,t,r){super(),this._source=e,this.b=t,this.c=r,this.a=void 0}f(e){const t=e.getLineCount();return new nt(1,1,t,this.g(e,t))}g(e,t){if(t<1||t>e.getLineCount())throw new Error("Illegal value for lineNumber");return e.getLineLength(t)+1}get inputTextBuffer(){if(!this.b){const e=new WS;e.acceptChunk(this._source);const t=e.finish(!0),{textBuffer:r,disposable:i}=t.create(1);this.b=r,this.B(i)}return this.b}get outputTextBuffers(){return this.a||(this.a=this.c.map(e=>{const t=new WS;t.acceptChunk(e);const r=t.finish(!0),{textBuffer:i,disposable:s}=r.create(1);return this.B(s),i})),this.a}findInInputs(e){const r=new f8(e,!1,!1,null).parseSearchRequest();if(!r)return[];const i=this.f(this.inputTextBuffer);return this.inputTextBuffer.findMatchesLineByLine(i,r,!0,5e3)}findInOutputs(e){const r=new f8(e,!1,!1,null).parseSearchRequest();return r?this.outputTextBuffers.map(i=>{const s=i.findMatchesLineByLine(this.f(i),r,!0,5e3);if(s.length!==0)return{textBuffer:i,matches:s}}).filter(i=>!!i):[]}};function VS(e,t){let r=-1;const i=[];let s=[];return e.forEach(o=>{o.range.startLineNumber!==r&&s.length>0&&(i.push([...s]),s=[]),s.push(o),r=o.range.endLineNumber}),s.length>0&&i.push([...s]),i.map(o=>{const a=[],c=o[0].range.startLineNumber,l=o[o.length-1].range.endLineNumber;for(let u=c;u<=l;u++)a.push(t.getLineContent(u));return new tx(a.join(`
`)+`
`,o.map(u=>new nt(u.range.startLineNumber-1,u.range.startColumn-1,u.range.endLineNumber-1,u.range.endColumn-1)))})}var aJ=Object.freeze({id:"application",order:100,title:p(3993,null),type:"object"}),bU=Object.freeze({id:"workbench",order:7,title:p(3994,null),type:"object"}),yU=Object.freeze({id:"security",scope:1,title:p(3995,null),type:"object",order:7}),cJ=Object.freeze({id:"problems",title:p(3996,null),type:"object",order:101}),kU=Object.freeze({id:"window",order:8,title:p(3997,null),type:"object"}),xU={ConfigurationMigration:"base.contributions.configuration.migration"},EU=class{constructor(){this.migrations=[],this.a=new T,this.onDidRegisterConfigurationMigration=this.a.event}registerConfigurationMigrations(e){this.migrations.push(...e)}},dg=new EU;fr.add(xU.ConfigurationMigration,dg);var qS=class extends ae{static{this.ID="workbench.contrib.configurationMigration"}constructor(t,r){super(),this.a=t,this.b=r,this.B(this.b.onDidChangeWorkspaceFolders(async i=>{for(const s of i.added)await this.f(s,dg.migrations)})),this.c(dg.migrations),this.B(dg.onDidRegisterConfigurationMigration(i=>this.c(i)))}async c(t){await this.f(void 0,t);for(const r of this.b.getWorkspace().folders)await this.f(r,t)}async f(t,r){await Promise.all([r.map(i=>this.g(i,t?.uri))])}async g(t,r){const i=this.a.inspect(t.key,{resource:r}),s=this.b.getWorkbenchState()===3?[["user",2],["userLocal",3],["userRemote",4],["workspace",5],["workspaceFolder",6]]:[["user",2],["userLocal",3],["userRemote",4],["workspace",5]];for(const[n,o]of s){const a=i[n];if(!a)continue;const c=[];if(a.value!==void 0){const l=await this.h(t,n,a.value,r,void 0);for(const u of l??[])c.push([u,[]])}for(const{identifiers:l,value:u}of a.overrides??[])if(u!==void 0){const h=await this.h(t,n,u,r,l);for(const d of h??[])c.push([d,l])}c.length&&await Promise.allSettled(c.map(async([[l,u],h])=>this.a.updateValue(l,u.value,{resource:r,overrideIdentifiers:h},o)))}}async h(t,r,i,s,n){const o=c=>{const u=this.a.inspect(c,{resource:s})[r];if(u)return n?u.overrides?.find(({identifiers:h})=>Di(h,n))?.value:u.value},a=await t.migrateFn(i,o);return Array.isArray(a)?a:[[t.key,a]]}};qS=__decorate([__param(0,Sn),__param(1,Zh)],qS);var GS=class extends ae{static{this.ID="workbench.contrib.dynamicWorkbenchSecurityConfiguration"}constructor(t){super(),this.b=t,this.a=new vn,this.ready=this.a.p,this.c()}async c(){try{await this.f()}finally{this.a.complete()}}async f(){if(!at&&(await this.b.getEnvironment())?.os!==1)return;fr.as(va.Configuration).registerConfiguration({...yU,properties:{"security.allowedUNCHosts":{type:"array",items:{type:"string",pattern:"^[^\\\\]+$",patternErrorMessage:p(3998,null)},default:[],markdownDescription:p(3999,null),scope:2},"security.restrictUNCAccess":{type:"boolean",default:!0,markdownDescription:p(4e3,null),scope:2}}})}};GS=__decorate([__param(0,b8)],GS);var Gu="window.newWindowProfile",JS=class extends ae{static{this.ID="workbench.contrib.dynamicWindowConfiguration"}constructor(t,r){super(),this.c=t,this.f=r,this.g(),this.B(this.c.onDidChangeProfiles(i=>this.g())),this.h(),this.j(),this.B(r.onDidChangeConfiguration(i=>{i.source!==7&&i.affectsConfiguration(Gu)&&this.h()})),this.B(this.c.onDidChangeProfiles(()=>this.j()))}g(){const t=fr.as(va.Configuration),r={...kU,properties:{[Gu]:{type:["string","null"],default:null,enum:[...this.c.profiles.map(i=>i.name),null],enumItemLabels:[...this.c.profiles.map(i=>""),p(4001,null)],description:p(4002,null),scope:1}}};this.a?t.updateConfigurations({add:[r],remove:[this.a]}):t.registerConfiguration(r),this.a=r}h(){const t=this.f.getValue(Gu);this.b=t?this.c.profiles.find(r=>r.name===t):void 0}j(){const t=this.f.getValue(Gu);if(!t)return;const r=this.b?this.c.profiles.find(i=>i.id===this.b.id):void 0;t!==r?.name&&this.f.updateValue(Gu,r?.name)}};JS=__decorate([__param(0,ER),__param(1,Sn)],JS);var dJ=X("editorResolverService"),SU=fr.as(va.Configuration),$U={...bU,properties:{"workbench.editorAssociations":{type:"object",markdownDescription:p(12347,null),additionalProperties:{type:"string"}}}};SU.registerConfiguration($U);var vb;(function(e){e.builtin="builtin",e.option="option",e.exclusive="exclusive",e.default="default"})(vb||(vb={}));var QS;(function(e){e[e.ABORT=1]="ABORT",e[e.NONE=2]="NONE"})(QS||(QS={}));function CU(e,t){if(new Set([Q.extension,Q.webviewPanel,Q.vscodeWorkspaceTrust,Q.vscodeSettings]).has(t.scheme))return!1;const s=typeof e=="string"&&e.indexOf(He.sep)>=0?`${t.scheme}:${t.path}`:es(t);return ba(typeof e=="string"?e.toLowerCase():e,s.toLowerCase())}var PU=class nh{static{this.a=0}get activeNotebookEditor(){return this.k?.apiEditor}get visibleNotebookEditors(){return this.l.map(t=>t.apiEditor)}constructor(t,r,i,s,n,o,a){this.q=i,this.r=s,this.s=n,this.t=o,this.u=a,this.f=new Map,this.g=new rr,this.h=new Map,this.j=new T,this.onDidChangeActiveNotebookEditor=this.j.event,this.l=[],this.m=new T,this.onDidOpenNotebookDocument=this.m.event,this.n=new T,this.onDidCloseNotebookDocument=this.n.event,this.o=new T,this.onDidChangeVisibleNotebookEditors=this.o.event,this.p=new Vi("NotebookCellStatusBarCache"),this.x=0,this.y=new Map,this.b=t.getProxy(K.MainThreadNotebook),this.c=t.getProxy(K.MainThreadNotebookDocuments),this.d=t.getProxy(K.MainThreadNotebookEditors),this.i=r.converter,r.registerArgumentProcessor({processArgument:c=>{if(c&&c.$mid===13){const l=c.notebookEditor?.notebookUri,u=c.cell.handle,d=this.g.get(l)?.getCell(u);if(d)return d.apiCell}if(c&&c.$mid===14){const l=c.uri,u=this.g.get(l);if(u)return u.apiNotebook}return c}}),nh.C(r)}getEditorById(t){const r=this.h.get(t);if(!r)throw new Error(`unknown text editor: ${t}. known editors: ${[...this.h.keys()]} `);return r}getIdByEditor(t){for(const[r,i]of this.h)if(i.apiEditor===t)return r}get notebookDocuments(){return[...this.g.values()]}getNotebookDocument(t,r){const i=this.g.get(t);if(!i&&!r)throw new Error(`NO notebook document for '${t}'`);return i}static w(t,r){if(!r)return;const i=r.filenamePattern.map(s=>Xf.from(s)).filter(s=>s!==void 0);if(r.filenamePattern&&!i){console.warn(`Notebook content provider view options file name pattern is invalid ${r.filenamePattern}`);return}return{extension:t.identifier,providerDisplayName:t.displayName||t.name,displayName:r.displayName,filenamePattern:i,priority:r.exclusive?vb.exclusive:void 0}}registerNotebookCellStatusBarItemProvider(t,r,i){const s=nh.a++,n=typeof i.onDidChangeCellStatusBarItems=="function"?nh.a++:void 0;this.f.set(s,i),this.b.$registerNotebookCellStatusBarItemProvider(s,n,r);let o;return n!==void 0&&(o=i.onDidChangeCellStatusBarItems(a=>this.b.$emitCellStatusBarEvent(n))),new _e(()=>{this.f.delete(s),this.b.$unregisterNotebookCellStatusBarItemProvider(s,n),o?.dispose()})}async createNotebookDocument(t){const r=await this.c.$tryCreateNotebook({viewType:t.viewType,content:t.content&&Ln.from(t.content)});return k.revive(r)}async openNotebookDocument(t){const r=this.g.get(t);if(r)return r.apiNotebook;const i=await this.c.$tryOpenNotebook(t),s=this.g.get(k.revive(i));return ea(s?.apiNotebook)}async showNotebookDocument(t,r){let i;typeof r=="object"?i={position:Gt.from(r.viewColumn),preserveFocus:r.preserveFocus,selections:r.selections&&r.selections.map(us.from),pinned:typeof r.preview=="boolean"?!r.preview:void 0,label:typeof r.asRepl=="string"?r.asRepl:typeof r.asRepl=="object"?r.asRepl.label:void 0}:i={preserveFocus:!1,pinned:!0};const s=r?.asRepl?"repl":t.notebookType,n=await this.d.$tryShowNotebookDocument(t.uri,s,i),o=n&&this.h.get(n)?.apiEditor;if(o)return o;throw n?new Error(`Could NOT open editor for "${t.uri.toString()}" because another editor opened in the meantime.`):new Error(`Could NOT open editor for "${t.uri.toString()}".`)}async $provideNotebookCellStatusBarItems(t,r,i,s){const n=this.f.get(t),o=k.revive(r),a=this.g.get(o);if(!a||!n)return;const c=a.getCellFromIndex(i);if(!c)return;const l=await n.provideCellStatusBarItems(c.apiCell,s);if(!l)return;const u=new be,h=this.p.add([u]),f=(Array.isArray(l)?l:[l]).map(g=>Jv.from(g,this.i,u));return{cacheId:h,items:f}}$releaseNotebookCellStatusBarItems(t){this.p.delete(t)}registerNotebookSerializer(t,r,i,s,n){if($h(r))throw new Error("viewType cannot be empty or just whitespace");const o=this.x++;return this.y.set(o,{viewType:r,serializer:i,options:s}),this.b.$registerNotebookSerializer(o,{id:t.identifier,location:t.extensionLocation},r,Yv.from(s),nh.w(t,n)),me(()=>{this.b.$unregisterNotebookSerializer(o)})}async $dataToNotebook(t,r,i){const s=this.y.get(t);if(!s)throw new Error("NO serializer found");const n=await s.serializer.deserializeNotebook(r.buffer,i);return new ei(Ln.from(n))}async $notebookToData(t,r,i){const s=this.y.get(t);if(!s)throw new Error("NO serializer found");const n=await s.serializer.serializeNotebook(Ln.to(r.value),i);return re.wrap(n)}async $saveNotebook(t,r,i,s,n){const o=k.revive(r),a=this.y.get(t);if(this.D(`enter saveNotebook(versionId: ${i}, ${o.toString()})`),!a)throw new Error("NO serializer found");const c=this.g.get(o);if(!c)throw new Error("Document NOT found");if(c.versionId!==i)throw new Error("Document version mismatch");if(!this.s.value.isWritableFileSystem(o.scheme))throw new c1(p(2725,null,this.A(o)),6);const l={metadata:E5(c.apiNotebook.metadata,g=>!(a.options?.transientDocumentMetadata??{})[g]),cells:[]};for(const g of c.apiNotebook.getCells()){const v=new ff(g.kind,g.document.getText(),g.document.languageId,g.mime,a.options?.transientOutputs?[]:[...g.outputs],g.metadata,g.executionSummary);v.metadata=E5(g.metadata,x=>!(a.options?.transientCellMetadata??{})[x]),l.cells.push(v)}if(await this.z(o,s),n.isCancellationRequested)throw new Error("canceled");const u=await a.serializer.serializeNotebook(l,n);if(n.isCancellationRequested)throw new Error("canceled");this.D(`serialized versionId: ${i} ${o.toString()}`),await this.s.value.writeFile(o,u),this.D(`Finished write versionId: ${i} ${o.toString()}`);const h=this.s.getFileSystemProviderExtUri(o.scheme),d=await this.s.value.stat(o),f={name:h.basename(o),isFile:(d.type&Gr.File)!==0,isDirectory:(d.type&Gr.Directory)!==0,isSymbolicLink:(d.type&Gr.SymbolicLink)!==0,mtime:d.mtime,ctime:d.ctime,size:d.size,readonly:!!((d.permissions??0)&kn.Readonly)||!this.s.value.isWritableFileSystem(o.scheme),locked:!!((d.permissions??0)&kn.Locked),etag:Dk({mtime:d.mtime,size:d.size}),children:void 0};return this.D(`exit saveNotebook(versionId: ${i}, ${o.toString()})`),f}async $searchInNotebooks(t,r,i,s,n){const o=this.y.get(t)?.serializer;if(!o)return{limitHit:!1,results:[]};const a=new Cy;await(async(d,f,g)=>{await Promise.all(d.map(async v=>await Promise.all(v.filenamePatterns.map(x=>{const $={_reason:g._reason,folderQueries:g.folderQueries,includePattern:g.includePattern,excludePattern:g.excludePattern,maxResults:g.maxResults,type:1,filePattern:x};return this.t.doInternalFileSearchWithCustomCallback($,f,C=>{C.forEach(L=>{a.has(L)||s.some(z=>v.isFromSettings&&!z.isFromSettings?!1:z.filenamePatterns.some(Y=>CU(Y,L)))||a.add(L)})}).catch(C=>{if(C.code==="ENOENT")return console.warn("Could not find notebook search results, ignoring notebook results."),{limitHit:!1,messages:[]};throw C})}))))})(i,n,r);const l=new rr;let u=!1;const h=Array.from(a).map(async d=>{const f=[];try{if(n.isCancellationRequested)return;if(r.maxResults&&[...l.values()].reduce(($,C)=>$+C.cellResults.length,0)>r.maxResults){u=!0;return}const g=[],v=this.g.get(d);if(v)v.apiNotebook.getCells().forEach(C=>g.push({input:C.document.getText(),outputs:C.outputs.flatMap(L=>L.items.map(F=>F.data.toString()))}));else{const $=await this.s.value.readFile(d),C=re.fromString($.toString()),L=await o.deserializeNotebook(C.buffer,n);if(n.isCancellationRequested)return;Ln.from(L).cells.forEach(z=>g.push({input:z.source,outputs:z.outputs.flatMap(Y=>Y.items.map(oe=>oe.valueBytes.toString()))}))}if(n.isCancellationRequested)return;g.forEach(($,C)=>{const L=r.contentPattern.pattern,F=new wU($.input,void 0,$.outputs),z=F.findInInputs(L),Y=F.findInOutputs(L),oe=Y.flatMap(Z=>VS(Z.matches,Z.textBuffer)).map((Z,se)=>(Z.webviewIndex=se,Z));if(z.length>0||Y.length>0){const Z={index:C,contentResults:VS(z,F.inputTextBuffer),webviewResults:oe};f.push(Z)}});const x={resource:d,cellResults:f};l.set(d,x);return}catch{return}});return await Promise.all(h),{limitHit:u,results:[...l.values()]}}async z(t,r){const i=await this.s.value.stat(t);if(typeof r?.mtime=="number"&&typeof r.etag=="string"&&r.etag!==ET&&typeof i.mtime=="number"&&typeof i.size=="number"&&r.mtime<i.mtime&&r.etag!==Dk({mtime:r.mtime,size:i.size}))throw new c1(p(2726,null),3,r)}A(t){return t.scheme===Q.file?t.fsPath:t.toString()}B(t,r,i){if(this.h.has(r))throw new Error(`editor with id ALREADY EXSIST: ${r}`);const s=new lb(r,this.d,t,i.visibleRanges.map(us.to),i.selections.map(us.to),typeof i.viewColumn=="number"?Gt.to(i.viewColumn):void 0,i.viewType);this.h.set(r,s)}$acceptDocumentAndEditorsDelta(t){if(t.value.removedDocuments)for(const i of t.value.removedDocuments){const s=k.revive(i),n=this.g.get(s);n&&(n.dispose(),this.g.delete(s),this.q.$acceptDocumentsAndEditorsDelta({removedDocuments:n.apiNotebook.getCells().map(o=>o.document.uri)}),this.n.fire(n.apiNotebook));for(const o of this.h.values())o.notebookData.uri.toString()===s.toString()&&this.h.delete(o.id)}if(t.value.addedDocuments){const i=[];for(const s of t.value.addedDocuments){const n=k.revive(s.uri);if(this.g.has(n))throw new Error(`adding EXISTING notebook ${n} `);const o=new oU(this.c,this.q,this.r,n,s);i.push(...s.cells.map(a=>cb.asModelAddData(a))),this.g.get(n)?.dispose(),this.g.set(n,o),this.q.$acceptDocumentsAndEditorsDelta({addedDocuments:i}),this.m.fire(o.apiNotebook)}}if(t.value.addedEditors)for(const i of t.value.addedEditors){if(this.h.has(i.id))return;const s=k.revive(i.documentUri),n=this.g.get(s);n&&this.B(n,i.id,i)}const r=[];if(t.value.removedEditors)for(const i of t.value.removedEditors){const s=this.h.get(i);s&&(this.h.delete(i),this.k?.id===s.id&&(this.k=void 0),r.push(s))}if(t.value.visibleEditors){this.l=t.value.visibleEditors.map(s=>this.h.get(s)).filter(s=>!!s);const i=new Set;this.l.forEach(s=>i.add(s.id));for(const s of this.h.values()){const n=i.has(s.id);s._acceptVisibility(n)}this.l=[...this.h.values()].map(s=>s).filter(s=>s.visible),this.o.fire(this.visibleNotebookEditors)}t.value.newActiveEditor===null?this.k=void 0:t.value.newActiveEditor&&(this.h.get(t.value.newActiveEditor)||console.error(`FAILED to find active notebook editor ${t.value.newActiveEditor}`),this.k=this.h.get(t.value.newActiveEditor)),t.value.newActiveEditor!==void 0&&this.j.fire(this.k?.apiEditor)}static C(t){const r=V.String.with("notebookType","A notebook type"),i=new Se("vscode.executeDataToNotebook","_executeDataToNotebook","Invoke notebook serializer",[r,new V("data","Bytes to convert to data",n=>n instanceof Uint8Array,n=>re.wrap(n))],new Ee("Notebook Data",n=>Ln.to(n.value))),s=new Se("vscode.executeNotebookToData","_executeNotebookToData","Invoke notebook serializer",[r,new V("NotebookData","Notebook data to convert to bytes",n=>!0,n=>new ei(Ln.from(n)))],new Ee("Bytes",n=>n.buffer));t.registerApiCommand(i),t.registerApiCommand(s)}D(t){this.u.trace(`[Extension Host Notebook] ${t}`)}},IU=class{constructor(e,t,r,i={timeout:1500,errors:3}){this.b=e,this.c=t,this.d=r,this.f=i,this.a=new Fc}dispose(){}getOnWillSaveNotebookDocumentEvent(e){return(t,r,i)=>{const s=function(o){t.call(r,o)};return s.extension=e,this.a.event(s,void 0,i)}}async $participateInSave(e,t,r){const i=k.revive(e),s=this.c.getNotebookDocument(i);if(!s)throw new Error("Unable to resolve notebook document");const n=[];if(await this.a.fireAsync({notebook:s.apiNotebook,reason:Gf.to(t)},r,async(a,c)=>{const l=Date.now(),u=await await Promise.resolve(a);Date.now()-l>this.f.timeout&&this.b.warn("onWillSaveNotebookDocument-listener from extension",c.extension.identifier),!r.isCancellationRequested&&u&&(u instanceof vo?n.push(u):this.b.warn("onWillSaveNotebookDocument-listener from extension",c.extension.identifier,"ignored due to invalid data"))}),r.isCancellationRequested)return!1;if(n.length===0)return!0;const o={edits:[]};for(const a of n){const{edits:c}=xr.from(a);o.edits=o.edits.concat(c)}return this.d.$tryApplyWorkspaceEdit(new ei(o))}},DU=class{constructor(e){this.c=e,this.a=new T,this.onDidSaveNotebookDocument=this.a.event,this.b=new T,this.onDidChangeNotebookDocument=this.b.event}$acceptModelChanged(e,t,r,i){const n=this.c.getNotebookDocument(k.revive(e)).acceptModelChanged(t.value,r,i);this.b.fire(n)}$acceptDirtyStateChanged(e,t){this.c.getNotebookDocument(k.revive(e)).acceptDirty(t)}$acceptModelSaved(e){const t=this.c.getNotebookDocument(k.revive(e));this.a.fire(t.apiNotebook)}},wb=class{constructor(t,r){this.c=t,this.d=r,this.a=new T,this.b=new T,this.onDidChangeNotebookEditorSelection=this.a.event,this.onDidChangeNotebookEditorVisibleRanges=this.b.event}$acceptEditorPropertiesChanged(t,r){this.c.debug("ExtHostNotebook#$acceptEditorPropertiesChanged",t,r);const i=this.d.getEditorById(t);r.visibleRanges&&i._acceptVisibleRanges(r.visibleRanges.ranges.map(us.to)),r.selections&&i._acceptSelections(r.selections.selections.map(us.to)),r.visibleRanges&&this.b.fire({notebookEditor:i.apiEditor,visibleRanges:i.apiEditor.visibleRanges}),r.selections&&this.a.fire(Object.freeze({notebookEditor:i.apiEditor,selections:i.apiEditor.selections}))}$acceptEditorViewColumns(t){for(const r in t)this.d.getEditorById(r)._acceptViewColumn(Gt.to(t[r]))}};wb=__decorate([__param(0,Ne)],wb);var gc;(function(e){e[e.Output=1]="Output",e[e.OutputItems=2]="OutputItems",e[e.ExecutionState=3]="ExecutionState"})(gc||(gc={}));var pJ=X("INotebookExecutionService"),AU=100,YS;(function(e){e[e.Disconnected=1]="Disconnected",e[e.Connected=2]="Connected",e[e.Initializing=3]="Initializing"})(YS||(YS={}));var gJ=X("INotebookKernelService"),mJ=X("INotebookKernelHistoryService"),bb=class{constructor(t,r,i,s,n){this.m=r,this.n=i,this.o=s,this.q=n,this.b=new rr,this.c=new rr,this.f=new Map,this.g=0,this.h=new Map,this.i=0,this.j=new Map,this.k=0,this.l=new T,this.onDidChangeNotebookCellExecutionState=this.l.event,this.r=0,this.s={},this.a=t.getProxy(K.MainThreadNotebookKernels);const o=new Se("notebook.selectKernel","_notebook.selectKernel","Trigger kernel picker for specified notebook editor widget",[new V("options","Select kernel options",c=>!0,c=>{if(c&&"notebookEditor"in c&&"id"in c){const l=this.n.getIdByEditor(c.notebookEditor);return{id:c.id,extension:c.extension,notebookEditorId:l}}else if(c&&"notebookEditor"in c){const l=this.n.getIdByEditor(c.notebookEditor);if(l===void 0)throw new Error(`Cannot invoke 'notebook.selectKernel' for unrecognized notebook editor ${c.notebookEditor.notebook.uri.toString()}`);return{notebookEditorId:l}}return c})],Ee.Void),a=new Se("vscode.executeNotebookVariableProvider","_executeNotebookVariableProvider","Execute notebook variable provider",[V.Uri],new Ee("A promise that resolves to an array of variables",(c,l)=>c.map(u=>({variable:{name:u.name,value:u.value,expression:u.expression,type:u.type,language:u.language},hasNamedChildren:u.hasNamedChildren,indexedChildrenCount:u.indexedChildrenCount}))));this.o.registerApiCommand(o),this.o.registerApiCommand(a)}createNotebookController(t,r,i,s,n,o){for(const z of this.j.values())if(z.controller.id===r&&rt.equals(t.identifier,z.extensionId))throw new Error(`notebook controller with id '${r}' ALREADY exist`);const a=this.k++,c=this;this.q.trace(`NotebookController[${a}], CREATED by ${t.identifier.value}, ${r}`);const l=()=>console.warn(`NO execute handler from notebook controller '${f.id}' of extension: '${t.identifier}'`);let u=!1;const h=new T,d=new T,f={id:fg(t.identifier,r),notebookType:i,extensionId:t.identifier,extensionLocation:t.extensionLocation,label:s||t.identifier.value,preloads:o?o.map(Zf.from):[]};let g=n??l,v,x;this.a.$addKernel(a,f).catch(z=>{console.log(z),u=!0});let $=0;const C=()=>{if(u)return;const z=++$;Promise.resolve().then(()=>{z===$&&this.a.$updateKernel(a,f)})},L=new rr,F={get id(){return r},get notebookType(){return f.notebookType},onDidChangeSelectedNotebooks:h.event,get label(){return f.label},set label(z){f.label=z??t.displayName??t.name,C()},get detail(){return f.detail??""},set detail(z){f.detail=z,C()},get description(){return f.description??""},set description(z){f.description=z,C()},get supportedLanguages(){return f.supportedLanguages},set supportedLanguages(z){f.supportedLanguages=z,C()},get supportsExecutionOrder(){return f.supportsExecutionOrder??!1},set supportsExecutionOrder(z){f.supportsExecutionOrder=z,C()},get rendererScripts(){return f.preloads?f.preloads.map(Zf.to):[]},get executeHandler(){return g},set executeHandler(z){g=z??l},get interruptHandler(){return v},set interruptHandler(z){v=z,f.supportsInterrupt=!!z,C()},set variableProvider(z){H(t,"notebookVariableProvider"),x=z,f.hasVariableProvider=!!z,z?.onDidChangeVariables(Y=>c.a.$variablesUpdated(Y.uri)),C()},get variableProvider(){return x},createNotebookCellExecution(z){if(u)throw new Error("notebook controller is DISPOSED");if(!L.has(z.notebook.uri))throw c.q.trace(`NotebookController[${a}] NOT associated to notebook, associated to THESE notebooks:`,Array.from(L.keys()).map(Y=>Y.toString())),new Error(`notebook controller is NOT associated to notebook: ${z.notebook.uri.toString()}`);return c._createNotebookCellExecution(z,fg(t.identifier,this.id))},createNotebookExecution(z){if(H(t,"notebookExecution"),u)throw new Error("notebook controller is DISPOSED");if(!L.has(z.uri))throw c.q.trace(`NotebookController[${a}] NOT associated to notebook, associated to THESE notebooks:`,Array.from(L.keys()).map(Y=>Y.toString())),new Error(`notebook controller is NOT associated to notebook: ${z.uri.toString()}`);return c._createNotebookExecution(z,fg(t.identifier,this.id))},dispose:()=>{u||(this.q.trace(`NotebookController[${a}], DISPOSED`),u=!0,this.j.delete(a),h.dispose(),d.dispose(),this.a.$removeKernel(a))},updateNotebookAffinity(z,Y){Y===vf.Hidden&&H(t,"notebookControllerAffinityHidden"),c.a.$updateNotebookPriority(a,z.uri,Y)},onDidReceiveMessage:d.event,postMessage(z,Y){return H(t,"notebookMessaging"),c.a.$postMessage(a,Y&&c.n.getIdByEditor(Y),z)},asWebviewUri(z){return H(t,"notebookMessaging"),Mu(z,c.m.remote)}};return this.j.set(a,{extensionId:t.identifier,controller:F,onDidReceiveMessage:d,onDidChangeSelection:h,associatedNotebooks:L}),F}getIdByController(t){for(const[r,i]of this.j)if(i.controller===t)return fg(i.extensionId,t.id);return null}createNotebookControllerDetectionTask(t,r){const i=this.g++,s=this;this.q.trace(`NotebookControllerDetectionTask[${i}], CREATED by ${t.identifier.value}`),this.a.$addKernelDetectionTask(i,r);const n={dispose:()=>{this.f.delete(i),s.a.$removeKernelDetectionTask(i)}};return this.f.set(i,n),n}registerKernelSourceActionProvider(t,r,i){const s=this.i++,n=typeof i.onDidChangeNotebookKernelSourceActions=="function"?s:void 0,o=this;this.h.set(s,i),this.q.trace(`NotebookKernelSourceActionProvider[${s}], CREATED by ${t.identifier.value}`),this.a.$addKernelSourceActionProvider(s,s,r);let a;return n!==void 0&&(a=i.onDidChangeNotebookKernelSourceActions(c=>this.a.$emitNotebookKernelSourceActionsChangeEvent(n))),{dispose:()=>{this.h.delete(s),o.a.$removeKernelSourceActionProvider(s,s),a?.dispose()}}}async $provideKernelSourceActions(t,r){const i=this.h.get(t);if(i){const s=new be;return(await i.provideNotebookKernelSourceActions(r)??[]).map(o=>Qv.from(o,this.o.converter,s))}return[]}$acceptNotebookAssociation(t,r,i){const s=this.j.get(t);if(s){const n=this.n.getNotebookDocument(k.revive(r));i?s.associatedNotebooks.set(n.uri,!0):s.associatedNotebooks.delete(n.uri),this.q.trace(`NotebookController[${t}] ASSOCIATE notebook`,n.uri.toString(),i),s.onDidChangeSelection.fire({selected:i,notebook:n.apiNotebook})}}async $executeCells(t,r,i){const s=this.j.get(t);if(!s)return;const n=this.n.getNotebookDocument(k.revive(r)),o=[];for(const a of i){const c=n.getCell(a);c&&o.push(c.apiCell)}try{this.q.trace(`NotebookController[${t}] EXECUTE cells`,n.uri.toString(),o.length),await s.controller.executeHandler.call(s.controller,o,n.apiNotebook,s.controller)}catch(a){this.q.error(`NotebookController[${t}] execute cells FAILED`,a),console.error(a)}}async $cancelCells(t,r,i){const s=this.j.get(t);if(!s)return;const n=this.n.getNotebookDocument(k.revive(r));if(s.controller.interruptHandler)await s.controller.interruptHandler.call(s.controller,n.apiNotebook);else for(const o of i){const a=n.getCell(o);a&&this.b.get(a.uri)?.cancel()}if(s.controller.interruptHandler){const o=this.c.get(n.uri);this.c.delete(n.uri),i.length&&Array.isArray(o)&&o.length&&o.forEach(a=>a.dispose())}}async $provideVariables(t,r,i,s,n,o,a){const c=this.j.get(t);if(!c)return;const l=this.n.getNotebookDocument(k.revive(i)),u=c.controller.variableProvider;if(!u)return;let h;if(s!==void 0){if(h=this.s[s],!h)return}else this.s={};const d=n==="named"?Bl.Named:Bl.Indexed,f=u.provideVariables(l.apiNotebook,h,d,o,a);let g=0;for await(const v of f){if(a.isCancellationRequested)return;const x={id:this.r++,name:v.variable.name,value:v.variable.value,type:v.variable.type,interfaces:v.variable.interfaces,language:v.variable.language,expression:v.variable.expression,hasNamedChildren:v.hasNamedChildren,indexedChildrenCount:v.indexedChildrenCount,extensionId:c.extensionId.value};if(this.s[x.id]=v.variable,this.a.$receiveVariable(r,x),g++>=AU)return}}$acceptKernelMessageFromRenderer(t,r,i){const s=this.j.get(t);if(!s)return;const n=this.n.getEditorById(r);s.onDidReceiveMessage.fire(Object.freeze({editor:n.apiEditor,message:i}))}$cellExecutionChanged(t,r,i){const n=this.n.getNotebookDocument(k.revive(t)).getCell(r);if(n){const o=i?Gv.to(i):Ba.Idle;o!==void 0&&this.l.fire({cell:n.apiCell,state:o})}}_createNotebookCellExecution(t,r){if(t.index<0)throw new Error("CANNOT execute cell that has been REMOVED from notebook");const s=this.n.getNotebookDocument(t.notebook.uri).getCellFromApiCell(t);if(!s)throw new Error("invalid cell");if(this.b.has(s.uri))throw new Error(`duplicate execution for ${s.uri}`);const n=new TU(r,s,this.a);this.b.set(s.uri,n);const o=n.onDidChangeState(()=>{n.state===qi.Resolved&&(n.dispose(),o.dispose(),this.b.delete(s.uri))});return n.asApiObject()}_createNotebookExecution(t,r){const i=this.n.getNotebookDocument(t.uri),s=t.getCells().find(a=>{const c=i.getCellFromApiCell(a);return c&&this.b.has(c.uri)});if(s)throw new Error(`duplicate cell execution for ${s.document.uri}`);if(this.c.has(i.uri))throw new Error(`duplicate notebook execution for ${i.uri}`);const n=new RU(r,i,this.a),o=n.onDidChangeState(()=>{n.state===Zs.Resolved&&(n.dispose(),o.dispose(),this.c.delete(i.uri))});return this.c.set(i.uri,[n,o]),n.asApiObject()}};bb=__decorate([__param(4,Ne)],bb);var qi;(function(e){e[e.Init=0]="Init",e[e.Started=1]="Started",e[e.Resolved=2]="Resolved"})(qi||(qi={}));var TU=class iC extends ae{static{this.a=0}get state(){return this.f}constructor(t,r,i){super(),this.m=r,this.n=i,this.b=iC.a++,this.c=new T,this.onDidChangeState=this.c.event,this.f=qi.Init,this.g=this.B(new wt),this.h=new LU(10,s=>this.s(s)),this.j=r.internalMetadata.executionOrder,this.n.$createExecution(this.b,t,this.m.notebook.uri,this.m.handle)}cancel(){this.g.cancel()}async r(t){await this.h.addItem(t)}async s(t){const r=Array.isArray(t)?t:[t];return this.n.$updateExecution(this.b,new ei(r))}t(){if(this.f===qi.Init)throw new Error("Must call start before modifying cell output");if(this.f===qi.Resolved)throw new Error("Cannot modify cell output after calling resolve")}w(t){let r=this.m;if(t&&(r=this.m.notebook.getCellFromApiCell(t)),!r)throw new Error("INVALID cell");return r.handle}y(t){return t.map(r=>{const i=pf.ensureUniqueMimeTypes(r.items,!0);return i===r.items?Nn.from(r):Nn.from({items:i,id:r.id,metadata:r.metadata})})}async z(t,r,i){const s=this.w(r),n=this.y(Ei(t));return this.r({editType:gc.Output,cellHandle:s,append:i,outputs:n})}async C(t,r,i){return t=pf.ensureUniqueMimeTypes(Ei(t),!0),this.r({editType:gc.OutputItems,items:t.map(Za.from),outputId:r.id,append:i})}asApiObject(){const t=this;return Object.freeze({get token(){return t.g.token},get cell(){return t.m.apiCell},get executionOrder(){return t.j},set executionOrder(i){t.j=i,t.s([{editType:gc.ExecutionState,executionOrder:t.j}])},start(i){if(t.f===qi.Resolved||t.f===qi.Started)throw new Error("Cannot call start again");t.f=qi.Started,t.c.fire(),t.s({editType:gc.ExecutionState,runStartTime:i})},end(i,s,n){if(t.f===qi.Resolved)throw new Error("Cannot call resolve twice");t.f=qi.Resolved,t.c.fire(),t.h.flush();const o=n?{message:n.message,stack:n.stack,location:n?.location?{startLineNumber:n.location.start.line,startColumn:n.location.start.character,endLineNumber:n.location.end.line,endColumn:n.location.end.character}:void 0,uri:n.uri}:void 0;t.n.$completeExecution(t.b,new ei({runEndTime:s,lastRunSuccess:i,error:o}))},clearOutput(i){return t.t(),t.z([],i,!1)},appendOutput(i,s){return t.t(),t.z(i,s,!0)},replaceOutput(i,s){return t.t(),t.z(i,s,!1)},appendOutputItems(i,s){return t.t(),t.C(i,s,!0)},replaceOutputItems(i,s){return t.t(),t.C(i,s,!1)}})}},Zs;(function(e){e[e.Init=0]="Init",e[e.Started=1]="Started",e[e.Resolved=2]="Resolved"})(Zs||(Zs={}));var RU=class sC extends ae{static{this.a=0}get state(){return this.f}constructor(t,r,i){super(),this.h=r,this.j=i,this.b=sC.a++,this.c=new T,this.onDidChangeState=this.c.event,this.f=Zs.Init,this.g=this.B(new wt),this.j.$createNotebookExecution(this.b,t,this.h.uri)}cancel(){this.g.cancel()}asApiObject(){return Object.freeze({start:()=>{if(this.f===Zs.Resolved||this.f===Zs.Started)throw new Error("Cannot call start again");this.f=Zs.Started,this.c.fire(),this.j.$beginNotebookExecution(this.b)},end:()=>{if(this.f===Zs.Resolved)throw new Error("Cannot call resolve twice");this.f=Zs.Resolved,this.c.fire(),this.j.$completeNotebookExecution(this.b)}})}},LU=class{constructor(e,t){this.f=e,this.g=t,this.a=[],this.b=Date.now()}addItem(e){return this.a.push(e),this.c||(this.c=new vn,this.b=Date.now(),br(this.f).then(()=>this.flush())),Date.now()-this.b>this.f?this.flush():this.c.p}flush(){if(this.a.length===0||!this.c)return Promise.resolve();const e=this.c;this.c=void 0;const t=this.a;return this.a=[],this.g(t).finally(()=>e.complete())}};function fg(e,t){return`${e.value}/${t}`}var NU=class{constructor(e,t){this.c=t,this.a=new Map,this.b=e.getProxy(K.MainThreadNotebookRenderers)}$postRendererMessage(e,t,r){const i=this.c.getEditorById(e);this.a.get(t)?.fire({editor:i.apiEditor,message:r})}createRendererMessaging(e,t){if(!e.contributes?.notebookRenderer?.some(i=>i.id===t))throw new Error(`Extensions may only call createRendererMessaging() for renderers they contribute (got ${t})`);return{onDidReceiveMessage:(i,s,n)=>this.d(t).event(i,s,n),postMessage:(i,s)=>{lb.apiEditorsToExtHost.has(i)&&([i,s]=[s,i]);const n=s&&lb.apiEditorsToExtHost.get(s);return this.b.$postMessage(n?.id,t,i)}}}d(e){let t=this.a.get(e);return t||(t=new T({onDidRemoveLastListener:()=>{t?.dispose(),this.a.delete(e)}}),this.a.set(e,t),t)}},FU=class{constructor(e){this.b=new Map,this.a=e.getProxy(K.MainThreadProfileContentHandlers)}registerProfileContentHandler(e,t,r){if(H(e,"profileContentHandlers"),this.b.has(t))throw new Error(`Handler with id '${t}' already registered`);return this.b.set(t,r),this.a.$registerProfileContentHandler(t,r.name,r.description,e.identifier.value),me(()=>{this.b.delete(t),this.a.$unregisterProfileContentHandler(t)})}async $saveProfile(e,t,r,i){const s=this.b.get(e);if(!s)throw new Error(`Unknown handler with id: ${e}`);return s.saveProfile(t,r,i)}async $readProfile(e,t,r){const i=this.b.get(e);if(!i)throw new Error(`Unknown handler with id: ${e}`);return i.readProfile(Me(t)?t:k.revive(t),r)}},OU=class{constructor(e){this.b=0,this.c=new Map,this.a=e}async withProgress(e,t,r){const i=this.b++,{title:s,location:n,cancellable:o}=t,a={label:e.displayName||e.name,id:e.identifier.value};return this.a.$startProgress(i,{location:Vv.from(n),title:s,source:a,cancellable:o},e.isUnderDevelopment?void 0:e.identifier.value).catch(Gg),this.d(i,r,!!o)}d(e,t,r){let i;r&&(i=new wt,this.c.set(e,i));const s=o=>{this.a.$progressEnd(o),this.c.delete(o),i?.dispose()};let n;try{n=t(new XS(this.a,e),r&&i?i.token:Ke.None)}catch(o){throw s(e),o}return n.then(o=>s(e),o=>s(e)),n}$acceptProgressCanceled(e){const t=this.c.get(e);t&&(t.cancel(),this.c.delete(e))}};function MU(e,t){return e.message=t.message,typeof t.increment=="number"&&(typeof e.increment=="number"?e.increment+=t.increment:e.increment=t.increment),e}var XS=class extends Pp{constructor(e,t){super(r=>this.throttledReport(r)),this.c=e,this.d=t}throttledReport(e){this.c.$progressReport(this.d,e)}};__decorate([P2(100,(e,t)=>MU(e,t),()=>Object.create(null))],XS.prototype,"throttledReport",null);var jU=class nC{static{this.a=0}constructor(t,r){this.d=r,this.c=new Map,this.b=t.getProxy(K.MainThreadQuickDiff)}$provideOriginalResource(t,r,i){const s=k.revive(r),n=this.c.get(t);return n?mr(()=>n.provideOriginalResource(s,i)).then(o=>o||null):Promise.resolve(null)}registerQuickDiffProvider(t,r,i,s){const n=nC.a++;return this.c.set(n,r),this.b.$registerQuickDiffProvider(n,Wa.from(t,this.d),i,s),{dispose:()=>{this.b.$unregisterQuickDiffProvider(n),this.c.delete(n)}}}};function UU(e,t,r){const i=e.getProxy(K.MainThreadQuickOpen);class s{constructor(f,g){this.e=new Map,this.f=0,this.a=f,this.b=g}showQuickPick(f,g,v,x=Ke.None){this.c=void 0;const $=Promise.resolve(g),C=++this.f,L=i.$show(C,{title:v?.title,placeHolder:v?.placeHolder,matchOnDescription:v?.matchOnDescription,matchOnDetail:v?.matchOnDetail,ignoreFocusLost:v?.ignoreFocusOut,canPickMany:v?.canPickMany},x),F={},z=L.then(()=>F);return Promise.race([z,$]).then(Y=>{if(Y===F)return;const oe=zt(f,"quickPickItemTooltip");return $.then(Z=>{const se=[];for(let Ae=0;Ae<Z.length;Ae++){const xe=Z[Ae];if(typeof xe=="string")se.push({label:xe,handle:Ae});else if(xe.kind===Hl.Separator)se.push({type:"separator",label:xe.label});else{xe.tooltip&&!oe&&console.warn(`Extension '${f.identifier.value}' uses a tooltip which is proposed API that is only available when running out of dev or with the following command line switch: --enable-proposed-api ${f.identifier.value}`);const tt=xe.iconPath?l(xe.iconPath):void 0;se.push({label:xe.label,iconPath:tt?.iconPath,iconClass:tt?.iconClass,description:xe.description,detail:xe.detail,picked:xe.picked,alwaysShow:xe.alwaysShow,tooltip:oe?Oe.fromStrict(xe.tooltip):void 0,handle:Ae})}}return v&&typeof v.onDidSelectItem=="function"&&(this.c=Ae=>{v.onDidSelectItem(Z[Ae])}),i.$setItems(C,se),L.then(Ae=>{if(typeof Ae=="number")return Z[Ae];if(Array.isArray(Ae))return Ae.map(xe=>Z[xe])})})}).then(void 0,Y=>{if(!ys(Y))return i.$setError(C,Y),Promise.reject(Y)})}$onItemSelected(f){this.c?.(f)}showInput(f,g=Ke.None){return this.d=f?.validateInput,i.$input(f,typeof this.d=="function",g).then(void 0,v=>{if(!ys(v))return Promise.reject(v)})}async $validateInput(f){if(!this.d)return;const g=await this.d(f);if(!g||typeof g=="string")return g;let v;switch(g.severity){case Ha.Info:v=Ut.Info;break;case Ha.Warning:v=Ut.Warning;break;case Ha.Error:v=Ut.Error;break;default:v=g.message?Ut.Error:Ut.Ignore;break}return{content:g.message,severity:v}}async showWorkspaceFolderPick(f,g=Ke.None){const v=await this.b.executeCommand("_workbench.pickWorkspaceFolder",[f]);if(!v)return;const x=await this.a.getWorkspaceFolders2();if(x)return x.find($=>$.uri.toString()===v.uri.toString())}createQuickPick(f){const g=new u(f,()=>this.e.delete(g._id));return this.e.set(g._id,g),g}createInputBox(f){const g=new h(f,()=>this.e.delete(g._id));return this.e.set(g._id,g),g}$onDidChangeValue(f,g){this.e.get(f)?._fireDidChangeValue(g)}$onDidAccept(f){this.e.get(f)?._fireDidAccept()}$onDidChangeActive(f,g){const v=this.e.get(f);v instanceof u&&v._fireDidChangeActive(g)}$onDidChangeSelection(f,g){const v=this.e.get(f);v instanceof u&&v._fireDidChangeSelection(g)}$onDidTriggerButton(f,g){this.e.get(f)?._fireDidTriggerButton(g)}$onDidTriggerItemButton(f,g,v){const x=this.e.get(f);x instanceof u&&x._fireDidTriggerItemButton(g,v)}$onDidHide(f){this.e.get(f)?._fireDidHide()}}class n{static{this.a=1}constructor(f,g){this.x=f,this.y=g,this._id=u.a++,this.e=!1,this.f=!1,this.g=!0,this.j=!1,this.k=!0,this.l="",this.n=[],this.o=new Map,this.p=new T,this.q=new T,this.r=new T,this.s=new T,this.u={id:this._id},this.v=!1,this.w=[this.r,this.s,this.p,this.q],this.onDidChangeValue=this.q.event,this.onDidAccept=this.p.event,this.onDidTriggerButton=this.r.event,this.onDidHide=this.s.event}get title(){return this.b}set title(f){this.b=f,this.z({title:f})}get step(){return this.c}set step(f){this.c=f,this.z({step:f})}get totalSteps(){return this.d}set totalSteps(f){this.d=f,this.z({totalSteps:f})}get enabled(){return this.g}set enabled(f){this.g=f,this.z({enabled:f})}get busy(){return this.j}set busy(f){this.j=f,this.z({busy:f})}get ignoreFocusOut(){return this.k}set ignoreFocusOut(f){this.k=f,this.z({ignoreFocusOut:f})}get value(){return this.l}set value(f){this.l=f,this.z({value:f})}get placeholder(){return this.m}set placeholder(f){this.m=f,this.z({placeholder:f})}get buttons(){return this.n}set buttons(f){const g=zt(this.x,"quickInputButtonLocation");!g&&f.some(v=>v.location)&&console.warn(`Extension '${this.x.identifier.value}' uses a button location which is proposed API that is only available when running out of dev or with the following command line switch: --enable-proposed-api ${this.x.identifier.value}`),this.n=f.slice(),this.o.clear(),f.forEach((v,x)=>{const $=v===Ul.Back?-1:x;this.o.set($,v)}),this.z({buttons:f.map((v,x)=>({...l(v.iconPath),tooltip:v.tooltip,handle:v===Ul.Back?-1:x,location:g?v.location:void 0}))})}show(){this.e=!0,this.f=!0,this.z({visible:!0})}hide(){this.e=!1,this.z({visible:!1})}_fireDidAccept(){this.p.fire()}_fireDidChangeValue(f){this.l=f,this.q.fire(f)}_fireDidTriggerButton(f){const g=this.o.get(f);g&&this.r.fire(g)}_fireDidHide(){this.f&&(this.f=this.e,this.s.fire())}dispose(){this.v||(this.v=!0,this._fireDidHide(),this.w=Si(this.w),this.t&&(clearTimeout(this.t),this.t=void 0),this.y(),i.$dispose(this._id))}z(f){if(!this.v){for(const g of Object.keys(f)){const v=f[g];this.u[g]=v===void 0?null:v}"visible"in this.u?(this.t&&(clearTimeout(this.t),this.t=void 0),this.A()):this.e&&!this.t&&(this.t=setTimeout(()=>{this.t=void 0,this.A()},0))}}A(){i.$createOrUpdate(this.u),this.u={id:this._id}}}function o(d){if(d instanceof vr)return{id:d.id};const f=c(d),g=a(d);return{dark:typeof f=="string"?k.file(f):f,light:typeof g=="string"?k.file(g):g}}function a(d){return typeof d=="object"&&"light"in d?d.light:d}function c(d){return typeof d=="object"&&"dark"in d?d.dark:d}function l(d){const f=o(d);let g,v;return"id"in f?v=or.asClassName(f):g=f,{iconPath:g,iconClass:v}}class u extends n{constructor(f,g){super(f,g),this.B=[],this.C=new Map,this.D=new Map,this.E=!1,this.F=!0,this.G=!0,this.H=!0,this.I=!1,this.J=[],this.K=new T,this.L=[],this.M=new T,this.N=new T,this.onDidChangeActive=this.K.event,this.onDidChangeSelection=this.M.event,this.onDidTriggerItemButton=this.N.event,this.w.push(this.K,this.M,this.N),this.z({type:"quickPick"})}get items(){return this.B}set items(f){this.B=f.slice(),this.C.clear(),this.D.clear(),f.forEach((x,$)=>{this.C.set($,x),this.D.set(x,$)});const g=zt(this.x,"quickPickItemTooltip"),v=[];for(let x=0;x<f.length;x++){const $=f[x];if($.kind===Hl.Separator)v.push({type:"separator",label:$.label});else{$.tooltip&&!g&&console.warn(`Extension '${this.x.identifier.value}' uses a tooltip which is proposed API that is only available when running out of dev or with the following command line switch: --enable-proposed-api ${this.x.identifier.value}`);const C=$.iconPath?l($.iconPath):void 0;v.push({handle:x,label:$.label,iconPath:C?.iconPath,iconClass:C?.iconClass,description:$.description,detail:$.detail,picked:$.picked,alwaysShow:$.alwaysShow,tooltip:g?Oe.fromStrict($.tooltip):void 0,buttons:$.buttons?.map((L,F)=>({...l(L.iconPath),tooltip:L.tooltip,handle:F}))})}}this.z({items:v})}get canSelectMany(){return this.E}set canSelectMany(f){this.E=f,this.z({canSelectMany:f})}get matchOnDescription(){return this.F}set matchOnDescription(f){this.F=f,this.z({matchOnDescription:f})}get matchOnDetail(){return this.G}set matchOnDetail(f){this.G=f,this.z({matchOnDetail:f})}get sortByLabel(){return this.H}set sortByLabel(f){this.H=f,this.z({sortByLabel:f})}get keepScrollPosition(){return this.I}set keepScrollPosition(f){this.I=f,this.z({keepScrollPosition:f})}get activeItems(){return this.J}set activeItems(f){this.J=f.filter(g=>this.D.has(g)),this.z({activeItems:this.J.map(g=>this.D.get(g))})}get selectedItems(){return this.L}set selectedItems(f){this.L=f.filter(g=>this.D.has(g)),this.z({selectedItems:this.L.map(g=>this.D.get(g))})}_fireDidChangeActive(f){const g=Rt(f.map(v=>this.C.get(v)));this.J=g,this.K.fire(g)}_fireDidChangeSelection(f){const g=Rt(f.map(v=>this.C.get(v)));this.L=g,this.M.fire(g)}_fireDidTriggerItemButton(f,g){const v=this.C.get(f);if(!v||!v.buttons||!v.buttons.length)return;const x=v.buttons[g];x&&this.N.fire({button:x,item:v})}}class h extends n{constructor(f,g){super(f,g),this.B=!1,this.z({type:"inputBox"})}get password(){return this.B}set password(f){this.B=f,this.z({password:f})}get prompt(){return this.C}set prompt(f){this.C=f,this.z({prompt:f})}get valueSelection(){return this.D}set valueSelection(f){this.D=f,this.z({valueSelection:f})}get validationMessage(){return this.E}set validationMessage(f){this.E=f,f?typeof f=="string"?this.z({validationMessage:f,severity:Ut.Error}):this.z({validationMessage:f.message,severity:f.severity??Ut.Error}):this.z({validationMessage:void 0,severity:Ut.Ignore})}}return new s(t,r)}var yb;function ZS(e){return e instanceof k}function HU(e,t){return e.scheme===Q.file&&t.scheme===Q.file&&Ot?e.toString()===t.toString():e.toString().toLowerCase()===t.toString().toLowerCase()}function kb(e){if(e)return typeof e.iconPath=="string"?k.file(e.iconPath):k.isUri(e.iconPath)||or.isThemeIcon(e.iconPath)?e.iconPath:void 0}function mc(e){if(e){if(k.isUri(e))return e;if(or.isThemeIcon(e))return e;{const t=e;return{light:t.light,dark:t.dark}}}else return}function BU(e){const t=e.references?.map(r=>({...r,icon:mc(r.icon)}));return{...e,references:t}}function xb(e){return e?{...e,icon:mc(e.icon)}:void 0}function Eb(e,t){if(!e.iconPath&&!t.iconPath)return 0;if(e.iconPath){if(!t.iconPath)return 1}else return-1;const r=typeof e.iconPath=="string"?e.iconPath:k.isUri(e.iconPath)?e.iconPath.fsPath:e.iconPath.id,i=typeof t.iconPath=="string"?t.iconPath:k.isUri(t.iconPath)?t.iconPath.fsPath:t.iconPath.id;return Vp(r,i)}function zU(e,t){let r=0;if(e.strikeThrough!==t.strikeThrough)return e.strikeThrough?1:-1;if(e.faded!==t.faded)return e.faded?1:-1;if(e.tooltip!==t.tooltip)return(e.tooltip||"").localeCompare(t.tooltip||"");if(r=Eb(e,t),r!==0)return r;if(e.light&&t.light)r=Eb(e.light,t.light);else{if(e.light)return 1;if(t.light)return-1}if(r!==0)return r;if(e.dark&&t.dark)r=Eb(e.dark,t.dark);else{if(e.dark)return 1;if(t.dark)return-1}return r}function _U(e,t){if(e.command!==t.command)return e.command<t.command?-1:1;if(e.title!==t.title)return e.title<t.title?-1:1;if(e.tooltip!==t.tooltip){if(e.tooltip!==void 0&&t.tooltip!==void 0)return e.tooltip<t.tooltip?-1:1;if(e.tooltip!==void 0)return 1;if(t.tooltip!==void 0)return-1}if(e.arguments===t.arguments)return 0;if(e.arguments)if(t.arguments){if(e.arguments.length!==t.arguments.length)return e.arguments.length-t.arguments.length}else return 1;else return-1;for(let r=0;r<e.arguments.length;r++){const i=e.arguments[r],s=t.arguments[r];if(i!==s&&!(ZS(i)&&ZS(s)&&HU(i,s)))return i<s?-1:1}return 0}function KS(e,t){let r=Vp(e.resourceUri.fsPath,t.resourceUri.fsPath,!0);if(r!==0)return r;if(e.command&&t.command)r=_U(e.command,t.command);else{if(e.command)return 1;if(t.command)return-1}if(r!==0)return r;if(e.decorations&&t.decorations)r=zU(e.decorations,t.decorations);else{if(e.decorations)return 1;if(t.decorations)return-1}if(r!==0)return r;if(e.multiFileDiffEditorModifiedUri&&t.multiFileDiffEditorModifiedUri)r=Vp(e.multiFileDiffEditorModifiedUri.fsPath,t.multiFileDiffEditorModifiedUri.fsPath,!0);else{if(e.multiFileDiffEditorModifiedUri)return 1;if(t.multiFileDiffEditorModifiedUri)return-1}if(r!==0)return r;if(e.multiDiffEditorOriginalUri&&t.multiDiffEditorOriginalUri)r=Vp(e.multiDiffEditorOriginalUri.fsPath,t.multiDiffEditorOriginalUri.fsPath,!0);else{if(e.multiDiffEditorOriginalUri)return 1;if(t.multiDiffEditorOriginalUri)return-1}return r}function WU(e,t){for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function VU(e,t){return e.command===t.command&&e.title===t.title&&e.tooltip===t.tooltip&&(e.arguments&&t.arguments?WU(e.arguments,t.arguments):e.arguments===t.arguments)}function qU(e,t){return Xi(e,t,VU)}var GU=class{#e;#t;get value(){return this.d}set value(e){e=e??"",this.#e.$setInputBoxValue(this.m,e),this.o(e)}get onDidChange(){return this.f.event}get placeholder(){return this.g}set placeholder(e){this.#e.$setInputBoxPlaceholder(this.m,e),this.g=e}get validateInput(){return H(this.l,"scmValidation"),this.h}set validateInput(e){if(H(this.l,"scmValidation"),e&&typeof e!="function")throw new Error(`[${this.l.identifier.value}]: Invalid SCM input box validation function`);this.h=e,this.#e.$setValidationProviderIsEnabled(this.m,!!e)}get enabled(){return this.j}set enabled(e){e=!!e,this.j!==e&&(this.j=e,this.#e.$setInputBoxEnablement(this.m,e))}get visible(){return this.k}set visible(e){e=!!e,this.k!==e&&(this.k=e,this.#e.$setInputBoxVisibility(this.m,e))}get document(){return H(this.l,"scmTextDocument"),this.#t.getDocument(this.n)}constructor(e,t,r,i,s){this.l=e,this.m=i,this.n=s,this.d="",this.f=new T,this.g="",this.j=!0,this.k=!0,this.#t=t,this.#e=r}showValidationMessage(e,t){H(this.l,"scmValidation"),this.#e.$showValidationMessage(this.m,e,t)}$onInputBoxValueChange(e){this.o(e)}o(e){this.d=e,this.f.fire(e)}},JU=class oC{static{this.d=0}get disposed(){return this.m}get id(){return this.v}get label(){return this.w}set label(t){this.w=t,this.s.$updateGroupLabel(this.u,this.handle,t)}get hideWhenEmpty(){return this.q}set hideWhenEmpty(t){this.q=t,this.s.$updateGroup(this.u,this.handle,this.features)}get features(){return{hideWhenEmpty:this.hideWhenEmpty}}get resourceStates(){return[...this.g]}set resourceStates(t){this.g=[...t],this.l.fire()}constructor(t,r,i,s,n,o,a){this.s=t,this.t=r,this.u=i,this.v=s,this.w=n,this.multiDiffEditorEnableViewChanges=o,this.x=a,this.f=0,this.g=[],this.h=new Map,this.j=new Map,this.k=new Map,this.l=new T,this.onDidUpdateResourceStates=this.l.event,this.m=!1,this.n=new T,this.onDidDispose=this.n.event,this.o=[],this.p=[],this.q=void 0,this.handle=oC.d++}getResourceState(t){return this.h.get(t)}$executeResourceCommand(t,r){const i=this.j.get(t);return i?mr(()=>this.t.executeCommand(i.command,...i.arguments||[],r)):Promise.resolve(void 0)}_takeResourceStateSnapshot(){const t=[...this.g].sort(KS),i=yy(this.p,t,KS).map(o=>{const a=o.toInsert.map(c=>{const l=this.f++;this.h.set(l,c);const u=c.resourceUri;let h;if(c.command)if(c.command.command==="vscode.open"||c.command.command==="vscode.diff"||c.command.command==="vscode.changes"){const Z=new be;h=this.t.converter.toInternal(c.command,Z),this.k.set(l,Z)}else this.j.set(l,c.command);const d=zt(this.x,"scmMultiDiffEditor"),f=d?c.multiDiffEditorOriginalUri:void 0,g=d?c.multiFileDiffEditorModifiedUri:void 0,v=kb(c.decorations),x=c.decorations&&kb(c.decorations.light)||v,$=c.decorations&&kb(c.decorations.dark)||v,C=[x,$],L=c.decorations&&c.decorations.tooltip||"",F=c.decorations&&!!c.decorations.strikeThrough,z=c.decorations&&!!c.decorations.faded,Y=c.contextValue||"";return{rawResource:[l,u,C,L,F,z,Y,h,f,g],handle:l}});return{start:o.start,deleteCount:o.deleteCount,toInsert:a}}),s=i.map(({start:o,deleteCount:a,toInsert:c})=>[o,a,c.map(l=>l.rawResource)]),n=i.reverse();for(const{start:o,deleteCount:a,toInsert:c}of n){const l=c.map(h=>h.handle),u=this.o.splice(o,a,...l);for(const h of u)this.h.delete(h),this.j.delete(h),this.k.get(h)?.dispose(),this.k.delete(h)}return this.p=t,s}dispose(){this.m=!0,this.n.fire()}},Sb=class aC{static{this.d=0}#e;get id(){return this.z}get label(){return this.A}get rootUri(){return this.B}get inputBox(){return this.g}get count(){return this.h}set count(t){this.h!==t&&(this.h=t,this.#e.$updateSourceControl(this.w,{count:t}))}get quickDiffProvider(){return this.j}set quickDiffProvider(t){this.j=t;let r;zt(this.x,"quickDiffProvider")&&(r=t?.label),this.#e.$updateSourceControl(this.w,{hasQuickDiffProvider:!!t,quickDiffLabel:r})}get historyProvider(){return H(this.x,"scmHistoryProvider"),this.k}set historyProvider(t){H(this.x,"scmHistoryProvider"),this.k=t,this.l.value=new be,this.#e.$updateSourceControl(this.w,{hasHistoryProvider:!!t}),t&&(this.l.value.add(t.onDidChangeCurrentHistoryItemRefs(()=>{const r=xb(t?.currentHistoryItemRef),i=xb(t?.currentHistoryItemRemoteRef),s=xb(t?.currentHistoryItemBaseRef);this.#e.$onDidChangeHistoryProviderCurrentHistoryItemRefs(this.w,r,i,s)})),this.l.value.add(t.onDidChangeHistoryItemRefs(r=>{if(r.added.length===0&&r.modified.length===0&&r.removed.length===0)return;const i=r.added.map(o=>({...o,icon:mc(o.icon)})),s=r.modified.map(o=>({...o,icon:mc(o.icon)})),n=r.removed.map(o=>({...o,icon:mc(o.icon)}));this.#e.$onDidChangeHistoryProviderHistoryItemRefs(this.w,{added:i,modified:s,removed:n,silent:r.silent})})))}get commitTemplate(){return this.m}set commitTemplate(t){t!==this.m&&(this.m=t,this.#e.$updateSourceControl(this.w,{commitTemplate:t}))}get acceptInputCommand(){return this.o}set acceptInputCommand(t){this.n.value=new be,this.o=t;const r=this.y.converter.toInternal(t,this.n.value);this.#e.$updateSourceControl(this.w,{acceptInputCommand:r})}get actionButton(){return H(this.x,"scmActionButton"),this.q}set actionButton(t){H(this.x,"scmActionButton"),this.p.value=new be,this.q=t;const r=t!==void 0?{command:this.y.converter.toInternal(t.command,this.p.value),secondaryCommands:t.secondaryCommands?.map(i=>i.map(s=>this.y.converter.toInternal(s,this.p.value))),description:t.description,enabled:t.enabled}:void 0;this.#e.$updateSourceControl(this.w,{actionButton:r??null})}get statusBarCommands(){return this.t}set statusBarCommands(t){if(this.t&&t&&qU(this.t,t))return;this.s.value=new be,this.t=t;const r=(t||[]).map(i=>this.y.converter.toInternal(i,this.s.value));this.#e.$updateSourceControl(this.w,{statusBarCommands:r})}get selected(){return this.u}constructor(t,r,i,s,n,o,a){this.x=t,this.y=s,this.z=n,this.A=o,this.B=a,this.f=new Map,this.h=void 0,this.j=void 0,this.l=new ks,this.m=void 0,this.n=new ks,this.o=void 0,this.p=new ks,this.s=new ks,this.t=void 0,this.u=!1,this.v=new T,this.onDidChangeSelection=this.v.event,this.w=aC.d++,this.C=new Map,this.D=new Set,this.#e=i;const c=k.from({scheme:Q.vscodeSourceControl,path:`${n}/scm${this.w}/input`,query:a?`rootUri=${encodeURIComponent(a.toString())}`:void 0});this.g=new GU(t,r,this.#e,this.w,c),this.#e.$registerSourceControl(this.w,n,o,a,c)}createResourceGroup(t,r,i){const s=zt(this.x,"scmMultiDiffEditor")&&i?.multiDiffEditorEnableViewChanges===!0,n=new JU(this.#e,this.y,this.w,t,r,s,this.x),o=Qe.once(n.onDidDispose)(()=>this.C.delete(n));return this.C.set(n,o),this.eventuallyAddResourceGroups(),n}eventuallyAddResourceGroups(){const t=[],r=[];for(const[i,s]of this.C){s.dispose();const n=i.onDidUpdateResourceStates(()=>{this.D.add(i),this.eventuallyUpdateResourceStates()});Qe.once(i.onDidDispose)(()=>{this.D.delete(i),n.dispose(),this.f.delete(i.handle),this.#e.$unregisterGroup(this.w,i.handle)}),t.push([i.handle,i.id,i.label,i.features,i.multiDiffEditorEnableViewChanges]);const o=i._takeResourceStateSnapshot();o.length>0&&r.push([i.handle,o]),this.f.set(i.handle,i)}this.#e.$registerGroups(this.w,t,r),this.C.clear()}eventuallyUpdateResourceStates(){const t=[];this.D.forEach(r=>{const i=r._takeResourceStateSnapshot();i.length!==0&&t.push([r.handle,i])}),t.length>0&&this.#e.$spliceResourceStates(this.w,t),this.D.clear()}getResourceGroup(t){return this.f.get(t)}setSelectionState(t){this.u=t,this.v.fire(t)}dispose(){this.n.dispose(),this.p.dispose(),this.s.dispose(),this.f.forEach(t=>t.dispose()),this.#e.$unregisterSourceControl(this.w)}};__decorate([zh(100)],Sb.prototype,"eventuallyAddResourceGroups",null),__decorate([zh(100)],Sb.prototype,"eventuallyUpdateResourceStates",null);var $b=class{static{yb=this}static{this.d=0}get onDidChangeActiveProvider(){return this.k.event}constructor(t,r,i,s){this.m=r,this.n=i,this.o=s,this.h=new Map,this.j=new Os,this.k=new T,this.f=t.getProxy(K.MainThreadSCM),this.g=t.getProxy(K.MainThreadTelemetry),r.registerArgumentProcessor({processArgument:n=>{if(n&&n.$mid===3){const o=this.h.get(n.sourceControlHandle);if(!o)return n;const a=o.getResourceGroup(n.groupHandle);return a?a.getResourceState(n.handle):n}else if(n&&n.$mid===4){const o=this.h.get(n.sourceControlHandle);return o?o.getResourceGroup(n.groupHandle):n}else if(n&&n.$mid===5){const o=this.h.get(n.handle);return o||n}return n}})}createSourceControl(t,r,i,s){this.o.trace("ExtHostSCM#createSourceControl",t.identifier.value,r,i,s),this.g.$publicLog2("api/scm/createSourceControl",{extensionId:t.identifier.value});const n=yb.d++,o=new Sb(t,this.n,this.f,this.m,r,i,s);this.h.set(n,o);const a=this.j.get(t.identifier)||[];return a.push(o),this.j.set(t.identifier,a),o}getLastInputBox(t){this.o.trace("ExtHostSCM#getLastInputBox",t.identifier.value);const r=this.j.get(t.identifier),i=r&&r[r.length-1];return i&&i.inputBox}$provideOriginalResource(t,r,i){const s=k.revive(r);this.o.trace("ExtHostSCM#$provideOriginalResource",t,s.toString());const n=this.h.get(t);return!n||!n.quickDiffProvider||!n.quickDiffProvider.provideOriginalResource?Promise.resolve(null):mr(()=>n.quickDiffProvider.provideOriginalResource(s,i)).then(o=>o||null)}$onInputBoxValueChange(t,r){this.o.trace("ExtHostSCM#$onInputBoxValueChange",t);const i=this.h.get(t);return i&&i.inputBox.$onInputBoxValueChange(r),Promise.resolve(void 0)}$executeResourceCommand(t,r,i,s){this.o.trace("ExtHostSCM#$executeResourceCommand",t,r,i);const n=this.h.get(t);if(!n)return Promise.resolve(void 0);const o=n.getResourceGroup(r);return o?o.$executeResourceCommand(i,s):Promise.resolve(void 0)}$validateInput(t,r,i){this.o.trace("ExtHostSCM#$validateInput",t);const s=this.h.get(t);return!s||!s.inputBox.validateInput?Promise.resolve(void 0):mr(()=>s.inputBox.validateInput(r,i)).then(n=>{if(!n)return Promise.resolve(void 0);const o=Oe.fromStrict(n.message);return o?Promise.resolve([o,n.type]):Promise.resolve(void 0)})}$setSelectedSourceControl(t){return this.o.trace("ExtHostSCM#$setSelectedSourceControl",t),t!==void 0&&this.h.get(t)?.setSelectionState(!0),this.l!==void 0&&this.h.get(this.l)?.setSelectionState(!1),this.l=t,Promise.resolve(void 0)}async $resolveHistoryItemRefsCommonAncestor(t,r,i){return await this.h.get(t)?.historyProvider?.resolveHistoryItemRefsCommonAncestor(r,i)??void 0}async $provideHistoryItemRefs(t,r,i){return(await this.h.get(t)?.historyProvider?.provideHistoryItemRefs(r,i))?.map(o=>({...o,icon:mc(o.icon)}))??void 0}async $provideHistoryItems(t,r,i){return(await this.h.get(t)?.historyProvider?.provideHistoryItems(r,i))?.map(o=>BU(o))??void 0}async $provideHistoryItemChanges(t,r,i,s){return await this.h.get(t)?.historyProvider?.provideHistoryItemChanges(r,i,s)??void 0}};$b=yb=__decorate([__param(3,Ne)],$b);var QU=class cC{static{this.a=0}constructor(t,r){this.d=r,this.c=new Map,this.b=t.getProxy(K.MainThreadShare)}async $provideShare(t,r,i){return await this.c.get(t)?.provideShare({selection:W.to(r.selection),resourceUri:k.revive(r.resourceUri)},i)??void 0}registerShareProvider(t,r){const i=cC.a++;return this.c.set(i,r),this.b.$registerShareProvider(i,Wa.from(t,this.d),r.id,r.label,r.priority),{dispose:()=>{this.b.$unregisterShareProvider(i),this.c.delete(i)}}}},YU=class lC{static{this.a=1}constructor(t){this.c=new Map,this.d=new Map,this.f=new Map,this.b=t.getProxy(K.MainThreadSpeech)}async $createSpeechToTextSession(t,r,i){const s=this.c.get(t);if(!s)return;const n=new be,o=new wt;this.d.set(r,o);const a=await s.provideSpeechToTextSession(o.token,i?{language:i}:void 0);a&&(n.add(a.onDidChange(c=>{o.token.isCancellationRequested||this.b.$emitSpeechToTextEvent(r,c)})),n.add(o.token.onCancellationRequested(()=>n.dispose())))}async $cancelSpeechToTextSession(t){this.d.get(t)?.dispose(!0),this.d.delete(t)}async $createTextToSpeechSession(t,r,i){const s=this.c.get(t);if(!s)return;const n=new be,o=new wt;this.d.set(r,o);const a=await s.provideTextToSpeechSession(o.token,i?{language:i}:void 0);a&&(this.f.set(r,a),n.add(a.onDidChange(c=>{o.token.isCancellationRequested||this.b.$emitTextToSpeechEvent(r,c)})),n.add(o.token.onCancellationRequested(()=>n.dispose())))}async $synthesizeSpeech(t,r){this.f.get(t)?.synthesize(r)}async $cancelTextToSpeechSession(t){this.d.get(t)?.dispose(!0),this.d.delete(t),this.f.delete(t)}async $createKeywordRecognitionSession(t,r){const i=this.c.get(t);if(!i)return;const s=new be,n=new wt;this.d.set(r,n);const o=await i.provideKeywordRecognitionSession(n.token);o&&(s.add(o.onDidChange(a=>{n.token.isCancellationRequested||this.b.$emitKeywordRecognitionEvent(r,a)})),s.add(n.token.onCancellationRequested(()=>s.dispose())))}async $cancelKeywordRecognitionSession(t){this.d.get(t)?.dispose(!0),this.d.delete(t)}registerProvider(t,r,i){const s=lC.a++;return this.c.set(s,i),this.b.$registerProvider(s,r,{extension:t,displayName:t.value}),me(()=>{this.b.$unregisterProvider(s),this.c.delete(s)})}},XU=class zg{static{this.a=0}static{this.b=new Map([["statusBarItem.errorBackground",new Al("statusBarItem.errorForeground")],["statusBarItem.warningBackground",new Al("statusBarItem.warningForeground")]])}#e;#t;constructor(t,r,i,s,n,o=In.Left,a){if(this.i=!1,this.k="",this.q=new be,this.#e=t,this.#t=r,n&&s){this.c=xL(s.identifier,n);const c=i.get(this.c);c&&(o=c.alignLeft?In.Left:In.Right,a=c.priority,this.j=!0,this.name=c.name,this.text=c.text,this.tooltip=c.tooltip,this.command=c.command,this.accessibilityInformation=c.accessibilityInformation)}else this.c=String(zg.a++);this.e=s,this.f=n,this.g=o,this.h=this.u(a)}u(t){if(li(t))return t===Number.POSITIVE_INFINITY?Number.MAX_VALUE:t===Number.NEGATIVE_INFINITY?-Number.MAX_VALUE:t}get id(){return this.f??this.e.identifier.value}get alignment(){return this.g}get priority(){return this.h}get text(){return this.k}get name(){return this.m}get tooltip(){return this.l}get color(){return this.n}get backgroundColor(){return this.o}get command(){return this.r?.fromApi}get accessibilityInformation(){return this.t}set text(t){this.k=t,this.v()}set name(t){this.m=t,this.v()}set tooltip(t){this.l=t,this.v()}set color(t){this.n=t,this.v()}set backgroundColor(t){t&&!zg.b.has(t.id)&&(t=void 0),this.o=t,this.v()}set command(t){this.r?.fromApi!==t&&(this.p&&this.q.add(this.p),this.p=new be,typeof t=="string"?this.r={fromApi:t,internal:this.#t.toInternal({title:"",command:t},this.p)}:t?this.r={fromApi:t,internal:this.#t.toInternal(t,this.p)}:this.r=void 0,this.v())}set accessibilityInformation(t){this.t=t,this.v()}show(){this.j=!0,this.v()}hide(){clearTimeout(this.s),this.j=!1,this.#e.$disposeEntry(this.c)}v(){this.i||!this.j||(clearTimeout(this.s),this.s=setTimeout(()=>{this.s=void 0;let t;this.e?this.f?t=`${this.e.identifier.value}.${this.f}`:t=this.e.identifier.value:t=this.f;let r;this.m?r=this.m:r=p(2727,null,this.e.displayName||this.e.name);let i=this.n;this.o&&(i=zg.b.get(this.o.id));const s=Oe.fromStrict(this.l);this.#e.$setEntry(this.c,t,this.e?.identifier.value,r,this.k,s,this.r?.internal,i,this.o,this.g===In.Left,this.h,this.t),this.q.clear()},0))}dispose(){this.hide(),this.i=!0}},ZU=class{constructor(e){this.b=[],this.a=e.createStatusBarEntry(void 0,"status.extensionMessage",In.Left,Number.MIN_VALUE),this.a.name=p(2728,null)}dispose(){this.b.length=0,this.a.dispose()}setMessage(e){const t={message:e};return this.b.unshift(t),this.c(),new _e(()=>{const r=this.b.indexOf(t);r>=0&&(this.b.splice(r,1),this.c())})}c(){this.b.length>0?(this.a.text=this.b[0].message,this.a.show()):this.a.hide()}},KU=class{constructor(e,t){this.e=new Map,this.a=e.getProxy(K.MainThreadStatusBar),this.b=t,this.c=new ZU(this)}$acceptStaticEntries(e){for(const t of e)this.e.set(t.entryId,t)}createStatusBarEntry(e,t,r,i){return new XU(this.a,this.b,this.e,e,t,r,i)}setStatusBarMessage(e,t){const r=this.c.setMessage(e);let i;return typeof t=="number"?i=setTimeout(()=>r.dispose(),t):typeof t<"u"&&t.then(()=>r.dispose(),()=>r.dispose()),new _e(()=>{r.dispose(),clearTimeout(i)})}},eH=class extends ae{constructor(e,t){super(),this.m=t,this.a=new T,this.b=new T,this.c=new T,this.f=new T,this.g=new T,this.h=new T,this.onDidChangeTextEditorSelection=this.a.event,this.onDidChangeTextEditorOptions=this.b.event,this.onDidChangeTextEditorVisibleRanges=this.c.event,this.onDidChangeTextEditorViewColumn=this.f.event,this.onDidChangeActiveTextEditor=this.g.event,this.onDidChangeVisibleTextEditors=this.h.event,this.j=e.getProxy(K.MainThreadTextEditors),this.B(this.m.onDidChangeVisibleTextEditors(r=>this.h.fire(r))),this.B(this.m.onDidChangeActiveTextEditor(r=>this.g.fire(r)))}getActiveTextEditor(){return this.m.activeEditor()}getVisibleTextEditors(e){const t=this.m.allEditors();return e?t:t.map(r=>r.value)}async showTextDocument(e,t,r){let i;typeof t=="number"?i={position:Gt.from(t),preserveFocus:r}:typeof t=="object"?i={position:Gt.from(t.viewColumn),preserveFocus:t.preserveFocus,selection:typeof t.selection=="object"?W.from(t.selection):void 0,pinned:typeof t.preview=="boolean"?!t.preview:void 0}:i={preserveFocus:!1};const s=await this.j.$tryShowTextDocument(e.uri,i),n=s&&this.m.getEditor(s);if(n)return n.value;throw s?new Error(`Could NOT open editor for "${e.uri.toString()}" because another editor opened in the meantime.`):new Error(`Could NOT open editor for "${e.uri.toString()}".`)}createTextEditorDecorationType(e,t){return new LF(this.j,e,t).value}$acceptEditorPropertiesChanged(e,t){const r=this.m.getEditor(e);if(!r)throw new Error("unknown text editor");if(t.options&&r._acceptOptions(t.options),t.selections){const i=t.selections.selections.map(Ui.to);r._acceptSelections(i)}if(t.visibleRanges){const i=Rt(t.visibleRanges.map(W.to));r._acceptVisibleRanges(i)}if(t.options&&this.b.fire({textEditor:r.value,options:{...t.options,lineNumbers:Qa.to(t.options.lineNumbers)}}),t.selections){const i=Da.fromValue(t.selections.source),s=t.selections.selections.map(Ui.to);this.a.fire({textEditor:r.value,selections:s,kind:i})}if(t.visibleRanges){const i=Rt(t.visibleRanges.map(W.to));this.c.fire({textEditor:r.value,visibleRanges:i})}}$acceptEditorPositionData(e){for(const t in e){const r=this.m.getEditor(t);if(!r)throw new Error("Unknown text editor");const i=Gt.to(e[t]);r.value.viewColumn!==i&&(r._acceptViewColumn(i),this.f.fire({textEditor:r.value,viewColumn:i}))}}getDiffInformation(e){return Promise.resolve(this.j.$getDiffInformation(e))}},Cb=class{constructor(t){this.a=new df(An.Dark),this.b=new T}get activeColorTheme(){return this.a}$onColorThemeChange(t){let r;switch(t){case"light":r=An.Light;break;case"hcDark":r=An.HighContrast;break;case"hcLight":r=An.HighContrastLight;break;default:r=An.Dark}this.a=new df(r),this.b.fire(this.a)}get onDidChangeActiveColorTheme(){return this.b.event}};Cb=__decorate([__param(0,Ue)],Cb);var yJ=X("IExtHostTimeline"),tH=class{constructor(e,t){this.b=new Map,this.c=new Map,this.a=e.getProxy(K.MainThreadTimeline),t.registerArgumentProcessor({processArgument:(r,i)=>{if(r&&r.$mid===12)if(this.b.get(r.source)&&rt.equals(i,this.b.get(r.source)?.extension)){const s=r.uri===void 0?void 0:k.revive(r.uri);return this.c.get(r.source)?.get(e$(s))?.get(r.handle)}else return;return r}})}async $getTimeline(e,t,r,i){return this.b.get(e)?.provider.provideTimeline(k.revive(t),r,i)}registerTimelineProvider(e,t,r,i){const s=new be,n=this.d(t.id,i,s).bind(this);let o;t.onDidChange&&(o=t.onDidChange(c=>this.a.$emitTimelineChangeEvent({uri:void 0,reset:!0,...c,id:t.id}),this));const a=this.c;return this.f({...t,scheme:e,onDidChange:void 0,async provideTimeline(c,l,u){l?.resetCache&&(s.clear(),a.get(t.id)?.clear());const h=await t.provideTimeline(c,l,u);if(h==null)return;const d=n(c,l);return{...h,source:t.id,items:h.items.map(d)}},dispose(){for(const c of a.values())c.get(t.id)?.clear();o?.dispose(),s.dispose()}},r)}d(e,t,r){return(i,s)=>{let n;if(s?.cacheResults){let o=this.c.get(e);o===void 0&&(o=new Map,this.c.set(e,o));const a=e$(i);n=o.get(a),n===void 0&&(n=new Map,o.set(a,n))}return o=>{const{iconPath:a,...c}=o,l=`${e}|${o.id??o.timestamp}`;n?.set(l,o);let u,h,d;o.iconPath&&(a instanceof vr?d={id:a.id,color:a.color}:k.isUri(a)?(u=a,h=a):{light:u,dark:h}=a);let f;return Jr.isMarkdownString(c.tooltip)?f=Oe.from(c.tooltip):Me(c.tooltip)?f=c.tooltip:Jr.isMarkdownString(c.detail)?(console.warn("Using deprecated TimelineItem.detail, migrate to TimelineItem.tooltip"),f=Oe.from(c.detail)):Me(c.detail)&&(console.warn("Using deprecated TimelineItem.detail, migrate to TimelineItem.tooltip"),f=c.detail),{...c,id:c.id??void 0,handle:l,source:e,command:o.command?t.toInternal(o.command,r):void 0,icon:u,iconDark:h,themeIcon:d,tooltip:f,accessibilityInformation:o.accessibilityInformation}}}}f(e,t){if(this.b.get(e.id))throw new Error(`Timeline Provider ${e.id} already exists.`);return this.a.$registerTimelineProvider({id:e.id,label:e.label,scheme:e.scheme}),this.b.set(e.id,{provider:e,extension:t}),me(()=>{for(const i of this.c.values())i.get(e.id)?.clear();this.b.delete(e.id),this.a.$unregisterTimelineProvider(e.id),e.dispose()})}};function e$(e){return e?.toString()}var rH={IconContribution:"base.contributions.icons"},t$;(function(e){function t(r,i){let s=r.defaults;for(;or.isThemeIcon(s);){const n=vc.getIcon(s.id);if(!n)return;s=n.defaults}return s}e.getDefinition=t})(t$||(t$={}));var r$;(function(e){function t(i){return{weight:i.weight,style:i.style,src:i.src.map(s=>({format:s.format,location:s.location.toString()}))}}e.toJSONObject=t;function r(i){const s=n=>Me(n)?n:void 0;if(i&&Array.isArray(i.src)&&i.src.every(n=>Me(n.format)&&Me(n.location)))return{weight:s(i.weight),style:s(i.style),src:i.src.map(n=>({format:n.format,location:k.parse(n.location)}))}}e.fromJSONObject=r})(r$||(r$={}));var iH=class{constructor(){this.a=new T,this.onDidChange=this.a.event,this.d={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:p(2380,null)},fontCharacter:{type:"string",description:p(2381,null)}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.e={type:"string",pattern:`^${or.iconNameExpression}$`,enum:[],enumDescriptions:[]},this.b={},this.f={}}registerIcon(e,t,r,i){const s=this.b[e];if(s){if(r&&!s.description){s.description=r,this.d.properties[e].markdownDescription=`${r} $(${e})`;const a=this.e.enum.indexOf(e);a!==-1&&(this.e.enumDescriptions[a]=r),this.a.fire()}return s}const n={id:e,description:r,defaults:t,deprecationMessage:i};this.b[e]=n;const o={$ref:"#/definitions/icons"};return i&&(o.deprecationMessage=i),r&&(o.markdownDescription=`${r}: $(${e})`),this.d.properties[e]=o,this.e.enum.push(e),this.e.enumDescriptions.push(r||""),this.a.fire(),{id:e}}deregisterIcon(e){delete this.b[e],delete this.d.properties[e];const t=this.e.enum.indexOf(e);t!==-1&&(this.e.enum.splice(t,1),this.e.enumDescriptions.splice(t,1)),this.a.fire()}getIcons(){return Object.keys(this.b).map(e=>this.b[e])}getIcon(e){return this.b[e]}getIconSchema(){return this.d}getIconReferenceSchema(){return this.e}registerIconFont(e,t){const r=this.f[e];return r||(this.f[e]=t,this.a.fire(),t)}deregisterIconFont(e){delete this.f[e]}getIconFont(e){return this.f[e]}toString(){const e=(s,n)=>s.id.localeCompare(n.id),t=s=>{for(;or.isThemeIcon(s.defaults);)s=this.b[s.defaults.id];return`codicon codicon-${s?s.id:""}`},r=[];r.push("| preview     | identifier                        | default codicon ID                | description"),r.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");const i=Object.keys(this.b).map(s=>this.b[s]);for(const s of i.filter(n=>!!n.description).sort(e))r.push(`|<i class="${t(s)}"></i>|${s.id}|${or.isThemeIcon(s.defaults)?s.defaults.id:s.id}|${s.description||""}|`);r.push("| preview     | identifier                        "),r.push("| ----------- | --------------------------------- |");for(const s of i.filter(n=>!or.isThemeIcon(n.defaults)).sort(e))r.push(`|<i class="${t(s)}"></i>|${s.id}|`);return r.join(`
`)}},vc=new iH;fr.add(rH.IconContribution,vc);function pg(e,t,r,i){return vc.registerIcon(e,t,r,i)}function sH(){const e=nT();for(const t in e){const r="\\"+e[t].toString(16);vc.registerIcon(t,{fontCharacter:r})}}sH();var i$="vscode://schemas/icons",s$=fr.as(ld.JSONContribution);s$.registerSchema(i$,vc.getIconSchema());var n$=new Cs(()=>s$.notifySchemaChanged(i$),200);vc.onDidChange(()=>{n$.isScheduled()||n$.schedule()});var kJ=pg("widget-close",ve.close,p(2382,null)),xJ=pg("goto-previous-location",ve.arrowUp,p(2383,null)),EJ=pg("goto-next-location",ve.arrowDown,p(2384,null)),SJ=or.modify(ve.sync,"spin"),$J=or.modify(ve.loading,"spin"),CJ=p(4236,null),PJ=pg("default-view-icon",ve.window,p(4237,null)),gg;(function(e){e.ViewContainersRegistry="workbench.registry.view.containers",e.ViewsRegistry="workbench.registry.view"})(gg||(gg={}));var o$;(function(e){e[e.Sidebar=0]="Sidebar",e[e.Panel=1]="Panel",e[e.AuxiliaryBar=2]="AuxiliaryBar"})(o$||(o$={}));var nH=class extends ae{constructor(){super(...arguments),this.c=this.B(new T),this.onDidRegister=this.c.event,this.f=this.B(new T),this.onDidDeregister=this.f.event,this.g=new Map,this.h=[]}get all(){return[...this.g.values()].flat()}registerViewContainer(e,t,r){const i=this.get(e.id);if(i)return i;const s=e;return s.openCommandActionDescriptor=r?.doNotRegisterOpenCommand?void 0:s.openCommandActionDescriptor??{id:s.id},UC(this.g,t,[]).push(s),r?.isDefault&&this.h.push(s),this.c.fire({viewContainer:s,viewContainerLocation:t}),s}deregisterViewContainer(e){for(const t of this.g.keys()){const r=this.g.get(t),i=r?.indexOf(e);if(i!==-1){r?.splice(i,1),r.length===0&&this.g.delete(t),this.f.fire({viewContainer:e,viewContainerLocation:t});return}}}get(e){return this.all.filter(t=>t.id===e)[0]}getViewContainers(e){return[...this.g.get(e)||[]]}getViewContainerLocation(e){return[...this.g.keys()].filter(t=>this.getViewContainers(t).filter(r=>r?.id===e.id).length>0)[0]}getDefaultViewContainer(e){return this.h.find(t=>this.getViewContainerLocation(t)===e)}};fr.add(gg.ViewContainersRegistry,new nH);var mg;(function(e){e.Open="2_open",e.Debug="4_debug",e.SCM="5_scm",e.More="9_more"})(mg||(mg={}));function oH(e,t){const r=e.group??mg.More,i=t.group??mg.More;return r!==i?r.localeCompare(i):(e.order??5)-(t.order??5)}var aH=class extends ae{constructor(){super(...arguments),this.c=this.B(new T),this.onViewsRegistered=this.c.event,this.f=this.B(new T),this.onViewsDeregistered=this.f.event,this.g=this.B(new T),this.onDidChangeContainer=this.g.event,this.h=this.B(new T),this.onDidChangeViewWelcomeContent=this.h.event,this.j=[],this.m=new Map,this.n=new Iy}registerViews(e,t){this.registerViews2([{views:e,viewContainer:t}])}registerViews2(e){e.forEach(({views:t,viewContainer:r})=>this.r(t,r)),this.c.fire(e)}deregisterViews(e,t){const r=this.s(e,t);r.length&&this.f.fire({views:r,viewContainer:t})}moveViews(e,t){for(const r of this.m.keys())if(r!==t){const i=this.s(e,r);i.length&&(this.r(i,t),this.g.fire({views:i,from:r,to:t}))}}getViews(e){return this.m.get(e)||[]}getView(e){for(const t of this.j){const r=(this.m.get(t)||[]).filter(i=>i.id===e)[0];if(r)return r}return null}getViewContainer(e){for(const t of this.j)if((this.m.get(t)||[]).filter(i=>i.id===e)[0])return t;return null}registerViewWelcomeContent(e,t){return this.n.add(e,t),this.h.fire(e),me(()=>{this.n.delete(e,t),this.h.fire(e)})}registerViewWelcomeContent2(e,t){const r=new Map;for(const[i,s]of t)this.n.add(e,s),r.set(i,me(()=>{this.n.delete(e,s),this.h.fire(e)}));return this.h.fire(e),r}getViewWelcomeContent(e){const t=[];return this.n.forEach(e,r=>t.push(r)),t.sort(oH)}r(e,t){let r=this.m.get(t);r||(r=[],this.m.set(t,r),this.j.push(t));for(const i of e){if(this.getView(i.id)!==null)throw new Error(p(4238,null,i.id));r.push(i)}}s(e,t){const r=this.m.get(t);if(!r)return[];const i=[],s=[];for(const n of r)e.includes(n)?i.push(n):s.push(n);return i.length&&(s.length?this.m.set(t,s):(this.m.delete(t),this.j.splice(this.j.indexOf(t),1))),i}};fr.add(gg.ViewsRegistry,new aH);var IJ=X("viewDescriptorService"),a$;(function(e){e[e.Default=0]="Default",e[e.Expand=1]="Expand"})(a$||(a$={}));var c$;(function(e){e[e.None=0]="None",e[e.Collapsed=1]="Collapsed",e[e.Expanded=2]="Expanded"})(c$||(c$={}));var Ks=class extends Error{constructor(e){super(p(4239,null,e)),this.name="NoTreeViewError"}static is(e){return!!e&&e.name==="NoTreeViewError"}},cH=class{constructor(){this.a=new Map}removeDragOperationTransfer(e){if(e&&this.a.has(e)){const t=this.a.get(e);return this.a.delete(e),t}}addDragOperationTransfer(e,t){this.a.set(e,t)}};function l$(e,t){if(Me(e))return{label:e};if(e&&typeof e=="object"&&typeof e.label=="string"){let r;return Array.isArray(e.highlights)&&(r=e.highlights.filter(i=>i.length===2&&typeof i[0]=="number"&&typeof i[1]=="number"),r=r.length?r:void 0),{label:e.label,highlights:r}}}var lH=class extends ae{constructor(e,t,r){super(),this.f=e,this.g=t,this.h=r,this.a=new Map,this.b=new cH;function i(s){return s&&s.$treeViewId&&(s.$treeItemHandle||s.$selectedTreeItems||s.$focusedTreeItem)}t.registerArgumentProcessor({processArgument:s=>i(s)?this.r(s):Array.isArray(s)&&s.length>0?s.map(n=>i(n)?this.r(n):n):s})}registerTreeDataProvider(e,t,r){const i=this.createTreeView(e,{treeDataProvider:t},r);return{dispose:()=>i.dispose()}}createTreeView(e,t,r){if(!t||!t.treeDataProvider)throw new Error("Options with treeDataProvider is mandatory");const i=t.dragAndDropController?.dropMimeTypes??[],s=t.dragAndDropController?.dragMimeTypes??[],n=!!t.dragAndDropController?.handleDrag,o=!!t.dragAndDropController?.handleDrop,a=this.m(e,t,r),c={showCollapseAll:!!t.showCollapseAll,canSelectMany:!!t.canSelectMany,dropMimeTypes:i,dragMimeTypes:s,hasHandleDrag:n,hasHandleDrop:o,manuallyManageCheckboxes:!!t.manageCheckboxStateManually},l=this.f.$registerTreeViewDataProvider(e,c),u={get onDidCollapseElement(){return a.onDidCollapseElement},get onDidExpandElement(){return a.onDidExpandElement},get selection(){return a.selectedElements},get onDidChangeSelection(){return a.onDidChangeSelection},get activeItem(){return H(r,"treeViewActiveItem"),a.focusedElement},get onDidChangeActiveItem(){return H(r,"treeViewActiveItem"),a.onDidChangeActiveItem},get visible(){return a.visible},get onDidChangeVisibility(){return a.onDidChangeVisibility},get onDidChangeCheckboxState(){return a.onDidChangeCheckboxState},get message(){return a.message},set message(h){co(h)&&H(r,"treeViewMarkdownMessage"),a.message=h},get title(){return a.title},set title(h){a.title=h},get description(){return a.description},set description(h){a.description=h},get badge(){return a.badge},set badge(h){h!==void 0&&ev.isViewBadge(h)?a.badge={value:Math.floor(Math.abs(h.value)),tooltip:h.tooltip}:h===void 0&&(a.badge=void 0)},reveal:(h,d)=>a.reveal(h,d),dispose:async()=>{await l,this.a.delete(e),a.dispose()}};return this.B(u),u}$getChildren(e,t){const r=this.a.get(e);return r?r.getChildren(t):Promise.reject(new Ks(e))}async $handleDrop(e,t,r,i,s,n,o,a){const c=this.a.get(e);if(!c)return Promise.reject(new Ks(e));const l=On.toDataTransfer(r,async u=>(await this.f.$resolveDropFileData(e,t,u)).buffer);return o===e&&a&&await this.j(l,c,a,s,n),c.onDrop(l,i,s)}async j(e,t,r,i,s){const n=this.b.removeDragOperationTransfer(s);if(n)(await n)?.forEach((o,a)=>{o&&e.set(a,o)});else if(s&&t.handleDrag){const o=t.handleDrag(r,e,i);this.b.addDragOperationTransfer(s,o),await o}return e}async $handleDrag(e,t,r,i){const s=this.a.get(e);if(!s)return Promise.reject(new Ks(e));const n=await this.j(new Dl,s,t,i,r);if(!(!n||i.isCancellationRequested))return On.from(n)}async $hasResolve(e){const t=this.a.get(e);if(!t)throw new Ks(e);return t.hasResolve}$resolve(e,t,r){const i=this.a.get(e);if(!i)throw new Ks(e);return i.resolveTreeItem(t,r)}$setExpanded(e,t,r){const i=this.a.get(e);if(!i)throw new Ks(e);i.setExpanded(t,r)}$setSelectionAndFocus(e,t,r){const i=this.a.get(e);if(!i)throw new Ks(e);i.setSelectionAndFocus(t,r)}$setVisible(e,t){const r=this.a.get(e);if(!r){if(!t)return;throw new Ks(e)}r.setVisible(t)}$changeCheckboxState(e,t){const r=this.a.get(e);if(!r)throw new Ks(e);r.setCheckboxState(t)}m(e,t,r){const i=this.B(new uH(e,t,this.f,this.g.converter,this.h,r));return this.a.set(e,i),i}r(e){const t=this.a.get(e.$treeViewId);return t&&"$treeItemHandle"in e?t.getExtensionElement(e.$treeItemHandle):t&&"$focusedTreeItem"in e&&e.$focusedTreeItem?t.focusedElement:null}},uH=class vy extends ae{static{this.a="0"}static{this.b="1"}get visible(){return this.r}get selectedElements(){return this.s.map(t=>this.getExtensionElement(t)).filter(t=>!Lt(t))}get focusedElement(){return this.t?this.getExtensionElement(this.t):void 0}constructor(t,r,i,s,n,o){if(super(),this.I=t,this.J=i,this.L=s,this.M=n,this.N=o,this.h=void 0,this.j=new Map,this.m=new Map,this.r=!1,this.s=[],this.t=void 0,this.u=this.B(new T),this.onDidExpandElement=this.u.event,this.w=this.B(new T),this.onDidCollapseElement=this.w.event,this.y=this.B(new T),this.onDidChangeSelection=this.y.event,this.z=this.B(new T),this.onDidChangeActiveItem=this.z.event,this.C=this.B(new T),this.onDidChangeVisibility=this.C.event,this.D=this.B(new T),this.onDidChangeCheckboxState=this.D.event,this.F=this.B(new T),this.G=Promise.resolve(),this.H=Promise.resolve(),this.O="",this.P="",this.Z=new wt,o.contributes&&o.contributes.views)for(const u in o.contributes.views)for(const h of o.contributes.views[u])h.id===t&&(this.P=h.name);this.f=r.treeDataProvider,this.g=r.dragAndDropController,this.f.onDidChangeTreeData&&this.B(this.f.onDidChangeTreeData(u=>{Array.isArray(u)&&u.length===0||this.F.fire({message:!1,element:u})}));let a,c;const l=Qe.debounce(this.F.event,(u,h)=>(u||(u={message:!1,elements:[]}),h.element!==!1&&(a||(a=new Promise(d=>c=d),this.G=this.G.then(()=>a)),Array.isArray(h.element)?u.elements.push(...h.element):u.elements.push(h.element)),h.message&&(u.message=!0),u),200,!0);this.B(l(({message:u,elements:h})=>{h.length&&(this.H=this.H.then(()=>{const d=c;return a=null,this.$(h).then(()=>d())})),u&&this.J.$setMessage(this.I,Oe.fromStrict(this.O)??"")}))}async getChildren(t){const r=t?this.getExtensionElement(t):void 0;if(t&&!r)return this.M.error(`No tree item with id '${t}' found.`),Promise.resolve([]);let i=this.X(t);return i||(i=await this.Y(r)),i?i.map(s=>s.item):void 0}getExtensionElement(t){return this.j.get(t)}reveal(t,r){r=r||{select:!0,focus:!1};const i=Lt(r.select)?!0:r.select,s=Lt(r.focus)?!1:r.focus,n=Lt(r.expand)?!1:r.expand;return typeof this.f.getParent!="function"?Promise.reject(new Error("Required registered TreeDataProvider to implement 'getParent' method to access 'reveal' method")):t?this.G.then(()=>this.S(t)).then(o=>this.W(t,o[o.length-1]).then(a=>this.J.$reveal(this.I,{item:a.item,parentChain:o.map(c=>c.item)},{select:i,focus:s,expand:n})),o=>this.M.error(o)):this.J.$reveal(this.I,void 0,{select:i,focus:s,expand:n})}get message(){return this.O}set message(t){this.O=t,this.F.fire({message:!0,element:!1})}get title(){return this.P}set title(t){this.P=t,this.J.$setTitle(this.I,t,this.Q)}get description(){return this.Q}set description(t){this.Q=t,this.J.$setTitle(this.I,this.P,t)}get badge(){return this.R}set badge(t){this.R?.value===t?.value&&this.R?.tooltip===t?.tooltip||(this.R=Kf.from(t),this.J.$setBadge(this.I,t))}setExpanded(t,r){const i=this.getExtensionElement(t);i&&(r?this.u.fire(Object.freeze({element:i})):this.w.fire(Object.freeze({element:i})))}setSelectionAndFocus(t,r){const i=!Xi(this.s,t);this.s=t;const s=this.t!==r;this.t=r,i&&this.y.fire(Object.freeze({selection:this.selectedElements})),s&&this.z.fire(Object.freeze({activeItem:this.focusedElement}))}setVisible(t){t!==this.r&&(this.r=t,this.C.fire(Object.freeze({visible:this.r})))}async setCheckboxState(t){const r=(await Promise.all(t.map(async i=>{const s=this.getExtensionElement(i.treeItemHandle);return s?{extensionItem:s,treeItem:await this.f.getTreeItem(s),newState:i.newState?ls.Checked:ls.Unchecked}:Promise.resolve(void 0)}))).filter(i=>i!==void 0);r.forEach(i=>{i.treeItem.checkboxState=i.newState?ls.Checked:ls.Unchecked}),this.D.fire({items:r.map(i=>[i.extensionItem,i.newState])})}async handleDrag(t,r,i){const s=[];for(const n of t){const o=this.getExtensionElement(n);o&&s.push(o)}if(!(!this.g?.handleDrag||s.length===0))return await this.g.handleDrag(s,r,i),r}get hasHandleDrag(){return!!this.g?.handleDrag}async onDrop(t,r,i){const s=r?this.getExtensionElement(r):void 0;if(!(!s&&r||!this.g?.handleDrop))return mr(()=>this.g?.handleDrop?this.g.handleDrop(s,t,i):void 0)}get hasResolve(){return!!this.f.resolveTreeItem}async resolveTreeItem(t,r){if(!this.f.resolveTreeItem)return;const i=this.j.get(t);if(i){const s=this.m.get(i);if(s){const n=await this.f.resolveTreeItem(s.extensionItem,i,r)??s.extensionItem;return this.hb(n),s.item.tooltip=this.eb(n.tooltip),s.item.command=this.fb(s.disposableStore,n.command),s.item}}}S(t){return this.U(t).then(r=>r?this.S(r).then(i=>this.W(r,i[i.length-1]).then(s=>(i.push(s),i))):Promise.resolve([]))}U(t){const r=this.m.get(t);return r?Promise.resolve(r.parent?this.j.get(r.parent.item.handle):void 0):mr(()=>this.f.getParent(t))}W(t,r){const i=this.m.get(t);return i?Promise.resolve(i):mr(()=>this.f.getTreeItem(t)).then(s=>this.kb(t,s,r,!0)).then(s=>this.getChildren(r?r.item.handle:void 0).then(()=>{const n=this.getExtensionElement(s);if(n){const o=this.m.get(n);if(o)return Promise.resolve(o)}throw new Error(`Cannot resolve tree item for element ${s} from extension ${this.N.identifier.value}`)}))}X(t){if(t){let r;if(typeof t=="string"){const i=this.getExtensionElement(t);r=i?this.m.get(i):void 0}else r=t;return r&&r.children||void 0}return this.h}async Y(t){this.rb(t);const r=new wt(this.Z.token);try{const i=t?this.m.get(t):void 0,s=await this.f.getChildren(t);if(r.token.isCancellationRequested)return;const n=Rt(s||[]),o=await Promise.all(Rt(n).map(c=>this.f.getTreeItem(c)));if(r.token.isCancellationRequested)return;const a=o.map((c,l)=>c?this.db(n[l],c,i):null);return Rt(a)}finally{r.dispose()}}$(t){if(t.some(i=>!i))return this.Z.dispose(!0),this.Z=new wt,this.tb(),this.J.$refresh(this.I);{const i=this.ab(t);if(i.length)return this.bb(i)}return Promise.resolve(void 0)}ab(t){const r=new Set,i=t.map(n=>this.m.get(n));for(const n of i)if(n&&!r.has(n.item.handle)){let o=n;for(;o&&o.parent&&i.findIndex(a=>o&&o.parent&&a&&a.item.handle===o.parent.item.handle)===-1;){const a=this.j.get(o.parent.item.handle);o=a?this.m.get(a):void 0}o&&!o.parent&&r.add(n.item.handle)}const s=[];return r.forEach(n=>{const o=this.j.get(n);if(o){const a=this.m.get(o);a&&(!a.parent||!r.has(a.parent.item.handle))&&s.push(n)}}),s}bb(t){const r={};return Promise.all(t.map(i=>this.cb(i).then(s=>{s&&(r[i]=s.item)}))).then(()=>Object.keys(r).length?this.J.$refresh(this.I,r):void 0)}cb(t){const r=this.getExtensionElement(t);if(r){const i=this.m.get(r);if(i)return this.rb(r),mr(()=>this.f.getTreeItem(r)).then(s=>{if(s){const n=this.ib(r,s,i.parent);return this.pb(r,n,i,i.parent),i.dispose(),n}return null})}return Promise.resolve(null)}db(t,r,i){const s=this.ib(t,r,i);if(r.id&&this.j.has(s.item.handle))throw new Error(p(2731,null,r.id));return this.ob(t,s),this.qb(s,i),s}eb(t){return Jr.isMarkdownString(t)?Oe.from(t):t}fb(t,r){return r?{...this.L.toInternal(r,t),originalId:r.command}:void 0}gb(t){if(t.checkboxState===void 0)return;let r,i,s;return typeof t.checkboxState=="number"?r=t.checkboxState:(r=t.checkboxState.state,i=t.checkboxState.tooltip,s=t.checkboxState.accessibilityInformation),{isChecked:r===ls.Checked,tooltip:i,accessibilityInformation:s}}hb(t){if(!ef.isTreeItem(t,this.N))throw new Error(`Extension ${this.N.identifier.value} has provided an invalid tree item.`)}ib(t,r,i){this.hb(r);const s=this.B(new be),n=this.kb(t,r,i),o=this.lb(r);return{item:{handle:n,parentHandle:i?i.item.handle:void 0,label:l$(r.label,this.N),description:r.description,resourceUri:r.resourceUri,tooltip:this.eb(r.tooltip),command:this.fb(s,r.command),contextValue:r.contextValue,icon:o,iconDark:this.mb(r)||o,themeIcon:this.jb(r),collapsibleState:Lt(r.collapsibleState)?So.None:r.collapsibleState,accessibilityInformation:r.accessibilityInformation,checkbox:this.gb(r)},extensionItem:r,parent:i,children:void 0,disposableStore:s,dispose(){s.dispose()}}}jb(t){return t.iconPath instanceof vr?t.iconPath:void 0}kb(t,{id:r,label:i,resourceUri:s},n,o){if(r)return`${vy.b}/${r}`;const a=l$(i,this.N),c=n?n.item.handle:vy.a;let l=a?a.label:s?es(s):"";l=l.indexOf("/")!==-1?l.replace("/","//"):l;const u=this.m.has(t)?this.m.get(t).item.handle:void 0,h=this.X(n)||[];let d,f=0;do{if(d=`${c}/${f}:${l}`,o||!this.j.has(d)||u===d)break;f++}while(f<=h.length);return d}lb(t){if(t.iconPath&&!(t.iconPath instanceof vr))return typeof t.iconPath=="string"||k.isUri(t.iconPath)?this.nb(t.iconPath):this.nb(t.iconPath.light)}mb(t){if(t.iconPath&&!(t.iconPath instanceof vr)&&t.iconPath.dark)return this.nb(t.iconPath.dark)}nb(t){return k.isUri(t)?t:k.file(t)}ob(t,r){this.j.set(r.item.handle,t),this.m.set(t,r)}pb(t,r,i,s){this.j.delete(r.item.handle),this.m.delete(t),r.item.handle!==i.item.handle&&this.j.delete(i.item.handle),this.ob(t,r);const n=this.X(s)||[],o=n.filter(a=>a.item.handle===i.item.handle)[0];o&&n.splice(n.indexOf(o),1,r)}qb(t,r){r?(r.children||(r.children=[]),r.children.push(t)):(this.h||(this.h=[]),this.h.push(t))}rb(t){if(t){const r=this.m.get(t);if(r){if(r.children)for(const i of r.children){const s=this.j.get(i.item.handle);s&&this.sb(s)}r.children=void 0}}else this.tb()}sb(t){const r=this.m.get(t);if(r){if(r.children)for(const i of r.children){const s=this.j.get(i.item.handle);s&&this.sb(s)}this.m.delete(t),this.j.delete(r.item.handle),r.dispose()}}tb(){this.h=void 0,this.j.clear(),this.m.forEach(t=>t.dispose()),this.m.clear()}dispose(){super.dispose(),this.Z.dispose(),this.tb(),this.J.$disposeTree(this.I)}},hH=class uC{static{this.a=new Set([Q.http,Q.https])}constructor(t){this.c=new Map,this.b=t.getProxy(K.MainThreadUriOpeners)}registerExternalUriOpener(t,r,i,s){if(this.c.has(r))throw new Error(`Opener with id '${r}' already registered`);const n=s.schemes.find(o=>!uC.a.has(o));if(n)throw new Error(`Scheme '${n}' is not supported. Only http and https are currently supported.`);return this.c.set(r,i),this.b.$registerUriOpener(r,s.schemes,t,s.label),me(()=>{this.c.delete(r),this.b.$unregisterUriOpener(r)})}async $canOpenUri(t,r,i){const s=this.c.get(t);if(!s)throw new Error(`Unknown opener with id: ${t}`);const n=k.revive(r);return s.canOpenExternalUri(n,i)}async $openUri(t,r,i){const s=this.c.get(t);if(!s)throw new Error(`Unknown opener id: '${t}'`);return s.openExternalUri(k.revive(r.resolvedUri),{sourceUri:k.revive(r.sourceUri)},i)}},dH=class hC{static{this.a=0}constructor(t){this.c=new lo,this.d=new Map,this.b=t.getProxy(K.MainThreadUrls)}registerUriHandler(t,r){const i=t.identifier;if(this.c.has(i))throw new Error(`Protocol handler already registered for extension ${i}`);const s=hC.a++;return this.c.add(i),this.d.set(s,r),this.b.$registerUriHandler(s,i,t.displayName||t.name),me(()=>{this.c.delete(i),this.d.delete(s),this.b.$unregisterUriHandler(s)})}$handleExternalUri(t,r){const i=this.d.get(t);if(!i)return Promise.resolve(void 0);try{i.handleUri(k.revive(r))}catch(s){It(s)}return Promise.resolve(void 0)}async createAppUri(t){return k.revive(await this.b.$createAppUri(t))}},fH=class extends ae{#e;#t;#r;#i;#n;#s;#a;#o;#c;#l;#u;#d;#h;constructor(e,t,r,i){super(),this.#o=void 0,this.#c=!0,this.#u=!1,this.#d=this.B(new T),this.onDidDispose=this.#d.event,this.#h=this.B(new T),this.onDidChangeViewState=this.#h.event,this.#e=e,this.#t=t,this.#i=r,this.#r=i.viewType,this.#n=i.panelOptions,this.#o=i.viewColumn,this.#s=i.title,this.#l=i.active}dispose(){this.#u||(this.#u=!0,this.#d.fire(),this.#t.$disposeWebview(this.#e),this.#i.dispose(),super.dispose())}get webview(){return this.c(),this.#i}get viewType(){return this.c(),this.#r}get title(){return this.c(),this.#s}set title(e){this.c(),this.#s!==e&&(this.#s=e,this.#t.$setTitle(this.#e,e))}get iconPath(){return this.c(),this.#a}set iconPath(e){this.c(),this.#a!==e&&(this.#a=e,this.#t.$setIconPath(this.#e,k.isUri(e)?{light:e,dark:e}:e))}get options(){return this.#n}get viewColumn(){if(this.c(),!(typeof this.#o=="number"&&this.#o<0))return this.#o}get active(){return this.c(),this.#l}get visible(){return this.c(),this.#c}_updateViewState(e){this.#u||(this.active!==e.active||this.visible!==e.visible||this.viewColumn!==e.viewColumn)&&(this.#l=e.active,this.#c=e.visible,this.#o=e.viewColumn,this.#h.fire({webviewPanel:this}))}reveal(e,t){this.c(),this.#t.$reveal(this.#e,{viewColumn:typeof e>"u"?void 0:Gt.from(e),preserveFocus:!!t})}c(){if(this.#u)throw new Error("Webview is disposed")}},pH=class dC extends ae{static c(){return ir()}constructor(t,r,i){super(),this.j=r,this.m=i,this.g=new Map,this.h=new Map,this.f=t.getProxy(K.MainThreadWebviewPanels)}dispose(){super.dispose(),this.g.forEach(t=>t.dispose()),this.g.clear()}createWebviewPanel(t,r,i,s,n={}){const o=typeof s=="object"?s.viewColumn:s,a={viewColumn:Gt.from(o),preserveFocus:typeof s=="object"&&!!s.preserveFocus},c=fc(t),l=dC.c();this.f.$createWebviewPanel(eg(t),l,r,{title:i,panelOptions:gH(n),webviewOptions:lS(t,this.m,n),serializeBuffersForPostMessage:c},a);const u=this.j.createNewWebview(l,n,t);return this.createNewWebviewPanel(l,r,i,o,n,u,!0)}$onDidChangeWebviewPanelViewStates(t){const r=Object.keys(t);r.sort((i,s)=>{const n=t[i],o=t[s];return n.active?1:o.active?-1:+n.visible-+o.visible});for(const i of r){const s=this.getWebviewPanel(i);if(!s)continue;const n=t[i];s._updateViewState({active:n.active,visible:n.visible,viewColumn:Gt.to(n.position)})}}async $onDidDisposeWebviewPanel(t){this.getWebviewPanel(t)?.dispose(),this.g.delete(t),this.j.deleteWebview(t)}registerWebviewPanelSerializer(t,r,i){if(this.h.has(r))throw new Error(`Serializer for '${r}' already registered`);return this.h.set(r,{serializer:i,extension:t}),this.f.$registerSerializer(r,{serializeBuffersForPostMessage:fc(t)}),new _e(()=>{this.h.delete(r),this.f.$unregisterSerializer(r)})}async $deserializeWebviewPanel(t,r,i,s){const n=this.h.get(r);if(!n)throw new Error(`No serializer found for '${r}'`);const{serializer:o,extension:a}=n,c=this.j.createNewWebview(t,i.webviewOptions,a),l=this.createNewWebviewPanel(t,r,i.title,s,i.panelOptions,c,i.active);await o.deserializeWebviewPanel(l,i.state)}createNewWebviewPanel(t,r,i,s,n,o,a){const c=new fH(t,this.f,o,{viewType:r,title:i,viewColumn:s,panelOptions:n,active:a});return this.g.set(t,c),c}getWebviewPanel(t){return this.g.get(t)}};function gH(e){return{enableFindWidget:e.enableFindWidget,retainContextWhenHidden:e.retainContextWhenHidden}}var mH=class extends ae{#e;#t;#r;#i;#n;#s;#a;#o;#c;constructor(e,t,r,i,s,n){super(),this.#n=!1,this.#l=this.B(new T),this.onDidChangeVisibility=this.#l.event,this.#u=this.B(new T),this.onDidDispose=this.#u.event,this.#r=r,this.#a=i,this.#e=e,this.#t=t,this.#i=s,this.#s=n}dispose(){this.#n||(this.#n=!0,this.#u.fire(),this.#i.dispose(),super.dispose())}#l;#u;get title(){return this.a(),this.#a}set title(e){this.a(),this.#a!==e&&(this.#a=e,this.#t.$setWebviewViewTitle(this.#e,e))}get description(){return this.a(),this.#o}set description(e){this.a(),this.#o!==e&&(this.#o=e,this.#t.$setWebviewViewDescription(this.#e,e))}get visible(){return this.#s}get webview(){return this.#i}get viewType(){return this.#r}_setVisible(e){e===this.#s||this.#n||(this.#s=e,this.#l.fire())}get badge(){return this.a(),this.#c}set badge(e){this.a(),!(e?.value===this.#c?.value&&e?.tooltip===this.#c?.tooltip)&&(this.#c=Kf.from(e),this.#t.$setWebviewViewBadge(this.#e,e))}show(e){this.a(),this.#t.$show(this.#e,!!e)}a(){if(this.#n)throw new Error("Webview is disposed")}},vH=class{constructor(e,t){this.d=t,this.b=new Map,this.c=new Map,this.a=e.getProxy(K.MainThreadWebviewViews)}registerWebviewViewProvider(e,t,r,i){if(this.b.has(t))throw new Error(`View provider for '${t}' already registered`);return this.b.set(t,{provider:r,extension:e}),this.a.$registerWebviewViewProvider(eg(e),t,{retainContextWhenHidden:i?.retainContextWhenHidden,serializeBuffersForPostMessage:fc(e)}),new _e(()=>{this.b.delete(t),this.a.$unregisterWebviewViewProvider(t)})}async $resolveWebviewView(e,t,r,i,s){const n=this.b.get(t);if(!n)throw new Error(`No view provider found for '${t}'`);const{provider:o,extension:a}=n,c=this.d.createNewWebview(e,{},a),l=new mH(e,this.a,t,r,c,!0);this.c.set(e,l),await o.resolveWebviewView(l,{state:i},s)}async $onDidChangeWebviewViewVisibility(e,t){this.e(e)._setVisible(t)}async $disposeWebviewView(e){const t=this.e(e);this.c.delete(e),t.dispose(),this.d.deleteWebview(e)}e(e){const t=this.c.get(e);if(!t)throw new Error("No webview found");return t}},DJ=new J("debugType",void 0,{type:"string",description:p(5831,null)}),AJ=new J("debugConfigurationType",void 0,{type:"string",description:p(5832,null)}),TJ=new J("debugState","inactive",{type:"string",description:p(5833,null)}),wH="debugUx",RJ=new J(wH,"default",{type:"string",description:p(5834,null)}),LJ=new J("hasDebugged",!1,{type:"boolean",description:p(5835,null)}),NJ=new J("inDebugMode",!1,{type:"boolean",description:p(5836,null)}),FJ=new J("inDebugRepl",!1,{type:"boolean",description:p(5837,null)}),OJ=new J("breakpointWidgetVisible",!1,{type:"boolean",description:p(5838,null)}),MJ=new J("inBreakpointWidget",!1,{type:"boolean",description:p(5839,null)}),jJ=new J("breakpointsFocused",!0,{type:"boolean",description:p(5840,null)}),UJ=new J("watchExpressionsFocused",!0,{type:"boolean",description:p(5841,null)}),HJ=new J("watchExpressionsExist",!1,{type:"boolean",description:p(5842,null)}),BJ=new J("variablesFocused",!0,{type:"boolean",description:p(5843,null)}),zJ=new J("expressionSelected",!1,{type:"boolean",description:p(5844,null)}),_J=new J("breakpointInputFocused",!1,{type:"boolean",description:p(5845,null)}),WJ=new J("callStackItemType",void 0,{type:"string",description:p(5846,null)}),VJ=new J("callStackSessionIsAttach",!1,{type:"boolean",description:p(5847,null)}),qJ=new J("callStackItemStopped",!1,{type:"boolean",description:p(5848,null)}),GJ=new J("callStackSessionHasOneThread",!1,{type:"boolean",description:p(5849,null)}),JJ=new J("watchItemType",void 0,{type:"string",description:p(5850,null)}),QJ=new J("canViewMemory",void 0,{type:"boolean",description:p(5851,null)}),YJ=new J("breakpointItemType",void 0,{type:"string",description:p(5852,null)}),XJ=new J("breakpointItemBytes",void 0,{type:"boolean",description:p(5853,null)}),ZJ=new J("breakpointHasModes",!1,{type:"boolean",description:p(5854,null)}),KJ=new J("breakpointSupportsCondition",!1,{type:"boolean",description:p(5855,null)}),eQ=new J("loadedScriptsSupported",!1,{type:"boolean",description:p(5856,null)}),tQ=new J("loadedScriptsItemType",void 0,{type:"string",description:p(5857,null)}),rQ=new J("focusedSessionIsAttach",!1,{type:"boolean",description:p(5858,null)}),iQ=new J("focusedSessionIsNoDebug",!1,{type:"boolean",description:p(5859,null)}),sQ=new J("stepBackSupported",!1,{type:"boolean",description:p(5860,null)}),nQ=new J("restartFrameSupported",!1,{type:"boolean",description:p(5861,null)}),oQ=new J("stackFrameSupportsRestart",!1,{type:"boolean",description:p(5862,null)}),aQ=new J("jumpToCursorSupported",!1,{type:"boolean",description:p(5863,null)}),cQ=new J("stepIntoTargetsSupported",!1,{type:"boolean",description:p(5864,null)}),lQ=new J("breakpointsExist",!1,{type:"boolean",description:p(5865,null)}),uQ=new J("debuggersAvailable",!1,{type:"boolean",description:p(5866,null)}),hQ=new J("debugExtensionAvailable",!0,{type:"boolean",description:p(5867,null)}),dQ=new J("debugProtocolVariableMenuContext",void 0,{type:"string",description:p(5868,null)}),fQ=new J("debugSetVariableSupported",!1,{type:"boolean",description:p(5869,null)}),pQ=new J("debugSetDataBreakpointAddressSupported",!1,{type:"boolean",description:p(5870,null)}),gQ=new J("debugSetExpressionSupported",!1,{type:"boolean",description:p(5871,null)}),mQ=new J("breakWhenValueChangesSupported",!1,{type:"boolean",description:p(5872,null)}),vQ=new J("breakWhenValueIsAccessedSupported",!1,{type:"boolean",description:p(5873,null)}),wQ=new J("breakWhenValueIsReadSupported",!1,{type:"boolean",description:p(5874,null)}),bQ=new J("terminateDebuggeeSupported",!1,{type:"boolean",description:p(5875,null)}),yQ=new J("suspendDebuggeeSupported",!1,{type:"boolean",description:p(5876,null)}),kQ=new J("variableEvaluateNamePresent",!1,{type:"boolean",description:p(5877,null)}),xQ=new J("variableIsReadonly",!1,{type:"boolean",description:p(5878,null)}),EQ=new J("variableValue",!1,{type:"string",description:p(5879,null)}),SQ=new J("variableType",!1,{type:"string",description:p(5880,null)}),$Q=new J("variableInterfaces",!1,{type:"array",description:p(5881,null)}),CQ=new J("variableName",!1,{type:"string",description:p(5882,null)}),PQ=new J("variableLanguage",!1,{type:"string",description:p(5883,null)}),IQ=new J("variableExtensionId",!1,{type:"string",description:p(5884,null)}),DQ=new J("exceptionWidgetVisible",!1,{type:"boolean",description:p(5885,null)}),AQ=new J("multiSessionRepl",!1,{type:"boolean",description:p(5886,null)}),TQ=new J("multiSessionDebug",!1,{type:"boolean",description:p(5887,null)}),RQ=new J("disassembleRequestSupported",!1,{type:"boolean",description:p(5888,null)}),LQ=new J("disassemblyViewFocus",!1,{type:"boolean",description:p(5889,null)}),NQ=new J("languageSupportsDisassembleRequest",!1,{type:"boolean",description:p(5890,null)}),FQ=new J("focusedStackFrameHasInstructionReference",!1,{type:"boolean",description:p(5891,null)}),OQ={enum:["neverOpen","openOnSessionStart","openOnFirstSessionStart"],default:"openOnFirstSessionStart",description:p(5893,null)},u$;(function(e){e[e.Inactive=0]="Inactive",e[e.Initializing=1]="Initializing",e[e.Stopped=2]="Stopped",e[e.Running=3]="Running"})(u$||(u$={}));var h$;(function(e){e[e.Valid=0]="Valid",e[e.Unreadable=1]="Unreadable",e[e.Error=2]="Error"})(h$||(h$={}));var d$;(function(e){e[e.Variable=0]="Variable",e[e.Address=1]="Address"})(d$||(d$={}));var vg;(function(e){e[e.Initial=1]="Initial",e[e.Dynamic=2]="Dynamic"})(vg||(vg={}));var f$;(function(e){e.UnverifiedBreakpoints="unverifiedBreakpoints"})(f$||(f$={}));var MQ=X("debugService"),p$;(function(e){e[e.CONDITION=0]="CONDITION",e[e.HIT_COUNT=1]="HIT_COUNT",e[e.LOG_MESSAGE=2]="LOG_MESSAGE",e[e.TRIGGER_POINT=3]="TRIGGER_POINT"})(p$||(p$={}));var g$;(function(e){e[e.Command=0]="Command",e[e.Tree=1]="Tree"})(g$||(g$={}));var m$;(function(e){e[e.None=0]="None",e[e.Collapsed=1]="Collapsed",e[e.Expanded=2]="Expanded"})(m$||(m$={}));var v$;(function(e){e.deserialize=t=>t,e.serialize=t=>t})(v$||(v$={}));var w$;(function(e){e.deserialize=t=>({id:t.id,name:t.name,iconPath:t.iconPath&&{light:k.revive(t.iconPath.light),dark:k.revive(t.iconPath.dark)},iconClass:t.iconClass,visualization:t.visualization}),e.serialize=t=>t})(w$||(w$={}));var bH=class fC{static{this.a=0}constructor(t){this.c=new Map,this.b=t.getProxy(K.MainThreadCodeMapper)}async $mapCode(t,r,i){const s=this.c.get(t);if(!s)throw new Error(`Received request to map code for unknown provider handle ${t}`);const n={textEdit:(c,l)=>{l=Array.isArray(l)?l:[l],this.b.$handleProgress(r.requestId,{uri:c,edits:l.map(Jt.from)})}},o={codeBlocks:r.codeBlocks.map(c=>({code:c.code,resource:k.revive(c.resource)})),conversation:r.conversation};return await s.provideMappedEdits(o,n,i)??null}registerMappedEditsProvider(t,r){const i=fC.a++;return this.b.$registerCodeMapperProvider(i),this.c.set(i,r),{dispose:()=>this.b.$unregisterCodeMapperProvider(i)}}};function yH(e){const t=e.get(er),r=e.get(ua),i=e.get(wu),s=e.get(Js),n=e.get(Bi),o=e.get($p),a=e.get(pi),c=e.get(el),l=e.get(Ue),u=e.get(E0),h=e.get($0),d=e.get(ca),f=e.get(Ne),g=e.get(Ep),v=e.get(Cu),x=e.get(hE),$=e.get(V0),C=e.get(lc),L=e.get(J0),F=e.get(F0),z=e.get(j0);l.set(de.ExtHostFileSystemInfo,r),l.set(de.ExtHostLogLevelServiceShape,d),l.set(de.ExtHostWorkspace,n),l.set(de.ExtHostConfiguration,a),l.set(de.ExtHostExtensionService,s),l.set(de.ExtHostStorage,u),l.set(de.ExtHostTunnelService,g),l.set(de.ExtHostWindow,x),l.set(de.ExtHostSecretState,$),l.set(de.ExtHostTelemetry,o),l.set(de.ExtHostEditorTabs,C),l.set(de.ExtHostManagedSockets,L),l.set(de.ExtHostAuthentication,F),l.set(de.ExtHostChatProvider,z);const Y=l.set(de.ExtHostDecorations,e.get(T8)),oe=l.set(de.ExtHostDocumentsAndEditors,e.get(Mo)),Z=l.set(de.ExtHostCommands,e.get(zi)),se=l.set(de.ExtHostTerminalService,e.get(Gs)),Ae=l.set(de.ExtHostTerminalShellIntegration,e.get(Iw)),xe=l.set(de.ExtHostDebugService,e.get(xw)),tt=l.set(de.ExtHostSearch,e.get($w)),dt=l.set(de.ExtHostTask,e.get(ww)),ee=l.set(de.ExtHostOutputService,e.get(A8)),q=l.set(de.ExtHostLocalization,e.get(G0)),ne=l.set(de.ExtHostUrls,new dH(l)),G=l.set(de.ExtHostDocuments,new Lj(l,oe)),le=l.set(de.ExtHostDocumentContentProviders,new Tj(l,oe,f)),Pe=l.set(de.ExtHostDocumentSaveParticipant,new Rj(f,G,l.getProxy(K.MainThreadBulkEdits))),we=l.set(de.ExtHostNotebook,new PU(l,Z,oe,G,i,tt,f)),it=l.set(de.ExtHostNotebookDocuments,new DU(we)),Ge=l.set(de.ExtHostNotebookEditors,new wb(f,we)),At=l.set(de.ExtHostNotebookKernels,new bb(l,t,we,Z,f)),Tt=l.set(de.ExtHostNotebookRenderers,new NU(l,we)),Yt=l.set(de.ExtHostNotebookDocumentSaveParticipant,new IU(f,we,l.getProxy(K.MainThreadBulkEdits))),ot=l.set(de.ExtHostEditors,new eH(l,oe)),cr=l.set(de.ExtHostTreeViews,new lH(l.getProxy(K.MainThreadTreeViews),Z,f)),bi=l.set(de.ExtHostEditorInsets,new uj(l.getProxy(K.MainThreadEditorInsets),ot,t.remote)),yi=l.set(de.ExtHostDiagnostics,new Yw(l,f,r,oe)),Xr=l.set(de.ExtHostLanguages,new sU(l,G,Z.converter,c)),Te=l.set(de.ExtHostLanguageFeatures,new rU(l,c,G,Z,yi,f,v,o)),ki=l.set(de.ExtHostCodeMapper,new bH(l)),Je=l.set(de.ExtHostFileSystem,new Bj(l,Te)),ni=l.set(de.ExtHostFileSystemEventService,new Xj(l,f,oe)),Mr=l.set(de.ExtHostQuickOpen,UU(l,n,Z)),jr=l.set(de.ExtHostSCM,new $b(l,Z,G,f)),on=l.set(de.ExtHostQuickDiff,new jU(l,c)),an=l.set(de.ExtHostShare,new QU(l,c)),qn=l.set(de.ExtHostComments,hj(l,Z,G)),Qi=l.set(de.ExtHostProgress,new OU(l.getProxy(K.MainThreadProgress))),Gn=l.set(de.ExtHostLabelService,new Kj(l)),ws=l.set(de.ExtHostTheming,new Cb(l)),bs=l.set(de.ExtHostTimeline,new tH(l,Z)),lr=l.set(de.ExtHostWebviews,new yj(l,t.remote,n,f,v)),Zr=l.set(de.ExtHostWebviewPanels,new pH(l,lr,n)),xt=l.set(de.ExtHostCustomEditors,new Cj(l,G,h,lr,Zr)),_t=l.set(de.ExtHostWebviewViews,new vH(l,lr)),Yi=l.set(de.ExtHostTesting,e.get(Ru)),cn=l.set(de.ExtHostUriOpeners,new hH(l)),oi=l.set(de.ExtHostProfileContentHandlers,new FU(l));l.set(de.ExtHostInteractive,new Zj(l,we,oe,Z,f));const Xt=l.set(de.ExtHostChatAgents2,new ij(l,f,Z,G,z)),A=l.set(de.ExtHostChatVariables,new nj(l)),O=l.set(de.ExtHostLanguageModelTools,new iU(l)),U=l.set(de.ExtHostAiRelatedInformation,new YM(l)),ue=l.set(de.ExtHostAiEmbeddingVector,new Fj(l)),$e=l.set(de.ExtHostStatusBar,new KU(l,Z.converter)),ft=l.set(de.ExtHostSpeech,new YU(l)),he=l.set(de.ExtHostEmbeddings,new Nj(l)),ur=Object.values(de);l.assertRegistered(ur);const Ct=new Jw(l,oe),Zt=new aj(l),wr=new ob(l,f),Et=new Aj(l);return tj.register(Z),function(P,Pt,gr){function N(w){return(b,D,Ce)=>{const st=w(Vt=>{try{b.call(D,Vt)}catch(Ic){Gg(new Error(`[ExtensionListenerError] Extension '${P.identifier.value}' FAILED to handle event: ${Ic.toString()}`,{cause:Ic})),o.onExtensionError(P.identifier,Ic)}});return Ce?.push(st),st}}const y=function(){let w=!P.isUnderDevelopment;function b(){w||(f.info(`Extension '${P.identifier.value}' uses a document selector without scheme. Learn more about this: https://go.microsoft.com/fwlink/?linkid=872305`),w=!0)}return function D(Ce){if(Array.isArray(Ce))Ce.forEach(D);else if(typeof Ce=="string")b();else{const st=Ce;typeof st.scheme>"u"&&b(),typeof st.exclusive=="boolean"&&H(P,"documentFiltersExclusive")}return Ce}}(),E={getSession(w,b,D){return typeof D?.forceNewSession=="object"&&D.forceNewSession.learnMore&&H(P,"authLearnMore"),F.getSession(P,w,b,D)},getAccounts(w){return F.getAccounts(w)},async hasSession(w,b){return H(P,"authSession"),!!await F.getSession(P,w,b,{silent:!0})},get onDidChangeSessions(){return N(F.getExtensionScopedSessionsEvent(P.identifier.value))},registerAuthenticationProvider(w,b,D,Ce){return F.registerAuthenticationProvider(w,b,D,Ce)}},S={registerCommand(w,b,D){return Z.registerCommand(!0,w,b,D,void 0,P)},registerTextEditorCommand(w,b,D){return Z.registerCommand(!0,w,(...Ce)=>{const st=ot.getActiveTextEditor();if(!st){f.warn("Cannot execute "+w+" because there is no active text editor.");return}return st.edit(Vt=>{b.apply(D,[st,Vt,...Ce])}).then(Vt=>{Vt||f.warn("Edits from command "+w+" were not applied.")},Vt=>{f.warn("An error occurred while running command "+w,Vt)})},void 0,void 0,P)},registerDiffInformationCommand:(w,b,D)=>(H(P,"diffCommand"),Z.registerCommand(!0,w,async(...Ce)=>{const st=oe.activeEditor(!0);if(!st){f.warn("Cannot execute "+w+" because there is no active text editor.");return}const Vt=await ot.getDiffInformation(st.id);b.apply(D,[Vt,...Ce])},void 0,void 0,P)),executeCommand(w,...b){return Z.executeCommand(w,...b)},getCommands(w=!1){return Z.getCommands(w)}},I={get machineId(){return t.telemetryInfo.machineId},get sessionId(){return t.telemetryInfo.sessionId},get language(){return t.environment.appLanguage},get appName(){return t.environment.appName},get appRoot(){return t.environment.appRoot?.fsPath??""},get appHost(){return t.environment.appHost},get uriScheme(){return t.environment.appUriScheme},get clipboard(){return Zt.value},get shell(){return se.getDefaultShell(!1)},get onDidChangeShell(){return N(se.onDidChangeShell)},get isTelemetryEnabled(){return o.getTelemetryConfiguration()},get onDidChangeTelemetryEnabled(){return N(o.onDidChangeTelemetryEnabled)},get telemetryConfiguration(){return H(P,"telemetry"),o.getTelemetryDetails()},get onDidChangeTelemetryConfiguration(){return H(P,"telemetry"),N(o.onDidChangeTelemetryConfiguration)},get isNewAppInstall(){return zx(t.telemetryInfo.firstSessionDate)},createTelemetryLogger(w,b){return Bx.validateSender(w),o.instantiateLogger(P,w,b)},openExternal(w,b){return x.openUri(w,{allowTunneling:!!t.remote.authority,allowContributedOpeners:b?.allowContributedOpeners})},async asExternalUri(w){if(w.scheme===t.environment.appUriScheme)return ne.createAppUri(w);try{return await x.asExternalUri(w,{allowTunneling:!!t.remote.authority})}catch(b){if(fm(w,Q.http)||fm(w,Q.https))return w;throw b}},get remoteName(){return g1(t.remote.authority)},get remoteAuthority(){return H(P,"resolvers"),t.remote.authority},get uiKind(){return t.uiKind},get logLevel(){return f.getLevel()},get onDidChangeLogLevel(){return N(f.onDidChangeLogLevel)},get appQuality(){return H(P,"resolvers"),t.quality},get appCommit(){return H(P,"resolvers"),t.commit}};t.environment.extensionTestsLocationURI||Object.freeze(I);const R={createTestController(w,b,D){return Yi.createTestController(P,w,b,D)},createTestObserver(){return H(P,"testObserver"),Yi.createTestObserver()},runTests(w){return H(P,"testObserver"),Yi.runTests(w)},registerTestFollowupProvider(w){return H(P,"testObserver"),Yi.registerTestFollowupProvider(w)},get onDidChangeTestResults(){return H(P,"testObserver"),N(Yi.onResultsChanged)},get testResults(){return H(P,"testObserver"),Yi.results}},M=t.remote.isRemote?Po.Workspace:Po.UI,_={getExtension(w,b){zt(P,"extensionsAny")||(b=!1);const D=Pt.mine.getExtensionDescription(w);if(D)return new Eu(s,P.identifier,D,M,!1);if(b){const Ce=Pt.all.getExtensionDescription(w);if(Ce)return new Eu(s,P.identifier,Ce,M,!0)}},get all(){const w=[];for(const b of Pt.mine.getAllExtensionDescriptions())w.push(new Eu(s,P.identifier,b,M,!1));return w},get allAcrossExtensionHosts(){H(P,"extensionsAny");const w=new lo(Pt.mine.getAllExtensionDescriptions().map(D=>D.identifier)),b=[];for(const D of Pt.all.getAllExtensionDescriptions()){const Ce=!w.has(D.identifier);b.push(new Eu(s,P.identifier,D,M,Ce))}return b},get onDidChange(){return zt(P,"extensionsAny")?N(Qe.any(Pt.mine.onDidChange,Pt.all.onDidChange)):N(Pt.mine.onDidChange)}},te={createDiagnosticCollection(w){return yi.createDiagnosticCollection(P.identifier,w)},get onDidChangeDiagnostics(){return N(yi.onDidChangeDiagnostics)},getDiagnostics:w=>yi.getDiagnostics(w),getLanguages(){return Xr.getLanguages()},setTextDocumentLanguage(w,b){return Xr.changeLanguage(w.uri,b)},match(w,b){const D=qv.from(w);let Ce;return XE(D)&&(Ce=we.notebookDocuments.find(st=>st.apiNotebook.getCells().find(Vt=>Vt.document===b))?.apiNotebook),YE(D,b.uri,b.languageId,!0,Ce?.uri,Ce?.notebookType)},registerCodeActionsProvider(w,b,D){return Te.registerCodeActionProvider(P,y(w),b,D)},registerDocumentPasteEditProvider(w,b,D){return H(P,"documentPaste"),Te.registerDocumentPasteEditProvider(P,y(w),b,D)},registerCodeLensProvider(w,b){return Te.registerCodeLensProvider(P,y(w),b)},registerDefinitionProvider(w,b){return Te.registerDefinitionProvider(P,y(w),b)},registerDeclarationProvider(w,b){return Te.registerDeclarationProvider(P,y(w),b)},registerImplementationProvider(w,b){return Te.registerImplementationProvider(P,y(w),b)},registerTypeDefinitionProvider(w,b){return Te.registerTypeDefinitionProvider(P,y(w),b)},registerHoverProvider(w,b){return Te.registerHoverProvider(P,y(w),b,P.identifier)},registerEvaluatableExpressionProvider(w,b){return Te.registerEvaluatableExpressionProvider(P,y(w),b,P.identifier)},registerInlineValuesProvider(w,b){return Te.registerInlineValuesProvider(P,y(w),b,P.identifier)},registerDocumentHighlightProvider(w,b){return Te.registerDocumentHighlightProvider(P,y(w),b)},registerMultiDocumentHighlightProvider(w,b){return Te.registerMultiDocumentHighlightProvider(P,y(w),b)},registerLinkedEditingRangeProvider(w,b){return Te.registerLinkedEditingRangeProvider(P,y(w),b)},registerReferenceProvider(w,b){return Te.registerReferenceProvider(P,y(w),b)},registerRenameProvider(w,b){return Te.registerRenameProvider(P,y(w),b)},registerNewSymbolNamesProvider(w,b){return H(P,"newSymbolNamesProvider"),Te.registerNewSymbolNamesProvider(P,y(w),b)},registerDocumentSymbolProvider(w,b,D){return Te.registerDocumentSymbolProvider(P,y(w),b,D)},registerWorkspaceSymbolProvider(w){return Te.registerWorkspaceSymbolProvider(P,w)},registerDocumentFormattingEditProvider(w,b){return Te.registerDocumentFormattingEditProvider(P,y(w),b)},registerDocumentRangeFormattingEditProvider(w,b){return Te.registerDocumentRangeFormattingEditProvider(P,y(w),b)},registerOnTypeFormattingEditProvider(w,b,D,...Ce){return Te.registerOnTypeFormattingEditProvider(P,y(w),b,[D].concat(Ce))},registerDocumentSemanticTokensProvider(w,b,D){return Te.registerDocumentSemanticTokensProvider(P,y(w),b,D)},registerDocumentRangeSemanticTokensProvider(w,b,D){return Te.registerDocumentRangeSemanticTokensProvider(P,y(w),b,D)},registerSignatureHelpProvider(w,b,D,...Ce){return typeof D=="object"?Te.registerSignatureHelpProvider(P,y(w),b,D):Te.registerSignatureHelpProvider(P,y(w),b,typeof D>"u"?[]:[D,...Ce])},registerCompletionItemProvider(w,b,...D){return Te.registerCompletionItemProvider(P,y(w),b,D)},registerInlineCompletionItemProvider(w,b,D){return b.handleDidShowCompletionItem&&H(P,"inlineCompletionsAdditions"),b.handleDidPartiallyAcceptCompletionItem&&H(P,"inlineCompletionsAdditions"),D&&H(P,"inlineCompletionsAdditions"),Te.registerInlineCompletionsProvider(P,y(w),b,D)},registerInlineEditProvider(w,b){return H(P,"inlineEdit"),Te.registerInlineEditProvider(P,y(w),b)},registerDocumentLinkProvider(w,b){return Te.registerDocumentLinkProvider(P,y(w),b)},registerColorProvider(w,b){return Te.registerColorProvider(P,y(w),b)},registerFoldingRangeProvider(w,b){return Te.registerFoldingRangeProvider(P,y(w),b)},registerSelectionRangeProvider(w,b){return Te.registerSelectionRangeProvider(P,w,b)},registerCallHierarchyProvider(w,b){return Te.registerCallHierarchyProvider(P,w,b)},registerTypeHierarchyProvider(w,b){return Te.registerTypeHierarchyProvider(P,w,b)},setLanguageConfiguration:(w,b)=>Te.setLanguageConfiguration(P,w,b),getTokenInformationAtPosition(w,b){return H(P,"tokenInformation"),Xr.tokenAtPosition(w,b)},registerInlayHintsProvider(w,b){return Te.registerInlayHintsProvider(P,w,b)},createLanguageStatusItem(w,b){return Xr.createLanguageStatusItem(P,w,b)},registerDocumentDropEditProvider(w,b,D){return Te.registerDocumentOnDropEditProvider(P,w,b,zt(P,"documentPaste")?D:void 0)}},ce={get activeTextEditor(){return ot.getActiveTextEditor()},get visibleTextEditors(){return ot.getVisibleTextEditors()},get activeTerminal(){return se.activeTerminal},get terminals(){return se.terminals},async showTextDocument(w,b,D){k.isUri(w)&&w.scheme===Q.vscodeRemote&&!w.authority&&v.report("workspace.showTextDocument",P,"A URI of 'vscode-remote' scheme requires an authority.");const Ce=await(k.isUri(w)?Promise.resolve(Ie.openTextDocument(w)):Promise.resolve(w));return ot.showTextDocument(Ce,b,D)},createTextEditorDecorationType(w){return ot.createTextEditorDecorationType(P,w)},onDidChangeActiveTextEditor(w,b,D){return N(ot.onDidChangeActiveTextEditor)(w,b,D)},onDidChangeVisibleTextEditors(w,b,D){return N(ot.onDidChangeVisibleTextEditors)(w,b,D)},onDidChangeTextEditorSelection(w,b,D){return N(ot.onDidChangeTextEditorSelection)(w,b,D)},onDidChangeTextEditorOptions(w,b,D){return N(ot.onDidChangeTextEditorOptions)(w,b,D)},onDidChangeTextEditorVisibleRanges(w,b,D){return N(ot.onDidChangeTextEditorVisibleRanges)(w,b,D)},onDidChangeTextEditorViewColumn(w,b,D){return N(ot.onDidChangeTextEditorViewColumn)(w,b,D)},onDidCloseTerminal(w,b,D){return N(se.onDidCloseTerminal)(w,b,D)},onDidOpenTerminal(w,b,D){return N(se.onDidOpenTerminal)(w,b,D)},onDidChangeActiveTerminal(w,b,D){return N(se.onDidChangeActiveTerminal)(w,b,D)},onDidChangeTerminalDimensions(w,b,D){return H(P,"terminalDimensions"),N(se.onDidChangeTerminalDimensions)(w,b,D)},onDidChangeTerminalState(w,b,D){return N(se.onDidChangeTerminalState)(w,b,D)},onDidWriteTerminalData(w,b,D){return H(P,"terminalDataWriteEvent"),N(se.onDidWriteTerminalData)(w,b,D)},onDidExecuteTerminalCommand(w,b,D){return H(P,"terminalExecuteCommandEvent"),N(se.onDidExecuteTerminalCommand)(w,b,D)},onDidChangeTerminalShellIntegration(w,b,D){return N(Ae.onDidChangeTerminalShellIntegration)(w,b,D)},onDidStartTerminalShellExecution(w,b,D){return N(Ae.onDidStartTerminalShellExecution)(w,b,D)},onDidEndTerminalShellExecution(w,b,D){return N(Ae.onDidEndTerminalShellExecution)(w,b,D)},get state(){return x.getState()},onDidChangeWindowState(w,b,D){return N(x.onDidChangeWindowState)(w,b,D)},showInformationMessage(w,...b){return wr.showMessage(P,Ut.Info,w,b[0],b.slice(1))},showWarningMessage(w,...b){return wr.showMessage(P,Ut.Warning,w,b[0],b.slice(1))},showErrorMessage(w,...b){return wr.showMessage(P,Ut.Error,w,b[0],b.slice(1))},showQuickPick(w,b,D){return Mr.showQuickPick(P,w,b,D)},showWorkspaceFolderPick(w){return Mr.showWorkspaceFolderPick(w)},showInputBox(w,b){return Mr.showInput(w,b)},showOpenDialog(w){return Et.showOpenDialog(P,w)},showSaveDialog(w){return Et.showSaveDialog(w)},createStatusBarItem(w,b,D){let Ce,st,Vt;return typeof w=="string"?(Ce=w,st=b,Vt=D):(st=w,Vt=b),$e.createStatusBarEntry(P,Ce,st,Vt)},setStatusBarMessage(w,b){return $e.setStatusBarMessage(w,b)},withScmProgress(w){return v.report("window.withScmProgress",P,"Use 'withProgress' instead."),Qi.withProgress(P,{location:Eo.SourceControl},(b,D)=>w({report(Ce){}}))},withProgress(w,b){return Qi.withProgress(P,w,b)},createOutputChannel(w,b){return ee.createOutputChannel(w,b,P)},createWebviewPanel(w,b,D,Ce){return Zr.createWebviewPanel(P,w,b,D,Ce)},createWebviewTextEditorInset(w,b,D,Ce){return H(P,"editorInsets"),bi.createWebviewEditorInset(w,b,D,Ce,P)},createTerminal(w,b,D){return typeof w=="object"?"pty"in w?se.createExtensionTerminal(w):se.createTerminalFromOptions(w):se.createTerminal(w,b,D)},registerTerminalLinkProvider(w){return se.registerLinkProvider(w)},registerTerminalProfileProvider(w,b){return se.registerProfileProvider(P,w,b)},registerTerminalQuickFixProvider(w,b){return H(P,"terminalQuickFixProvider"),se.registerTerminalQuickFixProvider(w,P.identifier.value,b)},registerTreeDataProvider(w,b){return cr.registerTreeDataProvider(w,b,P)},createTreeView(w,b){return cr.createTreeView(w,b,P)},registerWebviewPanelSerializer:(w,b)=>Zr.registerWebviewPanelSerializer(P,w,b),registerCustomEditorProvider:(w,b,D={})=>xt.registerCustomEditorProvider(P,w,b,D),registerFileDecorationProvider(w){return Y.registerFileDecorationProvider(w,P)},registerUriHandler(w){return ne.registerUriHandler(P,w)},createQuickPick(){return Mr.createQuickPick(P)},createInputBox(){return Mr.createInputBox(P)},get activeColorTheme(){return ws.activeColorTheme},onDidChangeActiveColorTheme(w,b,D){return N(ws.onDidChangeActiveColorTheme)(w,b,D)},registerWebviewViewProvider(w,b,D){return _t.registerWebviewViewProvider(P,w,b,D?.webviewOptions)},get activeNotebookEditor(){return we.activeNotebookEditor},onDidChangeActiveNotebookEditor(w,b,D){return N(we.onDidChangeActiveNotebookEditor)(w,b,D)},get visibleNotebookEditors(){return we.visibleNotebookEditors},get onDidChangeVisibleNotebookEditors(){return N(we.onDidChangeVisibleNotebookEditors)},onDidChangeNotebookEditorSelection(w,b,D){return N(Ge.onDidChangeNotebookEditorSelection)(w,b,D)},onDidChangeNotebookEditorVisibleRanges(w,b,D){return N(Ge.onDidChangeNotebookEditorVisibleRanges)(w,b,D)},showNotebookDocument(w,b){return we.showNotebookDocument(w,b)},registerExternalUriOpener(w,b,D){return H(P,"externalUriOpener"),cn.registerExternalUriOpener(P.identifier,w,b,D)},registerProfileContentHandler(w,b){return H(P,"profileContentHandlers"),oi.registerProfileContentHandler(P,w,b)},registerQuickDiffProvider(w,b,D,Ce){return H(P,"quickDiffProvider"),on.registerQuickDiffProvider(y(w),b,D,Ce)},get tabGroups(){return C.tabGroups},registerShareProvider(w,b){return H(P,"shareProvider"),an.registerShareProvider(y(w),b)}},Ie={get rootPath(){return v.report("workspace.rootPath",P,"Please use 'workspace.workspaceFolders' instead. More details: https://aka.ms/vscode-eliminating-rootpath"),n.getPath()},set rootPath(w){throw new Jn("rootPath")},getWorkspaceFolder(w){return n.getWorkspaceFolder(w)},get workspaceFolders(){return n.getWorkspaceFolders()},get name(){return n.name},set name(w){throw new Jn("name")},get workspaceFile(){return n.workspaceFile},set workspaceFile(w){throw new Jn("workspaceFile")},updateWorkspaceFolders:(w,b,...D)=>n.updateWorkspaceFolders(P,w,b||0,...D),onDidChangeWorkspaceFolders:function(w,b,D){return N(n.onDidChangeWorkspace)(w,b,D)},asRelativePath:(w,b)=>n.getRelativePath(w,b),findFiles:(w,b,D,Ce)=>n.findFiles(w,b,D,P.identifier,Ce),findFiles2:(w,b,D)=>(H(P,"findFiles2"),n.findFiles2(w,b,P.identifier,D)),findFiles2New:(w,b,D)=>(H(P,"findFiles2New"),n.findFiles2New(w,b,P.identifier,D)),findTextInFiles:(w,b,D,Ce)=>{H(P,"findTextInFiles");let st,Vt;return typeof b=="object"?(st=b,Vt=D):(st={},Vt=b,Ce=D),n.findTextInFiles(w,st||{},Vt,P.identifier,Ce)},findTextInFilesNew:(w,b,D)=>(H(P,"findTextInFilesNew"),H(P,"textSearchProviderNew"),n.findTextInFilesNew(w,b,P.identifier,D)),save:w=>n.save(w),saveAs:w=>n.saveAs(w),saveAll:w=>n.saveAll(w),applyEdit(w,b){return Ct.applyWorkspaceEdit(w,P,b)},createFileSystemWatcher:(w,b,D,Ce)=>{let st;return b&&typeof b!="boolean"?(H(P,"createFileSystemWatcher"),st={...b,correlate:!0}):st={ignoreCreateEvents:!!b,ignoreChangeEvents:!!D,ignoreDeleteEvents:!!Ce,correlate:!1},ni.createFileSystemWatcher(n,gr,P,w,st)},get textDocuments(){return G.getAllDocumentData().map(w=>w.document)},set textDocuments(w){throw new Jn("textDocuments")},openTextDocument(w){let b;const D=w;if(typeof w=="string")b=Promise.resolve(k.file(w));else if(k.isUri(w))b=Promise.resolve(w);else if(!D||typeof D=="object")b=G.createDocumentData(D);else throw new Error("illegal argument - uriOrFileNameOrOptions");return b.then(Ce=>(f.trace(`openTextDocument from ${P.identifier}`),Ce.scheme===Q.vscodeRemote&&!Ce.authority&&v.report("workspace.openTextDocument",P,"A URI of 'vscode-remote' scheme requires an authority."),G.ensureDocumentData(Ce).then(st=>st.document)))},onDidOpenTextDocument:(w,b,D)=>N(G.onDidAddDocument)(w,b,D),onDidCloseTextDocument:(w,b,D)=>N(G.onDidRemoveDocument)(w,b,D),onDidChangeTextDocument:(w,b,D)=>N(G.onDidChangeDocument)(w,b,D),onDidSaveTextDocument:(w,b,D)=>N(G.onDidSaveDocument)(w,b,D),onWillSaveTextDocument:(w,b,D)=>N(Pe.getOnWillSaveTextDocumentEvent(P))(w,b,D),get notebookDocuments(){return we.notebookDocuments.map(w=>w.apiNotebook)},async openNotebookDocument(w,b){let D;if(k.isUri(w))D=w,await we.openNotebookDocument(w);else if(typeof w=="string")D=k.revive(await we.createNotebookDocument({viewType:w,content:b}));else throw new Error("Invalid arguments");return we.getNotebookDocument(D).apiNotebook},onDidSaveNotebookDocument(w,b,D){return N(it.onDidSaveNotebookDocument)(w,b,D)},onDidChangeNotebookDocument(w,b,D){return N(it.onDidChangeNotebookDocument)(w,b,D)},onWillSaveNotebookDocument(w,b,D){return N(Yt.getOnWillSaveNotebookDocumentEvent(P))(w,b,D)},get onDidOpenNotebookDocument(){return N(we.onDidOpenNotebookDocument)},get onDidCloseNotebookDocument(){return N(we.onDidCloseNotebookDocument)},registerNotebookSerializer(w,b,D,Ce){return we.registerNotebookSerializer(P,w,b,D,zt(P,"notebookLiveShare")?Ce:void 0)},onDidChangeConfiguration:(w,b,D)=>N(gr.onDidChangeConfiguration)(w,b,D),getConfiguration(w,b){return b=arguments.length===1?void 0:b,gr.getConfiguration(w,b,P)},registerTextDocumentContentProvider(w,b){return le.registerTextDocumentContentProvider(w,b)},registerTaskProvider:(w,b)=>(v.report("window.registerTaskProvider",P,"Use the corresponding function on the 'tasks' namespace instead"),dt.registerTaskProvider(P,w,b)),registerFileSystemProvider(w,b,D){return Kg(Je.registerFileSystemProvider(P,w,b,D),i.addFileSystemProvider(w,b,D))},get fs(){return i.value},registerFileSearchProvider:(w,b)=>(H(P,"fileSearchProvider"),tt.registerFileSearchProviderOld(w,b)),registerTextSearchProvider:(w,b)=>(H(P,"textSearchProvider"),tt.registerTextSearchProviderOld(w,b)),registerAITextSearchProvider:(w,b)=>(H(P,"aiTextSearchProvider"),H(P,"textSearchProvider"),tt.registerAITextSearchProviderOld(w,b)),registerFileSearchProviderNew:(w,b)=>(H(P,"fileSearchProviderNew"),tt.registerFileSearchProvider(w,b)),registerTextSearchProviderNew:(w,b)=>(H(P,"textSearchProviderNew"),tt.registerTextSearchProvider(w,b)),registerAITextSearchProviderNew:(w,b)=>(H(P,"aiTextSearchProviderNew"),H(P,"textSearchProviderNew"),tt.registerAITextSearchProvider(w,b)),registerRemoteAuthorityResolver:(w,b)=>(H(P,"resolvers"),s.registerRemoteAuthorityResolver(w,b)),registerResourceLabelFormatter:w=>(H(P,"resolvers"),Gn.$registerResourceLabelFormatter(w)),getRemoteExecServer:w=>(H(P,"resolvers"),s.getRemoteExecServer(w)),onDidCreateFiles:(w,b,D)=>N(ni.onDidCreateFile)(w,b,D),onDidDeleteFiles:(w,b,D)=>N(ni.onDidDeleteFile)(w,b,D),onDidRenameFiles:(w,b,D)=>N(ni.onDidRenameFile)(w,b,D),onWillCreateFiles:(w,b,D)=>N(ni.getOnWillCreateFileEvent(P))(w,b,D),onWillDeleteFiles:(w,b,D)=>N(ni.getOnWillDeleteFileEvent(P))(w,b,D),onWillRenameFiles:(w,b,D)=>N(ni.getOnWillRenameFileEvent(P))(w,b,D),openTunnel:w=>(H(P,"tunnels"),g.openTunnel(P,w).then(b=>{if(!b)throw new Error("cannot open tunnel");return b})),get tunnels(){return H(P,"tunnels"),g.getTunnels()},onDidChangeTunnels:(w,b,D)=>(H(P,"tunnels"),N(g.onDidChangeTunnels)(w,b,D)),registerPortAttributesProvider:(w,b)=>(H(P,"portsAttributes"),g.registerPortsAttributesProvider(w,b)),registerTunnelProvider:(w,b)=>(H(P,"tunnelFactory"),g.registerTunnelProvider(w,b)),registerTimelineProvider:(w,b)=>(H(P,"timeline"),bs.registerTimelineProvider(w,b,P.identifier,Z.converter)),get isTrusted(){return n.trusted},requestWorkspaceTrust:w=>(H(P,"workspaceTrust"),n.requestWorkspaceTrust(w)),onDidGrantWorkspaceTrust:(w,b,D)=>N(n.onDidGrantWorkspaceTrust)(w,b,D),registerEditSessionIdentityProvider:(w,b)=>(H(P,"editSessionIdentityProvider"),n.registerEditSessionIdentityProvider(w,b)),onWillCreateEditSessionIdentity:(w,b,D)=>(H(P,"editSessionIdentityProvider"),N(n.getOnWillCreateEditSessionIdentityEvent(P))(w,b,D)),registerCanonicalUriProvider:(w,b)=>(H(P,"canonicalUriProvider"),n.registerCanonicalUriProvider(w,b)),getCanonicalUri:(w,b,D)=>(H(P,"canonicalUriProvider"),n.provideCanonicalUri(w,b,D))},Ve={get inputBox(){return v.report("scm.inputBox",P,"Use 'SourceControl.inputBox' instead"),jr.getLastInputBox(P)},createSourceControl(w,b,D){return jr.createSourceControl(P,w,b,D)}},pt={createCommentController(w,b){return qn.createCommentController(P,w,b)}},Wt={get activeDebugSession(){return xe.activeDebugSession},get activeDebugConsole(){return xe.activeDebugConsole},get breakpoints(){return xe.breakpoints},get activeStackItem(){return xe.activeStackItem},registerDebugVisualizationProvider(w,b){return H(P,"debugVisualization"),xe.registerDebugVisualizationProvider(P,w,b)},registerDebugVisualizationTreeProvider(w,b){return H(P,"debugVisualization"),xe.registerDebugVisualizationTree(P,w,b)},onDidStartDebugSession(w,b,D){return N(xe.onDidStartDebugSession)(w,b,D)},onDidTerminateDebugSession(w,b,D){return N(xe.onDidTerminateDebugSession)(w,b,D)},onDidChangeActiveDebugSession(w,b,D){return N(xe.onDidChangeActiveDebugSession)(w,b,D)},onDidReceiveDebugSessionCustomEvent(w,b,D){return N(xe.onDidReceiveDebugSessionCustomEvent)(w,b,D)},onDidChangeBreakpoints(w,b,D){return N(xe.onDidChangeBreakpoints)(w,b,D)},onDidChangeActiveStackItem(w,b,D){return N(xe.onDidChangeActiveStackItem)(w,b,D)},registerDebugConfigurationProvider(w,b,D){return xe.registerDebugConfigurationProvider(w,b,D||vg.Initial)},registerDebugAdapterDescriptorFactory(w,b){return xe.registerDebugAdapterDescriptorFactory(P,w,b)},registerDebugAdapterTrackerFactory(w,b){return xe.registerDebugAdapterTrackerFactory(w,b)},startDebugging(w,b,D){return!D||typeof D=="object"&&"configuration"in D?xe.startDebugging(w,b,{parentSession:D}):xe.startDebugging(w,b,D||{})},stopDebugging(w){return xe.stopDebugging(w)},addBreakpoints(w){return xe.addBreakpoints(w)},removeBreakpoints(w){return xe.removeBreakpoints(w)},asDebugSourceUri(w,b){return xe.asDebugSourceUri(w,b)}},vt={registerTaskProvider:(w,b)=>dt.registerTaskProvider(P,w,b),fetchTasks:w=>dt.fetchTasks(w),executeTask:w=>dt.executeTask(P,w),get taskExecutions(){return dt.taskExecutions},onDidStartTask:(w,b,D)=>N(dt.onDidStartTask)(w,b,D),onDidEndTask:(w,b,D)=>N(dt.onDidEndTask)(w,b,D),onDidStartTaskProcess:(w,b,D)=>N(dt.onDidStartTaskProcess)(w,b,D),onDidEndTaskProcess:(w,b,D)=>N(dt.onDidEndTaskProcess)(w,b,D)},Ur={createNotebookController(w,b,D,Ce,st){return At.createNotebookController(P,w,b,D,Ce,zt(P,"notebookMessaging")?st:void 0)},registerNotebookCellStatusBarItemProvider:(w,b)=>we.registerNotebookCellStatusBarItemProvider(P,w,b),createRendererMessaging(w){return Tt.createRendererMessaging(P,w)},createNotebookControllerDetectionTask(w){return H(P,"notebookKernelSource"),At.createNotebookControllerDetectionTask(P,w)},registerKernelSourceActionProvider(w,b){return H(P,"notebookKernelSource"),At.registerKernelSourceActionProvider(P,w,b)},onDidChangeNotebookCellExecutionState(w,b,D){return H(P,"notebookCellExecutionState"),N(At.onDidChangeNotebookCellExecutionState)(w,b,D)}},ai={t(...w){if(typeof w[0]=="string"){const b=w.shift(),D=!w||typeof w[0]!="object"?w:w[0];return q.getMessage(P.identifier.value,{message:b,args:D})}return q.getMessage(P.identifier.value,w[0])},get bundle(){return q.getBundle(P.identifier.value)},get uri(){return q.getBundleUri(P.identifier.value)}},Cc={transferActiveChat(w){return H(P,"interactive"),Xt.transferActiveChat(w)}},ah={getRelatedInformation(w,b){return H(P,"aiRelatedInformation"),U.getRelatedInformation(P,w,b)},registerRelatedInformationProvider(w,b){return H(P,"aiRelatedInformation"),U.registerRelatedInformationProvider(P,w,b)},registerEmbeddingVectorProvider(w,b){return H(P,"aiRelatedInformation"),ue.registerEmbeddingVectorProvider(P,w,b)}},ch={registerChatResponseProvider(w,b,D){return H(P,"chatProvider"),z.registerLanguageModel(P,w,b,D)},registerChatVariableResolver(w,b,D,Ce,st,Vt,Ic,gC){return H(P,"chatVariableResolver"),A.registerVariableResolver(P,w,b,D,Ce,st,Vt,Ic,gC?.id)},registerMappedEditsProvider(w,b){return H(P,"mappedEditsProvider"),Te.registerMappedEditsProvider(P,w,b)},registerMappedEditsProvider2(w){return H(P,"mappedEditsProvider"),ki.registerMappedEditsProvider(P,w)},createChatParticipant(w,b){return Xt.createChatAgent(P,w,b)},createDynamicChatParticipant(w,b,D){return H(P,"chatParticipantPrivate"),Xt.createDynamicChatAgent(P,w,b,D)},registerChatParticipantDetectionProvider(w){return H(P,"chatParticipantAdditions"),Xt.registerChatParticipantDetectionProvider(P,w)}},lh={selectChatModels:w=>z.selectLanguageModels(P,w??{}),onDidChangeChatModels:(w,b,D)=>z.onDidChangeProviders(w,b,D),registerChatModelProvider:(w,b,D)=>(H(P,"chatProvider"),z.registerLanguageModel(P,w,b,D)),get embeddingModels(){return H(P,"embeddings"),he.embeddingsModels},onDidChangeEmbeddingModels:(w,b,D)=>(H(P,"embeddings"),he.onDidChange(w,b,D)),registerEmbeddingsProvider(w,b){return H(P,"embeddings"),he.registerEmbeddingsProvider(P,w,b)},async computeEmbeddings(w,b,D){return H(P,"embeddings"),he.computeEmbeddings(w,b,D)},registerTool(w,b){return H(P,"lmTools"),O.registerTool(P,w,b)},invokeTool(w,b,D){return H(P,"lmTools"),O.invokeTool(w,b,D)},get tools(){return H(P,"lmTools"),O.tools}},Pc={registerSpeechProvider(w,b){return H(P,"speech"),ft.registerProvider(P.identifier,w,b)}};return{version:t.version,ai:ah,authentication:E,commands:S,comments:pt,chat:ch,debug:Wt,env:I,extensions:_,interactive:Cc,l10n:ai,languages:te,lm:lh,notebooks:Ur,scm:Ve,speech:Pc,tasks:vt,tests:R,window:ce,workspace:Ie,Breakpoint:Fa,TerminalOutputAnchor:O1,ChatResultFeedbackKind:Wl,ChatVariableLevel:Sv,ChatCompletionItem:HL,CallHierarchyIncomingCall:x9,CallHierarchyItem:U1,CallHierarchyOutgoingCall:E9,CancellationError:Er,CancellationTokenSource:wt,CandidatePortSource:Tm,CodeAction:_d,CodeActionKind:kt,CodeActionTriggerKind:El,CodeLens:Wd,Color:Ta,ColorInformation:Yd,ColorPresentation:Xd,ColorThemeKind:An,CommentMode:ov,CommentState:av,CommentThreadCollapsibleState:Fl,CommentThreadState:Ol,CommentThreadApplicability:Ml,CommentThreadFocus:jl,CompletionItem:Gd,CompletionItemKind:ke,CompletionItemTag:$l,CompletionList:Pa,CompletionTriggerKind:Ca,ConfigurationTarget:La,CustomExecution:K1,DebugAdapterExecutable:Oa,DebugAdapterInlineImplementation:Rl,DebugAdapterNamedPipeServer:Tl,DebugAdapterServer:Ma,DebugConfigurationProviderTriggerKind:vg,DebugConsoleMode:hf,DebugVisualization:NL,DecorationRangeBehavior:ko,Diagnostic:jd,DiagnosticRelatedInformation:bl,DiagnosticSeverity:pr,DiagnosticTag:bo,Disposable:_e,DocumentHighlight:Bd,DocumentHighlightKind:yl,MultiDocumentHighlight:zd,DocumentLink:Qd,DocumentSymbol:xl,EndOfLine:Oi,EnvironmentVariableMutatorType:Ea,EvaluatableExpression:of,InlineValueText:af,InlineValueVariableLookup:cf,InlineValueEvaluatableExpression:lf,InlineCompletionTriggerKind:Ll,EventEmitter:T,ExtensionKind:Po,ExtensionMode:za,ExternalUriOpenerPriority:pv,FileChangeType:ja,FileDecoration:uv,FileDecoration2:uv,FileSystemError:qt,FileType:Gr,FilePermission:kn,FoldingRange:nv,FoldingRangeKind:Us,FunctionBreakpoint:Co,InlineCompletionItem:V1,InlineCompletionList:q1,Hover:Ud,VerboseHover:Hd,HoverVerbosityAction:j1,IndentAction:Vw,Location:ii,MarkdownString:Jr,OverviewRulerLane:H0,ParameterInformation:H1,PortAutoForwardAction:mv,Position:Fe,ProcessExecution:Ra,ProgressLocation:Eo,QuickInputButtonLocation:lv,QuickInputButtons:Ul,Range:Re,RelativePattern:Na,Selection:js,SelectionRange:Sl,SemanticTokens:Ua,SemanticTokensBuilder:LL,SemanticTokensEdit:D9,SemanticTokensEdits:uf,SemanticTokensLegend:cv,ShellExecution:xo,ShellQuoting:Z1,SignatureHelp:z1,SignatureHelpTriggerKind:_1,SignatureInformation:B1,SnippetString:wo,SourceBreakpoint:$o,StandardTokenType:Tn,StatusBarAlignment:In,SymbolInformation:Sa,SymbolKind:lt,SymbolTag:kl,Task:Kd,TaskGroup:Il,TaskPanelKind:X1,TaskRevealKind:Y1,TaskScope:Dn,TerminalLink:EL,TerminalQuickFixTerminalCommand:$L,TerminalQuickFixOpener:SL,TerminalLocation:Q1,TerminalProfile:CL,TerminalExitReason:J1,TerminalShellExecutionCommandLineConfidence:Zd,TextDocumentSaveReason:Ia,TextEdit:Pn,SnippetTextEdit:M1,TextEditorCursorStyle:is,TextEditorLineNumbersStyle:Mi,TextEditorRevealType:Jd,TextEditorSelectionChangeKind:Da,SyntaxTokenType:Aa,TextDocumentChangeReason:Pl,ThemeColor:Al,ThemeIcon:vr,TreeItem:ef,TreeItemCheckboxState:ls,TreeItemCollapsibleState:So,TypeHierarchyItem:vv,UIKind:ku,Uri:k,ViewColumn:Cl,WorkspaceEdit:vo,DocumentPasteTriggerKind:rv,DocumentDropEdit:tv,DocumentDropOrPasteEditKind:sf,DocumentPasteEdit:DL,InlayHint:qd,InlayHintLabelPart:Vd,InlayHintKind:W1,RemoteAuthorityResolverError:xa,ResolvedAuthority:kL,ManagedResolvedAuthority:Od,SourceControlInputBoxValidationType:G1,ExtensionRuntime:wf,TimelineItem:dv,NotebookRange:Hs,NotebookCellKind:Io,NotebookCellExecutionState:Ba,NotebookCellData:ff,NotebookData:A9,NotebookRendererScript:R9,NotebookCellStatusBarAlignment:gf,NotebookEditorRevealType:mf,NotebookCellOutput:pf,NotebookCellOutputItem:T9,NotebookCellStatusBarItem:FL,NotebookControllerAffinity:hv,NotebookControllerAffinity2:vf,NotebookEdit:Md,NotebookKernelSourceAction:OL,NotebookVariablesRequestKind:Bl,PortAttributes:jL,LinkedEditingRanges:ML,TestResultState:fv,TestRunRequest:bf,TestMessage:yf,TestMessageStackFrame:UL,TestTag:zl,TestRunProfileKind:_a,TextSearchCompleteMessageType:gp,DataTransfer:Dl,DataTransferItem:tf,TestCoverageCount:kf,FileCoverage:_l,FileCoverage2:_l,StatementCoverage:L9,BranchCoverage:N9,DeclarationCoverage:F9,WorkspaceTrustState:gv,LanguageStatusSeverity:$a,QuickPickItemKind:Hl,InputBoxValidationSeverity:Ha,TabInputText:wv,TabInputTextDiff:Ef,TabInputTextMerge:O9,TabInputCustom:bv,TabInputNotebook:yv,TabInputNotebookDiff:kv,TabInputWebview:M9,TabInputTerminal:j9,TabInputInteractiveWindow:U9,TabInputChat:H9,TabInputTextMultiDiff:B9,TelemetryTrustedValue:y0,LogLevel:ye,EditSessionIdentityMatch:qw,InteractiveSessionVoteDirection:xv,ChatCopyKind:Ev,InteractiveEditorResponseFeedbackKind:$v,DebugStackFrame:P9,DebugThread:I9,RelatedInformationType:Pv,SpeechToTextStatus:Iv,TextToSpeechStatus:Dv,PartialAcceptTriggerKind:yo,KeywordRecognitionStatus:Av,ChatResponseMarkdownPart:Sf,ChatResponseFileTreePart:Cf,ChatResponseAnchorPart:Pf,ChatResponseProgressPart:Gl,ChatResponseProgressPart2:If,ChatResponseReferencePart:Bs,ChatResponseReferencePart2:Bs,ChatResponseCodeCitationPart:Tf,ChatResponseCodeblockUriPart:Af,ChatResponseWarningPart:Jl,ChatResponseTextEditPart:Ql,ChatResponseMarkdownWithVulnerabilitiesPart:Vl,ChatResponseCommandButtonPart:Df,ChatResponseDetectedParticipantPart:ql,ChatResponseConfirmationPart:$f,ChatResponseMovePart:Rf,ChatResponseReferencePartStatusKind:Cv,ChatRequestTurn:z9,ChatResponseTurn:_9,ChatLocation:ji,ChatRequestEditorData:W9,ChatRequestNotebookData:V9,LanguageModelChatMessageRole:hi,LanguageModelChatMessage:q9,LanguageModelChatMessageToolResultPart:Lf,LanguageModelChatResponseTextPart:Xl,LanguageModelChatResponseToolCallPart:Yl,LanguageModelError:zs,NewSymbolName:TL,NewSymbolNameTag:sv,NewSymbolNameTriggerKind:Nl,InlineEdit:BL,InlineEditTriggerKind:Zl,ExcludeSettingOptions:fi,TextSearchContextNew:pp,TextSearchMatchNew:Vs,TextSearchCompleteMessageTypeNew:gp}}}var wg,Pb=class{constructor(t,r,i,s,n,o,a){this.c=t,this.d=r,this.e=i,this.f=s,this.g=n,this.h=o,this.i=a,this.a=new Map,this.b=[]}async install(){this.j(),Nt("code/extHost/willWaitForConfig");const t=await this.f.getConfigProvider();Nt("code/extHost/didWaitForConfig");const r=await this.g.getExtensionPathIndex();this.register(new kH(this.c,r,this.d,t,this.i)),this.register(this.e.createInstance(Ib)),this.h.remote.isRemote&&this.register(this.e.createInstance(Db,r,this.h.environment.appUriScheme))}register(t){if("nodeModuleName"in t)if(Array.isArray(t.nodeModuleName))for(const r of t.nodeModuleName)this.a.set(r,t);else this.a.set(t.nodeModuleName,t);typeof t.alternativeModuleName=="function"&&this.b.push(r=>t.alternativeModuleName(r))}};Pb=__decorate([__param(2,Qh),__param(3,pi),__param(4,Js),__param(5,er),__param(6,Ne)],Pb);var Ib=class{static{wg=this}static{this.a=new Map([["vscode-ripgrep","@vscode/ripgrep"],["vscode-windows-registry","@vscode/windows-registry"]])}constructor(t){if(t.environment.appRoot&&wg.a.size){const r=fn(this.c(t.environment.appRoot.fsPath)),i="[a-z0-9_.-]",s=`@${i}+\\/${i}+|${i}+`,n="node_modules|node_modules\\.asar(?:\\.unpacked)?";this.b=new RegExp(`^(${r}/${n}\\/)(${s})(.*)$`,"i")}}alternativeModuleName(t){if(!this.b)return;const r=this.b.exec(this.c(t));if(!r)return;const[,i,s,n]=r,o=wg.a.get(s);if(o!==void 0)return console.warn(`${s} as been renamed to ${o}, please update your imports`),i+o+n}c(t){return t.replace(/\\/g,"/")}};Ib=wg=__decorate([__param(0,er)],Ib);var kH=class{constructor(e,t,r,i,s){this.c=e,this.d=t,this.e=r,this.f=i,this.g=s,this.nodeModuleName="vscode",this.a=new Os}load(e,t){const r=this.d.findSubstr(t);if(r){let i=this.a.get(r.identifier);return i||(i=this.c(r,this.e,this.f),this.a.set(r.identifier,i)),i}if(!this.b){let i="";this.d.forEach((s,n)=>i+=`	${n} -> ${s.identifier.value}
`),this.g.warn(`Could not identify extension for 'vscode' require call from ${t}. These are the extension path mappings: 
${i}`),this.b=this.c(yN,this.e,this.f)}return this.b}},Db=class{constructor(t,r,i){this.e=t,this.f=r,this.nodeModuleName=["open","opn"],this.d=i.getProxy(K.MainThreadTelemetry);const s=i.getProxy(K.MainThreadWindow);this.c=(n,o)=>{const a=k.parse(n);return o?this.g(n,o):a.scheme==="http"||a.scheme==="https"?s.$openUri(a,n,{allowTunneling:!0}):a.scheme==="mailto"||a.scheme===this.f?s.$openUri(a,n,{}):this.g(n,o)}}load(t,r,i){const s=this.e.findSubstr(r);return s&&(this.a=s.identifier.value,this.h()),this.b=i(t),this.c}g(t,r){return this.i(),this.b(t,r)}h(){this.a&&this.d.$publicLog2("shimming.open",{extension:this.a})}i(){this.a&&this.d.$publicLog2("shimming.open.call.noForward",{extension:this.a})}};Db=__decorate([__param(2,Ue)],Db);import{LogLevel as Bo,createHttpPatch as b$,createProxyResolver as xH,createTlsPatch as EH,createNetPatch as SH,loadSystemCertificates as $H}from"@vscode/proxy-agent";import{createRequire as CH}from"node:module";var wc=CH(import.meta.url),y$=wc("http"),bg=wc("https"),k$=wc("tls"),x$=wc("net"),E$=!1,S$=!1;function PH(e,t,r,i,s,n,o){DH(t,s,n,o);const a=n.environment.useHostProxy,c=typeof a=="boolean"?a:!n.remote.isRemote,l={resolveProxy:d=>e.resolveProxy(d),lookupProxyAuthorization:NH.bind(void 0,e,i,s,t,{},{},n.remote.isRemote,c),getProxyURL:()=>t.getConfiguration("http").get("proxy"),getProxySupport:()=>t.getConfiguration("http").get("proxySupport")||"off",getNoProxyConfig:()=>t.getConfiguration("http").get("noProxy")||[],addCertificatesV1:()=>TH(t),addCertificatesV2:()=>RH(t),log:i,getLogLevel:()=>{const d=i.getLevel();switch(d){case ye.Trace:return Bo.Trace;case ye.Debug:return Bo.Debug;case ye.Info:return Bo.Info;case ye.Warning:return Bo.Warning;case ye.Error:return Bo.Error;case ye.Off:return Bo.Off;default:return f(d)}function f(g){return i.error("Unknown log level",g),Bo.Debug}},proxyResolveTelemetry:()=>{},useHostProxy:c,loadAdditionalCertificates:async()=>{const d=[];if(n.remote.isRemote&&d.push($H({log:i})),c){i.trace("ProxyResolver#loadAdditionalCertificates: Loading certificates from main process");const f=e.loadCertificates();f.then(g=>i.trace("ProxyResolver#loadAdditionalCertificates: Loaded certificates from main process",g.length)),d.push(f)}return n.environment.extensionTestsLocationURI&&bg.globalAgent.testCertificates?.length&&(i.trace("ProxyResolver#loadAdditionalCertificates: Loading test certificates"),d.push(Promise.resolve(bg.globalAgent.testCertificates))),(await Promise.all(d)).flat()},env:process.env},u=xH(l),h=AH(l,u);return LH(r,h)}var IH=["content-length","host","trailer","te","upgrade","cookie2","keep-alive","transfer-encoding","set-cookie"];function DH(e,t,r,i){if(!r.remote.isRemote&&!globalThis.__originalFetch){const s=globalThis.fetch;globalThis.__originalFetch=s;let n=e.getConfiguration("http").get("electronFetch",S$);i.add(e.onDidChangeConfiguration(a=>{a.affectsConfiguration("http.electronFetch")&&(n=e.getConfiguration("http").get("electronFetch",S$))}));const o=wc("electron");globalThis.fetch=async function(c,l){function u(C){return l&&C in l?l[C]:typeof c=="object"&&"cache"in c?c[C]:void 0}const h=typeof c=="string"?c:"cache"in c?c.url:c.toString(),d=h.startsWith("data:");d&&bc(t,"data");const f=h.startsWith("blob:");f&&bc(t,"blob");const g=u("redirect")==="manual";g&&bc(t,"manualRedirect");const v=u("integrity");if(v&&bc(t,"integrity"),!n||d||f||g||v){const C=await s(c,l);return $$(t,C,h),C}if(l?.headers){const C=new Headers(l.headers);for(const L of IH)C.delete(L);l={...l,headers:C}}const x=c instanceof URL?c.toString():c,$=await o.net.fetch(x,l);return $$(t,$,h),$}}}function $$(e,t,r){const i=t.url;Object.defineProperty(t,"url",{get(){return bc(e,"url"),i||r}});const s=t.type;Object.defineProperty(t,"type",{get(){return bc(e,"typeProperty"),s!=="default"?s:"basic"}})}var C$={url:0,typeProperty:0,data:0,blob:0,integrity:0,manualRedirect:0},yg;function bc(e,t){C$[t]++||(yg&&clearTimeout(yg),yg=setTimeout(()=>{e.$publicLog2("fetchFeatureUse",C$)},1e4),yg.unref())}function AH(e,t){function r(i,s){return Object.assign(i.default||i,s)}return{http:r(y$,b$(e,y$,t)),https:r(bg,b$(e,bg,t)),net:r(x$,SH(e,x$)),tls:r(k$,EH(e,k$))}}function TH(e){const t=e.getConfiguration("http");return!t.get("experimental.systemCertificatesV2",E$)&&!!t.get("systemCertificates")}function RH(e){const t=e.getConfiguration("http");return!!t.get("experimental.systemCertificatesV2",E$)&&!!t.get("systemCertificates")}var P$=new Map;function LH(e,t){return e.getExtensionPathIndex().then(r=>{const i=wc("module"),s=i._load;i._load=function(o,a,c){if(o==="net")return t.net;if(o==="tls")return t.tls;if(o!=="http"&&o!=="https")return s.apply(this,arguments);const l=r.findSubstr(k.file(a.filename));let u=P$.get(l);if(u||P$.set(l,u={}),!u[o]){const h=t[o];u[o]={...h}}return u[o]}})}async function NH(e,t,r,i,s,n,o,a,c,l,u){const h=s[c];l&&(s[c]=l),t.trace("ProxyResolver#lookupProxyAuthorization callback",`proxyURL:${c}`,`proxyAuthenticate:${l}`,`proxyAuthenticateCache:${h}`);const d=l||h,f=Array.isArray(d)?d:typeof d=="string"?[d]:[];if(FH(r,f,o),f.some(v=>/^(Negotiate|Kerberos)( |$)/i.test(v))&&!u.kerberosRequested){u.kerberosRequested=!0;try{const v=await import("kerberos"),x=new URL(c),$=i.getConfiguration("http").get("proxyKerberosServicePrincipal")||(process.platform==="win32"?`HTTP/${x.hostname}`:`HTTP@${x.hostname}`);return t.debug("ProxyResolver#lookupProxyAuthorization Kerberos authentication lookup",`proxyURL:${c}`,`spn:${$}`),"Negotiate "+await(await v.initializeClient($)).step("")}catch(v){t.debug("ProxyResolver#lookupProxyAuthorization Kerberos authentication failed",v)}if(o&&a){t.debug("ProxyResolver#lookupProxyAuthorization Kerberos authentication lookup on host",`proxyURL:${c}`);const v=await e.lookupKerberosAuthorization(c);if(v)return"Negotiate "+v}}const g=f.find(v=>/^Basic( |$)/i.test(v));if(g)try{const v=n[c];if(v)if(u.basicAuthCacheUsed)t.debug("ProxyResolver#lookupProxyAuthorization Basic authentication deleting cached credentials",`proxyURL:${c}`),delete n[c];else return t.debug("ProxyResolver#lookupProxyAuthorization Basic authentication using cached credentials",`proxyURL:${c}`),u.basicAuthCacheUsed=!0,v;u.basicAuthAttempt=(u.basicAuthAttempt||0)+1;const x=/ realm="([^"]+)"/i.exec(g)?.[1];t.debug("ProxyResolver#lookupProxyAuthorization Basic authentication lookup",`proxyURL:${c}`,`realm:${x}`);const $=new URL(c),C={scheme:"basic",host:$.hostname,port:Number($.port),realm:x||"",isProxy:!0,attempt:u.basicAuthAttempt},L=await e.lookupAuthorization(C);if(L){t.debug("ProxyResolver#lookupProxyAuthorization Basic authentication received credentials",`proxyURL:${c}`,`realm:${x}`);const F="Basic "+Buffer.from(`${L.username}:${L.password}`).toString("base64");return n[c]=F,F}else t.debug("ProxyResolver#lookupProxyAuthorization Basic authentication received no credentials",`proxyURL:${c}`,`realm:${x}`)}catch(v){t.error("ProxyResolver#lookupProxyAuthorization Basic authentication failed",v)}}var I$=!1;function FH(e,t,r){I$||!t.length||(I$=!0,e.$publicLog2("proxyAuthenticationRequest",{authenticationType:t.map(i=>i.split(" ")[0]).join(","),extensionHostType:r?"remote":"local"}))}import{tmpdir as OH}from"os";var Ab=class extends ae{constructor(t,r){super();const i=t.getProxy(K.MainThreadDownloadService);r.registerCommand(!1,"_workbench.downloadResource",async s=>{const n=k.file(bt(OH(),ir()));return await i.$download(s,n),n})}};Ab=__decorate([__param(0,Ue),__param(1,zi)],Ab);import*as MH from"http";import*as D$ from"fs";var jH=class{constructor(e,t,r){this.b=e,this.c=t,this.f=r,this.a=MH.createServer((i,s)=>this.h(i,s)),this.g().catch(i=>(t.error(i),""))}get ipcHandlePath(){return this.f}async g(){try{this.a.listen(this.ipcHandlePath),this.a.on("error",e=>this.c.error(e))}catch{this.c.error("Could not start open from terminal server.")}return this.f}h(e,t){const r=(s,n)=>{t.writeHead(s,{"content-type":"application/json"}),t.end(JSON.stringify(n||null),o=>o&&this.c.error(o))},i=[];e.setEncoding("utf8"),e.on("data",s=>i.push(s)),e.on("end",async()=>{try{const s=JSON.parse(i.join(""));let n;switch(s.type){case"open":n=await this.i(s);break;case"openExternal":n=await this.j(s);break;case"status":n=await this.l(s);break;case"extensionManagement":n=await this.k(s);break;default:r(404,`Unknown message type: ${s.type}`);break}r(200,n)}catch(s){const n=s instanceof Error?s.message:JSON.stringify(s);r(500,n),this.c.error("Error while processing pipe request",s)}})}async i(e){const{fileURIs:t,folderURIs:r,forceNewWindow:i,diffMode:s,mergeMode:n,addMode:o,forceReuseWindow:a,gotoLineMode:c,waitMarkerFilePath:l,remoteAuthority:u}=e,h=[];if(Array.isArray(r))for(const v of r)try{h.push({folderUri:k.parse(v)})}catch{}if(Array.isArray(t))for(const v of t)try{QA(v)?h.push({workspaceUri:k.parse(v)}):h.push({fileUri:k.parse(v)})}catch{}const d=l?k.file(l):void 0,g={forceNewWindow:i,diffMode:s,mergeMode:n,addMode:o,gotoLineMode:c,forceReuseWindow:a,preferNewWindow:!a&&!d&&!o,waitMarkerFileURI:d,remoteAuthority:u};this.b.executeCommand("_remoteCLI.windowOpen",h,g)}async j(e){for(const t of e.uris){const r=k.parse(t),i=r.scheme==="file"?r:t;await this.b.executeCommand("_remoteCLI.openExternal",i)}}async k(e){const t=i=>i?.map(s=>/\.vsix$/i.test(s)?k.parse(s):s),r={list:e.list,install:t(e.install),uninstall:t(e.uninstall),force:e.force};return await this.b.executeCommand("_remoteCLI.manageExtensions",r)}async l(e){return await this.b.executeCommand("_remoteCLI.getSystemStatus")}dispose(){this.a.close(),this.f&&process.platform!=="win32"&&D$.existsSync(this.f)&&D$.unlinkSync(this.f)}},Tb=class extends jH{constructor(t,r){super(t,r,J2())}};Tb=__decorate([__param(0,zi),__param(1,Ne)],Tb);var Rb=class{constructor(t,r){this.a=t.getProxy(K.MainThreadConsole),this.b=r.consoleForward.includeStack,this.c=r.consoleForward.logNative,this.d("info","log"),this.d("log","log"),this.d("warn","warn"),this.d("debug","debug"),this.d("error","error")}d(t,r){const i=this,s=console[t];Object.defineProperty(console,t,{set:()=>{},get:()=>function(){i.e(t,r,s,arguments)}})}e(t,r,i,s){this.a.$logExtensionHostMessage({type:"__$console",severity:r,arguments:HH(s,this.b)}),this.c&&this.f(t,i,s)}};Rb=__decorate([__param(0,Ue),__param(1,er)],Rb);var UH=1e5;function HH(e,t){const r=[];if(e.length)for(let i=0;i<e.length;i++){let s=e[i];if(typeof s>"u")s="undefined";else if(s instanceof Error){const n=s;n.stack?s=n.stack:s=n.toString()}r.push(s)}if(t){const i=new Error().stack;i&&r.push({__$stack:i.split(`
`).slice(3).join(`
`)})}try{const i=Y2(r);return i.length>UH?"Output omitted for a large object that exceeds the limits":i}catch(i){return`Output omitted for an object that cannot be inspected ('${i.toString()}')`}}var BH=1024*1024,Lb=class extends Rb{constructor(t,r){super(t,r),this.g=!1,this.j("stderr","error"),this.j("stdout","log")}f(t,r,i){const s=t==="error"||t==="warn"?process.stderr:process.stdout;this.g=!0,s.write(`
START_NATIVE_LOG
`),r.apply(console,i),s.write(`
END_NATIVE_LOG
`),this.g=!1}j(t,r){const i=process[t],s=i.write;let n="";Object.defineProperty(i,"write",{set:()=>{},get:()=>(o,a,c)=>{if(!this.g){n+=o.toString(a);const l=n.length>BH?n.length:n.lastIndexOf(`
`);l!==-1&&(console[r](n.slice(0,l)),n=n.slice(l+1))}s.call(i,o,a,c)}})}};Lb=__decorate([__param(0,Ue),__param(1,er)],Lb);import{promises as zn}from"fs";async function zH(e,t,r,i,s,n){let o;try{await _H(e,t,r,i,s,n)}catch(a){o=a}finally{o&&s.errorTransformer&&(o=s.errorTransformer(o)),typeof o<"u"&&r.error(o),r.end()}}async function _H(e,t,r,i,s,n){Nb(n);const o=await e.open(t,{create:!1});try{Nb(n);let a=0,c=0,l=s&&typeof s.length=="number"?s.length:void 0,u=re.alloc(Math.min(s.bufferSize,typeof l=="number"?l:s.bufferSize)),h=s&&typeof s.position=="number"?s.position:0,d=0;do c=await e.read(o,h,u.buffer,d,u.byteLength-d),h+=c,d+=c,a+=c,typeof l=="number"&&(l-=c),d===u.byteLength&&(await r.write(i(u)),u=re.alloc(Math.min(s.bufferSize,typeof l=="number"?l:s.bufferSize)),d=0);while(c>0&&(typeof l!="number"||l>0)&&Nb(n)&&WH(a,s));if(d>0){let f=d;typeof l=="number"&&(f=Math.min(d,l)),r.write(i(u.slice(0,f)))}}catch(a){throw yT(a)}finally{await e.close(o)}}function Nb(e){if(e.isCancellationRequested)throw Ac();return!0}function WH(e,t){if(typeof t?.limits?.size=="number"&&e>t.limits.size)throw Fs(p(1914,null),ge.FileTooLarge);return!0}var VH=class extends ae{constructor(e,t){super(),this.a=e,this.b=t,this.c=this.B(new T),this.onDidChangeFile=this.c.event,this.g=this.B(new T),this.onDidWatchError=this.g.event,this.j=[],this.m=this.B(new Rh(0)),this.y=[],this.z=this.B(new Rh(0))}watch(e,t){return t.recursive||this.b?.watcher?.forceUniversal?this.n(e,t):this.C(e,t)}n(e,t){const r=this.r(e,t),i=ky(this.j,r);return this.s(),me(()=>{i(),this.s()})}r(e,t){const r={path:this.L(e),excludes:t.excludes,includes:t.includes,recursive:t.recursive,filter:t.filter,correlationId:t.correlationId};if(zj(r)){const i=this.b?.watcher?.recursive?.usePolling;i===!0?r.pollingInterval=this.b?.watcher?.recursive?.pollingInterval??5e3:Array.isArray(i)&&i.includes(r.path)&&(r.pollingInterval=this.b?.watcher?.recursive?.pollingInterval??5e3)}return r}s(){this.m.trigger(()=>this.t()).catch(e=>It(e))}t(){return this.h||(this.h=this.B(this.u(e=>this.c.fire(vS(e)),e=>this.H(e),this.a.getLevel()===ye.Trace)),this.B(this.a.onDidChangeLogLevel(()=>{this.h?.setVerboseLogging(this.a.getLevel()===ye.Trace)}))),this.h.watch(this.j)}C(e,t){const r={path:this.L(e),excludes:t.excludes,includes:t.includes,recursive:!1,filter:t.filter,correlationId:t.correlationId},i=ky(this.y,r);return this.D(),me(()=>{i(),this.D()})}D(){this.z.trigger(()=>this.F()).catch(e=>It(e))}F(){return this.w||(this.w=this.B(this.G(e=>this.c.fire(vS(e)),e=>this.H(e),this.a.getLevel()===ye.Trace)),this.B(this.a.onDidChangeLogLevel(()=>{this.w?.setVerboseLogging(this.a.getLevel()===ye.Trace)}))),this.w.watch(this.y)}H(e){e.type==="error"&&this.g.fire(e.message),this.I(e)}I(e){this.a[e.type](e.message)}J(e){return Ss(e.fsPath)}L(e){const t=this.J(e);return uI(t)}};import{fork as qH}from"child_process";function GH(e){const t=e;return t&&typeof t.type=="string"&&typeof t.severity=="string"}function JH(e){const t=[];let r;try{const i=JSON.parse(e.arguments),s=i[i.length-1];s&&s.__$stack&&(i.pop(),r=s.__$stack),t.push(...i)}catch{t.push("Unable to log remote console arguments",e.arguments)}return{args:t,stack:r}}function QH(e){if(!e)return e;const t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function YH(e,t){const{args:r,stack:i}=JH(e),s=typeof r[0]=="string"&&r.length===1;let n=QH(i);n&&(n=`(${n.trim()})`);let o=[];if(typeof r[0]=="string"?n&&s?o=[`%c[${t}] %c${r[0]} %c${n}`,yc("blue"),yc(""),yc("grey")]:o=[`%c[${t}] %c${r[0]}`,yc("blue"),yc(""),...r.slice(1)]:o=[`%c[${t}]%`,yc("blue"),...r],n&&!s&&o.push(n),typeof console[e.severity]!="function")throw new Error("Unknown console method");console[e.severity].apply(console,o)}function yc(e){return`color: ${e}`}var XH=class{constructor(e,t){this.i=e,this.j=t,this.c=new Set,this.g=new Map,this.h=new T,this.onDidProcessExit=this.h.event;const r=t&&t.timeout?t.timeout:6e4;this.b=new O4(r),this.d=null,this.f=null}getChannel(e){const t=this;return{call(r,i,s){return t.k(e,r,i,s)},listen(r,i){return t.l(e,r,i)}}}k(e,t,r,i=Ke.None){if(!this.b)return Promise.reject(new Error("disposed"));if(i.isCancellationRequested)return Promise.reject(Ac());this.b.cancel();const s=this.n(e),n=$s(c=>s.call(t,r,c)),o=i.onCancellationRequested(()=>n.cancel()),a=me(()=>n.cancel());return this.c.add(a),n.finally(()=>{o.dispose(),this.c.delete(a),this.c.size===0&&this.b&&this.b.trigger(()=>this.o())}),n}l(e,t,r){if(!this.b)return Qe.None;this.b.cancel();let i;const s=new T({onWillAddFirstListener:()=>{i=this.n(e).listen(t,r)(s.fire,s),this.c.add(i)},onDidRemoveLastListener:()=>{this.c.delete(i),i.dispose(),this.c.size===0&&this.b&&this.b.trigger(()=>this.o())}});return s.event}get m(){if(!this.f){const e=this.j&&this.j.args?this.j.args:[],t=Object.create(null);t.env={...ut(process.env),VSCODE_PARENT_PID:String(process.pid)},this.j&&this.j.env&&(t.env={...t.env,...this.j.env}),this.j&&this.j.freshExecArgv&&(t.execArgv=[]),this.j&&typeof this.j.debug=="number"&&(t.execArgv=["--nolazy","--inspect="+this.j.debug]),this.j&&typeof this.j.debugBrk=="number"&&(t.execArgv=["--nolazy","--inspect-brk="+this.j.debugBrk]),t.execArgv===void 0&&(t.execArgv=process.execArgv.filter(u=>!/^--inspect(-brk)?=/.test(u)).filter(u=>!u.startsWith("--vscode-"))),NO(t.env),this.d=qH(this.i,e,t);const r=new T,s=Qe.fromNodeEventEmitter(this.d,"message",u=>u)(u=>{if(GH(u)){YH(u,`IPC Library: ${this.j.serverName}`);return}r.fire(re.wrap(Buffer.from(u,"base64")))}),n=this.j.useQueue?OO(this.d):this.d,o=u=>this.d&&this.d.connected&&n.send(u.buffer.toString("base64")),a=r.event,c={send:o,onMessage:a};this.f=new l5(c);const l=()=>this.o();process.once("exit",l),this.d.on("error",u=>console.warn('IPC "'+this.j.serverName+'" errored with '+u)),this.d.on("exit",(u,h)=>{process.removeListener("exit",l),s.dispose(),this.c.forEach(d=>Si(d)),this.c.clear(),u!==0&&h!=="SIGTERM"&&console.warn('IPC "'+this.j.serverName+'" crashed with exit code '+u+" and signal "+h),this.b?.cancel(),this.o(),this.h.fire({code:u,signal:h})})}return this.f}n(e){let t=this.g.get(e);return t||(t=this.m.getChannel(e),this.g.set(e,t)),t}o(){this.f&&(this.d&&(this.d.kill(),this.d=null),this.f=null,this.g.clear())}dispose(){this.h.dispose(),this.b?.cancel(),this.b=void 0,this.o(),this.c.clear()}},ZH=class extends Wj{constructor(e,t,r){super(e,t,r),this.s()}r(e){const t=e.add(new XH(pm.asFileUri("bootstrap-fork").fsPath,{serverName:"File Watcher",args:["--type=fileWatcher"],env:{VSCODE_AMD_ENTRYPOINT:"vs/platform/files/node/watcher/watcherMain",VSCODE_PIPE_LOGGING:"true",VSCODE_VERBOSE_LOGGING:"true"}}));return e.add(t.onDidProcessExit(({code:r,signal:i})=>this.t(`terminated by itself with code ${r}, signal: ${i} (ETERM)`))),Cm.toService(N2(t.getChannel("watcher")))}};import{watchFile as KH,unwatchFile as eB}from"fs";var tB=class extends ae{constructor(){super(),this.a=this.B(new T),this.onDidChangeFile=this.a.event,this.b=this.B(new T),this.onDidLogMessage=this.b.event,this.c=this.B(new T),this.f=this.c.event,this.g=new Map,this.h=new Map,this.j=this.B(new ph),this.m=new Set,this.n=this.B(new Rh(this.y())),this.r=5007,this.s=new vn,this.R=!1,this.B(this.f(e=>this.z({id:this.u(e),correlationId:this.t(e)?e.correlationId:void 0,path:e.path})))}t(e){return gS(e)}u(e){return this.t(e)?e.correlationId:As(e)}async watch(e){this.s.isSettled||this.s.complete(),this.s=new vn;try{this.g.clear(),this.h.clear();for(const t of e)this.t(t)?this.g.set(t.correlationId,t):this.h.set(this.u(t),t);for(const[t]of this.j)!this.h.has(t)&&!this.g.has(t)&&(this.j.deleteAndDispose(t),this.m.delete(t));return await this.w(!1)}finally{this.s.complete()}}w(e){const t=[];for(const[r,i]of[...this.h,...this.g])this.j.has(r)||t.push(i);return this.n.trigger(()=>this.N(t),e?this.y():0)}y(){return 800}isSuspended(e){const t=this.u(e);return this.m.has(t)?"polling":this.j.has(t)}async z(e){if(this.j.has(e.id))return;const t=new be;this.j.set(e.id,t),await this.s.p,!t.isDisposed&&(this.D(e,t),this.w(!0))}C(e){this.j.deleteAndDispose(e.id),this.m.delete(e.id),this.w(!1)}D(e,t){this.F(e,t)?(this.P(`reusing an existing recursive watcher to monitor ${e.path}`),this.m.delete(e.id)):(this.G(e,t),this.m.add(e.id))}F(e,t){const r=this.O?.subscribe(e.path,(i,s)=>{t.isDisposed||(i?this.D(e,t):s?.type===1&&this.H(e))});return r?(t.add(r),!0):!1}G(e,t){let r=!1;const i=(s,n)=>{if(t.isDisposed)return;const o=this.I(s),a=this.I(n),c=r;r=o,!o&&(a||c)&&this.H(e)};this.P(`starting fs.watchFile() on ${e.path} (correlationId: ${e.correlationId})`);try{KH(e.path,{persistent:!1,interval:this.r},i)}catch(s){this.Q(`fs.watchFile() failed with error ${s} on path ${e.path} (correlationId: ${e.correlationId})`)}t.add(me(()=>{this.P(`stopping fs.watchFile() on ${e.path} (correlationId: ${e.correlationId})`);try{eB(e.path,i)}catch(s){this.Q(`fs.unwatchFile() failed with error ${s} on path ${e.path} (correlationId: ${e.correlationId})`)}}))}H(e){this.P(`detected ${e.path} exists again, resuming watcher (correlationId: ${e.correlationId})`);const t={resource:k.file(e.path),type:1,cId:e.correlationId};this.a.fire([t]),this.J(t,e),this.C(e)}I(e){return e.ctimeMs===0&&e.ino===0}async stop(){this.j.clearAndDisposeAll(),this.m.clear()}J(e,t){if(this.R){const r=` >> normalized ${e.type===1?"[ADDED]":e.type===2?"[DELETED]":"[CHANGED]"} ${e.resource.fsPath}`;this.L(r,t)}}L(e,t){this.R&&this.P(`${e}${typeof t.correlationId=="number"?` <${t.correlationId}> `:""}`)}M(e){return`${e.path} (excludes: ${e.excludes.length>0?e.excludes:"<none>"}, includes: ${e.includes&&e.includes.length>0?JSON.stringify(e.includes):"<all>"}, filter: ${Jj(e.filter)}, correlationId: ${typeof e.correlationId=="number"?e.correlationId:"<none>"})`}async setVerboseLogging(e){this.R=e}};import{watch as rB,promises as iB}from"fs";var sB=class _g extends ae{static{this.a=100}static{this.b=75}get isReusingRecursiveWatcher(){return this.n}get failed(){return this.r}constructor(t,r,i,s,n,o){super(),this.s=t,this.t=r,this.u=i,this.w=s,this.y=n,this.z=o,this.c=this.B(new BI({maxWorkChunkSize:100,throttleDelay:200,maxBufferedWork:1e4},a=>this.u(a))),this.f=this.B(new HI(a=>this.M(a),_g.b)),this.g=bS(this.s.path,this.s.excludes),this.h=this.s.includes?bS(this.s.path,this.s.includes):void 0,this.j=gS(this.s)?this.s.filter:void 0,this.m=new wt,this.ready=this.C(),this.n=!1,this.r=!1}async C(){try{const t=await this.F(this.s);if(this.m.token.isCancellationRequested)return;const r=await iB.stat(t);if(this.m.token.isCancellationRequested)return;this.B(await this.G(t,r.isDirectory()))}catch(t){t.code!=="ENOENT"?this.O(t):this.Q(`ignoring a path for watching who's stat info failed to resolve: ${this.s.path} (error: ${t})`),this.D()}}D(){this.r=!0,this.w?.()}async F(t){let r=t.path;try{r=await gt.realpath(t.path),t.path===r&&(r=await Em(t.path,this.m.token)??t.path),t.path!==r&&this.Q(`correcting a path to watch that seems to be a symbolic link or wrong casing (original: ${t.path}, real: ${r})`)}catch{}return r}async G(t,r){const i=new be;return this.H(t,r,i)?(this.Q(`reusing an existing recursive watcher for ${this.s.path}`),this.n=!0):(this.n=!1,await this.I(t,r,i)),i}H(t,r,i){if(r)return!1;const s=k.file(this.s.path),n=this.t?.subscribe(this.s.path,async(o,a)=>{if(!i.isDisposed)if(o){const c=await this.G(t,r);i.isDisposed?c.dispose():i.add(c)}else a&&(typeof a.cId=="number"||typeof this.s.correlationId=="number")&&this.L({resource:s,type:a.type,cId:this.s.correlationId},!0)});return n?(i.add(n),!0):!1}async I(t,r,i){if(Kt&&ro(t,"/Volumes/",!0)){this.O(`Refusing to watch ${t} for changes using fs.watch() for possibly being a network share where watching is unreliable and unstable.`);return}const s=new wt(this.m.token);i.add(me(()=>s.dispose(!0)));const n=new be;i.add(n);try{const o=k.file(this.s.path),a=St(t),c=rB(t);n.add(me(()=>{c.removeAllListeners(),c.close()})),this.Q(`Started watching: '${t}'`);const l=new Set;if(r)try{for(const h of await gt.readdir(t))l.add(h)}catch(h){this.O(h)}if(s.token.isCancellationRequested)return;const u=new Map;n.add(me(()=>{for(const[,h]of u)h.dispose();u.clear()})),c.on("error",(h,d)=>{s.token.isCancellationRequested||(this.O(`Failed to watch ${t} for changes using fs.watch() (${h}, ${d})`),this.D())}),c.on("change",(h,d)=>{if(s.token.isCancellationRequested)return;this.z&&this.R(`[raw] ["${h}"] ${d}`);let f="";if(d&&(f=d.toString(),Kt&&(f=Hh(f))),!(!f||h!=="change"&&h!=="rename"))if(r)if(h==="rename"){u.get(f)?.dispose();const g=setTimeout(async()=>{if(u.delete(f),f===a&&!await gt.exists(t)){this.J(o);return}if(s.token.isCancellationRequested)return;const v=await this.N(bt(t,f));if(s.token.isCancellationRequested)return;let x;v?l.has(f)?x=0:(x=1,l.add(f)):(l.delete(f),x=2),this.L({resource:Mt(o,f),type:x,cId:this.s.correlationId})},_g.a);u.set(f,me(()=>clearTimeout(g)))}else{let g;l.has(f)?g=0:(g=1,l.add(f)),this.L({resource:Mt(o,f),type:g,cId:this.s.correlationId})}else if(h==="rename"||f!==a){const g=setTimeout(async()=>{const v=await gt.exists(t);s.token.isCancellationRequested||(v?(this.L({resource:o,type:0,cId:this.s.correlationId},!0),n.add(await this.G(t,!1))):this.J(o))},_g.a);n.clear(),n.add(me(()=>clearTimeout(g)))}else this.L({resource:o,type:0,cId:this.s.correlationId},!0)})}catch(o){s.token.isCancellationRequested||this.O(`Failed to watch ${t} for changes using fs.watch() (${o.toString()})`),this.D()}}J(t){this.P("Watcher shutdown because watched path got deleted"),this.L({resource:t,type:2,cId:this.s.correlationId},!0),this.f.flush(),this.D()}L(t,r=!1){this.m.token.isCancellationRequested||(this.z&&this.R(`${t.type===1?"[ADDED]":t.type===2?"[DELETED]":"[CHANGED]"} ${t.resource.fsPath}`),!r&&this.g.some(i=>i(t.resource.fsPath))?this.z&&this.R(` >> ignored (excluded) ${t.resource.fsPath}`):!r&&this.h&&this.h.length>0&&!this.h.some(i=>i(t.resource.fsPath))?this.z&&this.R(` >> ignored (not included) ${t.resource.fsPath}`):this.f.work(t))}M(t){const r=Vj(t),i=[];for(const n of r){if(Gj(n,this.j)){this.z&&this.R(` >> ignored (filtered) ${n.resource.fsPath}`);continue}i.push(n)}if(i.length===0)return;if(this.z)for(const n of i)this.R(` >> normalized ${n.type===1?"[ADDED]":n.type===2?"[DELETED]":"[CHANGED]"} ${n.resource.fsPath}`);this.c.work(i)?this.c.pending>0&&this.Q(`started throttling events due to large amount of file change events at once (pending: ${this.c.pending}, most recent change: ${i[0].resource.fsPath}). Use 'files.watcherExclude' setting to exclude folders with lots of changing files (e.g. compilation output).`):this.P(`started ignoring events due to too many file change events at once (incoming: ${i.length}, most recent change: ${i[0].resource.fsPath}). Use 'files.watcherExclude' setting to exclude folders with lots of changing files (e.g. compilation output).`)}async N(t){if(Ot)return gt.exists(t);try{const r=St(t);return(await gt.readdir(Sr(t))).some(s=>s===r)}catch(r){return this.Q(r),!1}}setVerboseLogging(t){this.z=t}O(t){this.m.token.isCancellationRequested||this.y?.({type:"error",message:`[File Watcher (node.js)] ${t}`})}P(t){this.m.token.isCancellationRequested||this.y?.({type:"warn",message:`[File Watcher (node.js)] ${t}`})}Q(t){!this.m.token.isCancellationRequested&&this.z&&this.y?.({type:"trace",message:`[File Watcher (node.js)] ${t}`})}R(t){!this.m.token.isCancellationRequested&&this.z&&this.Q(`${t}${typeof this.s.correlationId=="number"?` <${this.s.correlationId}> `:""}`)}dispose(){this.m.dispose(!0),super.dispose()}},nB=class extends tB{constructor(e){super(),this.O=e,this.onDidError=Qe.None,this.watchers=new Set}async N(e){e=this.Z(e);const t=[],r=new Set(Array.from(this.watchers));for(const i of e){const s=this.W(i);s&&A7(s.request.excludes,i.excludes)&&A7(s.request.includes,i.includes)?r.delete(s):t.push(i)}t.length&&this.P(`Request to start watching: ${t.map(i=>this.M(i)).join(",")}`),r.size&&this.P(`Request to stop watching: ${Array.from(r).map(i=>this.M(i.request)).join(",")}`);for(const i of r)this.Y(i);for(const i of t)this.X(i)}W(e){for(const t of this.watchers)if(typeof e.correlationId=="number"||typeof t.request.correlationId=="number"){if(t.request.correlationId===e.correlationId)return t}else if(um(t.request.path,e.path,!Ot))return t}X(e){const t=new sB(e,this.O,i=>this.a.fire(i),()=>this.c.fire(e),i=>this.b.fire(i),this.R),r={request:e,instance:t};this.watchers.add(r)}async stop(){await super.stop();for(const e of this.watchers)this.Y(e)}Y(e){this.P("stopping file watcher",e),this.watchers.delete(e),e.instance.dispose()}Z(e){const t=new Map;for(const r of e){const i=Ot?r.path:r.path.toLowerCase();let s=t.get(r.correlationId);s||(s=new Map,t.set(r.correlationId,s)),s.has(i)&&this.P(`ignoring a request for watching who's path is already watched: ${this.M(r)}`),s.set(i,r)}return Array.from(t.values()).map(r=>Array.from(r.values())).flat()}async setVerboseLogging(e){super.setVerboseLogging(e);for(const t of this.watchers)t.instance.setVerboseLogging(e)}P(e,t){this.R&&this.b.fire({type:"trace",message:this.bb(e,t)})}Q(e){this.b.fire({type:"warn",message:this.bb(e)})}bb(e,t){return t?`[File Watcher (node.js)] ${e} (${this.M(t.request)})`:`[File Watcher (node.js)] ${e}`}},oB=class extends _j{constructor(e,t,r){super(e,t,r),this.s()}r(e){return e.add(new nB(void 0))}},aB=class oh extends VH{static{this.M=!1}constructor(t,r){super(t,r),this.onDidChangeCapabilities=Qe.None,this.Q=new rr(i=>gm.getComparisonKey(i)),this.Y=new Map,this.Z=new Map,this.$=new Map}get capabilities(){return this.N||(this.N=253982,Ot&&(this.N|=1024)),this.N}async stat(t){try{const{stat:r,symbolicLink:i}=await Ii.stat(this.J(t));return{type:this.P(r,i),ctime:r.birthtime.getTime(),mtime:r.mtime.getTime(),size:r.size,permissions:r.mode&128?void 0:kn.Locked}}catch(r){throw this.ib(r)}}async O(t){try{return await this.stat(t)}catch{return}}async readdir(t){try{const r=await gt.readdir(this.J(t),{withFileTypes:!0}),i=[];return await Promise.all(r.map(async s=>{try{let n;s.isSymbolicLink()?n=(await this.stat(Mt(t,s.name))).type:n=this.P(s),i.push([s.name,n])}catch(n){this.a.trace(n)}})),i}catch(r){throw this.ib(r)}}P(t,r){let i;return r?.dangling?i=Gr.Unknown:t.isFile()?i=Gr.File:t.isDirectory()?i=Gr.Directory:i=Gr.Unknown,r&&(i|=Gr.SymbolicLink),i}async R(t){const r=this.J(t);this.S(`[Disk FileSystemProvider]: createResourceLock() - request to acquire resource lock (${r})`);let i;for(;i=this.Q.get(t);)this.S(`[Disk FileSystemProvider]: createResourceLock() - waiting for resource lock to be released (${r})`),await i.wait();const s=new ui;return this.Q.set(t,s),this.S(`[Disk FileSystemProvider]: createResourceLock() - new resource lock created (${r})`),me(()=>{this.S(`[Disk FileSystemProvider]: createResourceLock() - resource lock dispose() (${r})`),this.Q.get(t)===s&&(this.S(`[Disk FileSystemProvider]: createResourceLock() - resource lock removed from resource-lock map (${r})`),this.Q.delete(t)),this.S(`[Disk FileSystemProvider]: createResourceLock() - resource lock barrier open() (${r})`),s.open()})}async readFile(t,r){let i;try{r?.atomic&&(this.S(`[Disk FileSystemProvider]: atomic read operation started (${this.J(t)})`),i=await this.R(t));const s=this.J(t);return await zn.readFile(s)}catch(s){throw this.ib(s)}finally{i?.dispose()}}S(t){oh.M&&this.a.trace(t)}readFileStream(t,r,i){const s=VI(n=>re.concat(n.map(o=>re.wrap(o))).buffer);return zH(this,t,s,n=>n.buffer,{...r,bufferSize:256*1024},i),s}async writeFile(t,r,i){return i?.atomic!==!1&&i?.atomic?.postfix&&await this.U(t)?this.W(t,Mt(Th(t),`${es(t)}${i.atomic.postfix}`),r,i):this.X(t,r,i)}async U(t){try{const r=this.J(t),{symbolicLink:i}=await Ii.stat(r);if(i)return!1}catch{}return!0}async W(t,r,i,s){const n=new be;try{n.add(await this.R(t)),n.add(await this.R(r)),await this.X(r,i,s,!0);try{await this.rename(r,t,{overwrite:!0})}catch(o){try{await this.delete(r,{recursive:!1,useTrash:!1,atomic:!1})}catch{}throw o}}finally{n.dispose()}}async X(t,r,i,s){let n;try{const o=this.J(t);if(!i.create||!i.overwrite){if(await gt.exists(o)){if(!i.overwrite)throw Fs(p(1917,null),ge.FileExists)}else if(!i.create)throw Fs(p(1918,null),ge.FileNotFound)}n=await this.open(t,{create:!0,unlock:i.unlock},s),await this.write(n,0,r,0,r.byteLength)}catch(o){throw await this.jb(t,o)}finally{typeof n=="number"&&await this.close(n)}}static{this.ab=!0}static configureFlushOnWrite(t){oh.ab=t}async open(t,r,i){const s=this.J(t);let n;nl(r)&&!i&&(n=await this.R(t));let o;try{if(nl(r)&&r.unlock)try{const{stat:c}=await Ii.stat(s);c.mode&128||await zn.chmod(s,c.mode|128)}catch(c){c.code!=="ENOENT"&&this.a.trace(c)}let a;if(nl(r)){if(at)try{await zn.truncate(s,0),a="r+"}catch(c){c.code!=="ENOENT"&&this.a.trace(c)}a||(a="w")}else a="r";o=await gt.open(s,a)}catch(a){throw n?.dispose(),nl(r)?await this.jb(t,a):this.ib(a)}if(this.Y.set(o,0),nl(r)&&this.$.set(o,t),n){const a=this.Z.get(o);this.S(`[Disk FileSystemProvider]: open() - storing lock for handle ${o} (${s})`),this.Z.set(o,n),a&&(this.S(`[Disk FileSystemProvider]: open() - disposing a previous lock that was still stored on same handle ${o} (${s})`),a.dispose())}return o}async close(t){const r=this.Z.get(t);try{if(this.Y.delete(t),this.$.delete(t)&&oh.ab)try{await gt.fdatasync(t)}catch(i){oh.configureFlushOnWrite(!1),this.a.error(i)}return await gt.close(t)}catch(i){throw this.ib(i)}finally{r&&(this.Z.get(t)===r&&(this.S(`[Disk FileSystemProvider]: close() - resource lock removed from handle-lock map ${t}`),this.Z.delete(t)),this.S(`[Disk FileSystemProvider]: close() - disposing lock for handle ${t}`),r.dispose())}}async read(t,r,i,s,n){const o=this.bb(t,r);let a=null;try{a=(await gt.read(t,i,s,n,o)).bytesRead}catch(c){throw this.ib(c)}finally{this.cb(t,o,a)}return a}bb(t,r){return r===this.Y.get(t)?null:r}cb(t,r,i){const s=this.Y.get(t);typeof s=="number"&&(typeof r=="number"||(typeof i=="number"?this.Y.set(t,s+i):this.Y.delete(t)))}async write(t,r,i,s,n){return WI(()=>this.db(t,r,i,s,n),100,3)}async db(t,r,i,s,n){const o=this.bb(t,r);let a=null;try{a=(await gt.write(t,i,s,n,o)).bytesWritten}catch(c){throw await this.jb(this.$.get(t),c)}finally{this.cb(t,o,a)}return a}async mkdir(t){try{await zn.mkdir(this.J(t))}catch(r){throw this.ib(r)}}async delete(t,r){try{const i=this.J(t);if(r.recursive){let s;r?.atomic!==!1&&r.atomic.postfix&&(s=bt(Sr(i),`${St(i)}${r.atomic.postfix}`)),await gt.rm(i,io.MOVE,s)}else try{await zn.unlink(i)}catch(s){if(s.code==="EPERM"||s.code==="EISDIR"){let n=!1;try{const{stat:o,symbolicLink:a}=await Ii.stat(i);n=o.isDirectory()&&!a}catch{}if(n)await zn.rmdir(i);else throw s}else throw s}}catch(i){throw this.ib(i)}}async rename(t,r,i){const s=this.J(t),n=this.J(r);if(s!==n)try{await this.eb(t,r,"move",i.overwrite),await gt.rename(s,n)}catch(o){throw(o.code==="EINVAL"||o.code==="EBUSY"||o.code==="ENAMETOOLONG")&&(o=new Error(p(1919,null,St(s),St(Sr(n)),o.toString()))),this.ib(o)}}async copy(t,r,i){const s=this.J(t),n=this.J(r);if(s!==n)try{await this.eb(t,r,"copy",i.overwrite),await gt.copy(s,n,{preserveSymlinks:!0})}catch(o){throw(o.code==="EINVAL"||o.code==="EBUSY"||o.code==="ENAMETOOLONG")&&(o=new Error(p(1920,null,St(s),St(Sr(n)),o.toString()))),this.ib(o)}}async eb(t,r,i,s){const n=this.J(t),o=this.J(r);let a=!1;if(!!(this.capabilities&1024)||(a=um(n,o,!0)),a){if(i==="copy")throw Fs(p(1921,null),ge.FileExists);if(i==="move")return}const l=await this.O(t);if(!l)throw Fs(p(1922,null),ge.FileNotFound);const u=await this.O(r);if(u){if(!s)throw Fs(p(1923,null),ge.FileExists);l.type&Gr.File&&u.type&Gr.File||await this.delete(r,{recursive:!0,useTrash:!1,atomic:!1})}}async cloneFile(t,r){return this.fb(t,r,!1)}async fb(t,r,i){const s=this.J(t),n=this.J(r),o=!!(this.capabilities&1024);if(um(s,n,!o))return;const a=new be;try{a.add(await this.R(t)),a.add(await this.R(r)),i&&await zn.mkdir(Sr(n),{recursive:!0}),await zn.copyFile(s,n)}catch(c){if(c.code==="ENOENT"&&!i)return this.fb(t,r,!0);throw this.ib(c)}finally{a.dispose()}}u(t,r,i){return new ZH(s=>t(s),s=>r(s),i)}G(t,r,i){return new oB(s=>t(s),s=>r(s),i)}ib(t){if(t instanceof id)return t;let r=t,i;switch(t.code){case"ENOENT":i=ge.FileNotFound;break;case"EISDIR":i=ge.FileIsADirectory;break;case"ENOTDIR":i=ge.FileNotADirectory;break;case"EEXIST":i=ge.FileExists;break;case"EPERM":case"EACCES":i=ge.NoPermissions;break;case"ERR_UNC_HOST_NOT_ALLOWED":r=`${t.message}. Please update the 'security.allowedUNCHosts' setting if you want to allow this host.`,i=ge.Unknown;break;default:i=ge.Unknown}return Fs(r,i)}async jb(t,r){let i=this.ib(r);if(t&&i.code===ge.NoPermissions)try{const{stat:s}=await Ii.stat(this.J(t));s.mode&128||(i=Fs(r,ge.FileWriteLocked))}catch(s){this.a.trace(s)}return i}},Fb=class{constructor(t,r){t.addFileSystemProvider(Q.file,new cB(r),{isCaseSensitive:Ot})}};Fb=__decorate([__param(0,wu),__param(1,Ne)],Fb);var cB=class{constructor(e){this.b=e,this.a=new aB(this.b)}async stat(e){const t=await this.a.stat(e);return{type:t.type,ctime:t.ctime,mtime:t.mtime,size:t.size,permissions:t.permissions===kn.Readonly?1:void 0}}readDirectory(e){return this.a.readdir(e)}createDirectory(e){return this.a.mkdir(e)}readFile(e){return this.a.readFile(e)}writeFile(e,t,r){return this.a.writeFile(e,t,{...r,unlock:!1,atomic:!1})}delete(e,t){return this.a.delete(e,{...t,useTrash:!1,atomic:!1})}rename(e,t,r){return this.a.rename(e,t,r)}copy(e,t,r){return this.a.copy(e,t,r)}get onDidChangeFile(){throw new Error("Method not implemented.")}watch(e,t){throw new Error("Method not implemented.")}};import{createRequire as lB}from"node:module";var Ob=lB(import.meta.url),uB=class extends Pb{j(){const e=this,t=Ob("module"),r=t._load;t._load=function(a,c,l){return a=n(a),e.a.has(a)?e.a.get(a).load(a,k.file(C2(c.filename)),u=>r.apply(this,[u,c,l])):r.apply(this,arguments)};const i=t._resolveLookupPaths;t._resolveLookupPaths=(o,a)=>i.call(this,n(o),a);const s=t._resolveFilename;t._resolveFilename=function(a,c,l,u){return a==="vsda"&&Array.isArray(u?.paths)&&u.paths.length===0&&(u.paths=t._nodeModulePaths(import.meta.dirname)),s.call(this,a,c,l,u)};const n=o=>{for(const a of e.b){const c=a(o);if(c){o=c;break}}return o}}},hB=class extends X0{constructor(){super(...arguments),this.extensionRuntime=wf.Node}async vb(){this.h.createInstance(Lb);const e=this.h.invokeFunction(yH);if(this.h.createInstance(Ab),this.f.remote.isRemote&&this.f.remote.authority){const i=this.h.createInstance(Tb);process.env.VSCODE_IPC_HOOK_CLI=i.ipcHandlePath}this.h.createInstance(Fb),await this.h.createInstance(uB,e,{mine:this.J,all:this.L}).install(),Nt("code/extHost/didInitAPI");const r=await this.m.getConfigProvider();await PH(this.j,r,this,this.s,this.z,this.f,this.q),Nt("code/extHost/didInitProxyResolver")}wb(e){return e.main}async xb(e,t,r){if(t.scheme!==Q.file)throw new Error(`Cannot load URI: '${t}', must be of file-scheme`);let i=null;r.codeLoadingStart(),this.s.trace(`ExtensionService#loadCommonJSModule ${t.toString(!0)}`),this.s.flush();const s=e?.identifier.value;e&&await this.w.initializeLocalizedMessages(e);try{s&&Nt(`code/extHost/willLoadExtensionCode/${s}`),i=(Ob.__$__nodeRequire??Ob)(t.fsPath)}finally{s&&Nt(`code/extHost/didLoadExtensionCode/${s}`),r.codeLoadingStop()}return i}async $setRemoteEnvironment(e){if(this.f.remote.isRemote)for(const t in e){const r=e[t];r===null?delete process.env[t]:process.env[t]=r}}};import*as Ju from"fs";import{exec as A$}from"child_process";var dB=(e,t,r)=>{const i=new Uint8Array(16);for(let o=0;o<16;o++)i[o]=Math.round(Math.random()*256);const s=Mh(re.wrap(i));return[`GET ws://localhost${e}?${t}&skipWebSocketFrames=true HTTP/1.1`,"Connection: Upgrade","Upgrade: websocket",`Sec-WebSocket-Key: ${s}`].join(`\r
`)+`\r
\r
`},T$=re.fromString(`\r
\r
`);async function fB(e,t,r,i,s){e.write(re.fromString(dB(t,r,i)));const n=new be;try{return await new Promise((o,a)=>{let c;n.add(e.onData(l=>{c?c=re.concat([c,l],c.byteLength+l.byteLength):c=l;const u=c.indexOf(T$);if(u===-1)return;o(e),e.pauseData();const h=c.slice(u+T$.byteLength);h.byteLength&&s.onData.fire(h)})),n.add(e.onClose(l=>a(l??new Error("socket closed")))),n.add(e.onEnd(()=>a(new Error("socket ended"))))})}catch(o){throw e.dispose(),o}finally{n.dispose()}}var pB=class extends ae{constructor(e,t){super(),this.g=e,this.a=this.B(new Oc),this.onData=(...r)=>(this.a.isPaused&&queueMicrotask(()=>this.a.resume()),this.a.event(...r)),this.b=this.B(new T),this.onDidDispose=this.b.event,this.f=!1,this.B(t.onData),this.B(t.onData.event(r=>this.a.fire(r))),this.onClose=this.B(t.onClose).event,this.onEnd=this.B(t.onEnd).event}pauseData(){this.a.pause()}drain(){return Promise.resolve()}end(){this.f=!0,this.h()}traceSocketEvent(e,t){_h.traceSocketEvent(this,this.g,e,t)}dispose(){this.f||this.h(),this.b.fire(),super.dispose()}},gB="signService",Qu=X(gB);import*as mB from"net";import*as vB from"os";import*as wB from"net";var R$={1:!0,7:!0,9:!0,11:!0,13:!0,15:!0,17:!0,19:!0,20:!0,21:!0,22:!0,23:!0,25:!0,37:!0,42:!0,43:!0,53:!0,69:!0,77:!0,79:!0,87:!0,95:!0,101:!0,102:!0,103:!0,104:!0,109:!0,110:!0,111:!0,113:!0,115:!0,117:!0,119:!0,123:!0,135:!0,137:!0,139:!0,143:!0,161:!0,179:!0,389:!0,427:!0,465:!0,512:!0,513:!0,514:!0,515:!0,526:!0,530:!0,531:!0,532:!0,540:!0,548:!0,554:!0,556:!0,563:!0,587:!0,601:!0,636:!0,989:!0,990:!0,993:!0,995:!0,1719:!0,1720:!0,1723:!0,2049:!0,3659:!0,4045:!0,5060:!0,5061:!0,6e3:!0,6566:!0,6665:!0,6666:!0,6667:!0,6668:!0,6669:!0,6697:!0,10080:!0};function bB(e,t,r,i="127.0.0.1"){let s=!1,n,o=1;const a=wB.createServer({pauseOnConnect:!0});function c(l,u){s||(s=!0,a.removeAllListeners(),a.close(),n&&clearTimeout(n),u(l))}return new Promise(l=>{n=setTimeout(()=>{c(0,l)},r),a.on("listening",()=>{c(e,l)}),a.on("error",u=>{u&&(u.code==="EADDRINUSE"||u.code==="EACCES")&&o<t?(e++,o++,a.listen(e,i)):c(0,l)}),a.on("close",()=>{c(0,l)}),a.listen(e,i)})}var yB=30*1e3,L$;(function(e){e[e.Management=1]="Management",e[e.ExtensionHost=2]="ExtensionHost",e[e.Tunnel=3]="Tunnel"})(L$||(L$={}));function Mb(e){switch(e){case 1:return"Management";case 2:return"ExtensionHost";case 3:return"Tunnel"}}function N$(e){const t=new wt;return setTimeout(()=>t.cancel(),e),t.token}function kB(e,t){if(e.isCancellationRequested||t.isCancellationRequested)return Ke.Cancelled;const r=new wt;return e.onCancellationRequested(()=>r.cancel()),t.onCancellationRequested(()=>r.cancel()),r.token}var jb=class{get didTimeout(){return this.c==="timedout"}constructor(e){this.c="pending",this.d=new be,{promise:this.promise,resolve:this.f,reject:this.g}=F4(),e.isCancellationRequested?this.h():this.d.add(e.onCancellationRequested(()=>this.h()))}registerDisposable(e){this.c==="pending"?this.d.add(e):e.dispose()}h(){this.c==="pending"&&(this.d.dispose(),this.c="timedout",this.g(this.i()))}i(){const e=new Error("Time limit reached");return e.code="ETIMEDOUT",e.syscall="connect",e}resolve(e){this.c==="pending"&&(this.d.dispose(),this.c="resolved",this.f(e))}reject(e){this.c==="pending"&&(this.d.dispose(),this.c="rejected",this.g(e))}};function xB(e,t){const r=new jb(t);return r.registerDisposable(e.onControlMessage(i=>{const s=JSON.parse(i.toString()),n=RB(s);n?r.reject(n):r.resolve(s)})),r.promise}function EB(e,t,r,i,s,n,o,a){const c=new jb(a),l=Hr.create(!1);return e.info(`Creating a socket (${o})...`),Nt(`code/willCreateSocket/${n}`),t.connect(r,i,s,o).then(u=>{c.didTimeout?(Nt(`code/didCreateSocketError/${n}`),e.info(`Creating a socket (${o}) finished after ${l.elapsed()} ms, but this is too late and has timed out already.`),u?.dispose()):(Nt(`code/didCreateSocketOK/${n}`),e.info(`Creating a socket (${o}) was successful after ${l.elapsed()} ms.`),c.resolve(u))},u=>{Nt(`code/didCreateSocketError/${n}`),e.info(`Creating a socket (${o}) returned an error after ${l.elapsed()} ms.`),e.error(u),c.reject(u)}),c.promise}function Ub(e,t){const r=new jb(t);return e.then(i=>{r.didTimeout||r.resolve(i)},i=>{r.didTimeout||r.reject(i)}),r.promise}async function SB(e,t,r,i){const s=U$(e,t);e.logService.trace(`${s} 1/6. invoking socketFactory.connect().`);let n;try{n=await EB(e.logService,e.remoteSocketFactoryService,e.connectTo,C4.getServerRootPath(),`reconnectionToken=${e.reconnectionToken}&reconnection=${e.reconnectionProtocol?"true":"false"}`,Mb(t),`renderer-${Mb(t)}-${e.reconnectionToken}`,i)}catch(u){throw e.logService.error(`${s} socketFactory.connect() failed or timed out. Error:`),e.logService.error(u),u}e.logService.trace(`${s} 2/6. socketFactory.connect() was successful.`);let o,a;e.reconnectionProtocol?(e.reconnectionProtocol.beginAcceptReconnection(n,null),o=e.reconnectionProtocol,a=!1):(o=new Im({socket:n}),a=!0),e.logService.trace(`${s} 3/6. sending AuthRequest control message.`);const c=await Ub(e.signService.createNewMessage(ir()),i),l={type:"auth",auth:e.connectionToken||"00000000000000000000",data:c.data};o.sendControl(re.fromString(JSON.stringify(l)));try{const u=await xB(o,kB(i,N$(1e4)));if(u.type!=="sign"||typeof u.data!="string"){const g=new Error("Unexpected handshake message");throw g.code="VSCODE_CONNECTION_ERROR",g}if(e.logService.trace(`${s} 4/6. received SignRequest control message.`),!await Ub(e.signService.validate(c,u.signedData),i)){const g=new Error("Refused to connect to unsupported server");throw g.code="VSCODE_CONNECTION_ERROR",g}const d=await Ub(e.signService.sign(u.data),i),f={type:"connectionType",commit:e.commit,signedData:d,desiredConnectionType:t};return r&&(f.args=r),e.logService.trace(`${s} 5/6. sending ConnectionTypeRequest control message.`),o.sendControl(re.fromString(JSON.stringify(f))),{protocol:o,ownsProtocol:a}}catch(u){throw u&&u.code==="ETIMEDOUT"&&(e.logService.error(`${s} the handshake timed out. Error:`),e.logService.error(u)),u&&u.code==="VSCODE_CONNECTION_ERROR"&&(e.logService.error(`${s} received error control message when negotiating connection. Error:`),e.logService.error(u)),a&&j$(o),u}}async function $B(e,t,r){const i=Date.now(),s=U$(e,3),{protocol:n}=await SB(e,3,t,r);return e.logService.trace(`${s} 6/6. handshake finished, connection is up and running after ${FB(i)}!`),n}async function F$(e,t,r){const{connectTo:i,connectionToken:s}=await e.addressProvider.getAddress();return{commit:e.commit,quality:e.quality,connectTo:i,connectionToken:s,reconnectionToken:t,reconnectionProtocol:r,remoteSocketFactoryService:e.remoteSocketFactoryService,signService:e.signService,logService:e.logService}}async function CB(e,t,r){const i=await F$(e,ir(),null);return await $B(i,{host:t,port:r},Ke.None)}function PB(e){return $s(t=>new Promise((r,i)=>{const s=setTimeout(r,e*1e3);t.onCancellationRequested(()=>{clearTimeout(s),r()})}))}var O$;(function(e){e[e.ConnectionLost=0]="ConnectionLost",e[e.ReconnectionWait=1]="ReconnectionWait",e[e.ReconnectionRunning=2]="ReconnectionRunning",e[e.ReconnectionPermanentFailure=3]="ReconnectionPermanentFailure",e[e.ConnectionGain=4]="ConnectionGain"})(O$||(O$={}));var IB=class{constructor(e,t){this.reconnectionToken=e,this.millisSinceLastIncomingData=t,this.type=0}},DB=class{constructor(e,t,r,i){this.reconnectionToken=e,this.millisSinceLastIncomingData=t,this.durationSeconds=r,this.c=i,this.type=1}skipWait(){this.c.cancel()}},AB=class{constructor(e,t,r){this.reconnectionToken=e,this.millisSinceLastIncomingData=t,this.attempt=r,this.type=2}},M$=class{constructor(e,t,r){this.reconnectionToken=e,this.millisSinceLastIncomingData=t,this.attempt=r,this.type=4}},TB=class{constructor(e,t,r,i){this.reconnectionToken=e,this.millisSinceLastIncomingData=t,this.attempt=r,this.handled=i,this.type=3}},tY=class nn extends ae{static triggerPermanentFailure(t,r,i){this._permanentFailure=!0,this.f=t,this.g=r,this.h=i,this.j.forEach(s=>s.D(this.f,this.g,this.h))}static debugTriggerReconnection(){this.j.forEach(t=>t.y())}static debugPauseSocketWriting(){this.j.forEach(t=>t.F())}static{this._permanentFailure=!1}static{this.f=0}static{this.g=0}static{this.h=!1}static{this.j=[]}get n(){return this.c||nn._permanentFailure}constructor(t,r,i,s,n){super(),this.t=t,this.u=r,this.reconnectionToken=i,this.protocol=s,this.w=n,this.m=this.B(new T),this.onDidStateChange=this.m.event,this.c=!1,this.r=!1,this.s=!1,this.m.fire(new M$(this.reconnectionToken,0,0)),this.B(s.onSocketClose(o=>{const a=kg(this.t,this.reconnectionToken,!0);o?o.type===0?(this.u.logService.info(`${a} received socket close event (hadError: ${o.hadError}).`),o.error&&this.u.logService.error(o.error)):(this.u.logService.info(`${a} received socket close event (wasClean: ${o.wasClean}, code: ${o.code}, reason: ${o.reason}).`),o.event&&this.u.logService.error(o.event)):this.u.logService.info(`${a} received socket close event.`),this.y()})),this.B(s.onSocketTimeout(o=>{const a=kg(this.t,this.reconnectionToken,!0);this.u.logService.info(`${a} received socket timeout event (unacknowledgedMsgCount: ${o.unacknowledgedMsgCount}, timeSinceOldestUnacknowledgedMsg: ${o.timeSinceOldestUnacknowledgedMsg}, timeSinceLastReceivedSomeData: ${o.timeSinceLastReceivedSomeData}).`),this.y()})),nn.j.push(this),this.B(me(()=>{const o=nn.j.indexOf(this);o>=0&&nn.j.splice(o,1)})),this.n&&this.D(nn.f,nn.g,nn.h)}dispose(){super.dispose(),this.s=!0}async y(){if(!this.r)try{this.r=!0,await this.z()}finally{this.r=!1}}async z(){if(this.n||this.s)return;const t=kg(this.t,this.reconnectionToken,!0);this.u.logService.info(`${t} starting reconnecting loop. You can get more information with the trace log level.`),this.m.fire(new IB(this.reconnectionToken,this.protocol.getMillisSinceLastIncomingData()));const r=[0,5,5,10,10,10,10,10,30];let i=-1;do{i++;const s=i<r.length?r[i]:r[r.length-1];try{if(s>0){const o=PB(s);this.m.fire(new DB(this.reconnectionToken,this.protocol.getMillisSinceLastIncomingData(),s,o)),this.u.logService.info(`${t} waiting for ${s} seconds before reconnecting...`);try{await o}catch{}}if(this.n){this.u.logService.error(`${t} permanent failure occurred while running the reconnecting loop.`);break}this.m.fire(new AB(this.reconnectionToken,this.protocol.getMillisSinceLastIncomingData(),i+1)),this.u.logService.info(`${t} resolving connection...`);const n=await F$(this.u,this.reconnectionToken,this.protocol);this.u.logService.info(`${t} connecting to ${n.connectTo}...`),await this.G(n,N$(yB)),this.u.logService.info(`${t} reconnected!`),this.m.fire(new M$(this.reconnectionToken,this.protocol.getMillisSinceLastIncomingData(),i+1));break}catch(n){if(n.code==="VSCODE_CONNECTION_ERROR"){this.u.logService.error(`${t} A permanent error occurred in the reconnecting loop! Will give up now! Error:`),this.u.logService.error(n),this.C(this.protocol.getMillisSinceLastIncomingData(),i+1,!1);break}if(i>360){this.u.logService.error(`${t} An error occurred while reconnecting, but it will be treated as a permanent error because the reconnection grace time has expired! Will give up now! Error:`),this.u.logService.error(n),this.C(this.protocol.getMillisSinceLastIncomingData(),i+1,!1);break}if(I1.isTemporarilyNotAvailable(n)){this.u.logService.info(`${t} A temporarily not available error occurred while trying to reconnect, will try again...`),this.u.logService.trace(n);continue}if((n.code==="ETIMEDOUT"||n.code==="ENETUNREACH"||n.code==="ECONNREFUSED"||n.code==="ECONNRESET")&&n.syscall==="connect"){this.u.logService.info(`${t} A network error occurred while trying to reconnect, will try again...`),this.u.logService.trace(n);continue}if(ys(n)){this.u.logService.info(`${t} A promise cancelation error occurred while trying to reconnect, will try again...`),this.u.logService.trace(n);continue}if(n instanceof I1){this.u.logService.error(`${t} A RemoteAuthorityResolverError occurred while trying to reconnect. Will give up now! Error:`),this.u.logService.error(n),this.C(this.protocol.getMillisSinceLastIncomingData(),i+1,I1.isHandled(n));break}this.u.logService.error(`${t} An unknown error occurred while trying to reconnect, since this is an unknown case, it will be treated as a permanent error! Will give up now! Error:`),this.u.logService.error(n),this.C(this.protocol.getMillisSinceLastIncomingData(),i+1,!1);break}}while(!this.n&&!this.s)}C(t,r,i){this.w?nn.triggerPermanentFailure(t,r,i):this.D(t,r,i)}D(t,r,i){this.m.fire(new TB(this.reconnectionToken,t,r,i)),j$(this.protocol)}F(){this.protocol.pauseSocketWriting()}};function j$(e){try{e.acceptDisconnect();const t=e.getSocket();e.dispose(),t.dispose()}catch(t){It(t)}}function RB(e){if(e&&e.type==="error"){const t=new Error(`Connection error: ${e.reason}`);return t.code="VSCODE_CONNECTION_ERROR",t}return null}function LB(e,t){for(;e.length<t;)e+=" ";return e}function NB(e,t){return`[remote-connection][${LB(Mb(e),13)}][${t.substr(0,5)}\u2026]`}function kg(e,t,r){return`${NB(e,t)}[${r?"reconnect":"initial"}]`}function U$(e,t){return`${kg(t,e.reconnectionToken,!!e.reconnectionProtocol)}[${e.connectTo}]`}function FB(e){return`${Date.now()-e} ms`}var Hb=X("remoteSocketFactoryService");async function OB(e,t,r,i,s){let n;for(let o=3;o&&(n?.dispose(),n=await new H$(e,t,r,i,s).waitForReady(),!(s&&R$[s]||!R$[n.tunnelLocalPort]));o--);return n}var H$=class extends ae{constructor(e,t,r,i,s){super(),this.m=t,this.n=s,this.privacy=ds.Private,this.j=new Map,this.a=e,this.b=mB.createServer(),this.c=new ui,this.f=()=>this.c.open(),this.b.on("listening",this.f),this.g=n=>this.r(n),this.b.on("connection",this.g),this.h=()=>{},this.b.on("error",this.h),this.tunnelRemotePort=i,this.tunnelRemoteHost=r}async dispose(){super.dispose(),this.b.removeListener("listening",this.f),this.b.removeListener("connection",this.g),this.b.removeListener("error",this.h),this.b.close(),Array.from(this.j.values()).forEach(t=>{t()})}async waitForReady(){const e=this.n??this.tunnelRemotePort,t=qs(this.m)?"0.0.0.0":"127.0.0.1";let r=await bB(e,2,1e3,t),i=null;return this.b.listen(r,this.m),await this.c.wait(),i=this.b.address(),i||(r=0,this.b.listen(r,this.m),await this.c.wait(),i=this.b.address()),this.tunnelLocalPort=i.port,this.localAddress=`${this.tunnelRemoteHost==="127.0.0.1"?"127.0.0.1":"localhost"}:${i.port}`,this}async r(e){e.pause();const t=Fo(this.tunnelRemoteHost)||qs(this.tunnelRemoteHost)?"localhost":this.tunnelRemoteHost,r=await CB(this.a,t,this.tunnelRemotePort),i=r.getSocket(),s=r.readEntireBuffer();r.dispose(),s.byteLength>0&&e.write(s.buffer),e.on("end",()=>{e.localAddress&&this.j.delete(e.localAddress),i.end()}),e.on("close",()=>i.end()),e.on("error",()=>{e.localAddress&&this.j.delete(e.localAddress),i instanceof qc?i.socket.destroy():i.end()}),i instanceof qc?this.t(e,i):this.s(e,i),e.localAddress&&this.j.set(e.localAddress,()=>{e.end(),i.end()})}s(e,t){t.onClose(()=>e.destroy()),t.onEnd(()=>e.end()),t.onData(r=>e.write(r.buffer)),e.on("data",r=>t.write(re.wrap(r))),e.resume()}t(e,t){const r=t.socket;r.on("end",()=>e.end()),r.on("close",()=>e.end()),r.on("error",()=>{e.destroy()}),r.pipe(e),e.pipe(r)}},Bb=class extends P0{constructor(t,r,i,s,n){super(r,n),this.H=t,this.I=i,this.J=s}isPortPrivileged(t){return IN(t,this.t,Wy,vB.release())}F(t,r,i,s,n,o,a,c){const l=this.D(r,i);if(l)return++l.refcount,l.value;if(CN(t))return this.G(t,r,i,n,o,a,c);{this.r.trace(`ForwardedPorts: (TunnelService) Creating tunnel without provider ${r}:${i} on local port ${n}.`);const u={commit:this.J.commit,quality:this.J.quality,addressProvider:t,remoteSocketFactoryService:this.H,signService:this.I,logService:this.r,ipcLogger:null},h=OB(u,s,r,i,n);return this.r.trace("ForwardedPorts: (TunnelService) Tunnel created without provider."),this.z(r,i,h),h}}};Bb=__decorate([__param(0,Hb),__param(1,Ne),__param(2,Qu),__param(3,ad),__param(4,Sn)],Bb);var zb=class extends Bb{constructor(t,r,i,s,n){super(t,r,i,s,n)}};zb=__decorate([__param(0,Hb),__param(1,Ne),__param(2,Qu),__param(3,ad),__param(4,Sn)],zb);var B$=class extends ae{constructor(t,r,i,s,n){super(),this.b=t,this.c=r,this.f=i,this.g=s,this.h=n,this.a=new Map}async openTunnel(t,r,i,s,n,o,a,c,l){if(this.c.trace(`ForwardedPorts: (SharedTunnelService) openTunnel request for ${i}:${s} on local port ${o}.`),!this.a.has(t)){const u=new zb(this.b,this.c,this.g,this.f,this.h);this.B(u),this.a.set(t,u),u.onTunnelClosed(async()=>{(await u.tunnels).length===0&&(u.dispose(),this.a.delete(t))})}return this.a.get(t).openTunnel(r,i,s,n,o,a,c,l)}};B$=__decorate([__param(0,Hb),__param(1,Ne),__param(2,ad),__param(3,Qu),__param(4,Sn)],B$);var MB=X("dialogService"),z$;(function(e){e[e.Confirmation=1]="Confirmation",e[e.Prompt=2]="Prompt",e[e.Input=3]="Input"})(z$||(z$={}));var nY=X("fileDialogService"),_$;(function(e){e[e.SAVE=0]="SAVE",e[e.DONT_SAVE=1]="DONT_SAVE",e[e.CANCEL=2]="CANCEL"})(_$||(_$={}));var jB=10*1e3,xg="remote.tunnels.toRestore",_b="remote.tunnels.toRestoreExpiration",UB=1e3*60*60*24*14,W$="onTunnel",oY=new J("forwardedPortsViewEnabled",!1,p(12734,null)),HB=new J("forwardedPortsViewOnlyEnabled",!1,p(12735,null));function V$(e){const t=e.match(/^([a-zA-Z0-9_-]+(?:\.[a-zA-Z0-9_-]+)*:)?([0-9]+)$/);if(t)return{host:t[1]?.substring(0,t[1].length-1)||"localhost",port:Number(t[2])}}var Yu;(function(e){e.Other="Other",e.User="User",e.AutoForwardEnd="AutoForwardEnd"})(Yu||(Yu={}));var en;(function(e){e[e.User=0]="User",e[e.Auto=1]="Auto",e[e.Extension=2]="Extension"})(en||(en={}));var Wb={source:en.User,description:p(12736,null)},aY={source:en.Auto,description:p(12737,null)};function q$(e,t,r){const i=e.get(Yr(t,r));if(i)return i;if(Fo(t))for(const s of bu){const n=Yr(s,r);if(e.has(n))return e.get(n)}else if(qs(t))for(const s of xp){const n=Yr(s,r);if(e.has(n))return e.get(n)}}function Nr(e,t,r){const i=q$(e,t,r);if(i)return i;const s=qs(t)?"localhost":Fo(t)?"0.0.0.0":void 0;if(s)return q$(e,s,r)}function Yr(e,t){return e+":"+t}var _n;(function(e){e.Notify="notify",e.OpenBrowser="openBrowser",e.OpenBrowserOnce="openBrowserOnce",e.OpenPreview="openPreview",e.Silent="silent",e.Ignore="ignore"})(_n||(_n={}));function BB(e){return e&&"host"in e&&typeof e.host=="string"&&"port"in e&&typeof e.port=="number"&&(!("detail"in e)||typeof e.detail=="string")&&(!("pid"in e)||typeof e.pid=="string")}var G$=class Ji extends ae{static{this.c="remote.portsAttributes"}static{this.f="remote.otherPortsAttributes"}static{this.g=/^(\d+)\-(\d+)$/}static{this.h=/^([a-z0-9\-]+):(\d{1,5})$/}constructor(t){super(),this.r=t,this.j=[],this.n=new T,this.onDidChangeAttributes=this.n.event,this.B(t.onDidChangeConfiguration(r=>{(r.affectsConfiguration(Ji.c)||r.affectsConfiguration(Ji.f))&&this.s()})),this.s()}s(){this.j=this.y(),this.n.fire()}getAttributes(t,r,i){let s=this.w(t,r,i,this.j,0);const n={label:void 0,onAutoForward:void 0,elevateIfNeeded:void 0,requireLocalPort:void 0,protocol:void 0};for(;s>=0;){const o=this.j[s];o.key===t?(n.onAutoForward=o.onAutoForward??n.onAutoForward,n.elevateIfNeeded=o.elevateIfNeeded!==void 0?o.elevateIfNeeded:n.elevateIfNeeded,n.label=o.label??n.label,n.requireLocalPort=o.requireLocalPort,n.protocol=o.protocol):(n.onAutoForward=n.onAutoForward??o.onAutoForward,n.elevateIfNeeded=n.elevateIfNeeded!==void 0?n.elevateIfNeeded:o.elevateIfNeeded,n.label=n.label??o.label,n.requireLocalPort=n.requireLocalPort!==void 0?n.requireLocalPort:void 0,n.protocol=n.protocol??o.protocol),s=this.w(t,r,i,this.j,s+1)}return n.onAutoForward!==void 0||n.elevateIfNeeded!==void 0||n.label!==void 0||n.requireLocalPort!==void 0||n.protocol!==void 0?n:this.C()}t(t){return t.start!==void 0&&t.end!==void 0}u(t){return t.host!==void 0&&t.port!==void 0&&Me(t.host)&&li(t.port)}w(t,r,i,s,n){if(n>=s.length)return-1;const o=!Fo(r)&&!qs(r),c=s.slice(n).findIndex(l=>li(l.key)?o?!1:l.key===t:this.t(l.key)?o?!1:t>=l.key.start&&t<=l.key.end:this.u(l.key)?t===l.key.port&&r===l.key.host:i?l.key.test(i):!1);return c>=0?c+n:-1}y(){const t=this.r.getValue(Ji.c);if(!t||!Dt(t))return[];const r=[];for(const s in t){if(s===void 0)continue;const n=t[s];let o;if(Number(s))o=Number(s);else if(Me(s))if(Ji.g.test(s)){const a=s.match(Ji.g);o={start:Number(a[1]),end:Number(a[2])}}else if(Ji.h.test(s)){const a=s.match(Ji.h);o={host:a[1],port:Number(a[2])}}else{let a;try{a=RegExp(s)}catch{}a&&(o=a)}o&&r.push({key:o,elevateIfNeeded:n.elevateIfNeeded,onAutoForward:n.onAutoForward,label:n.label,requireLocalPort:n.requireLocalPort,protocol:n.protocol})}const i=this.r.getValue(Ji.f);return i&&(this.m={elevateIfNeeded:i.elevateIfNeeded,label:i.label,onAutoForward:i.onAutoForward,requireLocalPort:i.requireLocalPort,protocol:i.protocol}),this.z(r)}z(t){function r(i,s){return li(i.key)?i.key:s.t(i.key)?i.key.start:s.u(i.key)?i.key.port:Number.MAX_VALUE}return t.sort((i,s)=>r(i,this)-r(s,this))}C(){return this.m}static providedActionToAction(t){switch(t){case Un.Notify:return _n.Notify;case Un.OpenBrowser:return _n.OpenBrowser;case Un.OpenBrowserOnce:return _n.OpenBrowserOnce;case Un.OpenPreview:return _n.OpenPreview;case Un.Silent:return _n.Silent;case Un.Ignore:return _n.Ignore;default:return}}async addAttributes(t,r,i){const n=this.r.inspect(Ji.c).userRemoteValue;let o;!n||!Dt(n)?o={}:o=ut(n),o[`${t}`]||(o[`${t}`]={});for(const a in r)o[`${t}`][a]=r[a];return this.r.updateValue(Ji.c,o,i)}},Vb=class extends ae{constructor(t,r,i,s,n,o,a,c,l,u){super(),this.H=t,this.I=r,this.J=i,this.L=s,this.M=n,this.N=o,this.O=a,this.P=c,this.Q=l,this.R=u,this.c=new Map,this.g=new T,this.onForwardPort=this.g.event,this.h=new T,this.onClosePort=this.h.event,this.j=new T,this.onPortName=this.j.event,this.n=new T,this.onCandidatesChanged=this.n.event,this.t=new T,this.onEnvironmentTunnelsSet=this.t.event,this.u=!1,this.w=void 0,this.z=!1,this.C=new T,this.D=new Map,this.F=new Map,this.G=[],this.U=!1,this.eb=new Date,this.configPortsAttributes=new G$(i),this.s=this.bb(),this.B(this.configPortsAttributes.onDidChangeAttributes(this.kb,this)),this.forwarded=new Map,this.f=new Map,this.H.tunnels.then(async h=>{const d=await this.getAttributes(h.map(f=>({port:f.tunnelRemotePort,host:f.tunnelRemoteHost})));for(const f of h)if(f.localAddress){const g=Yr(f.tunnelRemoteHost,f.tunnelRemotePort),v=Nr(this.m??new Map,f.tunnelRemoteHost,f.tunnelRemotePort);this.forwarded.set(g,{remotePort:f.tunnelRemotePort,remoteHost:f.tunnelRemoteHost,localAddress:f.localAddress,protocol:d?.get(f.tunnelRemotePort)?.protocol??gi.Http,localUri:await this.Y(f.localAddress,d?.get(f.tunnelRemotePort)),localPort:f.tunnelLocalPort,name:d?.get(f.tunnelRemotePort)?.label,runningProcess:v?.detail,hasRunningProcess:!!v,pid:v?.pid,privacy:f.privacy,source:Wb}),this.f.set(g,f)}}),this.detected=new Map,this.B(this.H.onTunnelOpened(async h=>{const d=Yr(h.tunnelRemoteHost,h.tunnelRemotePort);if(!Nr(this.forwarded,h.tunnelRemoteHost,h.tunnelRemotePort)&&!Nr(this.detected,h.tunnelRemoteHost,h.tunnelRemotePort)&&!Nr(this.c,h.tunnelRemoteHost,h.tunnelRemotePort)&&h.localAddress){const f=Nr(this.m??new Map,h.tunnelRemoteHost,h.tunnelRemotePort),g=(await this.getAttributes([{port:h.tunnelRemotePort,host:h.tunnelRemoteHost}]))?.get(h.tunnelRemotePort);this.forwarded.set(d,{remoteHost:h.tunnelRemoteHost,remotePort:h.tunnelRemotePort,localAddress:h.localAddress,protocol:g?.protocol??gi.Http,localUri:await this.Y(h.localAddress,g),localPort:h.tunnelLocalPort,name:g?.label,closeable:!0,runningProcess:f?.detail,hasRunningProcess:!!f,pid:f?.pid,privacy:h.privacy,source:Wb})}await this.db(),this.W(!0),this.f.set(d,h),this.g.fire(this.forwarded.get(d))})),this.B(this.H.onTunnelClosed(h=>this.X(h,Yu.Other))),this.W(!1)}S(){return this.Q.extensions.find(t=>t.activationEvents?.includes(W$))?(this.R.createKey(HB.key,!0),!0):!1}W(t){if(this.U||(t&&(this.U=!0),this.L.remoteAuthority!==void 0&&!t)||this.S())return;const i=this.B(this.Q.onDidRegisterExtensions(()=>{this.S()&&i.dispose()}))}async X(t,r){const i=Yr(t.host,t.port);this.forwarded.has(i)&&(this.forwarded.delete(i),await this.db(),this.h.fire(t))}Y(t,r){if(t.startsWith("http"))return k.parse(t);const i=r?.protocol??"http";return k.parse(`${i}://${t}`)}async Z(t){const r=this.N.getWorkspace(),i=r.configuration?As(r.configuration.path):r.folders.length>0?As(r.folders[0].uri.path):void 0;if(i===void 0){this.O.debug("Could not get workspace hash for forwarded ports storage key.");return}return`${t}.${this.L.remoteAuthority}.${i}`}async $(){return this.Z(xg)}async ab(){return this.Z(_b)}async bb(){const t=this.I.get(xg,1);if(t)return this.I.remove(xg,1),await this.db(),t;const r=await this.$();if(r)return this.I.get(r,0)}async restoreForwarded(){if(this.cb(),this.J.getValue("remote.restoreForwardedPorts")){const t=await this.s;if(t&&t!==this.y){const r=JSON.parse(t)??[];this.O.trace(`ForwardedPorts: (TunnelModel) restoring ports ${r.map(i=>i.remotePort).join(", ")}`);for(const i of r){const s=Nr(this.detected,i.remoteHost,i.remotePort);i.source.source!==en.Extension&&!s||i.source.source===en.Extension&&s?await this.gb({remote:{host:i.remoteHost,port:i.remotePort},local:i.localPort,name:i.name,elevateIfNeeded:!0,source:i.source}):i.source.source===en.Extension&&!s&&this.D.set(Yr(i.remoteHost,i.remotePort),i)}}}if(this.z=!0,this.C.fire(),!this.w){const t=await this.$();this.w=this.B(new be),this.w.add(this.I.onDidChangeValue(0,void 0,this.w)(async r=>{r.key===t&&(this.s=Promise.resolve(this.I.get(t,0)),await this.restoreForwarded())}))}}cb(){const t=this.I.keys(0,0).filter(r=>r.startsWith(_b));for(const r of t){const i=this.I.getNumber(r,0);if(i&&i<Date.now()){this.s=Promise.resolve(void 0);const s=r.replace(_b,xg);this.I.remove(r,0),this.I.remove(s,0)}}}async db(){if(this.J.getValue("remote.restoreForwardedPorts")){const t=Array.from(this.forwarded.values()),r=t.map(o=>({remoteHost:o.remoteHost,remotePort:o.remotePort,localPort:o.localPort,name:o.name,localAddress:o.localAddress,localUri:o.localUri,protocol:o.protocol,source:o.source}));let i;t.length>0&&(i=JSON.stringify(r));const s=await this.$(),n=await this.ab();!i&&s&&n?(this.I.remove(s,0),this.I.remove(n,0)):i!==this.y&&s&&n&&(this.I.store(s,i,0,0),this.I.store(n,Date.now()+UB,0,0)),this.y=i}}async fb(t,r,i){if(!t.tunnelLocalPort||!i?.requireLocalPort||t.tunnelLocalPort===r)return;const s=new Date;if(this.eb.getTime()+jB>s.getTime())return;this.eb=s;const n=p(12738,null,r,t.tunnelRemotePort,t.tunnelLocalPort);return this.P.info(n)}async forward(t,r){return!this.z&&this.L.remoteAuthority&&await Qe.toPromise(this.C.event),this.gb(t,r)}async gb(t,r){await this.Q.activateByEvent(W$);const i=Nr(this.forwarded,t.remote.host,t.remote.port);r=r??(r!==null?(await this.getAttributes([t.remote]))?.get(t.remote.port):void 0);const s=t.local!==void 0?t.local:t.remote.port;let n;if(i)return this.ib(i,t,r);{const o=this.L.remoteAuthority,a=o?{getAddress:async()=>(await this.M.resolveAuthority(o)).authority}:void 0,c=Yr(t.remote.host,t.remote.port);this.c.set(c,!0),t=this.hb(c,t);const l=await this.H.openTunnel(a,t.remote.host,t.remote.port,void 0,s,t.elevateIfNeeded?t.elevateIfNeeded:r?.elevateIfNeeded,t.privacy,r?.protocol);if(typeof l=="string")n=l;else if(l&&l.localAddress){const u=Nr(this.m??new Map,t.remote.host,t.remote.port),h=l.protocol?l.protocol===gi.Https?gi.Https:gi.Http:r?.protocol??gi.Http,d={remoteHost:l.tunnelRemoteHost,remotePort:l.tunnelRemotePort,localPort:l.tunnelLocalPort,name:r?.label??t.name,closeable:!0,localAddress:l.localAddress,protocol:h,localUri:await this.Y(l.localAddress,r),runningProcess:u?.detail,hasRunningProcess:!!u,pid:u?.pid,source:t.source??Wb,privacy:l.privacy};return this.forwarded.set(c,d),this.f.set(c,l),this.c.delete(c),await this.db(),await this.fb(l,s,r),this.g.fire(d),l}this.c.delete(c)}return n}hb(t,r){const i=this.D.has(t)?this.D:this.F.has(t)?this.F:void 0;if(i){const s=i.get(t);i.delete(t),s&&(r.name=s.name??r.name,r.local=("local"in s?s.local:"localPort"in s?s.localPort:void 0)??r.local,r.privacy=r.privacy)}return r}async ib(t,r,i){const s=i?.label??r.name;let n;(function(a){a[a.None=0]="None",a[a.Fire=1]="Fire",a[a.Reopen=2]="Reopen"})(n||(n={}));let o=n.None;switch(s!==t.name&&(t.name=s,o=n.Fire),(i?.protocol||t.protocol!==gi.Http)&&i?.protocol!==t.protocol&&(r.source=t.source,o=n.Reopen),r.privacy&&t.privacy!==r.privacy&&(o=n.Reopen),o){case n.Fire:{this.g.fire();break}case n.Reopen:await this.close(t.remoteHost,t.remotePort,Yu.User),await this.gb(r,i)}return Nr(this.f,r.remote.host,r.remote.port)}async name(t,r,i){const s=Nr(this.forwarded,t,r),n=Yr(t,r);if(s){s.name=i,await this.db(),this.j.fire({host:t,port:r});return}else this.detected.has(n)&&(this.detected.get(n).name=i,this.j.fire({host:t,port:r}))}async close(t,r,i){const s=Yr(t,r),n=this.forwarded.get(s);return i===Yu.AutoForwardEnd&&n&&n.source.source===en.Auto&&this.F.set(s,{local:n.localPort,name:n.name,privacy:n.privacy}),await this.H.closeTunnel(t,r),this.X({host:t,port:r},i)}address(t,r){const i=Yr(t,r);return(this.forwarded.get(i)||this.detected.get(i))?.localAddress}get environmentTunnelsSet(){return this.u}addEnvironmentTunnels(t){if(t)for(const r of t){const i=Nr(this.m??new Map,r.remoteAddress.host,r.remoteAddress.port),s=typeof r.localAddress=="string"?r.localAddress:Yr(r.localAddress.host,r.localAddress.port);this.detected.set(Yr(r.remoteAddress.host,r.remoteAddress.port),{remoteHost:r.remoteAddress.host,remotePort:r.remoteAddress.port,localAddress:s,protocol:gi.Http,localUri:this.Y(s),closeable:!1,runningProcess:i?.detail,hasRunningProcess:!!i,pid:i?.pid,privacy:ds.ConstantPrivate,source:{source:en.Extension,description:p(12739,null)}}),this.H.setEnvironmentTunnel(r.remoteAddress.host,r.remoteAddress.port,s,ds.ConstantPrivate,gi.Http)}this.u=!0,this.t.fire(),this.g.fire()}setCandidateFilter(t){this.r=t}async setCandidates(t){let r=t;this.r&&(r=await this.r(t));const i=this.jb(r);this.O.trace(`ForwardedPorts: (TunnelModel) removed candidates ${Array.from(i.values()).map(s=>s.port).join(", ")}`),this.n.fire(i)}jb(t){const r=this.m??new Map,i=new Map;return this.m=i,t.forEach(s=>{const n=Yr(s.host,s.port);i.set(n,{host:s.host,port:s.port,detail:s.detail,pid:s.pid}),r.has(n)&&r.delete(n);const o=Nr(this.forwarded,s.host,s.port);o&&(o.runningProcess=s.detail,o.hasRunningProcess=!0,o.pid=s.pid)}),r.forEach((s,n)=>{const o=V$(n);if(!o)return;const a=Nr(this.forwarded,o.host,o.port);a&&(a.runningProcess=void 0,a.hasRunningProcess=!1,a.pid=void 0);const c=Nr(this.detected,o.host,o.port);c&&(c.runningProcess=void 0,c.hasRunningProcess=!1,c.pid=void 0)}),r}get candidates(){return this.m?Array.from(this.m.values()):[]}get candidatesOrUndefined(){return this.m?this.candidates:void 0}async kb(){const t=Array.from(this.forwarded.values()),r=await this.getAttributes(t.map(i=>({port:i.remotePort,host:i.remoteHost})),!1);if(r)for(const i of t){const s=r.get(i.remotePort);(s?.protocol||i.protocol!==gi.Http)&&s?.protocol!==i.protocol&&await this.gb({remote:{host:i.remoteHost,port:i.remotePort},local:i.localPort,name:i.name,source:i.source},s),s&&s.label&&s.label!==i.name&&await this.name(i.remoteHost,i.remotePort,s.label)}}async getAttributes(t,r=!0){const i=new Map,s=new Map;t.forEach(l=>{const u=Nr(this.m??new Map,bu[0],l.port)??l;if(u){i.set(l.port,u);const h=BB(u)?u.pid:void 0;s.has(h)||s.set(h,[]),s.get(h)?.push(l.port)}});const n=new Map;if(t.forEach(l=>{const u=this.configPortsAttributes.getAttributes(l.port,l.host,i.get(l.port)?.detail);u&&n.set(l.port,u)}),this.G.length===0||!r)return n.size>0?n:void 0;const o=await Promise.all(this.G.flatMap(l=>Array.from(s.entries()).map(u=>{const h=u[1],d=i.get(h[0]);return l.providePortAttributes(h,d?.pid,d?.detail,Ke.None)}))),a=new Map;if(o.forEach(l=>l.forEach(u=>{u&&a.set(u.port,u)})),!n&&!a)return;const c=new Map;return t.forEach(l=>{const u=n.get(l.port),h=a.get(l.port);c.set(l.port,{elevateIfNeeded:u?.elevateIfNeeded,label:u?.label,onAutoForward:u?.onAutoForward??G$.providedActionToAction(h?.autoForwardAction),requireLocalPort:u?.requireLocalPort,protocol:u?.protocol})}),c}addAttributesProvider(t){this.G.push(t)}};__decorate([zh(1e3)],Vb.prototype,"db",null),Vb=__decorate([__param(0,$N),__param(1,p7),__param(2,Sn),__param(3,w8),__param(4,wL),__param(5,Zh),__param(6,Ne),__param(7,MB),__param(8,kN),__param(9,b6)],Vb);function zB(e){const t=e.trim().split(`
`),r=[];return t.forEach(s=>{const n=/\/proc\/(\d+)\/fd\/\d+ -> socket:\[(\d+)\]/.exec(s);n&&n.length>=3&&r.push({pid:parseInt(n[1],10),socket:parseInt(n[2],10)})}),r.reduce((s,n)=>(s[n.socket]=n,s),{})}function _B(...e){const t=[].concat(...e.map(VB));return[...new Map(t.filter(r=>r.st==="0A").map(r=>{const i=r.local_address.split(":");return{socket:parseInt(r.inode,10),ip:WB(i[0]),port:parseInt(i[1],16)}}).map(r=>[r.ip+":"+r.port,r])).values()]}function WB(e){let t="";if(e.length===8)for(let r=e.length-2;r>=0;r-=2)t+=parseInt(e.substr(r,2),16),r!==0&&(t+=".");else for(let r=0;r<e.length;r+=8){const i=e.substring(r,r+8);let s="";for(let n=8;n>=2;n-=2)s+=i.substring(n-2,n),(n===6||n===2)&&(s=parseInt(s,16).toString(16),t+=`${s}`,s="",r+n!==e.length-6&&(t+=":"))}return t}function VB(e){const t=e.trim().split(`
`),r=t.shift().trim().split(/\s+/).filter(s=>s!=="rx_queue"&&s!=="tm->when");return t.map(s=>s.trim().split(/\s+/).reduce((n,o,a)=>(n[r[a]||a]=o,n),{}))}function qB(e){return!!e.match(/.*\.vscode-server-[a-zA-Z]+\/bin.*/)||e.indexOf("out/server-main.js")!==-1||e.indexOf("_productName=VSCode")!==-1}function GB(e){const t=e.trim().split(`
`),r=[];return t.forEach(i=>{const s=/^\d+\s+\D+\s+root\s+(\d+)\s+(\d+).+\d+\:\d+\:\d+\s+(.+)$/.exec(i);s&&s.length>=4&&r.push({pid:parseInt(s[1],10),ppid:parseInt(s[2]),cmd:s[3]})}),r}async function JB(e,t,r){const i=r.reduce((n,o)=>(n[o.pid]=o,n),{}),s=[];return e.forEach(({socket:n,ip:o,port:a})=>{const c=t[n]?t[n].pid:void 0,l=c?i[c]?.cmd:void 0;c&&l&&!qB(l)&&s.push({host:o,port:a,detail:l,pid:c})}),s}function QB(e,t,r){const i=new Map,s=GB(t);for(const n of e){const o=r.get(n.port);if(o){i.set(n.port,o);continue}const a=s.find(c=>c.cmd.includes(`${n.port}`));if(a){let c=a,l;do l=s.find(u=>u.ppid===c.pid),l&&(c=l);while(l);i.set(n.port,{host:n.ip,port:n.port,pid:c.pid,detail:c.cmd,ppid:c.ppid})}else i.set(n.port,{host:n.ip,port:n.port,ppid:Number.MAX_VALUE})}return i}var qb=class extends Sp{constructor(t,r,i,s){super(t,r,i),this.D=r,this.F=s,this.y=void 0,this.z=new Map,this.C=!1,Ot&&r.remote.isRemote&&r.remote.authority&&(this.a.$setRemoteTunnelService(process.pid),this.H())}async $registerCandidateFinder(t){if(t&&this.C)return;this.C=t;let r;this.y&&(r=this.y,await this.a.$onFoundNewCandidates(this.y));const i=new _A;let s=0;for(;this.C;){const n=new Date().getTime(),o=(await this.I()).filter(l=>Fo(l.host)||qs(l.host));this.s.trace(`ForwardedPorts: (ExtHostTunnelService) found candidate ports ${o.map(l=>l.port).join(", ")}`);const a=new Date().getTime()-n;this.s.trace(`ForwardedPorts: (ExtHostTunnelService) candidate port scan took ${a} ms.`),s++>3&&i.update(a),(!r||JSON.stringify(r)!==JSON.stringify(o))&&(r=o,await this.a.$onFoundNewCandidates(r));const c=this.G(i.value);this.s.trace(`ForwardedPorts: (ExtHostTunnelService) next candidate port scan in ${c} ms.`),await new Promise(l=>setTimeout(()=>l(),c))}}G(t){return Math.max(t*20,2e3)}async H(){this.y=await this.I(),this.s.trace(`ForwardedPorts: (ExtHostTunnelService) Initial candidates found: ${this.y.map(t=>t.port).join(", ")}`)}async I(){let t="",r="";try{t=await Ju.promises.readFile("/proc/net/tcp","utf8"),r=await Ju.promises.readFile("/proc/net/tcp6","utf8")}catch{}const i=_B(t,r),s=await new Promise(d=>{A$("ls -l /proc/[0-9]*/fd/[0-9]* | grep socket:",(f,g,v)=>{d(g)})}),n=zB(s),o=await gt.readdir("/proc"),a=[];for(const d of o)try{const f=Number(d),g=Mt(k.file("/proc"),d);if((await Ju.promises.stat(g.fsPath)).isDirectory()&&!isNaN(f)){const x=await Ju.promises.readlink(Mt(g,"cwd").fsPath),$=await Ju.promises.readFile(Mt(g,"cmdline").fsPath,"utf8");a.push({pid:f,cwd:x,cmd:$})}}catch{}const c=[],l=i.filter(d=>{const f=n[d.socket];return f||c.push(d),f}),u=JB(l,n,a);let h;if(this.s.trace(`ForwardedPorts: (ExtHostTunnelService) number of possible root ports ${c.length}`),c.length>0){const d=await new Promise(f=>{A$("ps -F -A -l | grep root",(g,v,x)=>{f(v)})});this.z=QB(c,d,this.z),h=Array.from(this.z.values()),this.s.trace(`ForwardedPorts: (ExtHostTunnelService) heuristic ports ${h.map(f=>f.port).join(", ")}`)}return u.then(d=>h?d.concat(h):d)}w(t){return async r=>{const i=new H$({commit:this.D.commit,quality:this.D.quality,logService:this.s,ipcLogger:null,remoteSocketFactoryService:{_serviceBrand:void 0,async connect(n,o,a,c){const l=await t.makeConnection();return YB.connect(l,o,a,c)},register(){throw new Error("not implemented")}},addressProvider:{getAddress(){return Promise.resolve({connectTo:new m9(0),connectionToken:t.connectionToken})}},signService:this.F},"localhost",r.remoteAddress.host||"localhost",r.remoteAddress.port,r.localAddressPort);await i.waitForReady();const s=new T;return{localAddress:V$(i.localAddress)??i.localAddress,remoteAddress:{port:i.tunnelRemotePort,host:i.tunnelRemoteHost},onDidDispose:s.event,dispose:()=>{i.dispose(),s.fire(),s.dispose()}}}}};qb=__decorate([__param(0,Ue),__param(1,er),__param(2,Ne),__param(3,Qu)],qb);var YB=class pC extends pB{static connect(t,r,i,s){const n=new be,o={onClose:n.add(new T),onData:n.add(new T),onEnd:n.add(new T)};n.add(t.onDidReceiveMessage(c=>o.onData.fire(re.wrap(c)))),n.add(t.onDidEnd(()=>o.onEnd.fire())),n.add(t.onDidClose(c=>o.onClose.fire({type:0,error:c,hadError:!!c})));const a=new pC(t,s,o);return a.B(n),fB(a,r,i,s,o)}constructor(t,r,i){super(r,i),this.n=t}write(t){this.n.send(t.buffer)}h(){this.n.end()}async drain(){await this.n.drain?.()}};import*as zo from"fs";var XB=class extends C0{constructor(){super(...arguments),this.i=null}async g(e){const t=await super.g(e);if(t.scheme!==Q.file)return t;if(this.b.skipWorkspaceStorageLock)return this.d.info(`Skipping acquiring lock for ${t.fsPath}.`),t;const r=t.fsPath;let i=0;do{let s;i===0?s=r:s=/[/\\]$/.test(r)?`${r.substr(0,r.length-1)}-${i}`:`${r}-${i}`,await ZB(s);const n=bt(s,"vscode.lock"),o=await Q$(this.d,n,!1);if(o)return this.i=o,process.on("exit",()=>{o.dispose()}),k.file(s);i++}while(i<10);return t}onWillDeactivateAll(){this.i?.setWillRelease(6e3)}};async function ZB(e){try{await zo.promises.stat(e);return}catch{}try{await zo.promises.mkdir(e,{recursive:!0})}catch{}}var KB=1e3,J$=10*60*1e3,ez=class extends ae{constructor(e,t){super(),this.b=e,this.c=t,this.a=this.B(new U4),this.a.cancelAndSet(async()=>{const r=await Gb(e,t);(!r||r.pid!==process.pid)&&(e.info(`Lock '${t}': The lock was lost unexpectedly.`),this.a.cancel());try{await zo.promises.utimes(t,new Date,new Date)}catch(i){e.error(i),e.info(`Lock '${t}': Could not update mtime.`)}},KB)}dispose(){super.dispose();try{zo.unlinkSync(this.c)}catch{}}async setWillRelease(e){this.b.info(`Lock '${this.c}': Marking the lockfile as scheduled to be released in ${e} ms.`);try{const t={pid:process.pid,willReleaseAt:Date.now()+e};await gt.writeFile(this.c,JSON.stringify(t),{flag:"w"})}catch(t){this.b.error(t)}}};async function Q$(e,t,r){try{const s={pid:process.pid,willReleaseAt:0};await gt.writeFile(t,JSON.stringify(s),{flag:"wx"})}catch(s){e.error(s)}const i=await Gb(e,t);return!i||i.pid!==process.pid?r?(e.info(`Lock '${t}': Could not acquire lock, giving up.`),null):(e.info(`Lock '${t}': Could not acquire lock, checking if the file is stale.`),rz(e,t)):(e.info(`Lock '${t}': Lock acquired.`),new ez(e,t))}async function Gb(e,t){let r;try{r=await zo.promises.readFile(t)}catch(i){return e.error(i),null}try{return JSON.parse(String(r))}catch(i){return e.error(i),null}}async function Jb(e,t){let r;try{r=await zo.promises.stat(t)}catch(i){return e.error(i),0}return r.mtime.getTime()}function tz(e){try{return process.kill(e,0),!0}catch{return!1}}async function rz(e,t){const r=await Gb(e,t);if(!r)return e.info(`Lock '${t}': Could not read pid of lock holder.`),Xu(e,t);if(r.willReleaseAt){let a=r.willReleaseAt-Date.now();if(a<5e3){for(a>0?e.info(`Lock '${t}': The lockfile is scheduled to be released in ${a} ms.`):e.info(`Lock '${t}': The lockfile is scheduled to have been released.`);a>0;){if(await br(Math.min(100,a)),await Jb(e,t)===0)return Xu(e,t);a=r.willReleaseAt-Date.now()}return Xu(e,t)}}if(!tz(r.pid))return e.info(`Lock '${t}': The pid ${r.pid} appears to be gone.`),Xu(e,t);const i=await Jb(e,t),s=Date.now()-i;if(s<=J$)return e.info(`Lock '${t}': The lock does not look stale, elapsed: ${s} ms, giving up.`),null;e.info(`Lock '${t}': The lock looks stale, waiting for 2s.`),await br(2e3);const n=await Jb(e,t),o=Date.now()-n;return o<=J$?(e.info(`Lock '${t}': The lock does not look stale, elapsed: ${o} ms, giving up.`),null):(e.info(`Lock '${t}': The lock looks stale even after waiting for 2s.`),Xu(e,t))}async function Xu(e,t){e.info(`Lock '${t}': Deleting a stale lock.`);try{await zo.promises.unlink(t)}catch{}return Q$(e,t,!0)}var tn;(function(e){e[e.Trace=0]="Trace",e[e.Debug=1]="Debug",e[e.Info=2]="Info",e[e.Warning=3]="Warning",e[e.Error=4]="Error",e[e.Critical=5]="Critical",e[e.Off=6]="Off"})(tn||(tn={}));async function iz(e,t,r,i,s){try{const n=await import("@vscode/spdlog");n.setFlushOn(tn.Trace);const o=await n.createAsyncRotatingLogger(e,t,r,i);return s?o.clearFormatters():o.setPattern("%Y-%m-%d %H:%M:%S.%e [%l] %v"),o}catch(n){console.error(n)}return null}function Y$(e,t,r){switch(t){case ye.Trace:e.trace(r);break;case ye.Debug:e.debug(r);break;case ye.Info:e.info(r);break;case ye.Warning:e.warn(r);break;case ye.Error:e.error(r);break;case ye.Off:break;default:throw new Error(`Invalid log level ${t}`)}}function X$(e,t){switch(t){case ye.Trace:e.setLevel(tn.Trace);break;case ye.Debug:e.setLevel(tn.Debug);break;case ye.Info:e.setLevel(tn.Info);break;case ye.Warning:e.setLevel(tn.Warning);break;case ye.Error:e.setLevel(tn.Error);break;case ye.Off:e.setLevel(tn.Off);break;default:throw new Error(`Invalid log level ${t}`)}}var sz=class extends qm{constructor(e,t,r,i,s){super(),this.m=[],this.setLevel(s),this.n=this.s(e,t,r,i),this.B(this.onDidChangeLogLevel(n=>{this.r&&X$(this.r,n)}))}async s(e,t,r,i){const s=r?6:1,n=30/s*Ak.MB,o=await iz(e,t,n,s,i);if(o){this.r=o,X$(this.r,this.getLevel());for(const{level:a,message:c}of this.m)Y$(this.r,a,c);this.m=[]}}g(e,t){this.r?Y$(this.r,e,t):this.getLevel()<=e&&this.m.push({level:e,message:t})}flush(){this.r?this.r.flush():this.n.then(()=>this.flush())}dispose(){this.r?this.u():this.n.then(()=>this.u()),super.dispose()}u(){this.r&&(this.r.drop(),this.r=void 0)}},nz=class extends _p{s(e,t,r){return e.scheme===Q.file?new sz(r?.name||ir(),e.fsPath,!r?.donotRotate,!!r?.donotUseFormatters,t):super.s(e,t,r)}registerLogger(e){super.registerLogger(e),this.r.$registerLogger(e)}deregisterLogger(e){super.deregisterLogger(e),this.r.$deregisterLogger(e)}};import{homedir as oz}from"os";var az=class extends Up{m(){return oz()}},cz=class extends ae{constructor(e,t=[]){super(),this.a=new DA([e,...t]),this.B(e.onDidChangeLogLevel(r=>this.setLevel(r)))}get onDidChangeLogLevel(){return this.a.onDidChangeLogLevel}setLevel(e){this.a.setLevel(e)}getLevel(){return this.a.getLevel()}trace(e,...t){this.a.trace(e,...t)}debug(e,...t){this.a.debug(e,...t)}info(e,...t){this.a.info(e,...t)}warn(e,...t){this.a.warn(e,...t)}error(e,...t){this.a.error(e,...t)}flush(){this.a.flush()}},Qb=class extends cz{constructor(t,r,i){const s=i.remote.isRemote?"remoteexthost":t?"workerexthost":"exthost",n=i.remote.isRemote?p(2722,null):p(t?2723:2724,null);super(r.createLogger(s,{name:n}))}};Qb=__decorate([__param(1,ca),__param(2,er)],Qb),Be(Js,hB,0),Be(ca,nz,1),Be(Ne,new Rs(Qb,[!1],!0)),Be(Qu,bE,1),Be($0,XB,0),Be(xw,Mw,0),Be($w,Ww,0),Be(ww,Tw,0),Be(Gs,Aw,0),Be(Ep,qb,0),Be(uc,az,0);import{createRequire as lz}from"node:module";var Z$=lz(import.meta.url);(function(){for(let t=0;t<process.execArgv.length;t++)process.execArgv[t]==="--inspect-port=0"&&(process.execArgv.splice(t,1),t--)})();var Eg=yC(process.argv.slice(2),{boolean:["transformURIs","skipWorkspaceStorageLock"],string:["useHostProxy"]});(function(){const e=Z$("module"),t=e._load;e._load=function(r){if(r==="natives")throw new Error('Either the extension or an NPM dependency is using the [unsupported "natives" node module](https://go.microsoft.com/fwlink/?linkid=871887).');return t.apply(this,arguments)}})();var Sg=process.exit.bind(process),uz=process.on.bind(process);function hz(e){process.exit=function(t){if(e)Sg(t);else{const r=new Error("An extension called process.exit() and this was prevented.");console.warn(r.stack)}},process.crash=function(){const t=new Error("An extension called process.crash() and this was prevented.");console.warn(t.stack)},process.env.ELECTRON_RUN_AS_NODE="1",process.on=function(t,r){t==="uncaughtException"&&(r=function(){try{return r.call(void 0,arguments)}catch{}}),uz(t,r)}}var ps=function(e){Sg()};function dz(){const e=bF(process.env);if(e.type===3)return new Promise((t,r)=>{const i=s=>{const n=s[0],o=new no;n.on("message",a=>o.fire(re.wrap(a.data))),n.on("close",()=>{ps("renderer closed the MessagePort")}),n.start(),t({onMessage:o.event,send:a=>n.postMessage(a.buffer)})};process.parentPort.on("message",s=>i(s.ports))});if(e.type===2)return new Promise((t,r)=>{let i=null;const s=setTimeout(()=>{ps("VSCODE_EXTHOST_IPC_SOCKET timeout")},6e4),n=108e5,o=3e5,a=new H4(()=>ps("renderer disconnected for too long (1)"),n),c=new H4(()=>ps("renderer disconnected for too long (2)"),o);process.on("message",(u,h)=>{if(u&&u.type==="VSCODE_EXTHOST_IPC_SOCKET"){h.setNoDelay(!0);const d=re.wrap(Buffer.from(u.initialDataChunk,"base64"));let f;if(u.skipWebSocketFrames)f=new qc(h,"extHost-socket");else{const g=re.wrap(Buffer.from(u.inflateBytes,"base64"));f=new z2(new qc(h,"extHost-socket"),u.permessageDeflate,g,!1)}i?(a.cancel(),c.cancel(),i.beginAcceptReconnection(f,d),i.endAcceptReconnection(),i.sendResume()):(clearTimeout(s),i=new Im({socket:f,initialChunk:d}),i.sendResume(),i.onDidDispose(()=>ps("renderer disconnected")),t(i),i.onSocketClose(()=>{a.schedule()}))}if(u&&u.type==="VSCODE_EXTHOST_IPC_REDUCE_GRACE_TIME"){if(c.isScheduled())return;a.isScheduled()&&c.schedule()}});const l={type:"VSCODE_EXTHOST_IPC_READY"};process.send?.(l)});{const t=e.pipeName;return new Promise((r,i)=>{const s=kC.createConnection(t,()=>{s.removeListener("error",i);const n=new Im({socket:new qc(s,"extHost-renderer")});n.sendResume(),r(n)});s.once("error",i),s.on("close",()=>{ps("renderer closed the socket")})})}}async function fz(){const e=await dz();return new class{constructor(){this.a=new no,this.onMessage=this.a.event,this.b=!1,this.d=e.onMessage(t=>{MN(t,2)?(this.b=!0,this.d.dispose(),ps("received terminate message from renderer")):this.a.fire(t)})}send(t){this.b||e.send(t)}async drain(){if(e.drain)return e.drain()}}}function pz(e){return new Promise(t=>{const r=e.onMessage(i=>{r.dispose();const s=JSON.parse(i.toString()),n=s.commit,o=ZD.commit;if(n&&o&&n!==o&&Sg(55),s.parentPid){let a=0;setInterval(function(){try{process.kill(s.parentPid,0),a=0}catch(l){l&&l.code==="EPERM"?(a++,a>=3&&ps(`parent process ${s.parentPid} does not exist anymore (3 x EPERM): ${l.message} (code: ${l.code}) (errno: ${l.errno})`)):ps(`parent process ${s.parentPid} does not exist anymore: ${l.message} (code: ${l.code}) (errno: ${l.errno})`)}},1e3);let c;try{c=Z$("native-watchdog"),c.start(s.parentPid)}catch(l){It(l)}}e.send(Ux(0)),t({protocol:e,initData:s})});e.send(Ux(1))})}async function gz(){const e=[];process.on("unhandledRejection",(a,c)=>{e.push(c),setTimeout(()=>{const l=e.indexOf(c);l>=0&&c.catch(u=>{e.splice(l,1),ys(u)||(console.warn(`rejected promise not handled within 1 second: ${u}`),u&&u.stack&&console.warn(`stack trace: ${u.stack}`),a&&It(a))})},1e3)}),process.on("rejectionHandled",a=>{const c=e.indexOf(a);c>=0&&e.splice(c,1)}),process.on("uncaughtException",function(a){SC(a)||It(a)}),Nt("code/extHost/willConnectToRenderer");const t=await fz();Nt("code/extHost/didConnectToRenderer");const r=await pz(t);Nt("code/extHost/didWaitForInitData");const{initData:i}=r;hz(!!i.environment.extensionTestsLocationURI),i.environment.useHostProxy=Eg.useHostProxy!==void 0?Eg.useHostProxy!=="false":void 0,i.environment.skipWorkspaceStorageLock=ie(Eg.skipWorkspaceStorageLock,!1);const s=new class{constructor(){this.pid=process.pid}exit(c){Sg(c)}fsExists(c){return gt.exists(c)}fsRealpath(c){return $2(c)}};let n=null;i.remote.authority&&Eg.transformURIs&&(n=vF(i.remote.authority));const o=new gF(r.protocol,i,s,n);ps=a=>o.terminate(a)}gz().catch(e=>console.log(e));

//# sourceMappingURL=https://main.vscode-cdn.net/sourcemaps/384ff7382de624fb94dbaf6da11977bba1ecd427/core/vs/workbench/api/node/extensionHostProcess.js.map
