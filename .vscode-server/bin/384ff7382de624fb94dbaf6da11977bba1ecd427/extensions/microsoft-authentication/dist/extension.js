/*! For license information please see extension.js.LICENSE.txt */
(()=>{var e={8197:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Environment:()=>r});var r=function(){function e(e){if(this.validateAuthority=!0,!e||"object"!=typeof e)throw new Error("'parameters' is a required parameter and must be of type 'object'.");["name","portalUrl","managementEndpointUrl","resourceManagerEndpointUrl","activeDirectoryEndpointUrl","activeDirectoryResourceId"].forEach((function(t){if(!e[t]||"string"!=typeof e[t].valueOf())throw new Error('Please provide "'+t+'" for the environment and it must be of type "string".')})),this.name=e.name,this.portalUrl=e.portalUrl,this.managementEndpointUrl=e.managementEndpointUrl,this.resourceManagerEndpointUrl=e.resourceManagerEndpointUrl,this.activeDirectoryEndpointUrl=e.activeDirectoryEndpointUrl,this.activeDirectoryResourceId=e.activeDirectoryResourceId,this.activeDirectoryGraphApiVersion&&(this.activeDirectoryGraphApiVersion=e.activeDirectoryGraphApiVersion),this.activeDirectoryGraphResourceId&&(this.activeDirectoryGraphResourceId=e.activeDirectoryGraphResourceId),this.azureDataLakeAnalyticsCatalogAndJobEndpointSuffix&&(this.azureDataLakeAnalyticsCatalogAndJobEndpointSuffix=e.azureDataLakeAnalyticsCatalogAndJobEndpointSuffix),this.azureDataLakeStoreFileSystemEndpointSuffix&&(this.azureDataLakeStoreFileSystemEndpointSuffix=e.azureDataLakeStoreFileSystemEndpointSuffix),this.batchResourceId&&(this.batchResourceId=e.batchResourceId),this.galleryEndpointUrl&&(this.galleryEndpointUrl=e.galleryEndpointUrl),this.keyVaultDnsSuffix&&(this.keyVaultDnsSuffix=e.keyVaultDnsSuffix),this.publishingProfileUrl&&(this.publishingProfileUrl=e.publishingProfileUrl),this.sqlManagementEndpointUrl&&(this.sqlManagementEndpointUrl=e.sqlManagementEndpointUrl),this.sqlServerHostnameSuffix&&(this.sqlServerHostnameSuffix=e.sqlServerHostnameSuffix),this.storageEndpointSuffix&&(this.storageEndpointSuffix=e.storageEndpointSuffix)}return e.add=function(t){var n={},r=new e(t);n[t.name]=r,Object.assign(e,n)},e.get=function(t){if(!t)throw new TypeError("name cannot be null or undefined and must be of type string.");return e[t]},e.AzureCloud={name:"AzureCloud",portalUrl:"https://portal.azure.com",publishingProfileUrl:"https://go.microsoft.com/fwlink/?LinkId=254432",managementEndpointUrl:"https://management.core.windows.net",resourceManagerEndpointUrl:"https://management.azure.com/",sqlManagementEndpointUrl:"https://management.core.windows.net:8443/",sqlServerHostnameSuffix:".database.windows.net",galleryEndpointUrl:"https://gallery.azure.com/",activeDirectoryEndpointUrl:"https://login.microsoftonline.com/",activeDirectoryResourceId:"https://management.core.windows.net/",activeDirectoryGraphResourceId:"https://graph.windows.net/",batchResourceId:"https://batch.core.windows.net/",activeDirectoryGraphApiVersion:"2013-04-05",storageEndpointSuffix:"core.windows.net",keyVaultDnsSuffix:".vault.azure.net",azureDataLakeStoreFileSystemEndpointSuffix:"azuredatalakestore.net",azureDataLakeAnalyticsCatalogAndJobEndpointSuffix:"azuredatalakeanalytics.net",validateAuthority:!0},e.ChinaCloud={name:"AzureChinaCloud",portalUrl:"https://portal.azure.cn",publishingProfileUrl:"https://go.microsoft.com/fwlink/?LinkID=301774",managementEndpointUrl:"https://management.core.chinacloudapi.cn",resourceManagerEndpointUrl:"https://management.chinacloudapi.cn",sqlManagementEndpointUrl:"https://management.core.chinacloudapi.cn:8443/",sqlServerHostnameSuffix:".database.chinacloudapi.cn",galleryEndpointUrl:"https://gallery.chinacloudapi.cn/",activeDirectoryEndpointUrl:"https://login.chinacloudapi.cn/",activeDirectoryResourceId:"https://management.core.chinacloudapi.cn/",activeDirectoryGraphResourceId:"https://graph.chinacloudapi.cn/",activeDirectoryGraphApiVersion:"2013-04-05",batchResourceId:"https://batch.chinacloudapi.cn/",storageEndpointSuffix:"core.chinacloudapi.cn",keyVaultDnsSuffix:".vault.azure.cn",azureDataLakeStoreFileSystemEndpointSuffix:"N/A",azureDataLakeAnalyticsCatalogAndJobEndpointSuffix:"N/A",validateAuthority:!0},e.USGovernment={name:"AzureUSGovernment",portalUrl:"https://portal.azure.us",publishingProfileUrl:"https://manage.windowsazure.us/publishsettings/index",managementEndpointUrl:"https://management.core.usgovcloudapi.net",resourceManagerEndpointUrl:"https://management.usgovcloudapi.net",sqlManagementEndpointUrl:"https://management.core.usgovcloudapi.net:8443/",sqlServerHostnameSuffix:".database.usgovcloudapi.net",galleryEndpointUrl:"https://gallery.usgovcloudapi.net/",activeDirectoryEndpointUrl:"https://login.microsoftonline.us/",activeDirectoryResourceId:"https://management.core.usgovcloudapi.net/",activeDirectoryGraphResourceId:"https://graph.windows.net/",batchResourceId:"https://batch.core.usgovcloudapi.net/",activeDirectoryGraphApiVersion:"2013-04-05",storageEndpointSuffix:"core.usgovcloudapi.net",keyVaultDnsSuffix:".vault.usgovcloudapi.net",azureDataLakeStoreFileSystemEndpointSuffix:"N/A",azureDataLakeAnalyticsCatalogAndJobEndpointSuffix:"N/A",validateAuthority:!0},e.GermanCloud={name:"AzureGermanCloud",portalUrl:"https://portal.microsoftazure.de/",publishingProfileUrl:"https://manage.microsoftazure.de/publishsettings/index",managementEndpointUrl:"https://management.core.cloudapi.de",resourceManagerEndpointUrl:"https://management.microsoftazure.de",sqlManagementEndpointUrl:"https://management.core.cloudapi.de:8443/",sqlServerHostnameSuffix:".database.cloudapi.de",galleryEndpointUrl:"https://gallery.cloudapi.de/",activeDirectoryEndpointUrl:"https://login.microsoftonline.de/",activeDirectoryResourceId:"https://management.core.cloudapi.de/",activeDirectoryGraphResourceId:"https://graph.cloudapi.de/",batchResourceId:"https://batch.microsoftazure.de/",activeDirectoryGraphApiVersion:"2013-04-05",storageEndpointSuffix:"core.cloudapi.de",keyVaultDnsSuffix:".vault.microsoftazure.de",azureDataLakeStoreFileSystemEndpointSuffix:"N/A",azureDataLakeAnalyticsCatalogAndJobEndpointSuffix:"N/A",validateAuthority:!0},e}()},670:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AppInsightsCore:()=>m,BaseTelemetryPlugin:()=>D.s,DiagnosticLogger:()=>u.wq,EventLatency:()=>C,EventPersistence:()=>A,EventPropertyType:()=>I,EventsDiscardedReason:()=>U.x,FullVersionString:()=>f.xE,InternalAppInsightsCore:()=>l._,LoggingSeverity:()=>x,MinChannelPriorty:()=>M,NotificationManager:()=>N.h,PerfEvent:()=>s.Q6,PerfManager:()=>s.NS,ProcessTelemetryContext:()=>L.W0,TraceLevel:()=>w,Undefined:()=>Z.bA,ValueKind:()=>y,ValueSanitizer:()=>O,Version:()=>f.Rx,_InternalLogMessage:()=>u.WD,__getRegisteredEvents:()=>q.El,_logInternalMessage:()=>u.Oc,_throwInternal:()=>u.ZP,_warnToConsole:()=>u.OG,addEventHandler:()=>q.So,addEventListeners:()=>q.lQ,addPageHideEventListener:()=>q.Fc,addPageShowEventListener:()=>q.oS,addPageUnloadEventListener:()=>q.ee,areCookiesSupported:()=>ee.gi,arrForEach:()=>R.I,arrIndexOf:()=>b.r,arrMap:()=>$.W,arrReduce:()=>K.K,attachEvent:()=>q.Q3,blockDynamicConversion:()=>ie.V9,cookieAvailable:()=>ee.gi,createCookieMgr:()=>ee.xN,createDynamicConfig:()=>a.e,createEnumStyle:()=>v.H,createGuid:()=>f.gj,createProcessTelemetryContext:()=>L.i8,createTraceParent:()=>re.wk,createUniqueNamespace:()=>te.Z,createUnloadHandlerContainer:()=>ne.P,dateNow:()=>G.f,detachEvent:()=>q.Ym,disallowsSameSiteNone:()=>ee.It,doPerf:()=>s.r2,dumpObj:()=>c.m,eventOff:()=>q.ML,eventOn:()=>q.mB,extend:()=>f.X$,findW3cTraceParent:()=>re.ef,forceDynamicConversion:()=>ie.Hf,formatTraceParent:()=>re.L0,generateW3CId:()=>W.cL,getCommonSchemaMetaData:()=>f.Go,getConsole:()=>X.U5,getCookieValue:()=>f.UM,getCrypto:()=>X.MY,getDocument:()=>J.YE,getDynamicConfigHandler:()=>ie.QA,getExceptionName:()=>H.lL,getFieldValueType:()=>f.cq,getGlobal:()=>J.mS,getGlobalInst:()=>J.zS,getHistory:()=>J.JK,getIEVersion:()=>X.L0,getISOString:()=>H._u,getJSON:()=>X.hm,getLocation:()=>X.g$,getMsCrypto:()=>X.iN,getNavigator:()=>J.w3,getPerformance:()=>Y.FJ,getSetValue:()=>H.c2,getTenantId:()=>f.EO,getTime:()=>f.WB,getWindow:()=>J.zk,hasDocument:()=>J.Wt,hasHistory:()=>J.tw,hasJSON:()=>X.Z,hasNavigator:()=>J.w9,hasOwnProperty:()=>F.v,hasWindow:()=>J.Vd,isArray:()=>S.cy,isArrayValid:()=>f.wJ,isBeaconsSupported:()=>X.Uf,isBoolean:()=>S.Lm,isChromium:()=>f.F2,isDate:()=>S.$P,isDocumentObjectAvailable:()=>f.g8,isError:()=>S.bJ,isFetchSupported:()=>X.R7,isFunction:()=>S.Tn,isGreaterThanZero:()=>f.ei,isIE:()=>X.lT,isLatency:()=>f.Hh,isNotTruthy:()=>S.wo,isNullOrUndefined:()=>S.hX,isNumber:()=>S.Et,isObject:()=>S.Gv,isReactNative:()=>X.lV,isSampledFlag:()=>re.N7,isString:()=>S.Kg,isTruthy:()=>S.zz,isTypeof:()=>S.Ed,isUint8ArrayAvailable:()=>f.h3,isUndefined:()=>S.b0,isValidSpanId:()=>re.wN,isValidTraceId:()=>re.hX,isValidTraceParent:()=>re.mJ,isValueAssigned:()=>f.yD,isValueKind:()=>f.m0,isWindowObjectAvailable:()=>f.P$,isXhrSupported:()=>X.xk,mergeEvtNamespace:()=>q.Hm,newGuid:()=>W.aq,newId:()=>Q.Si,normalizeJsName:()=>H.cH,objDefineAccessors:()=>V.r,objForEachKey:()=>T.z,objFreeze:()=>d.N6,objKeys:()=>d.cG,objSeal:()=>d.js,onConfigChange:()=>a.a,openXhr:()=>f.H$,optimizeObject:()=>H.hW,parseTraceParent:()=>re.ZI,perfNow:()=>Y.UU,proxyAssign:()=>H.qz,proxyFunctionAs:()=>H.RF,proxyFunctions:()=>H.o$,random32:()=>Q.VN,randomValue:()=>Q.Z1,removeEventHandler:()=>q.zh,removeEventListeners:()=>q.Wg,removePageHideEventListener:()=>q.sq,removePageShowEventListener:()=>q.vF,removePageUnloadEventListener:()=>q.Ds,safeGetCookieMgr:()=>ee.um,safeGetLogger:()=>u.y0,sanitizeProperty:()=>f.TC,setEnableEnvMocks:()=>X.cU,setProcessTelemetryTimings:()=>f.u9,setValue:()=>H.KY,strContains:()=>H.Ju,strEndsWith:()=>j.C,strFunction:()=>Z.hW,strObject:()=>Z._1,strPrototype:()=>Z.vR,strStartsWith:()=>z.t,strTrim:()=>B.EH,strUndefined:()=>Z.bA,throwError:()=>o.$8,toISOString:()=>H._u,useXDomainRequest:()=>X.PV});var r=n(659),i=n(8279),o=n(3517),s=n(8156),a=n(9622),c=n(8693),u=n(3775),l=n(9379),d=n(1324),h=n(937),f=n(4822),p=n(1739),g=(0,d.ZH)({endpointUrl:h.S,propertyStorageOverride:{isVal:function(e){return!e||e.getProperty&&e.setProperty||(0,o.$8)("Invalid property storage override passed."),!0}}}),m=function(e){function t(){var n=e.call(this)||this;return(0,i.A)(t,n,(function(e,t){e[p.mE]=function(n,r,i,o){(0,s.r2)(e,(function(){return"AppInsightsCore.initialize"}),(function(){try{t[p.mE]((0,a.e)(n,g,i||e[p.Uw],!1).cfg,r,i,o)}catch(t){var s=e[p.Uw],l=(0,c.m)(t);-1!==l[p.Sj]("channels")&&(l+="\n - Channels must be provided through config.channels only!"),(0,u.ZP)(s,1,514,"SDK Initialization Failed - no telemetry will be sent: "+l)}}),(function(){return{config:n,extensions:r,logger:i,notificationManager:o}}))},e.track=function(n){(0,s.r2)(e,(function(){return"AppInsightsCore.track"}),(function(){var r=n;if(r){r[p.dg]=r[p.dg]||{},r[p.dg].trackStart=(0,f.WB)(),(0,f.Hh)(r.latency)||(r.latency=1);var i=r.ext=r.ext||{};i.sdk=i.sdk||{},i.sdk.ver=f.xE;var o=r.baseData=r.baseData||{};o[h._0]=o[h._0]||{};var s=o[h._0];s[h.hj]=s[h.hj]||e.pluginVersionString||h.m5}t.track(r)}),(function(){return{item:n}}),!n.sync)},e[p.h4]=function(e){return t[p.h4](e||"InternalLog")}})),n}return(0,r.qU)(t,e),t.__ieDyn=1,t}(l._),v=n(4282),y=(0,v.H)({NotSet:0,Pii_DistinguishedName:1,Pii_GenericData:2,Pii_IPV4Address:3,Pii_IPv6Address:4,Pii_MailSubject:5,Pii_PhoneNumber:6,Pii_QueryString:7,Pii_SipAddress:8,Pii_SmtpAddress:9,Pii_Identity:10,Pii_Uri:11,Pii_Fqdn:12,Pii_IPV4AddressLegacy:13,CustomerContent_GenericContent:32}),C=(0,v.H)({Normal:1,CostDeferred:2,RealTime:3,Immediate:4}),I=(0,v.H)({Unspecified:0,String:1,Int32:2,UInt32:3,Int64:4,UInt64:5,Double:6,Bool:7,Guid:8,DateTime:9}),A=(0,v.H)({Normal:1,Critical:2}),w=(0,v.H)({NONE:0,ERROR:1,WARNING:2,INFORMATION:3}),S=n(6668),T=n(9018),E=n(4016),_=n(1742),b=n(6832),k=(0,_.b2)("includes",E.wM,(function(e,t,n){return-1!==(0,b.r)(e,t,n)})),R=n(5439),P=n(4657),O=function(){function e(e){var t=this,n={},r=[],i=[];function o(e,t){var o,s=n[e];if(s&&(o=s[t]),!o&&null!==o){if((0,S.Kg)(e)&&(0,S.Kg)(t))if(i[p.oI]>0){for(var a=0;a<i[p.oI];a++)if(i[a][p.hF](e,t)){o={canHandle:!0,fieldHandler:i[a]};break}}else 0===r[p.oI]&&(o={canHandle:!0});if(!o&&null!==o)for(o=null,a=0;a<r[p.oI];a++)if(r[a][p.hF](e,t)){o={canHandle:!0,handler:r[a],fieldHandler:null};break}s||(s=n[e]={}),s[t]=o}return o}function s(e,t,n,r,i,o){if(e.handler)return e.handler.property(t,n,i,o);if(!(0,S.hX)(i[p.QV])){if(!(4096&~r&&(0,f.m0)(i[p.QV])))return null;i[p.pF]=i[p.pF].toString()}return c(e.fieldHandler,t,n,r,i)}function a(e,t,n){return(0,f.yD)(n)?{value:n}:null}function c(e,n,r,i,o){if(o&&e){var s=e.getSanitizer(n,r,i,o[p.QV],o.propertyType);if(s)if(4===i){var u={},l=o[p.pF];(0,T.z)(l,(function(t,i){var o=n+"."+r;if((0,f.yD)(i)){var s=a(0,0,i);(s=c(e,o,t,(0,f.cq)(i),s))&&(u[t]=s[p.pF])}})),o[p.pF]=u}else{var d={path:n,name:r,type:i,prop:o,sanitizer:t};o=s.call(t,d)}}return o}e&&i.push(e),t.clearCache=function(){n={}},t.addSanitizer=function(e){e&&(k(r,e)||r.push(e),n={})},t.addFieldSanitizer=function(e){e&&(k(i,e)||i.push(e),n={})},t[p.Rl]=function(e){if(e){var t=(0,b.r)(r,e);-1!==t&&(r.splice(t,1),n={}),(0,R.I)(r,(function(t){t&&t[p.Rl]&&t[p.Rl](e)}))}},t[p.Mr]=function(e){if(e){var t=(0,b.r)(i,e);-1!==t&&(i.splice(t,1),n={}),(0,R.I)(r,(function(t){t&&t[p.Mr]&&t[p.Mr](e)}))}},t.isEmpty=function(){return(0,P.R)(r)+(0,P.R)(i)===0},t[p.hF]=function(e,t){var n=o(e,t);return!!n&&n[p.nw]},t[p.pF]=function(e,t,n,r){var i=o(e,t);if(i&&i[p.nw]){if(!i||!i[p.nw])return null;if(i.handler)return i.handler[p.pF](e,t,n,r);if(!(0,S.Kg)(t)||(0,S.hX)(n)||n===h.m5)return null;var c=null,u=(0,f.cq)(n);if(8192&~u)1!==u&&2!==u&&3!==u&&4096&~u?4===u&&(c=a(0,0,r?JSON.stringify(n):n)):c=a(0,0,n);else{var l=-8193&u;if(c=n,!(0,f.yD)(c[p.pF])||1!==l&&2!==l&&3!==l&&4096&~l)return null}if(c)return s(i,e,t,u,c,r)}return null},t.property=function(e,t,n,r){var i=o(e,t);if(!i||!i[p.nw])return null;if(!(0,S.Kg)(t)||(0,S.hX)(n)||!(0,f.yD)(n[p.pF]))return null;var a=(0,f.cq)(n[p.pF]);return 0===a?null:s(i,e,t,a,n,r)}}return e.getFieldType=f.cq,e}(),M=100,x=(0,v.H)({DISABLED:0,CRITICAL:1,WARNING:2,DEBUG:3}),N=n(1356),D=n(8257),L=n(2317),U=n(3662),F=n(3266),q=n(6149),H=n(3673),z=n(7931),j=n(2494),B=n(8993),$=n(4335),K=n(1011),V=n(6336),G=n(225),W=n(9882),Y=n(558),Q=n(6535),J=n(3076),X=n(7292),Z=n(5664),ee=n(5034),te=n(4276),ne=n(836),re=n(1864),ie=n(9147)},937:(e,t,n)=>{"use strict";n.d(t,{S:()=>i,_0:()=>s,hj:()=>o,m5:()=>r});var r="",i="https://browser.events.data.microsoft.com/OneCollector/1.0/",o="version",s="properties"},4822:(e,t,n)=>{"use strict";n.d(t,{EO:()=>b,F2:()=>H,Go:()=>O,H$:()=>z,Hh:()=>R,P$:()=>E,Rx:()=>m,TC:()=>P,UM:()=>M,WB:()=>D,X$:()=>N,cq:()=>q,ei:()=>j,g8:()=>T,gj:()=>x,h3:()=>k,m0:()=>L,u9:()=>F,wJ:()=>U,xE:()=>v,yD:()=>_});var r,i=n(3076),o=n(6668),s=n(7292),a=n(9882),c=n(9018),u=n(5439),l=n(558),d=n(5664),h=n(5881),f=n(3178),p=n(937),g=n(1739),m="4.0.3",v="1DS-Web-JS-"+m,y=d.Wy.hasOwnProperty,C="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",I="withCredentials",A="timeout",w=((r={})[0]=0,r[2]=6,r[1]=1,r[3]=7,r[4098]=6,r[4097]=1,r[4099]=7,r),S=null,T=(0,i.Wt)(),E=(0,i.Vd)();function _(e){return!(e===p.m5||(0,o.hX)(e))}function b(e){if(e){var t=(0,h.H)(e,"-");if(t>-1)return(0,f.ZW)(e,t)}return p.m5}function k(){return null===S&&(S=!(0,o.b0)(Uint8Array)&&!function(){var e=(0,i.w3)();if(!(0,o.b0)(e)&&e.userAgent){var t=e.userAgent.toLowerCase();if((t[g.Sj]("safari")>=0||t[g.Sj]("firefox")>=0)&&t[g.Sj]("chrome")<0)return!0}return!1}()&&!(0,s.lV)()),S}function R(e){return!!(e&&(0,o.Et)(e)&&e>=1&&e<=4)}function P(e,t,n){if(!t&&!_(t)||"string"!=typeof e)return null;var r=typeof t;if("string"===r||"number"===r||"boolean"===r||(0,o.cy)(t))t={value:t};else if("object"!==r||y.call(t,"value")){if((0,o.hX)(t[g.pF])||t[g.pF]===p.m5||!(0,o.Kg)(t[g.pF])&&!(0,o.Et)(t[g.pF])&&!(0,o.Lm)(t[g.pF])&&!(0,o.cy)(t[g.pF]))return null}else t={value:n?JSON.stringify(t):t};if((0,o.cy)(t[g.pF])&&!U(t[g.pF]))return null;if(!(0,o.hX)(t[g.QV])){if((0,o.cy)(t[g.pF])||!L(t[g.QV]))return null;t[g.pF]=t[g.pF].toString()}return t}function O(e,t,n){var r=-1;if(!(0,o.b0)(e))if(t>0&&(32===t?r=8192:t<=13&&(r=t<<5)),function(e){return e>=0&&e<=9}(n))-1===r&&(r=0),r|=n;else{var i=w[q(e)]||-1;-1!==r&&-1!==i?r|=i:6===i&&(r=i)}return r}function M(e,t,n){var r;return void 0===n&&(n=!0),e&&(r=e.get(t),n&&r&&decodeURIComponent&&(r=decodeURIComponent(r))),r||p.m5}function x(e){void 0===e&&(e="D");var t=(0,a.aq)();return"B"===e?t="{"+t+"}":"P"===e?t="("+t+")":"N"===e&&(t=t.replace(/-/g,p.m5)),t}function N(e,t,n,r,i){var s={},a=!1,l=0,d=arguments[g.oI],h=arguments;for((0,o.Lm)(h[0])&&(a=h[0],l++);l<d;l++)e=h[l],(0,c.z)(e,(function(e,t){a&&t&&(0,o.Gv)(t)?(0,o.cy)(t)?(s[e]=s[e]||[],(0,u.I)(t,(function(t,n){t&&(0,o.Gv)(t)?s[e][n]=N(!0,s[e][n],t):s[e][n]=t}))):s[e]=N(!0,s[e],t):s[e]=t}));return s}var D=l.UU;function L(e){return 0===e||e>0&&e<=13||32===e}function U(e){return e[g.oI]>0}function F(e,t){var n=e;n[g.dg]=n[g.dg]||{},n[g.dg][g.Jg]=n[g.dg][g.Jg]||{},n[g.dg][g.Jg][t]=D()}function q(e){var t=0;if(null!=e){var n=typeof e;"string"===n?t=1:"number"===n?t=2:"boolean"===n?t=3:n===d._1&&(t=4,(0,o.cy)(e)?(t=4096,e[g.oI]>0&&(t|=q(e[0]))):y.call(e,"value")&&(t=8192|q(e[g.pF])))}return t}function H(){return!!(0,i.zS)("chrome")}function z(e,t,n,r,i,o){function s(e,t,n){try{e[t]=n}catch(e){}}void 0===r&&(r=!1),void 0===i&&(i=!1);var a=new XMLHttpRequest;return r&&s(a,C,r),n&&s(a,I,n),a.open(e,t,!i),n&&s(a,I,n),!i&&o&&s(a,A,o),a}function j(e){return e>0}},1739:(e,t,n)=>{"use strict";n.d(t,{Jg:()=>d,Mr:()=>p,QV:()=>u,Rl:()=>f,Sj:()=>o,Uw:()=>i,dg:()=>s,h4:()=>a,hF:()=>h,mE:()=>r,nw:()=>g,oI:()=>l,pF:()=>c});var r="initialize",i="logger",o="indexOf",s="timings",a="pollInternalLogs",c="value",u="kind",l="length",d="processTelemetryStart",h="handleField",f="rmSanitizer",p="rmFieldSanitizer",g="canHandle"},8916:(e,t,n)=>{"use strict";n.r(t),n.d(t,{BE_PROFILE:()=>o,NRT_PROFILE:()=>i,PostChannel:()=>Dt,RT_PROFILE:()=>r});var r="REAL_TIME",i="NEAR_REAL_TIME",o="BEST_EFFORT",s=n(659),a=n(8279),c=n(4822),u=n(6668),l=n(8156),d=n(6149),h=n(4276),f=n(9622),p=n(2317),g=n(3076),m=n(3673),v=n(3662),y=n(5439),C=n(9018),I=n(3775),A=n(8257),w=n(636),S=n(1324),T="",E="POST",_="drop",b="requeue",k="application/x-json-stream",R="cache-control",P="content-type",O="kill-duration",M="time-delta-millis",x="client-version",N="client-id",D="time-delta-to-apply-millis",L="upload-time",U="apikey",F="AuthMsaDeviceTicket",q="AuthXToken",H="msfpc",z="trace",j="user",B="allowRequestSending",$="firstRequestSent",K="shouldAddClockSkewHeaders",V="getClockSkewHeaderValue",G="setClockSkew",W="length",Y="concat",Q="iKey",J="count",X="events",Z="push",ee="split",te="splice",ne="toLowerCase",re="hdrs",ie="useHdrs",oe="initialize",se="setTimeoutOverride",ae="clearTimeoutOverride",ce="overrideEndpointUrl",ue="avoidOptions",le="enableCompoundKey",de="disableXhrSync",he="disableFetchKeepAlive",fe="useSendBeacon",pe="alwaysUseXhrOverride",ge="urlString",me="timeout",ve="ontimeout",ye="data",Ce="_sendReason",Ie="headers",Ae="getResponseHeader",we="getAllResponseHeaders",Se="_thePayload",Te="batches",Ee="sendType",_e="canSendRequest",be="sendQueuedRequests",ke="isCompletelyIdle",Re="setUnloading",Pe="sendSynchronousBatch",Oe="_transport",Me="getWParam",xe="isBeacon",Ne="timings",De="isTeardown",Le="isSync",Ue="sendPOST",Fe="setKillSwitchTenants",qe="_backOffTransmission",He="identifier",ze="eventsLimitInMem",je="autoFlushEventsLimit",Be="sendAttempt",$e="latency",Ke="baseData",Ve="sync";function Ge(e){var t=(e.ext||{}).intweb;return t&&(0,c.yD)(t[H])?t[H]:null}function We(e){for(var t=null,n=0;null===t&&n<e[W];n++)t=Ge(e[n]);return t}var Ye=function(){function e(t,n){var r=n?[][Y](n):[],i=this,o=We(r);i[Q]=function(){return t},i.Msfpc=function(){return o||T},i[J]=function(){return r[W]},i[X]=function(){return r},i.addEvent=function(e){return!!e&&(r[Z](e),o||(o=Ge(e)),!0)},i[ee]=function(n,i){var s;if(n<r[W]){var a=r[W]-n;(0,u.hX)(i)||(a=i<a?i:a),s=r[te](n,a),o=We(r)}return new e(t,s)}}return e.create=function(t,n){return new e(t,n)},e}(),Qe=n(3266),Je=n(7292),Xe=n(8993),Ze=n(8693),et=n(225),tt=n(5664),nt=n(1187),rt=function(){function e(){var t=!0,n=!0,r=!0,i="use-collector-delta",o=!1;(0,a.A)(e,this,(function(e){e[B]=function(){return t},e[$]=function(){r&&(r=!1,o||(t=!1))},e[K]=function(){return n},e[V]=function(){return i},e[G]=function(e){o||(e?(i=e,n=!0,o=!0):n=!1,t=!0)}}))}return e.__ieDyn=1,e}(),it=function(){function e(){var t={};(0,a.A)(e,this,(function(e){e[Fe]=function(e,n){if(e&&n)try{var r=(s=e[ee](","),a=[],s&&(0,y.I)(s,(function(e){a[Z]((0,Xe.EH)(e))})),a);if("this-request-only"===n)return r;for(var i=1e3*parseInt(n,10),o=0;o<r[W];++o)t[r[o]]=(0,et.f)()+i}catch(e){return[]}var s,a;return[]},e.isTenantKilled=function(e){var n=t,r=(0,Xe.EH)(e);return void 0!==n[r]&&n[r]>(0,et.f)()||(delete n[r],!1)}}))}return e.__ieDyn=1,e}();function ot(e){var t,n=Math.floor(1200*Math.random())+2400;return t=Math.pow(2,e)*n,Math.min(t,6e5)}var st=n(6832),at=n(7931),ct=n(3178),ut=2e6,lt=Math.min(ut,65e3),dt="metadata",ht="f",ft=/\./,pt=function(){function e(t,n,r,i){var o="data",s="baseData",d=!!i,h=!0,f=n,p={};(0,a.A)(e,this,(function(e){function n(e,t,i,o,s,a,l){(0,C.z)(e,(function(e,h){var g=null;if(h||(0,c.yD)(h)){var m=i,v=e,y=s,C=t;if(d&&!o&&ft.test(e)){var I=e.split("."),A=I.length;if(A>1){y&&(y=y.slice());for(var w=0;w<A-1;w++){var S=I[w];C=C[S]=C[S]||{},m+="."+S,y&&y.push(S)}v=I[A-1]}}var T=o&&function(e,t){var n=p[e];return void 0===n&&(e.length>=7&&(n=(0,at.t)(e,"ext.metadata")||(0,at.t)(e,"ext.web")),p[e]=n),n}(m);if(g=!T&&f&&f.handleField(m,v)?f.value(m,v,h,r):(0,c.TC)(v,h,r)){var E=g.value;if(C[v]=E,a&&a(y,v,g),l&&"object"==typeof E&&!(0,u.cy)(E)){var _=y;_&&(_=_.slice()).push(v),n(h,E,m+"."+v,o,_,a,l)}}}}))}e.createPayload=function(e,t,n,r,i,o){return{apiKeys:[],payloadBlob:T,overflow:null,sizeExceed:[],failedEvts:[],batches:[],numEvents:0,retryCnt:e,isTeardown:t,isSync:n,isBeacon:r,sendType:o,sendReason:i}},e.appendPayload=function(n,r,i){var o=n&&r&&!n.overflow;return o&&(0,l.r2)(t,(function(){return"Serializer:appendPayload"}),(function(){for(var t=r.events(),o=n.payloadBlob,s=n.numEvents,a=!1,c=[],u=[],l=n.isBeacon,d=l?65e3:3984588,h=l?lt:ut,f=0,p=0;f<t.length;){var g=t[f];if(g){if(s>=i){n.overflow=r.split(f);break}var m=e.getEventBlob(g);if(m&&m.length<=h){var v=m.length;if(o.length+v>d){n.overflow=r.split(f);break}o&&(o+="\n"),o+=m,++p>20&&((0,ct.hK)(o,0,1),p=0),a=!0,s++}else m?c.push(g):u.push(g),t.splice(f,1),f--}f++}if(c.length>0&&n.sizeExceed.push(Ye.create(r.iKey(),c)),u.length>0&&n.failedEvts.push(Ye.create(r.iKey(),u)),a){n.batches.push(r),n.payloadBlob=o,n.numEvents=s;var y=r.iKey();-1===(0,st.r)(n.apiKeys,y)&&n.apiKeys.push(y)}}),(function(){return{payload:n,theBatch:{iKey:r.iKey(),evts:r.events()},max:i}})),o},e.getEventBlob=function(e){try{return(0,l.r2)(t,(function(){return"Serializer.getEventBlob"}),(function(){var t={};t.name=e.name,t.time=e.time,t.ver=e.ver,t.iKey="o:"+(0,c.EO)(e.iKey);var r={},i=e.ext;i&&(t.ext=r,(0,C.z)(i,(function(e,t){n(t,r[e]={},"ext."+e,!0,null,null,!0)})));var a=t[o]={};a.baseType=e.baseType;var u=a[s]={};return n(e.baseData,u,s,!1,[s],(function(e,t,n){gt(r,e,t,n)}),h),n(e.data,a,o,!1,[],(function(e,t,n){gt(r,e,t,n)}),h),JSON.stringify(t)}),(function(){return{item:e}}))}catch(e){return null}}}))}return e.__ieDyn=1,e}();function gt(e,t,n,r){if(r&&e){var i=(0,c.Go)(r.value,r.kind,r.propertyType);if(i>-1){var o=e[dt];o||(o=e[dt]={f:{}});var s=o[ht];if(s||(s=o[ht]={}),t)for(var a=0;a<t.length;a++){var l=t[a];s[l]||(s[l]={f:{}});var d=s[l][ht];d||(d=s[l][ht]={}),s=d}s=s[n]={},(0,u.cy)(r.value)?s.a={t:i}:s.t=i}}}var mt,vt=n(1636);function yt(e,t){return{set:function(n,r){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];return(0,vt.vK)([e,t],n,r,i)}}}var Ct="sendAttempt",It="&NoResponseBody=true",At="?cors=true&"+P[ne]()+"="+k,wt=((mt={})[1]=b,mt[100]=b,mt[200]="sent",mt[8004]=_,mt[8003]=_,mt),St={},Tt={};function Et(e,t,n){St[e]=t,!1!==n&&(Tt[t]=e)}function _t(e){try{return e.responseText}catch(e){}return T}function bt(e,t){var n=!1;if(e&&t){var r=(0,S.cG)(e);if(r&&r[W]>0)for(var i=t[ne](),o=0;o<r[W];o++){var s=r[o];if(s&&(0,Qe.v)(t,s)&&s[ne]()===i){n=!0;break}}}return n}function kt(e,t,n,r){t&&n&&n[W]>0&&(r&&St[t]?(e[re][St[t]]=n,e[ie]=!0):e.url+="&"+t+"="+n)}function Rt(e,t){return t&&((0,u.Et)(t)?e=[t][Y](e):(0,u.cy)(t)&&(e=t[Y](e))),e}Et(F,F,!1),Et(x,x),Et(N,"Client-Id"),Et(U,U),Et(D,D),Et(L,L),Et(q,q);var Pt=function(){function e(t,n,r,i){var o,s,d,h,p,m,v,A,w,b,F,q,z,j,He,ze=new it,je=!1,Be=new rt,$e=!1,Ke=0,Ve=!0,Ge=[],We={},Ye=[],Qe=null,st=!1,at=!1,ct=!1,ut=[],lt=[];(0,a.A)(e,this,(function(e){!function(){var e;o=null,ze=new it,je=!1,Be=new rt,$e=!1,Ke=0,s=null,d=null,h=null,p=null,Ve=!0,Ge=[],We={},Ye=[],Qe=null,st=!1,m=null,at=!1,ct=!1,v=e,A=e,w=e,b=e,F=e,ut=[],q=e,z=e,lt=[],j=!1,He=yt()}();var a=!0;function dt(e,t){for(var n=0,r=null,i=0;null==r&&i<e[W];)1===(n=e[i])?(0,Je.PV)()?r=ht:(0,Je.xk)()&&(r=gt):2===n&&(0,Je.R7)(t)&&(!t||t&&!w)?r=ft:$e&&3===n&&(0,Je.Uf)()&&(r=vt),i++;return r?{_transport:n,_isSync:t,sendPOST:r}:null}function ht(e,t,n){var r=new XDomainRequest;r.open(E,e[ge]),e[me]&&(r[me]=e[me]),r.onload=function(){var e=_t(r);mt(t,200,{},e),Ft(e)},r.onerror=function(){mt(t,400,{})},r[ve]=function(){mt(t,500,{})},r.onprogress=function(){},n?r.send(e[ye]):He.set((function(){r.send(e[ye])}),0)}function ft(e,t,n){var r,i=e[ge],o=!1,s=!1,c=((r={body:e[ye],method:E}).Microsoft_ApplicationInsights_BypassAjaxInstrumentation=!0,r);n&&(c.keepalive=!0,2===e[Ce]&&(o=!0,F&&(i+=It))),a&&(c.credentials="include"),e.headers&&(0,S.cG)(e.headers)[W]>0&&(c[Ie]=e[Ie]),fetch(i,c).then((function(e){var n={},r=T,i=e[Ie];i&&i.forEach((function(e,t){n[t]=e})),e.body&&e.text().then((function(e){r=e})),s||(s=!0,mt(t,e.status,n,r),Ft(r))})).catch((function(e){s||(s=!0,mt(t,0,{}))})),o&&!s&&(s=!0,mt(t,200,{})),!s&&e[me]>0&&He.set((function(){s||(s=!0,mt(t,500,{}))}),e[me])}function gt(e,t,n){var r=e[ge];function i(e,t,n){if(!e[n]&&t&&t[Ae]){var r=t[Ae](n);r&&(e[n]=(0,Xe.EH)(r))}return e}function o(e,n){mt(t,e.status,function(e){var t={};return e[we]?t=function(e){var t={};if((0,u.Kg)(e)){var n=(0,Xe.EH)(e)[ee](/[\r\n]+/);(0,y.I)(n,(function(e){if(e){var n=e.indexOf(": ");if(-1!==n){var r=(0,Xe.EH)(e.substring(0,n))[ne](),i=(0,Xe.EH)(e.substring(n+1));t[r]=i}else t[(0,Xe.EH)(e)]=1}}))}return t}(e[we]()):(t=i(t,e,M),t=i(t,e,O),t=i(t,e,"kill-duration-seconds")),t}(e),n)}n&&e[de]&&(n=!1);var s=(0,c.H$)(E,r,a,!0,n,e[me]);(0,C.z)(e[Ie],(function(e,t){s.setRequestHeader(e,t)})),s.onload=function(){var e=_t(s);o(s,e),Ft(e)},s.onerror=function(){o(s)},s[ve]=function(){o(s)},s.send(e[ye])}function mt(e,t,n,r){try{e(t,n,r)}catch(e){(0,I.ZP)(d,2,518,(0,Ze.m)(e))}}function vt(e,t,n){var r=200,i=e[Se],o=e[ge]+(F?It:T);try{var s=(0,g.w3)();if(!s.sendBeacon(o,e[ye]))if(i){var a=[];(0,y.I)(i[Te],(function(e){if(a&&e&&e[J]()>0){for(var t=e[X](),n=0;n<t[W];n++)if(!s.sendBeacon(o,Qe.getEventBlob(t[n]))){a[Z](e[ee](n));break}}else a[Z](e[ee](0))})),qt(a,8003,i[Ee],!0)}else r=0}catch(e){(0,I.OG)(d,"Failed to send telemetry using sendBeacon API. Ex:"+(0,Ze.m)(e)),r=0}finally{mt(t,r,{},T)}}function St(e){return 2===e||3===e}function Et(e){return at&&St(e)&&(e=2),e}function Pt(){return!je&&Ke<n}function Ot(){var e=Ye;return Ye=[],e}function Mt(e,t,n){var r=!1;return e&&e[W]>0&&!je&&h[t]&&Qe&&(r=0!==t||Pt()&&(n>0||Be[B]())),r}function xt(e){var t={};return e&&(0,y.I)(e,(function(e,n){t[n]={iKey:e[Q](),evts:e[X]()}})),t}function Nt(e,n,r,i,o){if(e&&0!==e[W])if(je)qt(e,1,i);else{i=Et(i);try{var s=e,a=0!==i;(0,l.r2)(p,(function(){return"HttpManager:_sendBatches"}),(function(s){s&&(e=e.slice(0));for(var u=[],l=null,d=(0,c.WB)(),f=h[i]||(a?h[1]:h[0]),p=f&&f[Oe],g=b&&(at||St(i)||3===p||f._isSync&&2===p);Mt(e,i,n);){var m=e.shift();m&&m[J]()>0&&(ze.isTenantKilled(m[Q]())?u[Z](m):(l=l||Qe.createPayload(n,r,a,g,o,i),Qe.appendPayload(l,m,t)?null!==l.overflow&&(e=[l.overflow][Y](e),l.overflow=null,Lt(l,d,(0,c.WB)(),o),d=(0,c.WB)(),l=null):(Lt(l,d,(0,c.WB)(),o),d=(0,c.WB)(),e=[m][Y](e),l=null)))}l&&Lt(l,d,(0,c.WB)(),o),e[W]>0&&(Ye=e[Y](Ye)),qt(u,8004,i)}),(function(){return{batches:xt(s),retryCount:n,isTeardown:r,isSynchronous:a,sendReason:o,useSendBeacon:St(i),sendType:i}}),!a)}catch(e){(0,I.ZP)(d,2,48,"Unexpected Exception sending batch: "+(0,Ze.m)(e))}}}function Dt(e,t,n){e[t]=e[t]||{},e[t][s.identifier]=n}function Lt(t,n,i,a){if(t&&t.payloadBlob&&t.payloadBlob[W]>0){var u=!!q,f=h[t.sendType];!St(t[Ee])&&t[xe]&&2===t.sendReason&&(f=h[2]||h[3]||f);var g=ct;(t.isBeacon||3===f[Oe])&&(g=!1);var m=function(e,t){var n={url:o,hdrs:{},useHdrs:!1};t?(n[re]=(0,c.X$)(n[re],We),n.useHdrs=(0,S.cG)(n.hdrs)[W]>0):(0,C.z)(We,(function(e,t){Tt[e]?kt(n,Tt[e],t,!1):(n[re][e]=t,n[ie]=!0)})),kt(n,N,"NO_AUTH",t),kt(n,x,c.xE,t);var r=T;(0,y.I)(e.apiKeys,(function(e){r[W]>0&&(r+=","),r+=e})),kt(n,U,r,t),kt(n,L,(0,et.f)().toString(),t);var i=function(e){for(var t=0;t<e.batches[W];t++){var n=e[Te][t].Msfpc();if(n)return encodeURIComponent(n)}return T}(e);if((0,c.yD)(i)&&(n.url+="&ext.intweb.msfpc="+i),Be[K]()&&kt(n,D,Be[V](),t),p[Me]){var s=p[Me]();s>=0&&(n.url+="&w="+s)}for(var a=0;a<Ge[W];a++)n.url+="&"+Ge[a].name+"="+Ge[a].value;return n}(t,g);g=g||m[ie];var E=(0,c.WB)();(0,l.r2)(p,(function(){return"HttpManager:_doPayloadSend"}),(function(){for(var o=0;o<t.batches[W];o++)for(var h=t[Te][o][X](),C=0;C<h[W];C++){var S=h[C];if(st){var T=S[Ne]=S[Ne]||{};Dt(T,"sendEventStart",E),Dt(T,"serializationStart",n),Dt(T,"serializationCompleted",i)}S[Ct]>0?S[Ct]++:S[Ct]=1}qt(t[Te],1e3+(a||0),t[Ee],!0);var _={data:t.payloadBlob,urlString:m.url,headers:m[re],_thePayload:t,_sendReason:a,timeout:v,disableXhrSync:A,disableFetchKeepAlive:w};g&&(bt(_[Ie],R)||(_[Ie][R]="no-cache, no-store"),bt(_[Ie],P)||(_[Ie][P]=k));var b=null;f&&(b=function(n){Be[$]();var i=function(n,i){!function(t,n,i,o){var a,u=9e3,l=null,d=!1,h=!1;try{var f=!0;if(typeof t!==tt.bA){if(n){Be[G](n[M]);var p=n[O]||n["kill-duration-seconds"];(0,y.I)(ze[Fe](n["kill-tokens"],p),(function(e){(0,y.I)(i[Te],(function(t){if(t[Q]()===e){l=l||[];var n=t[ee](0);i.numEvents-=n[J](),l[Z](n)}}))}))}if(200==t||204==t)return void(u=200);((a=t)>=300&&a<500&&408!=a&&429!=a||501==a||505==a||i.numEvents<=0)&&(f=!1),u=9e3+t%1e3}if(f){u=100;var g=i.retryCnt;0===i[Ee]&&(g<r?(d=!0,Ut((function(){0===i[Ee]&&Ke--,Nt(i[Te],g+1,i[De],at?2:i[Ee],5)}),at,ot(g))):(h=!0,at&&(u=8001)))}}finally{d||(Be[G](),function(t,n,r,i){try{i&&s[qe](),200===n&&(i||t[Le]||s._clearBackOff(),function(e){if(st){var t=(0,c.WB)();(0,y.I)(e,(function(e){e&&e[J]()>0&&function(e,t){st&&(0,y.I)(e,(function(e){Dt(e[Ne]=e[Ne]||{},"sendEventCompleted",t)}))}(e[X](),t)}))}}(t[Te])),qt(t[Te],n,t[Ee],!0)}finally{0===t[Ee]&&(Ke--,5!==r&&e.sendQueuedRequests(t[Ee],r))}}(i,u,o,h)),qt(l,8004,i[Ee])}}(n,i,t,a)},o=t[De]||t[Le];try{f[Ue](n,i,o),z&&z(_,n,o,t[xe])}catch(e){(0,I.OG)(d,"Unexpected exception sending payload. Ex:"+(0,Ze.m)(e)),mt(i,0,{})}}),(0,l.r2)(p,(function(){return"HttpManager:_doPayloadSend.sender"}),(function(){if(b)if(0===t[Ee]&&Ke++,u&&!t.isBeacon&&3!==f[Oe]){var e={data:_[ye],urlString:_[ge],headers:(0,c.X$)({},_[Ie]),timeout:_[me],disableXhrSync:_[de],disableFetchKeepAlive:_[he]},n=!1;(0,l.r2)(p,(function(){return"HttpManager:_doPayloadSend.sendHook"}),(function(){try{q(e,(function(e){n=!0,Ve||e[Se]||(e[Se]=e[Se]||_[Se],e[Ce]=e[Ce]||_[Ce]),b(e)}),t.isSync||t[De])}catch(e){n||b(_)}}))}else b(_)}))}),(function(){return{thePayload:t,serializationStart:n,serializationCompleted:i,sendReason:a}}),t[Le])}t.sizeExceed&&t.sizeExceed[W]>0&&qt(t.sizeExceed,8003,t[Ee]),t.failedEvts&&t.failedEvts[W]>0&&qt(t.failedEvts,8002,t[Ee])}function Ut(e,t,n){t?e():He.set(e,n)}function Ft(e){var t=lt;try{for(var n=0;n<t[W];n++)try{t[n](e)}catch(e){(0,I.ZP)(d,1,519,"Response handler failed: "+e)}if(e){var r=JSON.parse(e);(0,c.yD)(r.webResult)&&(0,c.yD)(r.webResult[H])&&m.set("MSFPC",r.webResult[H],31536e3)}}catch(e){}}function qt(e,t,n,r){if(e&&e[W]>0&&i){var o=i[(a=t,u=wt[a],(0,c.yD)(u)||(u="oth",a>=9e3&&a<=9999?u="rspFail":a>=8e3&&a<=8999?u=_:a>=1e3&&a<=1999&&(u="send")),u)];if(o){var s=0!==n;(0,l.r2)(p,(function(){return"HttpManager:_sendBatchesNotification"}),(function(){Ut((function(){try{o.call(i,e,t,s,n)}catch(e){(0,I.ZP)(d,1,74,"send request notification failed: "+e)}}),r||s,0)}),(function(){return{batches:xt(e),reason:t,isSync:s,sendSync:r,sendType:n}}),!s)}}var a,u}e[oe]=function(e,t,n){j||(p=t,m=t.getCookieMgr(),d=(s=n).diagLog(),(0,nt.Y)(ut,(0,f.a)(e,(function(e){var t,r=e.cfg,i=e.cfg.extensionConfig[n.identifier];He=yt(i[se],i[ae]),(0,c.yD)(r.anonCookieName)?function(e,t,n){for(var r=0;r<e[W];r++)if(e[r].name===t)return void(e[r].value=n);e[Z]({name:t,value:n})}(Ge,"anoncknm",r.anonCookieName):function(e,t){for(var n=0;n<e[W];n++)if("anoncknm"===e[n].name)return void e[te](n,1)}(Ge),q=i.payloadPreprocessor,z=i.payloadListener;var s=i.httpXHROverride,l=i[ce]?i[ce]:r.endpointUrl;o=l+At,ct=!!(0,u.b0)(i[ue])||!i[ue],st=!i.disableEventTimings;var f=i.valueSanitizer,g=i.stringifyObjects,m=!!r[le];(0,u.b0)(i[le])||(m=!!i[le]),v=i.xhrTimeout,A=!!i[de],w=!!i[he],F=!1!==i.addNoResponse,$e=!(0,Je.lV)(),Qe=new pt(p,f,g,m),(0,u.hX)(i[fe])||($e=!!i[fe]);var y=s,C=i[pe]?s:null,S=i[pe]?s:null,T=[3,2];if(!s){Ve=!1;var E=(0,Je.g$)();E&&E.protocol&&"file:"===E.protocol[ne]()&&(a=!1);var _=[];(0,Je.lV)()?(_=[2,1],T=[2,1,3]):_=[1,2,3],(s=dt(_=Rt(_,i.transports),!1))||(0,I.OG)(d,"No available transport to send events"),y=dt(_,!0)}C||(C=dt(T=Rt(T,i.unloadTransports),!0)),b=!Ve&&($e&&(0,Je.Uf)()||!w&&(0,Je.R7)(!0)),(t={})[0]=s,t[1]=y||dt([1,2,3],!0),t[2]=C||y||dt([1],!0),t[3]=S||dt([2,3],!0)||y||dt([1],!0),h=t}))),j=!0)},e.addResponseHandler=function(e){return lt[Z](e),{rm:function(){var t=lt.indexOf(e);t>=0&&lt[te](t,1)}}},e._getDbgPlgTargets=function(){return[h[0],ze,Qe,h]},e.addHeader=function(e,t){We[e]=t},e[_e]=function(){return Pt()&&Be[B]()},e[be]=function(e,t){(0,u.b0)(e)&&(e=0),at&&(e=Et(e),t=2),Mt(Ye,e,0)&&Nt(Ot(),0,!1,e,t||0)},e[ke]=function(){return!je&&0===Ke&&0===Ye[W]},e[Re]=function(e){at=e},e.addBatch=function(e){if(e&&e[J]()>0){if(ze.isTenantKilled(e[Q]()))return!1;Ye[Z](e)}return!0},e.teardown=function(){Ye[W]>0&&Nt(Ot(),0,!0,2,2),(0,y.I)(ut,(function(e){e&&e.rm&&e.rm()})),ut=[]},e.pause=function(){je=!0},e.resume=function(){je=!1,e[be](0,4)},e[Pe]=function(e,t,n){e&&e[J]()>0&&((0,u.hX)(t)&&(t=1),at&&(t=Et(t),n=2),Nt([e],0,!1,t,n||0))}}))}return e.__ieDyn=1,e}(),Ot=1e4,Mt="eventsDiscarded",xt=void 0,Nt=(0,S.ZH)({eventsLimitInMem:{isVal:c.ei,v:Ot},immediateEventLimit:{isVal:c.ei,v:500},autoFlushEventsLimit:{isVal:c.ei,v:0},disableAutoBatchFlushLimit:!1,httpXHROverride:{isVal:function(e){return e&&e[Ue]},v:xt},overrideInstrumentationKey:xt,overrideEndpointUrl:xt,disableTelemetry:!1,ignoreMc1Ms0CookieProcessing:!1,setTimeoutOverride:xt,clearTimeoutOverride:xt,payloadPreprocessor:xt,payloadListener:xt,disableEventTimings:xt,valueSanitizer:xt,stringifyObjects:xt,enableCompoundKey:xt,disableOptimizeObj:!1,transports:xt,unloadTransports:xt,useSendBeacon:xt,disableFetchKeepAlive:xt,avoidOptions:!1,xhrTimeout:xt,disableXhrSync:xt,alwaysUseXhrOverride:!1,maxEventRetryAttempts:{isVal:u.Et,v:6},maxUnloadEventRetryAttempts:{isVal:u.Et,v:2},addNoResponse:xt}),Dt=function(e){function t(){var n,s=e.call(this)||this;s.identifier="PostChannel",s.priority=1011,s.version="4.0.3";var u,A,S,T,E,_,b,k,R,P,O,M,x,N,D,L,U,q,H,B,$,K,V,G,ne,re=!1,ie=[],ce=!1,ue=0,le=0,de={},he=r;return(0,a.A)(t,s,(function(e,t){function s(){(0,d.Ds)(null,q),(0,d.sq)(null,q),(0,d.vF)(null,q)}function a(e){"beforeunload"!==(e||(0,g.zk)().event).type&&(D=!0,k[Re](D)),we(2,2)}function fe(e){D=!1,k[Re](D)}function pe(e,t){if(e[Be]||(e[Be]=0),e[$e]||(e[$e]=1),e.ext&&e.ext[z]&&delete e.ext[z],e.ext&&e.ext[j]&&e.ext[j].id&&delete e.ext[j].id,N&&(e.ext=(0,m.hW)(e.ext),e[Ke]&&(e[Ke]=(0,m.hW)(e[Ke])),e[ye]&&(e[ye]=(0,m.hW)(e[ye]))),e[Ve])if(_||ce)e[$e]=3,e[Ve]=!1;else if(k)return N&&(e=(0,m.hW)(e)),void k[Pe](Ye.create(e[Q],[e]),!0===e[Ve]?1:e[Ve],3);var n=e[$e],r=le,i=S;4===n&&(r=ue,i=A);var o=!1;if(r<i)o=!Oe(e,t);else{var s=1,a=20;4===n&&(s=4,a=1),o=!0,function(e,t,n,r){for(;n<=t;){var i=Se(e,t,!0);if(i&&i[J]()>0){var o=i[ee](0,r),s=o[J]();if(s>0)return 4===n?ue-=s:le-=s,Qe(Mt,[o],v.x.QueueFull),!0}n++}return xe(),!1}(e[Q],e[$e],s,a)&&(o=!Oe(e,t))}o&&We(Mt,[e],v.x.QueueFull)}function ge(e,t,n){var r=Ne(e,t,n);return k[be](t,n),r}function me(){return le>0}function ve(){if(M>=0&&Ne(M,0,x)&&k[be](0,x),ue>0&&!E&&!ce){var e=de[he][2];e>=0&&(E=Ie((function(){E=null,ge(4,0,1),ve()}),e))}var t=de[he][1];!T&&!u&&t>=0&&!ce&&(me()?T=Ie((function(){T=null,ge(0===b?3:1,0,1),b++,b%=2,ve()}),t):b=0)}function Ce(){n=null,re=!1,ie=[],u=null,ce=!1,ue=0,A=500,le=0,S=Ot,de={},he=r,T=null,E=null,_=0,b=0,R={},P=0,V=!1,O=0,M=-1,x=null,N=!0,D=!1,L=6,U=2,q=null,G=null,ne=!1,H=yt(),k=new Pt(500,2,1,{requeue:Fe,send:Je,sent:Xe,drop:Ze,rspFail:et,oth:tt}),Ue(),R[4]={batches:[],iKeyMap:{}},R[3]={batches:[],iKeyMap:{}},R[2]={batches:[],iKeyMap:{}},R[1]={batches:[],iKeyMap:{}},nt()}function Ie(e,t){0===t&&_&&(t=1);var n=1e3;return _&&(n=ot(_-1)),H.set(e,t*n)}function Ae(){return null!==T&&(T.cancel(),T=null,b=0,!0)}function we(e,t){Ae(),u&&(u.cancel(),u=null),ce||ge(1,e,t)}function Se(e,t,n){var r=R[t];r||(r=R[t=1]);var i=r.iKeyMap[e];return!i&&n&&(i=Ye.create(e),r.batches[Z](i),r.iKeyMap[e]=i),i}function Ee(t,n){k[_e]()&&!_&&(P>0&&le>P&&(n=!0),n&&null==u&&e.flush(t,(function(){}),20))}function Oe(e,t){N&&(e=(0,m.hW)(e));var n=e[$e],r=Se(e[Q],n,!0);return!!r.addEvent(e)&&(4!==n?(le++,t&&0===e[Be]&&Ee(!e.sync,O>0&&r[J]()>=O)):ue++,!0)}function xe(){for(var e=0,t=0,n=function(n){var r=R[n];r&&r[Te]&&(0,y.I)(r[Te],(function(r){4===n?e+=r[J]():t+=r[J]()}))},r=1;r<=4;r++)n(r);le=t,ue=e}function Ne(t,n,r){var i=!1,o=0===n;return!o||k[_e]()?(0,l.r2)(e.core,(function(){return"PostChannel._queueBatches"}),(function(){for(var e=[],n=4;n>=t;){var r=R[n];r&&r.batches&&r.batches[W]>0&&((0,y.I)(r[Te],(function(t){k.addBatch(t)?i=i||t&&t[J]()>0:e=e[Y](t[X]()),4===n?ue-=t[J]():le-=t[J]()})),r[Te]=[],r.iKeyMap={}),n--}e[W]>0&&We(Mt,e,v.x.KillSwitch),i&&M>=t&&(M=-1,x=0)}),(function(){return{latency:t,sendType:n,sendReason:r}}),!o):(M=M>=0?Math.min(M,t):t,x=Math.max(x,r)),i}function De(e,t){ge(1,0,t),xe(),Le((function(){e&&e(),ie[W]>0?u=Ie((function(){u=null,De(ie.shift(),t)}),0):(u=null,ve())}))}function Le(e){k[ke]()?e():u=Ie((function(){u=null,Le(e)}),.25)}function Ue(){(de={})[r]=[2,1,0],de[i]=[6,3,0],de[o]=[18,9,0]}function Fe(t,n){var r=[],i=L;D&&(i=U),(0,y.I)(t,(function(t){t&&t[J]()>0&&(0,y.I)(t[X](),(function(t){t&&(t[Ve]&&(t[$e]=4,t[Ve]=!1),t[Be]<i?((0,c.u9)(t,e[He]),pe(t,!1)):r[Z](t))}))})),r[W]>0&&We(Mt,r,v.x.NonRetryableStatus),D&&we(2,2)}function Ge(t,n){var r=K||{},i=r[t];if(i)try{i.apply(r,n)}catch(n){(0,I.ZP)(e.diagLog(),1,74,t+" notification failed: "+n)}}function We(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];t&&t[W]>0&&Ge(e,[t][Y](n))}function Qe(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];t&&t[W]>0&&(0,y.I)(t,(function(t){t&&t[J]()>0&&Ge(e,[t.events()][Y](n))}))}function Je(e,t,n){e&&e[W]>0&&Ge("eventsSendRequest",[t>=1e3&&t<=1999?t-1e3:0,!0!==n])}function Xe(e,t){Qe("eventsSent",e,t),ve()}function Ze(e,t){Qe(Mt,e,t>=8e3&&t<=8999?t-8e3:v.x.Unknown)}function et(e){Qe(Mt,e,v.x.NonRetryableStatus),ve()}function tt(e,t){Qe(Mt,e,v.x.Unknown),ve()}function nt(){O=$?0:Math.max(1500,S/6)}Ce(),e._getDbgPlgTargets=function(){return[k,n]},e[oe]=function(r,i,o){(0,l.r2)(i,(function(){return"PostChannel:initialize"}),(function(){t[oe](r,i,o),K=i.getNotifyMgr();try{q=(0,d.Hm)((0,h.Z)(e[He]),i.evtNamespace&&i.evtNamespace()),e._addHook((0,f.a)(r,(function(t){var r=t.cfg,o=(0,p.i8)(null,r,i);n=o.getExtCfg(e[He],Nt),H=yt(n[se],n[ae]),N=!n.disableOptimizeObj&&(0,c.F2)(),B=n.ignoreMc1Ms0CookieProcessing,function(e){var t=e[Me];e[Me]=function(){var n=0;return B&&(n|=2),n|t.call(e)}}(i),S=n[ze],A=n.immediateEventLimit,P=n[je],L=n.maxEventRetryAttempts,U=n.maxUnloadEventRetryAttempts,$=n.disableAutoBatchFlushLimit,nt(),G=n.overrideInstrumentationKey,ne=!!n.disableTelemetry,V&&s();var u=r.disablePageUnloadEvents||[];V=(0,d.ee)(a,u,q),V=(0,d.Fc)(a,u,q)||V,V=(0,d.oS)(fe,r.disablePageShowEvents,q)||V}))),k[oe](r,e.core,e)}catch(t){throw e.setInitialized(!1),t}}),(function(){return{theConfig:r,core:i,extensions:o}}))},e.processTelemetry=function(t,n){(0,c.u9)(t,e[He]),n=n||e._getTelCtx(n);var r=t;ne||re||(G&&(r[Q]=G),pe(r,!0),D?we(2,2):ve()),e.processNext(r,n)},e._doTeardown=function(e,t){we(2,2),re=!0,k.teardown(),s(),Ce()},e.setEventQueueLimits=function(e,t){n[ze]=S=(0,c.ei)(e)?e:Ot,n[je]=P=(0,c.ei)(t)?t:0,nt();var r=le>e;if(!r&&O>0)for(var i=1;!r&&i<=3;i++){var o=R[i];o&&o[Te]&&(0,y.I)(o[Te],(function(e){e&&e[J]()>=O&&(r=!0)}))}Ee(!0,r)},e.pause=function(){Ae(),ce=!0,k.pause()},e.resume=function(){ce=!1,k.resume(),ve()},e._loadTransmitProfiles=function(e){Ae(),Ue(),he=r,ve(),(0,C.z)(e,(function(e,t){var n=t[W];if(n>=2){var r=n>2?t[2]:0;if(t[te](0,n-2),t[1]<0&&(t[0]=-1),t[1]>0&&t[0]>0){var i=t[0]/t[1];t[0]=Math.ceil(i)*t[1]}r>=0&&t[1]>=0&&r>t[1]&&(r=t[1]),t[Z](r),de[e]=t}}))},e.flush=function(e,t,n){var r;if(void 0===e&&(e=!0),!ce)if(n=n||1,e)t||(r=(0,w.Qo)((function(e){t=e}))),null==u?(Ae(),Ne(1,0,n),u=Ie((function(){u=null,De(t,n)}),0)):ie[Z](t);else{var i=Ae();ge(1,1,n),t&&t(),i&&ve()}return r},e.setMsaAuthTicket=function(e){k.addHeader(F,e)},e.hasEvents=me,e._setTransmitProfile=function(e){he!==e&&void 0!==de[e]&&(Ae(),he=e,ve())},(0,m.o$)(e,(function(){return k}),["addResponseHandler"]),e[qe]=function(){_<4&&(_++,Ae(),ve())},e._clearBackOff=function(){_&&(_=0,Ae(),ve())}})),s}return(0,s.qU)(t,e),t.__ieDyn=1,t}(A.s)},4484:(e,t,n)=>{"use strict";n.d(t,{F:()=>d,H:()=>l});var r=n(1011),i=n(1324),o=n(2494),s=n(5025),a=n(5130),c=";",u="=";function l(e){if(!e)return{};var t=e[a.sY](c),n=(0,r.K)(t,(function(e,t){var n=t[a.sY](u);if(2===n[a.oI]){var r=n[0][a.OL](),i=n[1];e[r]=i}return e}),{});if((0,i.cG)(n)[a.oI]>0){if(n.endpointsuffix){var l=n.location?n.location+".":"";n[a.zV]=n[a.zV]||"https://"+l+"dc."+n.endpointsuffix}n[a.zV]=n[a.zV]||s._G,(0,o.C)(n[a.zV],"/")&&(n[a.zV]=n[a.zV].slice(0,-1))}return n}var d={parse:l}},5025:(e,t,n)=>{"use strict";n.d(t,{R2:()=>u,_G:()=>a,jp:()=>o,ks:()=>l,tU:()=>i,wc:()=>c,xF:()=>r,ym:()=>s});var r="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",i="sampleRate",o="ProcessLegacy",s="http.method",a="https://dc.services.visualstudio.com",c="/v2/track",u="not_specified",l="iKey"},7374:(e,t,n)=>{"use strict";n.d(t,{e:()=>i,u:()=>o});var r=n(4282),i=(0,r.H)({LocalStorage:0,SessionStorage:1}),o=(0,r.H)({AI:0,AI_AND_W3C:1,W3C:2})},87:(e,t,n)=>{"use strict";n.d(t,{Dt:()=>a,Y8:()=>u,bb:()=>c,vv:()=>l});var r=n(5439),i=n(6668),o=n(5130),s="";function a(e,t){return void 0===t&&(t=!1),null==e?t:"true"===e.toString()[o.OL]()}function c(e){(isNaN(e)||e<0)&&(e=0),e=Math.round(e);var t=s+e%1e3,n=s+Math.floor(e/1e3)%60,r=s+Math.floor(e/6e4)%60,i=s+Math.floor(e/36e5)%24,a=Math.floor(e/864e5);return t=1===t[o.oI]?"00"+t:2===t[o.oI]?"0"+t:t,n=n[o.oI]<2?"0"+n:n,r=r[o.oI]<2?"0"+r:r,i=i[o.oI]<2?"0"+i:i,(a>0?a+".":s)+i+":"+r+":"+n+"."+t}function u(e,t){var n=null;return(0,r.I)(e,(function(e){if(e.identifier===t)return n=e,-1})),n}function l(e,t,n,r,o){return!o&&(0,i.Kg)(e)&&("Script error."===e||"Script error"===e)}},8596:(e,t,n)=>{"use strict";n.d(t,{o:()=>p});var r=n(659),i=n(3673);function o(e){var t="ai."+e+".";return function(e){return t+e}}var s=o("application"),a=o("device"),c=o("location"),u=o("operation"),l=o("session"),d=o("user"),h=o("cloud"),f=o("internal"),p=function(e){function t(){return e.call(this)||this}return(0,r.qU)(t,e),t}((0,i.SZ)({applicationVersion:s("ver"),applicationBuild:s("build"),applicationTypeId:s("typeId"),applicationId:s("applicationId"),applicationLayer:s("layer"),deviceId:a("id"),deviceIp:a("ip"),deviceLanguage:a("language"),deviceLocale:a("locale"),deviceModel:a("model"),deviceFriendlyName:a("friendlyName"),deviceNetwork:a("network"),deviceNetworkName:a("networkName"),deviceOEMName:a("oemName"),deviceOS:a("os"),deviceOSVersion:a("osVersion"),deviceRoleInstance:a("roleInstance"),deviceRoleName:a("roleName"),deviceScreenResolution:a("screenResolution"),deviceType:a("type"),deviceMachineName:a("machineName"),deviceVMName:a("vmName"),deviceBrowser:a("browser"),deviceBrowserVersion:a("browserVersion"),locationIp:c("ip"),locationCountry:c("country"),locationProvince:c("province"),locationCity:c("city"),operationId:u("id"),operationName:u("name"),operationParentId:u("parentId"),operationRootId:u("rootId"),operationSyntheticSource:u("syntheticSource"),operationCorrelationVector:u("correlationVector"),sessionId:l("id"),sessionIsFirst:l("isFirst"),sessionIsNew:l("isNew"),userAccountAcquisitionDate:d("accountAcquisitionDate"),userAccountId:d("accountId"),userAgent:d("userAgent"),userId:d("id"),userStoreRegion:d("storeRegion"),userAuthUserId:d("authUserId"),userAnonymousUserAcquisitionDate:d("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:d("authUserAcquisitionDate"),cloudName:h("name"),cloudRole:h("role"),cloudRoleVer:h("roleVer"),cloudRoleInstance:h("roleInstance"),cloudEnvironment:h("environment"),cloudLocation:h("location"),cloudDeploymentUnit:h("deploymentUnit"),internalNodeName:f("nodeName"),internalSdkVersion:f("sdkVersion"),internalAgentVersion:f("agentVersion"),internalSnippet:f("snippet"),internalSdkSrc:f("sdkSrc")}))},9762:(e,t,n)=>{"use strict";n.d(t,{O:()=>r});var r=(0,n(4282).H)({Verbose:0,Information:1,Warning:2,Error:3,Critical:4})},1575:(e,t,n)=>{"use strict";n.d(t,{F:()=>i,O:()=>o});var r=n(8596),i={UserExt:"user",DeviceExt:"device",TraceExt:"trace",WebExt:"web",AppExt:"app",OSExt:"os",SessionExt:"ses",SDKExt:"sdk"},o=new r.o},2910:(e,t,n)=>{"use strict";n.d(t,{a:()=>r});var r=(0,n(4282).o)({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]})},4658:(e,t,n)=>{"use strict";n.d(t,{AN:()=>T,BW:()=>I,Dt:()=>b,Nu:()=>v,Se:()=>A,T9:()=>E,_M:()=>w,iw:()=>C,tm:()=>S,v7:()=>k,vH:()=>_,vh:()=>y});var r=n(6668),i=n(3076),o=n(3775),s=n(3673),a=n(8693),c=n(9018),u=n(7374),l=n(5130),d=void 0,h=void 0,f="";function p(){return I()?g(u.e.LocalStorage):null}function g(e){try{if((0,r.hX)((0,i.mS)()))return null;var t=(new Date)[l.xE](),n=(0,i.zS)(e===u.e.LocalStorage?"localStorage":"sessionStorage"),o=f+t;n.setItem(o,t);var s=n.getItem(o)!==t;if(n[l.AZ](o),!s)return n}catch(e){}return null}function m(){return T()?g(u.e.SessionStorage):null}function v(){d=!1,h=!1}function y(e){f=e||""}function C(){d=I(!0),h=T(!0)}function I(e){return(e||void 0===d)&&(d=!!g(u.e.LocalStorage)),d}function A(e,t){var n=p();if(null!==n)try{return n.getItem(t)}catch(t){d=!1,(0,o.ZP)(e,2,1,"Browser failed read of local storage. "+(0,s.lL)(t),{exception:(0,a.m)(t)})}return null}function w(e,t,n){var r=p();if(null!==r)try{return r.setItem(t,n),!0}catch(t){d=!1,(0,o.ZP)(e,2,3,"Browser failed write to local storage. "+(0,s.lL)(t),{exception:(0,a.m)(t)})}return!1}function S(e,t){var n=p();if(null!==n)try{return n[l.AZ](t),!0}catch(t){d=!1,(0,o.ZP)(e,2,5,"Browser failed removal of local storage item. "+(0,s.lL)(t),{exception:(0,a.m)(t)})}return!1}function T(e){return(e||void 0===h)&&(h=!!g(u.e.SessionStorage)),h}function E(){var e=[];return T()&&(0,c.z)((0,i.zS)("sessionStorage"),(function(t){e.push(t)})),e}function _(e,t){var n=m();if(null!==n)try{return n.getItem(t)}catch(t){h=!1,(0,o.ZP)(e,2,2,"Browser failed read of session storage. "+(0,s.lL)(t),{exception:(0,a.m)(t)})}return null}function b(e,t,n){var r=m();if(null!==r)try{return r.setItem(t,n),!0}catch(t){h=!1,(0,o.ZP)(e,2,4,"Browser failed write to session storage. "+(0,s.lL)(t),{exception:(0,a.m)(t)})}return!1}function k(e,t){var n=m();if(null!==n)try{return n[l.AZ](t),!0}catch(t){h=!1,(0,o.ZP)(e,2,6,"Browser failed removal of session storage item. "+(0,s.lL)(t),{exception:(0,a.m)(t)})}return!1}},7358:(e,t,n)=>{"use strict";n.d(t,{B:()=>r});var r=function(e,t){this.aiDataContract={baseType:1,baseData:1},this.baseType=e,this.baseData=t}},7975:(e,t,n)=>{"use strict";n.d(t,{HQ:()=>C,Rr:()=>f,Vj:()=>y,Vk:()=>g,Vt:()=>m,_T:()=>I,lq:()=>h,pJ:()=>p,qW:()=>A,xP:()=>v,zx:()=>d});var r=n(8993),i=n(3775),o=n(9018),s=n(6668),a=n(7292),c=n(3178),u=n(5977),l=n(5130);function d(e,t,n){var r=t[l.oI],i=h(e,t);if(i[l.oI]!==r){for(var o=0,s=i;void 0!==n[s];)o++,s=(0,c.P0)(i,0,147)+A(o);i=s}return i}function h(e,t){var n;return t&&(t=(0,r.EH)((0,u.o)(t)))[l.oI]>150&&(n=(0,c.P0)(t,0,150),(0,i.ZP)(e,2,57,"name is too long.  It has been truncated to 150 characters.",{name:t},!0)),n||t}function f(e,t,n){var o;return void 0===n&&(n=1024),t&&(n=n||1024,(t=(0,r.EH)((0,u.o)(t)))[l.oI]>n&&(o=(0,c.P0)(t,0,n),(0,i.ZP)(e,2,61,"string value is too long. It has been truncated to "+n+" characters.",{value:t},!0))),o||t}function p(e,t){return I(e,t,2048,66)}function g(e,t){var n;return t&&t[l.oI]>32768&&(n=(0,c.P0)(t,0,32768),(0,i.ZP)(e,2,56,"message is too long, it has been truncated to 32768 characters.",{message:t},!0)),n||t}function m(e,t){var n;if(t){var r=""+t;r[l.oI]>32768&&(n=(0,c.P0)(r,0,32768),(0,i.ZP)(e,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:t},!0))}return n||t}function v(e,t){if(t){var n={};(0,o.z)(t,(function(t,r){if((0,s.Gv)(r)&&(0,a.Z)())try{r=(0,a.hm)()[l.Jj](r)}catch(t){(0,i.ZP)(e,2,49,"custom property is not valid",{exception:t},!0)}r=f(e,r,8192),t=d(e,t,n),n[t]=r})),t=n}return t}function y(e,t){if(t){var n={};(0,o.z)(t,(function(t,r){t=d(e,t,n),n[t]=r})),t=n}return t}function C(e,t){return t?I(e,t,128,69)[l.xE]():t}function I(e,t,n,o){var s;return t&&(t=(0,r.EH)((0,u.o)(t)))[l.oI]>n&&(s=(0,c.P0)(t,0,n),(0,i.ZP)(e,2,o,"input is too long, it has been truncated to "+n+" characters.",{data:t},!0)),s||t}function A(e){var t="00"+e;return(0,c.hK)(t,t[l.oI]-3)}},1062:(e,t,n)=>{"use strict";n.d(t,{L:()=>a});var r=n(3673),i=n(5025),o=n(5130),s=n(7975),a=function(e,t,n){var a=this,c=this;c.ver=1,c.sampleRate=100,c.tags={},c[o.RS]=(0,s.Rr)(e,n)||i.R2,c.data=t,c.time=(0,r._u)(new Date),c.aiDataContract={time:1,iKey:1,name:1,sampleRate:function(){return 100===a.sampleRate?4:1},tags:1,data:1}}},3072:(e,t,n)=>{"use strict";n.d(t,{J:()=>s});var r=n(5025),i=n(5130),o=n(7975),s=function(){function e(e,t,n,s){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var a=this;a.ver=2,a[i.RS]=(0,o.Rr)(e,t)||r.R2,a[i.$y]=(0,o.xP)(e,n),a[i.XA]=(0,o.Vj)(e,s)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.Event",e.dataType="EventData",e}()},5397:(e,t,n)=>{"use strict";n.d(t,{WJ:()=>_});var r=n(659),i=n(6668),o=n(5439),s=n(4335),a=n(8993),c=n(5881),u=n(3076),l=n(5025),d=n(5130),h=n(7975),f="error",p="stack",g="stackDetails",m="errorSrc",v="message",y="description";function C(e,t){var n=e;return n&&!(0,i.Kg)(n)&&(JSON&&JSON[d.Jj]?(n=JSON[d.Jj](e),!t||n&&"{}"!==n||(n=(0,i.Tn)(e[d.xE])?e[d.xE]():""+e)):n=e+" - (Missing JSON.stringify)"),n||""}function I(e,t){var n=e;return e&&(n&&!(0,i.Kg)(n)&&(n=e[v]||e[y]||n),n&&!(0,i.Kg)(n)&&(n=C(n,!0)),e.filename&&(n=n+" @"+(e.filename||"")+":"+(e.lineno||"?")+":"+(e.colno||"?"))),t&&"String"!==t&&"Object"!==t&&"Error"!==t&&-1===(0,c.H)(n||"",t)&&(n=t+": "+n),n||""}function A(e){return e&&e.src&&(0,i.Kg)(e.src)&&e.obj&&(0,i.cy)(e.obj)}function w(e){var t=e||"";(0,i.Kg)(t)||(t=(0,i.Kg)(t[p])?t[p]:""+t);var n=t[d.sY]("\n");return{src:t,obj:n}}function S(e){var t=null;if(e)try{if(e[p])t=w(e[p]);else if(e[f]&&e[f][p])t=w(e[f][p]);else if(e.exception&&e.exception[p])t=w(e.exception[p]);else if(A(e))t=e;else if(A(e[g]))t=e[g];else if((0,u.zk)()&&(0,u.zk)().opera&&e[v])t=function(e){for(var t=[],n=e[d.sY]("\n"),r=0;r<n[d.oI];r++){var i=n[r];n[r+1]&&(i+="@"+n[r+1],r++),t.push(i)}return{src:e,obj:t}}(e[d.pM]);else if(e.reason&&e.reason[p])t=w(e.reason[p]);else if((0,i.Kg)(e))t=w(e);else{var n=e[v]||e[y]||"";(0,i.Kg)(e[m])&&(n&&(n+="\n"),n+=" from "+e[m]),n&&(t=w(n))}}catch(e){t=w(e)}return t||{src:"",obj:null}}function T(e){var t="";if(e&&!(t=e.typeName||e[d.RS]||""))try{var n=/function (.{1,200})\(/.exec(e.constructor[d.xE]());t=n&&n[d.oI]>1?n[1]:""}catch(e){}return t}function E(e){if(e)try{if(!(0,i.Kg)(e)){var t=T(e),n=C(e,!1);return n&&"{}"!==n||(e[f]&&(t=T(e=e[f])),n=C(e,!0)),0!==(0,c.H)(n,t)&&"String"!==t?t+":"+n:n}}catch(e){}return""+(e||"")}var _=function(){function e(e,t,n,r,o,s){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var a=this;a.ver=2,function(e){try{if((0,i.Gv)(e))return"ver"in e&&"exceptions"in e&&"properties"in e}catch(e){}return!1}(t)?(a[d.OK]=t[d.OK]||[],a[d.$y]=t[d.$y],a[d.XA]=t[d.XA],t[d.Ur]&&(a[d.Ur]=t[d.Ur]),t.id&&(a.id=t.id),t[d.Fq]&&(a[d.Fq]=t[d.Fq]),(0,i.hX)(t[d.r1])||(a[d.r1]=t[d.r1])):(n||(n={}),a[d.OK]=[new b(e,t,n)],a[d.$y]=(0,h.xP)(e,n),a[d.XA]=(0,h.Vj)(e,r),o&&(a[d.Ur]=o),s&&(a.id=s))}return e.CreateAutoException=function(e,t,n,r,i,o,s,a){var c,u=T(i||o||e);return(c={})[d.pM]=I(e,u),c.url=t,c.lineNumber=n,c.columnNumber=r,c.error=E(i||o||e),c.evt=E(o||e),c[d.qg]=u,c.stackDetails=S(s||i||o),c.errorSrc=a,c},e.CreateFromInterface=function(t,n,i,o){var a=n[d.OK]&&(0,s.W)(n[d.OK],(function(e){return b[d.vu](t,e)}));return new e(t,(0,r.Im)((0,r.Im)({},n),{exceptions:a}),i,o)},e.prototype.toInterface=function(){var e,t=this,n=t.exceptions,r=t.properties,i=t.measurements,o=t.severityLevel,a=t.problemGroup,c=t.id,u=t.isManual,l=n instanceof Array&&(0,s.W)(n,(function(e){return e.toInterface()}))||void 0;return(e={ver:"4.0"})[d.OK]=l,e.severityLevel=o,e.properties=r,e.measurements=i,e.problemGroup=a,e.id=c,e.isManual=u,e},e.CreateSimpleException=function(e,t,n,r,i,o){var s;return{exceptions:[(s={},s[d.lW]=!0,s.message=e,s.stack=i,s.typeName=t,s)]}},e.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",e.dataType="ExceptionData",e.formatError=E,e}(),b=function(){function e(e,t,n){this.aiDataContract={id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2};var r=this;if(function(e){try{if((0,i.Gv)(e))return"hasFullStack"in e&&"typeName"in e}catch(e){}return!1}(t))r[d.qg]=t[d.qg],r[d.pM]=t[d.pM],r[p]=t[p],r[d.on]=t[d.on]||[],r[d.lW]=t[d.lW];else{var a=t,c=a&&a.evt;(0,i.bJ)(a)||(a=a[f]||c||a),r[d.qg]=(0,h.Rr)(e,T(a))||l.R2,r[d.pM]=(0,h.Vk)(e,I(t||a,r[d.qg]))||l.R2;var u=t[g]||S(t);r[d.on]=function(e){var t,n=e.obj;if(n&&n[d.oI]>0){t=[];var r=0,i=0;if((0,o.I)(n,(function(e){var n=e[d.xE]();if(k.regex.test(n)){var o=new k(n,r++);i+=o[d.J$],t.push(o)}})),i>32768)for(var s=0,a=t[d.oI]-1,c=0,u=s,l=a;s<a;){if((c+=t[s][d.J$]+t[a][d.J$])>32768){var h=l-u+1;t.splice(u,h);break}u=s,l=a,s++,a--}}return t}(u),(0,i.cy)(r[d.on])&&(0,s.W)(r[d.on],(function(t){t[d.QE]=(0,h.Rr)(e,t[d.QE]),t[d.IE]=(0,h.Rr)(e,t[d.IE])})),r[p]=(0,h.Vt)(e,function(e){var t="";return e&&(e.obj?(0,o.I)(e.obj,(function(e){t+=e+"\n"})):t=e.src||""),t}(u)),r.hasFullStack=(0,i.cy)(r.parsedStack)&&r.parsedStack[d.oI]>0,n&&(n[d.qg]=n[d.qg]||r[d.qg])}}return e.prototype.toInterface=function(){var e,t=this,n=t[d.on]instanceof Array&&(0,s.W)(t[d.on],(function(e){return e.toInterface()}));return(e={id:t.id,outerId:t.outerId,typeName:t[d.qg],message:t[d.pM],hasFullStack:t[d.lW],stack:t[p]})[d.on]=n||void 0,e},e.CreateFromInterface=function(t,n){var i=n[d.on]instanceof Array&&(0,s.W)(n[d.on],(function(e){return k[d.vu](e)}))||n[d.on];return new e(t,(0,r.Im)((0,r.Im)({},n),{parsedStack:i}))},e}(),k=function(){function e(t,n){this.aiDataContract={level:1,method:1,assembly:0,fileName:0,line:0};var r=this;if(r[d.J$]=0,"string"==typeof t){var i=t;r[d.Av]=n,r[d.lx]="<no_method>",r[d.QE]=(0,a.EH)(i),r[d.IE]="",r[d.h_]=0;var o=i.match(e.regex);o&&o[d.oI]>=5&&(r[d.lx]=(0,a.EH)(o[2])||r[d.lx],r[d.IE]=(0,a.EH)(o[4]),r[d.h_]=parseInt(o[5])||0)}else r[d.Av]=t[d.Av],r[d.lx]=t[d.lx],r[d.QE]=t[d.QE],r[d.IE]=t[d.IE],r[d.h_]=t[d.h_],r[d.J$]=0;r.sizeInBytes+=r.method[d.oI],r.sizeInBytes+=r.fileName[d.oI],r.sizeInBytes+=r.assembly[d.oI],r[d.J$]+=e.baseSize,r.sizeInBytes+=r.level.toString()[d.oI],r.sizeInBytes+=r.line.toString()[d.oI]}return e.CreateFromInterface=function(t){return new e(t,null)},e.prototype.toInterface=function(){var e=this;return{level:e[d.Av],method:e[d.lx],assembly:e[d.QE],fileName:e[d.IE],line:e[d.h_]}},e.regex=/^([\s]+at)?[\s]{0,50}([^\@\()]+?)[\s]{0,50}(\@|\()([^\(\n]+):([0-9]+):([0-9]+)(\)?)$/,e.baseSize=58,e}()},5014:(e,t,n)=>{"use strict";n.d(t,{J:()=>a});var r=n(5025),i=n(5130),o=function(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0},s=n(7975),a=function(){function e(e,t,n,a,c,u,l,d,h){this.aiDataContract={ver:1,metrics:1,properties:0};var f=this;f.ver=2;var p=new o;p[i.F2]=a>0?a:void 0,p.max=isNaN(u)||null===u?void 0:u,p.min=isNaN(c)||null===c?void 0:c,p[i.RS]=(0,s.Rr)(e,t)||r.R2,p.value=n,p.stdDev=isNaN(l)||null===l?void 0:l,f.metrics=[p],f[i.$y]=(0,s.xP)(e,d),f[i.XA]=(0,s.Vj)(e,h)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",e.dataType="MetricData",e}()},1448:(e,t,n)=>{"use strict";n.d(t,{h:()=>a});var r=n(5025),i=n(87),o=n(5130),s=n(7975),a=function(){function e(e,t,n,a,c,u,l){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var d=this;d.ver=2,d.id=(0,s.HQ)(e,l),d.url=(0,s.pJ)(e,n),d[o.RS]=(0,s.Rr)(e,t)||r.R2,isNaN(a)||(d[o.qd]=(0,i.bb)(a)),d[o.$y]=(0,s.xP)(e,c),d[o.XA]=(0,s.Vj)(e,u)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",e.dataType="PageviewData",e}()},4164:(e,t,n)=>{"use strict";n.d(t,{H:()=>s});var r=n(5025),i=n(5130),o=n(7975),s=function(){function e(e,t,n,s,a,c,u){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var l=this;l.ver=2,l.url=(0,o.pJ)(e,n),l[i.RS]=(0,o.Rr)(e,t)||r.R2,l[i.$y]=(0,o.xP)(e,a),l[i.XA]=(0,o.Vj)(e,c),u&&(l.domProcessing=u.domProcessing,l[i.qd]=u[i.qd],l.networkConnect=u.networkConnect,l.perfTotal=u.perfTotal,l[i.fd]=u[i.fd],l.sentRequest=u.sentRequest)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",e.dataType="PageviewPerformanceData",e}()},1365:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(87),i=n(2318),o=n(5130),s=n(7975),a=function(){function e(e,t,n,a,c,u,l,d,h,f,p,g){void 0===h&&(h="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var m=this;m.ver=2,m.id=t,m[o.qd]=(0,r.bb)(c),m.success=u,m.resultCode=l+"",m.type=(0,s.Rr)(e,h);var v=(0,i._U)(e,n,d,a);m.data=(0,s.pJ)(e,a)||v.data,m.target=(0,s.Rr)(e,v.target),f&&(m.target="".concat(m.target," | ").concat(f)),m[o.RS]=(0,s.Rr)(e,v[o.RS]),m[o.$y]=(0,s.xP)(e,p),m[o.XA]=(0,s.Vj)(e,g)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",e.dataType="RemoteDependencyData",e}()},2445:(e,t,n)=>{"use strict";n.d(t,{C:()=>s});var r=n(5025),i=n(5130),o=n(7975),s=function(){function e(e,t,n,s,a){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var c=this;c.ver=2,t=t||r.R2,c[i.pM]=(0,o.Vk)(e,t),c[i.$y]=(0,o.xP)(e,s),c[i.XA]=(0,o.Vj)(e,a),n&&(c[i.Ur]=n)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.Message",e.dataType="MessageData",e}()},9354:(e,t,n)=>{"use strict";n.d(t,{Gz:()=>d,M0:()=>p,PS:()=>f,cM:()=>u,k6:()=>h,wX:()=>l});var r=n(3076),i=n(6668),o=n(5130),s=(0,r.YE)()||{},a=0,c=[null,null,null,null,null];function u(e){var t=a,n=c,r=n[t];return s.createElement?n[t]||(r=n[t]=s.createElement("a")):r={host:f(e,!0)},r.href=e,++t>=n[o.oI]&&(t=0),a=t,r}function l(e){var t,n=u(e);return n&&(t=n.href),t}function d(e){var t,n=u(e);return n&&(t=n[o.Ue]),t}function h(e,t){return e?e.toUpperCase()+" "+t:t}function f(e,t){var n=p(e,t)||"";if(n){var r=n.match(/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(null!=r&&r[o.oI]>3&&(0,i.Kg)(r[2])&&r[2][o.oI]>0)return r[2]+(r[3]||"")}return n}function p(e,t){var n=null;if(e){var r=e.match(/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(null!=r&&r[o.oI]>2&&(0,i.Kg)(r[2])&&r[2][o.oI]>0&&(n=r[2]||"",t&&r[o.oI]>2)){var s=(r[1]||"")[o.OL](),a=r[3]||"";("http"===s&&":80"===a||"https"===s&&":443"===a)&&(a=""),n+=a}}return n}},2318:(e,t,n)=>{"use strict";n.d(t,{Ft:()=>_,Qu:()=>v,Rs:()=>I,Wt:()=>y,_U:()=>S,jj:()=>E,lt:()=>T,mD:()=>w,mp:()=>C,pg:()=>A});var r=n(6832),i=n(5439),o=n(558),s=n(225),a=n(6668),c=n(1864),u=n(5881),l=n(5025),d=n(2910),h=n(7975),f=n(9354),p=n(5130),g=[l._G+l.wc,"https://breeze.aimon.applicationinsights.io"+l.wc,"https://dc-int.services.visualstudio.com"+l.wc],m="cid-v1:";function v(e){return-1!==(0,r.r)(g,e[p.OL]())}function y(e){m=e}function C(){return m}function I(e,t,n){if(!t||e&&e.disableCorrelationHeaders)return!1;if(e&&e[p.Ol])for(var r=0;r<e.correlationHeaderExcludePatterns[p.oI];r++)if(e[p.Ol][r].test(t))return!1;var o=(0,f.cM)(t).host[p.OL]();if(!o||-1===(0,u.H)(o,":443")&&-1===(0,u.H)(o,":80")||(o=((0,f.M0)(t,!0)||"")[p.OL]()),(!e||!e.enableCorsCorrelation)&&o&&o!==n)return!1;var s,a=e&&e.correlationHeaderDomains;if(a&&((0,i.I)(a,(function(e){var t=new RegExp(e.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));s=s||t.test(o)})),!s))return!1;var c=e&&e.correlationHeaderExcludedDomains;if(!c||0===c[p.oI])return!0;for(r=0;r<c[p.oI];r++)if(new RegExp(c[r].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*")).test(o))return!1;return o&&o[p.oI]>0}function A(e){if(e){var t=w(e,d.a[1]);if(t&&t!==m)return t}}function w(e,t){if(e)for(var n=e[p.sY](","),r=0;r<n[p.oI];++r){var i=n[r][p.sY]("=");if(2===i[p.oI]&&i[0]===t)return i[1]}}function S(e,t,n,r){var i,o=r,s=r;if(t&&t[p.oI]>0){var a=(0,f.cM)(t);if(i=a.host,!o)if(null!=a[p.Ue]){var c=0===a.pathname[p.oI]?"/":a[p.Ue];"/"!==c.charAt(0)&&(c="/"+c),s=a[p.Ue],o=(0,h.Rr)(e,n?n+" "+c:c)}else o=(0,h.Rr)(e,t)}else i=r,o=r;return{target:i,name:o,data:s}}function T(){var e=(0,o.FJ)();if(e&&e.now&&e.timing){var t=e.now()+e.timing.navigationStart;if(t>0)return t}return(0,s.f)()}function E(e,t){var n=null;return 0===e||0===t||(0,a.hX)(e)||(0,a.hX)(t)||(n=t-e),n}function _(e,t){var n=e||{};return{getName:function(){return n[p.RS]},setName:function(e){t&&t.setName(e),n[p.RS]=e},getTraceId:function(){return n.traceID},setTraceId:function(e){t&&t.setTraceId(e),(0,c.hX)(e)&&(n.traceID=e)},getSpanId:function(){return n.parentID},setSpanId:function(e){t&&t.setSpanId(e),(0,c.wN)(e)&&(n.parentID=e)},getTraceFlags:function(){return n.traceFlags},setTraceFlags:function(e){t&&t.setTraceFlags(e),n.traceFlags=e}}}},5130:(e,t,n)=>{"use strict";n.d(t,{$e:()=>v,$y:()=>T,AZ:()=>c,Av:()=>D,C9:()=>m,Cx:()=>f,F2:()=>d,Fq:()=>R,IE:()=>x,J$:()=>_,Jj:()=>y,Jm:()=>h,OK:()=>w,OL:()=>o,Ol:()=>I,QE:()=>M,RS:()=>u,Ue:()=>C,Ur:()=>k,XA:()=>E,fd:()=>q,h_:()=>U,i9:()=>g,lW:()=>N,lx:()=>L,oI:()=>i,on:()=>S,pM:()=>l,qd:()=>F,qg:()=>b,r1:()=>P,sY:()=>r,up:()=>A,vu:()=>O,xE:()=>a,zV:()=>s,zw:()=>p});var r="split",i="length",o="toLowerCase",s="ingestionendpoint",a="toString",c="removeItem",u="name",l="message",d="count",h="preTriggerDate",f="disabled",p="interval",g="daysOfMonth",m="date",v="getUTCDate",y="stringify",C="pathname",I="correlationHeaderExcludePatterns",A="extensionConfig",w="exceptions",S="parsedStack",T="properties",E="measurements",_="sizeInBytes",b="typeName",k="severityLevel",R="problemGroup",P="isManual",O="CreateFromInterface",M="assembly",x="fileName",N="hasFullStack",D="level",L="method",U="line",F="duration",q="receivedResponse"},740:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AnalyticsPluginIdentifier:()=>K,BreezeChannelIdentifier:()=>$,ConfigurationManager:()=>R,ConnectionStringParser:()=>m.F,ContextTagKeys:()=>P.o,CtxTagKeys:()=>D.O,DEFAULT_BREEZE_ENDPOINT:()=>y._G,DEFAULT_BREEZE_PATH:()=>y.wc,Data:()=>b.B,DisabledPropertyName:()=>y.xF,DistributedTracingModes:()=>L.u,Envelope:()=>C.L,Event:()=>I.J,Exception:()=>A.WJ,Extensions:()=>D.F,HttpMethod:()=>y.ym,Metric:()=>w.J,PageView:()=>S.h,PageViewPerformance:()=>_.H,ProcessLegacy:()=>y.jp,PropertiesPluginIdentifier:()=>B,RemoteDependencyData:()=>T.A,RequestHeaders:()=>v.a,SampleRate:()=>y.tU,SeverityLevel:()=>k.O,TelemetryItemCreator:()=>N,ThrottleMgr:()=>g,Trace:()=>E.C,correlationIdCanIncludeCorrelationHeader:()=>r.Rs,correlationIdGetCorrelationContext:()=>r.pg,correlationIdGetCorrelationContextValue:()=>r.mD,correlationIdGetPrefix:()=>r.mp,correlationIdSetPrefix:()=>r.Wt,createDistributedTraceContextFromTrace:()=>r.Ft,createDomEvent:()=>z,createTelemetryItem:()=>x,createTraceParent:()=>q.wk,dataSanitizeException:()=>O.Vt,dataSanitizeId:()=>O.HQ,dataSanitizeInput:()=>O._T,dataSanitizeKey:()=>O.lq,dataSanitizeKeyAndAddUniqueness:()=>O.zx,dataSanitizeMeasurements:()=>O.Vj,dataSanitizeMessage:()=>O.Vk,dataSanitizeProperties:()=>O.xP,dataSanitizeString:()=>O.Rr,dataSanitizeUrl:()=>O.pJ,dateTimeUtilsDuration:()=>r.jj,dateTimeUtilsNow:()=>r.lt,dsPadNumber:()=>O.qW,findW3cTraceParent:()=>q.ef,formatTraceParent:()=>q.L0,getExtensionByName:()=>U.Y8,isBeaconApiSupported:()=>F.Uf,isCrossOriginError:()=>U.vv,isInternalApplicationInsightsEndpoint:()=>r.Qu,isSampledFlag:()=>q.N7,isValidSpanId:()=>q.wN,isValidTraceId:()=>q.hX,isValidTraceParent:()=>q.mJ,msToTimeSpan:()=>U.bb,parseConnectionString:()=>m.H,parseTraceParent:()=>q.ZI,strNotSpecified:()=>y.R2,stringToBoolOrDefault:()=>U.Dt,urlGetAbsoluteUrl:()=>j.wX,urlGetCompleteUrl:()=>j.k6,urlGetPathName:()=>j.Gz,urlParseFullHost:()=>j.M0,urlParseHost:()=>j.PS,urlParseUrl:()=>j.cM,utlCanUseLocalStorage:()=>f.BW,utlCanUseSessionStorage:()=>f.AN,utlDisableStorage:()=>f.Nu,utlEnableStorage:()=>f.iw,utlGetLocalStorage:()=>f.Se,utlGetSessionStorage:()=>f.vH,utlGetSessionStorageKeys:()=>f.T9,utlRemoveSessionStorage:()=>f.v7,utlRemoveStorage:()=>f.tm,utlSetLocalStorage:()=>f._M,utlSetSessionStorage:()=>f.Dt,utlSetStoragePrefix:()=>f.vh});var r=n(2318),i=n(6668),o=n(3775),s=n(3673),a=n(9622),c=n(6832),u=n(8993),l=n(6535),d=n(5439),h=n(9018),f=n(4658),p=n(5130),g=function(e,t){var n,r,g,m,v,y,C,I=this,A=!1,w=!1;function S(e,t,i,o){if(A){var s=function(e){try{var t=T(e);return(0,l.Z1)(1e6)<=t.limit.samplingRate}catch(e){}return!1}(e);if(!s)return;var a=T(e),c=M(e),u=_(a,n,c),d=!1,h=0,f=x(e);try{u&&!f?(h=Math.min(a.limit.maxSendNumber,c[p.F2]+1),c[p.F2]=0,d=!0,v[e]=!0,c[p.Jm]=new Date):(v[e]=u,c[p.F2]+=1);var g=b(e);R(r,g,c);for(var m=0;m<h;m++)O(e,r,t,i)}catch(e){}return{isThrottled:d,throttleNum:h}}return o&&N(e).push({msgID:e,message:t,severity:i}),null}function T(e){return g[e]||g[109]}function E(e,t){var n,r,o,s,a;try{var c=t||{},u={};u[p.Cx]=!!c[p.Cx];var l=c[p.zw]||{};w=(null==l?void 0:l.daysOfMonth)&&(null==l?void 0:l.daysOfMonth[p.oI])>0,u[p.zw]=(s=null===(o=(o=l)||{})||void 0===o?void 0:o.monthInterval,a=null==o?void 0:o.dayInterval,(0,i.hX)(s)&&(0,i.hX)(a)&&(o.monthInterval=3,w||(o[p.i9]=[28],w=!0)),o={monthInterval:null==o?void 0:o.monthInterval,dayInterval:null==o?void 0:o.dayInterval,daysOfMonth:null==o?void 0:o.daysOfMonth});var d={samplingRate:(null===(n=c.limit)||void 0===n?void 0:n.samplingRate)||100,maxSendNumber:(null===(r=c.limit)||void 0===r?void 0:r.maxSendNumber)||1};u.limit=d,g[e]=u}catch(e){}}function _(e,t,n){if(e&&!e[p.Cx]&&t&&(0,s.Gh)(n)){var r=k(),i=n[p.C9],o=e[p.zw],a=1;if(null==o?void 0:o.monthInterval){var u=12*(r.getUTCFullYear()-i.getUTCFullYear())+r.getUTCMonth()-i.getUTCMonth();a=P(o.monthInterval,0,u)}var l=1;if(w)l=(0,c.r)(o[p.i9],r[p.$e]());else if(null==o?void 0:o.dayInterval){var d=Math.floor((r.getTime()-i.getTime())/864e5);l=P(o.dayInterval,0,d)}return a>=0&&l>=0}return!1}function b(e,t){var n=(0,s.Gh)(t)?t:"";return e?"appInsightsThrottle"+n+"-"+e:null}function k(e){try{if(!e)return new Date;var t=new Date(e);if(!isNaN(t.getDate()))return t}catch(e){}return null}function R(e,t,n){try{return(0,f._M)(e,t,(0,u.EH)(JSON[p.Jj](n)))}catch(e){}return!1}function P(e,t,n){return e<=0?1:n>=t&&(n-t)%e==0?Math.floor((n-t)/e)+1:-1}function O(e,t,n,r){(0,o.ZP)(t,r||1,e,n)}function M(e){try{var t=m[e];if(!t){var n=b(e,y);t=function(e,t,n){try{var r={date:k(),count:0};if(e){var i=JSON.parse(e);return{date:k(i[p.C9])||r[p.C9],count:i[p.F2]||r[p.F2],preTriggerDate:i.preTriggerDate?k(i[p.Jm]):void 0}}return R(t,n,r),r}catch(e){}return null}((0,f.Se)(r,n),r,n),m[e]=t}return m[e]}catch(e){}return null}function x(e){var t=v[e];if((0,i.hX)(t)){t=!1;var n=M(e);n&&(t=function(e){try{if(e){var t=new Date;return e.getUTCFullYear()===t.getUTCFullYear()&&e.getUTCMonth()===t.getUTCMonth()&&e[p.$e]()===t[p.$e]()}}catch(e){}return!1}(n[p.Jm])),v[e]=t}return v[e]}function N(e){return C=C||{},(0,i.hX)(C[e])&&(C[e]=[]),C[e]}r=(0,o.y0)(e),v={},m={},C={},g={},E(109),y=(0,s.Gh)(t)?t:"",e.addUnloadHook((0,a.a)(e.config,(function(e){var t=e.cfg;n=(0,f.BW)();var r=t.throttleMgrCfg||{};(0,h.z)(r,(function(e,t){E(parseInt(e),t)}))}))),I._getDbgPlgTargets=function(){return[C]},I.getConfig=function(){return g},I.canThrottle=function(e){var t=M(e);return _(T(e),n,t)},I.isTriggered=function(e){return x(e)},I.isReady=function(){return A},I.flush=function(e){try{var t=N(e);if(t&&t[p.oI]>0){var n=t.slice(0);return C[e]=[],(0,d.I)(n,(function(e){S(e.msgID,e[p.pM],e.severity,!1)})),!0}}catch(e){}return!1},I.flushAll=function(){try{if(C){var e=!0;return(0,h.z)(C,(function(t){var n=I.flush(parseInt(t));e=e&&n})),e}}catch(e){}return!1},I.onReadyState=function(e,t){return void 0===t&&(t=!0),(A=!!(0,i.hX)(e)||e)&&t?I.flushAll():null},I.sendMessage=function(e,t,n){return S(e,t,n,!0)}},m=n(4484),v=n(2910),y=n(5025),C=n(1062),I=n(3072),A=n(5397),w=n(5014),S=n(1448),T=n(1365),E=n(2445),_=n(4164),b=n(7358),k=n(9762),R=function(){function e(){}return e.getConfig=function(e,t,n,r){var o;return void 0===r&&(r=!1),o=n&&e[p.up]&&e[p.up][n]&&!(0,i.hX)(e[p.up][n][t])?e[p.up][n][t]:e[t],(0,i.hX)(o)?r:o},e}(),P=n(8596),O=n(7975),M=n(3517);function x(e,t,n,r,o,a){var c;n=(0,O.Rr)(r,n)||y.R2,((0,i.hX)(e)||(0,i.hX)(t)||(0,i.hX)(n))&&(0,M.$8)("Input doesn't contain all required fields");var u="";e[y.ks]&&(u=e[y.ks],delete e[y.ks]);var l=((c={})[p.RS]=n,c.time=(0,s._u)(new Date),c.iKey=u,c.ext=a||{},c.tags=[],c.data={},c.baseType=t,c.baseData=e,c);return(0,i.hX)(o)||(0,h.z)(o,(function(e,t){l.data[e]=t})),l}var N=function(){function e(){}return e.create=x,e}(),D=n(1575),L=n(7374),U=n(87),F=n(7292),q=n(1864),H=n(3076);function z(e){var t=null;if((0,i.Tn)(Event))t=new Event(e);else{var n=(0,H.YE)();n&&n.createEvent&&(t=n.createEvent("Event")).initEvent(e,!0,!0)}return t}var j=n(9354),B="AppInsightsPropertiesPlugin",$="AppInsightsChannelPlugin",K="ApplicationInsightsAnalytics"},2475:(e,t,n)=>{"use strict";n.d(t,{DD:()=>u,Lx:()=>c,NU:()=>a});var r=n(6668),i=n(5977),o=n(6182);function s(e,t,n){return!e&&(0,r.hX)(e)?t:(0,r.Lm)(e)?e:"true"===(0,i.o)(e)[o.OL]()}function a(e){return{mrg:!0,v:e}}function c(e,t,n){return{fb:n,isVal:e,v:t}}function u(e,t){return{fb:t,set:s,v:!!e}}},991:(e,t,n)=>{"use strict";n.d(t,{q:()=>h});var r=n(6668),i=n(9452),o=n(5977),s=n(7460),a=n(9018),c=n(6182);function u(e){return e&&(0,r.Gv)(e)&&(e.isVal||e.fb||(0,i.K)(e,"v")||(0,i.K)(e,"mrg")||(0,i.K)(e,"ref")||e.set)}function l(e,t,n){var i,s=n.dfVal||r.O9;if(t&&n.fb){var a=n.fb;(0,r.cy)(a)||(a=[a]);for(var u=0;u<a[c.oI];u++){var l=a[u],d=t[l];if(s(d)?i=d:e&&(s(d=e.cfg[l])&&(i=d),e.set(e.cfg,(0,o.o)(l),d)),s(i))break}}return!s(i)&&s(n.v)&&(i=n.v),i}function d(e,t,n){var i,o=n;return n&&u(n)&&(o=l(e,t,n)),o&&(u(o)&&(o=d(e,t,o)),(0,r.cy)(o)?(i=[])[c.oI]=o[c.oI]:(0,s.Q)(o)&&(i={}),i&&((0,a.z)(o,(function(n,r){r&&u(r)&&(r=d(e,t,r)),i[n]=r})),o=i)),o}function h(e,t,n,i){var o,f,p,g,m,v,y,C,I=i;u(I)?(o=I.isVal,f=I.set,v=I[c.XW],y=I[c.JQ],g=I.mrg,!(m=I.ref)&&(0,r.b0)(m)&&(m=!!g),p=l(e,t,I)):p=i,y&&e[c.JQ](t,n);var A=!0,w=t[n];!w&&(0,r.hX)(w)||(C=w,A=!1,o&&C!==p&&!o(C)&&(C=p,A=!0),f&&(A=(C=f(C,p,t))===p)),A?C=p?d(e,t,p):p:((0,s.Q)(C)||(0,r.cy)(p))&&g&&p&&((0,s.Q)(p)||(0,r.cy)(p))&&(0,a.z)(p,(function(t,n){h(e,C,t,n)})),e.set(t,n,C),m&&e.ref(t,n),v&&e[c.XW](t,n)}},9622:(e,t,n)=>{"use strict";n.d(t,{e:()=>F,a:()=>q});var r=n(6668),i=n(9018),o=n(6336),s=n(8693),a=n(4276),c=n(6492),u=n(6182),l=n(991),d=n(5439),h=n(695),f=n(6832),p=n(9147),g=["push","pop","shift","unshift","splice"],m=function(e,t,n,r){e&&e[u.ih](3,108,"".concat(n," [").concat(t,"] failed - ")+(0,s.m)(r))};function v(e,t){var n=(0,h.k)(e,t);return n&&n.get}function y(e,t,n,r){if(t){var a=v(t,n);a&&a[e.prop]?t[n]=r:function(e,t,n,r){var a={n,h:[],trk:function(t){t&&t.fn&&(-1===(0,f.r)(a.h,t)&&a.h[u.y5](t),e.trk(t,a))},clr:function(e){var t=(0,f.r)(a.h,e);-1!==t&&a.h[u.Ic](t,1)}},l=!0,d=!1;function h(){l&&(d=d||(0,p.hF)(h,e,r),r&&!r[p.nM]&&d&&(r=I(e,r,n,"Converting")),l=!1);var t=e.act;return t&&a.trk(t),r}h[e.prop]={chng:function(){e.add(a)}},(0,o.vF)(t,a.n,{g:h,s:function(o){if(r!==o){h[e.ro]&&!e.upd&&(0,p.If)("["+n+"] is read-only:"+(0,s.m)(t)),l&&(d=d||(0,p.hF)(h,e,r),l=!1);var f=d&&h[e.rf];if(d)if(f){(0,i.z)(r,(function(e){r[e]=o?o[e]:c.HP}));try{(0,i.z)(o,(function(t,n){y(e,r,t,n)})),o=r}catch(t){m((e.hdlr||{})[u.Uw],n,"Assigning",t),d=!1}}else r&&r[p.nM]&&(0,i.z)(r,(function(t){var n=v(r,t);if(n){var i=n[e.prop];i&&i.chng()}}));if(o!==r){var g=o&&(0,p.hF)(h,e,o);!f&&g&&(o=I(e,o,n,"Converting")),r=o,d=g}e.add(a)}}})}(e,t,n,r)}return t}function C(e,t,n,r){if(t){var i=v(t,n),o=i&&!!i[e.prop],s=r&&r[0],a=r&&r[1],c=r&&r[2];if(!o){if(c)try{(0,p.V9)(t)}catch(t){m((e.hdlr||{})[u.Uw],n,"Blocking",t)}try{y(e,t,n,t[n]),i=v(t,n)}catch(t){m((e.hdlr||{})[u.Uw],n,"State",t)}}s&&(i[e.rf]=s),a&&(i[e.ro]=a),c&&(i[e.blkVal]=!0)}return t}function I(e,t,n,s){try{(0,i.z)(t,(function(n,r){y(e,t,n,r)})),t[p.nM]||((0,o.Ux)(t,p.nM,{get:function(){return e[u.K0]}}),function(e,t,n){(0,r.cy)(t)&&(0,d.I)(g,(function(r){var i=t[r];t[r]=function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var s=i[u.y9](this,r);return I(e,t,n,"Patching"),s}}))}(e,t,n))}catch(t){m((e.hdlr||{})[u.Uw],n,s,t)}return t}var A,w=n(7403),S=n(1636),T=n(755),E=n(655),_=n(4016),b=n(411),k=n(1324),R=n(2871);function P(e,t){return(_.s6.setPrototypeOf||function(e,t){!A&&(A=(0,R.nR)((function(){var e;return(e={})[_.r5]=[],e instanceof Array}))),A.v?e[_.r5]=t:(0,i.z)(t,(function(t,n){return e[t]=n}))})(e,t)}var O,M=function(e,t,n){function r(){this.constructor=t,N(this,e)}return N(t,e),(t=P(t,n))[_.Fs]=n===_.M_?(0,b.s)(n):(r[_.Fs]=n[_.Fs],new r),t},x=function(e,t){try{t&&(e[_.o_]=t)}catch(e){}},N=function(e,t){try{(0,o.vF)(e,_.o_,{v:t,c:!0,e:!1})}catch(e){}};var D="[[ai_",L="]]";function U(e){var t,n,r=(0,w.jj)(D+"get"+e.uid+L),i=(0,w.jj)(D+"ro"+e.uid+L),o=(0,w.jj)(D+"rf"+e.uid+L),a=(0,w.jj)(D+"blkVal"+e.uid+L),c=(0,w.jj)(D+"dtl"+e.uid+L),l=null,h=null;function p(t,r){var i=n.act;try{n.act=t,t&&t[c]&&((0,d.I)(t[c],(function(e){e.clr(t)})),t[c]=[]),r({cfg:e.cfg,set:e.set.bind(e),setDf:e[u.h0].bind(e),ref:e.ref.bind(e),rdOnly:e[u.XW].bind(e)})}catch(t){var o=e[u.Uw];throw o&&o[u.ih](1,107,(0,s.m)(t)),t}finally{n.act=i||null}}function g(){if(l){var e=l;l=null,h&&h[u._w](),h=null;var t=[];if((0,d.I)(e,(function(e){if(e&&(e[c]&&((0,d.I)(e[c],(function(t){t.clr(e)})),e[c]=null),e.fn))try{p(e,e.fn)}catch(e){t[u.y5](e)}})),l)try{g()}catch(e){t[u.y5](e)}t[u.oI]>0&&function(e,t){var n,r,i,o,a,c;O||(n="AggregationError",r=function(e,t){t[u.oI]>1&&(e.errors=t[1])},o=i||Error,a=o[_.Fs][_.o_],c=Error.captureStackTrace,O=M(n,(function(){var e=this;try{x(o,n);var t=(0,E.p)(o,e,(0,T.K)(arguments))||e;if(t!==e){var i=(0,k.rL)(e);i!==(0,k.rL)(t)&&P(t,i)}return c&&c(t,e[_.BB]),r&&r(t,arguments),t}finally{x(o,a)}}),o));var l="Watcher error(s): ";throw(0,d.I)(t,(function(e,t){l+="\n".concat(t," > ").concat((0,s.m)(e))})),new O(l,t||[])}(0,t)}}return(t={prop:r,ro:i,rf:o})[u.JQ]=a,t[u.K0]=e,t.add=function(e){if(e&&e.h[u.oI]>0){l||(l=[]),h||(h=(0,S.dR)((function(){h=null,g()}),0));for(var t=0;t<e.h[u.oI];t++){var n=e.h[t];n&&-1===(0,f.r)(l,n)&&l[u.y5](n)}}},t[u.zs]=g,t.use=p,t.trk=function(e,t){if(e){var n=e[c]=e[c]||[];-1===(0,f.r)(n,t)&&n[u.y5](t)}},n=t}function F(e,t,n,s){var c=function(e,t,n){var s,c=(0,p.QA)(t);if(c)return c;var d,h=(0,a.Z)("dyncfg",!0),f=t&&!1!==n?t:(0,p.Dy)(t),g=((s={uid:null,cfg:f})[u.Uw]=e,s[u.zs]=function(){d[u.zs]()},s.set=function(t,n,r){try{t=y(d,t,n,r)}catch(t){m(e,n,"Setting value",t)}return t[n]},s[u.h0]=function(e,t){return t&&(0,i.z)(t,(function(t,n){(0,l.q)(g,e,t,n)})),e},s[u.x6]=function(e){return function(e,t){var n={fn:t,rm:function(){n.fn=null,e=null,t=null}};return e.use(n,t),n}(d,e)},s.ref=function(e,t){var n;return C(d,e,t,(n={},n[0]=!0,n))[t]},s[u.XW]=function(e,t){var n;return C(d,e,t,(n={},n[1]=!0,n))[t]},s[u.JQ]=function(e,t){var n;return C(d,e,t,(n={},n[2]=!0,n))[t]},s._block=function(e,t){d.use(null,(function(n){var i=d.upd;try{(0,r.b0)(t)||(d.upd=t),e(n)}finally{d.upd=i}}))},s);return(0,o.vF)(g,"uid",{c:!1,e:!1,w:!1,v:h}),I(d=U(g),f,"config","Creating"),g}(n,e||{},s);return t&&c[u.h0](c.cfg,t),c}function q(e,t,n){var r=e[p.nM]||e;return!r.cfg||r.cfg!==e&&r.cfg[p.nM]!==r?(function(e,t){e?(e[u.on](t),e[u.ih](2,108,t)):(0,p.If)(t)}(n,c.xW+(0,s.m)(e)),F(e,null,n)[u.x6](t)):r[u.x6](t)}},9147:(e,t,n)=>{"use strict";n.d(t,{Dy:()=>h,Hf:()=>g,If:()=>v,QA:()=>f,V9:()=>p,hF:()=>m,nM:()=>u});var r=n(7403),i=n(6668),o=n(7460),s=n(9018),a=n(3517),c=n(6182),u=(0,r.eC)("[[ai_dynCfg_1]]"),l=(0,r.eC)("[[ai_blkDynCfg_1]]"),d=(0,r.eC)("[[ai_frcDynCfg_1]]");function h(e){var t;return e&&((0,i.cy)(e)?(t=[])[c.oI]=e[c.oI]:(0,o.Q)(e)&&(t={}),t)?((0,s.z)(e,(function(e,n){t[e]=h(n)})),t):e}function f(e){if(e){var t=e[u]||e;if(t.cfg&&(t.cfg===e||t.cfg[u]===t))return t}return null}function p(e){if(e&&((0,o.Q)(e)||(0,i.cy)(e)))try{e[l]=!0}catch(e){}return e}function g(e){if(e)try{e[d]=!0}catch(e){}return e}function m(e,t,n){var r=!1;return n&&!e[t.blkVal]&&((r=n[d])||n[l]||(r=(0,o.Q)(n)||(0,i.cy)(n))),r}function v(e){(0,a.zk)("InvalidAccess:"+e)}},4282:(e,t,n)=>{"use strict";n.d(t,{H:()=>i,o:()=>o});var r=n(5659),i=r.WS,o=r.fn},3662:(e,t,n)=>{"use strict";n.d(t,{x:()=>r});var r=(0,n(4282).H)({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5})},9379:(e,t,n)=>{"use strict";n.d(t,{_:()=>X});var r=n(659),i=n(8279),o=n(636),s=n(1324),a=n(5439),c=n(6668),u=n(3517),l=n(9018),d=n(7460),h=n(1636),f=n(755),p=n(5683),g=n(4016),m=n(6336),v=function(e){return e.value&&A(e),!0},y=[function(e){var t=e.value;if((0,c.cy)(t)){var n=e.result=[];return n.length=t.length,e.copyTo(n,t),!0}return!1},A,function(e){return e.type===g.H3},function(e){var t=e.value;return!!(0,c.$P)(t)&&(e.result=new Date(t.getTime()),!0)}];function C(e,t,n,r){var i=n.handler,o=n.path?r?n.path.concat(r):n.path:[],s={handler:n.handler,src:n.src,path:o},u=typeof t,l=!1,h=!1;t&&u===g.qv?l=(0,d.Q)(t):h=t===g.M_||(0,c.Cb)(u);var f={type:u,isPrim:h,isPlain:l,value:t,result:t,path:o,origin:n.src,copy:function(t,r){return C(e,t,r?s:n,r)},copyTo:function(t,n){return I(e,t,n,s)}};return f.isPrim?i&&(0,p.n)(i,n,f)?f.result:t:function(e,t,r,o){var s;return(0,a.I)(e,(function(e){if(e.k===t)return s=e,-1})),s||(s={k:t,v:t},e.push(s),function(e){(0,m.vF)(f,"result",{g:function(){return e.v},s:function(t){e.v=t}});for(var t=0,r=i;!(0,p.n)(r||(t<y.length?y[t++]:v),n,f);)r=g.M_}(s)),s.v}(e,t)}function I(e,t,n,r){if(!(0,c.hX)(n))for(var i in n)t[i]=C(e,n[i],r,i);return t}function A(e){var t=e.value;if(t&&e.isPlain){var n=e.result={};return e.copyTo(n,t),!0}return!1}function w(e,t,n,r,i,o,s){return function(e,t){return(0,a.I)(t,(function(t){!function(e,t,n){I([],e,t,{handler:void 0,src:t,path:[]})}(e,t)})),e}(C([],c=e,{handler:undefined,src:c})||{},(0,f.K)(arguments));var c}var S,T=n(9452),E=n(3076),_=n(1187),b=n(6832),k=n(9622),R=n(6182),P=n(4013),O=n(5034),M=n(4276),x=n(7867),N=n(3775),D=n(3673),L=n(6492),U=n(1356),F=n(8156),q=n(2317),H=n(380),z=n(8693),j=function(e){function t(){var n,r,o=e.call(this)||this;function s(){n=0,r=[]}return o.identifier="TelemetryInitializerPlugin",o.priority=199,s(),(0,i.A)(t,o,(function(e,t){e.addTelemetryInitializer=function(e){return function(e,t,n){var r={id:t,fn:n};return(0,_.Y)(e,r),{remove:function(){(0,a.I)(e,(function(t,n){if(t.id===r.id)return e[R.Ic](n,1),-1}))}}}(r,n++,e)},e[L.qT]=function(t,n){(function(e,t,n){for(var r=!1,i=e[R.oI],o=0;o<i;++o){var s=e[o];if(s)try{if(!1===s.fn[R.y9](null,[t])){r=!0;break}}catch(e){(0,N.ZP)(n,2,64,"Telemetry initializer failed: "+(0,D.lL)(e),{exception:(0,z.m)(e)},!0)}}return!r})(r,t,n?n[R.e4]():e[R.e4]())&&e[R.$5](t,n)},e[R.tn]=function(){s()}})),o}return(0,r.qU)(t,e),t.__ieDyn=1,t}(n(8257).s),B=n(836),$=n(8969),K="Plugins must provide initialize method",V="SDK is still unloading...",G=(0,s.ZH)(((S={cookieCfg:{}})[L.jy]={rdOnly:!0,ref:!0,v:[]},S[L.LZ]={rdOnly:!0,ref:!0,v:[]},S[L.Bw]={ref:!0,v:{}},S[L.Yd]=L.HP,S.loggingLevelConsole=0,S.diagnosticLogInterval=L.HP,S));function W(e,t){return new F.NS(t)}function Y(e,t){var n=!1;return(0,a.I)(t,(function(t){if(t===e)return n=!0,-1})),n}function Q(e,t,n,r){n&&(0,l.z)(n,(function(n,i){r&&(0,d.Q)(i)&&(0,d.Q)(t[n])&&Q(e,t[n],i,r),r&&(0,d.Q)(i)&&(0,d.Q)(t[n])?Q(e,t[n],i,r):e.set(t,n,i)}))}function J(e,t){var n=null,r=-1;return(0,a.I)(e,(function(e,i){if(e.w===t)return n=e,r=i,-1})),{i:r,l:n}}var X=function(){function e(){var t,n,d,f,p,g,v,y,C,I,A,S,z,X,Z,ee,te,ne,re,ie,oe,se,ae,ce,ue,le,de,he;(0,i.A)(e,this,(function(e){function i(e){return le&&le[R.XM]||he||(e||d&&d.queue[R.oI]>0)&&(de||(de=!0,Ee(t[R.x6]((function(e){var t=e.cfg.diagnosticLogInterval;t&&t>0||(t=1e4);var n=!1;le&&(n=le[R.XM],le[R._w]()),(le=(0,h.AH)(Ie,t)).unref(),le[R.XM]=n})))),le[R.XM]=!0),le}function fe(){var e={};ce=[];var t=function(t){t&&(0,a.I)(t,(function(t){if(t[R.Ju]&&t[R.s]&&!e[t.identifier]){var n=t[R.Ju]+"="+t[R.s];ce[R.y5](n),e[t.identifier]=t}}))};t(S),A&&(0,a.I)(A,(function(e){t(e)})),t(I)}function pe(){n=!1,(t=(0,k.e)({},G,e[R.Uw])).cfg[R.Bl]=1,(0,m.vF)(e,"config",{g:function(){return t.cfg},s:function(t){e.updateCfg(t,!1)}}),(0,m.vF)(e,"pluginVersionStringArr",{g:function(){return ce||fe(),ce}}),(0,m.vF)(e,"pluginVersionString",{g:function(){return ue||(ce||fe(),ue=ce.join(";")),ue||L.m5}}),(0,m.vF)(e,"logger",{g:function(){return d||(d=new N.wq(t.cfg),t[R.Uw]=d),d},s:function(e){t[R.Uw]=e,d!==e&&((0,P.K)(d,!1),d=e)}}),e[R.Uw]=new N.wq(t.cfg),ae=[];var r=e.config[L.jy]||[];r.splice(0,r[R.oI]),(0,_.Y)(r,ae),X=new j,f=[],(0,P.K)(p,!1),p=null,g=null,v=null,(0,P.K)(y,!1),y=null,C=null,I=[],A=null,S=null,z=!1,Z=null,ee=(0,M.Z)("AIBaseCore",!0),te=(0,B.P)(),ie=null,oe=null,ne=(0,$.w)(),se=[],ue=null,ce=null,he=!1}function ge(){var n=(0,q.i8)(ye(),t.cfg,e);return n[R.by](i),n}function me(t){var n=function(e,t,n){var r,i=[],o=[],s={};return(0,a.I)(n,(function(t){((0,c.hX)(t)||(0,c.hX)(t[R.mE]))&&(0,u.$8)(K);var n=t[L.Vo],r=t[R.Ju];t&&n&&((0,c.hX)(s[n])?s[n]=r:(0,N.OG)(e,"Two extensions have same priority #"+n+" - "+s[n]+", "+r)),!n||n<500?i[R.y5](t):o[R.y5](t)})),(r={})[L.eT]=i,r[L.LZ]=o,r}(e[R.Uw],0,I);C=null,ue=null,ce=null,S=(A||[])[0]||[],S=(0,H.Xc)((0,_.Y)(S,n[L.LZ]));var r=(0,_.Y)((0,H.Xc)(n[L.eT]),S);ae=(0,s.N6)(r);var i=e.config[L.jy]||[];i.splice(0,i[R.oI]),(0,_.Y)(i,ae);var o=ge();S&&S[R.oI]>0&&(0,H.pI)(o[R.$o](S),r),(0,H.pI)(o,r),t&&we(t)}function ve(e){var t=null,n=null,r=[];return(0,a.I)(ae,(function(t){if(t[R.Ju]===e&&t!==X)return n=t,-1;t.getChannel&&r[R.y5](t)})),!n&&r[R.oI]>0&&(0,a.I)(r,(function(t){if(!(n=t.getChannel(e)))return-1})),n&&(t={plugin:n,setEnabled:function(e){(0,H.Cr)(n)[L.Hr]=!e},isEnabled:function(){var e=(0,H.Cr)(n);return!e[R.Ik]&&!e[L.Hr]},remove:function(e,t){var r;void 0===e&&(e=!0);var i=[n],o=((r={reason:1})[R.tI]=e,r);Ce(i,o,(function(e){e&&me({reason:32,removed:i}),t&&t(e)}))}}),t}function ye(){if(!C){var n=(ae||[]).slice();-1===(0,b.r)(n,X)&&n[R.y5](X),C=(0,q.PV)((0,H.Xc)(n),t.cfg,e)}return C}function Ce(n,r,o){if(n&&n[R.oI]>0){var s=(0,q.PV)(n,t.cfg,e),c=(0,q.tS)(s,e);c[R.by]((function(){var e=!1,t=[];(0,a.I)(I,(function(r,i){Y(r,n)?e=!0:t[R.y5](r)})),I=t,ue=null,ce=null;var r=[];A&&((0,a.I)(A,(function(t,i){var o=[];(0,a.I)(t,(function(t){Y(t,n)?e=!0:o[R.y5](t)})),r[R.y5](o)})),A=r),o&&o(e),i()})),c[R.$5](r)}else o(!1)}function Ie(){if(d&&d.queue){var t=d.queue.slice(0);d.queue[R.oI]=0,(0,a.I)(t,(function(t){var n,r=((n={})[R.RS]=Z||"InternalMessageId: "+t[R.JR],n.iKey=oe,n[R.fA]=(0,D._u)(new Date),n.baseType=N.WD.dataType,n.baseData={message:t[R.pM]},n);e.track(r)}))}}function Ae(e,t,n,r){var i=1,o=!1,s=null;function a(){i--,o&&0===i&&(s&&s[R._w](),s=null,t&&t(o),t=null)}return r=r||5e3,S&&S[R.oI]>0&&ge()[R.$o](S).iterate((function(t){if(t.flush){i++;var o=!1;t.flush(e,(function(){o=!0,a()}),n)||o||(e&&null==s?s=(0,h.dR)((function(){s=null,a()}),r):a())}})),o=!0,a(),!0}function we(t){var n=(0,q.nU)(ye(),e);n[R.by](i),e._updateHook&&!0===e._updateHook(n,t)||n[R.$5](t)}function Se(t){var n=e[R.Uw];n?((0,N.ZP)(n,2,73,t),i()):(0,u.$8)(t)}function Te(t){var n=e[R.RF]();n&&n[L.Yp]([t],2)}function Ee(e){ne.add(e)}pe(),e._getDbgPlgTargets=function(){return[ae]},e[R.tZ]=function(){return n},e[R.mE]=function(i,o,s,h){z&&(0,u.$8)(V),e[R.tZ]()&&(0,u.$8)("Core cannot be initialized more than once"),i=(t=(0,k.e)(i,G,s||e[R.Uw],!1)).cfg,Ee(t[R.x6]((function(e){oe=e.cfg.instrumentationKey;var t=e.ref(e.cfg,L.Bw);(0,l.z)(t,(function(n){e.ref(t,n)})),(0,c.hX)(oe)&&(0,u.$8)("Please provide instrumentation key")}))),!(p=h)&&e[R.RF](),Ee(t[R.x6]((function(e){var t=e.cfg.disableDbgExt;!0===t&&re&&(p[R.TP](re),re=null),p&&!re&&!0!==t&&(re=(0,x.M)(e.cfg),p[R.vR](re))}))),Ee(t[R.x6]((function(e){var t=e.cfg.enablePerfMgr;!t&&v&&(v=null),t&&(0,D.c2)(e.cfg,L.Yd,W)}))),e[R.Uw]=s;var f=i[L.jy];if((I=[])[R.y5].apply(I,(0,r.vz)((0,r.vz)([],o,!1),f,!1)),A=i[L.LZ],me(null),S&&0!==S[R.oI]||(0,u.$8)("No "+L.LZ+" available"),A&&A[R.oI]>1){var g=e[R.AP]("TeeChannelController");g&&g.plugin||(0,N.ZP)(d,1,28,"TeeChannel required")}!function(e,t,n){(0,a.I)(t,(function(t){var r=(0,k.a)(e,t.w,n);delete t.w,t.rm=function(){r.rm()}}))}(i,se,d),se=null,n=!0,e.releaseQueue(),e[R.h4]()},e.getChannels=function(){var e=[];return S&&(0,a.I)(S,(function(t){e[R.y5](t)})),(0,s.N6)(e)},e.track=function(t){(0,F.r2)(e[L.kI](),(function(){return"AppInsightsCore:track"}),(function(){null===t&&(Te(t),(0,u.$8)("Invalid telemetry item")),!t[R.RS]&&(0,c.hX)(t[R.RS])&&(Te(t),(0,u.$8)("telemetry name required")),t.iKey=t.iKey||oe,t[R.fA]=t[R.fA]||(0,D._u)(new Date),t.ver=t.ver||"4.0",!z&&e[R.tZ]()?ge()[R.$5](t):f[R.y5](t)}),(function(){return{item:t}}),!t.sync)},e[R.ps]=ge,e[R.RF]=function(){return p||(p=new U.h(t.cfg),e._notificationManager=p),p},e[R.vR]=function(t){e[R.RF]()[R.vR](t)},e[R.TP]=function(e){p&&p[R.TP](e)},e.getCookieMgr=function(){return y||(y=(0,O.xN)(t.cfg,e[R.Uw])),y},e.setCookieMgr=function(e){y!==e&&((0,P.K)(y,!1),y=e)},e[L.kI]=function(){return g||v||Ee(t[R.x6]((function(t){if(t.cfg.enablePerfMgr){var n=t.cfg[L.Yd];(0,c.Tn)(n)&&(v=n(e,e[R.RF]()))}}))),g||v||(0,F.Z4)()},e.setPerfMgr=function(e){g=e},e.eventCnt=function(){return f[R.oI]},e.releaseQueue=function(){if(n&&f[R.oI]>0){var e=f;f=[],(0,a.I)(e,(function(e){ge()[R.$5](e)}))}},e[R.h4]=function(e){return Z=e||null,he=!1,le&&le[R._w](),i(!0)},e[R.Di]=function(){he=!0,le&&le[R._w](),Ie()},(0,D.o$)(e,(function(){return X}),["addTelemetryInitializer"]),e[R.M5]=function(t,r,i){var s;void 0===t&&(t=!0),n||(0,u.$8)("SDK is not initialized"),z&&(0,u.$8)(V);var a,c=((s={reason:50})[R.tI]=t,s.flushComplete=!1,s);t&&!r&&(a=(0,o.Qo)((function(e){r=e})));var l=(0,q.tS)(ye(),e);function h(t){c.flushComplete=t,z=!0,te.run(l,c),e[R.Di](),l[R.$5](c)}return l[R.by]((function(){ne.run(e[R.Uw]),(0,P.k)([y,p,d],t,(function(){pe(),r&&r(c)}))}),e),Ie(),Ae(t,h,6,i)||h(!1),a},e[R.AP]=ve,e.addPlugin=function(e,t,n,r){if(!e)return r&&r(!1),void Se(K);var i=ve(e[R.Ju]);if(i&&!t)return r&&r(!1),void Se("Plugin ["+e[R.Ju]+"] is already loaded!");var o={reason:16};function s(t){I[R.y5](e),o.added=[e],me(o),r&&r(!0)}if(i){var a=[i.plugin];Ce(a,{reason:2,isAsync:!!n},(function(e){e?(o.removed=a,o.reason|=32,s()):r&&r(!1)}))}else s()},e.updateCfg=function(n,r){var i;if(void 0===r&&(r=!0),e[R.tZ]()){i={reason:1,cfg:t.cfg,oldCfg:w({},t.cfg),newConfig:w({},n),merge:r},n=i.newConfig;var o=t.cfg;n[L.jy]=o[L.jy],n[L.LZ]=o[L.LZ]}t._block((function(e){var t=e.cfg;Q(e,t,n,r),r||(0,l.z)(t,(function(r){(0,T.K)(n,r)||e.set(t,r,L.HP)})),e[R.h0](t,G)}),!0),t[R.zs](),i&&we(i)},e.evtNamespace=function(){return ee},e.flush=Ae,e.getTraceCtx=function(e){return ie||(ie=(0,H.u7)()),ie},e.setTraceCtx=function(e){ie=e||null},e.addUnloadHook=Ee,(0,D.RF)(e,"addUnloadCb",(function(){return te}),"add"),e.onCfgChange=function(r){var i,o,s,a;return n?i=(0,k.a)(t.cfg,r,e[R.Uw]):((a=J(o=se,s=r).l)||(a={w:s,rm:function(){var e=J(o,s);-1!==e.i&&o[R.Ic](e.i,1)}},o[R.y5](a)),i=a),{rm:function(){i.rm()}}},e.getWParam=function(){return(0,E.Wt)()||t.cfg.enableWParam?0:-1}}))}return e.__ieDyn=1,e}()},4013:(e,t,n)=>{"use strict";n.d(t,{K:()=>c,k:()=>u});var r=n(636),i=n(4292),o=n(4657),s=n(755),a=n(6182);function c(e,t){if(e&&e[a.M5])return e[a.M5](t)}function u(e,t,n){var a;return n||(a=(0,r.Qo)((function(e){n=e}))),e&&(0,o.R)(e)>0?(0,i.Dv)(c(e[0],t),(function(){u((0,s.K)(e,1),t,n)})):n(),a}},8257:(e,t,n)=>{"use strict";n.d(t,{s:()=>v});var r,i=n(8279),o=n(6336),s=n(6668),a=n(9622),c=n(6182),u=n(3775),l=n(3673),d=n(6492),h=n(2317),f=n(836),p=n(8969),g="getPlugin",m=((r={})[d.Bw]={isVal:l.Gh,v:{}},r),v=function(){function e(){var t,n,r,v,y,C=this;function I(e){void 0===e&&(e=null);var t=e;if(!t){var i=n||(0,h.i8)(null,{},C[d.eT]);t=r&&r[g]?i[c.$o](null,r[g]):i[c.$o](null,r)}return t}function A(e,t,i){(0,a.e)(e,m,(0,u.y0)(t)),!i&&t&&(i=t[c.ps]()[c.uR]());var o=r;r&&r[g]&&(o=r[g]()),C[d.eT]=t,n=(0,h.i8)(i,e,t,o)}function w(){t=!1,C[d.eT]=null,n=null,r=null,y=(0,p.w)(),v=(0,f.P)()}w(),(0,i.A)(e,C,(function(e){e[c.mE]=function(e,n,r,i){A(e,n,i),t=!0},e[c.Ik]=function(t,n){var i,o=e[d.eT];if(o&&(!t||o===t[d.eT]())){var s,a=!1,u=t||(0,h.tS)(null,o,r&&r[g]?r[g]():r),l=n||((i={reason:0})[c.tI]=!1,i);return e[c.tn]&&!0===e[c.tn](u,l,f)?s=!0:f(),s}function f(){a||(a=!0,v.run(u,n),y.run(u[c.e4]()),!0===s&&u[c.$5](l),w())}},e[c.HC]=function(t,n){var i=e[d.eT];if(i&&(!t||i===t[d.eT]())){var o,s=!1,a=t||(0,h.nU)(null,i,r&&r[g]?r[g]():r),u=n||{reason:0};return e._doUpdate&&!0===e._doUpdate(a,u,l)?o=!0:l(),o}function l(){s||(s=!0,A(a.getCfg(),a.core(),a[c.uR]()))}},(0,l.RF)(e,"_addUnloadCb",(function(){return v}),"add"),(0,l.RF)(e,"_addHook",(function(){return y}),"add"),(0,o.vF)(e,"_unloadHooks",{g:function(){return y}})})),C[c.e4]=function(e){return I(e)[c.e4]()},C[c.tZ]=function(){return t},C.setInitialized=function(e){t=e},C[c.YH]=function(e){r=e},C[c.$5]=function(e,t){t?t[c.$5](e):r&&(0,s.Tn)(r[d.qT])&&r[d.qT](e,null)},C._getTelCtx=I}return e.__ieDyn=1,e}()},5034:(e,t,n)=>{"use strict";n.d(t,{It:()=>Q,gi:()=>$,um:()=>j,xN:()=>B});var r,i,o,s=n(2871),a=n(3076),c=n(6668),u=n(6832),l=n(8993),d=n(5881),h=n(3178),f=n(225),p=n(8693),g=n(5439),m=n(9018),v=n(2494),y=n(2475),C=n(9622),I=n(6182),A=n(3775),w=n(7292),S=n(3673),T=n(6492),E="toGMTString",_="toUTCString",b="cookie",k="expires",R="isCookieUseDisabled",P="disableCookiesUsage",O="_ckMgr",M=null,x=null,N=null,D={},L={},U=((r={cookieCfg:(0,y.NU)((i={},i[T.Fk]={fb:"cookieDomain",dfVal:S.Gh},i.path={fb:"cookiePath",dfVal:S.Gh},i.enabled=T.HP,i.ignoreCookies=T.HP,i.blockedCookies=T.HP,i)),cookieDomain:T.HP,cookiePath:T.HP})[P]=T.HP,r);function F(){!o&&(o=(0,s.nR)((function(){return(0,a.YE)()})))}function q(e){return!e||e.isEnabled()}function H(e,t){return!!(t&&e&&(0,c.cy)(e.ignoreCookies))&&-1!==(0,u.r)(e.ignoreCookies,t)}function z(e,t){var n=t[I.XM];if((0,c.hX)(n)){var r=void 0;(0,c.b0)(e[R])||(r=!e[R]),(0,c.b0)(e[P])||(r=!e[P]),n=r}return n}function j(e,t){var n;if(e)n=e.getCookieMgr();else if(t){var r=t.cookieCfg;n=r&&r[O]?r[O]:B(t)}return n||(n=function(e,t){var n=B[O]||L[O];return n||(n=B[O]=B(e,t),L[O]=n),n}(t,(e||{})[I.Uw])),n}function B(e,t){var n,r,i,o,s,p,g,m,v;e=(0,C.e)(e||L,null,t).cfg,s=(0,C.a)(e,(function(t){t[I.h0](t.cfg,U),r=t.ref(t.cfg,"cookieCfg"),i=r[T.QW]||"/",o=r[T.Fk],p=!1!==z(e,r),g=r.getCookie||W,m=r.setCookie||Y,v=r.delCookie||Y}),t);var y=((n={isEnabled:function(){var n=!1!==z(e,r)&&p&&$(t),i=L[O];return n&&i&&y!==i&&(n=q(i)),n},setEnabled:function(e){p=!1!==e,r[I.XM]=e},set:function(e,t,n,s,p){var g=!1;if(q(y)&&!function(e,t){return!!(t&&e&&(0,c.cy)(e.blockedCookies)&&-1!==(0,u.r)(e.blockedCookies,t))||H(e,t)}(r,e)){var v={},C=(0,l.EH)(t||T.m5),A=(0,d.H)(C,";");if(-1!==A&&(C=(0,l.EH)((0,h.ZW)(t,A)),v=K((0,h.P0)(t,A+1))),(0,S.KY)(v,T.Fk,s||o,c.zz,c.b0),!(0,c.hX)(n)){var b=(0,w.lT)();if((0,c.b0)(v[k])){var R=(0,f.f)()+1e3*n;if(R>0){var P=new Date;P.setTime(R),(0,S.KY)(v,k,V(P,b?E:_)||V(P,b?E:_)||T.m5,c.zz)}}b||(0,S.KY)(v,"max-age",T.m5+n,null,c.b0)}var O=(0,w.g$)();O&&"https:"===O.protocol&&((0,S.KY)(v,"secure",null,null,c.b0),null===x&&(x=!Q(((0,a.w3)()||{})[I.tX])),x&&(0,S.KY)(v,"SameSite","None",null,c.b0)),(0,S.KY)(v,T.QW,p||i,null,c.b0),m(e,G(C,v)),g=!0}return g},get:function(e){var t=T.m5;return q(y)&&!H(r,e)&&(t=g(e)),t},del:function(e,t){var n=!1;return q(y)&&(n=y.purge(e,t)),n},purge:function(e,n){var r,i=!1;if($(t)){var o=((r={})[T.QW]=n||"/",r[k]="Thu, 01 Jan 1970 00:00:01 GMT",r);(0,w.lT)()||(o["max-age"]="0"),v(e,G(T.m5,o)),i=!0}return i}})[I.M5]=function(e){s&&s.rm(),s=null},n);return y[O]=y,y}function $(e){if(null===M){M=!1,!o&&F();try{var t=o.v||{};M=void 0!==t[b]}catch(t){(0,A.ZP)(e,2,68,"Cannot access document.cookie - "+(0,S.lL)(t),{exception:(0,p.m)(t)})}}return M}function K(e){var t={};if(e&&e[I.oI]){var n=(0,l.EH)(e)[I.sY](";");(0,g.I)(n,(function(e){if(e=(0,l.EH)(e||T.m5)){var n=(0,d.H)(e,"=");-1===n?t[e]=null:t[(0,l.EH)((0,h.ZW)(e,n))]=(0,l.EH)((0,h.P0)(e,n+1))}}))}return t}function V(e,t){return(0,c.Tn)(e[t])?e[t]():null}function G(e,t){var n=e||T.m5;return(0,m.z)(t,(function(e,t){n+="; "+e+((0,c.hX)(t)?T.m5:"="+t)})),n}function W(e){var t=T.m5;if(!o&&F(),o.v){var n=o.v[b]||T.m5;N!==n&&(D=K(n),N=n),t=(0,l.EH)(D[e]||T.m5)}return t}function Y(e,t){!o&&F(),o.v&&(o.v[b]=e+"="+t)}function Q(e){return!(!(0,c.Kg)(e)||!(0,S.Ju)(e,"CPU iPhone OS 12")&&!(0,S.Ju)(e,"iPad; CPU OS 12")&&!((0,S.Ju)(e,"Macintosh; Intel Mac OS X 10_14")&&(0,S.Ju)(e,"Version/")&&(0,S.Ju)(e,"Safari"))&&(!(0,S.Ju)(e,"Macintosh; Intel Mac OS X 10_14")||!(0,v.C)(e,"AppleWebKit/605.1.15 (KHTML, like Gecko)"))&&!(0,S.Ju)(e,"Chrome/5")&&!(0,S.Ju)(e,"Chrome/6")&&(!(0,S.Ju)(e,"UnrealEngine")||(0,S.Ju)(e,"Chrome"))&&!(0,S.Ju)(e,"UCBrowser/12")&&!(0,S.Ju)(e,"UCBrowser/11"))}},9882:(e,t,n)=>{"use strict";n.d(t,{aq:()=>s,cL:()=>a});var r=n(3178),i=n(6492),o=n(6535);function s(){var e=a();return(0,r.P0)(e,0,8)+"-"+(0,r.P0)(e,8,12)+"-"+(0,r.P0)(e,12,16)+"-"+(0,r.P0)(e,16,20)+"-"+(0,r.P0)(e,20)}function a(){for(var e,t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],n=i.m5,s=0;s<4;s++)n+=t[15&(e=(0,o.VN)())]+t[e>>4&15]+t[e>>8&15]+t[e>>12&15]+t[e>>16&15]+t[e>>20&15]+t[e>>24&15]+t[e>>28&15];var a=t[8+(3&(0,o.VN)())|0];return(0,r.hK)(n,0,8)+(0,r.hK)(n,9,4)+"4"+(0,r.hK)(n,13,3)+a+(0,r.hK)(n,16,3)+(0,r.hK)(n,19,12)}},4276:(e,t,n)=>{"use strict";n.d(t,{T:()=>f,Z:()=>h});var r=n(6336),i=n(6182),o=n(3673),s=n(6492),a=n(6535),c="3.0.4",u="."+(0,a.Si)(6),l=0;function d(e){return 1===e[i.re]||9===e[i.re]||!+e[i.re]}function h(e,t){return void 0===t&&(t=!1),(0,o.cH)(e+l+++(t?"."+c:s.m5)+u)}function f(e){var t={id:h("_aiData-"+(e||s.m5)+"."+c),accept:function(e){return d(e)},get:function(e,n,i,s){var a=e[t.id];return a?a[(0,o.cH)(n)]:(s&&(a=function(e,t){var n=t[e.id];if(!n){n={};try{d(t)&&(0,r.vF)(t,e.id,{e:!1,v:n})}catch(e){}}return n}(t,e),a[(0,o.cH)(n)]=i),i)},kill:function(e,t){if(e&&e[t])try{delete e[t]}catch(e){}}};return t}},7867:(e,t,n)=>{"use strict";n.d(t,{$:()=>l,M:()=>d});var r,i=n(3076),o=n(6182),s=n(6492),a=[s.fc,s.Yp,s.dI,s.l0],c=null;function u(e,t){return function(){var n=arguments,r=l(t);if(r){var i=r.listener;i&&i[e]&&i[e][o.y9](i,n)}}}function l(e){var t,n=c;return n||!0===e.disableDbgExt||(n=c||((t=(0,i.zS)("Microsoft"))&&(c=t.ApplicationInsights),c)),n?n.ChromeDbgExt:null}function d(e){if(!r){r={};for(var t=0;t<a[o.oI];t++)r[a[t]]=u(a[t],e)}return r}},3775:(e,t,n)=>{"use strict";n.d(t,{OG:()=>w,Oc:()=>S,WD:()=>v,ZP:()=>A,wq:()=>C,y0:()=>y});var r,i=n(8279),o=n(6668),s=n(8693),a=n(9622),c=n(6182),u=n(7867),l=n(7292),d=n(6492),h="warnToConsole",f={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},p=((r={})[0]=null,r[1]="errorToConsole",r[2]=h,r[3]="debugToConsole",r);function g(e){return e?'"'+e[c.W7](/\"/g,d.m5)+'"':d.m5}function m(e,t){var n=(0,l.U5)();if(n){var r="log";n[e]&&(r=e),(0,o.Tn)(n[r])&&n[r](t)}}var v=function(){function e(e,t,n,r){void 0===n&&(n=!1);var i=this;i[c.JR]=e,i[c.pM]=(n?"AI: ":"AI (Internal): ")+e;var o=d.m5;(0,l.Z)()&&(o=(0,l.hm)().stringify(r));var s=(t?" message:"+g(t):d.m5)+(r?" props:"+g(o):d.m5);i[c.pM]+=s}return e.dataType="MessageData",e}();function y(e,t){return(e||{})[c.Uw]||new C(t)}var C=function(){function e(t){this.identifier="DiagnosticLogger",this.queue=[];var n,r,l,d,g,y=0,C={};(0,i.A)(e,this,(function(e){function i(t,n){if(!(y>=l)){var i=!0,o="AITR_"+n[c.JR];if(C[o]?i=!1:C[o]=!0,i&&(t<=r&&(e.queue[c.y5](n),y++,I(1===t?"error":"warn",n)),y===l)){var s="Internal events throttle limit per PageView reached for this app.",a=new v(23,s,!1);e.queue[c.y5](a),1===t?e.errorToConsole(s):e[c.on](s)}}}function I(e,n){var r=(0,u.$)(t||{});r&&r[c.e4]&&r[c.e4](e,n)}g=function(t){return(0,a.a)((0,a.e)(t,f,e).cfg,(function(e){var t=e.cfg;n=t[c.Bl],r=t.loggingLevelTelemetry,l=t.maxMessageLimit,d=t.enableDebug}))}(t||{}),e.consoleLoggingLevel=function(){return n},e[c.ih]=function(t,r,a,u,l){void 0===l&&(l=!1);var f=new v(r,a,l,u);if(d)throw(0,s.m)(f);var g=p[t]||h;if((0,o.b0)(f[c.pM]))I("throw"+(1===t?"Critical":"Warning"),f);else{if(l){var m=+f[c.JR];!C[m]&&n>=t&&(e[g](f[c.pM]),C[m]=!0)}else n>=t&&e[g](f[c.pM]);i(t,f)}},e.debugToConsole=function(e){m("debug",e),I("warning",e)},e[c.on]=function(e){m("warn",e),I("warning",e)},e.errorToConsole=function(e){m("error",e),I("error",e)},e.resetInternalMessageCount=function(){y=0,C={}},e[c.sx]=i,e[c.M5]=function(e){g&&g.rm(),g=null}}))}return e.__ieDyn=1,e}();function I(e){return e||new C}function A(e,t,n,r,i,o){void 0===o&&(o=!1),I(e)[c.ih](t,n,r,i,o)}function w(e,t){I(e)[c.on](t)}function S(e,t,n){I(e)[c.sx](t,n)}},7292:(e,t,n)=>{"use strict";n.d(t,{$Z:()=>z,Iu:()=>j,L0:()=>D,MY:()=>O,PV:()=>F,R7:()=>U,U5:()=>k,Uf:()=>L,Z:()=>R,cU:()=>_,g$:()=>b,hm:()=>P,iN:()=>M,lT:()=>N,lV:()=>x,xk:()=>q});var r=n(5664),i=n(6668),o=n(3076),s=n(558),a=n(6182),c=n(3673),u=n(6492),l="documentMode",d="location",h="console",f="JSON",p="crypto",g="msCrypto",m="ReactNative",v="msie",y="trident/",C="XMLHttpRequest",I=null,A=null,w=!1,S=null,T=null;function E(e,t){var n=!1;if(e){try{if(!(n=t in e)){var o=e[r.vR];o&&(n=t in o)}}catch(e){}if(!n)try{var s=new e;n=!(0,i.b0)(s[t])}catch(e){}}return n}function _(e){w=e}function b(e){if(e&&w){var t=(0,o.zS)("__mockLocation");if(t)return t}return typeof location===r._1&&location?location:(0,o.zS)(d)}function k(){return typeof console!==r.bA?console:(0,o.zS)(h)}function R(){return Boolean(typeof JSON===r._1&&JSON||null!==(0,o.zS)(f))}function P(){return R()?JSON||(0,o.zS)(f):null}function O(){return(0,o.zS)(p)}function M(){return(0,o.zS)(g)}function x(){var e=(0,o.w3)();return!(!e||!e.product)&&e.product===m}function N(){var e=(0,o.w3)();if(e&&(e[a.tX]!==A||null===I)){var t=((A=e[a.tX])||u.m5)[a.OL]();I=(0,c.Ju)(t,v)||(0,c.Ju)(t,y)}return I}function D(e){if(void 0===e&&(e=null),!e){var t=(0,o.w3)()||{};e=t?(t.userAgent||u.m5)[a.OL]():u.m5}var n=(e||u.m5)[a.OL]();if((0,c.Ju)(n,v)){var r=(0,o.YE)()||{};return Math.max(parseInt(n[a.sY](v)[1]),r[l]||0)}if((0,c.Ju)(n,y)){var i=parseInt(n[a.sY](y)[1]);if(i)return i+4}return null}function L(e){return null!==T&&!1!==e||(T=(0,o.w9)()&&Boolean((0,o.w3)().sendBeacon)),T}function U(e){var t=!1;try{t=!!(0,o.zS)("fetch");var n=(0,o.zS)("Request");t&&e&&n&&(t=E(n,"keepalive"))}catch(e){}return t}function F(){return null===S&&(S=typeof XDomainRequest!==r.bA)&&q()&&(S=S&&!E((0,o.zS)(C),"withCredentials")),S}function q(){var e=!1;try{e=!!(0,o.zS)(C)}catch(e){}return e}function H(e,t){if(e)for(var n=0;n<e[a.oI];n++){var r=e[n];if(r[a.RS]&&r[a.RS]===t)return r}return{}}function z(e){var t=(0,o.YE)();return t&&e?H(t.querySelectorAll("meta"),e).content:null}function j(e){var t,n=(0,s.FJ)();if(n){var r=n.getEntriesByType("navigation")||[];t=H((r[a.oI]>0?r[0]:{}).serverTiming,e).description}return t}},6149:(e,t,n)=>{"use strict";n.d(t,{Ds:()=>G,El:()=>M,Fc:()=>W,Hm:()=>L,ML:()=>F,Q3:()=>q,So:()=>z,Wg:()=>K,Ym:()=>H,ee:()=>V,lQ:()=>$,mB:()=>U,oS:()=>Q,sq:()=>Y,vF:()=>J,zh:()=>j});var r=n(6668),i=n(5439),o=n(9018),s=n(1324),a=n(3076),c=n(6832),u=n(6182),l=n(4276),d=n(6492),h="on",f="attachEvent",p="addEventListener",g="detachEvent",m="removeEventListener",v="events",y="visibilitychange",C="pagehide",I="pageshow",A="unload",w="beforeunload",S=(0,l.Z)("aiEvtPageHide"),T=(0,l.Z)("aiEvtPageShow"),E=/\.[\.]+/g,_=/[\.]+$/,b=1,k=(0,l.T)("events"),R=/^([^.]*)(?:\.(.+)|)/;function P(e){return e&&e[u.W7]?e[u.W7](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,d.m5):e}function O(e,t){var n;if(t){var o=d.m5;(0,r.cy)(t)?(o=d.m5,(0,i.I)(t,(function(e){(e=P(e))&&("."!==e[0]&&(e="."+e),o+=e)}))):o=P(t),o&&("."!==o[0]&&(o="."+o),e=(e||d.m5)+o)}var s=R.exec(e||d.m5)||[];return(n={})[u.QM]=s[1],n.ns=(s[2]||d.m5).replace(E,".").replace(_,d.m5)[u.sY](".").sort().join("."),n}function M(e,t,n){var r=[],s=k.get(e,v,{},!1),a=O(t,n);return(0,o.z)(s,(function(e,t){(0,i.I)(t,(function(e){var t;a[u.QM]&&a[u.QM]!==e.evtName[u.QM]||a.ns&&a.ns!=a.ns||r[u.y5](((t={})[u.RS]=e.evtName[u.QM]+(e.evtName.ns?"."+e.evtName.ns:d.m5),t.handler=e[u.Yo],t))}))})),r}function x(e,t,n){void 0===n&&(n=!0);var r=k.get(e,v,{},n),i=r[t];return i||(i=r[t]=[]),i}function N(e,t,n,r){e&&t&&t[u.QM]&&(e[m]?e[m](t[u.QM],n,r):e[g]&&e[g](h+t[u.QM],n))}function D(e,t,n,r){for(var i=t[u.oI];i--;){var o=t[i];o&&(n.ns&&n.ns!==o.evtName.ns||r&&!r(o)||(N(e,o.evtName,o[u.Yo],o.capture),t[u.Ic](i,1)))}}function L(e,t){return t?O("xx",(0,r.cy)(t)?[e].concat(t):[e,t]).ns[u.sY]("."):e}function U(e,t,n,r,i){var o;void 0===i&&(i=!1);var s=!1;if(e)try{var a=O(t,r);if(s=function(e,t,n,r){var i=!1;return e&&t&&t[u.QM]&&n&&(e[p]?(e[p](t[u.QM],n,r),i=!0):e[f]&&(e[f](h+t[u.QM],n),i=!0)),i}(e,a,n,i),s&&k.accept(e)){var c=((o={guid:b++,evtName:a})[u.Yo]=n,o.capture=i,o);x(e,a.type)[u.y5](c)}}catch(e){}return s}function F(e,t,n,r,i){if(void 0===i&&(i=!1),e)try{var a=O(t,r),c=!1;!function(e,t,n){if(t[u.QM])D(e,x(e,t[u.QM]),t,n);else{var r=k.get(e,v,{});(0,o.z)(r,(function(r,i){D(e,i,t,n)})),0===(0,s.cG)(r)[u.oI]&&k.kill(e,v)}}(e,a,(function(e){return!((!a.ns||n)&&e[u.Yo]!==n||(c=!0,0))})),c||N(e,a,n,i)}catch(e){}}function q(e,t,n,r){return void 0===r&&(r=!1),U(e,t,n,null,r)}function H(e,t,n,r){void 0===r&&(r=!1),F(e,t,n,null,r)}function z(e,t,n){var r=!1,i=(0,a.zk)();i&&(r=U(i,e,t,n),r=U(i.body,e,t,n)||r);var o=(0,a.YE)();return o&&(r=U(o,e,t,n)||r),r}function j(e,t,n){var r=(0,a.zk)();r&&(F(r,e,t,n),F(r.body,e,t,n));var i=(0,a.YE)();i&&F(i,e,t,n)}function B(e,t,n,r){var o=!1;return t&&e&&e[u.oI]>0&&(0,i.I)(e,(function(e){e&&(n&&-1!==(0,c.r)(n,e)||(o=z(e,t,r)||o))})),o}function $(e,t,n,i){var o=!1;return t&&e&&(0,r.cy)(e)&&!(o=B(e,t,n,i))&&n&&n[u.oI]>0&&(o=B(e,t,null,i)),o}function K(e,t,n){e&&(0,r.cy)(e)&&(0,i.I)(e,(function(e){e&&j(e,t,n)}))}function V(e,t,n){return $([w,A,C],e,t,n)}function G(e,t){K([w,A,C],e,t)}function W(e,t,n){var r=L(S,n),i=B([C],e,t,r);return t&&-1!==(0,c.r)(t,y)||(i=B([y],(function(t){var n=(0,a.YE)();e&&n&&"hidden"===n.visibilityState&&e(t)}),t,r)||i),!i&&t&&(i=W(e,null,n)),i}function Y(e,t){var n=L(S,t);K([C],e,n),K([y],null,n)}function Q(e,t,n){var r=L(T,n),i=B([I],e,t,r);return!(i=B([y],(function(t){var n=(0,a.YE)();e&&n&&"visible"===n.visibilityState&&e(t)}),t,r)||i)&&t&&(i=Q(e,null,n)),i}function J(e,t){var n=L(T,t);K([I],e,n),K([y],null,n)}},3673:(e,t,n)=>{"use strict";n.d(t,{CP:()=>P,Gh:()=>v,Ju:()=>C,KY:()=>w,RF:()=>_,SZ:()=>k,_u:()=>I,c2:()=>S,cH:()=>y,hW:()=>R,lL:()=>A,o$:()=>b,qz:()=>E});var r=n(1324),i=n(5664),o=n(6668),s=n(5881),a=n(9452),c=n(6336),u=n(5439),l=n(9018),d=n(7460),h=n(6182),f=n(6492),p=/-([a-z])/g,g=/([^\w\d_$])/g,m=/^(\d+[\w\d_$])/;function v(e){return!(0,o.hX)(e)}function y(e){var t=e;return t&&(0,o.Kg)(t)&&(t=(t=(t=t[h.W7](p,(function(e,t){return t.toUpperCase()})))[h.W7](g,"_"))[h.W7](m,(function(e,t){return"_"+t}))),t}function C(e,t){return!(!e||!t)&&-1!==(0,s.H)(e,t)}function I(e){return e&&e.toISOString()||""}function A(e){return(0,o.bJ)(e)?e[h.RS]:f.m5}function w(e,t,n,r,i){var o=n;return e&&((o=e[t])===n||i&&!i(o)||r&&!r(n)||(o=n,e[t]=o)),o}function S(e,t,n){var r;return e?!(r=e[t])&&(0,o.hX)(r)&&(r=(0,o.b0)(n)?{}:n,e[t]=r):r=(0,o.b0)(n)?{}:n,r}function T(e,t){var n=null,r=null;return(0,o.Tn)(e)?n=e:r=e,function(){var e=arguments;if(n&&(r=n()),r)return r[t][h.y9](r,e)}}function E(e,t,n){if(e&&t&&(0,o.Gv)(e)&&(0,o.Gv)(t)){var r=function(r){if((0,o.Kg)(r)){var i=t[r];(0,o.Tn)(i)?n&&!n(r,!0,t,e)||(e[r]=T(t,r)):n&&!n(r,!1,t,e)||((0,a.K)(e,r)&&delete e[r],(0,c.vF)(e,r,{g:function(){return t[r]},s:function(e){t[r]=e}}))}};for(var i in t)r(i)}return e}function _(e,t,n,r,i){e&&t&&n&&(!1!==i||(0,o.b0)(e[t]))&&(e[t]=T(n,r))}function b(e,t,n,r){return e&&t&&(0,o.Gv)(e)&&(0,o.cy)(n)&&(0,u.I)(n,(function(n){(0,o.Kg)(n)&&_(e,n,t,n,r)})),e}function k(e){return function(){var t=this;e&&(0,l.z)(e,(function(e,n){t[e]=n}))}}function R(e){return e&&r.vE&&(e=(0,i.s6)((0,r.vE)({},e))),e}function P(e,t,n,r,i,s){var c=arguments,u=c[0]||{},l=c[h.oI],f=!1,p=1;for(l>0&&(0,o.Lm)(u)&&(f=u,u=c[p]||{},p++),(0,o.Gv)(u)||(u={});p<l;p++){var g=c[p],m=(0,o.cy)(g),v=(0,o.Gv)(g);for(var y in g)if(m&&y in g||v&&(0,a.K)(g,y)){var C=g[y],I=void 0;if(f&&C&&((I=(0,o.cy)(C))||(0,d.Q)(C))){var A=u[y];I?(0,o.cy)(A)||(A=[]):(0,d.Q)(A)||(A={}),C=P(f,A,C)}void 0!==C&&(u[y]=C)}}return u}Object.getPrototypeOf},6492:(e,t,n)=>{"use strict";n.d(t,{Bw:()=>u,Fk:()=>y,HP:()=>r,Hr:()=>c,LZ:()=>o,QW:()=>C,Vo:()=>h,Yd:()=>a,Yp:()=>p,dI:()=>g,eT:()=>s,fc:()=>f,jy:()=>l,kI:()=>v,l0:()=>m,m5:()=>i,qT:()=>d,xW:()=>I});var r=void 0,i="",o="channels",s="core",a="createPerfMgr",c="disabled",u="extensionConfig",l="extensions",d="processTelemetry",h="priority",f="eventsSent",p="eventsDiscarded",g="eventsSendRequest",m="perfEvent",v="getPerfMgr",y="domain",C="path",I="Not dynamic - "},1356:(e,t,n)=>{"use strict";n.d(t,{h:()=>g});var r=n(8279),i=n(636),o=n(4292),s=n(5439),a=n(1636),c=n(6336),u=n(6832),l=n(9622),d=n(6182),h=n(6492),f={perfEvtsSendAll:!1};function p(e,t,n,r){(0,s.I)(e,(function(e){if(e&&e[t])if(n)(0,a.dR)((function(){return r(e)}),0);else try{r(e)}catch(e){}}))}var g=function(){function e(t){var n,s;this.listeners=[];var g=[],m=(0,l.e)(t,f);s=m[d.x6]((function(e){n=!!e.cfg.perfEvtsSendAll})),(0,r.A)(e,this,(function(e){(0,c.vF)(e,"listeners",{g:function(){return g}}),e[d.vR]=function(e){g[d.y5](e)},e[d.TP]=function(e){for(var t=(0,u.r)(g,e);t>-1;)g[d.Ic](t,1),t=(0,u.r)(g,e)},e[h.fc]=function(e){p(g,h.fc,!0,(function(t){t[h.fc](e)}))},e[h.Yp]=function(e,t){p(g,h.Yp,!0,(function(n){n[h.Yp](e,t)}))},e[h.dI]=function(e,t){p(g,h.dI,t,(function(n){n[h.dI](e,t)}))},e[h.l0]=function(e){e&&(!n&&e[d.Zu]()||p(g,h.l0,!1,(function(t){e[d.tI]?(0,a.dR)((function(){return t[h.l0](e)}),0):t[h.l0](e)})))},e[d.M5]=function(e){var t,n=function(){s&&s.rm(),s=null,g=[]};if(p(g,"unload",!1,(function(n){var r=n[d.M5](e);r&&(t||(t=[]),t[d.y5](r))})),t)return(0,i.Qo)((function(e){return(0,o.Dv)((0,i.Xf)(t),(function(){n(),e()}))}));n()}}))}return e.__ieDyn=1,e}()},8156:(e,t,n)=>{"use strict";n.d(t,{NS:()=>p,Q6:()=>f,Z4:()=>v,r2:()=>m});var r=n(8279),i=n(225),o=n(6668),s=n(6336),a=n(6182),c=n(6492),u="ctx",l="ParentContextKey",d="ChildrenContextKey",h=null,f=function(){function e(t,n,r){var c,h=this;h.start=(0,i.f)(),h[a.RS]=t,h[a.tI]=r,h[a.Zu]=function(){return!1},(0,o.Tn)(n)&&(0,s.vF)(h,"payload",{g:function(){return!c&&(0,o.Tn)(n)&&(c=n(),n=null),c}}),h[a.O_]=function(t){return t?t===e[l]||t===e[d]?h[t]:(h[u]||{})[t]:null},h[a.e_]=function(t,n){t&&(t===e[l]?(h[t]||(h[a.Zu]=function(){return!0}),h[t]=n):t===e[d]?h[t]=n:(h[u]=h[u]||{})[t]=n)},h[a.Ru]=function(){var t=0,n=h[a.O_](e[d]);if((0,o.cy)(n))for(var r=0;r<n[a.oI];r++){var s=n[r];s&&(t+=s[a.fA])}h[a.fA]=(0,i.f)()-h.start,h.exTime=h[a.fA]-t,h[a.Ru]=function(){}}}return e.ParentContextKey="parent",e.ChildrenContextKey="childEvts",e}(),p=function(){function e(t){this.ctx={},(0,r.A)(e,this,(function(e){e.create=function(e,t,n){return new f(e,t,n)},e.fire=function(e){e&&(e[a.Ru](),t&&(0,o.Tn)(t[c.l0])&&t[c.l0](e))},e[a.e_]=function(t,n){t&&((e[u]=e[u]||{})[t]=n)},e[a.O_]=function(t){return(e[u]||{})[t]}}))}return e.__ieDyn=1,e}(),g="CoreUtils.doPerf";function m(e,t,n,r,i){if(e){var o=e;if(o[c.kI]&&(o=o[c.kI]()),o){var s=void 0,u=o[a.O_](g);try{if(s=o.create(t(),r,i)){if(u&&s[a.e_]&&(s[a.e_](f[l],u),u[a.O_]&&u[a.e_])){var h=u[a.O_](f[d]);h||(h=[],u[a.e_](f[d],h)),h[a.y5](s)}return o[a.e_](g,s),n(s)}}catch(e){s&&s[a.e_]&&s[a.e_]("exception",e)}finally{s&&o.fire(s),o[a.e_](g,u)}}}return n()}function v(){return h}},2317:(e,t,n)=>{"use strict";n.d(t,{PV:()=>T,W0:()=>E,i8:()=>A,nU:()=>S,tS:()=>w});var r=n(6668),i=n(5439),o=n(8693),s=n(9018),a=n(1324),c=n(991),u=n(9622),l=n(6182),d=n(3775),h=n(3673),f=n(6492),p=n(8156),g=n(380),m="TelemetryPluginChain",v="_hasRun",y="_getTelCtx",C=0;function I(e,t,n,a){var h=null,p=[];t||(t=(0,u.e)({},null,n[l.Uw])),null!==a&&(h=a?function(e,t,n){for(;e;){if(e[l.AP]()===n)return e;e=e[l.uR]()}return T([n],t.config||{},t)}(e,n,a):e);var g={_next:function(){var e=h;if(h=e?e[l.uR]():null,!e){var t=p;t&&t[l.oI]>0&&((0,i.I)(t,(function(e){try{e.func.call(e.self,e.args)}catch(e){(0,d.ZP)(n[l.Uw],2,73,"Unexpected Exception during onComplete - "+(0,o.m)(e))}})),p=[])}return e},ctx:{core:function(){return n},diagLog:function(){return(0,d.y0)(n,t.cfg)},getCfg:function(){return t.cfg},getExtCfg:function(e,n){var i=m(e,!0);return n&&(0,s.z)(n,(function(e,n){if((0,r.hX)(i[e])){var o=t.cfg[e];!o&&(0,r.hX)(o)||(i[e]=o)}(0,c.q)(t,i,e,n)})),t[l.h0](i,n)},getConfig:function(e,n,i){void 0===i&&(i=!1);var o,s=m(e,!1),a=t.cfg;return!s||!s[n]&&(0,r.hX)(s[n])?!a[n]&&(0,r.hX)(a[n])||(o=a[n]):o=s[n],o||!(0,r.hX)(o)?o:i},hasNext:function(){return!!h},getNext:function(){return h},setNext:function(e){h=e},iterate:function(e){for(var t;t=g._next();){var n=t[l.AP]();n&&e(n)}},onComplete:function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];e&&p[l.y5]({func:e,self:(0,r.b0)(t)?g.ctx:t,args:n})}}};function m(e,n){var r=null,i=t.cfg;if(i&&e){var o=i[f.Bw];!o&&n&&(o={}),i[f.Bw]=o,(o=t.ref(i,f.Bw))&&(!(r=o[e])&&n&&(r={}),o[e]=r,r=t.ref(o,e))}return r}return g}function A(e,t,n,i){var o=(0,u.e)(t),s=I(e,o,n,i),a=s.ctx;return a[l.$5]=function(e){var t=s._next();return t&&t[f.qT](e,a),!t},a[l.$o]=function(e,t){return void 0===e&&(e=null),(0,r.cy)(e)&&(e=T(e,o.cfg,n,t)),A(e||a[l.uR](),o.cfg,n,t)},a}function w(e,t,n){var i=(0,u.e)(t.config),o=I(e,i,t,n),s=o.ctx;return s[l.$5]=function(e){var t=o._next();return t&&t[l.M5](s,e),!t},s[l.$o]=function(e,n){return void 0===e&&(e=null),(0,r.cy)(e)&&(e=T(e,i.cfg,t,n)),w(e||s[l.uR](),t,n)},s}function S(e,t,n){var i=(0,u.e)(t.config),o=I(e,i,t,n).ctx;return o[l.$5]=function(e){return o.iterate((function(t){(0,r.Tn)(t[l.HC])&&t[l.HC](o,e)}))},o[l.$o]=function(e,n){return void 0===e&&(e=null),(0,r.cy)(e)&&(e=T(e,i.cfg,t,n)),S(e||o[l.uR](),t,n)},o}function T(e,t,n,s){var c=null,u=!s;if((0,r.cy)(e)&&e[l.oI]>0){var h=null;(0,i.I)(e,(function(e){if(u||s!==e||(u=!0),u&&e&&(0,r.Tn)(e[f.qT])){var i=function(e,t,n){var i,s=null,c=(0,r.Tn)(e[f.qT]),u=(0,r.Tn)(e[l.YH]),h={getPlugin:function(){return e},getNext:function(){return s},processTelemetry:function(i,o){I(o=o||function(){var i;return e&&(0,r.Tn)(e[y])&&(i=e[y]()),i||(i=A(h,t,n)),i}(),(function(t){if(!e||!c)return!1;var n=(0,g.Cr)(e);return!n[l.Ik]&&!n[f.Hr]&&(u&&e[l.YH](s),e[f.qT](i,t),!0)}),"processTelemetry",(function(){return{item:i}}),!i.sync)||o[l.$5](i)},unload:function(t,n){I(t,(function(){var r=!1;if(e){var i=(0,g.Cr)(e),o=e[f.eT]||i[f.eT];!e||o&&o!==t.core()||i[l.Ik]||(i[f.eT]=null,i[l.Ik]=!0,i[l.tZ]=!1,e[l.Ik]&&!0===e[l.Ik](t,n)&&(r=!0))}return r}),"unload",(function(){}),n[l.tI])||t[l.$5](n)},update:function(t,n){I(t,(function(){var r=!1;if(e){var i=(0,g.Cr)(e),o=e[f.eT]||i[f.eT];!e||o&&o!==t.core()||i[l.Ik]||e[l.HC]&&!0===e[l.HC](t,n)&&(r=!0)}return r}),"update",(function(){}),!1)||t[l.$5](n)},_id:i=e?e[l.Ju]+"-"+e[f.Vo]+"-"+C++:"Unknown-0-"+C++,_setNext:function(e){s=e}};function I(t,n,r,a,c){var u=!1,h=e?e[l.Ju]:m,g=t[v];return g||(g=t[v]={}),t.setNext(s),e&&(0,p.r2)(t[f.eT](),(function(){return h+":"+r}),(function(){g[i]=!0;try{var e=s?s._id:f.m5;e&&(g[e]=!1),u=n(t)}catch(e){var a=!s||g[s._id];a&&(u=!0),s&&a||(0,d.ZP)(t[l.e4](),1,73,"Plugin ["+h+"] failed during "+r+" - "+(0,o.m)(e)+", run flags: "+(0,o.m)(g))}}),a,c),u}return(0,a.N6)(h)}(e,t,n);c||(c=i),h&&h._setNext(i),h=i}}))}return s&&!c?T([s],t,n):c}var E=function(e,t,n,r){var i=A(e,t,n,r);(0,h.o$)(this,i,(0,a.cG)(i))}},6535:(e,t,n)=>{"use strict";n.d(t,{Si:()=>v,VN:()=>m,Z1:()=>g});var r=n(225),i=n(6182),o=n(7292),s=n(6492),a=4294967296,c=4294967295,u=123456789,l=987654321,d=!1,h=u,f=l;function p(){try{var e=2147483647&(0,r.f)();(t=(Math.random()*a^e)+e)<0&&(t>>>=0),h=u+t&c,f=l-t&c,d=!0}catch(e){}var t}function g(e){return e>0?Math.floor(m()/c*(e+1))>>>0:0}function m(e){var t=0,n=(0,o.MY)()||(0,o.iN)();return n&&n.getRandomValues&&(t=n.getRandomValues(new Uint32Array(1))[0]&c),0===t&&(0,o.lT)()&&(d||p(),t=function(e){var t=((f=36969*(65535&f)+(f>>16)&c)<<16)+(65535&(h=18e3*(65535&h)+(h>>16)&c))>>>0&c;return t>>>=0}()&c),0===t&&(t=Math.floor(a*Math.random()|0)),e||(t>>>=0),t}function v(e){void 0===e&&(e=22);for(var t=m()>>>0,n=0,r=s.m5;r[i.oI]<e;)n++,r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(63&t),t>>>=6,5===n&&(t=(m()<<2&4294967295|3&t)>>>0,n=0);return r}},380:(e,t,n)=>{"use strict";n.d(t,{Cr:()=>u,Xc:()=>d,pI:()=>l,u7:()=>h});var r=n(5439),i=n(6182),o=n(4276),s=n(6492),a=n(1864),c=(0,o.T)("plugin");function u(e){return c.get(e,"state",{},!0)}function l(e,t){for(var n,o=[],a=null,c=e[i.uR]();c;){var l=c[i.AP]();if(l){a&&a[i.YH]&&l[s.qT]&&a[i.YH](l);var d=!!(n=u(l))[i.tZ];l[i.tZ]&&(d=l[i.tZ]()),d||o[i.y5](l),a=l,c=c[i.uR]()}}(0,r.I)(o,(function(r){var o=e[s.eT]();r[i.mE](e.getCfg(),o,t,e[i.uR]()),n=u(r),r[s.eT]||n[s.eT]||(n[s.eT]=o),n[i.tZ]=!0,delete n[i.Ik]}))}function d(e){return e.sort((function(e,t){var n=0;if(t){var r=t[s.qT];e[s.qT]?n=r?e[s.Vo]-t[s.Vo]:1:r&&(n=-1)}else n=e?1:-1;return n}))}function h(e){var t={};return{getName:function(){return t[i.RS]},setName:function(n){e&&e.setName(n),t[i.RS]=n},getTraceId:function(){return t[i.P5]},setTraceId:function(n){e&&e.setTraceId(n),(0,a.hX)(n)&&(t[i.P5]=n)},getSpanId:function(){return t[i.wi]},setSpanId:function(n){e&&e.setSpanId(n),(0,a.wN)(n)&&(t[i.wi]=n)},getTraceFlags:function(){return t[i.Rr]},setTraceFlags:function(n){e&&e.setTraceFlags(n),t[i.Rr]=n}}}},836:(e,t,n)=>{"use strict";n.d(t,{P:()=>a});var r=n(5439),i=n(8693),o=n(6182),s=n(3775);function a(){var e=[];return{add:function(t){t&&e[o.y5](t)},run:function(t,n){(0,r.I)(e,(function(e){try{e(t,n)}catch(e){(0,s.ZP)(t[o.e4](),2,73,"Unexpected error calling unload handler - "+(0,i.m)(e))}})),e=[]}}}},8969:(e,t,n)=>{"use strict";n.d(t,{w:()=>a});var r=n(5439),i=n(8693),o=n(1187),s=n(3775);function a(){var e=[];return{run:function(t){var n=e;e=[],(0,r.I)(n,(function(e){try{(e.rm||e.remove).call(e)}catch(e){(0,s.ZP)(t,2,73,"Unloading:"+(0,i.m)(e))}}))},add:function(t){t&&(0,o.Y)(e,t)}}}},1864:(e,t,n)=>{"use strict";n.d(t,{L0:()=>E,N7:()=>T,ZI:()=>I,ef:()=>_,hX:()=>A,mJ:()=>S,wN:()=>w,wk:()=>C});var r=n(3178),i=n(6668),o=n(8993),s=n(6182),a=n(9882),c=n(7292),u=n(6492),l=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]{1,64})?$/i,d="00",h="ff",f="00000000000000000000000000000000",p="0000000000000000",g=1;function m(e,t,n){return!(!e||e[s.oI]!==t||e===n||!e.match(/^[\da-f]*$/i))}function v(e,t,n){return m(e,t)?e:n}function y(e){(isNaN(e)||e<0||e>255)&&(e=1);for(var t=e.toString(16);t[s.oI]<2;)t="0"+t;return t}function C(e,t,n,i){var o;return(o={})[s.s]=m(i,2,h)?i:d,o[s.P5]=A(e)?e:(0,a.cL)(),o[s.wi]=w(t)?t:(0,r.ZW)((0,a.cL)(),16),o.traceFlags=n>=0&&n<=255?n:1,o}function I(e,t){var n;if(!e)return null;if((0,i.cy)(e)&&(e=e[0]||""),!e||!(0,i.Kg)(e)||e[s.oI]>8192)return null;if(-1!==e.indexOf(",")){var r=e[s.sY](",");e=r[t>0&&r[s.oI]>t?t:0]}var a=l.exec((0,o.EH)(e));return a&&a[1]!==h&&a[2]!==f&&a[3]!==p?((n={version:(a[1]||u.m5)[s.OL](),traceId:(a[2]||u.m5)[s.OL](),spanId:(a[3]||u.m5)[s.OL]()})[s.Rr]=parseInt(a[4],16),n):null}function A(e){return m(e,32,f)}function w(e){return m(e,16,p)}function S(e){return!!(e&&m(e[s.s],2,h)&&m(e[s.P5],32,f)&&m(e[s.wi],16,p)&&m(y(e[s.Rr]),2))}function T(e){return!!S(e)&&(e[s.Rr]&g)===g}function E(e){if(e){var t=y(e[s.Rr]);m(t,2)||(t="01");var n=e[s.s]||d;return"00"!==n&&"ff"!==n&&(n=d),"".concat(n.toLowerCase(),"-").concat(v(e.traceId,32,f).toLowerCase(),"-").concat(v(e.spanId,16,p).toLowerCase(),"-").concat(t.toLowerCase())}return""}function _(e){var t="traceparent",n=I((0,c.$Z)(t),e);return n||(n=I((0,c.Iu)(t),e)),n}},6182:(e,t,n)=>{"use strict";n.d(t,{$5:()=>E,$o:()=>L,AP:()=>A,Bl:()=>D,Di:()=>O,HC:()=>B,Ic:()=>g,Ik:()=>U,JQ:()=>i,JR:()=>F,Ju:()=>C,K0:()=>m,M5:()=>M,OL:()=>r,O_:()=>ee,P5:()=>re,QM:()=>J,RF:()=>b,RS:()=>S,Rr:()=>oe,Ru:()=>ne,TP:()=>R,Uw:()=>h,W7:()=>Y,XM:()=>P,XW:()=>s,YH:()=>K,Yo:()=>X,Zu:()=>Z,_w:()=>v,by:()=>x,e4:()=>z,e_:()=>te,fA:()=>T,h0:()=>l,h4:()=>w,ih:()=>u,mE:()=>y,oI:()=>o,on:()=>c,pM:()=>q,ps:()=>_,re:()=>W,s:()=>N,sY:()=>G,sx:()=>Q,tI:()=>H,tX:()=>V,tZ:()=>I,tn:()=>j,uR:()=>$,vR:()=>k,wi:()=>ie,x6:()=>d,y5:()=>p,y9:()=>f,zs:()=>a});var r="toLowerCase",i="blkVal",o="length",s="rdOnly",a="notify",c="warnToConsole",u="throwInternal",l="setDf",d="watch",h="logger",f="apply",p="push",g="splice",m="hdlr",v="cancel",y="initialize",C="identifier",I="isInitialized",A="getPlugin",w="pollInternalLogs",S="name",T="time",E="processNext",_="getProcessTelContext",b="getNotifyMgr",k="addNotificationListener",R="removeNotificationListener",P="enabled",O="stopPollingInternalLogs",M="unload",x="onComplete",N="version",D="loggingLevelConsole",L="createNew",U="teardown",F="messageId",q="message",H="isAsync",z="diagLog",j="_doTeardown",B="update",$="getNext",K="setNextPlugin",V="userAgent",G="split",W="nodeType",Y="replace",Q="logInternalMessage",J="type",X="handler",Z="isChildEvt",ee="getCtx",te="setCtx",ne="complete",re="traceId",ie="spanId",oe="traceFlags"},5664:(e,t,n)=>{"use strict";n.d(t,{Wy:()=>c,_1:()=>i,bA:()=>o,hW:()=>r,s6:()=>a,vR:()=>s});var r="function",i="object",o="undefined",s="prototype",a=Object,c=a[s]},659:(e,t,n)=>{"use strict";n.d(t,{Im:()=>u,qU:()=>d,vz:()=>h});var r=n(3076),i=n(1324),o=n(3517),s=n(411),a=n(5664),c=(((0,r.mS)()||{}).Symbol,((0,r.mS)()||{}).Reflect,"hasOwnProperty"),u=i.vE||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])a.Wy[c].call(t,i)&&(e[i]=t[i]);return e},l=function(e,t){return l=a.s6.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t[c](n)&&(e[n]=t[n])},l(e,t)};function d(e,t){function n(){this.constructor=e}typeof t!==a.hW&&null!==t&&(0,o.zk)("Class extends value "+String(t)+" is not a constructor or null"),l(e,t),e[a.vR]=null===t?(0,s.s)(t):(n[a.vR]=t[a.vR],new n)}function h(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e}},1380:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AppInsightsCore:()=>vt._,ApplicationInsights:()=>St,Sender:()=>gt,SeverityLevel:()=>At.O,arrForEach:()=>E.I,isNullOrUndefined:()=>k.hX,proxyFunctions:()=>C.o$,throwError:()=>yt.$8});var r=n(8279),i=n(659),o=n(5025),s=n(3072),a=n(2445),c=n(1448),u=n(4164),l=n(5397),d=n(5014),h=n(1365),f=n(740),p=n(4658),g=n(2318),m=n(2910),v=n(2475),y=n(3775),C=n(3673),I=n(8693),A=n(6149),w=n(4276),S=n(9622),T=n(2317),E=n(5439),_=n(7292),b=n(4013),k=n(6668),R=n(3076),P=n(1324),O=n(225),M=n(8257),x=n(636),N=n(4292),D=n(6336),L=n(1636),U=n(1575),F=n(7975),q=n(1062),H=n(7358),z=n(9018),j="duration",B="tags",$="deviceType",K="data",V="name",G="traceID",W="length",Y="stringify",Q="measurements",J="dataType",X="envelopeType",Z="toString",ee="onLine",te="isOnline",ne="_get",re="enqueue",ie="count",oe="eventsLimitInMem",se="push",ae="emitLineDelimitedJson",ce="clear",ue="batchPayloads",le="createNew",de="markAsSent",he="clearSent",fe="bufferOverride",pe="BUFFER_KEY",ge="SENT_BUFFER_KEY",me="MAX_BUFFER_SIZE",ve="sendPOST",ye="triggerSend",Ce="diagLog",Ie="_sender",Ae="customHeaders",we="maxBatchSizeInBytes",Se="onunloadDisableBeacon",Te="isBeaconApiDisabled",Ee="alwaysUseXhrOverride",_e="enableSessionStorageBuffer",be="_buffer",ke="onunloadDisableFetch",Re="instrumentationKey",Pe="convertUndefined",Oe="maxBatchInterval",Me="baseType",xe="sampleRate",Ne="_onError",De="_onPartialSuccess",Le="_onSuccess",Ue="itemsAccepted",Fe="oriPayload",qe="setRequestHeader",He="eventsSendRequest",ze="getSamplingScore",je="baseType",Be="baseData",$e="properties",Ke="true";function Ve(e,t,n){return(0,C.KY)(e,t,n,k.zz)}function Ge(e,t,n){(0,k.hX)(e)||(0,z.z)(e,(function(e,r){(0,k.Et)(r)?n[e]=r:(0,k.Kg)(r)?t[e]=r:(0,_.Z)()&&(t[e]=(0,_.hm)()[Y](r))}))}function We(e,t){(0,k.hX)(e)||(0,z.z)(e,(function(n,r){e[n]=r||t}))}function Ye(e,t,n,r){var s=new q.L(e,r,t);Ve(s,"sampleRate",n[o.tU]),(n[Be]||{}).startTime&&(s.time=(0,C._u)(n[Be].startTime)),s.iKey=n.iKey;var a=n.iKey.replace(/-/g,"");return s[V]=s[V].replace("{0}",a),function(e,t,n){var r=n[B]=n[B]||{},o=t.ext=t.ext||{},s=t[B]=t[B]||[],a=o.user;a&&(Ve(r,U.O.userAuthUserId,a.authId),Ve(r,U.O.userId,a.id||a.localId));var c=o.app;c&&Ve(r,U.O.sessionId,c.sesId);var u=o.device;u&&(Ve(r,U.O.deviceId,u.id||u.localId),Ve(r,U.O[$],u.deviceClass),Ve(r,U.O.deviceIp,u.ip),Ve(r,U.O.deviceModel,u.model),Ve(r,U.O[$],u[$]));var l=t.ext.web;if(l){Ve(r,U.O.deviceLanguage,l.browserLang),Ve(r,U.O.deviceBrowserVersion,l.browserVer),Ve(r,U.O.deviceBrowser,l.browser);var d=n[K]=n[K]||{},h=d[Be]=d[Be]||{},f=h[$e]=h[$e]||{};Ve(f,"domain",l.domain),Ve(f,"isManual",l.isManual?Ke:null),Ve(f,"screenRes",l.screenRes),Ve(f,"userConsent",l.userConsent?Ke:null)}var p=o.os;p&&Ve(r,U.O.deviceOS,p[V]);var g=o.trace;g&&(Ve(r,U.O.operationParentId,g.parentID),Ve(r,U.O.operationName,(0,F.Rr)(e,g[V])),Ve(r,U.O.operationId,g[G]));for(var m={},v=s[W]-1;v>=0;v--){var y=s[v];(0,z.z)(y,(function(e,t){m[e]=t})),s.splice(v,1)}(0,z.z)(s,(function(e,t){m[e]=t}));var I=(0,i.Im)((0,i.Im)({},r),m);I[U.O.internalSdkVersion]||(I[U.O.internalSdkVersion]=(0,F.Rr)(e,"javascript:".concat(Je.Version),64)),n[B]=(0,C.hW)(I)}(e,n,s),n[B]=n[B]||[],(0,C.hW)(s)}function Qe(e,t){(0,k.hX)(t[Be])&&(0,y.ZP)(e,1,46,"telemetryItem.baseData cannot be null.")}var Je={Version:"3.0.4"};function Xe(e,t,n){Qe(e,t);var r={},i={};t[je]!==s.J[J]&&(r.baseTypeSource=t[je]),t[je]===s.J[J]?(r=t[Be][$e]||{},i=t[Be][Q]||{}):t[Be]&&Ge(t[Be],r,i),Ge(t[K],r,i),(0,k.hX)(n)||We(r,n);var o=t[Be][V],a=new s.J(e,o,r,i),c=new H.B(s.J[J],a);return Ye(e,s.J[X],t,c)}function Ze(e,t){(0,A.ML)(e,null,null,t)}var et,tt,nt=n(6832),rt=function(){function e(t,n){var i=[],o=!1;this[ne]=function(){return i},this._set=function(e){return i=e},(0,r.A)(e,this,(function(e){e[re]=function(r){e[ie]()>=n[oe]?o||((0,y.ZP)(t,2,105,"Maximum in-memory buffer size reached: "+e[ie](),!0),o=!0):i[se](r)},e[ie]=function(){return i[W]},e.size=function(){for(var e=i[W],t=0;t<i[W];t++)e+=i[t][W];return n[ae]||(e+=2),e},e[ce]=function(){i=[],o=!1},e.getItems=function(){return i.slice(0)},e[ue]=function(e){return e&&e[W]>0?n[ae]?e.join("\n"):"["+e.join(",")+"]":null},e[le]=function(e,n,r){var o=i.slice(0);e=e||t,n=n||{};var s=r?new ot(e,n):new it(e,n);return(0,E.I)(o,(function(e){s[re](e)})),s}}))}return e.__ieDyn=1,e}(),it=function(e){function t(n,i){var o=e.call(this,n,i)||this;return(0,r.A)(t,o,(function(e,t){e[de]=function(e){t[ce]()},e[he]=function(e){}})),o}return(0,i.qU)(t,e),t.__ieDyn=1,t}(rt),ot=function(e){function t(n,i){var o=e.call(this,n,i)||this,s=!1,a=null==i?void 0:i.namePrefix,c=i[fe]||{getItem:p.vH,setItem:p.Dt},u=c.getItem,l=c.setItem;return(0,r.A)(t,o,(function(e,r){var i=h(t[pe]),o=h(t[ge]),c=e._set(i.concat(o));function d(e,t){var n=[];return(0,E.I)(t,(function(t){(0,k.Tn)(t)||-1!==(0,nt.r)(e,t)||n[se](t)})),n}function h(e){var t=e;try{var r=u(n,t=a?a+"_"+t:t);if(r){var i=(0,_.hm)().parse(r);if((0,k.Kg)(i)&&(i=(0,_.hm)().parse(i)),i&&(0,k.cy)(i))return i}}catch(e){(0,y.ZP)(n,1,42," storage key: "+t+", "+(0,C.lL)(e),{exception:(0,I.m)(e)})}return[]}function f(e,t){var r=e;try{r=a?a+"_"+r:r;var i=JSON[Y](t);l(n,r,i)}catch(e){l(n,r,JSON[Y]([])),(0,y.ZP)(n,2,41," storage key: "+r+", "+(0,C.lL)(e)+". Buffer cleared",{exception:(0,I.m)(e)})}}c[W]>t[me]&&(c[W]=t[me]),f(t[ge],[]),f(t[pe],c),e[re]=function(i){e[ie]()>=t[me]?s||((0,y.ZP)(n,2,67,"Maximum buffer size reached: "+e[ie](),!0),s=!0):(r[re](i),f(t.BUFFER_KEY,e[ne]()))},e[ce]=function(){r[ce](),f(t.BUFFER_KEY,e[ne]()),f(t[ge],[]),s=!1},e[de]=function(r){f(t[pe],e._set(d(r,e[ne]())));var i=h(t[ge]);i instanceof Array&&r instanceof Array&&((i=i.concat(r))[W]>t[me]&&((0,y.ZP)(n,1,67,"Sent buffer reached its maximum size: "+i[W],!0),i[W]=t[me]),f(t[ge],i))},e[he]=function(e){var n=h(t[ge]);n=d(e,n),f(t[ge],n)},e[le]=function(r,i,o){o=!!o;var s=e[ne]().slice(0),a=h(t[ge]).slice(0);r=r||n,i=i||{},e[ce]();var c=o?new t(r,i):new it(r,i);return(0,E.I)(s,(function(e){c[re](e)})),o&&c[de](a),c}})),o}return(0,i.qU)(t,e),t.BUFFER_KEY="AI_buffer",t.SENT_BUFFER_KEY="AI_sentBuffer",t.MAX_BUFFER_SIZE=2e3,t}(rt),st=function(){function e(t){(0,r.A)(e,this,(function(e){function n(e,o){var s="__aiCircularRefCheck",a={};if(!e)return(0,y.ZP)(t,1,48,"cannot serialize object because it is null or undefined",{name:o},!0),a;if(e[s])return(0,y.ZP)(t,2,50,"Circular reference detected while serializing object",{name:o},!0),a;if(!e.aiDataContract){if("measurements"===o)a=i(e,"number",o);else if("properties"===o)a=i(e,"string",o);else if("tags"===o)a=i(e,"string",o);else if((0,k.cy)(e))a=r(e,o);else{(0,y.ZP)(t,2,49,"Attempting to serialize an object which does not implement ISerializable",{name:o},!0);try{(0,_.hm)()[Y](e),a=e}catch(e){(0,y.ZP)(t,1,48,e&&(0,k.Tn)(e[Z])?e[Z]():"Error serializing object",null,!0)}}return a}return e[s]=!0,(0,z.z)(e.aiDataContract,(function(i,s){var c=(0,k.Tn)(s)?1&s():1&s,u=(0,k.Tn)(s)?4&s():4&s,l=2&s,d=void 0!==e[i],h=(0,k.Gv)(e[i])&&null!==e[i];if(!c||d||l){if(!u){var f;void 0!==(f=h?l?r(e[i],i):n(e[i],i):e[i])&&(a[i]=f)}}else(0,y.ZP)(t,1,24,"Missing required field specification. The field is required but not present on source",{field:i,name:o})})),delete e[s],a}function r(e,r){var i;if(e)if((0,k.cy)(e)){i=[];for(var o=0;o<e[W];o++){var s=n(e[o],r+"["+o+"]");i[se](s)}}else(0,y.ZP)(t,1,54,"This field was specified as an array in the contract but the item is not an array.\r\n",{name:r},!0);return i}function i(e,n,r){var i;return e&&(i={},(0,z.z)(e,(function(e,o){if("string"===n)void 0===o?i[e]="undefined":null===o?i[e]="null":o[Z]?i[e]=o[Z]():i[e]="invalid field: toString() is not defined.";else if("number"===n)if(void 0===o)i[e]="undefined";else if(null===o)i[e]="null";else{var s=parseFloat(o);isNaN(s)?i[e]="NaN":i[e]=s}else i[e]="invalid field: "+r+" is of unknown type.",(0,y.ZP)(t,1,i[e],null,!0)}))),i}e.serialize=function(e){var r=n(e,"root");try{return(0,_.hm)()[Y](r)}catch(e){(0,y.ZP)(t,1,48,e&&(0,k.Tn)(e[Z])?e[Z]():"Error serializing object",null,!0)}}}))}return e.__ieDyn=1,e}(),at=n(8596),ct=function(){function e(){}return e.prototype.getHashCodeScore=function(t){return this.getHashCode(t)/e.INT_MAX_VALUE*100},e.prototype.getHashCode=function(e){if(""===e)return 0;for(;e[W]<8;)e=e.concat(e);for(var t=5381,n=0;n<e[W];++n)t=(t<<5)+t+e.charCodeAt(n),t|=0;return Math.abs(t)},e.INT_MAX_VALUE=2147483647,e}(),ut=function(){var e=new ct,t=new at.o;this[ze]=function(n){return n[B]&&n[B][t.userId]?e.getHashCodeScore(n[B][t.userId]):n.ext&&n.ext.user&&n.ext.user.id?e.getHashCodeScore(n.ext.user.id):n[B]&&n[B][t.operationId]?e.getHashCodeScore(n[B][t.operationId]):n.ext&&n.ext.telemetryTrace&&n.ext.telemetryTrace[G]?e.getHashCodeScore(n.ext.telemetryTrace[G]):100*Math.random()}},lt=function(){function e(e,t){this.INT_MAX_VALUE=2147483647;var n=t||(0,y.y0)(null);(e>100||e<0)&&(n.throwInternal(2,58,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:e},!0),e=100),this[xe]=e,this.samplingScoreGenerator=new ut}return e.prototype.isSampledIn=function(e){var t=this[xe];return null==t||t>=100||e.baseType===d.J[J]||this.samplingScoreGenerator[ze](e)<t},e}(),dt=void 0;function ht(e){try{return e.responseText}catch(e){}return null}var ft=(0,P.ZH)(((et={endpointUrl:(0,v.Lx)(k.zz,o._G+o.wc)})[ae]=(0,v.DD)(),et[Oe]=15e3,et[we]=102400,et.disableTelemetry=(0,v.DD)(),et[_e]=(0,v.DD)(!0),et.isRetryDisabled=(0,v.DD)(),et[Te]=(0,v.DD)(!0),et.disableXhr=(0,v.DD)(),et[ke]=(0,v.DD)(),et[Se]=(0,v.DD)(),et[Re]=dt,et.namePrefix=dt,et.samplingPercentage=(0,v.Lx)((function(e){return!isNaN(e)&&e>0&&e<=100}),100),et[Ae]=dt,et[Pe]=dt,et[oe]=1e4,et[fe]=!1,et.httpXHROverride={isVal:function(e){return e&&e[ve]},v:dt},et[Ee]=(0,v.DD)(),et)),pt=((tt={})[s.J.dataType]=Xe,tt[a.C.dataType]=function(e,t,n){Qe(e,t);var r=t[Be].message,i=t[Be].severityLevel,o=t[Be][$e]||{},s=t[Be][Q]||{};Ge(t[K],o,s),(0,k.hX)(n)||We(o,n);var c=new a.C(e,r,i,o,s),u=new H.B(a.C[J],c);return Ye(e,a.C[X],t,u)},tt[c.h.dataType]=function(e,t,n){var r;Qe(e,t);var i=t[Be];(0,k.hX)(i)||(0,k.hX)(i[$e])||(0,k.hX)(i[$e][j])?(0,k.hX)(t[K])||(0,k.hX)(t[K][j])||(r=t[K][j],delete t[K][j]):(r=i[$e][j],delete i[$e][j]);var o,s=t[Be];((t.ext||{}).trace||{})[G]&&(o=t.ext.trace[G]);var a=s.id||o,u=s[V],l=s.uri,d=s[$e]||{},h=s[Q]||{};if((0,k.hX)(s.refUri)||(d.refUri=s.refUri),(0,k.hX)(s.pageType)||(d.pageType=s.pageType),(0,k.hX)(s.isLoggedIn)||(d.isLoggedIn=s.isLoggedIn[Z]()),!(0,k.hX)(s[$e])){var f=s[$e];(0,z.z)(f,(function(e,t){d[e]=t}))}Ge(t[K],d,h),(0,k.hX)(n)||We(d,n);var p=new c.h(e,u,l,r,d,h,a),g=new H.B(c.h[J],p);return Ye(e,c.h[X],t,g)},tt[u.H.dataType]=function(e,t,n){Qe(e,t);var r=t[Be],i=r[V],o=r.uri||r.url,s=r[$e]||{},a=r[Q]||{};Ge(t[K],s,a),(0,k.hX)(n)||We(s,n);var c=new u.H(e,i,o,void 0,s,a,r),l=new H.B(u.H[J],c);return Ye(e,u.H[X],t,l)},tt[l.WJ.dataType]=function(e,t,n){Qe(e,t);var r=t[Be][Q]||{},i=t[Be][$e]||{};Ge(t[K],i,r),(0,k.hX)(n)||We(i,n);var o=t[Be],s=l.WJ.CreateFromInterface(e,o,i,r),a=new H.B(l.WJ[J],s);return Ye(e,l.WJ[X],t,a)},tt[d.J.dataType]=function(e,t,n){Qe(e,t);var r=t[Be],i=r[$e]||{},o=r[Q]||{};Ge(t[K],i,o),(0,k.hX)(n)||We(i,n);var s=new d.J(e,r[V],r.average,r.sampleCount,r.min,r.max,r.stdDev,i,o),a=new H.B(d.J[J],s);return Ye(e,d.J[X],t,a)},tt[h.A.dataType]=function(e,t,n){Qe(e,t);var r=t[Be][Q]||{},i=t[Be][$e]||{};Ge(t[K],i,r),(0,k.hX)(n)||We(i,n);var s=t[Be];if((0,k.hX)(s))return(0,y.OG)(e,"Invalid input for dependency data"),null;var a=s[$e]&&s[$e][o.ym]?s[$e][o.ym]:"GET",c=new h.A(e,s.id,s.target,s[V],s[j],s.success,s.responseCode,a,s.type,s.correlationContext,i,r),u=new H.B(h.A[J],c);return Ye(e,h.A[X],t,u)},tt),gt=function(e){function t(){var n,i,s,a,c,u,l,d=e.call(this)||this;d.priority=1001,d.identifier=f.BreezeChannelIdentifier;var h,v,M,U,F,q,H,z,j,$,V,G,Y,Q,J,X,Z,ne,oe,ae,pe,ge=0;return(0,r.A)(t,d,(function(e,r){function f(e,t){for(var n,r=null,i=null,o=0;null==i&&o<e[W];)r=e[o],oe||1!==r?2===r&&(0,_.R7)(t)?i=Be:(0,_.Uf)()&&3===r&&(i=Qe):(0,_.PV)()?i=pt:(0,_.xk)()&&(i=Je),o++;return i?((n={})[ve]=i,n):null}function me(t,n,r,i){200===n&&t&&e._onSuccess(t,t[W]),i&&e[Ne](t,i)}function ze(t,n,r){var i=je(n),o=t&&t[ve];return o&&i?(e._buffer[de](n),o(i,(function(e,t,r){return me(n,e,0,r)}),!r)):null}function je(t){var n;if((0,k.cy)(t)&&t[W]>0){var r=e._buffer[ue](t);return(n={})[K]=r,n.urlString=U,n.headers=l,n.disableXhrSync=oe,n.disableFetchKeepAlive=!ae,n[Fe]=t,n}return null}function Be(e,t,n){return et(e,t,!1)}function $e(t){var n=t?t[W]:0;return e[be].size()+n>q&&(v&&!v[te]()||e[ye](!0,null,10),!0)}function Ke(t,r,i,o,s,a){var c=null;if(e._appId||(c=tt(a))&&c.appId&&(e._appId=c.appId),(t<200||t>=300)&&0!==t){if((301===t||307===t||308===t)&&!Ve(i))return void e[Ne](r,s);!G&&ct(t)?(nt(r),(0,y.ZP)(e[Ce](),2,40,". Response code "+t+". Will retry to send "+r[W]+" items.")):e[Ne](r,s)}else v&&!v[te]()?G||(nt(r,10),(0,y.ZP)(e[Ce](),2,40,". Offline - Response Code: ".concat(t,". Offline status: ").concat(!v.isOnline(),". Will retry to send ").concat(r.length," items."))):(Ve(i),206===t?(c||(c=tt(a)),c&&!G?e[De](r,c):e[Ne](r,s)):(n=0,e[Le](r,o)))}function Ve(e){return!(u>=10||(0,k.hX)(e)||""===e||e===U||(U=e,++u,0))}function Ge(e,t,n,r){try{e(t,n,r)}catch(e){}}function We(e,t){h?h(e,!1):Qe(je(e),(function(t,n,r){return me(e,t,0,r)}))}function Ye(e,t){var n=(0,R.w3)(),r=U,i=new Blob([e],{type:"text/plain;charset=UTF-8"}),o=n.sendBeacon(r,i);return o&&t(200,{},e),o}function Qe(t,n,r){var i=t,o=i&&i[K];if((0,k.Kg)(o)&&o[W]>0&&!Ye(o,n)){var s=[];if(i[Fe][W]>0)for(var a=0;a<o[W];a++){var c=t[a];Ye(e._buffer[ue](c),n)||s[se](c)}s[W]>0&&(pe&&pe(s,!0),(0,y.ZP)(e[Ce](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}function Je(t,n,r){var i,s,a,c=t,u=new XMLHttpRequest,d=U;try{u[o.xF]=!0}catch(e){}return u.open("POST",d,!r),u[qe]("Content-type","application/json"),(0,g.Qu)(d)&&u[qe](m.a[6],m.a[7]),(0,E.I)((0,P.cG)(l),(function(e){u[qe](e,l[e])})),u.onreadystatechange=function(){var t=c[Fe];e._xhrReadyStateChange(u,t,t[W]),4===u.readyState&&s&&s(!0)},u.onerror=function(e){Ge(n,400,{},ut(u)),a&&a(e)},!r&&Z&&(i=(0,x.Qo)((function(e,t){s=e,a=t}))),u.send(t[K]),i}function Xe(t,n){var r=function(e,n,r){return me(t,e,0,r)};if((0,k.cy)(t)){for(var i=t[W],o=0;o<t[W];o++)i+=t[o][W];var s=je(t);ge+i<=65e3?et(s,r,!0):(0,_.Uf)()?Qe(s,r):(pe&&pe(t,!0),(0,y.ZP)(e[Ce](),2,40,". Failed to send telemetry with Beacon API, retried with xhrSender."))}}function et(e,t,n){var r,i,s,a,c=U,u=e,d=u[K],h=new Blob([d],{type:"application/json"}),f=new Headers,p=d[W],v=!1,y=!1;(0,g.Qu)(c)&&f.append(m.a[6],m.a[7]),(0,E.I)((0,P.cG)(l),(function(e){f.append(e,l[e])}));var C=((r={method:"POST",headers:f,body:h})[o.xF]=!0,r);n&&(C.keepalive=!0,v=!0,ge+=p);var A=new Request(c,C);try{A[o.xF]=!0}catch(e){}!n&&Z&&(i=(0,x.Qo)((function(e,t){s=e,a=t})));try{(0,N.Dv)(fetch(A),(function(e){if(n&&(ge-=p,p=0),!y)if(y=!0,e.rejected)Ge(t,400,{},e.reason&&e.reason.message),a&&a(e.reason);else{var r=e.value;r.ok?(0,N.Dv)(r.text(),(function(e){var t=u[Fe];Ke(r.status,t,r.url,t[W],r.statusText,e.value||""),s&&s(!0)})):(Ge(t,400,{},r.statusText),s&&s(!1))}}))}catch(e){y||(Ge(t,400,{},(0,I.m)(e)),a&&a(e))}return v&&!y&&(y=!0,Ge(t,200,{}),s&&s(!0)),i}function tt(t){try{if(t&&""!==t){var n=(0,_.hm)().parse(t);if(n&&n.itemsReceived&&n.itemsReceived>=n[Ue]&&n.itemsReceived-n.itemsAccepted===n.errors[W])return n}}catch(n){(0,y.ZP)(e[Ce](),1,43,"Cannot parse the response. "+(0,C.lL)(n),{response:t})}return null}function nt(t,r){if(void 0===r&&(r=1),t&&0!==t[W]){var o=e[be];o[he](t),n++;for(var s=0,a=t;s<a.length;s++){var c=a[s];o[re](c)}!function(e){var t;if(n<=1)t=10;else{var r=(Math.pow(2,n)-1)/2,o=Math.floor(Math.random()*r*10)+1;o*=e,t=Math.max(Math.min(o,3600),10)}var s=(0,O.f)()+1e3*t;i=s}(r),rt()}}function rt(){if(!a&&!s){var t=i?Math.max(0,i-(0,O.f)()):0,n=Math.max(Y,t);a=(0,L.dR)((function(){a=null,e[ye](!0,null,1)}),n)}}function at(){a&&a.cancel(),a=null,i=null}function ct(e){return 401===e||403===e||408===e||429===e||500===e||502===e||503===e||504===e}function ut(e,t){return e?"XMLHttpRequest,Status:"+e.status+",Response:"+ht(e)||0:t}function pt(t,n,r){var i=t,o=(0,R.zk)(),s=new XDomainRequest,a=i[K];s.onload=function(){var t=i[Fe];e._xdrOnLoad(s,t)},s.onerror=function(){Ge(n,400,{},gt(s))};var c=o&&o.location&&o.location.protocol||"";if(0!==U.lastIndexOf(c,0))return(0,y.ZP)(e[Ce](),2,40,". Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol."),void e._buffer[ce]();var u=U.replace(/^(https?:)/,"");s.open("POST",u),s.send(a)}function gt(e,t){return e?"XDomainRequest,Response:"+ht(e)||0:t}function mt(){e[Ie]=null,e[be]=null,e._appId=null,e._sample=null,l={},v=null,n=0,i=null,s=!1,a=null,c=null,u=0,ge=0,h=null,M=null,U=null,F=null,q=0,H=!1,z=null,j=!1,$=null,V=dt,G=!1,Q=null,X=dt,oe=!1,ae=!1,pe=null,(0,D.vF)(e,"_senderConfig",{g:function(){return(0,C.CP)({},ft)}})}mt(),e.pause=function(){at(),s=!0},e.resume=function(){s&&(s=!1,i=null,$e(),rt())},e.flush=function(t,n,r){if(void 0===t&&(t=!0),!s){at();try{return e[ye](t,null,r||1)}catch(t){(0,y.ZP)(e[Ce](),1,22,"flush failed, telemetry will not be collected: "+(0,C.lL)(t),{exception:(0,I.m)(t)})}}},e.onunloadFlush=function(){if(!s)if(H||ne)try{return e[ye](!0,We,2)}catch(t){(0,y.ZP)(e[Ce](),1,20,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+(0,C.lL)(t),{exception:(0,I.m)(t)})}else e.flush(!1)},e.addHeader=function(e,t){l[e]=t},e.initialize=function(t,o,s,a){e.isInitialized()&&(0,y.ZP)(e[Ce](),1,28,"Sender is already initialized"),r.initialize(t,o,s,a);var m=e.identifier;c=new st(o.logger),n=0,i=null,e[Ie]=null,u=0;var b=e[Ce]();M=(0,A.Hm)((0,w.Z)("Sender"),o.evtNamespace&&o.evtNamespace()),v=function(e){var t,n=(0,R.YE)(),r=(0,R.w3)(),i=!1,o=!0,s=(0,A.Hm)((0,w.Z)("OfflineListener"),e);try{if(c((0,R.zk)())&&(i=!0),n){var a=n.body||n;a.ononline&&c(a)&&(i=!0)}i&&r&&!(0,k.hX)(r[ee])&&(o=r[ee])}catch(e){i=!1}function c(e){var t=!1;return e&&(t=(0,A.mB)(e,"online",u,s))&&(0,A.mB)(e,"offline",l,s),t}function u(){o=!0}function l(){o=!1}return(t={})[te]=function(){var e=!0;return i?e=o:r&&!(0,k.hX)(r[ee])&&(e=r[ee]),e},t.isListening=function(){return i},t.unload=function(){var e=(0,R.zk)();if(e&&i){if(Ze(e,s),n){var t=n.body||n;(0,k.b0)(t.ononline)||Ze(t,s)}i=!1}},t}(M),e._addHook((0,S.a)(t,(function(t){var n=t.cfg;n.storagePrefix&&(0,p.vh)(n.storagePrefix);var r=(0,T.i8)(null,n,o).getExtCfg(m,ft);(0,D.vF)(e,"_senderConfig",{g:function(){return r}}),F!==r.endpointUrl&&(U=F=r.endpointUrl),z&&z!==r[Ae]&&(0,E.I)(z,(function(e){delete l[e.header]})),q=r[we],H=(!1===r[Se]||!1===r[Te])&&(0,_.Uf)(),ne=r[Ee],oe=!!r.disableXhr;var i=r[fe],s=!!r[_e]&&(!!i||(0,p.AN)()),a=r.namePrefix,c=s!==Q||s&&X!==a||s&&J!==i;if(e[be]){if(c)try{e._buffer=e._buffer[le](b,r,s)}catch(t){(0,y.ZP)(e[Ce](),1,12,"failed to transfer telemetry to different buffer storage, telemetry will be lost: "+(0,C.lL)(t),{exception:(0,I.m)(t)})}$e()}else e[be]=s?new ot(b,r):new it(b,r);X=a,Q=s,J=i,ae=!r[ke]&&(0,_.R7)(!0),e._sample=new lt(r.samplingPercentage,b),function(e,t){var n=t.disableInstrumentationKeyValidation;return!((0,k.hX)(n)||!n)||new RegExp("^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$").test(e)}($=r[Re],n)||(0,y.ZP)(b,1,100,"Invalid Instrumentation key "+$),z=r[Ae],!(0,g.Qu)(U)&&z&&z[W]>0?(0,E.I)(z,(function(e){d.addHeader(e.header,e.value)})):z=null,Z=r.enableSendPromise;var u,v=r.httpXHROverride,A=null;A=f([1,2],!1);var w={sendPOST:Je};pe=function(e,t){return ze(w,e,t)},!r[Te]&&(0,_.Uf)()&&(A=f([3],!1)),A=ne?v:A||v||w,e[Ie]=function(e,t){return ze(A,e,t)},ae&&(h=Xe),u=ne?v:f([3,1],!0)||v,!ne&&h||!u||(h=function(e,t){return ze(u,e,t)}),h||(h=pe),j=r.disableTelemetry,V=r[Pe]||dt,G=r.isRetryDisabled,Y=r[Oe]})))},e.processTelemetry=function(n,r){var i,s=(r=e._getTelCtx(r))[Ce]();try{if(j)return;if(!n)return void(0,y.ZP)(s,1,7,"Cannot send empty telemetry");if(n.baseData&&!n[Me])return void(0,y.ZP)(s,1,70,"Cannot send telemetry without baseData and baseType");if(n[Me]||(n[Me]="EventData"),!e[Ie])return void(0,y.ZP)(s,1,28,"Sender was not initialized");if(i=n,!e._sample.isSampledIn(i))return void(0,y.ZP)(s,2,33,"Telemetry item was sampled out and not sent",{SampleRate:e._sample[xe]});n[o.tU]=e._sample[xe];var a=n.iKey||$,u=t.constructEnvelope(n,a,s,V);if(!u)return void(0,y.ZP)(s,1,47,"Unable to create an AppInsights envelope");var l=!1;if(n[B]&&n[B][o.jp]&&((0,E.I)(n[B][o.jp],(function(e){try{e&&!1===e(u)&&(l=!0,(0,y.OG)(s,"Telemetry processor check returns false"))}catch(e){(0,y.ZP)(s,1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+(0,C.lL)(e),{exception:(0,I.m)(e)},!0)}})),delete n[B][o.jp]),l)return;var d=c.serialize(u),h=e[be];$e(d),h[re](d),rt()}catch(e){(0,y.ZP)(s,2,12,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+(0,C.lL)(e),{exception:(0,I.m)(e)})}e.processNext(n,r)},e._xhrReadyStateChange=function(e,t,n){4===e.readyState&&Ke(e.status,t,e.responseURL,n,ut(e),ht(e)||e.response)},e[ye]=function(t,n,r){var i;if(void 0===t&&(t=!0),!s)try{var o=e[be];if(j)o[ce]();else{if(o[ie]()>0){var a=o.getItems();!function(t,n){var r,i=(r="getNotifyMgr",e.core[r]?e.core[r]():e.core._notificationManager);if(i&&i[He])try{i[He](t,n)}catch(t){(0,y.ZP)(e[Ce](),1,74,"send request notification failed: "+(0,C.lL)(t),{exception:(0,I.m)(t)})}}(r||0,t),i=n?n.call(e,a,t):e[Ie](a,t)}new Date}at()}catch(t){var c=(0,_.L0)();(!c||c>9)&&(0,y.ZP)(e[Ce](),1,40,"Telemetry transmission failed, some telemetry will be lost: "+(0,C.lL)(t),{exception:(0,I.m)(t)})}return i},e._doTeardown=function(t,n){e.onunloadFlush(),(0,b.K)(v,!1),mt()},e[Ne]=function(t,n,r){(0,y.ZP)(e[Ce](),2,26,"Failed to send telemetry.",{message:n}),e._buffer&&e._buffer[he](t)},e[De]=function(t,n){for(var r=[],i=[],o=0,s=n.errors.reverse();o<s.length;o++){var a=s[o],c=t.splice(a.index,1)[0];ct(a.statusCode)?i[se](c):r[se](c)}t[W]>0&&e[Le](t,n[Ue]),r[W]>0&&e[Ne](r,ut(null,["partial success",n[Ue],"of",n.itemsReceived].join(" "))),i[W]>0&&(nt(i),(0,y.ZP)(e[Ce](),2,40,"Partial success. Delivered: "+t[W]+", Failed: "+r[W]+". Will retry to send "+i[W]+" our of "+n.itemsReceived+" items"))},e[Le]=function(t,n){e._buffer&&e._buffer[he](t)},e._xdrOnLoad=function(t,r){var i=ht(t);if(!t||i+""!="200"&&""!==i){var o=tt(i);o&&o.itemsReceived&&o.itemsReceived>o[Ue]&&!G?e[De](r,o):e[Ne](r,gt(t))}else n=0,e[Le](r,0)}})),d}return(0,i.qU)(t,e),t.constructEnvelope=function(e,t,n,r){var o;return o=t===e.iKey||(0,k.hX)(t)?e:(0,i.Im)((0,i.Im)({},e),{iKey:t}),(pt[o.baseType]||Xe)(n,o,r)},t}(M.s),mt=n(4484),vt=n(9379),yt=n(3517),Ct="instrumentationKey",It="connectionString",At=n(9762),wt={diagnosticLogInterval:(0,v.Lx)((function(e){return e&&e>0}),1e4)},St=function(){function e(t){var n,i=new vt._;((0,k.hX)(t)||(0,k.hX)(t[Ct])&&(0,k.hX)(t[It]))&&(0,yt.$8)("Invalid input configuration"),(0,r.A)(e,this,(function(e){function r(){var e=(0,S.e)(t||{},wt);n=e.cfg,i.addUnloadHook((0,S.a)(e,(function(){if(n[It]){var e=(0,mt.H)(n[It]),t=e.ingestionendpoint;n.endpointUrl=t?t+o.wc:n.endpointUrl,n[Ct]=e.instrumentationkey||n[Ct]}}))),i.initialize(n,[new gt])}(0,D.vF)(e,"config",{g:function(){return n}}),r(),e.initialize=r,(0,C.o$)(e,i,["track","flush","pollInternalLogs","stopPollingInternalLogs","unload","getPlugin","addPlugin","evtNamespace","addUnloadCb","onCfgChange"])}))}return e.__ieDyn=1,e}()},8279:(e,t,n)=>{"use strict";n.d(t,{A:()=>F});var r,i=n(3076),o=n(3266),s=n(3517),a="constructor",c="prototype",u="function",l="_dynInstFuncs",d="_isDynProxy",h="_dynClass",f="_dynCls$",p="_dynInstChk",g=p,m="_dfOpts",v="_unknown_",y="__proto__",C="_dyn"+y,I="__dynProto$Gbl",A="_dynInstProto",w="useBaseInst",S="setInstFuncs",T=Object,E=T.getPrototypeOf,_=T.getOwnPropertyNames,b=(0,i.mS)(),k=b[I]||(b[I]={o:(r={},r[S]=!0,r[w]=!0,r),n:1e3});function R(e){return e&&(e===T[c]||e===Array[c])}function P(e){return R(e)||e===Function[c]}function O(e){var t;if(e){if(E)return E(e);var n=e[y]||e[c]||(e[a]?e[a][c]:null);t=e[C]||n,(0,o.v)(e,C)||(delete e[A],t=e[C]=e[A]||e[C],e[A]=n)}return t}function M(e,t){var n=[];if(_)n=_(e);else for(var r in e)"string"==typeof r&&(0,o.v)(e,r)&&n.push(r);if(n&&n.length>0)for(var i=0;i<n.length;i++)t(n[i])}function x(e,t,n){return t!==a&&typeof e[t]===u&&(n||(0,o.v)(e,t))}function N(e){(0,s.zk)("DynamicProto: "+e)}function D(e,t){for(var n=e.length-1;n>=0;n--)if(e[n]===t)return!0;return!1}function L(e,t,n,r,i){if(!R(e)){var s=n[l]=n[l]||{},a=s[t]=s[t]||{};!1!==s[g]&&(s[g]=!!i),M(n,(function(t){x(n,t,!1)&&n[t]!==r[t]&&(a[t]=n[t],delete n[t],(!(0,o.v)(e,t)||e[t]&&!e[t][d])&&(e[t]=function(e,t){var n=function(){var r=function(e,t,n,r){var i=null;if(e&&(0,o.v)(n,h)){var s=e[l]||{};if((i=(s[n[h]]||{})[t])||N("Missing ["+t+"] "+u),!i[p]&&!1!==s[g]){for(var a=!(0,o.v)(e,t),c=O(e),d=[];a&&c&&!P(c)&&!D(d,c);){var f=c[t];if(f){a=f===r;break}d.push(c),c=O(c)}try{a&&(e[t]=i),i[p]=1}catch(e){s[g]=!1}}}return i}(this,t,e,n)||function(e,t,n){var r=t[e];return r===n&&(r=O(t)[e]),typeof r!==u&&N("["+e+"] is not a "+u),r}(t,e,n);return r.apply(this,arguments)};return n[d]=1,n}(e,t)))}))}}function U(e,t){return(0,o.v)(e,c)?e.name||t||v:((e||{})[a]||{}).name||t||v}function F(e,t,n,r){(0,o.v)(e,c)||N("theClass is an invalid class definition.");var i=e[c];(function(e,t){if(E){for(var n=[],r=O(t);r&&!P(r)&&!D(n,r);){if(r===e)return!0;n.push(r),r=O(r)}return!1}return!0})(i,t)||N("["+U(e)+"] not in hierarchy of ["+U(t)+"]");var s=null;(0,o.v)(i,h)?s=i[h]:(s=f+U(e,"_")+"$"+k.n,k.n++,i[h]=s);var a=F[m],u=!!a[w];u&&r&&void 0!==r[w]&&(u=!!r[w]);var p=function(e){var t={};return M(e,(function(n){!t[n]&&x(e,n,!1)&&(t[n]=e[n])})),t}(t),v=function(e,t,n,r){function i(e,t,n){var i=t[n];if(i[d]&&r){var o=e[l]||{};!1!==o[g]&&(i=(o[t[h]]||{})[n]||i)}return function(){return i.apply(e,arguments)}}var o={};M(n,(function(e){o[e]=i(t,n,e)}));for(var s=O(e),a=[];s&&!P(s)&&!D(a,s);)M(s,(function(e){!o[e]&&x(s,e,!E)&&(o[e]=i(t,s,e))})),a.push(s),s=O(s);return o}(i,t,p,u);n(t,v);var y=!!E&&!!a[S];y&&r&&(y=!!r[S]),L(i,s,t,p,!1!==y)}F[m]=k.o},4292:(e,t,n)=>{"use strict";n.d(t,{Dv:()=>i,yN:()=>o});var r=n(6668);function i(e,t){return o(e,(function(e){t&&t({value:e,rejected:!1})}),(function(e){t&&t({rejected:!0,reason:e})}))}function o(e,t,n,i){var o=e;return(0,r.$X)(e)?(t||n)&&(o=e.then(t,n)):t&&t(e),i&&(o=function(e,t){var n=e;return t&&((0,r.$X)(e)?n=e.finally?e.finally(t):e.then((function(e){return t(),e}),(function(e){throw t(),e})):t()),n}(o,i)),o}},636:(e,t,n)=>{"use strict";n.d(t,{Xf:()=>q,Qo:()=>F});var r,i,o,s,a,c=n(2871),u=n(6668),l=n(8693),d=n(755),h=n(3076),f=n(1636),p=n(6336),g=n(7403),m=n(3517),v=n(5439),y=n(4292),C=!1,I=["pending","resolving","resolved","rejected"],A=n(8965),w="dispatchEvent",S="Promise",T="unhandledRejection",E=T.toLowerCase(),_=[],b=0,k=10;function R(e){return(0,u.Tn)(e)?e.toString():(0,l.m)(e)}function P(e){return function(t){var n=(0,d.K)(arguments,1);return e((function(e,n){try{var r=[],i=1;(0,v.I)(t,(function(t,o){t&&(i++,(0,y.yN)(t,(function(t){r[o]=t,0==--i&&e(r)}),n))})),0==--i&&e(r)}catch(e){n(e)}}),n)}}function O(e){return function(t){var n=(0,d.K)(arguments,1);return(0,u.$X)(t)?t:e((function(e){e(t)}),n)}}function M(e){return function(t){var n=(0,d.K)(arguments,1);return e((function(e,n){n(t)}),n)}}var x,N,D=function(e){(0,v.I)(e,(function(e){try{e()}catch(e){}}))};function L(e,t){return function(e,t,n){var c,v,y=(0,d.K)(arguments,3),P=0,O=!1,M=[],x=b++,N=_.length>0?_[_.length-1]:void 0,D=!1,L=null;!a&&(a=(0,h.O7)(S+"RejectionEvent"));var U,F,q,H,z=function(t,n){try{return _.push(x),D=!0,L&&L.cancel(),L=null,e((function(e,r){M.push((function(){try{var i=2===P?t:n,o=(0,u.b0)(i)?c:(0,u.Tn)(i)?i(c):i;(0,u.$X)(o)?o.then(e,r):i?e(o):3===P?r(o):e(o)}catch(e){r(e)}})),O&&B()}),y)}finally{_.pop()}},j=function(){return I[P]},B=function(){if(M.length>0){var e=M.slice();M=[],D=!0,t(e),L&&L.cancel(),L=null}},$=function(e,t){return function(n){if(P===t){if(2===e&&(0,u.$X)(n))return P=1,void n.then($(2,1),$(3,1));P=e,O=!0,c=n,B(),D||3!==e||L||(L=(0,f.dR)(K,k))}}},K=function(){D||((0,h.Ll)()?process.emit(T,c,v):function(e,t,n,r){var i=(0,h.YE)();!s&&(s=(0,A.I)((function(){var e;return i&&i.createEvent&&(e=i.createEvent("Event")),!!e&&e.initEvent}),null));var o=s.v?i.createEvent("Event"):r?new Event(t):{};if(n&&n(o),s.v&&o.initEvent(t,!1,!0),o&&e[w])e[w](o);else{var a=e["on"+t];if(a)a(o);else{var c=(0,h.zS)("console");c&&(c.error||c.log)(t,(0,l.m)(o))}}}((0,h.zk)()||(0,h.mS)(),E,(function(e){return(0,p.vF)(e,"promise",{g:function(){return v}}),e.reason=c,e}),!!a.v))};return v={then:z,catch:function(e){return z(void 0,e)},finally:function(e){var t=e,n=e;return(0,u.Tn)(e)&&(t=function(t){return e&&e(),t},n=function(t){throw e&&e(),t}),z(t,n)}},(0,p.Ux)(v,"state",{get:j}),C&&(U=v,F=j,q=function(){return(0,u.SZ)(c)},H=function(){return D},r=r||{toString:function(){return"[[PromiseState]]"}},i=i||{toString:function(){return"[[PromiseResult]]"}},o=o||{toString:function(){return"[[PromiseIsHandled]]"}},(0,p.Ux)(U,r,{get:F}),(0,p.Ux)(U,i,{get:q}),(0,p.Ux)(U,o,{get:H})),(0,g.Lo)()&&(v[(0,g.Y0)(11)]="IPromise"),v.toString=function(){return"IPromise"+(C?"["+x+((0,u.b0)(N)?"":":"+N)+"]":"")+" "+j()+(O?" - "+R(c):"")},function(){(0,u.Tn)(n)||(0,m.zk)(S+": executor is not a function - "+R(n));var e=$(3,0);try{n.call(v,$(2,0),e)}catch(t){e(t)}}(),v}(L,function(e){var t=(0,u.Et)(e)?e:0;return function(e){(0,f.dR)((function(){D(e)}),t)}}(t),e,t)}function U(e,t){!x&&(x=(0,h.O7)(S));var n=x.v;if(!n)return L(e);(0,u.Tn)(e)||(0,m.zk)(S+": executor is not a function - "+(0,l.m)(e));var r=0,i=new n((function(t,n){e((function(e){r=2,t(e)}),(function(e){r=3,n(e)}))}));return(0,p.Ux)(i,"state",{get:function(){return I[r]}}),i}function F(e,t){return!N&&(N=(0,c.nR)((function(){return U}))),N.v.call(this,e,t)}P(L),O(L),M(L),P(U),O(U),M(U);var q=P(F);O(F),M(F)},1187:(e,t,n)=>{"use strict";n.d(t,{Y:()=>l});var r=n(6668),i=n(7403);function o(e){return!!e&&(0,r.Tn)(e.next)}var s,a=n(2871),c=n(4016),u=n(655);function l(e,t){var n;return!(0,r.b0)(t)&&e&&((0,r.cy)(t)?(0,u.p)(e.push,e,t):o(t)||(n=t,!(0,r.kF)(n)&&(0,r.Tn)(n[(0,i.Y0)(3)]))?function(e,t,n){if(e&&(o(e)||(!s&&(s=(0,a.nR)((function(){return(0,i.Y0)(3)}))),e=e[s.v]?e[s.v]():null),o(e))){var r=void 0,u=void 0;try{for(var l=0;!(u=e.next())[c.DH]&&-1!==t.call(e,u[c.Qg],l,e);)l++}catch(t){r={e:t},e.throw&&(u=null,e.throw(r))}finally{try{u&&!u[c.DH]&&e.return&&e.return(u)}finally{if(r)throw r.e}}}}(t,(function(t){e.push(t)})):e.push(t)),e}},5439:(e,t,n)=>{"use strict";n.d(t,{I:()=>i});var r=n(4016);function i(e,t,n){if(e)for(var i=e[r.pi]>>>0,o=0;o<i&&(!(o in e)||-1!==t.call(n||e,e[o],o,e));o++);}},6832:(e,t,n)=>{"use strict";n.d(t,{r:()=>o});var r=n(4016),i=n(1742),o=(0,i.lK)(r.BA,r.wM);(0,i.lK)(r.uP,r.wM)},4335:(e,t,n)=>{"use strict";n.d(t,{W:()=>i});var r=n(4016),i=(0,n(1742).lK)("map",r.wM)},1011:(e,t,n)=>{"use strict";n.d(t,{K:()=>i});var r=n(4016),i=(0,n(1742).lK)("reduce",r.wM)},755:(e,t,n)=>{"use strict";n.d(t,{K:()=>i});var r=n(4016),i=(0,n(1742).lK)(r.$9,r.wM)},655:(e,t,n)=>{"use strict";n.d(t,{p:()=>r});var r=(0,n(1742).xC)("apply")},5683:(e,t,n)=>{"use strict";n.d(t,{n:()=>r});var r=(0,n(1742).xC)("call")},6668:(e,t,n)=>{"use strict";n.d(t,{$P:()=>C,$X:()=>S,Cb:()=>p,Ed:()=>u,Et:()=>I,Gv:()=>v,Kg:()=>g,Lm:()=>A,O9:()=>f,SZ:()=>c,Tn:()=>m,b0:()=>l,bJ:()=>w,cy:()=>y,ez:()=>s,hX:()=>d,kF:()=>h,wo:()=>T,zz:()=>E});var r=n(4016),i=n(8827),o=[r.An,r.uk,r.Jx,r.ZH,"symbol","bigint"];function s(e){return function(t){return typeof t===e}}function a(e){var t="[object "+e+"]";return function(e){return!(!e||c(e)!==t)}}function c(e){return r.Wy.toString.call(e)}function u(e,t){return typeof e===t}function l(e){return typeof e===r.ZH||e===r.ZH}function d(e){return e===r.M_||l(e)}function h(e){return e===r.M_||!f(e)}function f(e){return!!e||e!==r.DQ}var p=function(e){return e!==r.qv&&-1!==o.indexOf(e)},g=s(r.An),m=s(r.H3);function v(e){return!(!e&&d(e)||!e||typeof e!==r.qv)}var y=r.kV.isArray,C=a("Date"),I=s(r.uk),A=s(r.Jx),w=(a("RegExp"),a("File"),a("FormData"),a("Blob"),a("ArrayBuffer"),a("Error"));function S(e){return!!e&&m(e.then)}function T(e){return!e||!(0,i.y)((function(){return e&&0+e}),e)}function E(e){return!(!e||(0,i.y)((function(){return!(e&&0+e)}),!e))}},225:(e,t,n)=>{"use strict";function r(){return(Date.now||i)()}function i(){return(new Date).getTime()}n.d(t,{f:()=>r})},8693:(e,t,n)=>{"use strict";n.d(t,{m:()=>o});var r=n(4016),i=n(6668);function o(e,t){var n=r.wg;if((0,i.bJ)(e))n="{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e.name+"'";else try{n=JSON.stringify(e,r.M_,t?(0,i.Et)(t)?t:4:r.DQ)}catch(e){n=" - "+o(e,t)}return(0,i.SZ)(e)+": "+n}},5659:(e,t,n)=>{"use strict";n.d(t,{WS:()=>s,Tm:()=>a,fn:()=>c});var r=n(9018);function i(e,t,n,i){var o={};return(0,r.z)(e,(function(e,r){o[e]=t?r:e,o[r]=n?r:e})),i(o)}var o=n(1324);function s(e){return i(e,1,0,o.ZH)}function a(e){return i(e,0,0,o.ZH)}function c(e){return function(e){var t={};return(0,r.z)(e,(function(e,n){t[e]=n[1],t[n[0]]=n[1]})),(0,o.ZH)(t)}(e)}},3076:(e,t,n)=>{"use strict";n.d(t,{JK:()=>T,Ll:()=>E,O7:()=>p,Vd:()=>C,Wt:()=>v,YE:()=>y,mS:()=>g,tw:()=>S,w3:()=>w,w9:()=>A,zS:()=>m,zk:()=>I});var r,i,o,s,a,c,u=n(4016),l=n(1382),d=n(8965),h=n(2871),f="window",p=function(e){return(0,d.I)((function(){return m(e)||u.DQ}),u.DQ)},g=function(e){return(!r||!1===e||h.nr&&h.nr.lzy&&!r.b)&&(r=(0,d.I)(l.u,u.M_)),r.v},m=function(e,t){var n=r&&!1!==t?r.v:g(t);return n&&n[e]?n[e]:e===f&&i?i.v:u.M_},v=function(){return!!y()},y=function(){return(!o||h.nr&&h.nr.lzy&&!o.b)&&(o=p("document")),o.v},C=function(){return!!I()},I=function(){return(!i||h.nr&&h.nr.lzy&&!i.b)&&(i=p(f)),i.v},A=function(){return!!w()},w=function(){return(!s||h.nr&&h.nr.lzy&&!s.b)&&(s=p("navigator")),s.v},S=function(){return!!T()},T=function(){return(!a||h.nr&&h.nr.lzy&&!a.b)&&(a=p("history")),a.v},E=function(){return!c&&(c=(0,d.I)((function(){return!(!process||!(process.versions||{}).node)}),!1)),c.v}},2871:(e,t,n)=>{"use strict";n.d(t,{nR:()=>c,nr:()=>r});var r,i=n(4016),o=n(1382),s=n(6336),a=function(){r=(0,o.Z)(),a=i.M_};function c(e){var t={};return a&&a(),t.b=r.lzy,(0,s.Ux)(t,"v",{configurable:!0,get:function(){var n=e();return r.lzy||((0,s.Ux)(t,"v",{value:n}),t.b&&delete t.b),r.lzy&&t.b!==r.lzy&&(t.b=r.lzy),n}}),t}},4657:(e,t,n)=>{"use strict";n.d(t,{R:()=>i});var r=n(4016),i=(0,n(1742).k5)(r.pi)},558:(e,t,n)=>{"use strict";n.d(t,{FJ:()=>a,UU:()=>c});var r,i=n(225),o=n(3076),s=n(2871);function a(){return(!r||!r.b&&s.nr&&s.nr.lzy)&&(r=(0,o.O7)("performance")),r.v}function c(){var e=a();return e&&e.now?e.now():(0,i.f)()}},8827:(e,t,n)=>{"use strict";function r(e,t){var n=t;try{n=e()}catch(e){}return n}n.d(t,{y:()=>r})},8965:(e,t,n)=>{"use strict";n.d(t,{I:()=>o});var r=n(2871),i=n(8827);function o(e,t){return(0,r.nR)((function(){return(0,i.y)(e,t)}))}},3517:(e,t,n)=>{"use strict";function r(e){throw new Error(e)}function i(e){throw new TypeError(e)}n.d(t,{$8:()=>r,zk:()=>i})},4016:(e,t,n)=>{"use strict";n.d(t,{$9:()=>S,An:()=>h,BA:()=>v,BB:()=>p,DH:()=>I,DQ:()=>r,Fs:()=>l,H3:()=>a,I3:()=>_,Jx:()=>s,M_:()=>i,PF:()=>g,Qg:()=>A,Wy:()=>E,ZH:()=>f,fL:()=>m,kV:()=>R,o_:()=>w,pi:()=>C,qv:()=>u,r5:()=>d,s6:()=>T,sW:()=>b,tq:()=>k,uP:()=>y,uk:()=>c,wM:()=>P,wg:()=>o});var r=void 0,i=null,o="",s="boolean",a="function",c="number",u="object",l="prototype",d="__proto__",h="string",f="undefined",p="constructor",g="Symbol",m="_polyfill",v="indexOf",y="lastIndexOf",C="length",I="done",A="value",w="name",S="slice",T=Object,E=T[l],_=String,b=_[l],k=Math,R=Array,P=R[l]},1382:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a,u:()=>s});var r,i=n(4016),o="__tsUtils$gblCfg";function s(){var e;return typeof globalThis!==i.ZH&&(e=globalThis),e||typeof self===i.ZH||(e=self),e||typeof window===i.ZH||(e=window),e||typeof global===i.ZH||(e=global),e}function a(){if(!r){var e=s()||{};r=e[o]=e[o]||{}}return r}},1742:(e,t,n)=>{"use strict";n.d(t,{b2:()=>d,k5:()=>h,lK:()=>l,xC:()=>u});var r=n(8693),i=n(3517),o=n(5977),s=n(4016),a=s.wM[s.$9],c=function(e,t){(0,i.zk)("'"+(0,o.o)(e)+"' not defined for "+(0,r.m)(t))},u=function(e){return function(t){return t[e].apply(t,a.call(arguments,1))}},l=function(e,t){var n=t&&t[e];return function(t){var r=t&&t[e]||n;if(r)return r.apply(t,a.call(arguments,1));c(e,t)}},d=function(e,t,n){var r=t&&t[e];return function(t){var i=t&&t[e]||r;if(i||n){var o=arguments;return(i||n).apply(t,i?a.call(o,1):o)}c(e,t)}};function h(e){return function(t){return t[e]}}},411:(e,t,n)=>{"use strict";n.d(t,{s:()=>o});var r=n(4016),i=n(8693),o=r.s6.create||function(e){if(!e)return{};var t=typeof e;if(t!==r.qv&&t!==r.H3)throw new TypeError("Prototype must be an Object or function: "+(0,i.m)(e));function n(){}return n[r.Fs]=e,new n}},6336:(e,t,n)=>{"use strict";n.d(t,{Ux:()=>u,r:()=>l,vF:()=>d});var r=n(4016),i=n(6668),o=n(9018),s=n(695),a={e:"enumerable",c:"configurable",v:r.Qg,w:"writable",g:"get",s:"set"};function c(e){var t={};if(t[a.c]=!0,t[a.e]=!0,e.l){t.get=function(){return e.l.v};var n=(0,s.k)(e.l,"v");n&&n.set&&(t.set=function(t){e.l.v=t})}return(0,o.z)(e,(function(e,n){t[a[e]]=(0,i.b0)(n)?t[a[e]]:n})),t}var u=r.s6.defineProperty;function l(e,t,n,r,i,o){var s={e:o,c:i};return n&&(s.g=n),r&&(s.s=r),u(e,t,c(s))}function d(e,t,n){return u(e,t,c(n))}r.s6.defineProperties},9018:(e,t,n)=>{"use strict";n.d(t,{z:()=>o});var r=n(6668),i=n(9452);function o(e,t,n){if(e&&(0,r.Gv)(e))for(var o in e)if((0,i.K)(e,o)&&-1===t.call(n||e,o,e[o]))break}},695:(e,t,n)=>{"use strict";n.d(t,{k:()=>r});var r=n(4016).s6.getOwnPropertyDescriptor},9452:(e,t,n)=>{"use strict";n.d(t,{K:()=>s});var r=n(4016),i=n(695),o=n(3266),s=r.s6.hasOwn||function(e,t){return(0,o.v)(e,t)||!!(0,i.k)(e,t)}},3266:(e,t,n)=>{"use strict";n.d(t,{v:()=>i});var r=n(4016);function i(e,t){return e&&r.Wy.hasOwnProperty.call(e,t)}},7460:(e,t,n)=>{"use strict";n.d(t,{Q:()=>d});var r,i,o,s=n(5683),a=n(3076),c=n(4016),u=n(3266),l=n(1324);function d(e){if(!e||typeof e!==c.qv)return!1;o||(o=!(0,a.Vd)()||(0,a.zk)());var t=!1;if(e!==o){i||(r=Function[c.Fs].toString,i=(0,s.n)(r,c.s6));try{var n=(0,l.rL)(e);(t=!n)||((0,u.v)(n,c.BB)&&(n=n[c.BB]),t=n&&typeof n===c.H3&&r.call(n)===i)}catch(e){}}return t}},1324:(e,t,n)=>{"use strict";n.d(t,{vE:()=>u,ZH:()=>d,N6:()=>h,rL:()=>p,cG:()=>l,js:()=>f});var r=n(4016),i=n(6668),o=n(3517),s=n(9018),a=r.s6.freeze,c=function(e){return e},u=r.s6.assign;function l(e){return(0,i.Gv)(e)&&e!==r.M_||(0,o.zk)("objKeys called on non-object"),r.s6.keys(e)}function d(e){return a&&(0,s.z)(e,(function(e,t){((0,i.cy)(t)||(0,i.Gv)(t))&&a(t)})),h(e)}var h=a||c,f=r.s6.seal||c,p=r.s6.getPrototypeOf||function(e){return e[r.r5]||r.M_};r.s6.entries,r.s6.values},5977:(e,t,n)=>{"use strict";n.d(t,{o:()=>r});var r=n(4016).I3},2494:(e,t,n)=>{"use strict";n.d(t,{C:()=>l});var r=n(6668),i=n(8693),o=n(3517),s=n(4016),a=n(1742),c=n(5977),u=n(3178),l=(0,a.b2)("endsWith",s.sW,(function(e,t,n){(0,r.Kg)(e)||(0,o.zk)("'"+(0,i.m)(e)+"' is not a string");var a=(0,r.Kg)(t)?t:(0,c.o)(t),l=a[s.pi],d=e[s.pi],h=!(0,r.b0)(n)&&n<d?n:d;return(0,u.P0)(e,h-l,h)===a}))},5881:(e,t,n)=>{"use strict";n.d(t,{H:()=>o});var r=n(4016),i=n(1742),o=(0,i.lK)(r.BA,r.sW);(0,i.lK)(r.uP,r.sW)},7931:(e,t,n)=>{"use strict";n.d(t,{t:()=>l});var r=n(6668),i=n(8693),o=n(3517),s=n(4016),a=n(1742),c=n(5977),u=n(3178),l=(0,a.b2)("startsWith",s.sW,(function(e,t,n){(0,r.Kg)(e)||(0,o.zk)("'"+(0,i.m)(e)+"' is not a string");var a=(0,r.Kg)(t)?t:(0,c.o)(t),l=a[s.pi],d=n>0?n:0;return(0,u.P0)(e,d,d+l)===a}))},3178:(e,t,n)=>{"use strict";n.d(t,{ZW:()=>h,hK:()=>d,P0:()=>l});var r=n(6668),i=n(8693),o=n(3517),s=n(4016),a=n(1742),c=(s.tq.min,s.tq.max),u=(0,a.lK)(s.$9,s.sW),l=(0,a.lK)("substring",s.sW),d=(0,a.b2)("substr",s.sW,(function(e,t,n){return(0,r.hX)(e)&&(0,o.zk)("'polyStrSubstr called with invalid "+(0,i.m)(e)),n<0?s.wg:((t=t||0)<0&&(t=c(t+e[s.pi],0)),(0,r.b0)(n)?u(e,t):u(e,t,t+n))}));function h(e,t){return l(e,0,t)}},8993:(e,t,n)=>{"use strict";n.d(t,{EH:()=>h});var r=n(4016),i=n(1742),o=n(6668),s=n(8693),a=n(3517);function c(e){return function(t){return(0,o.hX)(t)&&(0,a.zk)("strTrim called ["+(0,s.m)(t)+"]"),t&&t.replace&&(t=t.replace(e,r.wg)),t}}var u=c(/^\s+|(?=\s)\s+$/g),l=c(/^\s+/g),d=c(/(?=\s)\s+$/g),h=(0,i.b2)("trim",r.sW,u);(0,i.b2)("trimStart",r.sW,l),(0,i.b2)("trimEnd",r.sW,d)},7403:(e,t,n)=>{"use strict";n.d(t,{Y0:()=>T,Lo:()=>w,jj:()=>E,eC:()=>_});var r,i=n(4016),o=(0,n(5659).Tm)({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),s=n(9452),a=n(5977),c=n(1382),u=n(1324),l="_urid";var d={};function h(e){var t={description:(0,a.o)(e),toString:function(){return i.PF+"("+e+")"}};return t[i.fL]=!0,t}function f(e){var t=function(){if(!r){var e=(0,c.Z)();r=e.gblSym=e.gblSym||{k:{},s:{}}}return r}();if(!(0,s.K)(t.k,e)){var n=h(e),i=(0,u.cG)(t.s).length;n[l]=function(){return i+"_"+n.toString()},t.k[e]=n,t.s[n[l]()]=(0,a.o)(e)}return t.k[e]}var p,g,m,v=n(6668),y=n(2871),C=n(8965),I=n(3076);function A(e){return(0,C.I)((function(){return p.v?p.v[e]:i.DQ}),i.DQ)}function w(){return!!S()}function S(){var e=!p||y.nr&&y.nr.lzy&&!p.b;return e&&(p=(0,I.O7)(i.PF)),(!g||e)&&(g=A("for")),(!m||e)&&(m=A("keyFor")),p.v}function T(e,t){var n=o[e];return(!p||y.nr.lzy&&!p.b)&&S(),p.v?p.v[n||e]:t?i.DQ:function(e){var t,n=o[e];return n&&(t=d[n]=d[n]||h(i.PF+"."+n)),t}(e)}function E(e,t){return(!p||y.nr.lzy&&!p.b)&&S(),p.v?p.v(e):t?i.M_:h(e)}function _(e){return(!g||y.nr.lzy&&!p.b)&&S(),(g.v||f)(e)}(0,v.ez)("symbol")},1636:(e,t,n)=>{"use strict";n.d(t,{AH:()=>g,dR:()=>f,vK:()=>p});var r=n(755),i=n(655),o=n(6668),s=n(4016),a=n(6336),c="ref",u="un"+c,l="hasRef",d="enabled";function h(e,t,n,h){var f=(0,o.cy)(n),p=f?n.length:0,g=(p>0?n[0]:f?s.DQ:n)||setTimeout,m=(p>1?n[1]:s.DQ)||clearTimeout,v=h[0];h[0]=function(){y.dn(),(0,i.p)(v,e,(0,r.K)(arguments))};var y=function(t,n,r){var o,h,f=!0,p=t?n(s.M_):s.M_,g=function(){return f=!1,p&&p[u]&&p[u](),h},v=function(){return p=n(p),f||g(),h},y=function(){p&&function(t){(0,i.p)(m,e,[t])}(p),p=s.M_};return(o={cancel:y,refresh:v})[l]=function(){return p&&p[l]?p[l]():f},o[c]=function(){return f=!0,p&&p[c]&&p[c](),h},o[u]=g,o[d]=!1,h=o,(0,a.Ux)(h,d,{get:function(){return!!p},set:function(e){!e&&p&&y(),e&&!p&&v()}}),{h,dn:function(){p=s.M_}}}(t,(function(t){if(t){if(t.refresh)return t.refresh(),t;(0,i.p)(m,e,[t])}return(0,i.p)(g,e,h)}));return y.h}function f(e,t){return h(this,!0,s.DQ,(0,r.K)(arguments))}function p(e,t,n){return h(this,!0,e,(0,r.K)(arguments,1))}function g(e,t){return h(this,!1,s.DQ,(0,r.K)(arguments))}},5396:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.oneDataSystemClientFactory=void 0,t.oneDataSystemClientFactory=async(e,t,r)=>{let i=await(async(e,t,r)=>{const i=await Promise.resolve().then((()=>o(n(670)))),s=await Promise.resolve().then((()=>o(n(8916)))),a=new i.AppInsightsCore,c=new s.PostChannel,u={instrumentationKey:e,endpointUrl:"https://mobile.events.data.microsoft.com/OneCollector/1.0",loggingLevelTelemetry:0,loggingLevelConsole:0,disableCookiesUsage:!0,disableDbgExt:!0,disableInstrumentationKeyValidation:!0,channels:[[c]]};if(r){u.extensionConfig={};const e={alwaysUseXhrOverride:!0,httpXHROverride:r};u.extensionConfig[c.identifier]=e}const l=t.workspace.getConfiguration("telemetry").get("internalTesting");return a.initialize(u,[]),a.addTelemetryInitializer((e=>{l&&(e.ext=e.ext??{},e.ext.utc=e.ext.utc??{},e.ext.utc.flags=8462029)})),a})(e,t,r);return{logEvent:(e,t)=>{try{i?.track({name:e,baseData:{name:e,properties:t?.properties,measurements:t?.measurements}})}catch(e){throw new Error("Failed to log event to app insights!\n"+e.message)}},flush:async()=>{try{return new Promise(((e,t)=>{i?i.flush(!0,(e=>{e||t("Failed to flush app 1DS!")})):e()}))}catch(e){throw new Error("Failed to flush 1DS!\n"+e.message)}},dispose:async()=>new Promise((e=>{i?i.unload(!1,(()=>{e(),i=void 0}),1e3):e()}))}}},2468:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.appInsightsClientFactory=void 0;const s=n(740),a=n(8393);t.appInsightsClientFactory=async(e,t,r)=>{let i;try{const r=await Promise.resolve().then((()=>o(n(1380))));if(i=new r.ApplicationInsights({instrumentationKey:e,disableAjaxTracking:!0,disableExceptionTracking:!0,disableFetchTracking:!0,disableCorrelationHeaders:!0,disableCookiesUsage:!0,autoTrackPageVisitTime:!1,emitLineDelimitedJson:!1,disableInstrumentationKeyValidation:!0}),t){i.config.extensionConfig={};const e={alwaysUseXhrOverride:!0,httpXHROverride:t};i.config.extensionConfig[s.BreezeChannelIdentifier]=e}}catch(e){return Promise.reject(e)}return{logEvent:(e,t)=>{const n={...t?.properties,...t?.measurements};r?.length&&a.TelemetryUtil.applyReplacements(n,r),i?.track({name:e,data:n,baseType:"EventData",baseData:{name:e,properties:t?.properties,measurements:t?.measurements}})},flush:async()=>{i?.flush(!1)},dispose:async()=>new Promise((e=>{i?.unload(!0,(()=>{e(),i=void 0}),1e3)}))}}},6548:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseTelemetryReporter=void 0,t.BaseTelemetryReporter=class{constructor(e,t,n){this.telemetrySender=e,this.vscodeAPI=t,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this._onDidChangeTelemetryLevel=new this.vscodeAPI.EventEmitter,this.onDidChangeTelemetryLevel=this._onDidChangeTelemetryLevel.event,this.telemetryLogger=this.vscodeAPI.env.createTelemetryLogger(this.telemetrySender,n),this.updateUserOptIn(),this.telemetryLogger.onDidChangeEnableStates((()=>{this.updateUserOptIn()}))}updateUserOptIn(){this.errorOptIn=this.telemetryLogger.isErrorsEnabled,this.userOptIn=this.telemetryLogger.isUsageEnabled,(this.telemetryLogger.isErrorsEnabled||this.telemetryLogger.isUsageEnabled)&&this.telemetrySender.instantiateSender(),this._onDidChangeTelemetryLevel.fire(this.telemetryLevel)}get telemetryLevel(){return this.errorOptIn&&this.userOptIn?"all":this.errorOptIn?"error":"off"}internalSendTelemetryEvent(e,t,n,r){r?this.telemetrySender.sendEventData(e,{properties:t,measurements:n}):this.telemetryLogger.logUsage(e,{properties:t,measurements:n})}sendTelemetryEvent(e,t,n){this.internalSendTelemetryEvent(e,t,n,!1)}sendRawTelemetryEvent(e,t,n){const r={...t};for(const e of Object.keys(r??{})){const t=r[e];"string"==typeof e&&void 0!==t&&(r[e]=new this.vscodeAPI.TelemetryTrustedValue("string"==typeof t?t:t.value))}this.sendTelemetryEvent(e,r,n)}sendDangerousTelemetryEvent(e,t,n){this.telemetrySender.instantiateSender(),this.internalSendTelemetryEvent(e,t,n,!0)}internalSendTelemetryErrorEvent(e,t,n,r){r?this.telemetrySender.sendEventData(e,{properties:t,measurements:n}):this.telemetryLogger.logError(e,{properties:t,measurements:n})}sendTelemetryErrorEvent(e,t,n){this.internalSendTelemetryErrorEvent(e,t,n,!1)}sendDangerousTelemetryErrorEvent(e,t,n){this.telemetrySender.instantiateSender(),this.internalSendTelemetryErrorEvent(e,t,n,!0)}async dispose(){return await this.telemetrySender.dispose(),this.telemetryLogger.dispose(),Promise.all(this.disposables.map((e=>e.dispose())))}}},2396:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.BaseTelemetrySender=void 0,function(e){e[e.NOT_INSTANTIATED=0]="NOT_INSTANTIATED",e[e.INSTANTIATING=1]="INSTANTIATING",e[e.INSTANTIATED=2]="INSTANTIATED"}(n||(n={})),t.BaseTelemetrySender=class{constructor(e,t){this._instantiationStatus=n.NOT_INSTANTIATED,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=t,this._key=e}sendEventData(e,t){this._telemetryClient?this._telemetryClient.logEvent(e,t):this._instantiationStatus!==n.INSTANTIATED&&this._eventQueue.push({eventName:e,data:t})}sendErrorData(e,t){if(!this._telemetryClient)return void(this._instantiationStatus!==n.INSTANTIATED&&this._exceptionQueue.push({exception:e,data:t}));const r={stack:e.stack,message:e.message,name:e.name};t?t.properties={...t.properties,...r}:t={properties:r},this._telemetryClient.logEvent("unhandlederror",t)}async flush(){return this._telemetryClient?.flush()}async dispose(){this._telemetryClient&&(await this._telemetryClient.dispose(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach((({eventName:e,data:t})=>this.sendEventData(e,t))),this._eventQueue=[],this._exceptionQueue.forEach((({exception:e,data:t})=>this.sendErrorData(e,t))),this._exceptionQueue=[]}instantiateSender(){this._instantiationStatus===n.NOT_INSTANTIATED&&(this._instantiationStatus=n.INSTANTIATING,this._clientFactory(this._key).then((e=>{this._telemetryClient=e,this._instantiationStatus=n.INSTANTIATED,this._flushQueues()})).catch((e=>{console.error(e),this._instantiationStatus=n.INSTANTIATED})))}}},8393:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TelemetryUtil=void 0;class n{static applyReplacements(e,t){for(const n of Object.keys(e))for(const r of t)r.lookup.test(n)&&(void 0!==r.replacementString?e[n]=r.replacementString:delete e[n])}static shouldUseOneDataSystemSDK(e){return 74===e.length&&"-"===e[32]&&"-"===e[41]&&"-"===e[46]&&"-"===e[51]&&"-"===e[56]&&"-"===e[69]}static getAdditionalCommonProperties(e){return{"common.os":e.platform,"common.nodeArch":e.architecture,"common.platformversion":(e.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),"common.telemetryclientversion":"0.9.0"}}static getInstance(){return n._instance||(n._instance=new n),n._instance}}t.TelemetryUtil=n},1170:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const s=o(n(857)),a=o(n(1398)),c=o(n(5692)),u=n(6548),l=n(2396),d=n(8393),h=n(5396),f=n(2468);function p(){return{sendPOST:(e,t)=>{const n={method:"POST",headers:{...e.headers,"Content-Type":"application/json","Content-Length":Buffer.byteLength(e.data)}};try{const r=c.request(e.urlString,n,(e=>{e.on("data",(function(n){t(e.statusCode??200,e.headers,n.toString())})),e.on("error",(function(){t(0,{})}))}));r.write(e.data,(e=>{e&&t(0,{})})),r.end()}catch{t(0,{})}}}}class g extends u.BaseTelemetryReporter{constructor(e,t){let n=e=>(0,f.appInsightsClientFactory)(e,p(),t);d.TelemetryUtil.shouldUseOneDataSystemSDK(e)&&(n=e=>(0,h.oneDataSystemClientFactory)(e,a,p()));const r={release:s.release(),platform:s.platform(),architecture:s.arch()},i=new l.BaseTelemetrySender(e,n);if(e&&0===e.indexOf("AIF-"))throw new Error("AIF keys are no longer supported. Please switch to 1DS keys for 1st party extensions");super(i,a,{additionalCommonProperties:d.TelemetryUtil.getAdditionalCommonProperties(r)})}}t.default=g},1045:(e,t,n)=>{"use strict";var r=n(181).Buffer,i=n(181).SlowBuffer;function o(e,t){if(!r.isBuffer(e)||!r.isBuffer(t))return!1;if(e.length!==t.length)return!1;for(var n=0,i=0;i<e.length;i++)n|=e[i]^t[i];return 0===n}e.exports=o,o.install=function(){r.prototype.equal=i.prototype.equal=function(e){return o(this,e)}};var s=r.prototype.equal,a=i.prototype.equal;o.restore=function(){r.prototype.equal=s,i.prototype.equal=a}},2010:(e,t,n)=>{"use strict";var r=n(2861).Buffer,i=n(3527),o=128;function s(e){if(r.isBuffer(e))return e;if("string"==typeof e)return r.from(e,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function a(e,t,n){for(var r=0;t+r<n&&0===e[t+r];)++r;return e[t+r]>=o&&--r,r}e.exports={derToJose:function(e,t){e=s(e);var n=i(t),o=n+1,a=e.length,c=0;if(48!==e[c++])throw new Error('Could not find expected "seq"');var u=e[c++];if(129===u&&(u=e[c++]),a-c<u)throw new Error('"seq" specified length of "'+u+'", only "'+(a-c)+'" remaining');if(2!==e[c++])throw new Error('Could not find expected "int" for "r"');var l=e[c++];if(a-c-2<l)throw new Error('"r" specified length of "'+l+'", only "'+(a-c-2)+'" available');if(o<l)throw new Error('"r" specified length of "'+l+'", max of "'+o+'" is acceptable');var d=c;if(c+=l,2!==e[c++])throw new Error('Could not find expected "int" for "s"');var h=e[c++];if(a-c!==h)throw new Error('"s" specified length of "'+h+'", expected "'+(a-c)+'"');if(o<h)throw new Error('"s" specified length of "'+h+'", max of "'+o+'" is acceptable');var f=c;if((c+=h)!==a)throw new Error('Expected to consume entire buffer, but "'+(a-c)+'" bytes remain');var p=n-l,g=n-h,m=r.allocUnsafe(p+l+g+h);for(c=0;c<p;++c)m[c]=0;e.copy(m,c,d+Math.max(-p,0),d+l);for(var v=c=n;c<v+g;++c)m[c]=0;return e.copy(m,c,f+Math.max(-g,0),f+h),(m=m.toString("base64")).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},joseToDer:function(e,t){e=s(e);var n=i(t),c=e.length;if(c!==2*n)throw new TypeError('"'+t+'" signatures must be "'+2*n+'" bytes, saw "'+c+'"');var u=a(e,0,n),l=a(e,n,e.length),d=n-u,h=n-l,f=2+d+1+1+h,p=f<o,g=r.allocUnsafe((p?2:3)+f),m=0;return g[m++]=48,p?g[m++]=f:(g[m++]=129,g[m++]=255&f),g[m++]=2,g[m++]=d,u<0?(g[m++]=0,m+=e.copy(g,m,0,n)):m+=e.copy(g,m,u,n),g[m++]=2,g[m++]=h,l<0?(g[m++]=0,e.copy(g,m,n)):e.copy(g,m,n+l),g}}},3527:e=>{"use strict";function t(e){return(e/8|0)+(e%8==0?0:1)}var n={ES256:t(256),ES384:t(384),ES512:t(521)};e.exports=function(e){var t=n[e];if(t)return t;throw new Error('Unknown algorithm "'+e+'"')}},7260:(e,t,n)=>{var r=n(5747);e.exports=function(e,t){t=t||{};var n=r.decode(e,t);if(!n)return null;var i=n.payload;if("string"==typeof i)try{var o=JSON.parse(i);null!==o&&"object"==typeof o&&(i=o)}catch(e){}return!0===t.complete?{header:n.header,payload:i,signature:n.signature}:i}},4040:(e,t,n)=>{e.exports={decode:n(7260),verify:n(1691),sign:n(7651),JsonWebTokenError:n(1741),NotBeforeError:n(3726),TokenExpiredError:n(8980)}},1741:e=>{var t=function(e,t){Error.call(this,e),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=e,t&&(this.inner=t)};(t.prototype=Object.create(Error.prototype)).constructor=t,e.exports=t},3726:(e,t,n)=>{var r=n(1741),i=function(e,t){r.call(this,e),this.name="NotBeforeError",this.date=t};(i.prototype=Object.create(r.prototype)).constructor=i,e.exports=i},8980:(e,t,n)=>{var r=n(1741),i=function(e,t){r.call(this,e),this.name="TokenExpiredError",this.expiredAt=t};(i.prototype=Object.create(r.prototype)).constructor=i,e.exports=i},1977:(e,t,n)=>{const r=n(9589);e.exports=r.satisfies(process.version,">=15.7.0")},4977:(e,t,n)=>{var r=n(9589);e.exports=r.satisfies(process.version,"^6.12.0 || >=8.0.0")},4623:(e,t,n)=>{const r=n(9589);e.exports=r.satisfies(process.version,">=16.9.0")},855:(e,t,n)=>{var r=n(6585);e.exports=function(e,t){var n=t||Math.floor(Date.now()/1e3);if("string"==typeof e){var i=r(e);if(void 0===i)return;return Math.floor(n+i/1e3)}return"number"==typeof e?n+e:void 0}},7019:(e,t,n)=>{const r=n(1977),i=n(4623),o={ec:["ES256","ES384","ES512"],rsa:["RS256","PS256","RS384","PS384","RS512","PS512"],"rsa-pss":["PS256","PS384","PS512"]},s={ES256:"prime256v1",ES384:"secp384r1",ES512:"secp521r1"};e.exports=function(e,t){if(!e||!t)return;const n=t.asymmetricKeyType;if(!n)return;const a=o[n];if(!a)throw new Error(`Unknown key type "${n}".`);if(!a.includes(e))throw new Error(`"alg" parameter for "${n}" key type must be one of: ${a.join(", ")}.`);if(r)switch(n){case"ec":const n=t.asymmetricKeyDetails.namedCurve,r=s[e];if(n!==r)throw new Error(`"alg" parameter "${e}" requires curve "${r}".`);break;case"rsa-pss":if(i){const n=parseInt(e.slice(-3),10),{hashAlgorithm:r,mgf1HashAlgorithm:i,saltLength:o}=t.asymmetricKeyDetails;if(r!==`sha${n}`||i!==r)throw new Error(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${e}.`);if(void 0!==o&&o>n>>3)throw new Error(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${e}.`)}}}},7651:(e,t,n)=>{const r=n(855),i=n(4977),o=n(7019),s=n(5747),a=n(6111),c=n(7914),u=n(8928),l=n(3639),d=n(9001),h=n(5931),f=n(7083),{KeyObject:p,createSecretKey:g,createPrivateKey:m}=n(6982),v=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];i&&v.splice(3,0,"PS256","PS384","PS512");const y={expiresIn:{isValid:function(e){return u(e)||h(e)&&e},message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:function(e){return u(e)||h(e)&&e},message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:function(e){return h(e)||Array.isArray(e)},message:'"audience" must be a string or array'},algorithm:{isValid:a.bind(null,v),message:'"algorithm" must be a valid string enum value'},header:{isValid:d,message:'"header" must be an object'},encoding:{isValid:h,message:'"encoding" must be a string'},issuer:{isValid:h,message:'"issuer" must be a string'},subject:{isValid:h,message:'"subject" must be a string'},jwtid:{isValid:h,message:'"jwtid" must be a string'},noTimestamp:{isValid:c,message:'"noTimestamp" must be a boolean'},keyid:{isValid:h,message:'"keyid" must be a string'},mutatePayload:{isValid:c,message:'"mutatePayload" must be a boolean'},allowInsecureKeySizes:{isValid:c,message:'"allowInsecureKeySizes" must be a boolean'},allowInvalidAsymmetricKeyTypes:{isValid:c,message:'"allowInvalidAsymmetricKeyTypes" must be a boolean'}},C={iat:{isValid:l,message:'"iat" should be a number of seconds'},exp:{isValid:l,message:'"exp" should be a number of seconds'},nbf:{isValid:l,message:'"nbf" should be a number of seconds'}};function I(e,t,n,r){if(!d(n))throw new Error('Expected "'+r+'" to be a plain object.');Object.keys(n).forEach((function(i){const o=e[i];if(o){if(!o.isValid(n[i]))throw new Error(o.message)}else if(!t)throw new Error('"'+i+'" is not allowed in "'+r+'"')}))}const A={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"},w=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"];e.exports=function(e,t,n,i){"function"==typeof n?(i=n,n={}):n=n||{};const a="object"==typeof e&&!Buffer.isBuffer(e),c=Object.assign({alg:n.algorithm||"HS256",typ:a?"JWT":void 0,kid:n.keyid},n.header);function u(e){if(i)return i(e);throw e}if(!t&&"none"!==n.algorithm)return u(new Error("secretOrPrivateKey must have a value"));if(null!=t&&!(t instanceof p))try{t=m(t)}catch(e){try{t=g("string"==typeof t?Buffer.from(t):t)}catch(e){return u(new Error("secretOrPrivateKey is not valid key material"))}}if(c.alg.startsWith("HS")&&"secret"!==t.type)return u(new Error(`secretOrPrivateKey must be a symmetric key when using ${c.alg}`));if(/^(?:RS|PS|ES)/.test(c.alg)){if("private"!==t.type)return u(new Error(`secretOrPrivateKey must be an asymmetric key when using ${c.alg}`));if(!n.allowInsecureKeySizes&&!c.alg.startsWith("ES")&&void 0!==t.asymmetricKeyDetails&&t.asymmetricKeyDetails.modulusLength<2048)return u(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${c.alg}`))}if(void 0===e)return u(new Error("payload is required"));if(a){try{!function(e){I(C,!0,e,"payload")}(e)}catch(e){return u(e)}n.mutatePayload||(e=Object.assign({},e))}else{const t=w.filter((function(e){return void 0!==n[e]}));if(t.length>0)return u(new Error("invalid "+t.join(",")+" option for "+typeof e+" payload"))}if(void 0!==e.exp&&void 0!==n.expiresIn)return u(new Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));if(void 0!==e.nbf&&void 0!==n.notBefore)return u(new Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));try{!function(e){I(y,!1,e,"options")}(n)}catch(e){return u(e)}if(!n.allowInvalidAsymmetricKeyTypes)try{o(c.alg,t)}catch(e){return u(e)}const l=e.iat||Math.floor(Date.now()/1e3);if(n.noTimestamp?delete e.iat:a&&(e.iat=l),void 0!==n.notBefore){try{e.nbf=r(n.notBefore,l)}catch(e){return u(e)}if(void 0===e.nbf)return u(new Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(void 0!==n.expiresIn&&"object"==typeof e){try{e.exp=r(n.expiresIn,l)}catch(e){return u(e)}if(void 0===e.exp)return u(new Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}Object.keys(A).forEach((function(t){const r=A[t];if(void 0!==n[t]){if(void 0!==e[r])return u(new Error('Bad "options.'+t+'" option. The payload already has an "'+r+'" property.'));e[r]=n[t]}}));const d=n.encoding||"utf8";if("function"!=typeof i){let r=s.sign({header:c,payload:e,secret:t,encoding:d});if(!n.allowInsecureKeySizes&&/^(?:RS|PS)/.test(c.alg)&&r.length<256)throw new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${c.alg}`);return r}i=i&&f(i),s.createSign({header:c,privateKey:t,payload:e,encoding:d}).once("error",i).once("done",(function(e){if(!n.allowInsecureKeySizes&&/^(?:RS|PS)/.test(c.alg)&&e.length<256)return i(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${c.alg}`));i(null,e)}))}},1691:(e,t,n)=>{const r=n(1741),i=n(3726),o=n(8980),s=n(7260),a=n(855),c=n(7019),u=n(4977),l=n(5747),{KeyObject:d,createSecretKey:h,createPublicKey:f}=n(6982),p=["RS256","RS384","RS512"],g=["ES256","ES384","ES512"],m=["RS256","RS384","RS512"],v=["HS256","HS384","HS512"];u&&(p.splice(p.length,0,"PS256","PS384","PS512"),m.splice(m.length,0,"PS256","PS384","PS512")),e.exports=function(e,t,n,u){let y;if("function"!=typeof n||u||(u=n,n={}),n||(n={}),n=Object.assign({},n),y=u||function(e,t){if(e)throw e;return t},n.clockTimestamp&&"number"!=typeof n.clockTimestamp)return y(new r("clockTimestamp must be a number"));if(void 0!==n.nonce&&("string"!=typeof n.nonce||""===n.nonce.trim()))return y(new r("nonce must be a non-empty string"));if(void 0!==n.allowInvalidAsymmetricKeyTypes&&"boolean"!=typeof n.allowInvalidAsymmetricKeyTypes)return y(new r("allowInvalidAsymmetricKeyTypes must be a boolean"));const C=n.clockTimestamp||Math.floor(Date.now()/1e3);if(!e)return y(new r("jwt must be provided"));if("string"!=typeof e)return y(new r("jwt must be a string"));const I=e.split(".");if(3!==I.length)return y(new r("jwt malformed"));let A;try{A=s(e,{complete:!0})}catch(e){return y(e)}if(!A)return y(new r("invalid token"));const w=A.header;let S;if("function"==typeof t){if(!u)return y(new r("verify must be called asynchronous if secret or public key is provided as a callback"));S=t}else S=function(e,n){return n(null,t)};return S(w,(function(t,s){if(t)return y(new r("error in secret or public key callback: "+t.message));const u=""!==I[2].trim();if(!u&&s)return y(new r("jwt signature is required"));if(u&&!s)return y(new r("secret or public key must be provided"));if(!u&&!n.algorithms)return y(new r('please specify "none" in "algorithms" to verify unsigned tokens'));if(null!=s&&!(s instanceof d))try{s=f(s)}catch(e){try{s=h("string"==typeof s?Buffer.from(s):s)}catch(e){return y(new r("secretOrPublicKey is not valid key material"))}}if(n.algorithms||("secret"===s.type?n.algorithms=v:["rsa","rsa-pss"].includes(s.asymmetricKeyType)?n.algorithms=m:"ec"===s.asymmetricKeyType?n.algorithms=g:n.algorithms=p),-1===n.algorithms.indexOf(A.header.alg))return y(new r("invalid algorithm"));if(w.alg.startsWith("HS")&&"secret"!==s.type)return y(new r(`secretOrPublicKey must be a symmetric key when using ${w.alg}`));if(/^(?:RS|PS|ES)/.test(w.alg)&&"public"!==s.type)return y(new r(`secretOrPublicKey must be an asymmetric key when using ${w.alg}`));if(!n.allowInvalidAsymmetricKeyTypes)try{c(w.alg,s)}catch(e){return y(e)}let S;try{S=l.verify(e,A.header.alg,s)}catch(e){return y(e)}if(!S)return y(new r("invalid signature"));const T=A.payload;if(void 0!==T.nbf&&!n.ignoreNotBefore){if("number"!=typeof T.nbf)return y(new r("invalid nbf value"));if(T.nbf>C+(n.clockTolerance||0))return y(new i("jwt not active",new Date(1e3*T.nbf)))}if(void 0!==T.exp&&!n.ignoreExpiration){if("number"!=typeof T.exp)return y(new r("invalid exp value"));if(C>=T.exp+(n.clockTolerance||0))return y(new o("jwt expired",new Date(1e3*T.exp)))}if(n.audience){const e=Array.isArray(n.audience)?n.audience:[n.audience];if(!(Array.isArray(T.aud)?T.aud:[T.aud]).some((function(t){return e.some((function(e){return e instanceof RegExp?e.test(t):e===t}))})))return y(new r("jwt audience invalid. expected: "+e.join(" or ")))}if(n.issuer&&("string"==typeof n.issuer&&T.iss!==n.issuer||Array.isArray(n.issuer)&&-1===n.issuer.indexOf(T.iss)))return y(new r("jwt issuer invalid. expected: "+n.issuer));if(n.subject&&T.sub!==n.subject)return y(new r("jwt subject invalid. expected: "+n.subject));if(n.jwtid&&T.jti!==n.jwtid)return y(new r("jwt jwtid invalid. expected: "+n.jwtid));if(n.nonce&&T.nonce!==n.nonce)return y(new r("jwt nonce invalid. expected: "+n.nonce));if(n.maxAge){if("number"!=typeof T.iat)return y(new r("iat required when maxAge is specified"));const e=a(n.maxAge,T.iat);if(void 0===e)return y(new r('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(C>=e+(n.clockTolerance||0))return y(new o("maxAge exceeded",new Date(1e3*e)))}if(!0===n.complete){const e=A.signature;return y(null,{header:w,payload:T,signature:e})}return y(null,T)}))}},8789:(e,t,n)=>{var r=n(1045),i=n(2861).Buffer,o=n(6982),s=n(2010),a=n(9023),c="secret must be a string or buffer",u="key must be a string or a buffer",l="key must be a string, a buffer or an object",d="function"==typeof o.createPublicKey;function h(e){if(!i.isBuffer(e)&&"string"!=typeof e){if(!d)throw m(u);if("object"!=typeof e)throw m(u);if("string"!=typeof e.type)throw m(u);if("string"!=typeof e.asymmetricKeyType)throw m(u);if("function"!=typeof e.export)throw m(u)}}function f(e){if(!i.isBuffer(e)&&"string"!=typeof e&&"object"!=typeof e)throw m(l)}function p(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function g(e){var t=4-(e=e.toString()).length%4;if(4!==t)for(var n=0;n<t;++n)e+="=";return e.replace(/\-/g,"+").replace(/_/g,"/")}function m(e){var t=[].slice.call(arguments,1),n=a.format.bind(a,e).apply(null,t);return new TypeError(n)}function v(e){var t;return t=e,i.isBuffer(t)||"string"==typeof t||(e=JSON.stringify(e)),e}function y(e){return function(t,n){!function(e){if(!i.isBuffer(e)){if("string"==typeof e)return e;if(!d)throw m(c);if("object"!=typeof e)throw m(c);if("secret"!==e.type)throw m(c);if("function"!=typeof e.export)throw m(c)}}(n),t=v(t);var r=o.createHmac("sha"+e,n);return p((r.update(t),r.digest("base64")))}}function C(e){return function(t,n,o){var s=y(e)(t,o);return r(i.from(n),i.from(s))}}function I(e){return function(t,n){f(n),t=v(t);var r=o.createSign("RSA-SHA"+e);return p((r.update(t),r.sign(n,"base64")))}}function A(e){return function(t,n,r){h(r),t=v(t),n=g(n);var i=o.createVerify("RSA-SHA"+e);return i.update(t),i.verify(r,n,"base64")}}function w(e){return function(t,n){f(n),t=v(t);var r=o.createSign("RSA-SHA"+e);return p((r.update(t),r.sign({key:n,padding:o.constants.RSA_PKCS1_PSS_PADDING,saltLength:o.constants.RSA_PSS_SALTLEN_DIGEST},"base64")))}}function S(e){return function(t,n,r){h(r),t=v(t),n=g(n);var i=o.createVerify("RSA-SHA"+e);return i.update(t),i.verify({key:r,padding:o.constants.RSA_PKCS1_PSS_PADDING,saltLength:o.constants.RSA_PSS_SALTLEN_DIGEST},n,"base64")}}function T(e){var t=I(e);return function(){var n=t.apply(null,arguments);return s.derToJose(n,"ES"+e)}}function E(e){var t=A(e);return function(n,r,i){return r=s.joseToDer(r,"ES"+e).toString("base64"),t(n,r,i)}}function _(){return function(){return""}}function b(){return function(e,t){return""===t}}d&&(u+=" or a KeyObject",c+="or a KeyObject"),e.exports=function(e){var t={hs:y,rs:I,ps:w,es:T,none:_},n={hs:C,rs:A,ps:S,es:E,none:b},r=e.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!r)throw m('"%s" is not a valid algorithm.\n  Supported algorithms are:\n  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".',e);var i=(r[1]||r[3]).toLowerCase(),o=r[2];return{sign:t[i](o),verify:n[i](o)}}},5747:(e,t,n)=>{var r=n(3387),i=n(7599);t.ALGORITHMS=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"],t.sign=r.sign,t.verify=i.verify,t.decode=i.decode,t.isValid=i.isValid,t.createSign=function(e){return new r(e)},t.createVerify=function(e){return new i(e)}},8948:(e,t,n)=>{var r=n(2861).Buffer,i=n(2203);function o(e){if(this.buffer=null,this.writable=!0,this.readable=!0,!e)return this.buffer=r.alloc(0),this;if("function"==typeof e.pipe)return this.buffer=r.alloc(0),e.pipe(this),this;if(e.length||"object"==typeof e)return this.buffer=e,this.writable=!1,process.nextTick(function(){this.emit("end",e),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof e+")")}n(9023).inherits(o,i),o.prototype.write=function(e){this.buffer=r.concat([this.buffer,r.from(e)]),this.emit("data",e)},o.prototype.end=function(e){e&&this.write(e),this.emit("end",e),this.emit("close"),this.writable=!1,this.readable=!1},e.exports=o},3387:(e,t,n)=>{var r=n(2861).Buffer,i=n(8948),o=n(8789),s=n(2203),a=n(2851),c=n(9023);function u(e,t){return r.from(e,t).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function l(e){var t=e.header,n=e.payload,r=e.secret||e.privateKey,i=e.encoding,s=o(t.alg),l=function(e,t,n){n=n||"utf8";var r=u(a(e),"binary"),i=u(a(t),n);return c.format("%s.%s",r,i)}(t,n,i),d=s.sign(l,r);return c.format("%s.%s",l,d)}function d(e){var t=e.secret||e.privateKey||e.key,n=new i(t);this.readable=!0,this.header=e.header,this.encoding=e.encoding,this.secret=this.privateKey=this.key=n,this.payload=new i(e.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}c.inherits(d,s),d.prototype.sign=function(){try{var e=l({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",e),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(e){this.readable=!1,this.emit("error",e),this.emit("close")}},d.sign=l,e.exports=d},2851:(e,t,n)=>{var r=n(181).Buffer;e.exports=function(e){return"string"==typeof e?e:"number"==typeof e||r.isBuffer(e)?e.toString():JSON.stringify(e)}},7599:(e,t,n)=>{var r=n(2861).Buffer,i=n(8948),o=n(8789),s=n(2203),a=n(2851),c=n(9023),u=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function l(e){var t=e.split(".",1)[0];return function(e){if(function(e){return"[object Object]"===Object.prototype.toString.call(e)}(e))return e;try{return JSON.parse(e)}catch(e){return}}(r.from(t,"base64").toString("binary"))}function d(e){return e.split(".")[2]}function h(e){return u.test(e)&&!!l(e)}function f(e,t,n){if(!t){var r=new Error("Missing algorithm parameter for jws.verify");throw r.code="MISSING_ALGORITHM",r}var i=d(e=a(e)),s=function(e){return e.split(".",2).join(".")}(e);return o(t).verify(s,i,n)}function p(e,t){if(t=t||{},!h(e=a(e)))return null;var n=l(e);if(!n)return null;var i=function(e,t){t=t||"utf8";var n=e.split(".")[1];return r.from(n,"base64").toString(t)}(e);return("JWT"===n.typ||t.json)&&(i=JSON.parse(i,t.encoding)),{header:n,payload:i,signature:d(e)}}function g(e){var t=(e=e||{}).secret||e.publicKey||e.key,n=new i(t);this.readable=!0,this.algorithm=e.algorithm,this.encoding=e.encoding,this.secret=this.publicKey=this.key=n,this.signature=new i(e.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}c.inherits(g,s),g.prototype.verify=function(){try{var e=f(this.signature.buffer,this.algorithm,this.key.buffer),t=p(this.signature.buffer,this.encoding);return this.emit("done",e,t),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(e){this.readable=!1,this.emit("error",e),this.emit("close")}},g.decode=p,g.isValid=h,g.verify=f,e.exports=g},6111:e=>{var t=1/0,n=9007199254740991,r="[object Function]",i="[object GeneratorFunction]",o=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=/^(?:0|[1-9]\d*)$/,l=parseInt;function d(e){return e!=e}var h,f,p=Object.prototype,g=p.hasOwnProperty,m=p.toString,v=p.propertyIsEnumerable,y=(h=Object.keys,f=Object,function(e){return h(f(e))}),C=Math.max;function I(e,t){return!!(t=null==t?n:t)&&("number"==typeof e||u.test(e))&&e>-1&&e%1==0&&e<t}var A=Array.isArray;function w(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=n}(e.length)&&!function(e){var t=S(e)?m.call(e):"";return t==r||t==i}(e)}function S(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function T(e){return!!e&&"object"==typeof e}e.exports=function(e,n,r,i){var u;e=w(e)?e:(u=e)?function(e,t){return function(t,n){for(var r=-1,i=t?t.length:0,o=Array(i);++r<i;)o[r]=(s=t[r],e[s]);var s;return o}(t)}(u,function(e){return w(e)?function(e,t){var n=A(e)||function(e){return function(e){return T(e)&&w(e)}(e)&&g.call(e,"callee")&&(!v.call(e,"callee")||"[object Arguments]"==m.call(e))}(e)?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],r=n.length,i=!!r;for(var o in e)!t&&!g.call(e,o)||i&&("length"==o||I(o,r))||n.push(o);return n}(e):function(e){if(n=(t=e)&&t.constructor,t!==("function"==typeof n&&n.prototype||p))return y(e);var t,n,r=[];for(var i in Object(e))g.call(e,i)&&"constructor"!=i&&r.push(i);return r}(e)}(u)):[],r=r&&!i?function(e){var n=function(e){return e?(e=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||T(e)&&"[object Symbol]"==m.call(e)}(e))return NaN;if(S(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=S(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(o,"");var n=a.test(e);return n||c.test(e)?l(e.slice(2),n?2:8):s.test(e)?NaN:+e}(e))===t||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}(e),r=n%1;return n==n?r?n-r:n:0}(r):0;var h=e.length;return r<0&&(r=C(h+r,0)),function(e){return"string"==typeof e||!A(e)&&T(e)&&"[object String]"==m.call(e)}(e)?r<=h&&e.indexOf(n,r)>-1:!!h&&function(e,t,n){if(t!=t)return function(e,t,n,r){for(var i=e.length,o=n+-1;++o<i;)if(t(e[o],o,e))return o;return-1}(e,d,n);for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}(e,n,r)>-1}},7914:e=>{var t=Object.prototype.toString;e.exports=function(e){return!0===e||!1===e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Boolean]"==t.call(e)}},8928:e=>{var t=1/0,n=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s=parseInt,a=Object.prototype.toString;function c(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}e.exports=function(e){return"number"==typeof e&&e==function(e){var u=function(e){return e?(e=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==a.call(e)}(e))return NaN;if(c(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=c(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(n,"");var u=i.test(e);return u||o.test(e)?s(e.slice(2),u?2:8):r.test(e)?NaN:+e}(e))===t||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}(e),l=u%1;return u==u?l?u-l:u:0}(e)}},3639:e=>{var t=Object.prototype.toString;e.exports=function(e){return"number"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Number]"==t.call(e)}},9001:e=>{var t,n,r=Function.prototype,i=Object.prototype,o=r.toString,s=i.hasOwnProperty,a=o.call(Object),c=i.toString,u=(t=Object.getPrototypeOf,n=Object,function(e){return t(n(e))});e.exports=function(e){if(!function(e){return!!e&&"object"==typeof e}(e)||"[object Object]"!=c.call(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e))return!1;var t=u(e);if(null===t)return!0;var n=s.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&o.call(n)==a}},5931:e=>{var t=Object.prototype.toString,n=Array.isArray;e.exports=function(e){return"string"==typeof e||!n(e)&&function(e){return!!e&&"object"==typeof e}(e)&&"[object String]"==t.call(e)}},7083:e=>{var t=1/0,n=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s=parseInt,a=Object.prototype.toString;function c(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}e.exports=function(e){return function(e,u){var l;if("function"!=typeof u)throw new TypeError("Expected a function");return e=function(e){var u=function(e){return e?(e=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==a.call(e)}(e))return NaN;if(c(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=c(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(n,"");var u=i.test(e);return u||o.test(e)?s(e.slice(2),u?2:8):r.test(e)?NaN:+e}(e))===t||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}(e),l=u%1;return u==u?l?u-l:u:0}(e),function(){return--e>0&&(l=u.apply(this,arguments)),e<=1&&(u=void 0),l}}(2,e)}},6585:e=>{var t=1e3,n=60*t,r=60*n,i=24*r,o=7*i;function s(e,t,n,r){var i=t>=1.5*n;return Math.round(e/n)+" "+r+(i?"s":"")}e.exports=function(e,a){a=a||{};var c,u,l=typeof e;if("string"===l&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var s=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(s){var a=parseFloat(s[1]);switch((s[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"weeks":case"week":case"w":return a*o;case"days":case"day":case"d":return a*i;case"hours":case"hour":case"hrs":case"hr":case"h":return a*r;case"minutes":case"minute":case"mins":case"min":case"m":return a*n;case"seconds":case"second":case"secs":case"sec":case"s":return a*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}(e);if("number"===l&&isFinite(e))return a.long?(c=e,(u=Math.abs(c))>=i?s(c,u,i,"day"):u>=r?s(c,u,r,"hour"):u>=n?s(c,u,n,"minute"):u>=t?s(c,u,t,"second"):c+" ms"):function(e){var o=Math.abs(e);return o>=i?Math.round(e/i)+"d":o>=r?Math.round(e/r)+"h":o>=n?Math.round(e/n)+"m":o>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},2861:(e,t,n)=>{var r=n(181),i=r.Buffer;function o(e,t){for(var n in e)t[n]=e[n]}function s(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(o(r,t),t.Buffer=s),s.prototype=Object.create(i.prototype),o(i,s),s.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},s.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},3904:(e,t,n)=>{const r=Symbol("SemVer ANY");class i{static get ANY(){return r}constructor(e,t){if(t=o(t),e instanceof i){if(e.loose===!!t.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),u("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===r?this.value="":this.value=this.operator+this.semver.version,u("comp",this)}parse(e){const t=this.options.loose?s[a.COMPARATORLOOSE]:s[a.COMPARATOR],n=e.match(t);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==n[1]?n[1]:"","="===this.operator&&(this.operator=""),n[2]?this.semver=new l(n[2],this.options.loose):this.semver=r}toString(){return this.value}test(e){if(u("Comparator.test",e,this.options.loose),this.semver===r||e===r)return!0;if("string"==typeof e)try{e=new l(e,this.options)}catch(e){return!1}return c(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof i))throw new TypeError("a Comparator is required");return""===this.operator?""===this.value||new d(e.value,t).test(this.value):""===e.operator?""===e.value||new d(this.value,t).test(e.semver):!((t=o(t)).includePrerelease&&("<0.0.0-0"===this.value||"<0.0.0-0"===e.value)||!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))||(!this.operator.startsWith(">")||!e.operator.startsWith(">"))&&(!this.operator.startsWith("<")||!e.operator.startsWith("<"))&&(this.semver.version!==e.semver.version||!this.operator.includes("=")||!e.operator.includes("="))&&!(c(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<"))&&!(c(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}}e.exports=i;const o=n(8587),{safeRe:s,t:a}=n(9718),c=n(2111),u=n(7272),l=n(3908),d=n(8311)},8311:(e,t,n)=>{class r{constructor(e,t){if(t=o(t),e instanceof r)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new r(e.raw,t);if(e instanceof s)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map((e=>this.parseRange(e.trim()))).filter((e=>e.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter((e=>!m(e[0]))),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const e of this.set)if(1===e.length&&v(e[0])){this.set=[e];break}}this.format()}format(){return this.range=this.set.map((e=>e.join(" ").trim())).join("||").trim(),this.range}toString(){return this.range}parseRange(e){const t=((this.options.includePrerelease&&p)|(this.options.loose&&g))+":"+e,n=i.get(t);if(n)return n;const r=this.options.loose,o=r?u[l.HYPHENRANGELOOSE]:u[l.HYPHENRANGE];e=e.replace(o,R(this.options.includePrerelease)),a("hyphen replace",e),e=e.replace(u[l.COMPARATORTRIM],d),a("comparator trim",e),e=e.replace(u[l.TILDETRIM],h),a("tilde trim",e),e=e.replace(u[l.CARETTRIM],f),a("caret trim",e);let c=e.split(" ").map((e=>C(e,this.options))).join(" ").split(/\s+/).map((e=>k(e,this.options)));r&&(c=c.filter((e=>(a("loose invalid filter",e,this.options),!!e.match(u[l.COMPARATORLOOSE]))))),a("range list",c);const v=new Map,y=c.map((e=>new s(e,this.options)));for(const e of y){if(m(e))return[e];v.set(e.value,e)}v.size>1&&v.has("")&&v.delete("");const I=[...v.values()];return i.set(t,I),I}intersects(e,t){if(!(e instanceof r))throw new TypeError("a Range is required");return this.set.some((n=>y(n,t)&&e.set.some((e=>y(e,t)&&n.every((n=>e.every((e=>n.intersects(e,t)))))))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new c(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(P(this.set[t],e,this.options))return!0;return!1}}e.exports=r;const i=new(n(8794)),o=n(8587),s=n(3904),a=n(7272),c=n(3908),{safeRe:u,t:l,comparatorTrimReplace:d,tildeTrimReplace:h,caretTrimReplace:f}=n(9718),{FLAG_INCLUDE_PRERELEASE:p,FLAG_LOOSE:g}=n(6874),m=e=>"<0.0.0-0"===e.value,v=e=>""===e.value,y=(e,t)=>{let n=!0;const r=e.slice();let i=r.pop();for(;n&&r.length;)n=r.every((e=>i.intersects(e,t))),i=r.pop();return n},C=(e,t)=>(a("comp",e,t),e=S(e,t),a("caret",e),e=A(e,t),a("tildes",e),e=E(e,t),a("xrange",e),e=b(e,t),a("stars",e),e),I=e=>!e||"x"===e.toLowerCase()||"*"===e,A=(e,t)=>e.trim().split(/\s+/).map((e=>w(e,t))).join(" "),w=(e,t)=>{const n=t.loose?u[l.TILDELOOSE]:u[l.TILDE];return e.replace(n,((t,n,r,i,o)=>{let s;return a("tilde",e,t,n,r,i,o),I(n)?s="":I(r)?s=`>=${n}.0.0 <${+n+1}.0.0-0`:I(i)?s=`>=${n}.${r}.0 <${n}.${+r+1}.0-0`:o?(a("replaceTilde pr",o),s=`>=${n}.${r}.${i}-${o} <${n}.${+r+1}.0-0`):s=`>=${n}.${r}.${i} <${n}.${+r+1}.0-0`,a("tilde return",s),s}))},S=(e,t)=>e.trim().split(/\s+/).map((e=>T(e,t))).join(" "),T=(e,t)=>{a("caret",e,t);const n=t.loose?u[l.CARETLOOSE]:u[l.CARET],r=t.includePrerelease?"-0":"";return e.replace(n,((t,n,i,o,s)=>{let c;return a("caret",e,t,n,i,o,s),I(n)?c="":I(i)?c=`>=${n}.0.0${r} <${+n+1}.0.0-0`:I(o)?c="0"===n?`>=${n}.${i}.0${r} <${n}.${+i+1}.0-0`:`>=${n}.${i}.0${r} <${+n+1}.0.0-0`:s?(a("replaceCaret pr",s),c="0"===n?"0"===i?`>=${n}.${i}.${o}-${s} <${n}.${i}.${+o+1}-0`:`>=${n}.${i}.${o}-${s} <${n}.${+i+1}.0-0`:`>=${n}.${i}.${o}-${s} <${+n+1}.0.0-0`):(a("no pr"),c="0"===n?"0"===i?`>=${n}.${i}.${o}${r} <${n}.${i}.${+o+1}-0`:`>=${n}.${i}.${o}${r} <${n}.${+i+1}.0-0`:`>=${n}.${i}.${o} <${+n+1}.0.0-0`),a("caret return",c),c}))},E=(e,t)=>(a("replaceXRanges",e,t),e.split(/\s+/).map((e=>_(e,t))).join(" ")),_=(e,t)=>{e=e.trim();const n=t.loose?u[l.XRANGELOOSE]:u[l.XRANGE];return e.replace(n,((n,r,i,o,s,c)=>{a("xRange",e,n,r,i,o,s,c);const u=I(i),l=u||I(o),d=l||I(s),h=d;return"="===r&&h&&(r=""),c=t.includePrerelease?"-0":"",u?n=">"===r||"<"===r?"<0.0.0-0":"*":r&&h?(l&&(o=0),s=0,">"===r?(r=">=",l?(i=+i+1,o=0,s=0):(o=+o+1,s=0)):"<="===r&&(r="<",l?i=+i+1:o=+o+1),"<"===r&&(c="-0"),n=`${r+i}.${o}.${s}${c}`):l?n=`>=${i}.0.0${c} <${+i+1}.0.0-0`:d&&(n=`>=${i}.${o}.0${c} <${i}.${+o+1}.0-0`),a("xRange return",n),n}))},b=(e,t)=>(a("replaceStars",e,t),e.trim().replace(u[l.STAR],"")),k=(e,t)=>(a("replaceGTE0",e,t),e.trim().replace(u[t.includePrerelease?l.GTE0PRE:l.GTE0],"")),R=e=>(t,n,r,i,o,s,a,c,u,l,d,h)=>`${n=I(r)?"":I(i)?`>=${r}.0.0${e?"-0":""}`:I(o)?`>=${r}.${i}.0${e?"-0":""}`:s?`>=${n}`:`>=${n}${e?"-0":""}`} ${c=I(u)?"":I(l)?`<${+u+1}.0.0-0`:I(d)?`<${u}.${+l+1}.0-0`:h?`<=${u}.${l}.${d}-${h}`:e?`<${u}.${l}.${+d+1}-0`:`<=${c}`}`.trim(),P=(e,t,n)=>{for(let n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(let n=0;n<e.length;n++)if(a(e[n].semver),e[n].semver!==s.ANY&&e[n].semver.prerelease.length>0){const r=e[n].semver;if(r.major===t.major&&r.minor===t.minor&&r.patch===t.patch)return!0}return!1}return!0}},3908:(e,t,n)=>{const r=n(7272),{MAX_LENGTH:i,MAX_SAFE_INTEGER:o}=n(6874),{safeRe:s,t:a}=n(9718),c=n(8587),{compareIdentifiers:u}=n(1123);class l{constructor(e,t){if(t=c(t),e instanceof l){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>i)throw new TypeError(`version is longer than ${i} characters`);r("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const n=e.trim().match(t.loose?s[a.LOOSE]:s[a.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<o)return t}return e})):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(r("SemVer.compare",this.version,this.options,e),!(e instanceof l)){if("string"==typeof e&&e===this.version)return 0;e=new l(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof l||(e=new l(e,this.options)),u(this.major,e.major)||u(this.minor,e.minor)||u(this.patch,e.patch)}comparePre(e){if(e instanceof l||(e=new l(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const n=this.prerelease[t],i=e.prerelease[t];if(r("prerelease compare",t,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return u(n,i)}while(++t)}compareBuild(e){e instanceof l||(e=new l(e,this.options));let t=0;do{const n=this.build[t],i=e.build[t];if(r("build compare",t,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return u(n,i)}while(++t)}inc(e,t,n){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,n),this.inc("pre",t,n);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,n),this.inc("pre",t,n);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const e=Number(n)?1:0;if(!t&&!1===n)throw new Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[e];else{let r=this.prerelease.length;for(;--r>=0;)"number"==typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);if(-1===r){if(t===this.prerelease.join(".")&&!1===n)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let r=[t,e];!1===n&&(r=[t]),0===u(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=r):this.prerelease=r}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}e.exports=l},7414:(e,t,n)=>{const r=n(144);e.exports=(e,t)=>{const n=r(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null}},2111:(e,t,n)=>{const r=n(4641),i=n(3999),o=n(5580),s=n(4089),a=n(7059),c=n(5200);e.exports=(e,t,n,u)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return r(e,n,u);case"!=":return i(e,n,u);case">":return o(e,n,u);case">=":return s(e,n,u);case"<":return a(e,n,u);case"<=":return c(e,n,u);default:throw new TypeError(`Invalid operator: ${t}`)}}},6170:(e,t,n)=>{const r=n(3908),i=n(144),{safeRe:o,t:s}=n(9718);e.exports=(e,t)=>{if(e instanceof r)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let n=null;if((t=t||{}).rtl){const r=t.includePrerelease?o[s.COERCERTLFULL]:o[s.COERCERTL];let i;for(;(i=r.exec(e))&&(!n||n.index+n[0].length!==e.length);)n&&i.index+i[0].length===n.index+n[0].length||(n=i),r.lastIndex=i.index+i[1].length+i[2].length;r.lastIndex=-1}else n=e.match(t.includePrerelease?o[s.COERCEFULL]:o[s.COERCE]);if(null===n)return null;const a=n[2],c=n[3]||"0",u=n[4]||"0",l=t.includePrerelease&&n[5]?`-${n[5]}`:"",d=t.includePrerelease&&n[6]?`+${n[6]}`:"";return i(`${a}.${c}.${u}${l}${d}`,t)}},909:(e,t,n)=>{const r=n(3908);e.exports=(e,t,n)=>{const i=new r(e,n),o=new r(t,n);return i.compare(o)||i.compareBuild(o)}},1763:(e,t,n)=>{const r=n(560);e.exports=(e,t)=>r(e,t,!0)},560:(e,t,n)=>{const r=n(3908);e.exports=(e,t,n)=>new r(e,n).compare(new r(t,n))},1832:(e,t,n)=>{const r=n(144);e.exports=(e,t)=>{const n=r(e,null,!0),i=r(t,null,!0),o=n.compare(i);if(0===o)return null;const s=o>0,a=s?n:i,c=s?i:n,u=!!a.prerelease.length;if(c.prerelease.length&&!u)return c.patch||c.minor?a.patch?"patch":a.minor?"minor":"major":"major";const l=u?"pre":"";return n.major!==i.major?l+"major":n.minor!==i.minor?l+"minor":n.patch!==i.patch?l+"patch":"prerelease"}},4641:(e,t,n)=>{const r=n(560);e.exports=(e,t,n)=>0===r(e,t,n)},5580:(e,t,n)=>{const r=n(560);e.exports=(e,t,n)=>r(e,t,n)>0},4089:(e,t,n)=>{const r=n(560);e.exports=(e,t,n)=>r(e,t,n)>=0},3007:(e,t,n)=>{const r=n(3908);e.exports=(e,t,n,i,o)=>{"string"==typeof n&&(o=i,i=n,n=void 0);try{return new r(e instanceof r?e.version:e,n).inc(t,i,o).version}catch(e){return null}}},7059:(e,t,n)=>{const r=n(560);e.exports=(e,t,n)=>r(e,t,n)<0},5200:(e,t,n)=>{const r=n(560);e.exports=(e,t,n)=>r(e,t,n)<=0},2938:(e,t,n)=>{const r=n(3908);e.exports=(e,t)=>new r(e,t).major},6254:(e,t,n)=>{const r=n(3908);e.exports=(e,t)=>new r(e,t).minor},3999:(e,t,n)=>{const r=n(560);e.exports=(e,t,n)=>0!==r(e,t,n)},144:(e,t,n)=>{const r=n(3908);e.exports=(e,t,n=!1)=>{if(e instanceof r)return e;try{return new r(e,t)}catch(e){if(!n)return null;throw e}}},4493:(e,t,n)=>{const r=n(3908);e.exports=(e,t)=>new r(e,t).patch},1729:(e,t,n)=>{const r=n(144);e.exports=(e,t)=>{const n=r(e,t);return n&&n.prerelease.length?n.prerelease:null}},9970:(e,t,n)=>{const r=n(560);e.exports=(e,t,n)=>r(t,e,n)},4277:(e,t,n)=>{const r=n(909);e.exports=(e,t)=>e.sort(((e,n)=>r(n,e,t)))},7638:(e,t,n)=>{const r=n(8311);e.exports=(e,t,n)=>{try{t=new r(t,n)}catch(e){return!1}return t.test(e)}},3927:(e,t,n)=>{const r=n(909);e.exports=(e,t)=>e.sort(((e,n)=>r(e,n,t)))},6953:(e,t,n)=>{const r=n(144);e.exports=(e,t)=>{const n=r(e,t);return n?n.version:null}},9589:(e,t,n)=>{const r=n(9718),i=n(6874),o=n(3908),s=n(1123),a=n(144),c=n(6953),u=n(7414),l=n(3007),d=n(1832),h=n(2938),f=n(6254),p=n(4493),g=n(1729),m=n(560),v=n(9970),y=n(1763),C=n(909),I=n(3927),A=n(4277),w=n(5580),S=n(7059),T=n(4641),E=n(3999),_=n(4089),b=n(5200),k=n(2111),R=n(6170),P=n(3904),O=n(8311),M=n(7638),x=n(7631),N=n(9628),D=n(270),L=n(1261),U=n(3874),F=n(7075),q=n(5571),H=n(5342),z=n(6780),j=n(2525),B=n(5032);e.exports={parse:a,valid:c,clean:u,inc:l,diff:d,major:h,minor:f,patch:p,prerelease:g,compare:m,rcompare:v,compareLoose:y,compareBuild:C,sort:I,rsort:A,gt:w,lt:S,eq:T,neq:E,gte:_,lte:b,cmp:k,coerce:R,Comparator:P,Range:O,satisfies:M,toComparators:x,maxSatisfying:N,minSatisfying:D,minVersion:L,validRange:U,outside:F,gtr:q,ltr:H,intersects:z,simplifyRange:j,subset:B,SemVer:o,re:r.re,src:r.src,tokens:r.t,SEMVER_SPEC_VERSION:i.SEMVER_SPEC_VERSION,RELEASE_TYPES:i.RELEASE_TYPES,compareIdentifiers:s.compareIdentifiers,rcompareIdentifiers:s.rcompareIdentifiers}},6874:e=>{const t=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:t,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}},7272:e=>{const t="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};e.exports=t},1123:e=>{const t=/^[0-9]+$/,n=(e,n)=>{const r=t.test(e),i=t.test(n);return r&&i&&(e=+e,n=+n),e===n?0:r&&!i?-1:i&&!r?1:e<n?-1:1};e.exports={compareIdentifiers:n,rcompareIdentifiers:(e,t)=>n(t,e)}},8794:e=>{e.exports=class{constructor(){this.max=1e3,this.map=new Map}get(e){const t=this.map.get(e);return void 0===t?void 0:(this.map.delete(e),this.map.set(e,t),t)}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&void 0!==t){if(this.map.size>=this.max){const e=this.map.keys().next().value;this.delete(e)}this.map.set(e,t)}return this}}},8587:e=>{const t=Object.freeze({loose:!0}),n=Object.freeze({});e.exports=e=>e?"object"!=typeof e?t:e:n},9718:(e,t,n)=>{const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:o}=n(6874),s=n(7272),a=(t=e.exports={}).re=[],c=t.safeRe=[],u=t.src=[],l=t.t={};let d=0;const h="[a-zA-Z0-9-]",f=[["\\s",1],["\\d",o],[h,i]],p=(e,t,n)=>{const r=(e=>{for(const[t,n]of f)e=e.split(`${t}*`).join(`${t}{0,${n}}`).split(`${t}+`).join(`${t}{1,${n}}`);return e})(t),i=d++;s(e,i,t),l[e]=i,u[i]=t,a[i]=new RegExp(t,n?"g":void 0),c[i]=new RegExp(r,n?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${h}*`),p("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${h}+`),p("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),p("FULL",`^${u[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),p("LOOSE",`^${u[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),p("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?`),p("COERCE",`${u[l.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",u[l.COERCEPLAIN]+`(?:${u[l.PRERELEASE]})?`+`(?:${u[l.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",u[l.COERCE],!0),p("COERCERTLFULL",u[l.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},5571:(e,t,n)=>{const r=n(7075);e.exports=(e,t,n)=>r(e,t,">",n)},6780:(e,t,n)=>{const r=n(8311);e.exports=(e,t,n)=>(e=new r(e,n),t=new r(t,n),e.intersects(t,n))},5342:(e,t,n)=>{const r=n(7075);e.exports=(e,t,n)=>r(e,t,"<",n)},9628:(e,t,n)=>{const r=n(3908),i=n(8311);e.exports=(e,t,n)=>{let o=null,s=null,a=null;try{a=new i(t,n)}catch(e){return null}return e.forEach((e=>{a.test(e)&&(o&&-1!==s.compare(e)||(o=e,s=new r(o,n)))})),o}},270:(e,t,n)=>{const r=n(3908),i=n(8311);e.exports=(e,t,n)=>{let o=null,s=null,a=null;try{a=new i(t,n)}catch(e){return null}return e.forEach((e=>{a.test(e)&&(o&&1!==s.compare(e)||(o=e,s=new r(o,n)))})),o}},1261:(e,t,n)=>{const r=n(3908),i=n(8311),o=n(5580);e.exports=(e,t)=>{e=new i(e,t);let n=new r("0.0.0");if(e.test(n))return n;if(n=new r("0.0.0-0"),e.test(n))return n;n=null;for(let t=0;t<e.set.length;++t){const i=e.set[t];let s=null;i.forEach((e=>{const t=new r(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":s&&!o(t,s)||(s=t);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}})),!s||n&&!o(n,s)||(n=s)}return n&&e.test(n)?n:null}},7075:(e,t,n)=>{const r=n(3908),i=n(3904),{ANY:o}=i,s=n(8311),a=n(7638),c=n(5580),u=n(7059),l=n(5200),d=n(4089);e.exports=(e,t,n,h)=>{let f,p,g,m,v;switch(e=new r(e,h),t=new s(t,h),n){case">":f=c,p=l,g=u,m=">",v=">=";break;case"<":f=u,p=d,g=c,m="<",v="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(a(e,t,h))return!1;for(let n=0;n<t.set.length;++n){const r=t.set[n];let s=null,a=null;if(r.forEach((e=>{e.semver===o&&(e=new i(">=0.0.0")),s=s||e,a=a||e,f(e.semver,s.semver,h)?s=e:g(e.semver,a.semver,h)&&(a=e)})),s.operator===m||s.operator===v)return!1;if((!a.operator||a.operator===m)&&p(e,a.semver))return!1;if(a.operator===v&&g(e,a.semver))return!1}return!0}},2525:(e,t,n)=>{const r=n(7638),i=n(560);e.exports=(e,t,n)=>{const o=[];let s=null,a=null;const c=e.sort(((e,t)=>i(e,t,n)));for(const e of c)r(e,t,n)?(a=e,s||(s=e)):(a&&o.push([s,a]),a=null,s=null);s&&o.push([s,null]);const u=[];for(const[e,t]of o)e===t?u.push(e):t||e!==c[0]?t?e===c[0]?u.push(`<=${t}`):u.push(`${e} - ${t}`):u.push(`>=${e}`):u.push("*");const l=u.join(" || "),d="string"==typeof t.raw?t.raw:String(t);return l.length<d.length?l:t}},5032:(e,t,n)=>{const r=n(8311),i=n(3904),{ANY:o}=i,s=n(7638),a=n(560),c=[new i(">=0.0.0-0")],u=[new i(">=0.0.0")],l=(e,t,n)=>{if(e===t)return!0;if(1===e.length&&e[0].semver===o){if(1===t.length&&t[0].semver===o)return!0;e=n.includePrerelease?c:u}if(1===t.length&&t[0].semver===o){if(n.includePrerelease)return!0;t=u}const r=new Set;let i,l,f,p,g,m,v;for(const t of e)">"===t.operator||">="===t.operator?i=d(i,t,n):"<"===t.operator||"<="===t.operator?l=h(l,t,n):r.add(t.semver);if(r.size>1)return null;if(i&&l){if(f=a(i.semver,l.semver,n),f>0)return null;if(0===f&&(">="!==i.operator||"<="!==l.operator))return null}for(const e of r){if(i&&!s(e,String(i),n))return null;if(l&&!s(e,String(l),n))return null;for(const r of t)if(!s(e,String(r),n))return!1;return!0}let y=!(!l||n.includePrerelease||!l.semver.prerelease.length)&&l.semver,C=!(!i||n.includePrerelease||!i.semver.prerelease.length)&&i.semver;y&&1===y.prerelease.length&&"<"===l.operator&&0===y.prerelease[0]&&(y=!1);for(const e of t){if(v=v||">"===e.operator||">="===e.operator,m=m||"<"===e.operator||"<="===e.operator,i)if(C&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===C.major&&e.semver.minor===C.minor&&e.semver.patch===C.patch&&(C=!1),">"===e.operator||">="===e.operator){if(p=d(i,e,n),p===e&&p!==i)return!1}else if(">="===i.operator&&!s(i.semver,String(e),n))return!1;if(l)if(y&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===y.major&&e.semver.minor===y.minor&&e.semver.patch===y.patch&&(y=!1),"<"===e.operator||"<="===e.operator){if(g=h(l,e,n),g===e&&g!==l)return!1}else if("<="===l.operator&&!s(l.semver,String(e),n))return!1;if(!e.operator&&(l||i)&&0!==f)return!1}return!(i&&m&&!l&&0!==f||l&&v&&!i&&0!==f||C||y)},d=(e,t,n)=>{if(!e)return t;const r=a(e.semver,t.semver,n);return r>0?e:r<0||">"===t.operator&&">="===e.operator?t:e},h=(e,t,n)=>{if(!e)return t;const r=a(e.semver,t.semver,n);return r<0?e:r>0||"<"===t.operator&&"<="===e.operator?t:e};e.exports=(e,t,n={})=>{if(e===t)return!0;e=new r(e,n),t=new r(t,n);let i=!1;e:for(const r of e.set){for(const e of t.set){const t=l(r,e,n);if(i=i||null!==t,t)continue e}if(i)return!1}return!0}},7631:(e,t,n)=>{const r=n(8311);e.exports=(e,t)=>new r(e,t).set.map((e=>e.map((e=>e.value)).join(" ").trim().split(" ")))},3874:(e,t,n)=>{const r=n(8311);e.exports=(e,t)=>{try{return new r(e,t).range||"*"}catch(e){return null}}},2909:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExperimentationService=void 0;var r=n(7291);Object.defineProperty(t,"ExperimentationService",{enumerable:!0,get:function(){return r.ExperimentationService}})},7291:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExperimentationService=void 0;const r=n(2845),i=n(1924),o=n(5761);class s extends o.ExperimentationServiceAutoPolling{constructor(e){super(e.telemetry,e.filterProviders||[],null!=e.refetchInterval?e.refetchInterval:0,e.assignmentContextTelemetryPropertyName,e.telemetryEventName,e.storageKey,e.keyValueStorage),this.options=e,this.invokeInit()}init(){this.featureProviders=[],this.addFeatureProvider(new r.TasApiFeatureProvider(new i.HttpClient(this.options.endpoint),this.telemetry,this.filterProviders)),super.init()}}t.ExperimentationService=s,s.REFRESH_RATE_IN_MINUTES=30},5761:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExperimentationServiceAutoPolling=void 0;const r=n(1714),i=n(3257);class o extends r.ExperimentationServiceBase{constructor(e,t,n,r,o,s,a){if(super(e,r,o,s,a),this.telemetry=e,this.filterProviders=t,this.refreshRateMs=n,this.assignmentContextTelemetryPropertyName=r,this.telemetryEventName=o,this.storageKey=s,this.storage=a,n<1e3&&0!==n)throw new Error("The minimum refresh rate for polling is 1000 ms (1 second). If you wish to deactivate this auto-polling use value of 0.");n>0&&(this.pollingService=new i.PollingService(n),this.pollingService.OnPollTick((async()=>{await super.getFeaturesAsync()})))}init(){this.pollingService?this.pollingService.StartPolling(!0):super.getFeaturesAsync()}async getFeaturesAsync(e=!1){if(this.pollingService){this.pollingService.StopPolling();let t=await super.getFeaturesAsync(e);return this.pollingService.StartPolling(),t}return await super.getFeaturesAsync(e)}}t.ExperimentationServiceAutoPolling=o},1714:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExperimentationServiceBase=void 0;const r=n(8823);t.ExperimentationServiceBase=class{get features(){return this._features}set features(e){this._features=e,this.telemetry&&this.telemetry.setSharedProperty(this.assignmentContextTelemetryPropertyName,this.features.assignmentContext)}constructor(e,t,n,i,o){this.telemetry=e,this.assignmentContextTelemetryPropertyName=t,this.telemetryEventName=n,this.storageKey=i,this.storage=o,this.featuresConsumed=!1,this.cachedTelemetryEvents=[],this._features={features:[],assignmentContext:"",configs:[]},this.storageKey||(this.storageKey="ABExp.Features"),this.storage||(o=new r.MemoryKeyValueStorage),this.loadCachePromise=this.loadCachedFeatureData(),this.initializePromise=this.loadCachePromise,this.initialFetch=new Promise(((e,t)=>{this.resolveInitialFetchPromise=e}))}async getFeaturesAsync(e=!1){if(null!=this.fetchPromise){try{await this.fetchPromise}catch(e){}return this.features}if(!this.featureProviders||0===this.featureProviders.length)return Promise.resolve({features:[],assignmentContext:"",configs:[]});try{this.fetchPromise=Promise.all(this.featureProviders.map((async e=>await e.getFeatures())));const t=await this.fetchPromise;this.updateFeatures(t,e)}catch(e){}return this.fetchPromise=void 0,this.resolveInitialFetchPromise&&(this.resolveInitialFetchPromise(),this.resolveInitialFetchPromise=void 0),this.features}updateFeatures(e,t=!1){let n={features:[],assignmentContext:"",configs:[]};for(let t of e){for(let e of t.features)n.features.includes(e)||n.features.push(e);for(let e of t.configs){const t=n.configs.find((t=>t.Id===e.Id));t?t.Parameters=Object.assign(Object.assign({},t.Parameters),e.Parameters):n.configs.push(e)}n.assignmentContext+=t.assignmentContext}!t&&this.featuresConsumed||(this.features=n),this.storage&&this.storage.setValue(this.storageKey,n)}async loadCachedFeatureData(){let e;this.storage&&(e=await this.storage.getValue(this.storageKey),void 0!==e&&void 0===e.configs&&(e.configs=[])),0===this.features.features.length&&(this.features=e||{features:[],assignmentContext:"",configs:[]})}isFlightEnabled(e){return this.featuresConsumed=!0,this.PostEventToTelemetry(e),this.features.features.includes(e)}async isCachedFlightEnabled(e){return await this.loadCachePromise,this.featuresConsumed=!0,this.PostEventToTelemetry(e),this.features.features.includes(e)}async isFlightEnabledAsync(e){const t=await this.getFeaturesAsync(!0);return this.featuresConsumed=!0,this.PostEventToTelemetry(e),t.features.includes(e)}getTreatmentVariable(e,t){this.featuresConsumed=!0,this.PostEventToTelemetry(`${e}.${t}`);const n=this.features.configs.find((t=>t.Id===e));return null==n?void 0:n.Parameters[t]}async getTreatmentVariableAsync(e,t,n){if(n){const n=this.featuresConsumed,r=this.getTreatmentVariable(e,t);if(void 0!==r)return r;this.featuresConsumed=n}return await this.getFeaturesAsync(!0),this.getTreatmentVariable(e,t)}PostEventToTelemetry(e){this.cachedTelemetryEvents.includes(e)||(this.telemetry.postEvent(this.telemetryEventName,new Map([["ABExp.queriedFeature",e]])),this.cachedTelemetryEvents.push(e))}invokeInit(){this.init()}addFeatureProvider(...e){if(null!=e&&null!=this.featureProviders)for(let t of e)this.featureProviders.push(t)}}},6790:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseFeatureProvider=void 0,t.BaseFeatureProvider=class{constructor(e){this.telemetry=e,this.isFetching=!1}async getFeatures(){if(this.isFetching&&this.fetchPromise)return this.fetchPromise;this.fetchPromise=this.fetch();let e=await this.fetchPromise;return this.isFetching=!1,this.fetchPromise=void 0,e}}},4111:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FilteredFeatureProvider=void 0;const r=n(6790);class i extends r.BaseFeatureProvider{constructor(e,t){super(e),this.telemetry=e,this.filterProviders=t,this.cachedTelemetryEvents=[]}getFilters(){let e=new Map;for(let t of this.filterProviders){let n=t.getFilters();for(let t of n.keys()){let r=n.get(t);e.set(t,r)}}return e}PostEventToTelemetry(e){if(this.cachedTelemetryEvents.includes(e))return;const t=JSON.stringify(e);this.telemetry.postEvent("report-headers",new Map([["ABExp.headers",t]])),this.cachedTelemetryEvents.push(e)}}t.FilteredFeatureProvider=i},2845:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TasApiFeatureProvider=t.TASAPI_FETCHERROR_EVENTNAME=void 0;const r=n(4111);t.TASAPI_FETCHERROR_EVENTNAME="call-tas-error";const i="ErrorType";class o extends r.FilteredFeatureProvider{constructor(e,t,n){super(t,n),this.httpClient=e,this.telemetry=t,this.filterProviders=n}async fetch(){let e,n=this.getFilters(),r={};for(let e of n.keys()){const t=n.get(e);r[e]=t}try{e=await this.httpClient.get({headers:r})}catch(e){const n=e,r=new Map;n.responseReceived&&!n.responseOk?r.set(i,"ServerError"):!1===n.responseReceived?r.set(i,"NoResponse"):r.set(i,"GenericError"),this.telemetry.postEvent(t.TASAPI_FETCHERROR_EVENTNAME,r)}if(!e)throw Error(t.TASAPI_FETCHERROR_EVENTNAME);n.keys.length>0&&this.PostEventToTelemetry(r);const o=e.data;let s=o.Configs,a=[];for(let e of s)if(e.Parameters)for(let t of Object.keys(e.Parameters)){const n=t+(e.Parameters[t]?"":"cf");a.includes(n)||a.push(n)}return{features:a,assignmentContext:o.AssignmentContext,configs:s}}}t.TasApiFeatureProvider=o},1924:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HttpClient=t.FetchError=void 0;class n extends Error{constructor(e,t,n){super(e),this.responseReceived=t,this.responseOk=n}}t.FetchError=n,t.HttpClient=class{constructor(e){this.endpoint=e}async get(e){const t=await fetch(this.endpoint,{method:"GET",headers:null==e?void 0:e.headers});if(!t)throw new n("No response received",!1);if(!t.ok)throw new n("Response not ok",!0,!1);const r=await t.json();if(!r)throw new n("No data received",!1);return{data:r}}}},8823:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MemoryKeyValueStorage=void 0,t.MemoryKeyValueStorage=class{constructor(){this.storage=new Map}async getValue(e,t){return this.storage.has(e)?await Promise.resolve(this.storage.get(e)):await Promise.resolve(t||void 0)}setValue(e,t){this.storage.set(e,t)}}},3257:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PollingService=void 0,t.PollingService=class{constructor(e){this.fetchInterval=e}StopPolling(){clearInterval(this.intervalHandle),this.intervalHandle=void 0}OnPollTick(e){this.onTick=e}StartPolling(e=!1){this.intervalHandle&&this.StopPolling(),null!=this.onTick&&(e&&this.onTick().then((()=>{})).catch((()=>{})),this.intervalHandle=setInterval((async()=>{await this.onTick()}),this.fetchInterval),this.intervalHandle.unref&&this.intervalHandle.unref())}}},2107:(e,t,n)=>{"use strict";Object.defineProperty(t,"v4",{enumerable:!0,get:function(){return r.default}});i(n(8610)),i(n(3208));var r=i(n(4061));i(n(3358)),i(n(6348)),i(n(51)),i(n(129)),i(n(2298)),i(n(2356));function i(e){return e&&e.__esModule?e:{default:e}}},8435:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(6982))&&r.__esModule?r:{default:r};t.default=function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),i.default.createHash("md5").update(e).digest()}},6348:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default="00000000-0000-0000-0000-000000000000"},2356:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(129))&&r.__esModule?r:{default:r};t.default=function(e){if(!(0,i.default)(e))throw TypeError("Invalid UUID");let t;const n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n}},996:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},9614:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return s>o.length-16&&(i.default.randomFillSync(o),s=0),o.slice(s,s+=16)};var r,i=(r=n(6982))&&r.__esModule?r:{default:r};const o=new Uint8Array(256);let s=o.length},622:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(6982))&&r.__esModule?r:{default:r};t.default=function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),i.default.createHash("sha1").update(e).digest()}},2298:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(129))&&r.__esModule?r:{default:r};const o=[];for(let e=0;e<256;++e)o.push((e+256).toString(16).substr(1));t.default=function(e,t=0){const n=(o[e[t+0]]+o[e[t+1]]+o[e[t+2]]+o[e[t+3]]+"-"+o[e[t+4]]+o[e[t+5]]+"-"+o[e[t+6]]+o[e[t+7]]+"-"+o[e[t+8]]+o[e[t+9]]+"-"+o[e[t+10]]+o[e[t+11]]+o[e[t+12]]+o[e[t+13]]+o[e[t+14]]+o[e[t+15]]).toLowerCase();if(!(0,i.default)(n))throw TypeError("Stringified UUID is invalid");return n}},8610:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(9614)),i=o(n(2298));function o(e){return e&&e.__esModule?e:{default:e}}let s,a,c=0,u=0;t.default=function(e,t,n){let o=t&&n||0;const l=t||new Array(16);let d=(e=e||{}).node||s,h=void 0!==e.clockseq?e.clockseq:a;if(null==d||null==h){const t=e.random||(e.rng||r.default)();null==d&&(d=s=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==h&&(h=a=16383&(t[6]<<8|t[7]))}let f=void 0!==e.msecs?e.msecs:Date.now(),p=void 0!==e.nsecs?e.nsecs:u+1;const g=f-c+(p-u)/1e4;if(g<0&&void 0===e.clockseq&&(h=h+1&16383),(g<0||f>c)&&void 0===e.nsecs&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=f,u=p,a=h,f+=122192928e5;const m=(1e4*(268435455&f)+p)%4294967296;l[o++]=m>>>24&255,l[o++]=m>>>16&255,l[o++]=m>>>8&255,l[o++]=255&m;const v=f/4294967296*1e4&268435455;l[o++]=v>>>8&255,l[o++]=255&v,l[o++]=v>>>24&15|16,l[o++]=v>>>16&255,l[o++]=h>>>8|128,l[o++]=255&h;for(let e=0;e<6;++e)l[o+e]=d[e];return t||(0,i.default)(l)}},3208:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(1525)),i=o(n(8435));function o(e){return e&&e.__esModule?e:{default:e}}var s=(0,r.default)("v3",48,i.default);t.default=s},1525:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){function o(e,o,s,a){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),"string"==typeof o&&(o=(0,i.default)(o)),16!==o.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let c=new Uint8Array(16+e.length);if(c.set(o),c.set(e,o.length),c=n(c),c[6]=15&c[6]|t,c[8]=63&c[8]|128,s){a=a||0;for(let e=0;e<16;++e)s[a+e]=c[e];return s}return(0,r.default)(c)}try{o.name=e}catch(e){}return o.DNS=s,o.URL=a,o},t.URL=t.DNS=void 0;var r=o(n(2298)),i=o(n(2356));function o(e){return e&&e.__esModule?e:{default:e}}const s="6ba7b810-9dad-11d1-80b4-00c04fd430c8";t.DNS=s;const a="6ba7b811-9dad-11d1-80b4-00c04fd430c8";t.URL=a},4061:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(9614)),i=o(n(2298));function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t,n){const o=(e=e||{}).random||(e.rng||r.default)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=o[e];return t}return(0,i.default)(o)}},3358:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(1525)),i=o(n(622));function o(e){return e&&e.__esModule?e:{default:e}}var s=(0,r.default)("v5",80,i.default);t.default=s},129:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(996))&&r.__esModule?r:{default:r};t.default=function(e){return"string"==typeof e&&i.default.test(e)}},51:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(129))&&r.__esModule?r:{default:r};t.default=function(e){if(!(0,i.default)(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},1566:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TargetPopulation=t.getExperimentationServiceAsync=t.getExperimentationService=void 0;var r=n(2493);Object.defineProperty(t,"getExperimentationService",{enumerable:!0,get:function(){return r.getExperimentationService}}),Object.defineProperty(t,"getExperimentationServiceAsync",{enumerable:!0,get:function(){return r.getExperimentationServiceAsync}});var i=n(8967);Object.defineProperty(t,"TargetPopulation",{enumerable:!0,get:function(){return i.TargetPopulation}})},8142:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MementoKeyValueStorage=void 0,t.MementoKeyValueStorage=class{constructor(e){this.mementoGlobalStorage=e}async getValue(e,t){return await this.mementoGlobalStorage.get(e)||t}setValue(e,t){this.mementoGlobalStorage.update(e,t)}}},9052:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.initializePromise=Promise.resolve(),this.initialFetch=Promise.resolve()}isFlightEnabled(e){return!1}isCachedFlightEnabled(e){return Promise.resolve(!1)}isFlightEnabledAsync(e){return Promise.resolve(!1)}getTreatmentVariable(e,t){}getTreatmentVariableAsync(e,t){return Promise.resolve(void 0)}}},8967:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TargetPopulation=t.Filters=t.VSCodeFilterProvider=void 0;const r=n(1398);class i{constructor(e,t,n){this.extensionName=e,this.extensionVersion=t,this.targetPopulation=n}static trimVersionSuffix(e){return e.split(/\-[a-zA-Z0-9]+$/)[0]}getFilterValue(e){switch(e){case o.ApplicationVersion:return i.trimVersionSuffix(r.version);case o.Build:return r.env.appName;case o.ClientId:return r.env.machineId;case o.ExtensionName:return this.extensionName;case o.ExtensionVersion:return i.trimVersionSuffix(this.extensionVersion);case o.Language:return r.env.language;case o.TargetPopulation:return this.targetPopulation;default:return""}}getFilters(){let e=new Map,t=Object.values(o);for(let n of t)e.set(n,this.getFilterValue(n));return e}}var o,s;t.VSCodeFilterProvider=i,function(e){e.Market="X-MSEdge-Market",e.CorpNet="X-FD-Corpnet",e.ApplicationVersion="X-VSCode-AppVersion",e.Build="X-VSCode-Build",e.ClientId="X-MSEdge-ClientId",e.ExtensionName="X-VSCode-ExtensionName",e.ExtensionVersion="X-VSCode-ExtensionVersion",e.Language="X-VSCode-Language",e.TargetPopulation="X-VSCode-TargetPopulation"}(o||(t.Filters=o={})),function(e){e.Team="team",e.Internal="internal",e.Insiders="insider",e.Public="public"}(s||(t.TargetPopulation=s={}))},2493:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getExperimentationServiceAsync=t.getExperimentationService=void 0;const r=n(8967),i=n(2909),o=n(1398),s=n(8142),a=n(9052);function c(e,t,n,c,u,...l){if(!u)throw new Error("Memento storage was not provided.");const d=o.workspace.getConfiguration("telemetry");if(!(void 0===o.env.isTelemetryEnabled?d.get("enableTelemetry",!0):o.env.isTelemetryEnabled))return new a.default;const h=[new r.VSCodeFilterProvider(e,t,n),...l],f=new s.MementoKeyValueStorage(u);return new i.ExperimentationService({filterProviders:h,telemetry:c,storageKey:"VSCode.ABExp.FeatureData",keyValueStorage:f,featuresTelemetryPropertyName:"",assignmentContextTelemetryPropertyName:"abexp.assignmentcontext",telemetryEventName:"query-expfeature",endpoint:"https://default.exp-tas.com/vscode/ab",refetchInterval:18e5})}t.getExperimentationService=c,t.getExperimentationServiceAsync=async function(e,t,n,r,i,...o){const s=c(e,t,n,r,i,...o);return await s.initializePromise,s}},2556:(e,t,n)=>{const r=n(9896),i=n(6928),o=i.join(__dirname,"path.txt");e.exports=function(){let e;if(r.existsSync(o)&&(e=r.readFileSync(o,"utf-8")),process.env.ELECTRON_OVERRIDE_DIST_PATH)return i.join(process.env.ELECTRON_OVERRIDE_DIST_PATH,e||"electron");if(e)return i.join(__dirname,"dist",e);throw new Error("Electron failed to install correctly, please delete node_modules/electron and try installing again")}()},8447:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AzureActiveDirectoryService=t.REFRESH_NETWORK_FAILURE=void 0;const r=n(1398),i=n(6928),o=n(9529),s=n(1619),a=n(5951),c=n(1589),u=n(2866),l=n(3034),d=n(8197),h="https://vscode.dev/redirect",f=d.Environment.AzureCloud.activeDirectoryEndpointUrl,p="aebc6443-996d-45c2-90f0-388ff96faa56";t.REFRESH_NETWORK_FAILURE="Network failure";class g{constructor(e,t,n,i,o,a){this._logger=e,this._uriHandler=n,this._tokenStorage=i,this._telemetryReporter=o,this._env=a,this._tokens=[],this._refreshTimeouts=new Map,this._sessionChangeEmitter=new r.EventEmitter,this._pendingNonces=new Map,this._codeExchangePromises=new Map,this._codeVerfifiers=new Map,this._pendingTokensToStore=new Map,this._sequencer=new s.SequencerByKey,t.subscriptions.push(this._tokenStorage.onDidChangeInOtherWindow((e=>this.checkForUpdates(e)))),t.subscriptions.push(r.window.onDidChangeWindowState((async e=>e.focused&&await this.storePendingTokens())));const c=new s.IntervalTimer;c.cancelAndSet((()=>!r.window.state.focused&&this.storePendingTokens()),18e6+Math.floor(3e4*Math.random())),t.subscriptions.push(c)}async initialize(){this._logger.trace("Reading sessions from secret storage...");const e=await this._tokenStorage.getAll((e=>this.sessionMatchesEndpoint(e)));this._logger.trace(`Got ${e.length} stored sessions`);const n=e.map((async e=>{this._logger.trace(`[${e.scope}] '${e.id}' Read stored session`);const n=e.scope.split(" "),i={scopes:n,scopeStr:e.scope,scopesToSend:n.filter((e=>!e.startsWith("VSCODE_"))).join(" "),clientId:this.getClientId(n),tenant:this.getTenantId(n)};try{await this.refreshToken(e.refreshToken,i,e.id)}catch(n){n.message===t.REFRESH_NETWORK_FAILURE?this._tokens.push({accessToken:void 0,refreshToken:e.refreshToken,account:{...e.account,type:"unknown"},scope:e.scope,sessionId:e.id}):(r.window.showErrorMessage(r.l10n.t("You have been signed out because reading stored authentication information failed.")),this._logger.error(n),await this.removeSessionByIToken({accessToken:void 0,refreshToken:e.refreshToken,account:{...e.account,type:"unknown"},scope:e.scope,sessionId:e.id}))}})),i=await Promise.allSettled(n);for(const e of i)if("rejected"===e.status){this._logger.error(`Failed to initialize stored data: ${e.reason}`),this.clearSessions();break}for(const e of this._tokens)this._telemetryReporter.sendTelemetryEvent("account",{scopes:JSON.stringify(e.scope.replace(/[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}/i,"{guid}").split(" ")),accountType:e.account.type})}get onDidChangeSessions(){return this._sessionChangeEmitter.event}getSessions(e,t){if(!e){this._logger.info("Getting sessions for all scopes...");const e=this._tokens.filter((e=>!t?.label||e.account.label===t.label)).map((e=>this.convertToSessionSync(e)));return this._logger.info(`Got ${e.length} sessions for all scopes${t?` for account '${t.label}'`:""}...`),Promise.resolve(e)}let n=[...e];n.includes("openid")||n.push("openid"),n.includes("email")||n.push("email"),n.includes("profile")||n.push("profile"),n.includes("offline_access")||n.push("offline_access"),n=n.sort();const r=n.join(" "),i={clientId:this.getClientId(e),originalScopes:e,scopes:n,scopeStr:r,scopesToSend:n.filter((e=>!e.startsWith("VSCODE_"))).join(" "),tenant:this.getTenantId(e)};return this._logger.trace(`[${i.scopeStr}] Queued getting sessions`+t?` for ${t?.label}`:""),this._sequencer.queue(r,(()=>this.doGetSessions(i,t)))}async doGetSessions(e,t){this._logger.info(`[${e.scopeStr}] Getting sessions`+t?` for ${t?.label}`:"");const n=this._tokens.filter((t=>t.scope===e.scopeStr)).filter((e=>!t?.label||e.account.label===t.label));if(!n.length){let r;for(const n of this._tokens)if(n.refreshToken&&(!t?.label||n.account.label===t.label)){if(e.clientId===p&&!n.scope.includes("VSCODE_CLIENT_ID")){r=n;break}if(e.clientId!==p&&n.scope.includes(`VSCODE_CLIENT_ID:${e.clientId}`)){r=n;break}}if(r){this._logger.trace(`[${e.scopeStr}] '${r.sessionId}' Found a matching token with a different scopes '${r.scope}'. Attempting to get a new session using the existing session.`);try{const t=await this.doRefreshToken(r.refreshToken,e);this._sessionChangeEmitter.fire({added:[this.convertToSessionSync(t)],removed:[],changed:[]}),n.push(t)}catch(t){this._logger.error(`[${e.scopeStr}] Attempted to get a new session using the existing session with scopes '${r.scope}' but it failed due to: ${t.message??t}`)}}}return this._logger.info(`[${e.scopeStr}] Got ${n.length} sessions`),(await Promise.allSettled(n.map((t=>this.convertToSession(t,e))))).filter((e=>"fulfilled"===e.status)).map((e=>e.value))}createSession(e,t){let n=[...e];n.includes("openid")||n.push("openid"),n.includes("email")||n.push("email"),n.includes("profile")||n.push("profile"),n.includes("offline_access")||n.push("offline_access"),n=n.sort();const r={originalScopes:e,scopes:n,scopeStr:n.join(" "),scopesToSend:n.filter((e=>!e.startsWith("VSCODE_"))).join(" "),clientId:this.getClientId(e),tenant:this.getTenantId(e)};return this._logger.trace(`[${r.scopeStr}] Queued creating session`),this._sequencer.queue(r.scopeStr,(()=>this.doCreateSession(r,t)))}async doCreateSession(e,t){this._logger.info(`[${e.scopeStr}] Creating session`+t?` for ${t?.label}`:"");const n=void 0!==r.env.remoteName,i=void 0===r.env.remoteName&&r.env.uiKind===r.UIKind.Web;if(i&&this._env.activeDirectoryEndpointUrl!==f)throw new Error("Sign in to non-public clouds is not supported on the web.");return await r.window.withProgress({location:r.ProgressLocation.Notification,title:r.l10n.t("Signing in to your account..."),cancellable:!0},(async(r,o)=>{if(n||i)return await this.createSessionWithoutLocalServer(e,t?.label,o);try{return await this.createSessionWithLocalServer(e,t?.label,o)}catch(n){if(this._logger.error(`[${e.scopeStr}] Error creating session: ${n}`),"Error listening to server"===n.message||"Closed"===n.message||"Timeout waiting for port"===n.message)return this.createSessionWithoutLocalServer(e,t?.label,o);throw n}}))}async createSessionWithLocalServer(e,t,n){this._logger.trace(`[${e.scopeStr}] Starting login flow with local server`);const o=(0,a.generateCodeVerifier)(),u=await(0,a.generateCodeChallenge)(o),l=new URLSearchParams({response_type:"code",response_mode:"query",client_id:e.clientId,redirect_uri:h,scope:e.scopesToSend,code_challenge_method:"S256",code_challenge:u});t?l.set("login_hint",t):l.set("prompt","select_account");const d=new URL(`${e.tenant}/oauth2/v2.0/authorize?${l.toString()}`,this._env.activeDirectoryEndpointUrl).toString(),f=new c.LoopbackAuthServer(i.join(__dirname,"../media"),d);let p;await f.start();try{r.env.openExternal(r.Uri.parse(`http://127.0.0.1:${f.port}/signin?nonce=${encodeURIComponent(f.nonce)}`));const{code:e}=await(0,s.raceCancellationAndTimeoutError)(f.waitForOAuthResponse(),n,3e5);p=e}finally{setTimeout((()=>{f.stop()}),5e3)}const g=await this.exchangeCodeForSession(p,o,e);return this._logger.trace(`[${e.scopeStr}] '${g.id}' Sending change event for added session`),this._sessionChangeEmitter.fire({added:[g],removed:[],changed:[]}),this._logger.info(`[${e.scopeStr}] '${g.id}' session successfully created!`),g}async createSessionWithoutLocalServer(e,t,n){this._logger.trace(`[${e.scopeStr}] Starting login flow without local server`);let i=await r.env.asExternalUri(r.Uri.parse(`${r.env.uriScheme}://vscode.microsoft-authentication`));const c=(0,a.generateCodeVerifier)(),u=new URLSearchParams(i.query);u.set("nonce",encodeURIComponent(c)),i=i.with({query:u.toString()});const l=encodeURIComponent(i.toString(!0)),d=(0,a.generateCodeVerifier)(),f=await(0,a.generateCodeChallenge)(d),p=new URL(`${e.tenant}/oauth2/v2.0/authorize`,this._env.activeDirectoryEndpointUrl),g=new URLSearchParams({response_type:"code",client_id:encodeURIComponent(e.clientId),response_mode:"query",redirect_uri:h,state:l,scope:e.scopesToSend,code_challenge_method:"S256",code_challenge:f});t?g.append("login_hint",t):g.append("prompt","select_account"),p.search=g.toString();const m=r.Uri.parse(p.toString());r.env.openExternal(m);const v=this._pendingNonces.get(e.scopeStr)||[];this._pendingNonces.set(e.scopeStr,[...v,c]);let y,C=this._codeExchangePromises.get(e.scopeStr);return C||((0,o.isSupportedEnvironment)(i)?C=this.handleCodeResponse(e):(y=r.window.createInputBox(),C=this.handleCodeInputBox(y,d,e)),this._codeExchangePromises.set(e.scopeStr,C)),this._codeVerfifiers.set(c,d),await(0,s.raceCancellationAndTimeoutError)(C,n,3e5).finally((()=>{this._pendingNonces.delete(e.scopeStr),this._codeExchangePromises.delete(e.scopeStr),this._codeVerfifiers.delete(c),y?.dispose()}))}async removeSessionById(e,t=!0){const n=this._tokens.findIndex((t=>t.sessionId===e));if(-1===n)return this._logger.warn(`'${e}' Session not found to remove`),Promise.resolve(void 0);const r=this._tokens.splice(n,1)[0];return this._logger.trace(`[${r.scope}] '${e}' Queued removing session`),this._sequencer.queue(r.scope,(()=>this.removeSessionByIToken(r,t)))}async clearSessions(){this._logger.trace("Logging out of all sessions"),this._tokens=[],await this._tokenStorage.deleteAll((e=>this.sessionMatchesEndpoint(e))),this._refreshTimeouts.forEach((e=>{clearTimeout(e)})),this._refreshTimeouts.clear(),this._logger.trace("All sessions logged out")}async removeSessionByIToken(e,t=!0){this._logger.info(`[${e.scope}] '${e.sessionId}' Logging out of session`),this.removeSessionTimeout(e.sessionId),t&&await this._tokenStorage.delete(e.sessionId);const n=this._tokens.findIndex((t=>t.sessionId===e.sessionId));-1!==n&&this._tokens.splice(n,1);const r=this.convertToSessionSync(e);return this._logger.trace(`[${e.scope}] '${e.sessionId}' Sending change event for session that was removed`),this._sessionChangeEmitter.fire({added:[],removed:[r],changed:[]}),this._logger.info(`[${e.scope}] '${e.sessionId}' Logged out of session successfully!`),r}setSessionTimeout(e,n,i,o){this._logger.trace(`[${i.scopeStr}] '${e}' Setting refresh timeout for ${o} milliseconds`),this.removeSessionTimeout(e),this._refreshTimeouts.set(e,setTimeout((async()=>{try{const t=await this.refreshToken(n,i,e);this._logger.trace(`[${i.scopeStr}] '${e}' Sending change event for session that was refreshed`),this._sessionChangeEmitter.fire({added:[],removed:[],changed:[this.convertToSessionSync(t)]}),this._logger.trace(`[${i.scopeStr}] '${e}' refresh timeout complete`)}catch(n){n.message!==t.REFRESH_NETWORK_FAILURE&&(r.window.showErrorMessage(r.l10n.t("You have been signed out because reading stored authentication information failed.")),await this.removeSessionById(e))}}),o))}removeSessionTimeout(e){const t=this._refreshTimeouts.get(e);t&&(clearTimeout(t),this._refreshTimeouts.delete(e))}convertToTokenSync(e,t,n){let r;this._logger.trace(`[${t.scopeStr}] '${n??"new"}' Attempting to parse token response.`);try{e.id_token?r=JSON.parse((0,u.base64Decode)(e.id_token.split(".")[1])):(this._logger.warn(`[${t.scopeStr}] '${n??"new"}' Attempting to parse access_token instead since no id_token was included in the response.`),r=JSON.parse((0,u.base64Decode)(e.access_token.split(".")[1])))}catch(e){throw e}const i=`${r.tid}/${r.oid??r.altsecid??""+r.ipd??""}`,o=n||`${i}/${(0,a.randomUUID)()}`;return this._logger.trace(`[${t.scopeStr}] '${o}' Token response parsed successfully.`),{expiresIn:e.expires_in,expiresAt:e.expires_in?Date.now()+1e3*e.expires_in:void 0,accessToken:e.access_token,idToken:e.id_token,refreshToken:e.refresh_token,scope:t.scopeStr,sessionId:o,account:{label:r.preferred_username??r.email??r.unique_name??"user@example.com",id:i,type:"9188040d-6c67-4c5b-b112-36a304b66dad"===r.tid||"f8cdef31-a31e-4b4a-93e4-5f571e91255a"===r.tid?"msa":"aad"}}}convertToSessionSync(e){return{id:e.sessionId,accessToken:e.accessToken,idToken:e.idToken,account:e.account,scopes:e.scope.split(" ")}}async convertToSession(e,t){if(e.accessToken&&(!e.expiresAt||e.expiresAt>Date.now()))return this._logger.trace(`[${t.scopeStr}] '${e.sessionId}' Token available from cache${e.expiresAt?`, expires in ${e.expiresAt-Date.now()} milliseconds`:""}.`),{id:e.sessionId,accessToken:e.accessToken,idToken:e.idToken,account:e.account,scopes:t.originalScopes??t.scopes};try{this._logger.trace(`[${t.scopeStr}] '${e.sessionId}' Token expired or unavailable, trying refresh`);const n=await this.refreshToken(e.refreshToken,t,e.sessionId);if(n.accessToken)return{id:e.sessionId,accessToken:n.accessToken,idToken:n.idToken,account:e.account,scopes:t.originalScopes??t.scopes};throw new Error}catch(e){throw new Error("Unavailable due to network problems")}}refreshToken(e,t,n){return this._logger.trace(`[${t.scopeStr}] '${n??"new"}' Queued refreshing token`),this._sequencer.queue(t.scopeStr,(()=>this.doRefreshToken(e,t,n)))}async doRefreshToken(e,n,r){this._logger.trace(`[${n.scopeStr}] '${r??"new"}' Refreshing token`);const i=new URLSearchParams({refresh_token:e,client_id:n.clientId,grant_type:"refresh_token",scope:n.scopesToSend}).toString();try{const e=await this.fetchTokenResponse(i,n),t=this.convertToTokenSync(e,n,r);return t.expiresIn&&this.setSessionTimeout(t.sessionId,t.refreshToken,n,t.expiresIn*g.REFRESH_TIMEOUT_MODIFIER),this.setToken(t,n),this._logger.trace(`[${n.scopeStr}] '${t.sessionId}' Token refresh success`),t}catch(i){if(i.message===t.REFRESH_NETWORK_FAILURE)throw r&&this.setSessionTimeout(r,e,n,g.POLLING_CONSTANT),i;throw this._logger.error(`[${n.scopeStr}] '${r??"new"}' Refreshing token failed: ${i.message}`),i}}getClientId(e){return e.reduce(((e,t)=>t.startsWith("VSCODE_CLIENT_ID:")?t.split("VSCODE_CLIENT_ID:")[1]:e),void 0)??p}getTenantId(e){return e.reduce(((e,t)=>t.startsWith("VSCODE_TENANT:")?t.split("VSCODE_TENANT:")[1]:e),void 0)??"organizations"}async handleCodeResponse(e){let t;return new Promise(((n,r)=>{t=this._uriHandler.event((async t=>{try{const r=new URLSearchParams(t.query);let i=r.get("code"),o=r.get("nonce");if(Array.isArray(i)&&(i=i[0]),!i)throw new Error("No code included in query");if(Array.isArray(o)&&(o=o[0]),!o)throw new Error("No nonce included in query");const s=this._pendingNonces.get(e.scopeStr)||[];if(!s.includes(o)&&!s.includes(decodeURIComponent(o)))throw new Error("Nonce does not match.");const a=this._codeVerfifiers.get(o)??this._codeVerfifiers.get(decodeURIComponent(o));if(!a)throw new Error("No available code verifier");const c=await this.exchangeCodeForSession(i,a,e);this._sessionChangeEmitter.fire({added:[c],removed:[],changed:[]}),this._logger.info(`[${e.scopeStr}] '${c.id}' session successfully created!`),n(c)}catch(e){r(e)}}))})).then((e=>(t.dispose(),e))).catch((e=>{throw t.dispose(),e}))}async handleCodeInputBox(e,t,n){return this._logger.trace(`[${n.scopeStr}] Starting login flow with input box`),e.ignoreFocusOut=!0,e.title=r.l10n.t("Microsoft Authentication"),e.prompt=r.l10n.t("Provide the authorization code to complete the sign in flow."),e.placeholder=r.l10n.t("Paste authorization code here..."),new Promise(((r,i)=>{e.show(),e.onDidAccept((async()=>{const i=e.value;if(i){e.dispose();const o=await this.exchangeCodeForSession(i,t,n);this._logger.trace(`[${n.scopeStr}] '${o.id}' sending session changed event because session was added.`),this._sessionChangeEmitter.fire({added:[o],removed:[],changed:[]}),this._logger.trace(`[${n.scopeStr}] '${o.id}' session successfully created!`),r(o)}})),e.onDidHide((()=>{e.value||(e.dispose(),i("Cancelled"))}))}))}async exchangeCodeForSession(e,t,n){let r;this._logger.trace(`[${n.scopeStr}] Exchanging login code for session`);try{const i=new URLSearchParams({grant_type:"authorization_code",code:e,client_id:n.clientId,scope:n.scopesToSend,code_verifier:t,redirect_uri:h}).toString(),o=await this.fetchTokenResponse(i,n);this._logger.trace(`[${n.scopeStr}] Exchanging code for token succeeded!`),r=this.convertToTokenSync(o,n)}catch(e){throw this._logger.error(`[${n.scopeStr}] Error exchanging code for token: ${e}`),e}return r.expiresIn&&this.setSessionTimeout(r.sessionId,r.refreshToken,n,r.expiresIn*g.REFRESH_TIMEOUT_MODIFIER),this.setToken(r,n),this._logger.trace(`[${n.scopeStr}] '${r.sessionId}' Exchanging login code for session succeeded!`),await this.convertToSession(r,n)}async fetchTokenResponse(e,n){let i;if(this._env.activeDirectoryEndpointUrl!==f)i=this._env.activeDirectoryEndpointUrl;else{const e=await r.commands.executeCommand("workbench.getCodeExchangeProxyEndpoints");i=e?.microsoft||this._env.activeDirectoryEndpointUrl}const o=new URL(`${n.tenant}/oauth2/v2.0/token`,i);let s=0;for(;s<=3;){let t,r;s++;try{t=await(0,l.default)(o.toString(),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:e})}catch(e){r=e.message??e}if(t&&!(t.status>499)){if(!t.ok)throw new Error(await t.text());return await t.json()}if(s>3){this._logger.error(`[${n.scopeStr}] Fetching token failed: ${t?await t.text():r}`);break}await new Promise((e=>setTimeout(e,5*s*s*1e3)))}throw new Error(t.REFRESH_NETWORK_FAILURE)}setToken(e,t){this._logger.trace(`[${t.scopeStr}] '${e.sessionId}' Setting token`);const n=this._tokens.findIndex((t=>t.sessionId===e.sessionId));n>-1?this._tokens.splice(n,1,e):this._tokens.push(e),this.storeToken(e,t)}async storeToken(e,t){if(!r.window.state.focused)return this._pendingTokensToStore.has(e.sessionId)?this._logger.trace(`[${t.scopeStr}] '${e.sessionId}' Window is not focused, replacing token to be stored`):this._logger.trace(`[${t.scopeStr}] '${e.sessionId}' Window is not focused, pending storage of token`),void this._pendingTokensToStore.set(e.sessionId,e);await this._tokenStorage.store(e.sessionId,{id:e.sessionId,refreshToken:e.refreshToken,scope:e.scope,account:e.account,endpoint:this._env.activeDirectoryEndpointUrl}),this._logger.trace(`[${t.scopeStr}] '${e.sessionId}' Stored token`)}async storePendingTokens(){if(0===this._pendingTokensToStore.size)return void this._logger.trace("No pending tokens to store");const e=[...this._pendingTokensToStore.values()];this._pendingTokensToStore.clear(),this._logger.trace(`Storing ${e.length} pending tokens...`),await Promise.allSettled(e.map((async e=>{this._logger.trace(`[${e.scope}] '${e.sessionId}' Storing pending token`),await this._tokenStorage.store(e.sessionId,{id:e.sessionId,refreshToken:e.refreshToken,scope:e.scope,account:e.account,endpoint:this._env.activeDirectoryEndpointUrl}),this._logger.trace(`[${e.scope}] '${e.sessionId}' Stored pending token`)}))),this._logger.trace("Done storing pending tokens")}async checkForUpdates(e){for(const n of e.added){const i=await this._tokenStorage.get(n);if(i){if(this.sessionMatchesEndpoint(i)&&!this._tokens.some((e=>e.scope===i.scope&&e.sessionId===i.id))&&i.refreshToken)try{const e=i.scope.split(" "),t={scopes:e,scopeStr:i.scope,scopesToSend:e.filter((e=>!e.startsWith("VSCODE_"))).join(" "),clientId:this.getClientId(e),tenant:this.getTenantId(e)};this._logger.trace(`[${t.scopeStr}] '${i.id}' Session added in another window`);const n=await this.refreshToken(i.refreshToken,t,i.id);this._logger.trace(`[${t.scopeStr}] '${n.sessionId}' Sending change event for session that was added`),this._sessionChangeEmitter.fire({added:[this.convertToSessionSync(n)],removed:[],changed:[]}),this._logger.trace(`[${t.scopeStr}] '${n.sessionId}' Session added in another window added here`);continue}catch(e){e.message!==t.REFRESH_NETWORK_FAILURE&&(r.window.showErrorMessage(r.l10n.t("You have been signed out because reading stored authentication information failed.")),await this.removeSessionById(i.id));continue}}else this._logger.error("session not found that was apparently just added")}for(const{value:t}of e.removed)this._logger.trace(`[${t.scope}] '${t.id}' Session removed in another window`),this.sessionMatchesEndpoint(t)?(await this.removeSessionById(t.id,!1),this._logger.trace(`[${t.scope}] '${t.id}' Session removed in another window removed here`)):this._logger.trace(`[${t.scope}] '${t.id}' Session doesn't match endpoint. Skipping...`);for(const t of e.updated)this._pendingTokensToStore.delete(t)&&this._logger.trace(`'${t}' Cancelled pending token storage because token was updated in another window`)}sessionMatchesEndpoint(e){return e.endpoint||(e.endpoint=f),e.endpoint===this._env.activeDirectoryEndpointUrl}}t.AzureActiveDirectoryService=g,g.REFRESH_TIMEOUT_MODIFIER=2e3/3,g.POLLING_CONSTANT=18e5},3683:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UriEventHandler=void 0;const r=n(1398);class i extends r.EventEmitter{constructor(){super(...arguments),this._disposable=r.window.registerUriHandler(this)}handleUri(e){this.fire(e)}dispose(){super.dispose(),this._disposable.dispose()}}t.UriEventHandler=i},2410:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BetterTokenStorage=void 0;const r=n(8377),i=n(1398);t.BetterTokenStorage=class{constructor(e,t){this.keylistKey=e,this._operationInProgress=!1,this._tokensPromise=Promise.resolve(new Map),this._didChangeInOtherWindow=new i.EventEmitter,this.onDidChangeInOtherWindow=this._didChangeInOtherWindow.event,this._secretStorage=t.secrets,t.subscriptions.push(t.secrets.onDidChange((e=>this.handleSecretChange(e)))),this.initialize()}initialize(){this._operationInProgress=!0,this._tokensPromise=new Promise(((e,t)=>{this._secretStorage.get(this.keylistKey).then((t=>{if(!t)return void e(new Map);const n=JSON.parse(t).map((e=>new Promise(((t,n)=>{this._secretStorage.get(e).then((n=>{t({key:e,value:n})}),n)}))));Promise.allSettled(n).then((t=>{const n=new Map;t.forEach((e=>{if("fulfilled"===e.status&&e.value.value){const t=this.parseSecret(e.value.value);n.set(e.value.key,t)}else"rejected"===e.status?r.default.error(e.reason):r.default.error("Key was not found in SecretStorage.")})),e(n)}))}),(t=>{r.default.error(t),e(new Map)}))})),this._operationInProgress=!1}async get(e){return(await this.getTokens()).get(e)}async getAll(e){const t=await this.getTokens(),n=new Array;for(const[r,i]of t)e&&!e(i)||n.push(i);return n}async store(e,t){const n=await this.getTokens(),i=!n.has(e);n.set(e,t);const o=this.serializeSecret(t);this._operationInProgress=!0,this._tokensPromise=new Promise(((t,s)=>{const a=[this._secretStorage.store(e,o)];i&&a.push(this.updateKeyList(n)),Promise.allSettled(a).then((e=>{e.forEach((e=>{"rejected"===e.status&&r.default.error(e.reason)})),t(n)}))})),this._operationInProgress=!1}async delete(e){const t=await this.getTokens();t.has(e)&&(t.delete(e),this._operationInProgress=!0,this._tokensPromise=new Promise(((n,i)=>{Promise.allSettled([this._secretStorage.delete(e),this.updateKeyList(t)]).then((e=>{e.forEach((e=>{"rejected"===e.status&&r.default.error(e.reason)})),n(t)}))})),this._operationInProgress=!1)}async deleteAll(e){const t=await this.getTokens(),n=[];for(const[r,i]of t)e&&!e(i)||n.push(this.delete(r));await Promise.all(n)}async updateKeyList(e){const t=[];for(const[n]of e)t.push(n);const n=JSON.stringify(t);await this._secretStorage.store(this.keylistKey,n)}parseSecret(e){return JSON.parse(e)}serializeSecret(e){return JSON.stringify(e)}async getTokens(){let e;do{e=await this._tokensPromise}while(this._operationInProgress);return e}async handleSecretChange(e){const t=e.key;if(t===this.keylistKey)return;const n=await this.getTokens();this._operationInProgress=!0,this._tokensPromise=new Promise(((e,i)=>{this._secretStorage.get(t).then((e=>{if(!e){if(n.has(t)){const e=n.get(t);n.delete(t),this._didChangeInOtherWindow.fire({added:[],updated:[],removed:[{key:t,value:e}]})}return n}const r=this.parseSecret(e),i=n.get(t);return i?(e!==this.serializeSecret(i)&&(n.set(t,r),this._didChangeInOtherWindow.fire({added:[],updated:[t],removed:[]})),n):(n.set(t,r),this._didChangeInOtherWindow.fire({added:[t],updated:[],removed:[]}),n)}),(e=>(r.default.error(e),n))).then(e)})),this._operationInProgress=!1}}},1619:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeferredPromise=t.Queue=t.ThrottledDelayer=t.Throttler=t.Delayer=t.Limiter=t.TimeoutError=t.IntervalTimer=t.SequencerByKey=t.MicrotaskDelay=void 0,t.raceCancellationError=o,t.raceTimeoutError=a,t.raceCancellationAndTimeoutError=function(e,t,n){return o(a(e,n),t)},t.once=d,t.toPromise=h;const r=n(1398);t.MicrotaskDelay=Symbol("MicrotaskDelay"),t.SequencerByKey=class{constructor(){this.promiseMap=new Map}queue(e,t){const n=(this.promiseMap.get(e)??Promise.resolve()).catch((()=>{})).then(t).finally((()=>{this.promiseMap.get(e)===n&&this.promiseMap.delete(e)}));return this.promiseMap.set(e,n),n}};class i extends r.Disposable{constructor(){super((()=>this.cancel())),this._token=-1}cancel(){-1!==this._token&&(clearInterval(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setInterval((()=>{e()}),t)}}function o(e,t){return new Promise(((n,i)=>{const o=t.onCancellationRequested((()=>{o.dispose(),i(new r.CancellationError)}));e.then(n,i).finally((()=>o.dispose()))}))}t.IntervalTimer=i;class s extends Error{constructor(){super("Timed out")}}function a(e,t){return new Promise(((n,i)=>{const o=setTimeout((()=>{i(new r.CancellationError)}),t);e.then(n,i).finally((()=>clearTimeout(o)))}))}t.TimeoutError=s;class c{constructor(e){this._size=0,this._isDisposed=!1,this.maxDegreeOfParalellism=e,this.outstandingPromises=[],this.runningPromises=0,this._onDrained=new r.EventEmitter}whenIdle(){return this.size>0?h(this.onDrained):Promise.resolve()}get onDrained(){return this._onDrained.event}get size(){return this._size}queue(e){if(this._isDisposed)throw new Error("Object has been disposed");return this._size++,new Promise(((t,n)=>{this.outstandingPromises.push({factory:e,c:t,e:n}),this.consume()}))}consume(){for(;this.outstandingPromises.length&&this.runningPromises<this.maxDegreeOfParalellism;){const e=this.outstandingPromises.shift();this.runningPromises++;const t=e.factory();t.then(e.c,e.e),t.then((()=>this.consumed()),(()=>this.consumed()))}}consumed(){this._isDisposed||(this.runningPromises--,0==--this._size&&this._onDrained.fire(),this.outstandingPromises.length>0&&this.consume())}clear(){if(this._isDisposed)throw new Error("Object has been disposed");this.outstandingPromises.length=0,this._size=this.runningPromises}dispose(){this._isDisposed=!0,this.outstandingPromises.length=0,this._size=0,this._onDrained.dispose()}}t.Limiter=c;class u{constructor(e){this.defaultDelay=e,this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(e,n=this.defaultDelay){this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise(((e,t)=>{this.doResolve=e,this.doReject=t})).then((()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const e=this.task;return this.task=null,e()}})));const r=()=>{this.deferred=null,this.doResolve?.(null)};return this.deferred=n===t.MicrotaskDelay?(e=>{let t=!0;return queueMicrotask((()=>{t&&(t=!1,e())})),{isTriggered:()=>t,dispose:()=>{t=!1}}})(r):((e,t)=>{let n=!0;const r=setTimeout((()=>{n=!1,t()}),e);return{isTriggered:()=>n,dispose:()=>{clearTimeout(r),n=!1}}})(n,r),this.completionPromise}isTriggered(){return!!this.deferred?.isTriggered()}cancel(){this.cancelTimeout(),this.completionPromise&&(this.doReject?.(new r.CancellationError),this.completionPromise=null)}cancelTimeout(){this.deferred?.dispose(),this.deferred=null}dispose(){this.cancel()}}t.Delayer=u;class l{constructor(){this.isDisposed=!1,this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(e){if(this.isDisposed)return Promise.reject(new Error("Throttler is disposed"));if(this.activePromise){if(this.queuedPromiseFactory=e,!this.queuedPromise){const e=()=>{if(this.queuedPromise=null,this.isDisposed)return;const e=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,e};this.queuedPromise=new Promise((t=>{this.activePromise.then(e,e).then(t)}))}return new Promise(((e,t)=>{this.queuedPromise.then(e,t)}))}return this.activePromise=e(),new Promise(((e,t)=>{this.activePromise.then((t=>{this.activePromise=null,e(t)}),(e=>{this.activePromise=null,t(e)}))}))}dispose(){this.isDisposed=!0}}function d(e){return(t,n=null,r)=>{let i,o=!1;return i=e((e=>{if(!o)return i?i.dispose():o=!0,t.call(n,e)}),null,r),o&&i.dispose(),i}}function h(e){return new Promise((t=>d(e)(t)))}t.Throttler=l,t.ThrottledDelayer=class{constructor(e){this.delayer=new u(e),this.throttler=new l}trigger(e,t){return this.delayer.trigger((()=>this.throttler.queue(e)),t)}isTriggered(){return this.delayer.isTriggered()}cancel(){this.delayer.cancel()}dispose(){this.delayer.dispose(),this.throttler.dispose()}},t.Queue=class extends c{constructor(){super(1)}},t.DeferredPromise=class{get isRejected(){return 1===this.outcome?.outcome}get isResolved(){return 0===this.outcome?.outcome}get isSettled(){return!!this.outcome}get value(){return 0===this.outcome?.outcome?this.outcome?.value:void 0}constructor(){this.p=new Promise(((e,t)=>{this.completeCallback=e,this.errorCallback=t}))}complete(e){return new Promise((t=>{this.completeCallback(e),this.outcome={outcome:0,value:e},t()}))}error(e){return new Promise((t=>{this.errorCallback(e),this.outcome={outcome:1,value:e},t()}))}cancel(){return this.error(new r.CancellationError)}}},3518:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SecretStorageCachePlugin=void 0;const r=n(1398);t.SecretStorageCachePlugin=class{constructor(e,t){this._secretStorage=e,this._key=t,this._onDidChange=new r.EventEmitter,this.onDidChange=this._onDidChange.event,this._disposable=r.Disposable.from(this._onDidChange,this._registerChangeHandler())}_registerChangeHandler(){return this._secretStorage.onDidChange((e=>{e.key===this._key&&this._onDidChange.fire()}))}async beforeCacheAccess(e){const t=await this._secretStorage.get(this._key);this._value=t,t&&e.tokenCache.deserialize(t)}async afterCacheAccess(e){if(e.cacheHasChanged){const t=e.tokenCache.serialize();t!==this._value&&await this._secretStorage.store(this._key,t)}}dispose(){this._disposable.dispose()}}},4539:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventBufferer=void 0,t.EventBufferer=class{constructor(){this.data=[]}wrapEvent(e,t,n){return(r,i,o)=>e((e=>{const o=this.data[this.data.length-1];if(!t)return void(o?o.buffers.push((()=>r.call(i,e))):r.call(i,e));const s=o;s?(s.items??(s.items=[]),s.items.push(e),0===s.buffers.length&&o.buffers.push((()=>{s.reducedResult??(s.reducedResult=n?s.items.reduce(t,n):s.items.reduce(t)),r.call(i,s.reducedResult)}))):r.call(i,t(n,e))}),void 0,o)}bufferEvents(e){const t={buffers:new Array};this.data.push(t);const n=e();return this.data.pop(),t.buffers.forEach((e=>e())),n}async bufferEventsAsync(e){const t={buffers:new Array};this.data.push(t);try{return await e()}finally{this.data.pop(),t.buffers.forEach((e=>e()))}}}},5803:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createExperimentationService=async function(e,t,n){const i=e.extension.id,o=e.extension.packageJSON.version,s=(0,r.getExperimentationService)(i,o,n?r.TargetPopulation.Insiders:r.TargetPopulation.Public,t,e.globalState);return await s.initializePromise,await s.initialFetch,s};const r=n(1566)},5541:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MsalLoggerOptions=void 0;const r=n(52),i=n(1398);t.MsalLoggerOptions=class{constructor(e){this._output=e,this.piiLoggingEnabled=!1}get logLevel(){return this._toMsalLogLevel(i.env.logLevel)}loggerCallback(e,t,n){if(!n)switch(e){case r.LogLevel.Error:return void this._output.error(t);case r.LogLevel.Warning:return void this._output.warn(t);case r.LogLevel.Info:return void this._output.info(t);case r.LogLevel.Verbose:return void this._output.debug(t);case r.LogLevel.Trace:return void this._output.trace(t);default:return void this._output.info(t)}}_toMsalLogLevel(e){switch(e){case i.LogLevel.Trace:return r.LogLevel.Trace;case i.LogLevel.Debug:return r.LogLevel.Verbose;case i.LogLevel.Info:return r.LogLevel.Info;case i.LogLevel.Warning:return r.LogLevel.Warning;case i.LogLevel.Error:return r.LogLevel.Error;default:return r.LogLevel.Info}}}},583:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UriHandlerLoopbackClient=void 0;const r=n(1398),i=n(1619);t.UriHandlerLoopbackClient=class{constructor(e,t,n){this._uriHandler=e,this._redirectUri=t,this._logger=n}async listenForAuthCode(){const e=await(0,i.toPromise)(this._uriHandler.event);this._logger.debug(`Received URL event. Authority: ${e.authority}`);const t=new URL(e.toString(!0));return{code:t.searchParams.get("code")??void 0,state:t.searchParams.get("state")??void 0,error:t.searchParams.get("error")??void 0,error_description:t.searchParams.get("error_description")??void 0,error_uri:t.searchParams.get("error_uri")??void 0}}getRedirectUri(){return this._redirectUri}closeServer(){}async openBrowser(e){const t=await r.env.asExternalUri(r.Uri.parse(`${r.env.uriScheme}://vscode.microsoft-authentication`)),n=r.Uri.parse(e+`&state=${encodeURI(t.toString(!0))}`);await r.env.openExternal(n)}}},1883:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScopeData=void 0;const n=["openid","email","profile","offline_access"];t.ScopeData=class{constructor(e=[]){this.originalScopes=e;const t=[...e];t.sort(),this.allScopes=t,this.scopeStr=t.join(" "),this.scopesToSend=this.getScopesToSend(t),this.clientId=this.getClientId(this.allScopes),this.tenant=this.getTenantId(this.allScopes)}getClientId(e){return e.reduce(((e,t)=>t.startsWith("VSCODE_CLIENT_ID:")?t.split("VSCODE_CLIENT_ID:")[1]:e),void 0)??"aebc6443-996d-45c2-90f0-388ff96faa56"}getTenantId(e){return e.reduce(((e,t)=>t.startsWith("VSCODE_TENANT:")?t.split("VSCODE_TENANT:")[1]:e),void 0)??"organizations"}getScopesToSend(e){const t=e.filter((e=>!e.startsWith("VSCODE_"))),r=new Set(t);for(const e of n)r.delete(e);return r.size||t.push("User.Read"),t}}},2417:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MicrosoftSovereignCloudAuthenticationTelemetryReporter=t.MicrosoftAuthenticationTelemetryReporter=void 0;const r=n(1170);class i{constructor(e){this.sharedProperties={},this._telemetryReporter=new r.default(e)}get telemetryReporter(){return this._telemetryReporter}setSharedProperty(e,t){this.sharedProperties[e]=t}postEvent(e,t){const n={...this.sharedProperties,...Object.fromEntries(t)};this._telemetryReporter.sendTelemetryEvent(e,n)}sendLoginEvent(e){this._telemetryReporter.sendTelemetryEvent("login",{scopes:JSON.stringify(this._scrubGuids(e))})}sendLoginFailedEvent(){this._telemetryReporter.sendTelemetryEvent("loginFailed")}sendLogoutEvent(){this._telemetryReporter.sendTelemetryEvent("logout")}sendLogoutFailedEvent(){this._telemetryReporter.sendTelemetryEvent("logoutFailed")}sendAccountEvent(e,t){this._telemetryReporter.sendTelemetryEvent("account",{scopes:JSON.stringify(this._scrubGuids(e)),accountType:t})}_scrubGuids(e){return e.map((e=>e.replace(/[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}/i,"{guid}")))}}t.MicrosoftAuthenticationTelemetryReporter=i,t.MicrosoftSovereignCloudAuthenticationTelemetryReporter=class extends i{sendLoginEvent(e){this._telemetryReporter.sendTelemetryEvent("loginMicrosoftSovereignCloud",{scopes:JSON.stringify(this._scrubGuids(e))})}sendLoginFailedEvent(){this._telemetryReporter.sendTelemetryEvent("loginMicrosoftSovereignCloudFailed")}sendLogoutEvent(){this._telemetryReporter.sendTelemetryEvent("logoutMicrosoftSovereignCloud")}sendLogoutFailedEvent(){this._telemetryReporter.sendTelemetryEvent("logoutMicrosoftSovereignCloudFailed")}}},9529:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSupportedEnvironment=function(e){return r.env.uiKind===r.UIKind.Desktop||(!!function(e){if(!/^https?$/i.test(e.scheme))return!1;const t=e.authority.split(":")[0];return i.indexOf(t)>=0}(e)||"https"===e.scheme&&(/(?:^|\.)vscode\.dev$/.test(e.authority)||/(?:^|\.)github\.dev$/.test(e.authority)||/(?:^|\.)github\.localhost$/.test(e.authority)))};const r=n(1398),i=["localhost","127.0.0.1","0:0:0:0:0:0:0:1","::1"]},5951:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.randomUUID=function(){return crypto.randomUUID()},t.generateCodeVerifier=function(){const e=new Uint32Array(28);return crypto.getRandomValues(e),Array.from(e,i).join("")},t.generateCodeChallenge=async function(e){return function(e){let t="";const n=new Uint8Array(e),i=n.byteLength;for(let e=0;e<i;e++)t+=String.fromCharCode(n[e]);return(0,r.base64Encode)(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}(await function(e){const t=(new TextEncoder).encode(e);return crypto.subtle.digest("SHA-256",t)}(e))};const r=n(2866);function i(e){return("0"+e.toString(16)).slice(-2)}},7773:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.activate=async function(e,t){const n=new a.UriEventHandler;e.subscriptions.push(n);const l=new s.BetterTokenStorage("microsoft.login.keylist",e),d=new o.AzureActiveDirectoryService(c.default,e,n,l,t,i.Environment.AzureCloud);await d.initialize(),e.subscriptions.push(r.authentication.registerAuthenticationProvider("microsoft","Microsoft",{onDidChangeSessions:d.onDidChangeSessions,getSessions:(e,t)=>d.getSessions(e,t?.account),createSession:async(e,n)=>{try{return t.sendTelemetryEvent("login",{scopes:JSON.stringify(e.map((e=>e.replace(/[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}/i,"{guid}"))))}),await d.createSession(e,n?.account)}catch(e){throw t.sendTelemetryEvent("loginFailed"),e}},removeSession:async e=>{try{t.sendTelemetryEvent("logout"),await d.removeSessionById(e)}catch(e){t.sendTelemetryEvent("logoutFailed")}}},{supportsMultipleAccounts:!0}));let h=await u(e,t,n,l);e.subscriptions.push(r.workspace.onDidChangeConfiguration((async r=>{r.affectsConfiguration("microsoft-sovereign-cloud")&&(h?.dispose(),h=await u(e,t,n,l))})))},t.deactivate=function(){};const r=n(1398),i=n(8197),o=n(8447),s=n(2410),a=n(3683),c=n(8377);async function u(e,t,n,s){const a=r.workspace.getConfiguration("microsoft-sovereign-cloud").get("environment");let c;if(!a)return;if("custom"===a){const e=r.workspace.getConfiguration("microsoft-sovereign-cloud").get("customEnvironment");if(!e)return void(await r.window.showErrorMessage(r.l10n.t("You must also specify a custom environment in order to use the custom environment auth provider."),r.l10n.t("Open settings"))&&await r.commands.executeCommand("workbench.action.openSettingsJson","microsoft-sovereign-cloud.customEnvironment"));try{i.Environment.add(e)}catch(e){return void(await r.window.showErrorMessage(r.l10n.t("Error validating custom environment setting: {0}",e.message),r.l10n.t("Open settings"))&&await r.commands.executeCommand("workbench.action.openSettings","microsoft-sovereign-cloud.customEnvironment"))}c=e.name}else c=a;const u=i.Environment.get(c);if(!u)return void await r.window.showErrorMessage(r.l10n.t("The environment `{0}` is not a valid environment.",c),r.l10n.t("Open settings"));const l=new o.AzureActiveDirectoryService(r.window.createOutputChannel(r.l10n.t("Microsoft Sovereign Cloud Authentication"),{log:!0}),e,n,s,t,u);await l.initialize();const d=r.authentication.registerAuthenticationProvider("microsoft-sovereign-cloud",c,{onDidChangeSessions:l.onDidChangeSessions,getSessions:e=>l.getSessions(e),createSession:async e=>{try{return t.sendTelemetryEvent("loginMicrosoftSovereignCloud",{scopes:JSON.stringify(e.map((e=>e.replace(/[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}/i,"{guid}"))))}),await l.createSession(e)}catch(e){throw t.sendTelemetryEvent("loginMicrosoftSovereignCloudFailed"),e}},removeSession:async e=>{try{t.sendTelemetryEvent("logoutMicrosoftSovereignCloud"),await l.removeSessionById(e)}catch(e){t.sendTelemetryEvent("logoutMicrosoftSovereignCloudFailed")}}},{supportsMultipleAccounts:!0});return e.subscriptions.push(d),d}},8428:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.activate=async function(e,t){const n=new s.UriEventHandler;e.subscriptions.push(n);const r=new o.MsalAuthProvider(e,t,i.default,n);await r.initialize(),e.subscriptions.push(a.authentication.registerAuthenticationProvider("microsoft","Microsoft",r,{supportsMultipleAccounts:!0}));let c=await u(e,n);e.subscriptions.push(a.workspace.onDidChangeConfiguration((async t=>{t.affectsConfiguration("microsoft-sovereign-cloud")&&(c?.dispose(),c=await u(e,n))})))},t.deactivate=function(){};const r=n(8197),i=n(8377),o=n(2583),s=n(3683),a=n(1398),c=n(2417);async function u(e,t){const n=a.workspace.getConfiguration("microsoft-sovereign-cloud").get("environment");let i;if(!n)return;if("custom"===n){const e=a.workspace.getConfiguration("microsoft-sovereign-cloud").get("customEnvironment");if(!e)return void(await a.window.showErrorMessage(a.l10n.t("You must also specify a custom environment in order to use the custom environment auth provider."),a.l10n.t("Open settings"))&&await a.commands.executeCommand("workbench.action.openSettingsJson","microsoft-sovereign-cloud.customEnvironment"));try{r.Environment.add(e)}catch(e){return void(await a.window.showErrorMessage(a.l10n.t("Error validating custom environment setting: {0}",e.message),a.l10n.t("Open settings"))&&await a.commands.executeCommand("workbench.action.openSettings","microsoft-sovereign-cloud.customEnvironment"))}i=e.name}else i=n;const s=r.Environment.get(i);if(!s)return void await a.window.showErrorMessage(a.l10n.t("The environment `{0}` is not a valid environment.",i),a.l10n.t("Open settings"));const u=new o.MsalAuthProvider(e,new c.MicrosoftSovereignCloudAuthenticationTelemetryReporter(e.extension.packageJSON.aiKey),a.window.createOutputChannel(a.l10n.t("Microsoft Sovereign Cloud Authentication"),{log:!0}),t,s);await u.initialize();const l=a.authentication.registerAuthenticationProvider("microsoft-sovereign-cloud",i,u,{supportsMultipleAccounts:!0});return e.subscriptions.push(l),l}},8377:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1398),i=r.window.createOutputChannel(r.l10n.t("Microsoft Authentication"),{log:!0});t.default=i},2583:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MsalAuthProvider=void 0;const r=n(52),i=n(1398),o=n(8197),s=n(3226),a=n(583),c=n(215),u=n(1883),l=n(4539),d="https://vscode.dev/redirect";t.MsalAuthProvider=class{constructor(e,t,n,r,a=o.Environment.AzureCloud){this._telemetryReporter=t,this._logger=n,this._uriHandler=r,this._env=a,this._eventBufferer=new l.EventBufferer,this._onDidChangeSessionsEmitter=new i.EventEmitter,this.onDidChangeSessions=this._onDidChangeSessionsEmitter.event,this._disposables=e.subscriptions,this._publicClientManager=new s.CachedPublicClientApplicationManager(e.globalState,e.secrets,this._logger,this._env.name);const c=this._eventBufferer.wrapEvent(this._publicClientManager.onDidAccountsChange,((e,t)=>{if(!e)return t;const n={added:[...e.added??[],...t.added??[]],deleted:[...e.deleted??[],...t.deleted??[]],changed:[...e.changed??[],...t.changed??[]]};return{added:Array.from(new Map(n.added.map((e=>[e.username,e]))).values()),deleted:Array.from(new Map(n.deleted.map((e=>[e.username,e]))).values()),changed:Array.from(new Map(n.changed.map((e=>[e.username,e]))).values())}}),{added:new Array,deleted:new Array,changed:new Array})((e=>this._handleAccountChange(e)));this._disposables.push(this._onDidChangeSessionsEmitter,this._publicClientManager,c)}async initialize(){await this._eventBufferer.bufferEventsAsync((()=>this._publicClientManager.initialize()));for(const e of this._publicClientManager.getAll())for(const t of e.accounts){if(!t.idTokenClaims?.tid)continue;const e=t.idTokenClaims.tid,n="9188040d-6c67-4c5b-b112-36a304b66dad"===e||"f8cdef31-a31e-4b4a-93e4-5f571e91255a"===e?"msa":"aad";this._telemetryReporter.sendAccountEvent([],n)}}_handleAccountChange({added:e,changed:t,deleted:n}){this._logger.debug(`[_handleAccountChange] added: ${e.length}, changed: ${t.length}, deleted: ${n.length}`),this._onDidChangeSessionsEmitter.fire({added:e.map(this.sessionFromAccountInfo),changed:t.map(this.sessionFromAccountInfo),removed:n.map(this.sessionFromAccountInfo)})}async getSessions(e,t){const n=void 0===e,r=new u.ScopeData(e);if(this._logger.info("[getSessions]",n?"[all]":`[${r.scopeStr}]`,"starting"),n){const e=new Map;for(const t of this._publicClientManager.getAll())for(const n of t.accounts)e.has(n.homeAccountId)||e.set(n.homeAccountId,this.sessionFromAccountInfo(n));const t=Array.from(e.values());return this._logger.info("[getSessions] [all]",`returned ${t.length} session(s)`),t}const i=await this.getOrCreatePublicClientApplication(r.clientId,r.tenant),o=await this.getAllSessionsForPca(i,r.originalScopes,r.scopesToSend,t?.account);return this._logger.info(`[getSessions] [${r.scopeStr}] returned ${o.length} session(s)`),o}async createSession(e,t){const n=new u.ScopeData(e);this._logger.info("[createSession]",`[${n.scopeStr}]`,"starting");const s=await this.getOrCreatePublicClientApplication(n.clientId,n.tenant);let l,h=this._env!==o.Environment.AzureCloud&&"aebc6443-996d-45c2-90f0-388ff96faa56"===n.clientId;if(!h)try{l=await s.acquireTokenInteractive({openBrowser:async e=>{await i.env.openExternal(i.Uri.parse(e))},scopes:n.scopesToSend,successTemplate:c.loopbackTemplate,errorTemplate:c.loopbackTemplate,loginHint:t.account?.label,prompt:t.account?.label?void 0:"select_account"})}catch(e){if(e instanceof i.CancellationError){const t=i.l10n.t("Yes");if(!await i.window.showErrorMessage(i.l10n.t("Having trouble logging in?"),{modal:!0,detail:i.l10n.t("Would you like to try a different way to sign in to your Microsoft account? ({0})","protocol handler")},t))throw this._telemetryReporter.sendLoginFailedEvent(),e}if(e instanceof r.ServerError)throw this._telemetryReporter.sendLoginFailedEvent(),e;h=!0}if(h){const e=new a.UriHandlerLoopbackClient(this._uriHandler,d,this._logger);try{l=await s.acquireTokenInteractive({openBrowser:t=>e.openBrowser(t),scopes:n.scopesToSend,loopbackClient:e,loginHint:t.account?.label,prompt:t.account?.label?void 0:"select_account"})}catch(e){throw this._telemetryReporter.sendLoginFailedEvent(),e}}if(!l)throw this._telemetryReporter.sendLoginFailedEvent(),new Error("No result returned from MSAL");const f=this.sessionFromAuthenticationResult(l,n.originalScopes);return this._telemetryReporter.sendLoginEvent(f.scopes),this._logger.info("[createSession]",`[${n.scopeStr}]`,"returned session"),this._onDidChangeSessionsEmitter.fire({added:[f],changed:[],removed:[]}),f}async removeSession(e){this._logger.info("[removeSession]",e,"starting");const t=new Array;for(const n of this._publicClientManager.getAll()){const r=n.accounts;for(const i of r)i.homeAccountId===e&&(this._telemetryReporter.sendLogoutEvent(),t.push(n.removeAccount(i)),this._logger.info(`[removeSession] [${e}] [${n.clientId}] [${n.authority}] removing session...`))}if(!t.length)return void this._logger.info("[removeSession]",e,"session not found");const n=await Promise.allSettled(t);for(const t of n)"rejected"===t.status&&(this._telemetryReporter.sendLogoutFailedEvent(),this._logger.error("[removeSession]",e,"error removing session",t.reason));this._logger.info("[removeSession]",e,`attempted to remove ${t.length} sessions`)}async getOrCreatePublicClientApplication(e,t){const n=new URL(t,this._env.activeDirectoryEndpointUrl).toString();return await this._publicClientManager.getOrCreate(e,n)}async getAllSessionsForPca(e,t,n,r){const i=r?e.accounts.filter((e=>e.homeAccountId===r.id)):e.accounts,o=[];return this._eventBufferer.bufferEventsAsync((async()=>{for(const r of i)try{const i=await e.acquireTokenSilent({account:r,scopes:n,redirectUri:d});o.push(this.sessionFromAuthenticationResult(i,t))}catch(e){continue}return o}))}sessionFromAuthenticationResult(e,t){return{accessToken:e.accessToken,idToken:e.idToken,id:e.account?.homeAccountId??e.uniqueId,account:{id:e.account?.homeAccountId??e.uniqueId,label:e.account?.username??"Unknown"},scopes:t}}sessionFromAccountInfo(e){return{accessToken:"1234",id:e.homeAccountId,scopes:[],account:{id:e.homeAccountId,label:e.username},idToken:e.idToken}}}},1589:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoopbackAuthServer=void 0;const r=n(8611),i=n(7016),o=n(9896),s=n(6928),a=n(6982);function c(e,t){o.readFile(t,((t,n)=>{t?(console.error(t),e.writeHead(404),e.end()):(e.writeHead(200,{"content-length":n.length}),e.end(n))}))}t.LoopbackAuthServer=class{set state(e){e?this._startingRedirect.searchParams.set("state",e):this._startingRedirect.searchParams.delete("state")}get state(){return this._startingRedirect.searchParams.get("state")??void 0}constructor(e,t){if(this.nonce=(0,a.randomBytes)(16).toString("base64"),!e)throw new Error("serveRoot must be defined");if(!t)throw new Error("startingRedirect must be defined");let n;this._startingRedirect=new i.URL(t),this._resultPromise=new Promise(((e,t)=>n={resolve:e,reject:t})),this._server=r.createServer(((t,r)=>{const o=new i.URL(t.url,`http://${t.headers.host}`);switch(o.pathname){case"/signin":(o.searchParams.get("nonce")??"").replace(/ /g,"+")!==this.nonce&&(r.writeHead(302,{location:`/?error=${encodeURIComponent("Nonce does not match.")}`}),r.end()),r.writeHead(302,{location:this._startingRedirect.toString()}),r.end();break;case"/callback":{const e=o.searchParams.get("code")??void 0,t=o.searchParams.get("state")??void 0,i=(o.searchParams.get("nonce")??"").replace(/ /g,"+"),s=o.searchParams.get("error")??void 0;if(s){r.writeHead(302,{location:`/?error=${o.searchParams.get("error_description")}`}),r.end(),n.reject(new Error(s));break}if(!e||!t||!i){r.writeHead(400),r.end();break}if(this.state!==t){r.writeHead(302,{location:`/?error=${encodeURIComponent("State does not match.")}`}),r.end(),n.reject(new Error("State does not match."));break}if(this.nonce!==i){r.writeHead(302,{location:`/?error=${encodeURIComponent("Nonce does not match.")}`}),r.end(),n.reject(new Error("Nonce does not match."));break}n.resolve({code:e,state:t}),r.writeHead(302,{location:"/"}),r.end();break}case"/":c(r,s.join(e,"index.html"));break;default:c(r,s.join(e,o.pathname.substring(1)))}}))}start(){return new Promise(((e,t)=>{if(this._server.listening)throw new Error("Server is already started");const n=setTimeout((()=>{t(new Error("Timeout waiting for port"))}),5e3);this._server.on("listening",(()=>{const t=this._server.address();if("string"==typeof t)this.port=parseInt(t);else{if(!(t instanceof Object))throw new Error("Unable to determine port");this.port=t.port}clearTimeout(n),this.state=`http://127.0.0.1:${this.port}/callback?nonce=${encodeURIComponent(this.nonce)}`,e(this.port)})),this._server.on("error",(e=>{t(new Error(`Error listening to server: ${e}`))})),this._server.on("close",(()=>{t(new Error("Closed"))})),this._server.listen(0,"127.0.0.1")}))}stop(){return new Promise(((e,t)=>{if(!this._server.listening)throw new Error("Server is not started");this._server.close((n=>{n?t(n):e()}))}))}waitForOAuthResponse(){return this._resultPromise}}},2866:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.base64Encode=function(e){return Buffer.from(e,"binary").toString("base64")},t.base64Decode=function(e){return Buffer.from(e,"base64").toString("utf8")}},6244:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sequencer=t.CachedPublicClientApplication=void 0;const r=n(52),i=n(1398),o=n(1619),s=n(3518),a=n(5541);t.CachedPublicClientApplication=class{constructor(e,t,n,o,l){this._clientId=e,this._authority=t,this._globalMemento=n,this._secretStorage=o,this._logger=l,this._sequencer=new c,this._refreshDelayer=new u,this._accounts=[],this._loggerOptions=new a.MsalLoggerOptions(this._logger),this._secretStorageCachePlugin=new s.SecretStorageCachePlugin(this._secretStorage,`pca:${JSON.stringify({clientId:this._clientId,authority:this._authority})}`),this._config={auth:{clientId:this._clientId,authority:this._authority},system:{loggerOptions:{correlationId:`${this._clientId}] [${this._authority}`,loggerCallback:(e,t,n)=>this._loggerOptions.loggerCallback(e,t,n),logLevel:r.LogLevel.Trace}},cache:{cachePlugin:this._secretStorageCachePlugin}},this._onDidAccountsChangeEmitter=new i.EventEmitter,this.onDidAccountsChange=this._onDidAccountsChangeEmitter.event,this._onDidRemoveLastAccountEmitter=new i.EventEmitter,this.onDidRemoveLastAccount=this._onDidRemoveLastAccountEmitter.event,this._pca=new r.PublicClientApplication(this._config),this._lastCreated=new Date,this._disposable=i.Disposable.from(this._registerOnSecretStorageChanged(),this._onDidAccountsChangeEmitter,this._onDidRemoveLastAccountEmitter)}get accounts(){return this._accounts}get clientId(){return this._clientId}get authority(){return this._authority}initialize(){return this._update()}dispose(){this._disposable.dispose()}async acquireTokenSilent(e){this._logger.debug(`[acquireTokenSilent] [${this._clientId}] [${this._authority}] [${e.scopes.join(" ")}] [${e.account.username}] starting...`);const t=await this._sequencer.queue((()=>this._pca.acquireTokenSilent(e)));return this._logger.debug(`[acquireTokenSilent] [${this._clientId}] [${this._authority}] [${e.scopes.join(" ")}] [${e.account.username}] got result`),t.account&&!t.fromCache&&(this._logger.debug(`[acquireTokenSilent] [${this._clientId}] [${this._authority}] [${e.scopes.join(" ")}] [${e.account.username}] firing event due to change`),this._setupRefresh(t),this._onDidAccountsChangeEmitter.fire({added:[],changed:[t.account],deleted:[]})),t}async acquireTokenInteractive(e){this._logger.debug(`[acquireTokenInteractive] [${this._clientId}] [${this._authority}] [${e.scopes?.join(" ")}] loopbackClientOverride: ${e.loopbackClient?"true":"false"}`);const t=await i.window.withProgress({location:i.ProgressLocation.Notification,cancellable:!0,title:i.l10n.t("Signing in to Microsoft...")},((t,n)=>(0,o.raceCancellationAndTimeoutError)(this._pca.acquireTokenInteractive(e),n,3e5)));return this._setupRefresh(t),t}removeAccount(e){return this._globalMemento.update(`lastRemoval:${this._clientId}:${this._authority}`,new Date),this._pca.getTokenCache().removeAccount(e)}_registerOnSecretStorageChanged(){return this._secretStorageCachePlugin.onDidChange((()=>this._update()))}async _update(){const e=this._accounts;this._logger.debug(`[update] [${this._clientId}] [${this._authority}] CachedPublicClientApplication update before: ${e.length}`);const t=this._globalMemento.get(`lastRemoval:${this._clientId}:${this._authority}`);t&&this._lastCreated&&Date.parse(t)>this._lastCreated.getTime()&&(this._logger.debug(`[update] [${this._clientId}] [${this._authority}] CachedPublicClientApplication removal detected... recreating PCA...`),this._pca=new r.PublicClientApplication(this._config),this._lastCreated=new Date);const n=await this._pca.getAllAccounts();this._accounts=n,this._logger.debug(`[update] [${this._clientId}] [${this._authority}] CachedPublicClientApplication update after: ${n.length}`);const i=new Set(e.map((e=>e.homeAccountId))),o=new Set(n.map((e=>e.homeAccountId))),s=n.filter((e=>!i.has(e.homeAccountId))),a=e.filter((e=>!o.has(e.homeAccountId)));(s.length>0||a.length>0)&&(this._onDidAccountsChangeEmitter.fire({added:s,changed:[],deleted:a}),this._logger.debug(`[update] [${this._clientId}] [${this._authority}] CachedPublicClientApplication accounts changed. added: ${s.length}, deleted: ${a.length}`),n.length||(this._logger.debug(`[update] [${this._clientId}] [${this._authority}] CachedPublicClientApplication final account deleted. Firing event.`),this._onDidRemoveLastAccountEmitter.fire())),this._logger.debug(`[update] [${this._clientId}] [${this._authority}] CachedPublicClientApplication update complete`)}_setupRefresh(e){const t=e.refreshOn||e.expiresOn;if(!e.account||!t)return;const n=e.account,r=e.scopes,i=t.getTime()-Date.now()-3e5,o=JSON.stringify({accountId:n.homeAccountId,scopes:r});this._logger.debug(`[_setupRefresh] [${this._clientId}] [${this._authority}] [${r.join(" ")}] [${n.username}] timeToRefresh: ${i}`),this._refreshDelayer.trigger(o,(()=>this.acquireTokenSilent({account:n,scopes:r,redirectUri:void 0,forceRefresh:!0})),i>0?i:0)}};class c{constructor(){this.current=Promise.resolve(null)}queue(e){return this.current=this.current.then((()=>e()),(()=>e()))}}t.Sequencer=c;class u{constructor(){this._delayers=new Map}trigger(e,t,n){let r=this._delayers.get(e);return r||(r=new o.Delayer(n),this._delayers.set(e,r)),r.trigger(t,n)}}},3034:(e,t,n)=>{"use strict";let r;Object.defineProperty(t,"__esModule",{value:!0});try{r=n(2556).net.fetch}catch{r=fetch}t.default=r},215:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loopbackTemplate=void 0,t.loopbackTemplate='\n<!DOCTYPE html>\n<html lang="en">\n\n<head>\n\t<meta charset="utf-8" />\n\t<title>Microsoft Account - Sign In</title>\n\t<meta name="viewport" content="width=device-width, initial-scale=1">\n\t<style>\n\t\thtml {\n\t\t\theight: 100%;\n\t\t}\n\n\t\tbody {\n\t\t\tbox-sizing: border-box;\n\t\t\tmin-height: 100%;\n\t\t\tmargin: 0;\n\t\t\tpadding: 15px 30px;\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\tcolor: white;\n\t\t\tfont-family: "Segoe UI","Helvetica Neue","Helvetica",Arial,sans-serif;\n\t\t\tbackground-color: #2C2C32;\n\t\t}\n\n\t\t.branding {\n\t\t\tbackground-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWCAYAAAA8AXHiAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAhGVYSWZNTQAqAAAACAAFARIAAwAAAAEAAQAAARoABQAAAAEAAABKARsABQAAAAEAAABSASgAAwAAAAEAAgAAh2kABAAAAAEAAABaAAAAAAAAAEgAAAABAAAASAAAAAEAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAlqADAAQAAAABAAAAlgAAAADkcSUjAAAACXBIWXMAAAsTAAALEwEAmpwYAAABWWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgpMwidZAAAxaElEQVR4Ae19CbgdRbXu6j2cecoECTIkICCGzAg+7qeQ9544QFQgiXpVEJTEe59ALsbMwE5AMZCQELgKeSoqDlyiQogCSUAC6FNCQhIwQMALCbNMGc68p37/v7prnz47++yzzzl76OCu851d3dXV1VXVf69atWqtVZaUg397IPJwSCKT46zgx16wh+19XSYnO6PjE7H4MDuZ7BSxXhQJ/On5KTWbTSMm3bYlvHXmJNxj2SatFLFVioeWn5lDDwAgMvOU2NG/3DMo2h691rLtr4bqBtVX1NVJRUOVBIIiyYSI3RkXO9q5NZmU5S98tu7XpmQF2AwAzCoNwMrAMm/CT3HkrgqJTI/KwodOD4ZDa5MVdUPtfe+KxONKiSob6+SIE46XqsYGK5FIBoLVtQEJiSRaWp+xktaNuzpqfirTLcBOZNJtdnjrDCk6wMrA8hOgWJcZoFSrT4nJogfPESu4Dv8AVLTTEqsC9MkSDHB2NIYfkZGnjJOqpiZQrkTCAmWyKqtDgXBAEs0tLyZtWRl7953/u/uiUR0sVgH2xuKERCJJnhc6lIFV6B7OuXyAJrIpqDzVlQ99TUKVt0scAEomQaXskBAONlEFrgpvLdkZk6r6Wjn6IxMx2qVeY0IsSVrhqnCgMiiJA62v4a5Vkmz/4a7PDWtmVXSIfGMSAGYVFGCpGvGh5VCiHohEAiJXi77sKx+eLZU1N0hHCyuTAJCCDqCAKIUCYxv4AcY6YnL0qeOkZuhQSeoo6b5OG+AC4ZJQRThQFQbAWt7Bvf8ZSNg3P3deA8ZUF2AzADCrMAArA4u9XMoQsQMp6nHlH5dKdcMcad+fJGVCCKRAxfMU1XKB1dYpI8acKI0jj5FkDNSti3LpzSgjCQQmrFA4HKiuIMAO2EnrtkBb+8pdXxr2OjOd+bAd2vQ2cro8mXPjwH/LwBp4H/a/hLvuCsr06cpky6KHfiK1jRdJ235M80ClABMtmMMfKJQDNB4j1VCstg4ZcTKANWpkZmCxAJZiABYIhgO1VRwi21HGj63OxI27pje9xGz5BlgZWOzVUgSPjEqufOheqWmcIq37YwBCWKsDDGlQULnAUh6L4CLFAh/fCmCNOSE7sNxi3IilxiUQCAdrayR+oCWBcn4q0eSy56c2PMc80+6yg2t4MEAKVgYWO7HYwcz8Ig9XSTz5kNQ0nC7tB6KoBmZ+bnAZdaVUhIMHVDxWQtQCYI3thWKZ8rrHLICiCwCslmIKFGn/GoPm9S+cW7ddswJgZw4Ta9NkC/n6HsrA6nufDewOV/Ap8x8cggHvMUztTpLO5igkCV2g4hMIJI3dY56mqBdwgXOlWP0DlhbNkhVgtoQDELza7Z1iJ2J3J2P2DX8/r+Evmsm2A2dukkBfAYbZSDkUrQco+IQ0XeY9eKwEraekovYkzP4OBhUrlGLEXYB1q6QnzXPYLUtuJ5SLcei1k62tMYDKDtTWnRusrf5/J9zbcv9xa5snc9aooLJti3xYbsVy1lEOxekBI01f8NBECVnbJVx1hHS2YSrnGf4y1SQTwAyYTJzpvr6lAWA2AWYlW1vidrQjGait/VS4pvaPx9/bvOn43+4/GwCzDcAoC0P+rKNd1ot9q1s5d489YIa/BQ9+Ap/yAxKsgJSJ8gGXUc94I1BD4Og/j91zDodYGFTmvf88VsYnpiWSt7ICNXWcoQoo2uNJ217298/X/8bky7ZcVKZYppcKE0OaDg0FDn9XPfwFCYc3YEYGUEUpTQeFUNTgyZniDBUyfJdecu9hVJjAYS+YbGuJ8z9QXXNaqL5uzQlrm3d88O79X+Ujt860MIu17ExDZJliFealkMJYMn1NQNZATnXlQ9+ScPXNEm3H02zKrZQK9PpoxQ5+PBJ3pVwqbkBJpFhjPiSNx47sWY7V60Nyy4BaQDQhdqCyJgRWX5LNLbuA8xUfaKz7sTtEkkhhMuBoU5QpVm792rdclKbzkyWoFj64WCrrAKo2SNMxhukSjb4CvoZe/pGBebyfP88ZTNx14KQX6BdV4McQSna2JZItLXGrsurEUEPdra8daPnv43934CIy+Qoqth2hDKx8v4hpkKbrAi++3AUbf4AlmqukvTmuiytgWfr3OBdg/bs533cpwMDgJ6BFEQtUVB4dGlz/kxPuab5TH8S2A1z9bGi+6/o+KY/8FKkUw6KH/ktqm/4Ngk8y6UHltvVCH39IrQx1SsXmoI9l5Tc72xS2Y50AWGtnaEjdF46/p3mtPuJqqmOUQ356YMZtYai8xITrfzsGb4Dg8392W6IZ8FOygImXslwe8KOzF0Dti2D8vZbO0KC6z37wdwfm/d2yvu8dvbPfXr7acw8YcULkrw0Sa34EoBovHZCmq3Jez7dlvwKkGMCoqIHn+E8tQtse5n1UwZn37HXVq0nOeO14sj0Ws44tD4U59FjWLEaaPue+IyXWskMqa11QUfCZQgaK6OtxhqeaIkpInjLUyiRBjJKMhRrrqkOh5IXlodB0S3/ilDR9/cngyx+RcOVg6WjtXZqe67OUUqVnJroQsgu+nTzF/oXUlsIUTIk/WaZY/e18A6r5D34MXbkV0vTBEoVKZ1Zpen8flv2+FCHLnq0YV4N2Zwcwb48pU6z+dDfVXiKnRKGh8HksJt+tIp44penZlmj68yBzD6DjRQ8pmQbwWR4u2aSau0oQg2JRT9EaUqZYfep9vEaKFGhFs2DDN6Si8m594Yk4RQyF+0gVMRlgwyTzb9qRIZu51C02+Uzc7WLaSS55eIvJh1WHwnVGWt0O+VM1eFgMg4dIXBY8OF+qar8HlRd0JciHRRutEoXUy/Q836R5kjIemnwmzpjJTcwlD7O6+crAytaZ5ppK013B5/wNy6W6/goIPkmlMBD1V5puCu8h5gs66GV6E7zHPZRRsmSrgOS7ZI3K84O9Bg/zN/wcuulfVYMHZ+3Mw+Hk+bmmuHT8pPgrZki/aG4qfVymWNneAfmp6Y5TDpm34T6s+306v9L0bA/ntSzAMZdK45qht4qXKVaPPeTM/GISWVcjnZV/xPB3mho8WL1ofPZY4AAuGHmWAZMpKv3cpPsgLlOsTC/BLNHMXn+YRAOPglE/ERoK3a1oMt1XrDQdDsne4YEEl/kv1vOzPcetUxlY6Z3kLNFEZdGG42Gk/hh00w9Xg4fedNPTy8n7OdBjgKRl+5RcudUqy7G8ADDS9DkPnApQbYNjjsOlsz1/SzTeZ/V2bKiQiZk/HUvp572VWcTrfaNYVLddvTUkgyYl5Rk2c1NARtRbUkIHX3nrKyNNn/fgp6BCcL8E0DUxuHShNL3ULzBFqVCR1KwwlZi3LshnQbkDizMkS61i2dkmqDa2zMQpr7tuDc3FQyOmNH0TtD4hTZ97/1ckFLxDEniBCbpvUZMofzQjHdzp5/6oZaoWuQHLMLOrXmgQO34hvugzUMJgfMnvIH5I9rXfgRfTJpqv9P4vU63r7cAYPESmx2X+A7NgQLoCtn68q7BLNL3VK3U9DT1pp6lsPjzoBVj8mqFWSzOfW549B7ZwP4W67RB1fgm7ACh24T84DZTsKlm2/WKZOX499Z1l512OdYoPG5yqkho8qBAoIXMf+K5UNiyAch4axbdXwiWaVAU9BwZQqdHPJCAPD82/55aSHbp17BlY/JrXQLVmOoa/VTtnSqjqVuFI2LI3itkJmX6nCLrICVceIRVVD8iNTy2RK6yrtVGGypWshVke7Bg8kCqJzF2/Gk45LoGMynEf5HGPl6WEIl/yAIlPTjstcmWyP86tW+ZZoWvCo65sbvrblVLVcCuGCFtiUb6MCjQshH/oOquAtQJMbgKzp6TUD7lKVjy9Ua57bJAaaUZ2dnd0kb1KxblKXtAYPMxd/zss0VwibTB4sEGlaF7sl8AXZP61TjhxX1qqirYO2alTPx0c3JHetbGbdq6SmqZLpXUfAEUnAo7NWA8NYLNjkFBXQJj4NpxkTpMrJj6ixgXPTLNTXut6uLkoyTR4WD0zpg5kB7+3EbrpZ6g0veQyqh5abyTuRBSP1dsM8iYwnMBTn91ph4afdKw0jDrWtqForq+oh6KKmWyDoegOLO/MbuXOO6V20BekdS9ngRwyu+ftsaZ2DPIfmI8je7Rtvlwx9vuatdRDo/FJNe/3gzDZg8FD3RjH4KE/SzTsinTy0WOH9OFCWrl8hD4GPwZYSSj/wmzBqm2y7Ff23H7cZ856Lzxk6LfjLc30nFw69R1PKwmsrqGQL57iAg6DK3c+CCadoOIyhnoh8dzXy6EVhvvohMQ7bQyN18mNf1sHUURdSYdGCj6pnDd349H4RmDwUD0AULH5hQBVT+WaZwF0YEYkGA5KKGRZrfsWyS++fHGgtvofYEpArArjpLaXl93jZYd5N9SE4oTkM5vAd0yQln1k0vvLI/HLsZXa1TbCX7n1nNyw43z5zujHBZ7iVLhaYHfQqRYbafrcB8ZhDHkEk5BG6YD7oP63LVV04Q8AKhIxGuZjsAOVBZtx4C1JJKYmb/78Y/r8aKLKrsYR1A0NBAtfryxPcIkuPPbajjeUVTuOhBcUfM11E6Aa4iy4sqb9/4fPJVCvNrhADFd+QCqr/irLd8zSCYFjht3zjDRLvft0SakwdniYd/+ZuG+LhMKNKk03fj77VFiJMiuDjnGwuoG860a4ED1RAKojbttSwxrB7zYGHuc1MS55AF4IGUjLIUO46RksuNp/lYpqmC/Bw1x+mVln1mhB07Ju6AoMjf8iL738FTy3UzhrjIzm8/IfyKjTfdCc+6bC1eYa/Z7jMcfggS33BsPamDjTtfQ0c55eFtO95XiPzT0m5jUGU0Z6XhvyQ3g6ViXVtr2LZeWUiOZH2044YVL0dT3x5w8oFhys2rIeqiEwX2rPN6hMqx0n+G37YuDdpsqoY56V67eNV1DphCHSxeuZO/obU/7GMjn7m/PANyFNX6MC3XiCzvgpJjk4mDQTe3P0lMb0TNd4rzfde+wt1+TzXk8d66gWxUYC8P4f2yvtLWfJjQAV9e7JA7NtPg8haTzsPzD7GyUt72GbMqksYH35PWJoxDBbUTUK85ptsvypb8q3x96mz/TOSPtbCTV4wGvlJGTu+kWwSr7GFwYPfWoP51RoA4e+1n2PSqdMlZs/97aKSCKngOJGUvDrXiyTDQnsfqX4Z7bOCqc6DsHwNRcnYGjsgJQbHVE3+FZZ/vQdcC7u7CGDnar6XQUtI+L4aJpz/01gdK8BTwL5Gx9Egwd2vJ//teUY+kIBsCRBgGqpLPvMGXLzZxxQcVbrNCCti5wFBCfRL+2juMGW0QoseAzRd8D30O2fzUlP6+nc5DWxN583jUMSCm2Dw/y6QV+R007aKUu3nqRrkpxMcDjrS6BQ10jT59z/K6luvAyg4syPQ6wLqr4UWIq8Nih5NYe+Vuk48FmAap72Az8YB1Q9VwrdfNA3w9wm3RybOD2d5yakX2N6+nWTZtLNPeYc17lXC10yp93NcxM8uU1Sj7HJa2JvRm+aHjueelsh1qiqOREzx7/Jsh0X6mSC7gY5NOYSyKRz2xC24zv3rccQ8iXsRYOv2/ECnEsRpc2jQ19ch77Ols0ST5woy6as06GPn5f5YLJV0tu1Jp83zRybuKc83uvm2Bt7jzOVwTTmwT9dGu6ERS+TvDSV58UKFViH5EaNAfB6PwXftVofTD6J4oJsQaXpYGRnr6+V79y/GUs0ZykPR9/lbgN9G7NdNjeoDGLoqw2h3jfJDWefJiumvJbaszBX0VTf6Hu2Hs3bNQwT1m+kgiIRiB1KFSxYZFNLghoGdYMvkRuf3iHXbzlOxQUEV6ahcZorTZ/1wAjoiO3AyzkFwx+c8XORHKjiv5+DLRz6sA8h9nZuOzBdbvjMLK1uLkOfn9vl1g3A2r8CM8I9mEFV4qU4MiXvOzHH3th7zIK85+nH5rynfCYdW2ugnJBK/Ctrx0qw6hm5fvsXFFwcGimxN4HS9DUQfH573YfwPTwFg4fjpJM7PKjmhcnlV3Bx1ucOfe07xI6dJDees0Y4pNPFRy5DX1cLfXsUkCtOxxZjyU/Br9M+fEFUiekClwFFeszmpKeZc+8102xeM9dNbPJ5z538FbrkEghWQOZ1pyx7apUmczcqUi/VTQeoZq37H3g9T8J90FDpgMGDoVR8kLdMf1EuZ8ivqgthdWO1LPv0eFn22ZecoY+yKX+syjivYWC/kLxjFjYba3k37RwHbYQ/gU85qgDS977WMgyhZhL1SGJovFSWPf1ReIs7T2aOe1ULunTt2Vgp+L0EQcSiEF1YWDqiSoluDwKGg++HE0vDexhwmfO+1iYv+S0ubVHUksTQ9zVZfvYdWqzK71SU0L+nOFIv517vB9W/0gZ+l9vHkOSCtyIluHz0yxK1x0GV5GmdoeCVDfwpAyqBogJ82Zg1Vtd/RIKBF8B7nSUX/OJf4drz90qVYjHOBimecKgUY90ShOfuMaJU8B6nEgt+gFePpZlqLCBH25/DBzNaQUVAkXfMhwEK21Wath3ceW5d+PIkxSTPH7tXmk+eiOn6I1Dwo2ZDqcHF2nHxNY79jaskWLleRh33S2irQqVQfVIFHSDh3XHWrpQJLdPGeWMee/9ZbFECJkSY7VbVYcWh+eey7AmAaspz+iETUO4uDgOuSUkpcebad8mKuGCrZFlnh2fKsr/9FtP/86TNVfSDWkbmIoqQylljPEaib0lTExaGwra8/lpQosB9GE1QIOEqPxPW0tSUMa9pwEnqnIkmk3s5/1EUCo8V0E0TiBJmyvJzVusj2Mfs6/d5cCiWaSS/IkqxGWaffD70qWBoMIgyIcq4Uq9Irxfzx3myA5t43JKamoCMHClSXw+aSlkoMpihzwyFhKFJ1/vdPE5ZXdfy3Q5oTqFI6E5BRTvW8SK2lx+voNKPNgLWA338TxC6A4sNphRbjSkw/s8+eaa07fsurFhI2dhhfF2lDWTQoaggQVTpA0eJHHY4XiPOwetrDVNgwrnqiBtApRDl5DOtYP78BQ5vAlCFsSxzl7zcClHClB2iyoYAVARrmf8koWso9DZYFfHwdX0Y9oHTRy/CrOxt8AkrIZJALjpcpm51Xl+I9+m9H3MU05UQxEOHiVRXibwO7SRSrwoOjahbgJkQWE0e8oVztmji9Fkj0wcWMPRVVKiKTtuBy+XGsx0xiVKqyYXlVdlG/vshuN2YGVisoH5dnLWoOOImyJPeAc/wC3QcGGa4xnUMLErfFFaltk5k5CiRN94QaW4GuCBrVPGDCyRvLfkC2Hj+6zEO9Nh9MzzOOWhm3hhXteGOlldBTc/HssxmxzrpGbsYQ182omua21OT3FZrFzBPT+e85u0ak8+km3OVxOGkZ2DxDn7iEXQaxREzx/4SDD1M6m3sEAqO2ewQakrU/O6Pvije7p5785hrvGSu89jk8V7PlMdcN/eS0pih8UgMje++LfI2qoklOLXUZkt1wOcDkFfv1x8cI874Vkw+VgCB2RlMHXmsRejegwGIZ8JYjlon1rtfkhUXtOrQNx1C3CIFVstbtfTHZrtm8qbnST9nvkxp6enMw/+DeSzmTA86Y4Qa8eyT16NHT8UMrRVGCWTqM89uTA3MU7zlmWtMM9fT09Lzm3zmHhOn0vGWafJPkAw9TOQoAIygUb8eyJxi6HE9xXchnflT/ywUQctkunPaleY552HStZgJhi3M+uZBNgVVF4CKSzOR4oGKVTG457FfQm7AYm2pm04d9dknPwFqMB4znjexvkjtg6J9mVk7jUBiIPWqw2zxmFGC2SNqh+oRPBnB5QJIQcRjPXDKMYBzzry/zARVH7Q9EXsL1uEfx1rfUkdZ8dBQG/Y2plDHuQOLNTDgumL03/Gmxkln6y61fPYLuFhHMzSGgfkjj3aYezL1pGgMBjA8V+rlUjoDKr3uZE3l7zoFakHLqDbc0bIRVk0nyopzHtO1Pi4eF8ukras+vj3qG7DYDIKLPNd3xr0lweYJ4C0ehx2iX6T0TkcTXAZIFEccBYBxFqgyL2QheMyQmKJkSNc0FpGJenHoCwWx3hfAWl8EVOosWXnuPh36etPwZJH/ZKEX5r2H3lCeC7PFKyzunv1Ruf6pP0BK/xnIvEAaqFvFt1jqgCpw0OLQWN8gMhLKjG+8JtIK/1ecNbKGJGLpNeU9BCbTnWOagsZgMQOFRGiAWPHpECVsVIuZnR+Gh8PpmflM3F6UwDawnvz3S0Bd+k6xTOW5eG10pOaMPRuLxXCuTyl90hkuTL6Sx0AIlxXDIKpHjRQZMsShXPTa56VcqSHQTdcXBbJnQ2BWSWPR1kelDUPfcoBKVXci9vtFd6oQr6j/wGJtqCNFjUeGOWMuxBLQcixekwriO/KRLwHv0Hj4CPBeRzqgov0qAaT8Fqps+C4m2kkYY0BmEa4KghIvlZXnnCG3nveWZ+hT6LHp5XBwD/RvKPSWo0wrZkMMc6zZGBbfgT+t66DRyY6nkagDPM1Qwh+Ci4FDYwMWsisprcfQ2IGhkYw+KRazONloLIq1vvZWiFa+BJP2dchgybQ1MBYt8dCnjfD/z8AolmkfZ0NXA0JcvpgDt0Wdzd/Al45XFODSD4dG/wQCjOCiAcnRI0WaBrtMPb8D12KmAgvIHa2bpS3+IQUVhz6G94nasLalwD8Dp1imgo5ukSulH/NjuQGUywrdA78JQch7yGLmB8TmeQONCS6CbPgRWDSGu5Z/vAF+CkNfTS1mfXtXya1TL9dHqCXQIaLmwm/DBFJe7znT09PMuYl7upfXGdLLc1K7/7p58/+yOWNUccTYtVhS+QgsaPaBcPE5BJd/gndoHDTYlpHHBeB36oC89drZCirObA8VixkltmldmwkE6Wnm3MSmiEzn6Wkmb3rMfPjPP7D4oK3u0/78Z5FX9jhMsVq551o79/5iRDo0gomvAs818liR8ad1PXVa12H5qA89AKqVf2BxrYwCw5lrPieHD31C2jub5OUXk2CCAw7L5UNwcUxMQKHLCjTAKvsPct2Om5Bkq24aqW859LkH8ggsDB1k3uli59/v/jqMYO9Rvj2AmWFHR0BefglMMhza0LKGMzD/hQDUgRyj2fpBl8l12zdL5K9HpuwBVHTvv0r7tUb5AZb6bVoMYEFL8lv3zINu0o/AsBM9CTCMWAbBHCEOATXB1Y7pvU4WcZk5/PXfZTRLy6Cq6ufke09+VsHFehq1bb++TR/Va+CzQjK4EXe/5MvWLoerSeyXDPdBAVCwpOvFlxQqRHBhJrZnt7M4TOU8MzPzUYe4VaG4gS6FatGetfK97ddjaJyLa47RrB+NIQh8PwTOClGXgVEsgsrIdi5f+zOs+l8Bwahj7UuzJz5E//mDgDVcPX9lt8iB/Y7euj+HRdbWMZqNtiakfvAc8F2PSmTHYV1Do7aE+UobONf2C6jYE6gL33b/gUV+KgWqdX+AT6oLoOnARWhnhwcDKM669JhPRSCPxf/XXhHZS01PHPuqZ7SW5of9E3CNZj8mVbJLrtl+loIr4oojTM4Sxn7CFbuB9enfUKhakpNj8h93VUuyGvsl130UVilw323R94MTCCg9YYygp7hI1RQaOpB6vQEDCA6H1PrkOp03v97kgx/HnpL6V1CbqWgCv7hevrttsSy0Ilq7EgtQ2Wump33QW6kq9B1YpiMvvW8YhJ+PqdO0Ds9+yYoj/Ojam56kHqYHmgRwMaZFzVtvOuAaNtzBlR/B5bSAGqPYGAFbi9QPuVq+t+NfJJqcJpEJ+4QuLrlDWjmkeqBvQ6HZ4eGydcdLAO6DKqpPhI4SVZOp6OeARYHhAsekKZjwo8OiJ+Z16kbRAOLNV3nm5NElO5RhyvJLTHea3MiJ/iRq6v+3VFjPy7VPflxBxRmj2mNqK/7pf3IHltnh4fJ7P4IZ3zZoUg6Hdxp+pQ6oTFfqEOieKKBwzDh17AKLwyH/mR/meLJ/L7QN9jhDIvdB9CtTr0qMNneIiKEPhmH7lEfku9vnOoa+WIw3C9amP4oR+/AbzA1Y7Cxanlz++08CCI9DRbcWPgnIqGeWSnvBpR0L8JiYh/qPH+bTf6RREa8FNoFcAqKtoJ/B5bQFewZhO7141IaD3u9DJLFOZu+o1VUHP26np3Uu3k8vwDLSdCzRzFr7ZciiHgAQsPwBuyobfEW2LyVFokxjCCIee8BkQMV02v8RXNSPenk3zOYxwhpBKm/LFkw9TB6eDySY+03MsjIeu3I6qmTXYM+gwfYuWbLlNLULoHZtUYdGVtD8pzc+vfLefOnXvPem5zN5M6V3v9YzsChNp2Ibpemz7p0l4dpfqOeUJFSPnQ0wvTXo4ViR5FxLgYqnBlxpMTuGSnc02SK4OqBST3AZIwfTnvTYeUL3fk3P05dzlsf8DOa+no45a6QzXe4ZFKr6APjOv8o12y4v6p5BWlHvj6m0idMrb/Jma6S5Zu5Nvyc9vft5ZmDpEk3E0em+7N5rIX1eIdFWzGyVq6bgKfdAqmSCF1wpapUJXHgEh8NXXoILoBa/C1JN6+CyqBOUPI7t9AatxKzxLrn0vkp1bPdPODQeDCxdook4QqVZa2/D7GchZDjcL5mwQH7zFfQh5p0KKjc2YPOCy0vF+Koo5+KzXtkNfwz7HHBpAp/r2wALJdSNGyPUNE6DEuGzsuTJcY49JgTKzpYsvq18PivWHVjdpOlrfwvd9RmuM/787Jes4HIB6QUaW6Tgw4+Czb1IqTyZ+NdeFtn3btKR0pMZ85GhxsFvg5V39wyqHgWB6na5ZutMZSnoaIV9XKrQn2+yP/egfV2NNNJ0xjXDN0ql2S8Z0vR8BgLHK0pgxV0cOY/xnDAflU8tGIu+9aYzWRgCt0UJOF9znMH1bVjOZzt6L8vZM4h9zD2Drt3+LxIf97WUz9d8LWSbBYtcAZBrPm/7+noP8jsUS5XzoEc16+4mqR6+RSrqzkjtl8xCc/lnRUw+7zHTTEgde8Bz0LCIzLys/5oPFjPwkxCQDnn+2bPgYO1fwSTjOrh6G4Ya5pn+jDE0grpS5lXb9FUJP7VTIls+5Kw1gnL5wrDXvJz8xpj1oYFUzrt83dGSCMAZf81Y8FQHO+Pv7bkp0CCj95j3mZdujhl7yZSCCyDSYZCXcBzACwnAKLYGxqLxts2QPxwvd39zo8w/+ddQGDxHqR73Rwa3rMX59kc3RjBD44cw690JvusCHRqppVrKobGAfeaIEy5feyImfNg2pOooSNO7lmgK+GAt2lArnihxYkyAYeijAUYl9pjpaF4lt00/TX70lVfVWJSqwgvH/AE5T8eQ2AEzMw7n7jpdOqJxJWPIlC/XtPQCM92XMQ/ccbt7BtU1/QwiidWai+Kc96H6c0C+xh1W7fWQvzTBNVHxQGX6vhu4lGphjxnsLCrJKDZvmp4yw1KLGVBW9RsBd0oLxv4FIJyAOr+NZRXkx7ZsGviie/tnxvQ8uablcl9PecBv2VDj0D2DBl0i127bLpEnjtU26VIQBNLvkxCQ+v1XQJfqGHxNUEjHGthBHZ7eSQU4d7qTbChcLtLbMPaYSdgnyQ/Py7zHjHGntGDscxhaMHS3/re6asy0XYvBi/eFsQnpwdsscy0930DymHsdvha7fWEhu7J2HDZAfxYAm+bsSYih0fjDMHXoT2yeZervPc+WxmeZ6+bYe6+pS7Y0Nw+1PKfiq+dp1wzRFFC8OA5+Co72MfS1H1gtt5w7Xn54/otZ95gx7pTmjH5T4vvGw2nHFvVbZcDFupsO8B6bjjPXTOxtqzfNHDP2BpPONHOcLY+5tysvvdeg3dgzqKr+Llmy/SbNYvYMMvlzibvK7A4M3ptep2xpJq8pL/3ZmdLT09xzzgpH61INfSyYTMWMsYCDWV4Iin5JqDVfAFDN1PbopAJrlNmCDos2BI+TW2Th2FMByg3ujhrZ78tWZlGvweWTs2cQttNrugx81+MQS3xAh0blu3IbGv04ftIqJTOqC93BxtF+pTrafw6mYqNl1bl36CyJ03AytbkE406JM6xF4z8Jge6vAK6wTgDcvWNzKaaEefhxO0NjVd2pON4li7dOUXDx3ZC37CUwmwnmdZrYpDP2ppljE5t86efp96XnY34TzDFjSh//Bv/kvAYd4aIFGFzgj3vMdGCPmSHbR8stU59z/E4BUI4fiNwr43WntHDcl8G/rJJqgIu+rfwtpfe2EbNG1zKouv5eiWxbqv1Au4JeZo0GDObFegvNdC1bPnNvT/eZdJOPsTfNlM09oddgys7ruVEI5hxIsDj0VYKfAwFvb54Jby4XYg3NWeoYiMtFvgCqqZDaLRp/OcB1JZakKOci3YLDD1Ta7/9JWgbBRq6TlkGD5sjiJx+V2X/2n2VQDu8/IC17V2L42A1xA/z64KUXKujQR5eL2F4tFn0RBHI8+KnVOvSpNkWOQ1+2+tGdEgP5s0Xjr8WOW/8GgS9oozqOKCZFzlbL7NccXjfoWAY1fEzqq3fJVds+4YhZImARXF9k3lL89MGwXqhPQH56UQcsts6CuOE93ahR5UF5rimXXshhco+Z9pY1MrTzJLn5vB3gHypSi7PejhrIsUqzAVLKha4afytEF1NVpyug6hLFocoDqT/vdWR7mDU2O5ZBVdUb5KqtEYey4+Pxqj87n9JAn5i/+wkdBGdJZ9WUFyCQxA6rHS/hCyfDxSWd/AwdOuurgHYEFNw7sMfMLZ+frmrOpCrc17lQgcMqeZNF434LmdhkDDHc8zAEgB8iM0b2P3eOhWVQtD0J58FXy5VPbpBZ25oo83r++TfyqxyQ5/fgLOlwEfrm818Vq3U8KNc2LEI74BrYwwBNDH0sK9b5GmZ9p4FKrdJZTr6Gvt7qZ6T0V47ZBHP5SRCr7JMwpfQ+B5f71euXzaGRE522/di0oP4TUpvcJXM3f/z1mUdAhxvB5jDvv+BUiovQpCA3f+WADN1xCuRJD6oEnIx2/4KjdVCFPWY6WtZJdcuJcvO5m3XoUyZbFQn7V3Jf7zJS+oVjnsIEcTx2Z31FKqAtQUGqUmXi32f/rJjWCY1lHeFgCb/caTYGqnsY+OFHAnO3LGJXBMIWWBkeaU498MOPUyVTE4LLyI++dc+vAa4vYvji0EGpfPe85p70mGAM0CoCIR6dJ/953lI99patCUX+4bBICjbvsUFwB/kIpPRj8KL44fhzSCGgGBh3Axn41aQdsGqHWPZbr99+zLgT3gsNGvrtROuBBF5QrzIvLbPQP6jzwWDxOvr41t2rAK5LIWvijIp5s5FdKi9j6KvlUsVbYECnQpTwmA59o6fZUHArPZtJptfwXv8IboT68Bk6xPgRXClg4cALLvZiEjIVKDraiXBo2PB6qR9xmG1z59kMr7PQGMpYPup7MFCcocqRB91y7mUA1VVYLOVyDypuPCBrS1EmYwam47OiFL2zZSPoG4Y+BVWFOg7xA6hYTYKKlJOU66oJZ0rr/rtTS0CHgpReuxs/jmVQCPywI0JxztlC34SDKZapGgWN02H+RaB963ffxHreDzGzwteC3bNtBSTvZZOgkIehjzxkLBqRH5y7WIswWqmmPD/FNIfnFsUMS7bDYKRxBgSqFEVwKOm5T5i/WKELROxl/W7R06RW+g+KJXZnTIYdNVzqh9ONBprjVUEqVj0zPQd1660TIZB7GIaXkAv9+2+mADy3Y2gcgoVTp6E0dCCgOg5g1pe8WH4wbQNkLQHhHjMEpJ8DBY0RvjK8osg27HvduACCYjNcH0zJi90W1Ayd7DyVkbGtzAiswwAsfBeHELCchhnqM+OuRqkIXoD2noEL8LxvvY3GPCTh2B2yYnq7sx3ITH75bo84t/v210uVl2ybBf5wBfhDNAvrpqXeUUN70O1Gwt0w8OnAOhIUa8ShCiwio7dZXW/X/YsuUOVNDlVevA1uBCp+4Qz5HPd1NlyamucCrA53KDykgcXu5Rc+c3VI9g5KymhspE3m//UR2FptBumw+3mV5j0M+KlGHBHZ+ikM7/dj32sMP7EYKBcFqsUP2YCFncu681igWLQcTx8KWUZPzE62awNtLcru6bEDLfrQvJ+m8CpQ3X4q3tzD0PqogXYt5XjFB1cmYPXIvPtvKCw9k+onCBopfWT8ZkjksLzV+aYadqSk9KgsX3gx/k2/pD/LpPs8LgMr/QUZXfprJ2Bh3sK+123P6/JWIVWK0utgzg2ozPkhNL6UgWVemjemAJU8VwT7XjcMHQ8h8eNqqFEIlaKeyB9ngb0FD/ByyN1baXm9fgh9A3ltd26FRWysnVqcHWJW/OR9kNJ/GoLU4vBcBilGzGBil8/iAhkFpEMpIPXhrLBMsbJBzBhqKLAmcjN17HsNXXpHjdu8+mwl9P9apk9eKRR+0p9szvU6HlnK2G1xGVi9vXqvoUZk4oUA140w8KW2B2hGARfWDThYP++x1tckmNjNo9dK/ONWKdN3UeKa+fTxRtecC+pXbZkPcH0PqsPU5GdX5v8DZakMZgg0cZrkXYfC4Yf7bkkn/x3idMf775eAigBEXGFYcgo3U79EQtXQ7cSCKXX6CxIMunoo3KUOPVwtaXIZWH3qfi5Yu4YakQk/go3A51XafUi4U+pTQweWGSpIZWD1pwtVrwtS+iUT1ko8/nFVJaKtZKENNQyFMnF/6l7Ye2wrCIc62GukDKz+drSR0l8z6TG4s5yIPXbew9BIXXqKI7oYbgOCvsbeepl7vWneY/JfDMqH4bhEMRj2hAXjZxCsp8vAcl5J/34NuK4av1OsTpjPte+GQa5jqNG/ErvuUjDhVbmY6bqQ6cgFU6ZLRUyzEdRnbFIeKANroB1vloAiH31VAlEsAbVsd6T0/bZw8tQoJ1Qhvy8m99ysPZxs2d8mVujnZWB5XmO/D7kEREONyEcPyMkTTsEuFX+ERir2boRdZSGDUrVCPqAPZYMFCNbX84Yluy+qe7MMrD70XdasxlCDAtVrJv4vWP+sgadkDIsElzI9uN0gIdfYPNGlXOnFmMsljdFeLNAHmxorE/v33bv7oqalaK4/rWhL2k8DeThFEcaf1ZKJ0+HY4wegXOS5YAuI31zx5OJI8cib9L5UImpojgdS2QHfS0DFrFA4GKxrrEjs3/9fuy8e9DktdbFaQgz4AeUCvD2g5nOuO6VrJv0fDItL4E4JogjVsOUScm7BYMfEB93FC+b/oIuFTEiAcMYx+wsGahvDyVjnq4nmfReDUn1RH6pGKlayPBQW4hUYO0qamV0z8WpYMV0KhUH0tY4Q+ZfSG/AZnBUmTuDTiFsVNcFgbWPIjna8YLfun1H38uvHgVLdnvJN5rbdF9OJQrxbn5RJf1Yw1IDqzZVPfhEbiP5aN1BLUkG9F0MNBQt+UiBxj71rhdCaHno07QoLt1YIgGA7M9BbGC1zM5Bk+4GnwUIt3XNxw69cKixnPmyHNk121Yvcji9TrMIiEEtA6HAqDV4z8U5I6T+hzmyD3GW9Hx5vCDIGAzZzrIn5/eFwhxITVlVdKFBVF7Q7W59IdLSev/viprF7vt74S4JqEtsFlKWDijUpU6z8vo+eS0sZamyBlN7aBEONejXUsGCoYQDjvVvT8GNAZGaEXoqVUvTLH8VS/snCnmvVDQFa/tjR1sdsO3AdwHS/Wz0LgAptnTmJZkGZaq7ZysDyvsxCHxtwLdoxCiPMn2AgewQc2mb2eJMJWAQV0xHzlXZpkA4YWCiNQ5kdCtQ0WuCf4NmscwOmsd/f8/VBD2u3gDKduUmCmahTpm4rAytTrxQyLWW/uGUoKNejMNQ4CTr13cFF8GggenDgpVY89wLr6BHgsQ7DOjidTff5dbI0DnlhAEqSHdjNNh5fiw3Llu75+pC/IB0q2aqoAHcE3XkovZblp881yVJW+VKuPWDcKV36QqU0qJT+dPiN6AIXX7cGHPA4G7COGiF1AFaffDfQsw55KMsCoBok2bqfT7sTz7l+zzcGbdNHc+uVZzZh8jGZwOtzKAOrz12Wpxu8LgkWbr0XUvopEKimGWp4gEUJmAGZl2L1DVgsAYAKhAO19ZJs3o9j+Zkkg8v3XFL/rLaM9frwmbZulj6AppaBNYDOG/CtpApcAmJYuPUnMNS4SNr2gmO2HP/0TDdgMjEBRmDxkjLvOVEs3pWA92hQqDpJtuxrR7k/hl/AFS9f3PQirolAZCBvI9XURxP7/1MGVv/7Lj93upJqLWzh1qWQ0s/pcqdECT6umKGQxwAV05R5j9L8C8A6vMehUAFlBcNhq7oGgNp/wLKTt8bDVatevbDmNT6TIoOtg15MpvyFMTEPoQysPHTigIugTzG5Gowy9OoXPPEdMPTXwykwAUVqxi2KFUwKMgUWKRYYpWhchn/wGGCxAU5BkLWLeQegrATW8cJWVTUB9Q6YqlsqrI4f/P3iEW+zvpNus8Nb3wAVM6sEA25E9wLKwOreHyU8gycf405pwdavwZ3S7ZIAP5+EOyUbUvoUuFxQxeLY76FSjjj+WC+giK6kFa4IWxVVYMr3vQ5ErgzG965+ceZxyqErhXpjUsEAZTqwDCzTE36JzYxx/tZzYFS2DkpzdMHZiRcF7866L5DjFhJE7IhRx8CNfi135COg7EBFdQig4izvJSwdLU80t/7k1SuOamfTCk2h0ruvDKz0HvHDuRGkLtx2OpistXZlw1C7+T2w3xBWwV9yuKpKhh0xApuIYJ+gZDJgVdUGaMQAQD0HfN2w59Wmnxu5kwOoxaBQEfJbRQtlYBWtq/v4IJdyjbx9b1Pzu3uvxXB4QbCmqT4MnqmiBgYL4Mq4aZ7diQleLPokhKM37P5G453mKTrkzcCyi6OuY5KLFpeBVbSu7seDPLKuCffZw5rfjU6OJ2LjIQyFm2S7E2B7MRBI/OmlbwzdbEpXQPWyjmfyFjL+/4JPu45FLkyEAAAAAElFTkSuQmCC\');\n\t\t\tbackground-size: 24px;\n\t\t\tbackground-repeat: no-repeat;\n\t\t\tbackground-position: left center;\n\t\t\tpadding-left: 36px;\n\t\t\tfont-size: 20px;\n\t\t\tletter-spacing: -0.04rem;\n\t\t\tfont-weight: 400;\n\t\t\tcolor: white;\n\t\t\ttext-decoration: none;\n\t\t}\n\n\t\t.message-container {\n\t\t\tflex-grow: 1;\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tjustify-content: center;\n\t\t\tmargin: 0 30px;\n\t\t}\n\n\t\t.message {\n\t\t\tfont-weight: 300;\n\t\t\tfont-size: 1.4rem;\n\t\t}\n\n\t\tbody.error .message {\n\t\t\tdisplay: none;\n\t\t}\n\n\t\tbody.error .error-message {\n\t\t\tdisplay: block;\n\t\t}\n\n\t\t.error-message {\n\t\t\tdisplay: none;\n\t\t\tmax-width: 800px;\n\t\t\tfont-weight: 300;\n\t\t\tfont-size: 1.3rem;\n\t\t}\n\n\t\t.error-text {\n\t\t\tcolor: salmon;\n\t\t\tfont-size: 1rem;\n\t\t}\n\n\t\t@font-face {\n\t\t\tfont-family: \'Segoe UI\';\n\t\t\tsrc: url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/light/latest.eot"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/light/latest.eot?#iefix") format("embedded-opentype");\n\t\t\tsrc: local("Segoe UI Light"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/light/latest.woff2") format("woff2"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/light/latest.woff") format("woff"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/light/latest.ttf") format("truetype"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/light/latest.svg#web") format("svg");\n\t\t\tfont-weight: 200\n\t\t}\n\n\t\t@font-face {\n\t\t\tfont-family: \'Segoe UI\';\n\t\t\tsrc: url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semilight/latest.eot"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semilight/latest.eot?#iefix") format("embedded-opentype");\n\t\t\tsrc: local("Segoe UI Semilight"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semilight/latest.woff2") format("woff2"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semilight/latest.woff") format("woff"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semilight/latest.ttf") format("truetype"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semilight/latest.svg#web") format("svg");\n\t\t\tfont-weight: 300\n\t\t}\n\n\t\t@font-face {\n\t\t\tfont-family: \'Segoe UI\';\n\t\t\tsrc: url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/normal/latest.eot"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/normal/latest.eot?#iefix") format("embedded-opentype");\n\t\t\tsrc: local("Segoe UI"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/normal/latest.woff2") format("woff"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/normal/latest.woff") format("woff"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/normal/latest.ttf") format("truetype"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/normal/latest.svg#web") format("svg");\n\t\t\tfont-weight: 400\n\t\t}\n\n\t\t@font-face {\n\t\t\tfont-family: \'Segoe UI\';\n\t\t\tsrc: url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semibold/latest.eot"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semibold/latest.eot?#iefix") format("embedded-opentype");\n\t\t\tsrc: local("Segoe UI Semibold"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semibold/latest.woff2") format("woff"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semibold/latest.woff") format("woff"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semibold/latest.ttf") format("truetype"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semibold/latest.svg#web") format("svg");\n\t\t\tfont-weight: 600\n\t\t}\n\n\t\t@font-face {\n\t\t\tfont-family: \'Segoe UI\';\n\t\t\tsrc: url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/bold/latest.eot"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/bold/latest.eot?#iefix") format("embedded-opentype");\n\t\t\tsrc: local("Segoe UI Bold"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/bold/latest.woff2") format("woff"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/bold/latest.woff") format("woff"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/bold/latest.ttf") format("truetype"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/bold/latest.svg#web") format("svg");\n\t\t\tfont-weight: 700\n\t\t}\n\t</style>\n</head>\n\n<body>\n\t<a class="branding" href="https://code.visualstudio.com/">\n\t\tVisual Studio Code\n\t</a>\n\t<div class="message-container">\n\t\t<div class="message">\n\t\t\tYou are signed in now and can close this page.\n\t\t</div>\n\t\t<div class="error-message">\n\t\t\tAn error occurred while signing in:\n\t\t\t<div class="error-text"></div>\n\t\t</div>\n\t</div>\n\t<script>\n\t\tvar search = new URLSearchParams(window.location.search);\n\t\tvar error = search.get(\'error\');\n\t\tif (error) {\n\t\t\tconst description = search.get(\'error_description\');\n\t\t\tdocument.querySelector(\'.error-text\')\n\t\t\t\t.textContent = error + \' - \' + description;\n\t\t\tdocument.querySelector(\'body\')\n\t\t\t\t.classList.add(\'error\');\n\t\t}\n\t<\/script>\n</body>\n\n</html>\n'},3226:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CachedPublicClientApplicationManager=void 0;const r=n(1398),i=n(6244);t.CachedPublicClientApplicationManager=class{constructor(e,t,n,i){this._globalMemento=e,this._secretStorage=t,this._logger=n,this._pcas=new Map,this._pcaDisposables=new Map,this._onDidAccountsChangeEmitter=new r.EventEmitter,this.onDidAccountsChange=this._onDidAccountsChangeEmitter.event,this._pcasSecretStorage=new o(t,i),this._disposable=r.Disposable.from(this._pcasSecretStorage,this._registerSecretStorageHandler(),this._onDidAccountsChangeEmitter)}_registerSecretStorageHandler(){return this._pcasSecretStorage.onDidChange((()=>this._handleSecretStorageChange()))}async initialize(){let e;this._logger.debug("[initialize] Initializing PublicClientApplicationManager");try{e=await this._pcasSecretStorage.get()}catch(e){this._logger.error("[initialize] Error initializing PublicClientApplicationManager:",e),await this._pcasSecretStorage.delete()}if(!e)return;const t=new Array;for(const n of e)try{const{clientId:e,authority:r}=JSON.parse(n);t.push(this._doCreatePublicClientApplication(e,r,n))}catch(e){this._logger.error("[initialize] Error intitializing PCA:",n)}const n=await Promise.allSettled(t);let r=!1;for(const e of n)if("rejected"===e.status)this._logger.error("[initialize] Error getting PCA:",e.reason);else if(!e.value.accounts.length){r=!0;const t=JSON.stringify({clientId:e.value.clientId,authority:e.value.authority});this._pcaDisposables.get(t)?.dispose(),this._pcaDisposables.delete(t),this._pcas.delete(t),this._logger.debug(`[initialize] [${e.value.clientId}] [${e.value.authority}] PCA disposed because it's empty.`)}r&&await this._storePublicClientApplications(),this._logger.debug("[initialize] PublicClientApplicationManager initialized")}dispose(){this._disposable.dispose(),r.Disposable.from(...this._pcaDisposables.values()).dispose()}async getOrCreate(e,t){const n=JSON.stringify({clientId:e,authority:t});let r=this._pcas.get(n);return r?(this._logger.debug(`[getOrCreate] [${e}] [${t}] PublicClientApplicationManager cache hit`),r):(this._logger.debug(`[getOrCreate] [${e}] [${t}] PublicClientApplicationManager cache miss, creating new PCA...`),r=await this._doCreatePublicClientApplication(e,t,n),await this._storePublicClientApplications(),this._logger.debug(`[getOrCreate] [${e}] [${t}] PCA created.`),r)}async _doCreatePublicClientApplication(e,t,n){const o=new i.CachedPublicClientApplication(e,t,this._globalMemento,this._secretStorage,this._logger);this._pcas.set(n,o);const s=r.Disposable.from(o,o.onDidAccountsChange((e=>this._onDidAccountsChangeEmitter.fire(e))),o.onDidRemoveLastAccount((()=>{s.dispose(),this._pcaDisposables.delete(n),this._pcas.delete(n),this._logger.debug(`[_doCreatePublicClientApplication] [${e}] [${t}] PCA disposed. Firing off storing of PCAs...`),this._storePublicClientApplications()})));return this._pcaDisposables.set(n,s),await o.initialize(),o}getAll(){return Array.from(this._pcas.values())}async _handleSecretStorageChange(){let e;this._logger.debug("[_handleSecretStorageChange] Handling PCAs secret storage change...");try{e=await this._pcasSecretStorage.get()}catch(e){return void await this._storePublicClientApplications()}if(!e)return this._logger.debug("[_handleSecretStorageChange] PCAs deleted in secret storage. Disposing all..."),r.Disposable.from(...this._pcaDisposables.values()).dispose(),this._pcas.clear(),this._pcaDisposables.clear(),void this._logger.debug("[_handleSecretStorageChange] Finished PCAs secret storage change.");const t=new Set(e);for(const e of this._pcas.keys())t.delete(e)||(this._pcaDisposables.get(e)?.dispose(),this._pcaDisposables.delete(e),this._pcas.delete(e),this._logger.debug(`[_handleSecretStorageChange] Disposed PCA that was deleted in another window: ${e}`));for(const e of t)try{const{clientId:t,authority:n}=JSON.parse(e);this._logger.debug(`[_handleSecretStorageChange] [${t}] [${n}] Creating new PCA that was created in another window...`),await this._doCreatePublicClientApplication(t,n,e),this._logger.debug(`[_handleSecretStorageChange] [${t}] [${n}] PCA created.`)}catch(t){this._logger.error(`Failed to parse new PublicClientApplication: ${e}`);continue}this._logger.debug("[_handleSecretStorageChange] Finished handling PCAs secret storage change.")}_storePublicClientApplications(){return this._pcasSecretStorage.store(Array.from(this._pcas.keys()))}};class o{constructor(e,t){this._secretStorage=e,this._cloudName=t,this._onDidChangeEmitter=new r.EventEmitter,this.onDidChange=this._onDidChangeEmitter.event,this._key=`publicClientApplications-${this._cloudName}`,this._disposable=r.Disposable.from(this._onDidChangeEmitter,this._secretStorage.onDidChange((e=>{e.key===this._key&&this._onDidChangeEmitter.fire()})))}async get(){const e=await this._secretStorage.get(this._key);if(e)return JSON.parse(e)}store(e){return this._secretStorage.store(this._key,JSON.stringify(e))}delete(){return this._secretStorage.delete(this._key)}dispose(){this._disposable.dispose()}}},1398:e=>{"use strict";e.exports=require("vscode")},181:e=>{"use strict";e.exports=require("buffer")},6982:e=>{"use strict";e.exports=require("crypto")},9896:e=>{"use strict";e.exports=require("fs")},8611:e=>{"use strict";e.exports=require("http")},5692:e=>{"use strict";e.exports=require("https")},857:e=>{"use strict";e.exports=require("os")},6928:e=>{"use strict";e.exports=require("path")},2203:e=>{"use strict";e.exports=require("stream")},7016:e=>{"use strict";e.exports=require("url")},9023:e=>{"use strict";e.exports=require("util")},52:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AuthError:()=>j,AuthErrorCodes:()=>r,AuthErrorMessage:()=>z,AzureCloudInstance:()=>qn,ClientApplication:()=>Co,ClientAssertion:()=>go,ClientAuthError:()=>De,ClientAuthErrorCodes:()=>i,ClientAuthErrorMessage:()=>Ne,ClientConfigurationError:()=>Dt,ClientConfigurationErrorCodes:()=>o,ClientConfigurationErrorMessage:()=>Nt,ClientCredentialClient:()=>So,ConfidentialClientApplication:()=>Eo,CryptoProvider:()=>oo,DeviceCodeClient:()=>Ao,DistributedCachePlugin:()=>Bo,InteractionRequiredAuthError:()=>Wr,InteractionRequiredAuthErrorCodes:()=>a,InteractionRequiredAuthErrorMessage:()=>Gr,LogLevel:()=>Un,Logger:()=>Fn,ManagedIdentityApplication:()=>jo,ManagedIdentitySourceNames:()=>hn,NodeStorage:()=>so,OnBehalfOfClient:()=>To,PromptValue:()=>y,ProtocolMode:()=>Be,PublicClientApplication:()=>wo,ResponseMode:()=>I,ServerError:()=>Ln,TokenCache:()=>fo,TokenCacheContext:()=>Zr,UsernamePasswordClient:()=>yo,buildAppConfiguration:()=>Xi,internals:()=>s,version:()=>vo});var r={};n.r(r),n.d(r,{postRequestFailed:()=>q,unexpectedError:()=>F});var i={};n.r(i),n.d(i,{authTimeNotFound:()=>te,authorizationCodeMissingFromServerResponse:()=>Te,bindingKeyNotRemoved:()=>Ee,cannotAppendScopeSet:()=>ce,cannotRemoveEmptyScope:()=>ae,clientInfoDecodingError:()=>B,clientInfoEmptyError:()=>$,deviceCodeExpired:()=>de,deviceCodePollingCancelled:()=>le,deviceCodeUnknownError:()=>he,emptyInputScopeSet:()=>ue,endSessionEndpointNotSupported:()=>_e,endpointResolutionError:()=>G,hashNotDeserialized:()=>Q,invalidAssertion:()=>Ce,invalidCacheEnvironment:()=>ge,invalidCacheRecord:()=>pe,invalidClientCredential:()=>Ie,invalidState:()=>J,keyIdMissing:()=>be,maxAgeTranspired:()=>ne,methodNotImplemented:()=>Oe,missingTenantIdError:()=>Pe,multipleMatchingAccounts:()=>ie,multipleMatchingAppMetadata:()=>oe,multipleMatchingTokens:()=>re,nestedAppAuthBridgeDisabled:()=>Me,networkError:()=>W,noAccountFound:()=>me,noAccountInSilentRequest:()=>fe,noCryptoObject:()=>ve,noNetworkConnectivity:()=>ke,nonceMismatch:()=>ee,nullOrEmptyToken:()=>V,openIdConfigError:()=>Y,requestCannotBeMade:()=>se,stateMismatch:()=>X,stateNotFound:()=>Z,tokenClaimsCnfRequiredForSignedJwt:()=>Se,tokenParsingError:()=>K,tokenRefreshRequired:()=>Ae,unexpectedCredentialType:()=>ye,userCanceled:()=>Re,userTimeoutReached:()=>we});var o={};n.r(o),n.d(o,{authorityMismatch:()=>Mt,authorityUriInsecure:()=>ft,cannotAllowNativeBroker:()=>Ot,cannotSetOIDCOptions:()=>Pt,claimsRequestParsingError:()=>ht,emptyInputScopesError:()=>mt,invalidAuthenticationHeader:()=>Rt,invalidAuthorityMetadata:()=>Tt,invalidClaims:()=>yt,invalidCloudDiscoveryMetadata:()=>St,invalidCodeChallengeMethod:()=>At,invalidPromptValue:()=>vt,logoutRequestEmpty:()=>It,missingNonceAuthenticationHeader:()=>kt,missingSshJwk:()=>_t,missingSshKid:()=>bt,pkceParamsMissing:()=>wt,redirectUriEmpty:()=>dt,tokenRequestEmpty:()=>Ct,untrustedAuthority:()=>Et,urlEmptyError:()=>gt,urlParseError:()=>pt});var s={};n.r(s),n.d(s,{Deserializer:()=>en,Serializer:()=>c});var a={};n.r(a),n.d(a,{badToken:()=>Br,consentRequired:()=>zr,interactionRequired:()=>Hr,loginRequired:()=>jr,nativeAccountUnavailable:()=>Fr,noTokensFound:()=>Ur,refreshTokenExpired:()=>qr});class c{static serializeJSONBlob(e){return JSON.stringify(e)}static serializeAccounts(e){const t={};return Object.keys(e).map((function(n){const r=e[n];t[n]={home_account_id:r.homeAccountId,environment:r.environment,realm:r.realm,local_account_id:r.localAccountId,username:r.username,authority_type:r.authorityType,name:r.name,client_info:r.clientInfo,last_modification_time:r.lastModificationTime,last_modification_app:r.lastModificationApp,tenantProfiles:r.tenantProfiles?.map((e=>JSON.stringify(e)))}})),t}static serializeIdTokens(e){const t={};return Object.keys(e).map((function(n){const r=e[n];t[n]={home_account_id:r.homeAccountId,environment:r.environment,credential_type:r.credentialType,client_id:r.clientId,secret:r.secret,realm:r.realm}})),t}static serializeAccessTokens(e){const t={};return Object.keys(e).map((function(n){const r=e[n];t[n]={home_account_id:r.homeAccountId,environment:r.environment,credential_type:r.credentialType,client_id:r.clientId,secret:r.secret,realm:r.realm,target:r.target,cached_at:r.cachedAt,expires_on:r.expiresOn,extended_expires_on:r.extendedExpiresOn,refresh_on:r.refreshOn,key_id:r.keyId,token_type:r.tokenType,requestedClaims:r.requestedClaims,requestedClaimsHash:r.requestedClaimsHash,userAssertionHash:r.userAssertionHash}})),t}static serializeRefreshTokens(e){const t={};return Object.keys(e).map((function(n){const r=e[n];t[n]={home_account_id:r.homeAccountId,environment:r.environment,credential_type:r.credentialType,client_id:r.clientId,secret:r.secret,family_id:r.familyId,target:r.target,realm:r.realm}})),t}static serializeAppMetadata(e){const t={};return Object.keys(e).map((function(n){const r=e[n];t[n]={client_id:r.clientId,environment:r.environment,family_id:r.familyId}})),t}static serializeAllCache(e){return{Account:this.serializeAccounts(e.accounts),IdToken:this.serializeIdTokens(e.idTokens),AccessToken:this.serializeAccessTokens(e.accessTokens),RefreshToken:this.serializeRefreshTokens(e.refreshTokens),AppMetadata:this.serializeAppMetadata(e.appMetadata)}}}const u={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_RESPONSE_TYPE:"code",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",FRAGMENT_RESPONSE_MODE:"fragment",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],TOKEN_RESPONSE_TYPE:"token",ID_TOKEN_RESPONSE_TYPE:"id_token",SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},l=[u.OPENID_SCOPE,u.PROFILE_SCOPE,u.OFFLINE_ACCESS_SCOPE],d=[...l,u.EMAIL_SCOPE],h="Content-Type",f="Retry-After",p="X-AnchorMailbox",g="x-ms-request-id",m={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},v="access_token",y={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},C={PLAIN:"plain",S256:"S256"},I={QUERY:"query",FRAGMENT:"fragment",FORM_POST:"form_post"},A="Generic",w={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},S={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},T="appmetadata",E="1",_="authority-metadata",b="config",k="cache",R="network",P="hardcoded_values",O={SCHEMA_VERSION:5,MAX_CUR_HEADER_BYTES:80,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},M={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},x="throttling",N="0",D="2",L="3",U="4",F="unexpected_error",q="post_request_failed",H={[F]:"Unexpected error in authentication.",[q]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."},z={unexpectedError:{code:F,desc:H[F]},postRequestFailed:{code:q,desc:H[q]}};class j extends Error{constructor(e,t,n){super(t?`${e}: ${t}`:e),Object.setPrototypeOf(this,j.prototype),this.errorCode=e||u.EMPTY_STRING,this.errorMessage=t||u.EMPTY_STRING,this.subError=n||u.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}}const B="client_info_decoding_error",$="client_info_empty_error",K="token_parsing_error",V="null_or_empty_token",G="endpoints_resolution_error",W="network_error",Y="openid_config_error",Q="hash_not_deserialized",J="invalid_state",X="state_mismatch",Z="state_not_found",ee="nonce_mismatch",te="auth_time_not_found",ne="max_age_transpired",re="multiple_matching_tokens",ie="multiple_matching_accounts",oe="multiple_matching_appMetadata",se="request_cannot_be_made",ae="cannot_remove_empty_scope",ce="cannot_append_scopeset",ue="empty_input_scopeset",le="device_code_polling_cancelled",de="device_code_expired",he="device_code_unknown_error",fe="no_account_in_silent_request",pe="invalid_cache_record",ge="invalid_cache_environment",me="no_account_found",ve="no_crypto_object",ye="unexpected_credential_type",Ce="invalid_assertion",Ie="invalid_client_credential",Ae="token_refresh_required",we="user_timeout_reached",Se="token_claims_cnf_required_for_signedjwt",Te="authorization_code_missing_from_server_response",Ee="binding_key_not_removed",_e="end_session_endpoint_not_supported",be="key_id_missing",ke="no_network_connectivity",Re="user_canceled",Pe="missing_tenant_id_error",Oe="method_not_implemented",Me="nested_app_auth_bridge_disabled",xe={[B]:"The client info could not be parsed/decoded correctly",[$]:"The client info was empty",[K]:"Token cannot be parsed",[V]:"The token is null or empty",[G]:"Endpoints cannot be resolved",[W]:"Network request failed",[Y]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[Q]:"The hash parameters could not be deserialized",[J]:"State was not the expected format",[X]:"State mismatch error",[Z]:"State not found",[ee]:"Nonce mismatch error",[te]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[ne]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[re]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[ie]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[oe]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[se]:"Token request cannot be made without authorization code or refresh token.",[ae]:"Cannot remove null or empty scope from ScopeSet",[ce]:"Cannot append ScopeSet",[ue]:"Empty input ScopeSet cannot be processed",[le]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[de]:"Device code is expired.",[he]:"Device code stopped polling for unknown reasons.",[fe]:"Please pass an account object, silent flow is not supported without account information",[pe]:"Cache record object was null or undefined.",[ge]:"Invalid environment when attempting to create cache entry",[me]:"No account found in cache for given key.",[ve]:"No crypto object detected.",[ye]:"Unexpected credential type.",[Ce]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[Ie]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[Ae]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[we]:"User defined timeout for device code polling reached",[Se]:"Cannot generate a POP jwt if the token_claims are not populated",[Te]:"Server response does not contain an authorization code to proceed",[Ee]:"Could not remove the credential's binding key from storage.",[_e]:"The provided authority does not support logout",[be]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[ke]:"No network connectivity. Check your internet connection.",[Re]:"User cancelled the flow.",[Pe]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[Oe]:"This method has not been implemented",[Me]:"The nested app auth bridge is disabled"},Ne={clientInfoDecodingError:{code:B,desc:xe[B]},clientInfoEmptyError:{code:$,desc:xe[$]},tokenParsingError:{code:K,desc:xe[K]},nullOrEmptyToken:{code:V,desc:xe[V]},endpointResolutionError:{code:G,desc:xe[G]},networkError:{code:W,desc:xe[W]},unableToGetOpenidConfigError:{code:Y,desc:xe[Y]},hashNotDeserialized:{code:Q,desc:xe[Q]},invalidStateError:{code:J,desc:xe[J]},stateMismatchError:{code:X,desc:xe[X]},stateNotFoundError:{code:Z,desc:xe[Z]},nonceMismatchError:{code:ee,desc:xe[ee]},authTimeNotFoundError:{code:te,desc:xe[te]},maxAgeTranspired:{code:ne,desc:xe[ne]},multipleMatchingTokens:{code:re,desc:xe[re]},multipleMatchingAccounts:{code:ie,desc:xe[ie]},multipleMatchingAppMetadata:{code:oe,desc:xe[oe]},tokenRequestCannotBeMade:{code:se,desc:xe[se]},removeEmptyScopeError:{code:ae,desc:xe[ae]},appendScopeSetError:{code:ce,desc:xe[ce]},emptyInputScopeSetError:{code:ue,desc:xe[ue]},DeviceCodePollingCancelled:{code:le,desc:xe[le]},DeviceCodeExpired:{code:de,desc:xe[de]},DeviceCodeUnknownError:{code:he,desc:xe[he]},NoAccountInSilentRequest:{code:fe,desc:xe[fe]},invalidCacheRecord:{code:pe,desc:xe[pe]},invalidCacheEnvironment:{code:ge,desc:xe[ge]},noAccountFound:{code:me,desc:xe[me]},noCryptoObj:{code:ve,desc:xe[ve]},unexpectedCredentialType:{code:ye,desc:xe[ye]},invalidAssertion:{code:Ce,desc:xe[Ce]},invalidClientCredential:{code:Ie,desc:xe[Ie]},tokenRefreshRequired:{code:Ae,desc:xe[Ae]},userTimeoutReached:{code:we,desc:xe[we]},tokenClaimsRequired:{code:Se,desc:xe[Se]},noAuthorizationCodeFromServer:{code:Te,desc:xe[Te]},bindingKeyNotRemovedError:{code:Ee,desc:xe[Ee]},logoutNotSupported:{code:_e,desc:xe[_e]},keyIdMissing:{code:be,desc:xe[be]},noNetworkConnectivity:{code:ke,desc:xe[ke]},userCanceledError:{code:Re,desc:xe[Re]},missingTenantIdError:{code:Pe,desc:xe[Pe]},nestedAppAuthBridgeDisabled:{code:Me,desc:xe[Me]}};class De extends j{constructor(e,t){super(e,t?`${xe[e]}: ${t}`:xe[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,De.prototype)}}function Le(e,t){return new De(e,t)}function Ue(e,t){if(!e)throw Le($);try{const n=t(e);return JSON.parse(n)}catch(e){throw Le(B)}}function Fe(e){if(!e)throw Le(B);const t=e.split(w.CLIENT_INFO_SEPARATOR,2);return{uid:t[0],utid:t.length<2?u.EMPTY_STRING:t[1]}}function qe(e,t){return!!e&&!!t&&e===t.split(".")[1]}function He(e,t,n,r){if(r){const{oid:t,sub:n,tid:i,name:o,tfp:s,acr:a}=r,c=i||s||a||"";return{tenantId:c,localAccountId:t||n||"",name:o,isHomeTenant:qe(c,e)}}return{tenantId:n,localAccountId:t,isHomeTenant:qe(n,e)}}function ze(e,t,n,r){let i=e;if(t){const{isHomeTenant:n,...r}=t;i={...e,...r}}if(n){const{isHomeTenant:t,...o}=He(e.homeAccountId,e.localAccountId,e.tenantId,n);return i={...i,...o,idTokenClaims:n,idToken:r},i}return i}function je(e){return e&&(e.tid||e.tfp||e.acr)||null}const Be={AAD:"AAD",OIDC:"OIDC"};class $e{generateAccountId(){return[this.homeAccountId,this.environment].join(w.CACHE_KEY_SEPARATOR).toLowerCase()}generateAccountKey(){return $e.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})}getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map((e=>[e.tenantId,e])))}}isSingleTenant(){return!this.tenantProfiles}static generateAccountCacheKey(e){const t=e.homeAccountId.split(".")[1];return[e.homeAccountId,e.environment||"",t||e.tenantId||""].join(w.CACHE_KEY_SEPARATOR).toLowerCase()}static createAccount(e,t,n){const r=new $e;let i;1===t.authorityType?r.authorityType="ADFS":t.protocolMode===Be.AAD?r.authorityType="MSSTS":r.authorityType=A,e.clientInfo&&n&&(i=Ue(e.clientInfo,n)),r.clientInfo=e.clientInfo,r.homeAccountId=e.homeAccountId,r.nativeAccountId=e.nativeAccountId;const o=e.environment||t&&t.getPreferredCache();if(!o)throw Le(ge);r.environment=o,r.realm=i?.utid||je(e.idTokenClaims)||"",r.localAccountId=i?.uid||e.idTokenClaims?.oid||e.idTokenClaims?.sub||"";const s=e.idTokenClaims?.preferred_username||e.idTokenClaims?.upn,a=e.idTokenClaims?.emails?e.idTokenClaims.emails[0]:null;if(r.username=s||a||"",r.name=e.idTokenClaims?.name||"",r.cloudGraphHostName=e.cloudGraphHostName,r.msGraphHost=e.msGraphHost,e.tenantProfiles)r.tenantProfiles=e.tenantProfiles;else{const t=He(e.homeAccountId,r.localAccountId,r.realm,e.idTokenClaims);r.tenantProfiles=[t]}return r}static createFromAccountInfo(e,t,n){const r=new $e;return r.authorityType=e.authorityType||A,r.homeAccountId=e.homeAccountId,r.localAccountId=e.localAccountId,r.nativeAccountId=e.nativeAccountId,r.realm=e.tenantId,r.environment=e.environment,r.username=e.username,r.name=e.name,r.cloudGraphHostName=t,r.msGraphHost=n,r.tenantProfiles=Array.from(e.tenantProfiles?.values()||[]),r}static generateHomeAccountId(e,t,n,r,i){if(1!==t&&2!==t){if(e)try{const t=Ue(e,r.base64Decode);if(t.uid&&t.utid)return`${t.uid}.${t.utid}`}catch(e){}n.warning("No client info in response")}return i?.sub||""}static isAccountEntity(e){return!!e&&e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType")}static accountInfoIsEqual(e,t,n){if(!e||!t)return!1;let r=!0;if(n){const n=e.idTokenClaims||{},i=t.idTokenClaims||{};r=n.iat===i.iat&&n.nonce===i.nonce}return e.homeAccountId===t.homeAccountId&&e.localAccountId===t.localAccountId&&e.username===t.username&&e.tenantId===t.tenantId&&e.environment===t.environment&&e.nativeAccountId===t.nativeAccountId&&r}}function Ke(e,t){const n=function(e){if(!e)throw Le(V);const t=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(e);if(!t||t.length<4)throw Le(K);return t[2]}(e);try{const e=t(n);return JSON.parse(e)}catch(e){throw Le(K)}}function Ve(e,t){if(0===t||Date.now()-3e5>e+t)throw Le(ne)}function Ge(){return Math.round((new Date).getTime()/1e3)}function We(e,t){const n=Number(e)||0;return Ge()+t>n}function Ye(e,t){return new Promise((n=>setTimeout((()=>n(t)),e)))}function Qe(e){return[tt(e),nt(e),rt(e),it(e),ot(e)].join(w.CACHE_KEY_SEPARATOR).toLowerCase()}function Je(e){return e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("credentialType")&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("secret")}function Xe(e){return!!e&&Je(e)&&e.hasOwnProperty("realm")&&e.hasOwnProperty("target")&&(e.credentialType===S.ACCESS_TOKEN||e.credentialType===S.ACCESS_TOKEN_WITH_AUTH_SCHEME)}function Ze(e){return!!e&&Je(e)&&e.hasOwnProperty("realm")&&e.credentialType===S.ID_TOKEN}function et(e){return!!e&&Je(e)&&e.credentialType===S.REFRESH_TOKEN}function tt(e){return[e.homeAccountId,e.environment].join(w.CACHE_KEY_SEPARATOR).toLowerCase()}function nt(e){const t=e.credentialType===S.REFRESH_TOKEN&&e.familyId||e.clientId;return[e.credentialType,t,e.realm||""].join(w.CACHE_KEY_SEPARATOR).toLowerCase()}function rt(e){return(e.target||"").toLowerCase()}function it(e){return(e.requestedClaimsHash||"").toLowerCase()}function ot(e){return e.tokenType&&e.tokenType.toLowerCase()!==M.BEARER.toLowerCase()?e.tokenType.toLowerCase():""}function st(e,t){return!!t&&0===e.indexOf(T)&&t.hasOwnProperty("clientId")&&t.hasOwnProperty("environment")}function at(){return Ge()+86400}function ct(e,t,n){e.authorization_endpoint=t.authorization_endpoint,e.token_endpoint=t.token_endpoint,e.end_session_endpoint=t.end_session_endpoint,e.issuer=t.issuer,e.endpointsFromNetwork=n,e.jwks_uri=t.jwks_uri}function ut(e,t,n){e.aliases=t.aliases,e.preferred_cache=t.preferred_cache,e.preferred_network=t.preferred_network,e.aliasesFromNetwork=n}function lt(e){return e.expiresAt<=Ge()}const dt="redirect_uri_empty",ht="claims_request_parsing_error",ft="authority_uri_insecure",pt="url_parse_error",gt="empty_url_error",mt="empty_input_scopes_error",vt="invalid_prompt_value",yt="invalid_claims",Ct="token_request_empty",It="logout_request_empty",At="invalid_code_challenge_method",wt="pkce_params_missing",St="invalid_cloud_discovery_metadata",Tt="invalid_authority_metadata",Et="untrusted_authority",_t="missing_ssh_jwk",bt="missing_ssh_kid",kt="missing_nonce_authentication_header",Rt="invalid_authentication_header",Pt="cannot_set_OIDCOptions",Ot="cannot_allow_native_broker",Mt="authority_mismatch",xt={[dt]:"A redirect URI is required for all calls, and none has been set.",[ht]:"Could not parse the given claims request object.",[ft]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[pt]:"URL could not be parsed into appropriate segments.",[gt]:"URL was empty or null.",[mt]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[vt]:"Please see here for valid configuration options: https://azuread.github.io/microsoft-authentication-library-for-js/ref/modules/_azure_msal_common.html#commonauthorizationurlrequest",[yt]:"Given claims parameter must be a stringified JSON object.",[Ct]:"Token request was empty and not found in cache.",[It]:"The logout request was null or undefined.",[At]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[wt]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[St]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[Tt]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[Et]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[_t]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[bt]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[kt]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[Rt]:"Invalid authentication header provided",[Pt]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[Ot]:"Cannot set allowNativeBroker parameter to true when not in AAD protocol mode.",[Mt]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority."},Nt={redirectUriNotSet:{code:dt,desc:xt[dt]},claimsRequestParsingError:{code:ht,desc:xt[ht]},authorityUriInsecure:{code:ft,desc:xt[ft]},urlParseError:{code:pt,desc:xt[pt]},urlEmptyError:{code:gt,desc:xt[gt]},emptyScopesError:{code:mt,desc:xt[mt]},invalidPrompt:{code:vt,desc:xt[vt]},invalidClaimsRequest:{code:yt,desc:xt[yt]},tokenRequestEmptyError:{code:Ct,desc:xt[Ct]},logoutRequestEmptyError:{code:It,desc:xt[It]},invalidCodeChallengeMethod:{code:At,desc:xt[At]},invalidCodeChallengeParams:{code:wt,desc:xt[wt]},invalidCloudDiscoveryMetadata:{code:St,desc:xt[St]},invalidAuthorityMetadata:{code:Tt,desc:xt[Tt]},untrustedAuthority:{code:Et,desc:xt[Et]},missingSshJwk:{code:_t,desc:xt[_t]},missingSshKid:{code:bt,desc:xt[bt]},missingNonceAuthenticationHeader:{code:kt,desc:xt[kt]},invalidAuthenticationHeader:{code:Rt,desc:xt[Rt]},cannotSetOIDCOptions:{code:Pt,desc:xt[Pt]},cannotAllowNativeBroker:{code:Ot,desc:xt[Ot]},authorityMismatch:{code:Mt,desc:xt[Mt]}};class Dt extends j{constructor(e){super(e,xt[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,Dt.prototype)}}function Lt(e){return new Dt(e)}class Ut{static isEmptyObj(e){if(e)try{const t=JSON.parse(e);return 0===Object.keys(t).length}catch(e){}return!0}static startsWith(e,t){return 0===e.indexOf(t)}static endsWith(e,t){return e.length>=t.length&&e.lastIndexOf(t)===e.length-t.length}static queryStringToObject(e){const t={},n=e.split("&"),r=e=>decodeURIComponent(e.replace(/\+/g," "));return n.forEach((e=>{if(e.trim()){const[n,i]=e.split(/=(.+)/g,2);n&&i&&(t[r(n)]=r(i))}})),t}static trimArrayEntries(e){return e.map((e=>e.trim()))}static removeEmptyStringsFromArray(e){return e.filter((e=>!!e))}static jsonParseHelper(e){try{return JSON.parse(e)}catch(e){return null}}static matchPattern(e,t){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(t)}}class Ft{constructor(e){const t=e?Ut.trimArrayEntries([...e]):[],n=t?Ut.removeEmptyStringsFromArray(t):[];this.validateInputScopes(n),this.scopes=new Set,n.forEach((e=>this.scopes.add(e)))}static fromString(e){const t=(e||u.EMPTY_STRING).split(" ");return new Ft(t)}static createSearchScopes(e){const t=new Ft(e);return t.containsOnlyOIDCScopes()?t.removeScope(u.OFFLINE_ACCESS_SCOPE):t.removeOIDCScopes(),t}validateInputScopes(e){if(!e||e.length<1)throw Lt(mt)}containsScope(e){const t=this.printScopesLowerCase().split(" "),n=new Ft(t);return!!e&&n.scopes.has(e.toLowerCase())}containsScopeSet(e){return!(!e||e.scopes.size<=0)&&this.scopes.size>=e.scopes.size&&e.asArray().every((e=>this.containsScope(e)))}containsOnlyOIDCScopes(){let e=0;return d.forEach((t=>{this.containsScope(t)&&(e+=1)})),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach((e=>this.appendScope(e)))}catch(e){throw Le(ce)}}removeScope(e){if(!e)throw Le(ae);this.scopes.delete(e.trim())}removeOIDCScopes(){d.forEach((e=>{this.scopes.delete(e)}))}unionScopeSets(e){if(!e)throw Le(ue);const t=new Set;return e.scopes.forEach((e=>t.add(e.toLowerCase()))),this.scopes.forEach((e=>t.add(e.toLowerCase()))),t}intersectingScopeSets(e){if(!e)throw Le(ue);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();const t=this.unionScopeSets(e),n=e.getScopeCount(),r=this.getScopeCount();return t.size<r+n}getScopeCount(){return this.scopes.size}asArray(){const e=[];return this.scopes.forEach((t=>e.push(t))),e}printScopes(){return this.scopes?this.asArray().join(" "):u.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}const qt="@azure/msal-common",Ht="14.14.2";function zt(e){if(!e||e.indexOf("=")<0)return null;try{const t=function(e){return e.startsWith("#/")?e.substring(2):e.startsWith("#")||e.startsWith("?")?e.substring(1):e}(e),n=Object.fromEntries(new URLSearchParams(t));if(n.code||n.error||n.error_description||n.state)return n}catch(e){throw Le(Q)}return null}class jt{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw Lt(gt);e.includes("#")||(this._urlString=jt.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let t=e.toLowerCase();return Ut.endsWith(t,"?")?t=t.slice(0,-1):Ut.endsWith(t,"?/")&&(t=t.slice(0,-2)),Ut.endsWith(t,"/")||(t+="/"),t}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch(e){throw Lt(pt)}if(!e.HostNameAndPort||!e.PathSegments)throw Lt(pt);if(!e.Protocol||"https:"!==e.Protocol.toLowerCase())throw Lt(ft)}static appendQueryString(e,t){return t?e.indexOf("?")<0?`${e}?${t}`:`${e}&${t}`:e}static removeHashFromUrl(e){return jt.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){const t=this.getUrlComponents(),n=t.PathSegments;return!e||0===n.length||n[0]!==m.COMMON&&n[0]!==m.ORGANIZATIONS||(n[0]=e),jt.constructAuthorityUriFromObject(t)}getUrlComponents(){const e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),t=this.urlString.match(e);if(!t)throw Lt(pt);const n={Protocol:t[1],HostNameAndPort:t[4],AbsolutePath:t[5],QueryString:t[7]};let r=n.AbsolutePath.split("/");return r=r.filter((e=>e&&e.length>0)),n.PathSegments=r,n.QueryString&&n.QueryString.endsWith("/")&&(n.QueryString=n.QueryString.substring(0,n.QueryString.length-1)),n}static getDomainFromUrl(e){const t=RegExp("^([^:/?#]+://)?([^/?#]*)"),n=e.match(t);if(!n)throw Lt(pt);return n[2]}static getAbsoluteUrl(e,t){if(e[0]===u.FORWARD_SLASH){const n=new jt(t).getUrlComponents();return n.Protocol+"//"+n.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new jt(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!zt(e)}}const Bt={"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},$t={tenant_discovery_endpoint:"https://{canonicalAuthority}/v2.0/.well-known/openid-configuration",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},Kt=new Set;function Vt(e,t,n,r){if(r?.trace(`getAliasesFromMetadata called with source: ${n}`),e&&t){const i=Gt(t,e);if(i)return r?.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${n}, returning aliases`),i.aliases;r?.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${n}`)}return null}function Gt(e,t){for(let n=0;n<e.length;n++){const r=e[n];if(r.aliases.includes(t))return r}return null}$t.metadata.forEach((e=>{e.aliases.forEach((e=>{Kt.add(e)}))}));const Wt="cache_quota_exceeded",Yt="cache_error_unknown",Qt={[Wt]:"Exceeded cache storage capacity.",[Yt]:"Unexpected error occurred when using cache storage."};class Jt extends Error{constructor(e,t){const n=t||(Qt[e]?Qt[e]:Qt[Yt]);super(`${e}: ${n}`),Object.setPrototypeOf(this,Jt.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=n}}class Xt{constructor(e,t,n,r){this.clientId=e,this.cryptoImpl=t,this.commonLogger=n.clone(qt,Ht),this.staticAuthorityOptions=r}getAllAccounts(e){return this.buildTenantProfiles(this.getAccountsFilteredBy(e||{}),e)}getAccountInfoFilteredBy(e){const t=this.getAllAccounts(e);return t.length>1?t.sort((e=>e.idTokenClaims?-1:1))[0]:1===t.length?t[0]:null}getBaseAccountInfo(e){const t=this.getAccountsFilteredBy(e);return t.length>0?t[0].getAccountInfo():null}buildTenantProfiles(e,t){return e.flatMap((e=>this.getTenantProfilesFromAccountEntity(e,t?.tenantId,t)))}getTenantedAccountInfoByFilter(e,t,n,r){let i,o=null;if(r&&!this.tenantProfileMatchesFilter(n,r))return null;const s=this.getIdToken(e,t,n.tenantId);return s&&(i=Ke(s.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(i,r))?null:(o=ze(e,n,i,s?.secret),o)}getTenantProfilesFromAccountEntity(e,t,n){const r=e.getAccountInfo();let i=r.tenantProfiles||new Map;const o=this.getTokenKeys();if(t){const e=i.get(t);if(!e)return[];i=new Map([[t,e]])}const s=[];return i.forEach((e=>{const t=this.getTenantedAccountInfoByFilter(r,o,e,n);t&&s.push(t)})),s}tenantProfileMatchesFilter(e,t){return!(t.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,t.localAccountId)||t.name&&e.name!==t.name||void 0!==t.isHomeTenant&&e.isHomeTenant!==t.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,t){if(t){if(t.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,t.localAccountId))return!1;if(t.loginHint&&!this.matchLoginHintFromTokenClaims(e,t.loginHint))return!1;if(t.username&&!this.matchUsername(e.preferred_username,t.username))return!1;if(t.name&&!this.matchName(e,t.name))return!1;if(t.sid&&!this.matchSid(e,t.sid))return!1}return!0}async saveCacheRecord(e,t,n){if(!e)throw Le(pe);try{e.account&&this.setAccount(e.account),e.idToken&&!1!==t?.idToken&&this.setIdTokenCredential(e.idToken),e.accessToken&&!1!==t?.accessToken&&await this.saveAccessToken(e.accessToken),e.refreshToken&&!1!==t?.refreshToken&&this.setRefreshTokenCredential(e.refreshToken),e.appMetadata&&this.setAppMetadata(e.appMetadata)}catch(e){throw this.commonLogger?.error("CacheManager.saveCacheRecord: failed"),e instanceof Error?(this.commonLogger?.errorPii(`CacheManager.saveCacheRecord: ${e.message}`,n),"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name||e.message.includes("exceeded the quota")?(this.commonLogger?.error("CacheManager.saveCacheRecord: exceeded storage quota",n),new Jt(Wt)):new Jt(e.name,e.message)):(this.commonLogger?.errorPii(`CacheManager.saveCacheRecord: ${e}`,n),new Jt(Yt))}}async saveAccessToken(e){const t={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},n=this.getTokenKeys(),r=Ft.fromString(e.target),i=[];n.accessToken.forEach((e=>{if(!this.accessTokenKeyMatchesFilter(e,t,!1))return;const n=this.getAccessTokenCredential(e);n&&this.credentialMatchesFilter(n,t)&&Ft.fromString(n.target).intersectingScopeSets(r)&&i.push(this.removeAccessToken(e))})),await Promise.all(i),this.setAccessTokenCredential(e)}getAccountsFilteredBy(e){const t=this.getAccountKeys(),n=[];return t.forEach((t=>{if(!this.isAccountKey(t,e.homeAccountId))return;const r=this.getAccount(t,this.commonLogger);if(!r)return;if(e.homeAccountId&&!this.matchHomeAccountId(r,e.homeAccountId))return;if(e.username&&!this.matchUsername(r.username,e.username))return;if(e.environment&&!this.matchEnvironment(r,e.environment))return;if(e.realm&&!this.matchRealm(r,e.realm))return;if(e.nativeAccountId&&!this.matchNativeAccountId(r,e.nativeAccountId))return;if(e.authorityType&&!this.matchAuthorityType(r,e.authorityType))return;const i={localAccountId:e?.localAccountId,name:e?.name},o=r.tenantProfiles?.filter((e=>this.tenantProfileMatchesFilter(e,i)));o&&0===o.length||n.push(r)})),n}isAccountKey(e,t,n){return!(e.split(w.CACHE_KEY_SEPARATOR).length<3||t&&!e.toLowerCase().includes(t.toLowerCase())||n&&!e.toLowerCase().includes(n.toLowerCase()))}isCredentialKey(e){if(e.split(w.CACHE_KEY_SEPARATOR).length<6)return!1;const t=e.toLowerCase();if(-1===t.indexOf(S.ID_TOKEN.toLowerCase())&&-1===t.indexOf(S.ACCESS_TOKEN.toLowerCase())&&-1===t.indexOf(S.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())&&-1===t.indexOf(S.REFRESH_TOKEN.toLowerCase()))return!1;if(t.indexOf(S.REFRESH_TOKEN.toLowerCase())>-1){const e=`${S.REFRESH_TOKEN}${w.CACHE_KEY_SEPARATOR}${this.clientId}${w.CACHE_KEY_SEPARATOR}`,n=`${S.REFRESH_TOKEN}${w.CACHE_KEY_SEPARATOR}${E}${w.CACHE_KEY_SEPARATOR}`;if(-1===t.indexOf(e.toLowerCase())&&-1===t.indexOf(n.toLowerCase()))return!1}else if(-1===t.indexOf(this.clientId.toLowerCase()))return!1;return!0}credentialMatchesFilter(e,t){if(t.clientId&&!this.matchClientId(e,t.clientId))return!1;if(t.userAssertionHash&&!this.matchUserAssertionHash(e,t.userAssertionHash))return!1;if("string"==typeof t.homeAccountId&&!this.matchHomeAccountId(e,t.homeAccountId))return!1;if(t.environment&&!this.matchEnvironment(e,t.environment))return!1;if(t.realm&&!this.matchRealm(e,t.realm))return!1;if(t.credentialType&&!this.matchCredentialType(e,t.credentialType))return!1;if(t.familyId&&!this.matchFamilyId(e,t.familyId))return!1;if(t.target&&!this.matchTarget(e,t.target))return!1;if((t.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==t.requestedClaimsHash)return!1;if(e.credentialType===S.ACCESS_TOKEN_WITH_AUTH_SCHEME){if(t.tokenType&&!this.matchTokenType(e,t.tokenType))return!1;if(t.tokenType===M.SSH&&t.keyId&&!this.matchKeyId(e,t.keyId))return!1}return!0}getAppMetadataFilteredBy(e){const t=this.getKeys(),n={};return t.forEach((t=>{if(!this.isAppMetadata(t))return;const r=this.getAppMetadata(t);r&&(e.environment&&!this.matchEnvironment(r,e.environment)||e.clientId&&!this.matchClientId(r,e.clientId)||(n[t]=r))})),n}getAuthorityMetadataByAlias(e){const t=this.getAuthorityMetadataKeys();let n=null;return t.forEach((t=>{if(!this.isAuthorityMetadata(t)||-1===t.indexOf(this.clientId))return;const r=this.getAuthorityMetadata(t);r&&-1!==r.aliases.indexOf(e)&&(n=r)})),n}async removeAllAccounts(){const e=this.getAccountKeys(),t=[];e.forEach((e=>{t.push(this.removeAccount(e))})),await Promise.all(t)}async removeAccount(e){const t=this.getAccount(e,this.commonLogger);t&&(await this.removeAccountContext(t),this.removeItem(e))}async removeAccountContext(e){const t=this.getTokenKeys(),n=e.generateAccountId(),r=[];t.idToken.forEach((e=>{0===e.indexOf(n)&&this.removeIdToken(e)})),t.accessToken.forEach((e=>{0===e.indexOf(n)&&r.push(this.removeAccessToken(e))})),t.refreshToken.forEach((e=>{0===e.indexOf(n)&&this.removeRefreshToken(e)})),await Promise.all(r)}updateOutdatedCachedAccount(e,t,n){if(t&&t.isSingleTenant()){this.commonLogger?.verbose("updateOutdatedCachedAccount: Found a single-tenant (outdated) account entity in the cache, migrating to multi-tenant account entity");const r=this.getAccountKeys().filter((e=>e.startsWith(t.homeAccountId))),i=[];r.forEach((e=>{const t=this.getCachedAccountEntity(e);t&&i.push(t)}));const o=i.find((e=>qe(e.realm,e.homeAccountId)))||i[0];o.tenantProfiles=i.map((e=>({tenantId:e.realm,localAccountId:e.localAccountId,name:e.name,isHomeTenant:qe(e.realm,e.homeAccountId)})));const s=Xt.toObject(new $e,{...o}),a=s.generateAccountKey();return r.forEach((t=>{t!==a&&this.removeOutdatedAccount(e)})),this.setAccount(s),n?.verbose("Updated an outdated account entity in the cache"),s}return t}async removeAccessToken(e){const t=this.getAccessTokenCredential(e);if(t){if(t.credentialType.toLowerCase()===S.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()&&t.tokenType===M.POP){const e=t.keyId;if(e)try{await this.cryptoImpl.removeTokenBindingKey(e)}catch(e){throw Le(Ee)}}return this.removeItem(e)}}removeAppMetadata(){return this.getKeys().forEach((e=>{this.isAppMetadata(e)&&this.removeItem(e)})),!0}readAccountFromCache(e){const t=$e.generateAccountCacheKey(e);return this.getAccount(t,this.commonLogger)}getIdToken(e,t,n,r,i){this.commonLogger.trace("CacheManager - getIdToken called");const o={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:S.ID_TOKEN,clientId:this.clientId,realm:n},s=this.getIdTokensByFilter(o,t),a=s.size;if(a<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(a>1){let t=s;if(!n){const n=new Map;s.forEach(((t,r)=>{t.realm===e.tenantId&&n.set(r,t)}));const r=n.size;if(r<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),s.values().next().value;if(1===r)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),n.values().next().value;t=n}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),t.forEach(((e,t)=>{this.removeIdToken(t)})),r&&i&&r.addFields({multiMatchedID:s.size},i),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),s.values().next().value}getIdTokensByFilter(e,t){const n=t&&t.idToken||this.getTokenKeys().idToken,r=new Map;return n.forEach((t=>{if(!this.idTokenKeyMatchesFilter(t,{clientId:this.clientId,...e}))return;const n=this.getIdTokenCredential(t);n&&this.credentialMatchesFilter(n,e)&&r.set(t,n)})),r}idTokenKeyMatchesFilter(e,t){const n=e.toLowerCase();return!(t.clientId&&-1===n.indexOf(t.clientId.toLowerCase())||t.homeAccountId&&-1===n.indexOf(t.homeAccountId.toLowerCase()))}removeIdToken(e){this.removeItem(e)}removeRefreshToken(e){this.removeItem(e)}getAccessToken(e,t,n,r,i,o){this.commonLogger.trace("CacheManager - getAccessToken called");const s=Ft.createSearchScopes(t.scopes),a=t.authenticationScheme||M.BEARER,c=a&&a.toLowerCase()!==M.BEARER.toLowerCase()?S.ACCESS_TOKEN_WITH_AUTH_SCHEME:S.ACCESS_TOKEN,u={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:c,clientId:this.clientId,realm:r||e.tenantId,target:s,tokenType:a,keyId:t.sshKid,requestedClaimsHash:t.requestedClaimsHash},l=n&&n.accessToken||this.getTokenKeys().accessToken,d=[];l.forEach((e=>{if(this.accessTokenKeyMatchesFilter(e,u,!0)){const t=this.getAccessTokenCredential(e);t&&this.credentialMatchesFilter(t,u)&&d.push(t)}}));const h=d.length;return h<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found"),null):h>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them"),d.forEach((e=>{this.removeAccessToken(Qe(e))})),i&&o&&i.addFields({multiMatchedAT:d.length},o),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token"),d[0])}accessTokenKeyMatchesFilter(e,t,n){const r=e.toLowerCase();if(t.clientId&&-1===r.indexOf(t.clientId.toLowerCase()))return!1;if(t.homeAccountId&&-1===r.indexOf(t.homeAccountId.toLowerCase()))return!1;if(t.realm&&-1===r.indexOf(t.realm.toLowerCase()))return!1;if(t.requestedClaimsHash&&-1===r.indexOf(t.requestedClaimsHash.toLowerCase()))return!1;if(t.target){const e=t.target.asArray();for(let t=0;t<e.length;t++){if(n&&!r.includes(e[t].toLowerCase()))return!1;if(!n&&r.includes(e[t].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e){const t=this.getTokenKeys(),n=[];return t.accessToken.forEach((t=>{if(!this.accessTokenKeyMatchesFilter(t,e,!0))return;const r=this.getAccessTokenCredential(t);r&&this.credentialMatchesFilter(r,e)&&n.push(r)})),n}getRefreshToken(e,t,n,r,i){this.commonLogger.trace("CacheManager - getRefreshToken called");const o=t?E:void 0,s={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:S.REFRESH_TOKEN,clientId:this.clientId,familyId:o},a=n&&n.refreshToken||this.getTokenKeys().refreshToken,c=[];a.forEach((e=>{if(this.refreshTokenKeyMatchesFilter(e,s)){const t=this.getRefreshTokenCredential(e);t&&this.credentialMatchesFilter(t,s)&&c.push(t)}}));const u=c.length;return u<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(u>1&&r&&i&&r.addFields({multiMatchedRT:u},i),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),c[0])}refreshTokenKeyMatchesFilter(e,t){const n=e.toLowerCase();return!(t.familyId&&-1===n.indexOf(t.familyId.toLowerCase())||!t.familyId&&t.clientId&&-1===n.indexOf(t.clientId.toLowerCase())||t.homeAccountId&&-1===n.indexOf(t.homeAccountId.toLowerCase()))}readAppMetadataFromCache(e){const t={environment:e,clientId:this.clientId},n=this.getAppMetadataFilteredBy(t),r=Object.keys(n).map((e=>n[e])),i=r.length;if(i<1)return null;if(i>1)throw Le(oe);return r[0]}isAppMetadataFOCI(e){const t=this.readAppMetadataFromCache(e);return!(!t||t.familyId!==E)}matchHomeAccountId(e,t){return!("string"!=typeof e.homeAccountId||t!==e.homeAccountId)}matchLocalAccountIdFromTokenClaims(e,t){return t===(e.oid||e.sub)}matchLocalAccountIdFromTenantProfile(e,t){return e.localAccountId===t}matchName(e,t){return!(t.toLowerCase()!==e.name?.toLowerCase())}matchUsername(e,t){return!(!e||"string"!=typeof e||t?.toLowerCase()!==e.toLowerCase())}matchUserAssertionHash(e,t){return!(!e.userAssertionHash||t!==e.userAssertionHash)}matchEnvironment(e,t){if(this.staticAuthorityOptions){const n=function(e,t){let n;const r=e.canonicalAuthority;if(r){const i=new jt(r).getUrlComponents().HostNameAndPort;n=Vt(i,e.cloudDiscoveryMetadata?.metadata,b,t)||Vt(i,$t.metadata,P,t)||e.knownAuthorities}return n||[]}(this.staticAuthorityOptions,this.commonLogger);if(n.includes(t)&&n.includes(e.environment))return!0}const n=this.getAuthorityMetadataByAlias(t);return!!(n&&n.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,t){return e.credentialType&&t.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,t){return!(!e.clientId||t!==e.clientId)}matchFamilyId(e,t){return!(!e.familyId||t!==e.familyId)}matchRealm(e,t){return!(e.realm?.toLowerCase()!==t.toLowerCase())}matchNativeAccountId(e,t){return!(!e.nativeAccountId||t!==e.nativeAccountId)}matchLoginHintFromTokenClaims(e,t){return e.login_hint===t||e.preferred_username===t||e.upn===t}matchSid(e,t){return e.sid===t}matchAuthorityType(e,t){return!(!e.authorityType||t.toLowerCase()!==e.authorityType.toLowerCase())}matchTarget(e,t){return!(e.credentialType!==S.ACCESS_TOKEN&&e.credentialType!==S.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target)&&Ft.fromString(e.target).containsScopeSet(t)}matchTokenType(e,t){return!(!e.tokenType||e.tokenType!==t)}matchKeyId(e,t){return!(!e.keyId||e.keyId!==t)}isAppMetadata(e){return-1!==e.indexOf(T)}isAuthorityMetadata(e){return-1!==e.indexOf(_)}generateAuthorityMetadataCacheKey(e){return`${_}-${this.clientId}-${e}`}static toObject(e,t){for(const n in t)e[n]=t[n];return e}}class Zt extends Xt{setAccount(){throw Le(Oe)}getAccount(){throw Le(Oe)}getCachedAccountEntity(){throw Le(Oe)}setIdTokenCredential(){throw Le(Oe)}getIdTokenCredential(){throw Le(Oe)}setAccessTokenCredential(){throw Le(Oe)}getAccessTokenCredential(){throw Le(Oe)}setRefreshTokenCredential(){throw Le(Oe)}getRefreshTokenCredential(){throw Le(Oe)}setAppMetadata(){throw Le(Oe)}getAppMetadata(){throw Le(Oe)}setServerTelemetry(){throw Le(Oe)}getServerTelemetry(){throw Le(Oe)}setAuthorityMetadata(){throw Le(Oe)}getAuthorityMetadata(){throw Le(Oe)}getAuthorityMetadataKeys(){throw Le(Oe)}setThrottlingCache(){throw Le(Oe)}getThrottlingCache(){throw Le(Oe)}removeItem(){throw Le(Oe)}getKeys(){throw Le(Oe)}getAccountKeys(){throw Le(Oe)}getTokenKeys(){throw Le(Oe)}async clear(){throw Le(Oe)}updateCredentialCacheKey(){throw Le(Oe)}removeOutdatedAccount(){throw Le(Oe)}}class en{static deserializeJSONBlob(e){return e?JSON.parse(e):{}}static deserializeAccounts(e){const t={};return e&&Object.keys(e).map((function(n){const r=e[n],i={homeAccountId:r.home_account_id,environment:r.environment,realm:r.realm,localAccountId:r.local_account_id,username:r.username,authorityType:r.authority_type,name:r.name,clientInfo:r.client_info,lastModificationTime:r.last_modification_time,lastModificationApp:r.last_modification_app,tenantProfiles:r.tenantProfiles?.map((e=>JSON.parse(e)))},o=new $e;Xt.toObject(o,i),t[n]=o})),t}static deserializeIdTokens(e){const t={};return e&&Object.keys(e).map((function(n){const r=e[n],i={homeAccountId:r.home_account_id,environment:r.environment,credentialType:r.credential_type,clientId:r.client_id,secret:r.secret,realm:r.realm};t[n]=i})),t}static deserializeAccessTokens(e){const t={};return e&&Object.keys(e).map((function(n){const r=e[n],i={homeAccountId:r.home_account_id,environment:r.environment,credentialType:r.credential_type,clientId:r.client_id,secret:r.secret,realm:r.realm,target:r.target,cachedAt:r.cached_at,expiresOn:r.expires_on,extendedExpiresOn:r.extended_expires_on,refreshOn:r.refresh_on,keyId:r.key_id,tokenType:r.token_type,requestedClaims:r.requestedClaims,requestedClaimsHash:r.requestedClaimsHash,userAssertionHash:r.userAssertionHash};t[n]=i})),t}static deserializeRefreshTokens(e){const t={};return e&&Object.keys(e).map((function(n){const r=e[n],i={homeAccountId:r.home_account_id,environment:r.environment,credentialType:r.credential_type,clientId:r.client_id,secret:r.secret,familyId:r.family_id,target:r.target,realm:r.realm};t[n]=i})),t}static deserializeAppMetadata(e){const t={};return e&&Object.keys(e).map((function(n){const r=e[n];t[n]={clientId:r.client_id,environment:r.environment,familyId:r.family_id}})),t}static deserializeAllCache(e){return{accounts:e.Account?this.deserializeAccounts(e.Account):{},idTokens:e.IdToken?this.deserializeIdTokens(e.IdToken):{},accessTokens:e.AccessToken?this.deserializeAccessTokens(e.AccessToken):{},refreshTokens:e.RefreshToken?this.deserializeRefreshTokens(e.RefreshToken):{},appMetadata:e.AppMetadata?this.deserializeAppMetadata(e.AppMetadata):{}}}}const tn="Metadata",nn="api-version",rn="resource",on="https://login.microsoftonline.com/managed_identity/",sn="AZURE_POD_IDENTITY_AUTHORITY_HOST",an="IDENTITY_ENDPOINT",cn="IDENTITY_HEADER",un="IDENTITY_SERVER_THUMBPRINT",ln="IMDS_ENDPOINT",dn="MSI_ENDPOINT",hn={APP_SERVICE:"AppService",AZURE_ARC:"AzureArc",CLOUD_SHELL:"CloudShell",DEFAULT_TO_IMDS:"DefaultToImds",IMDS:"Imds",SERVICE_FABRIC:"ServiceFabric"},fn="system-assigned",pn="user-assigned-client-id",gn="user-assigned-resource-id",mn="user-assigned-object-id",vn="get",yn="post",Cn=200,In=299,An=500,wn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",Sn="msal.js.node",Tn="urn:ietf:params:oauth:client-assertion-type:jwt-bearer",En="authorization_pending",_n="http://",bn="localhost",kn=[404,408,429,500,503,504];class Rn{constructor(e,t){this.cacheOutcome=N,this.cacheManager=t,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||u.EMPTY_STRING,this.wrapperVer=e.wrapperVer||u.EMPTY_STRING,this.telemetryCacheKey=O.CACHE_KEY+w.CACHE_KEY_SEPARATOR+e.clientId}generateCurrentRequestHeaderValue(){const e=`${this.apiId}${O.VALUE_SEPARATOR}${this.cacheOutcome}`,t=[this.wrapperSKU,this.wrapperVer],n=this.getNativeBrokerErrorCode();n?.length&&t.push(`broker_error=${n}`);const r=t.join(O.VALUE_SEPARATOR),i=[e,this.getRegionDiscoveryFields()].join(O.VALUE_SEPARATOR);return[O.SCHEMA_VERSION,i,r].join(O.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){const e=this.getLastRequests(),t=Rn.maxErrorsToSend(e),n=e.failedRequests.slice(0,2*t).join(O.VALUE_SEPARATOR),r=e.errors.slice(0,t).join(O.VALUE_SEPARATOR),i=e.errors.length,o=[i,t<i?O.OVERFLOW_TRUE:O.OVERFLOW_FALSE].join(O.VALUE_SEPARATOR);return[O.SCHEMA_VERSION,e.cacheHits,n,r,o].join(O.CATEGORY_SEPARATOR)}cacheFailedRequest(e){const t=this.getLastRequests();t.errors.length>=O.MAX_CACHED_ERRORS&&(t.failedRequests.shift(),t.failedRequests.shift(),t.errors.shift()),t.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof j?e.subError?t.errors.push(e.subError):e.errorCode?t.errors.push(e.errorCode):t.errors.push(e.toString()):t.errors.push(e.toString()):t.errors.push(O.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t)}incrementCacheHits(){const e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e),e.cacheHits}getLastRequests(){return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||{failedRequests:[],errors:[],cacheHits:0}}clearTelemetryCache(){const e=this.getLastRequests(),t=Rn.maxErrorsToSend(e);if(t===e.errors.length)this.cacheManager.removeItem(this.telemetryCacheKey);else{const n={failedRequests:e.failedRequests.slice(2*t),errors:e.errors.slice(t),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,n)}}static maxErrorsToSend(e){let t,n=0,r=0;const i=e.errors.length;for(t=0;t<i;t++){const i=e.failedRequests[2*t]||u.EMPTY_STRING,o=e.failedRequests[2*t+1]||u.EMPTY_STRING,s=e.errors[t]||u.EMPTY_STRING;if(r+=i.toString().length+o.toString().length+s.length+3,!(r<O.MAX_LAST_HEADER_BYTES))break;n+=1}return n}getRegionDiscoveryFields(){const e=[];return e.push(this.regionUsed||u.EMPTY_STRING),e.push(this.regionSource||u.EMPTY_STRING),e.push(this.regionOutcome||u.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){const t=this.getLastRequests();t.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){const e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e)}static makeExtraSkuString(e){return function(e){const{skus:t,libraryName:n,libraryVersion:r,extensionName:i,extensionVersion:o}=e,s=new Map([[0,[n,r]],[2,[i,o]]]);let a=[];if(t?.length){if(a=t.split(","),a.length<4)return t}else a=Array.from({length:4},(()=>"|"));return s.forEach(((e,t)=>{2===e.length&&e[0]?.length&&e[1]?.length&&function(e){const{skuArr:t,index:n,skuName:r,skuVersion:i}=e;n>=t.length||(t[n]=[r,i].join("|"))}({skuArr:a,index:t,skuName:e[0],skuVersion:e[1]})})),a.join(",")}(e)}}const Pn="client_id",On="response_type",Mn="token_type",xn="req_cnf",Nn="return_spa_code",Dn="x-client-xtra-sku";class Ln extends j{constructor(e,t,n,r,i){super(e,t,n),this.name="ServerError",this.errorNo=r,this.status=i,Object.setPrototypeOf(this,Ln.prototype)}}var Un;!function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Info=2]="Info",e[e.Verbose=3]="Verbose",e[e.Trace=4]="Trace"}(Un||(Un={}));class Fn{constructor(e,t,n){this.level=Un.Info;const r=e||Fn.createDefaultLoggerOptions();this.localCallback=r.loggerCallback||(()=>{}),this.piiLoggingEnabled=r.piiLoggingEnabled||!1,this.level="number"==typeof r.logLevel?r.logLevel:Un.Info,this.correlationId=r.correlationId||u.EMPTY_STRING,this.packageName=t||u.EMPTY_STRING,this.packageVersion=n||u.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:Un.Info}}clone(e,t,n){return new Fn({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:n||this.correlationId},e,t)}logMessage(e,t){if(t.logLevel>this.level||!this.piiLoggingEnabled&&t.containsPii)return;const n=`[${(new Date).toUTCString()}] : [${t.correlationId||this.correlationId||""}] : ${this.packageName}@${this.packageVersion} : ${Un[t.logLevel]} - ${e}`;this.executeCallback(t.logLevel,n,t.containsPii||!1)}executeCallback(e,t,n){this.localCallback&&this.localCallback(e,t,n)}error(e,t){this.logMessage(e,{logLevel:Un.Error,containsPii:!1,correlationId:t||u.EMPTY_STRING})}errorPii(e,t){this.logMessage(e,{logLevel:Un.Error,containsPii:!0,correlationId:t||u.EMPTY_STRING})}warning(e,t){this.logMessage(e,{logLevel:Un.Warning,containsPii:!1,correlationId:t||u.EMPTY_STRING})}warningPii(e,t){this.logMessage(e,{logLevel:Un.Warning,containsPii:!0,correlationId:t||u.EMPTY_STRING})}info(e,t){this.logMessage(e,{logLevel:Un.Info,containsPii:!1,correlationId:t||u.EMPTY_STRING})}infoPii(e,t){this.logMessage(e,{logLevel:Un.Info,containsPii:!0,correlationId:t||u.EMPTY_STRING})}verbose(e,t){this.logMessage(e,{logLevel:Un.Verbose,containsPii:!1,correlationId:t||u.EMPTY_STRING})}verbosePii(e,t){this.logMessage(e,{logLevel:Un.Verbose,containsPii:!0,correlationId:t||u.EMPTY_STRING})}trace(e,t){this.logMessage(e,{logLevel:Un.Trace,containsPii:!1,correlationId:t||u.EMPTY_STRING})}tracePii(e,t){this.logMessage(e,{logLevel:Un.Trace,containsPii:!0,correlationId:t||u.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}const qn={None:"none",AzurePublic:"https://login.microsoftonline.com",AzurePpe:"https://login.windows-ppe.net",AzureChina:"https://login.chinacloudapi.cn",AzureGermany:"https://login.microsoftonline.de",AzureUsGovernment:"https://login.microsoftonline.us"},Hn="refreshTokenClientExecutePostToTokenEndpoint",zn="authorizationCodeClientExecutePostToTokenEndpoint",jn="refreshTokenClientExecuteTokenRequest",Bn="refreshTokenClientAcquireToken",$n="refreshTokenClientAcquireTokenWithCachedRefreshToken",Kn="refreshTokenClientAcquireTokenByRefreshToken",Vn="refreshTokenClientCreateTokenRequestBody",Gn="silentFlowClientAcquireCachedToken",Wn="silentFlowClientGenerateResultFromCacheRecord",Yn="getAuthCodeUrl",Qn="updateTokenEndpointAuthority",Jn="authClientAcquireToken",Xn="authClientExecuteTokenRequest",Zn="authClientCreateTokenRequestBody",er="authClientCreateQueryString",tr="popTokenGenerateCnf",nr="popTokenGenerateKid",rr="handleServerTokenResponse",ir="authorityFactoryCreateDiscoveredInstance",or="authorityResolveEndpointsAsync",sr="authorityGetCloudDiscoveryMetadataFromNetwork",ar="authorityUpdateCloudDiscoveryMetadata",cr="authorityGetEndpointMetadataFromNetwork",ur="authorityUpdateEndpointMetadata",lr="authorityUpdateMetadataWithRegionalInformation",dr="regionDiscoveryDetectRegion",hr="regionDiscoveryGetRegionFromIMDS",fr="regionDiscoveryGetCurrentVersion",pr="cacheManagerGetRefreshToken",gr=(new Map([["acquireTokenByCode","ATByCode"],["acquireTokenByRefreshToken","ATByRT"],["acquireTokenSilent","ATS"],["acquireTokenSilentAsync","ATSAsync"],["acquireTokenPopup","ATPopup"],["acquireTokenRedirect","ATRedirect"],["cryptoOptsGetPublicKeyThumbprint","CryptoGetPKThumb"],["cryptoOptsSignJwt","CryptoSignJwt"],["silentCacheClientAcquireToken","SltCacheClientAT"],["silentIframeClientAcquireToken","SltIframeClientAT"],["silentRefreshClientAcquireToken","SltRClientAT"],["ssoSilent","SsoSlt"],["standardInteractionClientGetDiscoveredAuthority","StdIntClientGetDiscAuth"],["fetchAccountIdWithNativeBroker","FetchAccIdWithNtvBroker"],["nativeInteractionClientAcquireToken","NtvIntClientAT"],["baseClientCreateTokenRequestHeaders","BaseClientCreateTReqHead"],[Hn,"RTClientExecPost"],[zn,"AuthCodeClientExecPost"],["brokerHandshake","BrokerHandshake"],["acquireTokenByRefreshTokenInBroker","ATByRTInBroker"],["acquireTokenByBroker","ATByBroker"],[jn,"RTClientExecTReq"],[Bn,"RTClientAT"],[$n,"RTClientATWithCachedRT"],[Kn,"RTClientATByRT"],[Vn,"RTClientCreateTReqBody"],["acquireTokenFromCache","ATFromCache"],[Gn,"SltFlowClientATCached"],[Wn,"SltFlowClientGenResFromCache"],["acquireTokenBySilentIframe","ATBySltIframe"],["initializeBaseRequest","InitBaseReq"],["initializeSilentRequest","InitSltReq"],["initializeClientApplication","InitClientApplication"],["silentIframeClientTokenHelper","SIClientTHelper"],["silentHandlerInitiateAuthRequest","SHandlerInitAuthReq"],["silentHandlerMonitorIframeForHash","SltHandlerMonitorIframeForHash"],["silentHandlerLoadFrame","SHandlerLoadFrame"],["silentHandlerLoadFrameSync","SHandlerLoadFrameSync"],["standardInteractionClientCreateAuthCodeClient","StdIntClientCreateAuthCodeClient"],["standardInteractionClientGetClientConfiguration","StdIntClientGetClientConf"],["standardInteractionClientInitializeAuthorizationRequest","StdIntClientInitAuthReq"],["standardInteractionClientInitializeAuthorizationCodeRequest","StdIntClientInitAuthCodeReq"],[Yn,"GetAuthCodeUrl"],["handleCodeResponseFromServer","HandleCodeResFromServer"],["handleCodeResponse","HandleCodeResp"],[Qn,"UpdTEndpointAuth"],[Jn,"AuthClientAT"],[Xn,"AuthClientExecTReq"],[Zn,"AuthClientCreateTReqBody"],[er,"AuthClientCreateQueryStr"],[tr,"PopTGenCnf"],[nr,"PopTGenKid"],[rr,"HandleServerTRes"],["deserializeResponse","DeserializeRes"],[ir,"AuthFactCreateDiscInst"],[or,"AuthResolveEndpointsAsync"],["authorityResolveEndpointsFromLocalSources","AuthResolveEndpointsFromLocal"],[sr,"AuthGetCDMetaFromNet"],[ar,"AuthUpdCDMeta"],[cr,"AuthUpdCDMetaFromNet"],[ur,"AuthUpdEndpointMeta"],[lr,"AuthUpdMetaWithRegInfo"],[dr,"RegDiscDetectReg"],[hr,"RegDiscGetRegFromIMDS"],[fr,"RegDiscGetCurrentVer"],["acquireTokenByCodeAsync","ATByCodeAsync"],["getEndpointMetadataFromNetwork","GetEndpointMetaFromNet"],["getCloudDiscoveryMetadataFromNetworkMeasurement","GetCDMetaFromNet"],["handleRedirectPromise","HandleRedirectPromise"],["handleNativeRedirectPromise","HandleNtvRedirectPromise"],["updateCloudDiscoveryMetadataMeasurement","UpdateCDMeta"],["usernamePasswordClientAcquireToken","UserPassClientAT"],["nativeMessageHandlerHandshake","NtvMsgHandlerHandshake"],["nativeGenerateAuthResult","NtvGenAuthRes"],["removeHiddenIframe","RemoveHiddenIframe"],["clearTokensAndKeysWithClaims","ClearTAndKeysWithClaims"],[pr,"CacheManagerGetRT"],["generatePkceCodes","GenPkceCodes"],["generateCodeVerifier","GenCodeVerifier"],["generateCodeChallengeFromVerifier","GenCodeChallengeFromVerifier"],["sha256Digest","Sha256Digest"],["getRandomValues","GetRandomValues"]]),new Set(["accessTokenSize","durationMs","idTokenSize","matsSilentStatus","matsHttpStatus","refreshTokenSize","queuedTimeMs","startTimeMs","status","multiMatchedAT","multiMatchedID","multiMatchedRT"]),(e,t,n,r,i)=>(...o)=>{n.trace(`Executing function ${t}`);const s=r?.startMeasurement(t,i);if(i){const e=t+"CallCount";r?.incrementFields({[e]:1},i)}return r?.setPreQueueTime(t,i),e(...o).then((e=>(n.trace(`Returning result from ${t}`),s?.end({success:!0}),e))).catch((e=>{n.trace(`Error occurred in ${t}`);try{n.trace(JSON.stringify(e))}catch(e){n.trace("Unable to print error message.")}throw s?.end({success:!1},e),e}))});class mr{constructor(e,t,n,r){this.networkInterface=e,this.logger=t,this.performanceClient=n,this.correlationId=r}async detectRegion(e,t){this.performanceClient?.addQueueMeasurement(dr,this.correlationId);let n=e;if(n)t.region_source="3";else{const e=mr.IMDS_OPTIONS;try{const r=await gr(this.getRegionFromIMDS.bind(this),hr,this.logger,this.performanceClient,this.correlationId)(u.IMDS_VERSION,e);if(200===r.status&&(n=r.body,t.region_source="4"),400===r.status){const r=await gr(this.getCurrentVersion.bind(this),fr,this.logger,this.performanceClient,this.correlationId)(e);if(!r)return t.region_source="1",null;const i=await gr(this.getRegionFromIMDS.bind(this),hr,this.logger,this.performanceClient,this.correlationId)(r,e);200===i.status&&(n=i.body,t.region_source="4")}}catch(e){return t.region_source="1",null}}return n||(t.region_source="1"),n||null}async getRegionFromIMDS(e,t){return this.performanceClient?.addQueueMeasurement(hr,this.correlationId),this.networkInterface.sendGetRequestAsync(`${u.IMDS_ENDPOINT}?api-version=${e}&format=text`,t,u.IMDS_TIMEOUT)}async getCurrentVersion(e){this.performanceClient?.addQueueMeasurement(fr,this.correlationId);try{const t=await this.networkInterface.sendGetRequestAsync(`${u.IMDS_ENDPOINT}?format=json`,e);return 400===t.status&&t.body&&t.body["newest-versions"]&&t.body["newest-versions"].length>0?t.body["newest-versions"][0]:null}catch(e){return null}}}mr.IMDS_OPTIONS={headers:{Metadata:"true"}};class vr{constructor(e,t,n,r,i,o,s,a){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=t,this.cacheManager=n,this.authorityOptions=r,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=i,this.performanceClient=s,this.correlationId=o,this.managedIdentity=a||!1,this.regionDiscovery=new mr(t,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(u.CIAM_AUTH_URL))return 3;const t=e.PathSegments;if(t.length)switch(t[0].toLowerCase()){case u.ADFS:return 1;case u.DSTS:return 2}return 0}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new jt(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw Le(G)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw Le(G)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw Le(G)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw Le(_e);return this.replacePath(this.metadata.end_session_endpoint)}throw Le(G)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw Le(G)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw Le(G)}canReplaceTenant(e){return 1===e.PathSegments.length&&!vr.reservedTenantDomains.has(e.PathSegments[0])&&0===this.getAuthorityType(e)&&this.protocolMode===Be.AAD}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let t=e;const n=new jt(this.metadata.canonical_authority).getUrlComponents(),r=n.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach(((e,i)=>{let o=r[i];if(0===i&&this.canReplaceTenant(n)){const e=new jt(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];o!==e&&(this.logger.verbose(`Replacing tenant domain name ${o} with id ${e}`),o=e)}e!==o&&(t=t.replace(`/${o}/`,`/${e}/`))})),this.replaceTenant(t)}get defaultOpenIdConfigurationEndpoint(){const e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||1===this.authorityType||this.protocolMode!==Be.AAD&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){this.performanceClient?.addQueueMeasurement(or,this.correlationId);const e=this.getCurrentMetadataEntity(),t=await gr(this.updateCloudDiscoveryMetadata.bind(this),ar,this.logger,this.performanceClient,this.correlationId)(e);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network);const n=await gr(this.updateEndpointMetadata.bind(this),ur,this.logger,this.performanceClient,this.correlationId)(e);this.updateCachedMetadata(e,t,{source:n}),this.performanceClient?.addFields({cloudDiscoverySource:t,authorityEndpointSource:n},this.correlationId)}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:at(),jwks_uri:""}),e}updateCachedMetadata(e,t,n){t!==k&&n?.source!==k&&(e.expiresAt=at(),e.canonical_authority=this.canonicalAuthority);const r=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(r,e),this.metadata=e}async updateEndpointMetadata(e){this.performanceClient?.addQueueMeasurement(ur,this.correlationId);const t=this.updateEndpointMetadataFromLocalSources(e);if(t)return t.source===P&&this.authorityOptions.azureRegionConfiguration?.azureRegion&&t.metadata&&(ct(e,await gr(this.updateMetadataWithRegionalInformation.bind(this),lr,this.logger,this.performanceClient,this.correlationId)(t.metadata),!1),e.canonical_authority=this.canonicalAuthority),t.source;let n=await gr(this.getEndpointMetadataFromNetwork.bind(this),cr,this.logger,this.performanceClient,this.correlationId)();if(n)return this.authorityOptions.azureRegionConfiguration?.azureRegion&&(n=await gr(this.updateMetadataWithRegionalInformation.bind(this),lr,this.logger,this.performanceClient,this.correlationId)(n)),ct(e,n,!0),R;throw Le(Y,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");const t=this.getEndpointMetadataFromConfig();if(t)return this.logger.verbose("Found endpoint metadata in authority configuration"),ct(e,t,!1),{source:b};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{const t=this.getEndpointMetadataFromHardcodedValues();if(t)return ct(e,t,!1),{source:P,metadata:t};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}const n=lt(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!n?(this.logger.verbose("Found endpoint metadata in the cache."),{source:k}):(n&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new jt(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch(e){throw Lt(Tt)}return null}async getEndpointMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(cr,this.correlationId);const e={},t=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${t}`);try{const n=await this.networkInterface.sendGetRequestAsync(t,e),r=function(e){return e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("jwks_uri")}(n.body);return r?n.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(e){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${e}`),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in Bt?Bt[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(e){this.performanceClient?.addQueueMeasurement(lr,this.correlationId);const t=this.authorityOptions.azureRegionConfiguration?.azureRegion;if(t){if(t!==u.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome="2",this.regionDiscoveryMetadata.region_used=t,vr.replaceWithRegionalInformation(e,t);const n=await gr(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),dr,this.logger,this.performanceClient,this.correlationId)(this.authorityOptions.azureRegionConfiguration?.environmentRegion,this.regionDiscoveryMetadata);if(n)return this.regionDiscoveryMetadata.region_outcome="4",this.regionDiscoveryMetadata.region_used=n,vr.replaceWithRegionalInformation(e,n);this.regionDiscoveryMetadata.region_outcome="5"}return e}async updateCloudDiscoveryMetadata(e){this.performanceClient?.addQueueMeasurement(ar,this.correlationId);const t=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(t)return t;const n=await gr(this.getCloudDiscoveryMetadataFromNetwork.bind(this),sr,this.logger,this.performanceClient,this.correlationId)();if(n)return ut(e,n,!0),R;throw Lt(Et)}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||u.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||u.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||u.NOT_APPLICABLE}`);const t=this.getCloudDiscoveryMetadataFromConfig();if(t)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),ut(e,t,!1),b;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{const t=(n=this.hostnameAndPort,Gt($t.metadata,n));if(t)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),ut(e,t,!1),P;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}var n;const r=lt(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!r?(this.logger.verbose("Found cloud discovery metadata in the cache."),k):(r&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(3===this.authorityType)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),vr.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");const e=Gt(JSON.parse(this.authorityOptions.cloudDiscoveryMetadata).metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),e)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),e;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch(e){throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),Lt(St)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),vr.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(sr,this.correlationId);const e=`${u.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,t={};let n=null;try{const r=await this.networkInterface.sendGetRequestAsync(e,t);let i,o;if(function(e){return e.hasOwnProperty("tenant_discovery_endpoint")&&e.hasOwnProperty("metadata")}(r.body))i=r.body,o=i.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${i.tenant_discovery_endpoint}`);else{if(!function(e){return e.hasOwnProperty("error")&&e.hasOwnProperty("error_description")}(r.body))return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${r.status}`),i=r.body,i.error===u.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${i.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${i.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),o=[]}this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),n=Gt(o,this.hostnameAndPort)}catch(e){if(e instanceof j)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.\nError: ${e.errorCode}\nError Description: ${e.errorMessage}`);else{const t=e;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.\nError: ${t.name}\nError Description: ${t.message}`)}return null}return n||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),n=vr.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),n}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter((e=>e&&jt.getDomainFromUrl(e).toLowerCase()===this.hostnameAndPort)).length>0}static generateAuthority(e,t){let n;if(t&&t.azureCloudInstance!==qn.None){const e=t.tenant?t.tenant:u.DEFAULT_COMMON_TENANT;n=`${t.azureCloudInstance}/${e}/`}return n||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return u.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw Le(G)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return Kt.has(e)}static isPublicCloudAuthority(e){return u.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,t,n){const r=new jt(e);r.validateAsUri();const i=r.getUrlComponents();let o=`${t}.${i.HostNameAndPort}`;this.isPublicCloudAuthority(i.HostNameAndPort)&&(o=`${t}.${u.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);const s=jt.constructAuthorityUriFromObject({...r.getUrlComponents(),HostNameAndPort:o}).urlString;return n?`${s}?${n}`:s}static replaceWithRegionalInformation(e,t){const n={...e};return n.authorization_endpoint=vr.buildRegionalAuthorityString(n.authorization_endpoint,t),n.token_endpoint=vr.buildRegionalAuthorityString(n.token_endpoint,t),n.end_session_endpoint&&(n.end_session_endpoint=vr.buildRegionalAuthorityString(n.end_session_endpoint,t)),n}static transformCIAMAuthority(e){let t=e;const n=new jt(e).getUrlComponents();return 0===n.PathSegments.length&&n.HostNameAndPort.endsWith(u.CIAM_AUTH_URL)&&(t=`${t}${n.HostNameAndPort.split(".")[0]}${u.AAD_TENANT_DOMAIN_SUFFIX}`),t}}function yr(e){return e.endsWith(u.FORWARD_SLASH)?e:`${e}${u.FORWARD_SLASH}`}vr.reservedTenantDomains=new Set(["{tenant}","{tenantid}",m.COMMON,m.CONSUMERS,m.ORGANIZATIONS]);const Cr={createNewGuid:()=>{throw Le(Oe)},base64Decode:()=>{throw Le(Oe)},base64Encode:()=>{throw Le(Oe)},base64UrlEncode:()=>{throw Le(Oe)},encodeKid:()=>{throw Le(Oe)},async getPublicKeyThumbprint(){throw Le(Oe)},async removeTokenBindingKey(){throw Le(Oe)},async clearKeystore(){throw Le(Oe)},async signJwt(){throw Le(Oe)},async hashString(){throw Le(Oe)}},Ir={tokenRenewalOffsetSeconds:300,preventCorsPreflight:!1},Ar={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:Un.Info,correlationId:u.EMPTY_STRING},wr={claimsBasedCachingEnabled:!1},Sr={async sendGetRequestAsync(){throw Le(Oe)},async sendPostRequestAsync(){throw Le(Oe)}},Tr={sku:u.SKU,version:Ht,cpu:u.EMPTY_STRING,os:u.EMPTY_STRING},Er={clientSecret:u.EMPTY_STRING,clientAssertion:void 0},_r={azureCloudInstance:qn.None,tenant:`${u.DEFAULT_COMMON_TENANT}`},br={application:{appName:"",appVersion:""}};function kr(e){return e.authOptions.authority.options.protocolMode===Be.OIDC}class Rr{static generateThrottlingStorageKey(e){return`${x}.${JSON.stringify(e)}`}static preProcess(e,t){const n=Rr.generateThrottlingStorageKey(t),r=e.getThrottlingCache(n);if(r){if(r.throttleTime<Date.now())return void e.removeItem(n);throw new Ln(r.errorCodes?.join(" ")||u.EMPTY_STRING,r.errorMessage,r.subError)}}static postProcess(e,t,n){if(Rr.checkResponseStatus(n)||Rr.checkResponseForRetryAfter(n)){const r={throttleTime:Rr.calculateThrottleTime(parseInt(n.headers[f])),error:n.body.error,errorCodes:n.body.error_codes,errorMessage:n.body.error_description,subError:n.body.suberror};e.setThrottlingCache(Rr.generateThrottlingStorageKey(t),r)}}static checkResponseStatus(e){return 429===e.status||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return!!e.headers&&e.headers.hasOwnProperty(f)&&(e.status<200||e.status>=300)}static calculateThrottleTime(e){const t=e<=0?0:e,n=Date.now()/1e3;return Math.floor(1e3*Math.min(n+(t||60),n+3600))}static removeThrottle(e,t,n,r){const i={clientId:t,authority:n.authority,scopes:n.scopes,homeAccountIdentifier:r,claims:n.claims,authenticationScheme:n.authenticationScheme,resourceRequestMethod:n.resourceRequestMethod,resourceRequestUri:n.resourceRequestUri,shrClaims:n.shrClaims,sshKid:n.sshKid},o=this.generateThrottlingStorageKey(i);e.removeItem(o)}}class Pr{constructor(e,t){this.networkClient=e,this.cacheManager=t}async sendPostRequest(e,t,n){let r;Rr.preProcess(this.cacheManager,e);try{r=await this.networkClient.sendPostRequestAsync(t,n)}catch(e){throw e instanceof j?e:Le(W)}return Rr.postProcess(this.cacheManager,e,r),r}}const Or="home_account_id",Mr="UPN";class xr{static validateRedirectUri(e){if(!e)throw Lt(dt)}static validatePrompt(e){const t=[];for(const e in y)t.push(y[e]);if(t.indexOf(e)<0)throw Lt(vt)}static validateClaims(e){try{JSON.parse(e)}catch(e){throw Lt(yt)}}static validateCodeChallengeParams(e,t){if(!e||!t)throw Lt(wt);this.validateCodeChallengeMethod(t)}static validateCodeChallengeMethod(e){if([C.PLAIN,C.S256].indexOf(e)<0)throw Lt(At)}}class Nr{constructor(){this.parameters=new Map}addResponseTypeCode(){this.parameters.set(On,encodeURIComponent(u.CODE_RESPONSE_TYPE))}addResponseTypeForTokenAndIdToken(){this.parameters.set(On,encodeURIComponent(`${u.TOKEN_RESPONSE_TYPE} ${u.ID_TOKEN_RESPONSE_TYPE}`))}addResponseMode(e){this.parameters.set("response_mode",encodeURIComponent(e||I.QUERY))}addNativeBroker(){this.parameters.set("nativebroker",encodeURIComponent("1"))}addScopes(e,t=!0,n=l){!t||n.includes("openid")||e.includes("openid")||n.push("openid");const r=t?[...e||[],...n]:e||[],i=new Ft(r);this.parameters.set("scope",encodeURIComponent(i.printScopes()))}addClientId(e){this.parameters.set(Pn,encodeURIComponent(e))}addRedirectUri(e){xr.validateRedirectUri(e),this.parameters.set("redirect_uri",encodeURIComponent(e))}addPostLogoutRedirectUri(e){xr.validateRedirectUri(e),this.parameters.set("post_logout_redirect_uri",encodeURIComponent(e))}addIdTokenHint(e){this.parameters.set("id_token_hint",encodeURIComponent(e))}addDomainHint(e){this.parameters.set("domain_hint",encodeURIComponent(e))}addLoginHint(e){this.parameters.set("login_hint",encodeURIComponent(e))}addCcsUpn(e){this.parameters.set(p,encodeURIComponent(`UPN:${e}`))}addCcsOid(e){this.parameters.set(p,encodeURIComponent(`Oid:${e.uid}@${e.utid}`))}addSid(e){this.parameters.set("sid",encodeURIComponent(e))}addClaims(e,t){const n=this.addClientCapabilitiesToClaims(e,t);xr.validateClaims(n),this.parameters.set("claims",encodeURIComponent(n))}addCorrelationId(e){this.parameters.set("client-request-id",encodeURIComponent(e))}addLibraryInfo(e){this.parameters.set("x-client-SKU",e.sku),this.parameters.set("x-client-VER",e.version),e.os&&this.parameters.set("x-client-OS",e.os),e.cpu&&this.parameters.set("x-client-CPU",e.cpu)}addApplicationTelemetry(e){e?.appName&&this.parameters.set("x-app-name",e.appName),e?.appVersion&&this.parameters.set("x-app-ver",e.appVersion)}addPrompt(e){xr.validatePrompt(e),this.parameters.set("prompt",encodeURIComponent(e))}addState(e){e&&this.parameters.set("state",encodeURIComponent(e))}addNonce(e){this.parameters.set("nonce",encodeURIComponent(e))}addCodeChallengeParams(e,t){if(xr.validateCodeChallengeParams(e,t),!e||!t)throw Lt(wt);this.parameters.set("code_challenge",encodeURIComponent(e)),this.parameters.set("code_challenge_method",encodeURIComponent(t))}addAuthorizationCode(e){this.parameters.set("code",encodeURIComponent(e))}addDeviceCode(e){this.parameters.set("device_code",encodeURIComponent(e))}addRefreshToken(e){this.parameters.set("refresh_token",encodeURIComponent(e))}addCodeVerifier(e){this.parameters.set("code_verifier",encodeURIComponent(e))}addClientSecret(e){this.parameters.set("client_secret",encodeURIComponent(e))}addClientAssertion(e){e&&this.parameters.set("client_assertion",encodeURIComponent(e))}addClientAssertionType(e){e&&this.parameters.set("client_assertion_type",encodeURIComponent(e))}addOboAssertion(e){this.parameters.set("assertion",encodeURIComponent(e))}addRequestTokenUse(e){this.parameters.set("requested_token_use",encodeURIComponent(e))}addGrantType(e){this.parameters.set("grant_type",encodeURIComponent(e))}addClientInfo(){this.parameters.set("client_info","1")}addExtraQueryParameters(e){Object.entries(e).forEach((([e,t])=>{!this.parameters.has(e)&&t&&this.parameters.set(e,t)}))}addClientCapabilitiesToClaims(e,t){let n;if(e)try{n=JSON.parse(e)}catch(e){throw Lt(yt)}else n={};return t&&t.length>0&&(n.hasOwnProperty(v)||(n[v]={}),n[v].xms_cc={values:t}),JSON.stringify(n)}addUsername(e){this.parameters.set("username",encodeURIComponent(e))}addPassword(e){this.parameters.set("password",encodeURIComponent(e))}addPopToken(e){e&&(this.parameters.set(Mn,M.POP),this.parameters.set(xn,encodeURIComponent(e)))}addSshJwk(e){e&&(this.parameters.set(Mn,M.SSH),this.parameters.set(xn,encodeURIComponent(e)))}addServerTelemetry(e){this.parameters.set("x-client-current-telemetry",e.generateCurrentRequestHeaderValue()),this.parameters.set("x-client-last-telemetry",e.generateLastRequestHeaderValue())}addThrottling(){this.parameters.set("x-ms-lib-capability","retry-after, h429")}addLogoutHint(e){this.parameters.set("logout_hint",encodeURIComponent(e))}createQueryString(){const e=new Array;return this.parameters.forEach(((t,n)=>{e.push(`${n}=${t}`)})),e.join("&")}}async function Dr(e,t,n,r,i,o,s){s?.addQueueMeasurement(ir,o);const a=vr.transformCIAMAuthority(yr(e)),c=new vr(a,t,n,r,i,o,s);try{return await gr(c.resolveEndpointsAsync.bind(c),or,i,s,o)(),c}catch(e){throw Le(G)}}class Lr{constructor(e,t){this.config=function({authOptions:e,systemOptions:t,loggerOptions:n,cacheOptions:r,storageInterface:i,networkInterface:o,cryptoInterface:s,clientCredentials:a,libraryInfo:c,telemetry:u,serverTelemetryManager:l,persistencePlugin:d,serializableCache:h}){const f={...Ar,...n};return{authOptions:(p=e,{clientCapabilities:[],azureCloudOptions:_r,skipAuthorityMetadataCache:!1,...p}),systemOptions:{...Ir,...t},loggerOptions:f,cacheOptions:{...wr,...r},storageInterface:i||new Zt(e.clientId,Cr,new Fn(f)),networkInterface:o||Sr,cryptoInterface:s||Cr,clientCredentials:a||Er,libraryInfo:{...Tr,...c},telemetry:{...br,...u},serverTelemetryManager:l||null,persistencePlugin:d||null,serializableCache:h||null};var p}(e),this.logger=new Fn(this.config.loggerOptions,qt,Ht),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.networkManager=new Pr(this.networkClient,this.cacheManager),this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=t}createTokenRequestHeaders(e){const t={};if(t[h]=u.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case Or:try{const n=Fe(e.credential);t[p]=`Oid:${n.uid}@${n.utid}`}catch(e){this.logger.verbose("Could not parse home account ID for CCS Header: "+e)}break;case Mr:t[p]=`UPN: ${e.credential}`}return t}async executePostToTokenEndpoint(e,t,n,r,i,o){o&&this.performanceClient?.addQueueMeasurement(o,i);const s=await this.networkManager.sendPostRequest(r,e,{body:t,headers:n});return this.performanceClient?.addFields({refreshTokenSize:s.body.refresh_token?.length||0,httpVerToken:s.headers?.["x-ms-httpver"]||""},i),this.config.serverTelemetryManager&&s.status<500&&429!==s.status&&this.config.serverTelemetryManager.clearTelemetryCache(),s}async updateAuthority(e,t){this.performanceClient?.addQueueMeasurement(Qn,t);const n=`https://${e}/${this.authority.tenant}/`,r=await Dr(n,this.networkClient,this.cacheManager,this.authority.options,this.logger,t,this.performanceClient);this.authority=r}createTokenQueryParameters(e){const t=new Nr;return e.tokenQueryParameters&&t.addExtraQueryParameters(e.tokenQueryParameters),t.createQueryString()}}const Ur="no_tokens_found",Fr="native_account_unavailable",qr="refresh_token_expired",Hr="interaction_required",zr="consent_required",jr="login_required",Br="bad_token",$r=[Hr,zr,jr,Br],Kr=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],Vr={[Ur]:"No refresh token found in the cache. Please sign-in.",[Fr]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[qr]:"Refresh token has expired.",[Br]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve."},Gr={noTokensFoundError:{code:Ur,desc:Vr[Ur]},native_account_unavailable:{code:Fr,desc:Vr[Fr]},bad_token:{code:Br,desc:Vr[Br]}};class Wr extends j{constructor(e,t,n,r,i,o,s,a){super(e,t,n),Object.setPrototypeOf(this,Wr.prototype),this.timestamp=r||u.EMPTY_STRING,this.traceId=i||u.EMPTY_STRING,this.correlationId=o||u.EMPTY_STRING,this.claims=s||u.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=a}}function Yr(e,t,n){const r=!!e&&$r.indexOf(e)>-1,i=!!n&&Kr.indexOf(n)>-1,o=!!t&&$r.some((e=>t.indexOf(e)>-1));return r||o||i}function Qr(e){return new Wr(e,Vr[e])}class Jr{static setRequestState(e,t,n){const r=Jr.generateLibraryState(e,n);return t?`${r}${u.RESOURCE_DELIM}${t}`:r}static generateLibraryState(e,t){if(!e)throw Le(ve);const n={id:e.createNewGuid()};t&&(n.meta=t);const r=JSON.stringify(n);return e.base64Encode(r)}static parseRequestState(e,t){if(!e)throw Le(ve);if(!t)throw Le(J);try{const n=t.split(u.RESOURCE_DELIM),r=n[0],i=n.length>1?n.slice(1).join(u.RESOURCE_DELIM):u.EMPTY_STRING,o=e.base64Decode(r),s=JSON.parse(o);return{userRequestState:i||u.EMPTY_STRING,libraryState:s}}catch(e){throw Le(J)}}}class Xr{constructor(e,t){this.cryptoUtils=e,this.performanceClient=t}async generateCnf(e,t){this.performanceClient?.addQueueMeasurement(tr,e.correlationId);const n=await gr(this.generateKid.bind(this),tr,t,this.performanceClient,e.correlationId)(e),r=this.cryptoUtils.base64UrlEncode(JSON.stringify(n));return{kid:n.kid,reqCnfString:r}}async generateKid(e){return this.performanceClient?.addQueueMeasurement(nr,e.correlationId),{kid:await this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:"sw"}}async signPopToken(e,t,n){return this.signPayload(e,t,n)}async signPayload(e,t,n,r){const{resourceRequestMethod:i,resourceRequestUri:o,shrClaims:s,shrNonce:a,shrOptions:c}=n,u=o?new jt(o):void 0,l=u?.getUrlComponents();return this.cryptoUtils.signJwt({at:e,ts:Ge(),m:i?.toUpperCase(),u:l?.HostNameAndPort,nonce:a||this.cryptoUtils.createNewGuid(),p:l?.AbsolutePath,q:l?.QueryString?[[],l.QueryString]:void 0,client_claims:s||void 0,...r},t,c,n.correlationId)}}class Zr{constructor(e,t){this.cache=e,this.hasChanged=t}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}class ei{constructor(e,t,n,r,i,o,s){this.clientId=e,this.cacheStorage=t,this.cryptoObj=n,this.logger=r,this.serializableCache=i,this.persistencePlugin=o,this.performanceClient=s}validateServerAuthorizationCodeResponse(e,t){if(!e.state||!t)throw e.state?Le(Z,"Cached State"):Le(Z,"Server State");let n,r;try{n=decodeURIComponent(e.state)}catch(t){throw Le(J,e.state)}try{r=decodeURIComponent(t)}catch(t){throw Le(J,e.state)}if(n!==r)throw Le(X);if(e.error||e.error_description||e.suberror){const t=function(e){const t=e.error_uri?.lastIndexOf("code=");return t&&t>=0?e.error_uri?.substring(t+5):void 0}(e);if(Yr(e.error,e.error_description,e.suberror))throw new Wr(e.error||"",e.error_description,e.suberror,e.timestamp||"",e.trace_id||"",e.correlation_id||"",e.claims||"",t);throw new Ln(e.error||"",e.error_description,e.suberror,t)}}validateTokenResponse(e,t){if(e.error||e.error_description||e.suberror){const n=`Error(s): ${e.error_codes||u.NOT_AVAILABLE} - Timestamp: ${e.timestamp||u.NOT_AVAILABLE} - Description: ${e.error_description||u.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||u.NOT_AVAILABLE} - Trace ID: ${e.trace_id||u.NOT_AVAILABLE}`,r=e.error_codes?.length?e.error_codes[0]:void 0,i=new Ln(e.error,n,e.suberror,r,e.status);if(t&&e.status&&e.status>=500&&e.status<=599)return void this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.\n${i}`);if(t&&e.status&&e.status>=400&&e.status<=499)return void this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.\n${i}`);if(Yr(e.error,e.error_description,e.suberror))throw new Wr(e.error,e.error_description,e.suberror,e.timestamp||u.EMPTY_STRING,e.trace_id||u.EMPTY_STRING,e.correlation_id||u.EMPTY_STRING,e.claims||u.EMPTY_STRING,r);throw i}}async handleServerTokenResponse(e,t,n,r,i,o,s,a,c){let l,d;if(this.performanceClient?.addQueueMeasurement(rr,e.correlation_id),e.id_token){if(l=Ke(e.id_token||u.EMPTY_STRING,this.cryptoObj.base64Decode),i&&i.nonce&&l.nonce!==i.nonce)throw Le(ee);if(r.maxAge||0===r.maxAge){const e=l.auth_time;if(!e)throw Le(te);Ve(e,r.maxAge)}}this.homeAccountIdentifier=$e.generateHomeAccountId(e.client_info||u.EMPTY_STRING,t.authorityType,this.logger,this.cryptoObj,l),i&&i.state&&(d=Jr.parseRequestState(this.cryptoObj,i.state)),e.key_id=e.key_id||r.sshKid||void 0;const h=this.generateCacheRecord(e,t,n,r,l,o,i);let f;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),f=new Zr(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(f)),s&&!a&&h.account){const e=h.account.generateAccountKey();if(!this.cacheStorage.getAccount(e,this.logger))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await ei.generateAuthenticationResult(this.cryptoObj,t,h,!1,r,l,d,void 0,c)}await this.cacheStorage.saveCacheRecord(h,r.storeInCache,r.correlationId)}finally{this.persistencePlugin&&this.serializableCache&&f&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(f))}return ei.generateAuthenticationResult(this.cryptoObj,t,h,!1,r,l,d,e,c)}generateCacheRecord(e,t,n,r,i,o,s){const a=t.getPreferredCache();if(!a)throw Le(ge);const c=je(i);let u,l;var d,h,f,p,g;e.id_token&&i&&(d=this.homeAccountIdentifier,h=a,f=e.id_token,p=this.clientId,g=c||"",u={credentialType:S.ID_TOKEN,homeAccountId:d,environment:h,clientId:p,secret:f,realm:g},l=function(e,t,n,r,i,o,s,a,c,u,l){l?.verbose("setCachedAccount called");const d=e.getAccountKeys().find((e=>e.startsWith(n)));let h=null;d&&(h=e.getAccount(d,l));const f=h||$e.createAccount({homeAccountId:n,idTokenClaims:i,clientInfo:o,environment:s,cloudGraphHostName:c?.cloud_graph_host_name,msGraphHost:c?.msgraph_host,nativeAccountId:void 0},t,r),p=f.tenantProfiles||[],g=a||f.realm;if(g&&!p.find((e=>e.tenantId===g))){const e=He(n,f.localAccountId,g,i);p.push(e)}return f.tenantProfiles=p,f}(this.cacheStorage,t,this.homeAccountIdentifier,this.cryptoObj.base64Decode,i,e.client_info,a,c,s,0,this.logger));let m=null;if(e.access_token){const i=e.scope?Ft.fromString(e.scope):new Ft(r.scopes||[]),s=("string"==typeof e.expires_in?parseInt(e.expires_in,10):e.expires_in)||0,u=("string"==typeof e.ext_expires_in?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,l=("string"==typeof e.refresh_in?parseInt(e.refresh_in,10):e.refresh_in)||void 0,d=n+s,h=d+u,f=l&&l>0?n+l:void 0;m=function(e,t,n,r,i,o,s,a,c,u,l,d,h,f,p){const g={homeAccountId:e,credentialType:S.ACCESS_TOKEN,secret:n,cachedAt:Ge().toString(),expiresOn:s.toString(),extendedExpiresOn:a.toString(),environment:t,clientId:r,realm:i,target:o,tokenType:l||M.BEARER};if(d&&(g.userAssertionHash=d),u&&(g.refreshOn=u.toString()),f&&(g.requestedClaims=f,g.requestedClaimsHash=p),g.tokenType?.toLowerCase()!==M.BEARER.toLowerCase())switch(g.credentialType=S.ACCESS_TOKEN_WITH_AUTH_SCHEME,g.tokenType){case M.POP:const e=Ke(n,c);if(!e?.cnf?.kid)throw Le(Se);g.keyId=e.cnf.kid;break;case M.SSH:g.keyId=h}return g}(this.homeAccountIdentifier,a,e.access_token,this.clientId,c||t.tenant||"",i.printScopes(),d,h,this.cryptoObj.base64Decode,f,e.token_type,o,e.key_id,r.claims,r.requestedClaimsHash)}let v=null;if(e.refresh_token){let t;e.refresh_token_expires_in&&(t=n+("string"==typeof e.refresh_token_expires_in?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in)),v=function(e,t,n,r,i,o,s){const a={credentialType:S.REFRESH_TOKEN,homeAccountId:e,environment:t,clientId:r,secret:n};return o&&(a.userAssertionHash=o),i&&(a.familyId=i),s&&(a.expiresOn=s.toString()),a}(this.homeAccountIdentifier,a,e.refresh_token,this.clientId,e.foci,o,t)}let y=null;return e.foci&&(y={clientId:this.clientId,environment:a,familyId:e.foci}),{account:l,idToken:u,accessToken:m,refreshToken:v,appMetadata:y}}static async generateAuthenticationResult(e,t,n,r,i,o,s,a,c){let l,d,h=u.EMPTY_STRING,f=[],p=null,g=u.EMPTY_STRING;if(n.accessToken){if(n.accessToken.tokenType!==M.POP||i.popKid)h=n.accessToken.secret;else{const t=new Xr(e),{secret:r,keyId:o}=n.accessToken;if(!o)throw Le(be);h=await t.signPopToken(r,o,i)}f=Ft.fromString(n.accessToken.target).asArray(),p=new Date(1e3*Number(n.accessToken.expiresOn)),l=new Date(1e3*Number(n.accessToken.extendedExpiresOn)),n.accessToken.refreshOn&&(d=new Date(1e3*Number(n.accessToken.refreshOn)))}n.appMetadata&&(g=n.appMetadata.familyId===E?E:"");const m=o?.oid||o?.sub||"",v=o?.tid||"";a?.spa_accountid&&n.account&&(n.account.nativeAccountId=a?.spa_accountid);const y=n.account?ze(n.account.getAccountInfo(),void 0,o,n.idToken?.secret):null;return{authority:t.canonicalAuthority,uniqueId:m,tenantId:v,scopes:f,account:y,idToken:n?.idToken?.secret||"",idTokenClaims:o||{},accessToken:h,fromCache:r,expiresOn:p,extExpiresOn:l,refreshOn:d,correlationId:i.correlationId,requestId:c||u.EMPTY_STRING,familyId:g,tokenType:n.accessToken?.tokenType||u.EMPTY_STRING,state:s?s.userRequestState:u.EMPTY_STRING,cloudGraphHostName:n.account?.cloudGraphHostName||u.EMPTY_STRING,msGraphHost:n.account?.msGraphHost||u.EMPTY_STRING,code:a?.spa_code,fromNativeBroker:!1}}}async function ti(e,t,n){return"string"==typeof e?e:e({clientId:t,tokenEndpoint:n})}class ni extends Lr{constructor(e,t){super(e,t),this.includeRedirectUri=!0,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}async getAuthCodeUrl(e){this.performanceClient?.addQueueMeasurement(Yn,e.correlationId);const t=await gr(this.createAuthCodeUrlQueryString.bind(this),er,this.logger,this.performanceClient,e.correlationId)(e);return jt.appendQueryString(this.authority.authorizationEndpoint,t)}async acquireToken(e,t){if(this.performanceClient?.addQueueMeasurement(Jn,e.correlationId),!e.code)throw Le(se);const n=Ge(),r=await gr(this.executeTokenRequest.bind(this),Xn,this.logger,this.performanceClient,e.correlationId)(this.authority,e),i=r.headers?.[g],o=new ei(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return o.validateTokenResponse(r.body),gr(o.handleServerTokenResponse.bind(o),rr,this.logger,this.performanceClient,e.correlationId)(r.body,this.authority,n,e,t,void 0,void 0,void 0,i)}handleFragmentResponse(e,t){if(new ei(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,null,null).validateServerAuthorizationCodeResponse(e,t),!e.code)throw Le(Te);return e}getLogoutUri(e){if(!e)throw Lt(It);const t=this.createLogoutUrlQueryString(e);return jt.appendQueryString(this.authority.endSessionEndpoint,t)}async executeTokenRequest(e,t){this.performanceClient?.addQueueMeasurement(Xn,t.correlationId);const n=this.createTokenQueryParameters(t),r=jt.appendQueryString(e.tokenEndpoint,n),i=await gr(this.createTokenRequestBody.bind(this),Zn,this.logger,this.performanceClient,t.correlationId)(t);let o;if(t.clientInfo)try{const e=Ue(t.clientInfo,this.cryptoUtils.base64Decode);o={credential:`${e.uid}${w.CLIENT_INFO_SEPARATOR}${e.utid}`,type:Or}}catch(e){this.logger.verbose("Could not parse client info for CCS Header: "+e)}const s=this.createTokenRequestHeaders(o||t.ccsCredential),a={clientId:t.tokenBodyParameters?.clientId||this.config.authOptions.clientId,authority:e.canonicalAuthority,scopes:t.scopes,claims:t.claims,authenticationScheme:t.authenticationScheme,resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,sshKid:t.sshKid};return gr(this.executePostToTokenEndpoint.bind(this),zn,this.logger,this.performanceClient,t.correlationId)(r,i,s,a,t.correlationId,zn)}async createTokenRequestBody(e){this.performanceClient?.addQueueMeasurement(Zn,e.correlationId);const t=new Nr;if(t.addClientId(e.tokenBodyParameters?.[Pn]||this.config.authOptions.clientId),this.includeRedirectUri?t.addRedirectUri(e.redirectUri):xr.validateRedirectUri(e.redirectUri),t.addScopes(e.scopes,!0,this.oidcDefaultScopes),t.addAuthorizationCode(e.code),t.addLibraryInfo(this.config.libraryInfo),t.addApplicationTelemetry(this.config.telemetry.application),t.addThrottling(),this.serverTelemetryManager&&!kr(this.config)&&t.addServerTelemetry(this.serverTelemetryManager),e.codeVerifier&&t.addCodeVerifier(e.codeVerifier),this.config.clientCredentials.clientSecret&&t.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const n=this.config.clientCredentials.clientAssertion;t.addClientAssertion(await ti(n.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),t.addClientAssertionType(n.assertionType)}if(t.addGrantType("authorization_code"),t.addClientInfo(),e.authenticationScheme===M.POP){const n=new Xr(this.cryptoUtils,this.performanceClient);let r;r=e.popKid?this.cryptoUtils.encodeKid(e.popKid):(await gr(n.generateCnf.bind(n),tr,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,t.addPopToken(r)}else if(e.authenticationScheme===M.SSH){if(!e.sshJwk)throw Lt(_t);t.addSshJwk(e.sshJwk)}const n=e.correlationId||this.config.cryptoInterface.createNewGuid();let r;if(t.addCorrelationId(n),(!Ut.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&t.addClaims(e.claims,this.config.authOptions.clientCapabilities),e.clientInfo)try{const t=Ue(e.clientInfo,this.cryptoUtils.base64Decode);r={credential:`${t.uid}${w.CLIENT_INFO_SEPARATOR}${t.utid}`,type:Or}}catch(e){this.logger.verbose("Could not parse client info for CCS Header: "+e)}else r=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&r)switch(r.type){case Or:try{const e=Fe(r.credential);t.addCcsOid(e)}catch(e){this.logger.verbose("Could not parse home account ID for CCS Header: "+e)}break;case Mr:t.addCcsUpn(r.credential)}return e.tokenBodyParameters&&t.addExtraQueryParameters(e.tokenBodyParameters),!e.enableSpaAuthorizationCode||e.tokenBodyParameters&&e.tokenBodyParameters[Nn]||t.addExtraQueryParameters({[Nn]:"1"}),t.createQueryString()}async createAuthCodeUrlQueryString(e){this.performanceClient?.addQueueMeasurement(er,e.correlationId);const t=new Nr;t.addClientId(e.extraQueryParameters?.[Pn]||this.config.authOptions.clientId);const n=[...e.scopes||[],...e.extraScopesToConsent||[]];t.addScopes(n,!0,this.oidcDefaultScopes),t.addRedirectUri(e.redirectUri);const r=e.correlationId||this.config.cryptoInterface.createNewGuid();if(t.addCorrelationId(r),t.addResponseMode(e.responseMode),t.addResponseTypeCode(),t.addLibraryInfo(this.config.libraryInfo),kr(this.config)||t.addApplicationTelemetry(this.config.telemetry.application),t.addClientInfo(),e.codeChallenge&&e.codeChallengeMethod&&t.addCodeChallengeParams(e.codeChallenge,e.codeChallengeMethod),e.prompt&&t.addPrompt(e.prompt),e.domainHint&&t.addDomainHint(e.domainHint),e.prompt!==y.SELECT_ACCOUNT)if(e.sid&&e.prompt===y.NONE)this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),t.addSid(e.sid);else if(e.account){const n=this.extractAccountSid(e.account);let r=this.extractLoginHint(e.account);if(r&&e.domainHint&&(this.logger.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),r=null),r){this.logger.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),t.addLoginHint(r);try{const n=Fe(e.account.homeAccountId);t.addCcsOid(n)}catch(e){this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(n&&e.prompt===y.NONE){this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),t.addSid(n);try{const n=Fe(e.account.homeAccountId);t.addCcsOid(n)}catch(e){this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),t.addLoginHint(e.loginHint),t.addCcsUpn(e.loginHint);else if(e.account.username){this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),t.addLoginHint(e.account.username);try{const n=Fe(e.account.homeAccountId);t.addCcsOid(n)}catch(e){this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(this.logger.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),t.addLoginHint(e.loginHint),t.addCcsUpn(e.loginHint));else this.logger.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");if(e.nonce&&t.addNonce(e.nonce),e.state&&t.addState(e.state),(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&t.addClaims(e.claims,this.config.authOptions.clientCapabilities),e.extraQueryParameters&&t.addExtraQueryParameters(e.extraQueryParameters),e.nativeBroker&&(t.addNativeBroker(),e.authenticationScheme===M.POP)){const n=new Xr(this.cryptoUtils);let r;r=e.popKid?this.cryptoUtils.encodeKid(e.popKid):(await gr(n.generateCnf.bind(n),tr,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,t.addPopToken(r)}return t.createQueryString()}createLogoutUrlQueryString(e){const t=new Nr;return e.postLogoutRedirectUri&&t.addPostLogoutRedirectUri(e.postLogoutRedirectUri),e.correlationId&&t.addCorrelationId(e.correlationId),e.idTokenHint&&t.addIdTokenHint(e.idTokenHint),e.state&&t.addState(e.state),e.logoutHint&&t.addLogoutHint(e.logoutHint),e.extraQueryParameters&&t.addExtraQueryParameters(e.extraQueryParameters),t.createQueryString()}extractAccountSid(e){return e.idTokenClaims?.sid||null}extractLoginHint(e){return e.idTokenClaims?.login_hint||null}}class ri extends Lr{constructor(e,t){super(e,t)}async acquireToken(e){this.performanceClient?.addQueueMeasurement(Bn,e.correlationId);const t=Ge(),n=await gr(this.executeTokenRequest.bind(this),jn,this.logger,this.performanceClient,e.correlationId)(e,this.authority),r=n.headers?.[g],i=new ei(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return i.validateTokenResponse(n.body),gr(i.handleServerTokenResponse.bind(i),rr,this.logger,this.performanceClient,e.correlationId)(n.body,this.authority,t,e,void 0,void 0,!0,e.forceCache,r)}async acquireTokenByRefreshToken(e){if(!e)throw Lt(Ct);if(this.performanceClient?.addQueueMeasurement(Kn,e.correlationId),!e.account)throw Le(fe);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return await gr(this.acquireTokenWithCachedRefreshToken.bind(this),$n,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(t){const n=t instanceof Wr&&t.errorCode===Ur,r=t instanceof Ln&&"invalid_grant"===t.errorCode&&"client_mismatch"===t.subError;if(n||r)return gr(this.acquireTokenWithCachedRefreshToken.bind(this),$n,this.logger,this.performanceClient,e.correlationId)(e,!1);throw t}return gr(this.acquireTokenWithCachedRefreshToken.bind(this),$n,this.logger,this.performanceClient,e.correlationId)(e,!1)}async acquireTokenWithCachedRefreshToken(e,t){this.performanceClient?.addQueueMeasurement($n,e.correlationId);const n=(r=this.cacheManager.getRefreshToken.bind(this.cacheManager),i=pr,o=this.logger,s=this.performanceClient,a=e.correlationId,(...e)=>{o.trace(`Executing function ${i}`);const t=s?.startMeasurement(i,a);if(a){const e=i+"CallCount";s?.incrementFields({[e]:1},a)}try{const n=r(...e);return t?.end({success:!0}),o.trace(`Returning result from ${i}`),n}catch(e){o.trace(`Error occurred in ${i}`);try{o.trace(JSON.stringify(e))}catch(e){o.trace("Unable to print error message.")}throw t?.end({success:!1},e),e}})(e.account,t,void 0,this.performanceClient,e.correlationId);var r,i,o,s,a;if(!n)throw Qr(Ur);if(n.expiresOn&&We(n.expiresOn,e.refreshTokenExpirationOffsetSeconds||300))throw Qr(qr);const c={...e,refreshToken:n.secret,authenticationScheme:e.authenticationScheme||M.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:Or}};try{return await gr(this.acquireToken.bind(this),Bn,this.logger,this.performanceClient,e.correlationId)(c)}catch(e){if(e instanceof Wr&&e.subError===Br){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");const e=Qe(n);this.cacheManager.removeRefreshToken(e)}throw e}}async executeTokenRequest(e,t){this.performanceClient?.addQueueMeasurement(jn,e.correlationId);const n=this.createTokenQueryParameters(e),r=jt.appendQueryString(t.tokenEndpoint,n),i=await gr(this.createTokenRequestBody.bind(this),Vn,this.logger,this.performanceClient,e.correlationId)(e),o=this.createTokenRequestHeaders(e.ccsCredential),s={clientId:e.tokenBodyParameters?.clientId||this.config.authOptions.clientId,authority:t.canonicalAuthority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};return gr(this.executePostToTokenEndpoint.bind(this),Hn,this.logger,this.performanceClient,e.correlationId)(r,i,o,s,e.correlationId,Hn)}async createTokenRequestBody(e){this.performanceClient?.addQueueMeasurement(Vn,e.correlationId);const t=e.correlationId,n=new Nr;if(n.addClientId(e.tokenBodyParameters?.[Pn]||this.config.authOptions.clientId),e.redirectUri&&n.addRedirectUri(e.redirectUri),n.addScopes(e.scopes,!0,this.config.authOptions.authority.options.OIDCOptions?.defaultScopes),n.addGrantType("refresh_token"),n.addClientInfo(),n.addLibraryInfo(this.config.libraryInfo),n.addApplicationTelemetry(this.config.telemetry.application),n.addThrottling(),this.serverTelemetryManager&&!kr(this.config)&&n.addServerTelemetry(this.serverTelemetryManager),n.addCorrelationId(t),n.addRefreshToken(e.refreshToken),this.config.clientCredentials.clientSecret&&n.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const t=this.config.clientCredentials.clientAssertion;n.addClientAssertion(await ti(t.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),n.addClientAssertionType(t.assertionType)}if(e.authenticationScheme===M.POP){const t=new Xr(this.cryptoUtils,this.performanceClient);let r;r=e.popKid?this.cryptoUtils.encodeKid(e.popKid):(await gr(t.generateCnf.bind(t),tr,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,n.addPopToken(r)}else if(e.authenticationScheme===M.SSH){if(!e.sshJwk)throw Lt(_t);n.addSshJwk(e.sshJwk)}if((!Ut.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&n.addClaims(e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case Or:try{const t=Fe(e.ccsCredential.credential);n.addCcsOid(t)}catch(e){this.logger.verbose("Could not parse home account ID for CCS Header: "+e)}break;case Mr:n.addCcsUpn(e.ccsCredential.credential)}return e.tokenBodyParameters&&n.addExtraQueryParameters(e.tokenBodyParameters),n.createQueryString()}}class ii extends Lr{constructor(e,t){super(e,t)}async acquireToken(e){try{const[t,n]=await this.acquireCachedToken({...e,scopes:e.scopes?.length?e.scopes:[...l]});return n===U&&(this.logger.info("SilentFlowClient:acquireCachedToken - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),new ri(this.config,this.performanceClient).acquireTokenByRefreshToken(e).catch((()=>{}))),t}catch(t){if(t instanceof De&&t.errorCode===Ae)return new ri(this.config,this.performanceClient).acquireTokenByRefreshToken(e);throw t}}async acquireCachedToken(e){this.performanceClient?.addQueueMeasurement(Gn,e.correlationId);let t=N;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!Ut.isEmptyObj(e.claims))throw this.setCacheOutcome("1",e.correlationId),Le(Ae);if(!e.account)throw Le(fe);const n=e.account.tenantId||function(e){const t=new jt(e).getUrlComponents(),n=t.PathSegments.slice(-1)[0]?.toLowerCase();switch(n){case m.COMMON:case m.ORGANIZATIONS:case m.CONSUMERS:return;default:return n}}(e.authority),r=this.cacheManager.getTokenKeys(),i=this.cacheManager.getAccessToken(e.account,e,r,n,this.performanceClient,e.correlationId);if(!i)throw this.setCacheOutcome(D,e.correlationId),Le(Ae);if(o=i.cachedAt,Number(o)>Ge()||We(i.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(L,e.correlationId),Le(Ae);var o;i.refreshOn&&We(i.refreshOn,0)&&(t=U);const s=e.authority||this.authority.getPreferredCache(),a={account:this.cacheManager.readAccountFromCache(e.account),accessToken:i,idToken:this.cacheManager.getIdToken(e.account,r,n,this.performanceClient,e.correlationId),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(s)};return this.setCacheOutcome(t,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await gr(this.generateResultFromCacheRecord.bind(this),Wn,this.logger,this.performanceClient,e.correlationId)(a,e),t]}setCacheOutcome(e,t){this.serverTelemetryManager?.setCacheOutcome(e),this.performanceClient?.addFields({cacheOutcome:e},t),e!==N&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}async generateResultFromCacheRecord(e,t){let n;if(this.performanceClient?.addQueueMeasurement(Wn,t.correlationId),e.idToken&&(n=Ke(e.idToken.secret,this.config.cryptoInterface.base64Decode)),t.maxAge||0===t.maxAge){const e=n?.auth_time;if(!e)throw Le(te);Ve(e,t.maxAge)}return ei.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,t,n)}}class oi{static getNetworkResponse(e,t,n){return{headers:e,body:t,status:n}}static urlToHttpOptions(e){const t={protocol:e.protocol,hostname:e.hostname&&e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,hash:e.hash,search:e.search,pathname:e.pathname,path:`${e.pathname||""}${e.search||""}`,href:e.href};return""!==e.port&&(t.port=Number(e.port)),(e.username||e.password)&&(t.auth=`${decodeURIComponent(e.username)}:${decodeURIComponent(e.password)}`),t}}var si=n(8611),ai=n(5692);class ci{constructor(e,t){this.proxyUrl=e||"",this.customAgentOptions=t||{}}async sendGetRequestAsync(e,t,n){return this.proxyUrl?ui(e,this.proxyUrl,vn,t,this.customAgentOptions,n):li(e,vn,t,this.customAgentOptions,n)}async sendPostRequestAsync(e,t){return this.proxyUrl?ui(e,this.proxyUrl,yn,t,this.customAgentOptions):li(e,yn,t,this.customAgentOptions)}}const ui=(e,t,n,r,i,o)=>{const s=new URL(e),a=new URL(t),c=r?.headers||{},u={host:a.hostname,port:a.port,method:"CONNECT",path:s.hostname,headers:c};i&&Object.keys(i).length&&(u.agent=new si.Agent(i));let l="";if(n===yn){const e=r?.body||"";l=`Content-Type: application/x-www-form-urlencoded\r\nContent-Length: ${e.length}\r\n\r\n${e}`}else o&&(u.timeout=o);const d=`${n.toUpperCase()} ${s.href} HTTP/1.1\r\nHost: ${s.host}\r\nConnection: close\r\n`+l+"\r\n";return new Promise(((e,t)=>{const n=si.request(u);o&&n.on("timeout",(()=>{n.destroy(),t(new Error("Request time out"))})),n.end(),n.on("connect",((r,i)=>{const o=r?.statusCode||An;(o<Cn||o>In)&&(n.destroy(),i.destroy(),t(new Error(`Error connecting to proxy. Http status code: ${r.statusCode}. Http status message: ${r?.statusMessage||"Unknown"}`))),i.write(d);const s=[];i.on("data",(e=>{s.push(e)})),i.on("end",(()=>{const t=Buffer.concat([...s]).toString().split("\r\n"),r=parseInt(t[0].split(" ")[1]),i=t[0].split(" ").slice(2).join(" "),o=t[t.length-1],a=t.slice(1,t.length-2),c=new Map;a.forEach((e=>{const t=e.split(new RegExp(/:\s(.*)/s)),n=t[0];let r=t[1];try{const e=JSON.parse(r);e&&"object"==typeof e&&(r=e)}catch(e){}c.set(n,r)}));const u=Object.fromEntries(c),l=oi.getNetworkResponse(u,di(r,i,u,o),r);(r<200||r>299)&&l.body.error!==En&&n.destroy(),e(l)})),i.on("error",(e=>{n.destroy(),i.destroy(),t(new Error(e.toString()))}))})),n.on("error",(e=>{n.destroy(),t(new Error(e.toString()))}))}))},li=(e,t,n,r,i)=>{const o=t===yn,s=n?.body||"",a=new URL(e),c={method:t,headers:n?.headers||{},...oi.urlToHttpOptions(a)};return r&&Object.keys(r).length&&(c.agent=new ai.Agent(r)),o?c.headers={...c.headers,"Content-Length":s.length}:i&&(c.timeout=i),new Promise(((e,t)=>{let n;n="http:"===c.protocol?si.request(c):ai.request(c),o&&n.write(s),i&&n.on("timeout",(()=>{n.destroy(),t(new Error("Request time out"))})),n.end(),n.on("response",(t=>{const r=t.headers,i=t.statusCode,o=t.statusMessage,s=[];t.on("data",(e=>{s.push(e)})),t.on("end",(()=>{const t=Buffer.concat([...s]).toString(),a=r,c=oi.getNetworkResponse(a,di(i,o,a,t),i);(i<200||i>299)&&c.body.error!==En&&n.destroy(),e(c)}))})),n.on("error",(e=>{n.destroy(),t(new Error(e.toString()))}))}))},di=(e,t,n,r)=>{let i;try{i=JSON.parse(r)}catch(r){let o,s;e>=400&&e<=499?(o="client_error",s="A client"):e>=500&&e<=599?(o="server_error",s="A server"):(o="unknown_error",s="An unknown"),i={error:o,error_description:`${s} error occured.\nHttp status code: ${e}\nHttp status message: ${t||"Unknown"}\nHeaders: ${JSON.stringify(n)}`}}return i},hi="invalid_file_extension",fi="invalid_file_path",pi="invalid_managed_identity_id_type",gi="invalid_secret",mi="platform_not_supported",vi="unable_to_create_azure_arc",yi="unable_to_create_cloud_shell",Ci="unable_to_create_source",Ii="unable_to_read_secret_file",Ai="www_authenticate_header_missing",wi="www_authenticate_header_unsupported_format",Si={[sn]:"azure_pod_identity_authority_host_url_malformed",[an]:"identity_endpoint_url_malformed",[ln]:"imds_endpoint_url_malformed",[dn]:"msi_endpoint_url_malformed"},Ti={[hi]:"The file path in the WWW-Authenticate header does not contain a .key file.",[fi]:"The file path in the WWW-Authenticate header is not in a valid Windows or Linux Format.",[pi]:"More than one ManagedIdentityIdType was provided.",[gi]:"The secret in the file on the file path in the WWW-Authenticate header is greater than 4096 bytes.",[mi]:"The platform is not supported by Azure Arc. Azure Arc only supports Windows and Linux.",missing_client_id:"A ManagedIdentityId id was not provided.",[Si.AZURE_POD_IDENTITY_AUTHORITY_HOST]:`The Managed Identity's '${sn}' environment variable is malformed.`,[Si.IDENTITY_ENDPOINT]:`The Managed Identity's '${an}' environment variable is malformed.`,[Si.IMDS_ENDPOINT]:`The Managed Identity's '${ln}' environment variable is malformed.`,[Si.MSI_ENDPOINT]:`The Managed Identity's '${dn}' environment variable is malformed.`,network_unavailable:"Authentication unavailable. The request to the managed identity endpoint timed out.",[vi]:"Azure Arc Managed Identities can only be system assigned.",[yi]:"Cloud Shell Managed Identities can only be system assigned.",[Ci]:"Unable to create a Managed Identity source based on environment variables.",[Ii]:"Unable to read the secret file.",user_assigned_not_available_at_runtime:"Service Fabric user assigned managed identity ClientId or ResourceId is not configurable at runtime.",[Ai]:"A 401 response was received form the Azure Arc Managed Identity, but the www-authenticate header is missing.",[wi]:"A 401 response was received form the Azure Arc Managed Identity, but the www-authenticate header is in an unsupported format."};class Ei extends j{constructor(e){super(e,Ti[e]),this.name="ManagedIdentityError",Object.setPrototypeOf(this,Ei.prototype)}}function _i(e){return new Ei(e)}class bi{get id(){return this._id}set id(e){this._id=e}get idType(){return this._idType}set idType(e){this._idType=e}constructor(e){const t=e?.userAssignedClientId,n=e?.userAssignedResourceId,r=e?.userAssignedObjectId;if(t){if(n||r)throw _i(pi);this.id=t,this.idType=pn}else if(n){if(t||r)throw _i(pi);this.id=n,this.idType=gn}else if(r){if(t||n)throw _i(pi);this.id=r,this.idType=mn}else this.id="system_assigned_managed_identity",this.idType=fn}}class ki{constructor(e,t,n){this.maxRetries=e,this.retryDelay=t,this.httpStatusCodesToRetryOn=n}retryAfterMillisecondsToSleep(e){if(!e)return 0;let t=Math.round(1e3*parseFloat(e));return isNaN(t)&&(t=Math.max(0,new Date(e).valueOf()-(new Date).valueOf())),t}async pauseForRetry(e,t,n){if(this.httpStatusCodesToRetryOn.includes(e)&&t<this.maxRetries){const e=this.retryAfterMillisecondsToSleep(n);return await new Promise((t=>setTimeout(t,e||this.retryDelay))),!0}return!1}}class Ri{constructor(e,t){this.httpClientNoRetries=e,this.retryPolicy=t}async sendNetworkRequestAsyncHelper(e,t,n){return e===vn?this.httpClientNoRetries.sendGetRequestAsync(t,n):this.httpClientNoRetries.sendPostRequestAsync(t,n)}async sendNetworkRequestAsync(e,t,n){let r=await this.sendNetworkRequestAsyncHelper(e,t,n),i=0;for(;await this.retryPolicy.pauseForRetry(r.status,i,r.headers[f]);)r=await this.sendNetworkRequestAsyncHelper(e,t,n),i++;return r}async sendGetRequestAsync(e,t){return this.sendNetworkRequestAsync(vn,e,t)}async sendPostRequestAsync(e,t){return this.sendNetworkRequestAsync(yn,e,t)}}const Pi="invalid_loopback_server_address_type",Oi="Loopback server address is not type string. This is unexpected.",Mi="unable_to_load_redirectUrl",xi="Loopback server callback was invoked without a url. This is unexpected.",Ni="no_auth_code_in_response",Di="No auth code found in the server response. Please check your network trace to determine what happened.",Li="no_loopback_server_exists",Ui="No loopback server exists yet.",Fi="loopback_server_already_exists",qi="Loopback server already exists. Cannot create another.",Hi="loopback_server_timeout",zi="Timed out waiting for auth code listener to be registered.",ji="state_not_found",Bi="State not found. Please verify that the request originated from msal.",$i="thumbprint_missing_from_client_certificate",Ki="Client certificate does not contain a SHA-1 or SHA-256 thumbprint.";class Vi extends j{constructor(e,t){super(e,t),this.name="NodeAuthError"}static createInvalidLoopbackAddressTypeError(){return new Vi(Pi,`${Oi}`)}static createUnableToLoadRedirectUrlError(){return new Vi(Mi,`${xi}`)}static createNoAuthCodeInResponseError(){return new Vi(Ni,`${Di}`)}static createNoLoopbackServerExistsError(){return new Vi(Li,`${Ui}`)}static createLoopbackServerAlreadyExistsError(){return new Vi(Fi,`${qi}`)}static createLoopbackServerTimeoutError(){return new Vi(Hi,`${zi}`)}static createStateNotFoundError(){return new Vi(ji,Bi)}static createThumbprintMissingError(){return new Vi($i,Ki)}}const Gi={clientId:u.EMPTY_STRING,authority:u.DEFAULT_AUTHORITY,clientSecret:u.EMPTY_STRING,clientAssertion:u.EMPTY_STRING,clientCertificate:{thumbprint:u.EMPTY_STRING,thumbprintSha256:u.EMPTY_STRING,privateKey:u.EMPTY_STRING,x5c:u.EMPTY_STRING},knownAuthorities:[],cloudDiscoveryMetadata:u.EMPTY_STRING,authorityMetadata:u.EMPTY_STRING,clientCapabilities:[],protocolMode:Be.AAD,azureCloudOptions:{azureCloudInstance:qn.None,tenant:u.EMPTY_STRING},skipAuthorityMetadataCache:!1},Wi={claimsBasedCachingEnabled:!1},Yi={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:Un.Info},Qi={loggerOptions:Yi,networkClient:new ci,proxyUrl:u.EMPTY_STRING,customAgentOptions:{},disableInternalRetries:!1},Ji={application:{appName:u.EMPTY_STRING,appVersion:u.EMPTY_STRING}};function Xi({auth:e,broker:t,cache:n,system:r,telemetry:i}){const o={...Qi,networkClient:new ci(r?.proxyUrl,r?.customAgentOptions),loggerOptions:r?.loggerOptions||Yi,disableInternalRetries:r?.disableInternalRetries||!1};if(e.clientCertificate&&!e.clientCertificate.thumbprint&&!e.clientCertificate.thumbprintSha256)throw Vi.createStateNotFoundError();return{auth:{...Gi,...e},broker:{...t},cache:{...Wi,...n},system:{...o,...r},telemetry:{...Ji,...i}}}var Zi=n(2107);class eo{generateGuid(){return(0,Zi.v4)()}isGuid(e){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}}class to{static base64Encode(e,t){return Buffer.from(e,t).toString("base64")}static base64EncodeUrl(e,t){return to.base64Encode(e,t).replace(/=/g,u.EMPTY_STRING).replace(/\+/g,"-").replace(/\//g,"_")}static base64Decode(e){return Buffer.from(e,"base64").toString("utf8")}static base64DecodeUrl(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");for(;t.length%4;)t+="=";return to.base64Decode(t)}}var no=n(6982);class ro{sha256(e){return no.createHash("sha256").update(e).digest()}}class io{constructor(){this.hashUtils=new ro}async generatePkceCodes(){const e=this.generateCodeVerifier();return{verifier:e,challenge:this.generateCodeChallengeFromVerifier(e)}}generateCodeVerifier(){const e=[];for(;e.length<=32;){const t=no.randomBytes(1)[0];if(t>=198)continue;const n=t%66;e.push(wn[n])}const t=e.join(u.EMPTY_STRING);return to.base64EncodeUrl(t)}generateCodeChallengeFromVerifier(e){return to.base64EncodeUrl(this.hashUtils.sha256(e).toString("base64"),"base64")}}class oo{constructor(){this.pkceGenerator=new io,this.guidGenerator=new eo,this.hashUtils=new ro}base64UrlEncode(){throw new Error("Method not implemented.")}encodeKid(){throw new Error("Method not implemented.")}createNewGuid(){return this.guidGenerator.generateGuid()}base64Encode(e){return to.base64Encode(e)}base64Decode(e){return to.base64Decode(e)}generatePkceCodes(){return this.pkceGenerator.generatePkceCodes()}getPublicKeyThumbprint(){throw new Error("Method not implemented.")}removeTokenBindingKey(){throw new Error("Method not implemented.")}clearKeystore(){throw new Error("Method not implemented.")}signJwt(){throw new Error("Method not implemented.")}async hashString(e){return to.base64EncodeUrl(this.hashUtils.sha256(e).toString("base64"),"base64")}}class so extends Xt{constructor(e,t,n,r){super(t,n,e,r),this.cache={},this.changeEmitters=[],this.logger=e}registerChangeEmitter(e){this.changeEmitters.push(e)}emitChange(){this.changeEmitters.forEach((e=>e.call(null)))}cacheToInMemoryCache(e){const t={accounts:{},idTokens:{},accessTokens:{},refreshTokens:{},appMetadata:{}};for(const n in e){const r=e[n];if("object"==typeof r)if(r instanceof $e)t.accounts[n]=r;else if(Ze(r))t.idTokens[n]=r;else if(Xe(r))t.accessTokens[n]=r;else if(et(r))t.refreshTokens[n]=r;else{if(!st(n,r))continue;t.appMetadata[n]=r}}return t}inMemoryCacheToCache(e){let t=this.getCache();return t={...t,...e.accounts,...e.idTokens,...e.accessTokens,...e.refreshTokens,...e.appMetadata},t}getInMemoryCache(){return this.logger.trace("Getting in-memory cache"),this.cacheToInMemoryCache(this.getCache())}setInMemoryCache(e){this.logger.trace("Setting in-memory cache");const t=this.inMemoryCacheToCache(e);this.setCache(t),this.emitChange()}getCache(){return this.logger.trace("Getting cache key-value store"),this.cache}setCache(e){this.logger.trace("Setting cache key value store"),this.cache=e,this.emitChange()}getItem(e){return this.logger.tracePii(`Item key: ${e}`),this.getCache()[e]}setItem(e,t){this.logger.tracePii(`Item key: ${e}`);const n=this.getCache();n[e]=t,this.setCache(n)}getAccountKeys(){const e=this.getInMemoryCache();return Object.keys(e.accounts)}getTokenKeys(){const e=this.getInMemoryCache();return{idToken:Object.keys(e.idTokens),accessToken:Object.keys(e.accessTokens),refreshToken:Object.keys(e.refreshTokens)}}getAccount(e){const t=this.getCachedAccountEntity(e);return t&&$e.isAccountEntity(t)?this.updateOutdatedCachedAccount(e,t):null}getCachedAccountEntity(e){return this.getItem(e)?Object.assign(new $e,this.getItem(e)):null}setAccount(e){const t=e.generateAccountKey();this.setItem(t,e)}getIdTokenCredential(e){const t=this.getItem(e);return Ze(t)?t:null}setIdTokenCredential(e){const t=Qe(e);this.setItem(t,e)}getAccessTokenCredential(e){const t=this.getItem(e);return Xe(t)?t:null}setAccessTokenCredential(e){const t=Qe(e);this.setItem(t,e)}getRefreshTokenCredential(e){const t=this.getItem(e);return et(t)?t:null}setRefreshTokenCredential(e){const t=Qe(e);this.setItem(t,e)}getAppMetadata(e){const t=this.getItem(e);return st(e,t)?t:null}setAppMetadata(e){const t=function({environment:e,clientId:t}){return[T,e,t].join(w.CACHE_KEY_SEPARATOR).toLowerCase()}(e);this.setItem(t,e)}getServerTelemetry(e){const t=this.getItem(e);return t&&function(e,t){const n=0===e.indexOf(O.CACHE_KEY);let r=!0;return t&&(r=t.hasOwnProperty("failedRequests")&&t.hasOwnProperty("errors")&&t.hasOwnProperty("cacheHits")),n&&r}(e,t)?t:null}setServerTelemetry(e,t){this.setItem(e,t)}getAuthorityMetadata(e){const t=this.getItem(e);return t&&function(e,t){return!!t&&0===e.indexOf(_)&&t.hasOwnProperty("aliases")&&t.hasOwnProperty("preferred_cache")&&t.hasOwnProperty("preferred_network")&&t.hasOwnProperty("canonical_authority")&&t.hasOwnProperty("authorization_endpoint")&&t.hasOwnProperty("token_endpoint")&&t.hasOwnProperty("issuer")&&t.hasOwnProperty("aliasesFromNetwork")&&t.hasOwnProperty("endpointsFromNetwork")&&t.hasOwnProperty("expiresAt")&&t.hasOwnProperty("jwks_uri")}(e,t)?t:null}getAuthorityMetadataKeys(){return this.getKeys().filter((e=>this.isAuthorityMetadata(e)))}setAuthorityMetadata(e,t){this.setItem(e,t)}getThrottlingCache(e){const t=this.getItem(e);return t&&function(e,t){let n=!1;e&&(n=0===e.indexOf(x));let r=!0;return t&&(r=t.hasOwnProperty("throttleTime")),n&&r}(e,t)?t:null}setThrottlingCache(e,t){this.setItem(e,t)}removeItem(e){this.logger.tracePii(`Item key: ${e}`);let t=!1;const n=this.getCache();return n[e]&&(delete n[e],t=!0),t&&(this.setCache(n),this.emitChange()),t}removeOutdatedAccount(e){this.removeItem(e)}containsKey(e){return this.getKeys().includes(e)}getKeys(){this.logger.trace("Retrieving all cache keys");const e=this.getCache();return[...Object.keys(e)]}async clear(){this.logger.trace("Clearing cache entries created by MSAL"),this.getKeys().forEach((e=>{this.removeItem(e)})),this.emitChange()}static generateInMemoryCache(e){return en.deserializeAllCache(en.deserializeJSONBlob(e))}static generateJsonCache(e){return c.serializeAllCache(e)}updateCredentialCacheKey(e,t){const n=Qe(t);if(e!==n){const r=this.getItem(e);if(r)return this.removeItem(e),this.setItem(n,r),this.logger.verbose(`Updated an outdated ${t.credentialType} cache key`),n;this.logger.error(`Attempted to update an outdated ${t.credentialType} cache key but no item matching the outdated key was found in storage`)}return e}}const ao={},co={},uo={},lo={},ho={};class fo{constructor(e,t,n){this.cacheHasChanged=!1,this.storage=e,this.storage.registerChangeEmitter(this.handleChangeEvent.bind(this)),n&&(this.persistence=n),this.logger=t}hasChanged(){return this.cacheHasChanged}serialize(){this.logger.trace("Serializing in-memory cache");let e=c.serializeAllCache(this.storage.getInMemoryCache());return this.cacheSnapshot?(this.logger.trace("Reading cache snapshot from disk"),e=this.mergeState(JSON.parse(this.cacheSnapshot),e)):this.logger.trace("No cache snapshot to merge"),this.cacheHasChanged=!1,JSON.stringify(e)}deserialize(e){if(this.logger.trace("Deserializing JSON to in-memory cache"),this.cacheSnapshot=e,this.cacheSnapshot){this.logger.trace("Reading cache snapshot from disk");const e=en.deserializeAllCache(this.overlayDefaults(JSON.parse(this.cacheSnapshot)));this.storage.setInMemoryCache(e)}else this.logger.trace("No cache snapshot to deserialize")}getKVStore(){return this.storage.getCache()}async getAllAccounts(){let e;this.logger.trace("getAllAccounts called");try{return this.persistence&&(e=new Zr(this,!0),await this.persistence.beforeCacheAccess(e)),this.storage.getAllAccounts()}finally{this.persistence&&e&&await this.persistence.afterCacheAccess(e)}}async getAccountByHomeId(e){const t=await this.getAllAccounts();return e&&t&&t.length&&t.filter((t=>t.homeAccountId===e))[0]||null}async getAccountByLocalId(e){const t=await this.getAllAccounts();return e&&t&&t.length&&t.filter((t=>t.localAccountId===e))[0]||null}async removeAccount(e){let t;this.logger.trace("removeAccount called");try{this.persistence&&(t=new Zr(this,!0),await this.persistence.beforeCacheAccess(t)),await this.storage.removeAccount($e.generateAccountCacheKey(e))}finally{this.persistence&&t&&await this.persistence.afterCacheAccess(t)}}handleChangeEvent(){this.cacheHasChanged=!0}mergeState(e,t){this.logger.trace("Merging in-memory cache with cache snapshot");const n=this.mergeRemovals(e,t);return this.mergeUpdates(n,t)}mergeUpdates(e,t){return Object.keys(t).forEach((n=>{const r=t[n];if(e.hasOwnProperty(n)){const t=null!==r,i="object"==typeof r,o=!Array.isArray(r),s=void 0!==e[n]&&null!==e[n];t&&i&&o&&s?this.mergeUpdates(e[n],r):e[n]=r}else null!==r&&(e[n]=r)})),e}mergeRemovals(e,t){this.logger.trace("Remove updated entries in cache");const n=e.Account?this.mergeRemovalsDict(e.Account,t.Account):e.Account,r=e.AccessToken?this.mergeRemovalsDict(e.AccessToken,t.AccessToken):e.AccessToken,i=e.RefreshToken?this.mergeRemovalsDict(e.RefreshToken,t.RefreshToken):e.RefreshToken,o=e.IdToken?this.mergeRemovalsDict(e.IdToken,t.IdToken):e.IdToken,s=e.AppMetadata?this.mergeRemovalsDict(e.AppMetadata,t.AppMetadata):e.AppMetadata;return{...e,Account:n,AccessToken:r,RefreshToken:i,IdToken:o,AppMetadata:s}}mergeRemovalsDict(e,t){const n={...e};return Object.keys(e).forEach((e=>{t&&t.hasOwnProperty(e)||delete n[e]})),n}overlayDefaults(e){return this.logger.trace("Overlaying input cache with the default cache"),{Account:{...ao,...e.Account},IdToken:{...co,...e.IdToken},AccessToken:{...uo,...e.AccessToken},RefreshToken:{...lo,...e.RefreshToken},AppMetadata:{...ho,...e.AppMetadata}}}}var po=n(4040);class go{static fromAssertion(e){const t=new go;return t.jwt=e,t}static fromCertificate(e,t,n){const r=new go;return r.privateKey=t,r.thumbprint=e,r.useSha256=!1,n&&(r.publicCertificate=this.parseCertificate(n)),r}static fromCertificateWithSha256Thumbprint(e,t,n){const r=new go;return r.privateKey=t,r.thumbprint=e,r.useSha256=!0,n&&(r.publicCertificate=this.parseCertificate(n)),r}getJwt(e,t,n){if(this.privateKey&&this.thumbprint)return this.jwt&&!this.isExpired()&&t===this.issuer&&n===this.jwtAudience?this.jwt:this.createJwt(e,t,n);if(this.jwt)return this.jwt;throw Le(Ce)}createJwt(e,t,n){this.issuer=t,this.jwtAudience=n;const r=Ge();this.expirationTime=r+600;const i={alg:this.useSha256?"PS256":"RS256"},o=this.useSha256?"x5t#S256":"x5t";Object.assign(i,{[o]:to.base64EncodeUrl(this.thumbprint,"hex")}),this.publicCertificate&&Object.assign(i,{x5c:this.publicCertificate});const s={aud:this.jwtAudience,exp:this.expirationTime,iss:this.issuer,sub:this.issuer,nbf:r,jti:e.createNewGuid()};return this.jwt=po.sign(s,this.privateKey,{header:i}),this.jwt}isExpired(){return this.expirationTime<Ge()}static parseCertificate(e){const t=/-----BEGIN CERTIFICATE-----\r*\n(.+?)\r*\n-----END CERTIFICATE-----/gs,n=[];let r;for(;null!==(r=t.exec(e));)n.push(r[1].replace(/\r*\n/g,u.EMPTY_STRING));return n}}const mo="@azure/msal-node",vo="2.13.1";class yo extends Lr{constructor(e){super(e)}async acquireToken(e){this.logger.info("in acquireToken call in username-password client");const t=Ge(),n=await this.executeTokenRequest(this.authority,e),r=new ei(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return r.validateTokenResponse(n.body),r.handleServerTokenResponse(n.body,this.authority,t,e)}async executeTokenRequest(e,t){const n=this.createTokenQueryParameters(t),r=jt.appendQueryString(e.tokenEndpoint,n),i=await this.createTokenRequestBody(t),o=this.createTokenRequestHeaders({credential:t.username,type:Mr}),s={clientId:this.config.authOptions.clientId,authority:e.canonicalAuthority,scopes:t.scopes,claims:t.claims,authenticationScheme:t.authenticationScheme,resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,sshKid:t.sshKid};return this.executePostToTokenEndpoint(r,i,o,s,t.correlationId)}async createTokenRequestBody(e){const t=new Nr;t.addClientId(this.config.authOptions.clientId),t.addUsername(e.username),t.addPassword(e.password),t.addScopes(e.scopes),t.addResponseTypeForTokenAndIdToken(),t.addGrantType("password"),t.addClientInfo(),t.addLibraryInfo(this.config.libraryInfo),t.addApplicationTelemetry(this.config.telemetry.application),t.addThrottling(),this.serverTelemetryManager&&t.addServerTelemetry(this.serverTelemetryManager);const n=e.correlationId||this.config.cryptoInterface.createNewGuid();t.addCorrelationId(n),this.config.clientCredentials.clientSecret&&t.addClientSecret(this.config.clientCredentials.clientSecret);const r=this.config.clientCredentials.clientAssertion;return r&&(t.addClientAssertion(await ti(r.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),t.addClientAssertionType(r.assertionType)),(!Ut.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&t.addClaims(e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.username&&t.addCcsUpn(e.username),t.createQueryString()}}class Co{constructor(e){this.config=Xi(e),this.cryptoProvider=new oo,this.logger=new Fn(this.config.system.loggerOptions,mo,vo),this.storage=new so(this.logger,this.config.auth.clientId,this.cryptoProvider,function(e){const t=e.cloudDiscoveryMetadata;let n;if(t)try{n=JSON.parse(t)}catch(e){throw Lt(St)}return{canonicalAuthority:e.authority?yr(e.authority):void 0,knownAuthorities:e.knownAuthorities,cloudDiscoveryMetadata:n}}(this.config.auth)),this.tokenCache=new fo(this.storage,this.logger,this.config.cache.cachePlugin)}async getAuthCodeUrl(e){this.logger.info("getAuthCodeUrl called",e.correlationId);const t={...e,...await this.initializeBaseRequest(e),responseMode:e.responseMode||I.QUERY,authenticationScheme:M.BEARER},n=await this.buildOauthClientConfiguration(t.authority,t.correlationId,void 0,void 0,e.azureCloudOptions),r=new ni(n);return this.logger.verbose("Auth code client created",t.correlationId),r.getAuthCodeUrl(t)}async acquireTokenByCode(e,t){this.logger.info("acquireTokenByCode called"),e.state&&t&&(this.logger.info("acquireTokenByCode - validating state"),this.validateState(e.state,t.state||""),t={...t,state:""});const n={...e,...await this.initializeBaseRequest(e),authenticationScheme:M.BEARER},r=this.initializeServerTelemetryManager(871,n.correlationId);try{const i=await this.buildOauthClientConfiguration(n.authority,n.correlationId,r,void 0,e.azureCloudOptions),o=new ni(i);return this.logger.verbose("Auth code client created",n.correlationId),await o.acquireToken(n,t)}catch(e){throw e instanceof j&&e.setCorrelationId(n.correlationId),r.cacheFailedRequest(e),e}}async acquireTokenByRefreshToken(e){this.logger.info("acquireTokenByRefreshToken called",e.correlationId);const t={...e,...await this.initializeBaseRequest(e),authenticationScheme:M.BEARER},n=this.initializeServerTelemetryManager(872,t.correlationId);try{const r=await this.buildOauthClientConfiguration(t.authority,t.correlationId,n,void 0,e.azureCloudOptions),i=new ri(r);return this.logger.verbose("Refresh token client created",t.correlationId),await i.acquireToken(t)}catch(e){throw e instanceof j&&e.setCorrelationId(t.correlationId),n.cacheFailedRequest(e),e}}async acquireTokenSilent(e){const t={...e,...await this.initializeBaseRequest(e),forceRefresh:e.forceRefresh||!1},n=this.initializeServerTelemetryManager(62,t.correlationId,t.forceRefresh);try{const r=await this.buildOauthClientConfiguration(t.authority,t.correlationId,n,void 0,e.azureCloudOptions),i=new ii(r);return this.logger.verbose("Silent flow client created",t.correlationId),await i.acquireToken(t)}catch(e){throw e instanceof j&&e.setCorrelationId(t.correlationId),n.cacheFailedRequest(e),e}}async acquireTokenByUsernamePassword(e){this.logger.info("acquireTokenByUsernamePassword called",e.correlationId);const t={...e,...await this.initializeBaseRequest(e)},n=this.initializeServerTelemetryManager(371,t.correlationId);try{const r=await this.buildOauthClientConfiguration(t.authority,t.correlationId,n,void 0,e.azureCloudOptions),i=new yo(r);return this.logger.verbose("Username password client created",t.correlationId),await i.acquireToken(t)}catch(e){throw e instanceof j&&e.setCorrelationId(t.correlationId),n.cacheFailedRequest(e),e}}getTokenCache(){return this.logger.info("getTokenCache called"),this.tokenCache}validateState(e,t){if(!e)throw Vi.createStateNotFoundError();if(e!==t)throw Le(X)}getLogger(){return this.logger}setLogger(e){this.logger=e}async buildOauthClientConfiguration(e,t,n,r,i){this.logger.verbose("buildOauthClientConfiguration called",t);const o=i||this.config.auth.azureCloudOptions,s=await this.createAuthority(e,t,r,o);return this.logger.info(`Building oauth client configuration with the following authority: ${s.tokenEndpoint}.`,t),n?.updateRegionDiscoveryMetadata(s.regionDiscoveryMetadata),{authOptions:{clientId:this.config.auth.clientId,authority:s,clientCapabilities:this.config.auth.clientCapabilities},loggerOptions:{logLevel:this.config.system.loggerOptions.logLevel,loggerCallback:this.config.system.loggerOptions.loggerCallback,piiLoggingEnabled:this.config.system.loggerOptions.piiLoggingEnabled,correlationId:t},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.cryptoProvider,networkInterface:this.config.system.networkClient,storageInterface:this.storage,serverTelemetryManager:n,clientCredentials:{clientSecret:this.clientSecret,clientAssertion:await this.getClientAssertion(s)},libraryInfo:{sku:Sn,version:vo,cpu:process.arch||u.EMPTY_STRING,os:process.platform||u.EMPTY_STRING},telemetry:this.config.telemetry,persistencePlugin:this.config.cache.cachePlugin,serializableCache:this.tokenCache}}async getClientAssertion(e){return this.developerProvidedClientAssertion&&(this.clientAssertion=go.fromAssertion(await ti(this.developerProvidedClientAssertion,this.config.auth.clientId,e.tokenEndpoint))),this.clientAssertion&&{assertion:this.clientAssertion.getJwt(this.cryptoProvider,this.config.auth.clientId,e.tokenEndpoint),assertionType:Tn}}async initializeBaseRequest(e){return this.logger.verbose("initializeRequestScopes called",e.correlationId),e.authenticationScheme&&e.authenticationScheme===M.POP&&this.logger.verbose("Authentication Scheme 'pop' is not supported yet, setting Authentication Scheme to 'Bearer' for request",e.correlationId),e.authenticationScheme=M.BEARER,this.config.cache.claimsBasedCachingEnabled&&e.claims&&!Ut.isEmptyObj(e.claims)&&(e.requestedClaimsHash=await this.cryptoProvider.hashString(e.claims)),{...e,scopes:[...e&&e.scopes||[],...l],correlationId:e&&e.correlationId||this.cryptoProvider.createNewGuid(),authority:e.authority||this.config.auth.authority}}initializeServerTelemetryManager(e,t,n){const r={clientId:this.config.auth.clientId,correlationId:t,apiId:e,forceRefresh:n||!1};return new Rn(r,this.storage)}async createAuthority(e,t,n,r){this.logger.verbose("createAuthority called",t);const i=vr.generateAuthority(e,r),o={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,azureRegionConfiguration:n,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache};return Dr(i,this.config.system.networkClient,this.storage,o,this.logger,t)}clearCache(){this.storage.clear()}}class Io{async listenForAuthCode(e,t){if(this.server)throw Vi.createLoopbackServerAlreadyExistsError();return new Promise(((n,r)=>{this.server=si.createServer(((i,o)=>{const s=i.url;if(!s)return o.end(t||"Error occurred loading redirectUrl"),void r(Vi.createUnableToLoadRedirectUrlError());if(s===u.FORWARD_SLASH)return void o.end(e||"Auth code was successfully acquired. You can close this window now.");const a=this.getRedirectUri(),c=zt(new URL(s,a).search)||{};c.code&&(o.writeHead(302,{location:a}),o.end()),c.error&&o.end(t||`Error occurred: ${c.error}`),n(c)})),this.server.listen(0,"127.0.0.1")}))}getRedirectUri(){if(!this.server||!this.server.listening)throw Vi.createNoLoopbackServerExistsError();const e=this.server.address();if(!e||"string"==typeof e||!e.port)throw this.closeServer(),Vi.createInvalidLoopbackAddressTypeError();const t=e&&e.port;return`${_n}${bn}:${t}`}closeServer(){this.server&&(this.server.close(),"function"==typeof this.server.closeAllConnections&&this.server.closeAllConnections(),this.server.unref(),this.server=void 0)}}class Ao extends Lr{constructor(e){super(e)}async acquireToken(e){const t=await this.getDeviceCode(e);e.deviceCodeCallback(t);const n=Ge(),r=await this.acquireTokenWithDeviceCode(e,t),i=new ei(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return i.validateTokenResponse(r),i.handleServerTokenResponse(r,this.authority,n,e)}async getDeviceCode(e){const t=this.createExtraQueryParameters(e),n=jt.appendQueryString(this.authority.deviceCodeEndpoint,t),r=this.createQueryString(e),i=this.createTokenRequestHeaders(),o={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};return this.executePostRequestToDeviceCodeEndpoint(n,r,i,o)}createExtraQueryParameters(e){const t=new Nr;return e.extraQueryParameters&&t.addExtraQueryParameters(e.extraQueryParameters),t.createQueryString()}async executePostRequestToDeviceCodeEndpoint(e,t,n,r){const{body:{user_code:i,device_code:o,verification_uri:s,expires_in:a,interval:c,message:u}}=await this.networkManager.sendPostRequest(r,e,{body:t,headers:n});return{userCode:i,deviceCode:o,verificationUri:s,expiresIn:a,interval:c,message:u}}createQueryString(e){const t=new Nr;return t.addScopes(e.scopes),t.addClientId(this.config.authOptions.clientId),e.extraQueryParameters&&t.addExtraQueryParameters(e.extraQueryParameters),(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&t.addClaims(e.claims,this.config.authOptions.clientCapabilities),t.createQueryString()}continuePolling(e,t,n){if(n)throw this.logger.error("Token request cancelled by setting DeviceCodeRequest.cancel = true"),Le(le);if(t&&t<e&&Ge()>t)throw this.logger.error(`User defined timeout for device code polling reached. The timeout was set for ${t}`),Le(we);if(Ge()>e)throw t&&this.logger.verbose(`User specified timeout ignored as the device code has expired before the timeout elapsed. The user specified timeout was set for ${t}`),this.logger.error(`Device code expired. Expiration time of device code was ${e}`),Le(de);return!0}async acquireTokenWithDeviceCode(e,t){const n=this.createTokenQueryParameters(e),r=jt.appendQueryString(this.authority.tokenEndpoint,n),i=this.createTokenRequestBody(e,t),o=this.createTokenRequestHeaders(),s=e.timeout?Ge()+e.timeout:void 0,a=Ge()+t.expiresIn,c=1e3*t.interval;for(;this.continuePolling(a,s,e.cancel);){const t={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid},n=await this.executePostToTokenEndpoint(r,i,o,t,e.correlationId);if(!n.body||!n.body.error)return this.logger.verbose("Authorization completed successfully. Polling stopped."),n.body;if(n.body.error!==u.AUTHORIZATION_PENDING)throw this.logger.info("Unexpected error in polling from the server"),l=q,d=n.body.error,new j(l,d?`${H[l]} ${d}`:H[l]);this.logger.info("Authorization pending. Continue polling."),await Ye(c)}var l,d;throw this.logger.error("Polling stopped for unknown reasons."),Le(he)}createTokenRequestBody(e,t){const n=new Nr;n.addScopes(e.scopes),n.addClientId(this.config.authOptions.clientId),n.addGrantType("device_code"),n.addDeviceCode(t.deviceCode);const r=e.correlationId||this.config.cryptoInterface.createNewGuid();return n.addCorrelationId(r),n.addClientInfo(),n.addLibraryInfo(this.config.libraryInfo),n.addApplicationTelemetry(this.config.telemetry.application),n.addThrottling(),this.serverTelemetryManager&&n.addServerTelemetry(this.serverTelemetryManager),(!Ut.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&n.addClaims(e.claims,this.config.authOptions.clientCapabilities),n.createQueryString()}}class wo extends Co{constructor(e){super(e),this.config.broker.nativeBrokerPlugin&&(this.config.broker.nativeBrokerPlugin.isBrokerAvailable?(this.nativeBrokerPlugin=this.config.broker.nativeBrokerPlugin,this.nativeBrokerPlugin.setLogger(this.config.system.loggerOptions)):this.logger.warning("NativeBroker implementation was provided but the broker is unavailable.")),this.skus=Rn.makeExtraSkuString({libraryName:Sn,libraryVersion:vo})}async acquireTokenByDeviceCode(e){this.logger.info("acquireTokenByDeviceCode called",e.correlationId);const t=Object.assign(e,await this.initializeBaseRequest(e)),n=this.initializeServerTelemetryManager(671,t.correlationId);try{const r=await this.buildOauthClientConfiguration(t.authority,t.correlationId,n,void 0,e.azureCloudOptions),i=new Ao(r);return this.logger.verbose("Device code client created",t.correlationId),await i.acquireToken(t)}catch(e){throw e instanceof j&&e.setCorrelationId(t.correlationId),n.cacheFailedRequest(e),e}}async acquireTokenInteractive(e){const t=e.correlationId||this.cryptoProvider.createNewGuid();this.logger.trace("acquireTokenInteractive called",t);const{openBrowser:n,successTemplate:r,errorTemplate:i,windowHandle:o,loopbackClient:s,...a}=e;if(this.nativeBrokerPlugin){const n={...a,clientId:this.config.auth.clientId,scopes:e.scopes||l,redirectUri:`${_n}${bn}`,authority:e.authority||this.config.auth.authority,correlationId:t,extraParameters:{...a.extraQueryParameters,...a.tokenQueryParameters,[Dn]:this.skus},accountId:a.account?.nativeAccountId};return this.nativeBrokerPlugin.acquireTokenInteractive(n,o)}const{verifier:c,challenge:d}=await this.cryptoProvider.generatePkceCodes(),h=s||new Io;let f={},p=null;try{const o=h.listenForAuthCode(r,i).then((e=>{f=e})).catch((e=>{p=e})),s=await this.waitForRedirectUri(h),g={...a,correlationId:t,scopes:e.scopes||l,redirectUri:s,responseMode:I.QUERY,codeChallenge:d,codeChallengeMethod:C.S256},m=await this.getAuthCodeUrl(g);if(await n(m),await o,p)throw p;if(f.error)throw new Ln(f.error,f.error_description,f.suberror);if(!f.code)throw Vi.createNoAuthCodeInResponseError();const v=f.client_info,y={code:f.code,codeVerifier:c,clientInfo:v||u.EMPTY_STRING,...g};return await this.acquireTokenByCode(y)}finally{h.closeServer()}}async acquireTokenSilent(e){const t=e.correlationId||this.cryptoProvider.createNewGuid();if(this.logger.trace("acquireTokenSilent called",t),this.nativeBrokerPlugin){const n={...e,clientId:this.config.auth.clientId,scopes:e.scopes||l,redirectUri:`${_n}${bn}`,authority:e.authority||this.config.auth.authority,correlationId:t,extraParameters:{...e.tokenQueryParameters,[Dn]:this.skus},accountId:e.account.nativeAccountId,forceRefresh:e.forceRefresh||!1};return this.nativeBrokerPlugin.acquireTokenSilent(n)}return super.acquireTokenSilent(e)}async signOut(e){if(this.nativeBrokerPlugin&&e.account.nativeAccountId){const t={clientId:this.config.auth.clientId,accountId:e.account.nativeAccountId,correlationId:e.correlationId||this.cryptoProvider.createNewGuid()};await this.nativeBrokerPlugin.signOut(t)}await this.getTokenCache().removeAccount(e.account)}async getAllAccounts(){if(this.nativeBrokerPlugin){const e=this.cryptoProvider.createNewGuid();return this.nativeBrokerPlugin.getAllAccounts(this.config.auth.clientId,e)}return this.getTokenCache().getAllAccounts()}async waitForRedirectUri(e){return new Promise(((t,n)=>{let r=0;const i=setInterval((()=>{if(50<r)return clearInterval(i),void n(Vi.createLoopbackServerTimeoutError());try{const n=e.getRedirectUri();return clearInterval(i),void t(n)}catch(e){return e instanceof j&&e.errorCode===Li?void r++:(clearInterval(i),void n(e))}}),100)}))}}class So extends Lr{constructor(e,t){super(e),this.appTokenProvider=t}async acquireToken(e){if(e.skipCache||e.claims)return this.executeTokenRequest(e,this.authority);const[t,n]=await this.getCachedAuthenticationResult(e,this.config,this.cryptoUtils,this.authority,this.cacheManager,this.serverTelemetryManager);if(t){if(n===U){this.logger.info("ClientCredentialClient:getCachedAuthenticationResult - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed.");const t=!0;await this.executeTokenRequest(e,this.authority,t)}return t}return this.executeTokenRequest(e,this.authority)}async getCachedAuthenticationResult(e,t,n,r,i,o){const s=t,a=t;let c,u=N;s.serializableCache&&s.persistencePlugin&&(c=new Zr(s.serializableCache,!1),await s.persistencePlugin.beforeCacheAccess(c));const l=this.readAccessTokenFromCache(r,a.managedIdentityId?.id||s.authOptions.clientId,new Ft(e.scopes||[]),i);return s.serializableCache&&s.persistencePlugin&&c&&await s.persistencePlugin.afterCacheAccess(c),l?We(l.expiresOn,s.systemOptions?.tokenRenewalOffsetSeconds||300)?(o?.setCacheOutcome(L),[null,L]):(l.refreshOn&&We(l.refreshOn.toString(),0)&&(u=U,o?.setCacheOutcome(U)),[await ei.generateAuthenticationResult(n,r,{account:null,idToken:null,accessToken:l,refreshToken:null,appMetadata:null},!0,e),u]):(o?.setCacheOutcome(D),[null,D])}readAccessTokenFromCache(e,t,n,r){const i={homeAccountId:u.EMPTY_STRING,environment:e.canonicalAuthorityUrlComponents.HostNameAndPort,credentialType:S.ACCESS_TOKEN,clientId:t,realm:e.tenant,target:Ft.createSearchScopes(n.asArray())},o=r.getAccessTokensByFilter(i);if(o.length<1)return null;if(o.length>1)throw Le(re);return o[0]}async executeTokenRequest(e,t,n){let r,i;if(this.appTokenProvider){this.logger.info("Using appTokenProvider extensibility.");const t={correlationId:e.correlationId,tenantId:this.config.authOptions.authority.tenant,scopes:e.scopes,claims:e.claims};i=Ge();const n=await this.appTokenProvider(t);r={access_token:n.accessToken,expires_in:n.expiresInSeconds,refresh_in:n.refreshInSeconds,token_type:M.BEARER}}else{const n=this.createTokenQueryParameters(e),o=jt.appendQueryString(t.tokenEndpoint,n),s=await this.createTokenRequestBody(e),a=this.createTokenRequestHeaders(),c={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};this.logger.info("Sending token request to endpoint: "+t.tokenEndpoint),i=Ge();const u=await this.executePostToTokenEndpoint(o,s,a,c,e.correlationId);r=u.body,r.status=u.status}const o=new ei(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return o.validateTokenResponse(r,n),await o.handleServerTokenResponse(r,this.authority,i,e)}async createTokenRequestBody(e){const t=new Nr;t.addClientId(this.config.authOptions.clientId),t.addScopes(e.scopes,!1),t.addGrantType("client_credentials"),t.addLibraryInfo(this.config.libraryInfo),t.addApplicationTelemetry(this.config.telemetry.application),t.addThrottling(),this.serverTelemetryManager&&t.addServerTelemetry(this.serverTelemetryManager);const n=e.correlationId||this.config.cryptoInterface.createNewGuid();t.addCorrelationId(n),this.config.clientCredentials.clientSecret&&t.addClientSecret(this.config.clientCredentials.clientSecret);const r=e.clientAssertion||this.config.clientCredentials.clientAssertion;return r&&(t.addClientAssertion(await ti(r.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),t.addClientAssertionType(r.assertionType)),(!Ut.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&t.addClaims(e.claims,this.config.authOptions.clientCapabilities),t.createQueryString()}}class To extends Lr{constructor(e){super(e)}async acquireToken(e){if(this.scopeSet=new Ft(e.scopes||[]),this.userAssertionHash=await this.cryptoUtils.hashString(e.oboAssertion),e.skipCache||e.claims)return this.executeTokenRequest(e,this.authority,this.userAssertionHash);try{return await this.getCachedAuthenticationResult(e)}catch(t){return await this.executeTokenRequest(e,this.authority,this.userAssertionHash)}}async getCachedAuthenticationResult(e){const t=this.readAccessTokenFromCacheForOBO(this.config.authOptions.clientId,e);if(!t)throw this.serverTelemetryManager?.setCacheOutcome(D),this.logger.info("SilentFlowClient:acquireCachedToken - No access token found in cache for the given properties."),Le(Ae);if(We(t.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.serverTelemetryManager?.setCacheOutcome(L),this.logger.info(`OnbehalfofFlow:getCachedAuthenticationResult - Cached access token is expired or will expire within ${this.config.systemOptions.tokenRenewalOffsetSeconds} seconds.`),Le(Ae);const n=this.readIdTokenFromCacheForOBO(t.homeAccountId);let r,i=null;if(n){r=Ke(n.secret,to.base64Decode);const e=r.oid||r.sub,t={homeAccountId:n.homeAccountId,environment:n.environment,tenantId:n.realm,username:u.EMPTY_STRING,localAccountId:e||u.EMPTY_STRING};i=this.cacheManager.readAccountFromCache(t)}return this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),ei.generateAuthenticationResult(this.cryptoUtils,this.authority,{account:i,accessToken:t,idToken:n,refreshToken:null,appMetadata:null},!0,e,r)}readIdTokenFromCacheForOBO(e){const t={homeAccountId:e,environment:this.authority.canonicalAuthorityUrlComponents.HostNameAndPort,credentialType:S.ID_TOKEN,clientId:this.config.authOptions.clientId,realm:this.authority.tenant},n=this.cacheManager.getIdTokensByFilter(t);return Object.values(n).length<1?null:Object.values(n)[0]}readAccessTokenFromCacheForOBO(e,t){const n=t.authenticationScheme||M.BEARER,r={credentialType:n&&n.toLowerCase()!==M.BEARER.toLowerCase()?S.ACCESS_TOKEN_WITH_AUTH_SCHEME:S.ACCESS_TOKEN,clientId:e,target:Ft.createSearchScopes(this.scopeSet.asArray()),tokenType:n,keyId:t.sshKid,requestedClaimsHash:t.requestedClaimsHash,userAssertionHash:this.userAssertionHash},i=this.cacheManager.getAccessTokensByFilter(r),o=i.length;if(o<1)return null;if(o>1)throw Le(re);return i[0]}async executeTokenRequest(e,t,n){const r=this.createTokenQueryParameters(e),i=jt.appendQueryString(t.tokenEndpoint,r),o=await this.createTokenRequestBody(e),s=this.createTokenRequestHeaders(),a={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid},c=Ge(),u=await this.executePostToTokenEndpoint(i,o,s,a,e.correlationId),l=new ei(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return l.validateTokenResponse(u.body),await l.handleServerTokenResponse(u.body,this.authority,c,e,void 0,n)}async createTokenRequestBody(e){const t=new Nr;t.addClientId(this.config.authOptions.clientId),t.addScopes(e.scopes),t.addGrantType("urn:ietf:params:oauth:grant-type:jwt-bearer"),t.addClientInfo(),t.addLibraryInfo(this.config.libraryInfo),t.addApplicationTelemetry(this.config.telemetry.application),t.addThrottling(),this.serverTelemetryManager&&t.addServerTelemetry(this.serverTelemetryManager);const n=e.correlationId||this.config.cryptoInterface.createNewGuid();t.addCorrelationId(n),t.addRequestTokenUse("on_behalf_of"),t.addOboAssertion(e.oboAssertion),this.config.clientCredentials.clientSecret&&t.addClientSecret(this.config.clientCredentials.clientSecret);const r=this.config.clientCredentials.clientAssertion;return r&&(t.addClientAssertion(await ti(r.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),t.addClientAssertionType(r.assertionType)),(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&t.addClaims(e.claims,this.config.authOptions.clientCapabilities),t.createQueryString()}}class Eo extends Co{constructor(e){super(e),this.setClientCredential(),this.appTokenProvider=void 0}SetAppTokenProvider(e){this.appTokenProvider=e}async acquireTokenByClientCredential(e){let t;this.logger.info("acquireTokenByClientCredential called",e.correlationId),e.clientAssertion&&(t={assertion:await ti(e.clientAssertion,this.config.auth.clientId),assertionType:Tn});const n=await this.initializeBaseRequest(e),r={...n,scopes:n.scopes.filter((e=>!l.includes(e)))},i={...e,...r,clientAssertion:t},o=new jt(i.authority).getUrlComponents().PathSegments[0];if(Object.values(m).includes(o))throw Le(Pe);const s={azureRegion:i.azureRegion,environmentRegion:process.env.REGION_NAME},a=this.initializeServerTelemetryManager(771,i.correlationId,i.skipCache);try{const t=await this.buildOauthClientConfiguration(i.authority,i.correlationId,a,s,e.azureCloudOptions),n=new So(t,this.appTokenProvider);return this.logger.verbose("Client credential client created",i.correlationId),await n.acquireToken(i)}catch(e){throw e instanceof j&&e.setCorrelationId(i.correlationId),a.cacheFailedRequest(e),e}}async acquireTokenOnBehalfOf(e){this.logger.info("acquireTokenOnBehalfOf called",e.correlationId);const t={...e,...await this.initializeBaseRequest(e)};try{const n=await this.buildOauthClientConfiguration(t.authority,t.correlationId,void 0,void 0,e.azureCloudOptions),r=new To(n);return this.logger.verbose("On behalf of client created",t.correlationId),await r.acquireToken(t)}catch(e){throw e instanceof j&&e.setCorrelationId(t.correlationId),e}}setClientCredential(){const e=!!this.config.auth.clientSecret,t=!!this.config.auth.clientAssertion,n=!(!this.config.auth.clientCertificate?.thumbprint&&!this.config.auth.clientCertificate?.thumbprintSha256||!this.config.auth.clientCertificate?.privateKey);if(!this.appTokenProvider){if(e&&t||t&&n||e&&n)throw Le(Ie);if(this.config.auth.clientSecret)this.clientSecret=this.config.auth.clientSecret;else if(this.config.auth.clientAssertion)this.developerProvidedClientAssertion=this.config.auth.clientAssertion;else{if(!n)throw Le(Ie);this.clientAssertion=this.config.auth.clientCertificate.thumbprintSha256?go.fromCertificateWithSha256Thumbprint(this.config.auth.clientCertificate.thumbprintSha256,this.config.auth.clientCertificate.privateKey,this.config.auth.clientCertificate.x5c):go.fromCertificate(this.config.auth.clientCertificate.thumbprint,this.config.auth.clientCertificate.privateKey,this.config.auth.clientCertificate.x5c)}}}}class _o{constructor(e,t,n,r){this.logger=e,this.nodeStorage=t,this.networkClient=n,this.cryptoProvider=r}async getServerTokenResponseAsync(e,t,n,r){return this.getServerTokenResponse(e)}getServerTokenResponse(e){let t,n;return e.body.expires_on&&(n=e.body.expires_on-Ge(),n>7200&&(t=n/2)),{status:e.status,access_token:e.body.access_token,expires_in:n,scope:e.body.resource,token_type:e.body.token_type,refresh_in:t,correlation_id:e.body.correlation_id||e.body.correlationId,error:"string"==typeof e.body.error?e.body.error:e.body.error?.code,error_description:e.body.message||("string"==typeof e.body.error?e.body.error_description:e.body.error?.message),error_codes:e.body.error_codes,timestamp:e.body.timestamp,trace_id:e.body.trace_id}}async acquireTokenWithManagedIdentity(e,t,n,r){const i=this.createRequest(e.resource,t),o=i.headers;o[h]=u.URL_FORM_CONTENT_TYPE;const s={headers:o};Object.keys(i.bodyParameters).length&&(s.body=i.computeParametersBodyString());const a=Ge();let c;try{c=i.httpMethod===yn?await this.networkClient.sendPostRequestAsync(i.computeUri(),s):await this.networkClient.sendGetRequestAsync(i.computeUri(),s)}catch(e){throw e instanceof j?e:Le(W)}const l=new ei(t.id,this.nodeStorage,this.cryptoProvider,this.logger,null,null),d=await this.getServerTokenResponseAsync(c,this.networkClient,i,s);return l.validateTokenResponse(d,r),l.handleServerTokenResponse(d,n,a,e)}getManagedIdentityUserAssignedIdQueryParameterKey(e){switch(e){case pn:return this.logger.info("[Managed Identity] Adding user assigned client id to the request."),"client_id";case gn:return this.logger.info("[Managed Identity] Adding user assigned resource id to the request."),"mi_res_id";case mn:return this.logger.info("[Managed Identity] Adding user assigned object id to the request."),"object_id";default:throw _i(pi)}}}_o.getValidatedEnvVariableUrlString=(e,t,n,r)=>{try{return new jt(t).urlString}catch(t){throw r.info(`[Managed Identity] ${n} managed identity is unavailable because the '${e}' environment variable is malformed.`),_i(Si[e])}};class bo{constructor(e,t){this.httpMethod=e,this._baseEndpoint=t,this.headers={},this.bodyParameters={},this.queryParameters={}}computeUri(){const e=new Nr;this.queryParameters&&e.addExtraQueryParameters(this.queryParameters);const t=e.createQueryString();return jt.appendQueryString(this._baseEndpoint,t)}computeParametersBodyString(){const e=new Nr;return this.bodyParameters&&e.addExtraQueryParameters(this.bodyParameters),e.createQueryString()}}class ko extends _o{constructor(e,t,n,r,i,o){super(e,t,n,r),this.identityEndpoint=i,this.identityHeader=o}static getEnvironmentVariables(){return[process.env[an],process.env[cn]]}static tryCreate(e,t,n,r){const[i,o]=ko.getEnvironmentVariables();if(!i||!o)return e.info(`[Managed Identity] ${hn.APP_SERVICE} managed identity is unavailable because one or both of the '${cn}' and '${an}' environment variables are not defined.`),null;const s=ko.getValidatedEnvVariableUrlString(an,i,hn.APP_SERVICE,e);return e.info(`[Managed Identity] Environment variables validation passed for ${hn.APP_SERVICE} managed identity. Endpoint URI: ${s}. Creating ${hn.APP_SERVICE} managed identity.`),new ko(e,t,n,r,i,o)}createRequest(e,t){const n=new bo(vn,this.identityEndpoint);return n.headers["X-IDENTITY-HEADER"]=this.identityHeader,n.queryParameters[nn]="2019-08-01",n.queryParameters[rn]=e,t.idType!==fn&&(n.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(t.idType)]=t.id),n}}var Ro=n(9896),Po=n(6928);const Oo="http://127.0.0.1:40342/metadata/identity/oauth2/token",Mo="N/A: himds executable exists",xo={win32:`${process.env.ProgramData}\\AzureConnectedMachineAgent\\Tokens\\`,linux:"/var/opt/azcmagent/tokens/"},No={win32:`${process.env.ProgramFiles}\\AzureConnectedMachineAgent\\himds.exe`,linux:"/opt/azcmagent/bin/himds"};class Do extends _o{constructor(e,t,n,r,i){super(e,t,n,r),this.identityEndpoint=i}static getEnvironmentVariables(){let e=process.env[an],t=process.env[ln];if(!e||!t){const n=No[process.platform];try{(0,Ro.accessSync)(n,Ro.constants.F_OK|Ro.constants.R_OK),e=Oo,t=Mo}catch(e){}}return[e,t]}static tryCreate(e,t,n,r,i){const[o,s]=Do.getEnvironmentVariables();if(!o||!s)return e.info(`[Managed Identity] ${hn.AZURE_ARC} managed identity is unavailable through environment variables because one or both of '${an}' and '${ln}' are not defined. ${hn.AZURE_ARC} managed identity is also unavailable through file detection.`),null;if(s===Mo)e.info(`[Managed Identity] ${hn.AZURE_ARC} managed identity is available through file detection. Defaulting to known ${hn.AZURE_ARC} endpoint: ${Oo}. Creating ${hn.AZURE_ARC} managed identity.`);else{const t=Do.getValidatedEnvVariableUrlString(an,o,hn.AZURE_ARC,e);t.endsWith("/")&&t.slice(0,-1),Do.getValidatedEnvVariableUrlString(ln,s,hn.AZURE_ARC,e),e.info(`[Managed Identity] Environment variables validation passed for ${hn.AZURE_ARC} managed identity. Endpoint URI: ${t}. Creating ${hn.AZURE_ARC} managed identity.`)}if(i.idType!==fn)throw _i(vi);return new Do(e,t,n,r,o)}createRequest(e){const t=new bo(vn,this.identityEndpoint.replace("localhost","127.0.0.1"));return t.headers[tn]="true",t.queryParameters[nn]="2019-11-01",t.queryParameters[rn]=e,t}async getServerTokenResponseAsync(e,t,n,r){let i;if(401===e.status){const o=e.headers["www-authenticate"];if(!o)throw _i(Ai);if(!o.includes("Basic realm="))throw _i(wi);const s=o.split("Basic realm=")[1];if(!xo.hasOwnProperty(process.platform))throw _i(mi);const a=xo[process.platform],c=Po.basename(s);if(!c.endsWith(".key"))throw _i(hi);if(a+c!==s)throw _i(fi);let u,l;try{u=await(0,Ro.statSync)(s).size}catch(e){throw _i(Ii)}if(u>4096)throw _i(gi);try{l=(0,Ro.readFileSync)(s,"utf-8")}catch(e){throw _i(Ii)}const d=`Basic ${l}`;this.logger.info("[Managed Identity] Adding authorization header to the request."),n.headers.Authorization=d;try{i=await t.sendGetRequestAsync(n.computeUri(),r)}catch(e){throw e instanceof j?e:Le(W)}}return this.getServerTokenResponse(i||e)}}class Lo extends _o{constructor(e,t,n,r,i){super(e,t,n,r),this.msiEndpoint=i}static getEnvironmentVariables(){return[process.env[dn]]}static tryCreate(e,t,n,r,i){const[o]=Lo.getEnvironmentVariables();if(!o)return e.info(`[Managed Identity] ${hn.CLOUD_SHELL} managed identity is unavailable because the '${dn} environment variable is not defined.`),null;const s=Lo.getValidatedEnvVariableUrlString(dn,o,hn.CLOUD_SHELL,e);if(e.info(`[Managed Identity] Environment variable validation passed for ${hn.CLOUD_SHELL} managed identity. Endpoint URI: ${s}. Creating ${hn.CLOUD_SHELL} managed identity.`),i.idType!==fn)throw _i(yi);return new Lo(e,t,n,r,o)}createRequest(e){const t=new bo(yn,this.msiEndpoint);return t.headers[tn]="true",t.bodyParameters[rn]=e,t}}const Uo="/metadata/identity/oauth2/token",Fo=`http://169.254.169.254${Uo}`;class qo extends _o{constructor(e,t,n,r,i){super(e,t,n,r),this.identityEndpoint=i}static tryCreate(e,t,n,r){let i;return process.env[sn]?(e.info(`[Managed Identity] Environment variable ${sn} for ${hn.IMDS} returned endpoint: ${process.env[sn]}`),i=qo.getValidatedEnvVariableUrlString(sn,`${process.env[sn]}${Uo}`,hn.IMDS,e)):(e.info(`[Managed Identity] Unable to find ${sn} environment variable for ${hn.IMDS}, using the default endpoint.`),i=Fo),new qo(e,t,n,r,i)}createRequest(e,t){const n=new bo(vn,this.identityEndpoint);return n.headers[tn]="true",n.queryParameters[nn]="2018-02-01",n.queryParameters[rn]=e,t.idType!==fn&&(n.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(t.idType)]=t.id),n}}class Ho extends _o{constructor(e,t,n,r,i,o){super(e,t,n,r),this.identityEndpoint=i,this.identityHeader=o}static getEnvironmentVariables(){return[process.env[an],process.env[cn],process.env[un]]}static tryCreate(e,t,n,r,i){const[o,s,a]=Ho.getEnvironmentVariables();if(!o||!s||!a)return e.info(`[Managed Identity] ${hn.SERVICE_FABRIC} managed identity is unavailable because one or all of the '${cn}', '${an}' or '${un}' environment variables are not defined.`),null;const c=Ho.getValidatedEnvVariableUrlString(an,o,hn.SERVICE_FABRIC,e);return e.info(`[Managed Identity] Environment variables validation passed for ${hn.SERVICE_FABRIC} managed identity. Endpoint URI: ${c}. Creating ${hn.SERVICE_FABRIC} managed identity.`),i.idType!==fn&&e.warning(`[Managed Identity] ${hn.SERVICE_FABRIC} user assigned managed identity is configured in the cluster, not during runtime. See also: https://learn.microsoft.com/en-us/azure/service-fabric/configure-existing-cluster-enable-managed-identity-token-service.`),new Ho(e,t,n,r,o,s)}createRequest(e,t){const n=new bo(vn,this.identityEndpoint);return n.headers.secret=this.identityHeader,n.queryParameters[nn]="2019-07-01-preview",n.queryParameters[rn]=e,t.idType!==fn&&(n.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(t.idType)]=t.id),n}}class zo{constructor(e,t,n,r){this.logger=e,this.nodeStorage=t,this.networkClient=n,this.cryptoProvider=r}async sendManagedIdentityTokenRequest(e,t,n,r){return zo.identitySource||(zo.identitySource=this.selectManagedIdentitySource(this.logger,this.nodeStorage,this.networkClient,this.cryptoProvider,t)),zo.identitySource.acquireTokenWithManagedIdentity(e,t,n,r)}allEnvironmentVariablesAreDefined(e){return Object.values(e).every((e=>void 0!==e))}getManagedIdentitySource(){return zo.sourceName=this.allEnvironmentVariablesAreDefined(Ho.getEnvironmentVariables())?hn.SERVICE_FABRIC:this.allEnvironmentVariablesAreDefined(ko.getEnvironmentVariables())?hn.APP_SERVICE:this.allEnvironmentVariablesAreDefined(Lo.getEnvironmentVariables())?hn.CLOUD_SHELL:this.allEnvironmentVariablesAreDefined(Do.getEnvironmentVariables())?hn.AZURE_ARC:hn.DEFAULT_TO_IMDS,zo.sourceName}selectManagedIdentitySource(e,t,n,r,i){const o=Ho.tryCreate(e,t,n,r,i)||ko.tryCreate(e,t,n,r)||Lo.tryCreate(e,t,n,r,i)||Do.tryCreate(e,t,n,r,i)||qo.tryCreate(e,t,n,r);if(!o)throw _i(Ci);return o}}class jo{constructor(e){this.config=function({managedIdentityIdParams:e,system:t}){const n=new bi(e),r=t?.loggerOptions||Yi;let i;if(i=t?.networkClient?t.networkClient:new ci(t?.proxyUrl,t?.customAgentOptions),!t?.disableInternalRetries){const e=new ki(3,1e3,kn);i=new Ri(i,e)}return{managedIdentityId:n,system:{loggerOptions:r,networkClient:i}}}(e||{}),this.logger=new Fn(this.config.system.loggerOptions,mo,vo);const t={canonicalAuthority:u.DEFAULT_AUTHORITY};jo.nodeStorage||(jo.nodeStorage=new so(this.logger,this.config.managedIdentityId.id,Cr,t)),this.networkClient=this.config.system.networkClient,this.cryptoProvider=new oo;const n={protocolMode:Be.AAD,knownAuthorities:[on],cloudDiscoveryMetadata:"",authorityMetadata:""};this.fakeAuthority=new vr(on,this.networkClient,jo.nodeStorage,n,this.logger,this.cryptoProvider.createNewGuid(),void 0,!0),this.fakeClientCredentialClient=new So({authOptions:{clientId:this.config.managedIdentityId.id,authority:this.fakeAuthority}}),this.managedIdentityClient=new zo(this.logger,jo.nodeStorage,this.networkClient,this.cryptoProvider)}async acquireToken(e){if(!e.resource)throw Lt(gt);const t={forceRefresh:e.forceRefresh,resource:e.resource.replace("/.default",""),scopes:[e.resource.replace("/.default","")],authority:this.fakeAuthority.canonicalAuthority,correlationId:this.cryptoProvider.createNewGuid()};if(t.forceRefresh)return this.managedIdentityClient.sendManagedIdentityTokenRequest(t,this.config.managedIdentityId,this.fakeAuthority);const[n,r]=await this.fakeClientCredentialClient.getCachedAuthenticationResult(t,this.config,this.cryptoProvider,this.fakeAuthority,jo.nodeStorage);if(n){if(r===U){this.logger.info("ClientCredentialClient:getCachedAuthenticationResult - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed.");const e=!0;await this.managedIdentityClient.sendManagedIdentityTokenRequest(t,this.config.managedIdentityId,this.fakeAuthority,e)}return n}return this.managedIdentityClient.sendManagedIdentityTokenRequest(t,this.config.managedIdentityId,this.fakeAuthority)}getManagedIdentitySource(){return zo.sourceName||this.managedIdentityClient.getManagedIdentitySource()}}class Bo{constructor(e,t){this.client=e,this.partitionManager=t}async beforeCacheAccess(e){const t=await this.partitionManager.getKey(),n=await this.client.get(t);e.tokenCache.deserialize(n)}async afterCacheAccess(e){if(e.cacheHasChanged){const t=e.tokenCache.getKVStore(),n=Object.values(t).filter((e=>$e.isAccountEntity(e)));if(n.length>0){const t=n[0],r=await this.partitionManager.extractKey(t);await this.client.set(r,e.tokenCache.serialize())}}}}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};(()=>{"use strict";var e=r;Object.defineProperty(e,"__esModule",{value:!0}),e.activate=async function(e){const n=new a.MicrosoftAuthenticationTelemetryReporter(e.extension.packageJSON.aiKey),r=await(0,s.createExperimentationService)(e,n,"vscode"!==t.env.uriScheme);l=u(r),e.subscriptions.push(t.workspace.onDidChangeConfiguration((async e=>{if(!e.affectsConfiguration("microsoft.useMsal")||l===u(r))return;const n=t.l10n.t("Reload");await t.window.showInformationMessage("Reload required",{modal:!0,detail:t.l10n.t("Microsoft Account configuration has been changed.")},n)===n&&t.commands.executeCommand("workbench.action.reloadWindow")}))),l&&"undefined"==typeof navigator?await o.activate(e,n):await i.activate(e,n.telemetryReporter)},e.deactivate=function(){l?o.deactivate():i.deactivate()};const t=n(1398),i=n(7773),o=n(8428),s=n(5803),a=n(2417),c=n(8377);function u(e){const n=t.workspace.getConfiguration("microsoft").inspect("useMsal");if(void 0!==n?.workspaceFolderValue)return c.default.debug(`Acquired MSAL enablement value from 'workspaceFolderValue'. Value: ${n.workspaceFolderValue}`),n.workspaceFolderValue;if(void 0!==n?.workspaceValue)return c.default.debug(`Acquired MSAL enablement value from 'workspaceValue'. Value: ${n.workspaceValue}`),n.workspaceValue;if(void 0!==n?.globalValue)return c.default.debug(`Acquired MSAL enablement value from 'globalValue'. Value: ${n.globalValue}`),n.globalValue;const r=e.getTreatmentVariable("vscode","microsoft.useMsal");return void 0!==r?(c.default.debug(`Acquired MSAL enablement value from 'exp'. Value: ${r}`),r):(c.default.debug("Acquired MSAL enablement value from default. Value: false"),!1)}let l})();var i=exports;for(var o in r)i[o]=r[o];r.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})})();
//# sourceMappingURL=https://main.vscode-cdn.net/sourcemaps/384ff7382de624fb94dbaf6da11977bba1ecd427/extensions/microsoft-authentication/dist/extension.js.map